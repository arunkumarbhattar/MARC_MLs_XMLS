<?xml version="1.0" encoding="utf-8"?>
<emails><email><emailId>20070102102403</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-01-02 10:24:03-0400</timestampReceived><subject>Building loop-aes with seperate Object-Directory</subject><body>

Hi



README (3.1e), Line 262-263:
- snip -
Both LINUX_SOURCE and KBUILD_OUTPUT must be specified when compiling for
2.6.x kernel with separate object directory.
- snip -

At least with 2.6.19 that isn't enough, i had to dig into the Makefile a little and i \
after i added the following parameter: USE_KBUILD=y
it worked.


Maybe an example would be better:

make LINUX_SOURCE=&lt;linux_source&gt; KBUILD_OUTPUT=&lt;objdir&gt; USE_KBUILD=y
e.g.
make LINUX_SOURCE=/usr/src/linux-2.6.19 KBUILD_OUTPUT=/usr/src/mykernel USE_KBUILD=y


And when you want to compile a kernel for a different machine, where you "install" \
the modules into a directory before transferring them over to the other machine, you \
also have to add the INSTALL_MOD_PATH-Parameter. e.g.:
INSTALL_MOD_PATH=&lt;objdir&gt;/modules
After that
&lt;objdir&gt;/modules/lib/modules/&lt;version&gt;
contains the modules ready to be transfered, including loop-aes in the \
&lt;objdir&gt;/modules/lib/modules/&lt;version&gt;/extra subdir (instead of the "block"-subdir \
with a "regular" build kernel/loop-aes).





-- 
Real Programmers consider "what you see is what you get" to be just as
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated,
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070207180211</emailId><senderName>"Antonio Di Salvo"</senderName><senderEmail>disalvo.antonio@gmail.com</senderEmail><timestampReceived>2007-02-07 18:02:11-0400</timestampReceived><subject>Secure overwrite of the ram memory</subject><body>

Hi,
I'm looking for an app that can wipe the contents of my ram. I already
know smem from THC, but it "only" runs on the unused memory of the
host machine, while I need to overwrite the whole thing (more or
less).
Is it that there is any standalone software, like memtest86, that can
do what I ask? If not, can I use memtest86 to do the job?

Thanks in advance,
Antonio

PS: sorry for my English ;-P

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070225142210</emailId><senderName>Max Vozeler</senderName><senderEmail>max@nusquama.org</senderEmail><timestampReceived>2007-02-25 14:22:10-0400</timestampReceived><subject>Merging ciphers into loop-AES</subject><body>

Hi Jari, hi all,

this one has been on my personal wishlist for a long time. I'd like
to describe my motivation and ask you what you think of the idea.

One of the larger complexities in the current packaging of loop-AES
for Debian stems from wanting to build the modules with correct
symbol versions for 2.6 kernels that use CONFIG_MODVERSIONS=y. 

The only way I've found was to combine loop-AES and ciphers in one
package and to build them together with a shared MODVERDIR. This
actually worked quite well until sometime around 2.6.16 or 2.6.17.
With more recent kernels, something broke and caused the cipher
modules to again log a warning about unversioned symbol from loop-AES
and consequently taint the kernel. 

  loop_twofish: no version for "md5_transform_CPUbyteorder_C" found:
  kernel tainted.

To work around this specific problem, I'm applying somewhat of a
hack that copies loop_*.c into the loop-AES directy and uses a
small custom 2.6 kbuild Makefile to do the build. I'm attaching
the Makefile I've built which should behave just like the actual
loop-AES Makefile for recent 2.6 kernels.

This approach has been pretty reliable over the last few kernel
revisions, but has the obvious disadvantage of not using the real
uptream Makefile and needing to be maintained separately.

I think the approach of building loop-AES and ciphers together 
could be applied in the kbuild Makefile that is generated by the 
main loop-AES Makefile and would make symbol versions of shared
symbols work correctly.

Original upstream tarball
-------------------------

This point may be specific to the way Debian packages are 
built, which I'll briefly outline below, but it could be that this
is also a factor for other distribution build systems.

Usually, a Debian package comprises of the verbatim original 
tarball (.orig.tar.gz) and a Debian-specific patch (.diff.gz) that
gets applied to it. It is generally recommended that Debian
packages use the unchanged upstream tarball so that changes are
limited to and visible in the Debian patch, and so that users
of the package can verify that the .orig.tar.gz really matches
the upstream tarball and is not backdoored, etc.

(The ability to verify the tarball is modulo compression, since
Debian infrastructure is currently limited to gzip and doesn't allow
use of bzip2. Users can still uncompress both upstream.tar.bz2 and
.orig.tar.gz and compare the resulting uncompressed tarball).

Since I've started to combine loop-AES and ciphers in one package,
retaining the original tarball was no longer possible. Instead, I've
tried different approaches that all turned out less than optimal:

 a) Include loop-AES.tar.bz2{,.sign} and ciphers.tar.bz2{,.sign}
    unchanged in the .orig.tar.gz; Then unpack them at buildtime,
    account for version number in the directory names and layer some
    kind of patch system on top of it so that any required changes to
    the upstream code can be applied.

    Downsides: Changes appear as diff-of-diff in the Debian
    .diff.gz; Much complexity at build-time.

 b) Unpack loop-AES.tar.bz2 and ciphers.tar.bz2 and create a
    new .orig.tar.gz with those unpacked sources. This allows
    direct changes to the code using the Debian .diff.gz, but
    no longer allows users to directly verify that the upstream
    sources have not been modified by me.

Neither of those approaches is really statisfying. If loop-AES 
and ciphers were combined in loop-AES.tar.bz2, we could take the
unchanged tarball, unbzip2, gzip, and use the result as base for the
package. This would make changes clearly visible in Debian .diff.gz
and allow users to easily verify the uncompressed tarball.

Proposal
--------

I think both points could be helped by having loop-AES and
ciphers be one software package in one tarball. It would make it
easier for users of ciphers to build and install the modules, and
last but not least would make my life as distribution package 
maintainer a bit easier. :-)

Downsides: Uncompressed tarball grows by ~90k. Users who don't 
need/want ciphers still get them and, if the cipher modules were
installed by default, an additional ~45k of disk space used.

What do you think? 

I'm more than happy to help with this change, be it by doing
research, testing or by submitting patches.

cheers,
Max

["Makefile-2.6" (text/plain)]

obj-m  := loop.o loop_twofish.o loop_serpent.o loop_blowfish.o
loop-y := patched-loop.o glue.o

# Use optimized assembler implementation if target is x86 processor
ifeq ($(CONFIG_X86),y)
    ifeq ($(CONFIG_X86_64),y)
# amd64
loop-y += aes-amd64.o md5-amd64.o
EXTRA_CFLAGS += -DAMD64_ASM
    else
# x86
loop-y += aes-x86.o md5-x86.o
EXTRA_CFLAGS += -DX86_ASM
    endif
else 
loop-y += aes.o md5.o
CFLAGS_aes.o := -DDATA_ALWAYS_ALIGNED=1
endif

ifeq ($(KEYSCRUB),y)
EXTRA_CFLAGS += -DCONFIG_BLK_DEV_LOOP_KEYSCRUB=1
endif

ifeq ($(PADLOCK),y)
EXTRA_CFLAGS += -DCONFIG_BLK_DEV_LOOP_PADLOCK=1
endif

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070409173432</emailId><senderName>"S. Sakar"</senderName><senderEmail>serkan.sakar@gmx.net</senderEmail><timestampReceived>2007-04-09 17:34:32-0400</timestampReceived><subject>loop-aes and busybox/initramfs-hook</subject><body>

hi,
I'm trying to integrate loop-aes into my ramdisk, but when I type the
password to unlock my gpgkey I get the error message
"Unable to detect home directory for uid 0" due to this codesegment:

if((getuid() == 0) &amp;&amp; gpgHomeDir &amp;&amp; gpgHomeDir[0]) {
	h = gpgHomeDir;
} else {
	if(!(p = getpwuid(getuid()))) {
		fprintf(stderr, _("Error: Unable to detect home directory for uid
%d\n"), (int)getuid());
		return NULL;
	}
	h = p-&gt;pw_dir;
}

First, the login/password features were not build into busybox, so I put
/etc/passwd , /etc/group, /etc/shadow, /etc/nsswitch.conf, /lib/libnss_*
into the initrd, but same error message.
Then i tried a busybox-binary with build-in login/password features, and
again no success.
I would be glad if someone could point me in the right direction.

Regards,
Serkan

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070527233115</emailId><senderName>"John Smith"</senderName><senderEmail>the.real.monkey.d.luffy@gmail.com</senderEmail><timestampReceived>2007-05-27 23:31:15-0400</timestampReceived><subject>Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

Hi,

I will soon build a new system and it's time to make a choice between
loop-aes and dm-crypt.
I will use full disk encryption, where only the bootlader and initrd
will be plaintext while residing in a separate partition.
Truecrypt will also be used and will run on top of the chosen device
mapper. (Yes, I will use 2 encryption systems simultaneously)

I've read that loop-aes is more secure than dm-crypt, but also the
contrary. However, the only justification I've seen was that there was
a bug in both dm-crypt and truecrypt, that, as of today, has been
fixed.


Some references:

Debian 4 (Etch) install manual
http://www.debian.org/releases/stable/amd64/ch06s03.html.en
-&gt; "The default method is dm-crypt (included in newer Linux kernels,
able to host LVM physical volumes), the other is loop-AES (older,
maintained separately from the Linux kernel tree). Unless you have
compelling reasons to do otherwise, it is recommended to use the
default."
=&gt; What would be the compelling reason here?

http://riseuplabs.org/grimoire/storage/encryption/loop-aes/
-&gt; "Loop-AES is more secure than dm-crypt (and possibly faster),
although it requires a custom kernel module and is more work to
install than dm-crypt."
=&gt; But no justification given regarding the security aspect.

http://mail.nl.linux.org/linux-crypto/2006-02/msg00037.html
-&gt; "Truecrypt, which is also device-mapper based, only very recently
attempted to fix a major security hole which Jari had been warning
people about for some time."
=&gt; As of 2006-02 it was fixed, so there is no problem with Truecrypt.
-&gt; "debian packages for loop-aes do not require a kernel recompile
unless you want to encrypt the root filesystem."
=&gt; Ok, so I need to recompile -_-

http://mail.nl.linux.org/linux-crypto/2006-09/msg00008.html
-&gt; "Both cryptoloop and dm-crypt in kernels prior to 2.6.10 are
vulnerable, and even recent dm-crypt still suffers from a weak crypto
implementation."
=&gt; I will be using 2.6.20, which allows for LRW mode and thus solve
the watermark problem.
-&gt; "dm-crypt... which leaks location of changed data in some unusual
situations."
=&gt; What exactly consists this leak and has it been fixed?




So, what are the current problems of each implementation (if any)?

Thank you.


BTW, this question as been itching me...
Does the act of upgrading the kernel goes without problems and
glitches, or is it "common" to be locked out of the encrypted system
(or even worse, to lose data) when an upgrade goes bad?

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070706142859</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-07-06 14:28:59-0400</timestampReceived><subject>uuencode -m - pitfall</subject><body>

Hi,

I'm in the process of tinkering with slackware 12.0 and found a nasty
pitfall. While 11.0 used "uuencode (GNU sharutils) 4.6.3", slackware
12.0 uses "uuencode - GMime 2.2.9"

The difference between those two is the length of output lines:

KvmUf1QL24tMm2WqNBngufef05ggcrePvKUj/InniYpWkkGvvVSWaD23PfjP

of GNU sharutils, and 

tC22uMJKMY1Rnun/EptRojfTdeURMgF4ny/2Mne06sYOag5sSEgWE+BC6UM/yuDjRI0LOxg4otDu

of GMime 2.2.9


This broke several scripts on my system which relied on the length of
output lines of GNU sharutils uuencode. Among them, the examples of
loop-aes.readme

As workaround for creating loop-aes v3 keys on systems with
GMime-uuencode you can use instead

openssl rand -base64 3120 | head -n 66 | tail -n 65 | gpg ...

gpg --gen-random 1 3120 | openssl enc -base64 | gpg ...

head -c 3120 /dev/random | openssl enc -base64 | gpg ...

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070805203749</emailId><senderName>"Jan Klod"</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-08-05 20:37:49-0400</timestampReceived><subject>initramfs and loop-aes</subject><body>

Hallo,

I have a question about loop-aes readme by Jari: is it assumed there that no
initramfs is used when booting kernel (before loop-aes setup, that use
initrd.gz)?
If so, how to deal with those initramfs images necessary to boot?
As I can't make it work, I am reading about how to create initramfs to
modprobe loop and losetup root file system... (How about losetup and mount
run time dependencies?)

I would advise to all those who try this to work with two equal partitions
or two hard drives, because it's possible that root encryption fails and
then if one has only created backup of some information not OS, he might
become really upset!

Jan

[Attachment #3 (text/html)]

Hallo,&lt;br&gt;&lt;br&gt;I have a question about loop-aes readme by Jari: is it assumed there \
that no initramfs is used when booting kernel (before loop-aes setup, that use \
initrd.gz)?&lt;br&gt;If so, how to deal with those initramfs images necessary to boot? \
&lt;br&gt;As I can't make it work, I am reading about how to create initramfs to \
modprobe loop and losetup root file system... (How about losetup and mount run time \
dependencies?)&lt;br&gt;&lt;br&gt;I would advise to all those who try this to work with two equal \
partitions or two hard drives, because it's possible that root encryption fails \
and then if one has only created backup of some information not OS, he might become \
really upset! &lt;br&gt;&lt;br&gt;Jan&lt;br&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070828213857</emailId><senderName>Jan Klod</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-08-28 21:38:57-0400</timestampReceived><subject>raid1 with loop-aes</subject><body>

Hi,

I created 2 equal sized partitions on separate disks:

/dev/hda2  --aes--&gt;  /dev/loop1
/dev/hdb4  --aes--&gt;  /dev/loop2

after copying some data to /dev/loop1, I used mdadm:

mdadm --create /dev/md0 --level 1 --raid-devices=2 --auto=yes missing 
/dev/loop1
mkfs -t ext3 /dev/loop2
mdadm --add /dev/md0 /dev/loop2

It took some time for kernel to finish syncing, I mounted partition and 
everything seemed to be just fine.
After rebooting there was no /dev/md0 and, if I do "mdadm --create .." 
again, it was syncing just as long!

How you made your encrypted raid1 partitions work?
I hope, raid1 doesn't have to do long syncing after every reboot - does it?
Does above described raid1 usage means that CPU is encrypting the same 
data twice?

--
Regards,
Jan

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071004092237</emailId><senderName>Miss Nafi Babingi</senderName><senderEmail>nafi_babingi01@yahoo.co.uk</senderEmail><timestampReceived>2007-10-04 09:22:37-0400</timestampReceived><subject>Hello Dearest New friend.</subject><body>

Hi dear, 
  how are you today i hope that every things is ok with you as it is my great \
pleassure to contact you in having communication with you, please i wish you will \
have the desire with me so that we can get to know each other better and see what \
happened in future. i will be very happy if you can write me through my email for \
easiest communication and to know all about each other, and also give you my pictures \
and details about me, here is my email (nafi_babingui@yahoo.co.uk) i will be waiting \
to hear from you as i wish you all the best for your day. your new friend.
  Nafi. 
 
       
---------------------------------
Yahoo! Mail now has unlimited storage, which means you can have spam control and more \
space for those important e-mails.


[Attachment #3 (text/html)]

&lt;div&gt;Hi dear, &lt;/div&gt;  &lt;div&gt;how are you today i hope that every things is ok with you \
as it is my great pleassure to contact you in having communication with you, please i \
wish you will have the desire with me so that we can get to know each other better \
and see what happened in future.&lt;br&gt;i will be very happy if you can write me through \
my email for easiest communication and to know all about each other, and also give \
you my pictures and details about me, here is my email (&lt;a \
href="mailto:nafi_babingui@yahoo.co.uk"&gt;nafi_babingui@yahoo.co.uk&lt;/a&gt;) i will be \
waiting to hear from you as i wish you all the best for your day.&lt;br&gt;your new \
friend.&lt;br&gt;  Nafi. &lt;/div&gt; &lt;p&gt;   &lt;hr size=1&gt;
&lt;a href="http://us.rd.yahoo.com/mailuk/taglines/gmail/important_emails/*http://us.rd.yahoo.com/evt=48525/*http://uk.mail.yahoo.com"&gt;Yahoo! \
Mail&lt;/a&gt; now has unlimited storage, which means you can have spam control and more \
space for those important e-mails.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071105131356</emailId><senderName>peterer</senderName><senderEmail>lotharster@gmail.com</senderEmail><timestampReceived>2007-11-05 13:13:56-0400</timestampReceived><subject>information about loop-aes encryption mode</subject><body>


Hello,

I'm trying to get information about loop-aes. Which mode of operation is
used when loop-aes is in multi-key-v3-mode?

The README file does not say much about this. 

Regards,

Peterer
-- 
View this message in context: \
http://www.nabble.com/information-about-loop-aes-encryption-mode-tf4751574.html#a13586678
 Sent from the Linux Crypto mailing list archive at Nabble.com.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071218193220</emailId><senderName>Jan Klod</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-12-18 19:32:20-0400</timestampReceived><subject>Who is booting IBM T42 or similar from USB stick?</subject><body>

Hi!

Today I tried to boot IBM T42 from USB stick, but it didn't suceeded. 
Perhaps I had to put in a stick before configuring BIOS, not after, but 
who knows.
Please give me known-to-work combinations of IBM ThinkPad and USB stick 
models, if you know some! Did you experienced problems with some 
particular USB stick models?
\I tried it with syslinux, but I'm not sure, if things went that far\

-- 
Jan


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071221012646</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-12-21 01:26:46-0400</timestampReceived><subject>Re: Who is booting IBM T42 or similar from USB stick?</subject><body>

&gt; Betreff: Who is booting IBM T42 or similar from USB stick?
&gt; Today I tried to boot IBM T42 from USB stick, but it didn't suceeded.

Hello Jan!

I´m glad you asked! Booting from USB storage is my thing ;-)
Since 2004 I´ve been using a Socket 754 Mainboard from MSI which supports booting \
from usb devices. As not all mainboards support this, my advice is:
1. Look on manufacturers´ web sites for the documentation of their mainboards.
2. In case you are faced with existing hardware you should plug in the usb \
stick/drive and then turn on the machine. 3. Take a look on the BIOS setup with usb \
device attached. Can it be selected as boot device? 4. Some BIOSes feature functions \
like "legacy device" which means usb devices (i.e. storage) becomes available to old \
OSes like DOS. Enable such "legacy" modes! 5. Some BIOSes list \
usb-zip/usb-hd/usb-floppy. Take a try...

When the PC starts, check if the indicator LED of your usb stick does something. Does \
the PC try to find a bootloader?

&gt; Please give me known-to-work combinations of IBM ThinkPad and USB stick 
&gt; models, if you know some! Did you experienced problems with some 
&gt; particular USB stick models?

A word on models/hardware:
All sticks were the same so far. Older usb 1.1 models are slower than usb 2.0 but do \
the same job anyway. The easiest way to get it done is syslinux! Prepare the \
usb-stick as described in loop-aes readme and you get a stick with bootloader and \
kernel on it. If you want more, try grub. I never used that but it should work, too. \
Of course, using flash card readers works also. The ugly thing her is: multi-slot \
card readers most often use the compact flash slot to start from! I got a newer model \
that uses the SD-slot :-) Such things remain undocumented, you need to try. The \
benefit of using micro-SD cards is the ability to destroy them in your hands while \
someone attacks your privacy. It´s less likely your being tortured once your keys are \
*physically* broken.

I´d be happy to read about your advances!

Kind regards,
Peter

-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071221111631</emailId><senderName>Jan Klod</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-12-21 11:16:31-0400</timestampReceived><subject>Re: Who is booting IBM T42 or similar from USB stick?</subject><body>

Peter_22@gmx.de wrote:
&gt; &gt; Betreff: Who is booting IBM T42 or similar from USB stick?
&gt; &gt; Today I tried to boot IBM T42 from USB stick, but it didn't suceeded.
&gt; &gt; 
&gt; 
&gt; Hello Jan!
&gt; 
&gt; I´m glad you asked! Booting from USB storage is my thing ;-)
&gt; Since 2004 I´ve been using a Socket 754 Mainboard from MSI which supports booting \
&gt; from usb devices. As not all mainboards support this, my advice is:
&gt; 1. Look on manufacturers´ web sites for the documentation of their mainboards.
&gt; 2. In case you are faced with existing hardware you should plug in the usb \
&gt; stick/drive and then turn on the machine. 
Most likely last one was a problem - I booted in enter setup w/o key 
inserted (else I have problems). People who are using DamnSmallLinux 
report that T42 boots from USB o.k., but that is a different situation. 
Additionally they claim it is possible, that one USB prepared to boot 
may work only on some of systems.
About Grub: does anyone managed to boot OS on HDD from USB? I tried this 
summer, but failed.
&gt; The benefit of using micro-SD cards is the ability to destroy them in your hands \
&gt; while someone attacks your privacy. It´s less likely your being tortured once your \
&gt; keys are *physically* broken. 
&gt; I´d be happy to read about your advances!
&gt; 
&gt; 
Why I prefer to use boot partition on USB? Actually I have no true 
reason to do it right now (It is nearly impossible, that such a 
sophisticated attack could be made against me), but, since I like to be 
sure about what I have done and I expect that attack risk to increase 
with the time, I boot from USB already now. I don't want to find myself 
new to it when there appear a real necessity.

BUT! That is close to impossible to rule out a possibility of leaking a 
key - how about when you sleep?! {I think, I know how to solve a 
problem, but that requires much more to do}

And about physical destruction - that is only effective in some cases, 
because *are you crazy enough to destroy the only key*?! I mean the case 
when it decrypts data you have worked for long and hard!

I don't have T42 yet - it is making a transatlantic trip. I'll send 
feedback about setting up syslinux in case there is something unusual.

PS: if someone wants to steal your data really bad, why not to install a 
small transmitter, that captures I/O from USB and keyboard! {again 
problems and you cannot be really sure}
Sometimes I think if it is possible to build a information system, that 
logically ensures impossibility of leaking AND loosing data, when used 
properly.

-- 
Jan


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071221123841</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-12-21 12:38:41-0400</timestampReceived><subject>Re: Who is booting IBM T42 or similar from USB stick?</subject><body>

&gt; Most likely last one was a problem - I booted in enter setup w/o key 
&gt; inserted (else I have problems). People who are using DamnSmallLinux 
&gt; report that T42 boots from USB o.k., but that is a different situation. 
&gt; Additionally they claim it is possible, that one USB prepared to boot 
&gt; may work only on some of systems.
&gt; About Grub: does anyone managed to boot OS on HDD from USB? I tried this 
&gt; summer, but failed.

DamnSmallLinux and other compact solutions are a good example. If your mainboard &amp; \
usb combination works with one of these distros you can use it for loop-aes, too. But \
be cautious: Don´t mix up bootloader and kernel! It is one thing to get a bootloader \
working and another to build a kernel that starts from usb devices properly. In case \
you attach a hard drive via usb the kernel definitely needs usb-core/usb-storage and \
such to be built-in! I saw problems with some usb-wlan device after I ran a kernel \
with usb built into the kernel. Because of this I can only advice to stick to a \
standard kernel configuration and make no more changes to it than there are really \
needed.


&gt; I don't have T42 yet - it is making a transatlantic trip. I'll send 
&gt; feedback about setting up syslinux in case there is something unusual.

Before buying this T42 I suggest you inform yourself about its usb related features. \
Once again, the manual for the mainboard is the best source for this! My next \
mainboard will come with support for usb boot devices - or remain in the shop!

 
&gt; PS: if someone wants to steal your data really bad, why not to install a 
&gt; small transmitter, that captures I/O from USB and keyboard! {again 
&gt; problems and you cannot be really sure}
&gt; Sometimes I think if it is possible to build a information system, that 
&gt; logically ensures impossibility of leaking AND loosing data, when used 
&gt; properly.

Full disk data scrambling is needed to enforce warranty claims. When a drive dies I \
want to be in a position of sending it back to the manufacturer and ask for my money \
to be paid back. When a drive gets stolen I will rather destroy related keys than \
risking their robbery, too.

Kind regards,
Peter
-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071105145507</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-11-05 14:55:07-0400</timestampReceived><subject>Re: information about loop-aes encryption mode</subject><body>

peterer wrote:
&gt; I'm trying to get information about loop-aes. Which mode of operation is
&gt; used when loop-aes is in multi-key-v3-mode?

CBC mode, using IV that depends on one of the secret keys, unencrypted data
of the sector, and sector number.

More info here:
http://mail.nl.linux.org/linux-crypto/2006-05/msg00049.html
http://mail.nl.linux.org/linux-crypto/2006-05/msg00054.html

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070829112624</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-08-29 11:26:24-0400</timestampReceived><subject>Re: raid1 with loop-aes</subject><body>

Hi!

Since loop-aes.readme comprises eight examples of common use-cases as of today, may I \
suggest the admission of one or two examples for those recently asked software raid \
applications? There have been people using hardware raids with loop-aes before, as \
far as I can remember, but LVM2 seems to be the standard for software raids. A \
distinction between root-encryption with initrd modifications and plain volume raid \
seems reasonable. So, in case somebody from this mailing-list succeeds in raid \
encryption of either the *full* system or several partitions an example of this ought \
to be kept for the records.

Kind regards
Peter


-------- Original-Nachricht --------
&gt; Datum: Wed, 29 Aug 2007 00:38:57 +0300
&gt; Von: Jan Klod &lt;janklodvan@gmail.com&gt;
&gt; An: linux-crypto@nl.linux.org
&gt; Betreff: raid1 with loop-aes

&gt; Hi,
&gt; 
&gt; I created 2 equal sized partitions on separate disks:
&gt; 
&gt; /dev/hda2  --aes--&gt;  /dev/loop1
&gt; /dev/hdb4  --aes--&gt;  /dev/loop2
&gt; 
&gt; after copying some data to /dev/loop1, I used mdadm:
&gt; 
&gt; mdadm --create /dev/md0 --level 1 --raid-devices=2 --auto=yes missing 
&gt; /dev/loop1
&gt; mkfs -t ext3 /dev/loop2
&gt; mdadm --add /dev/md0 /dev/loop2
&gt; 
&gt; It took some time for kernel to finish syncing, I mounted partition and 
&gt; everything seemed to be just fine.
&gt; After rebooting there was no /dev/md0 and, if I do "mdadm --create .." 
&gt; again, it was syncing just as long!
&gt; 
&gt; How you made your encrypted raid1 partitions work?
&gt; I hope, raid1 doesn't have to do long syncing after every reboot - does
&gt; it?
&gt; Does above described raid1 usage means that CPU is encrypting the same 
&gt; data twice?
&gt; 
&gt; --
&gt; Regards,
&gt; Jan
&gt; 
&gt; -
&gt; Linux-crypto:  cryptography in and on the Linux system
&gt; Archive:       http://mail.nl.linux.org/linux-crypto/

-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal für Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070329033432</emailId><senderName>"Michael Bernstein"</senderName><senderEmail>mfbernstein@gmail.com</senderEmail><timestampReceived>2007-03-29 03:34:32-0400</timestampReceived><subject>Linux distro w/loop-aes</subject><body>

Greetings,

I've been following the Linux crypto scene on and off for a while now, and
from what I've seen, loop-aes is the most tried and true approach for
partition-level encryption in Linux. In particular, I'm hoping to create an
installation with an encrypted root, bootable only from an external USB key.

I was wondering if any of the major Linux distributions integrate loop-aes
and/or facilitiate its installation. I've general found extensive tweaks
lead to upgrade problems farther down the line, so a distro with loop-aes
built-in would make life much easier.

Thanks,

Michael

[Attachment #3 (text/html)]

Greetings,&lt;br&gt;&lt;br&gt;I've been following the Linux crypto scene on and off for a \
while now, and from what I've seen, loop-aes is the most tried and true approach \
for partition-level encryption in Linux. In particular, I'm hoping to create an \
installation with an encrypted root, bootable only from an external USB key. \
&lt;br&gt;&lt;br&gt;I was wondering if any of the major Linux distributions integrate loop-aes \
and/or facilitiate its installation. I've general found extensive tweaks lead to \
upgrade problems farther down the line, so a distro with loop-aes built-in would make \
life much easier. &lt;br&gt;&lt;br&gt;Thanks,&lt;br&gt;&lt;br&gt;Michael&lt;br&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070329054157</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-03-29 05:41:57-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

* Michael Bernstein &lt;mfbernstein@gmail.com&gt; wrote:

&gt; I was wondering if any of the major Linux distributions integrate loop-aes
&gt; and/or facilitiate its installation. I've general found extensive tweaks
&gt; lead to upgrade problems farther down the line, so a distro with loop-aes
&gt; built-in would make life much easier.

IIRC, knoppix comes with loop-aes 

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070329102806</emailId><senderName>Paul Walker</senderName><senderEmail>paul@black-sun.demon.co.uk</senderEmail><timestampReceived>2007-03-29 10:28:06-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

On Wed, Mar 28, 2007 at 11:34:32PM -0400, Michael Bernstein wrote:

&gt; I was wondering if any of the major Linux distributions integrate loop-aes
&gt; and/or facilitiate its installation. I've general found extensive tweaks

Debian makes it pretty easy; a simple "apt-get install
loop-aes-modules-2.6-amd64" was enough to pull in the modules for me.

They also supply a loop-aes-source package if you build your own kernel,
which you can use with some of their tools to create a loop-aes package of
your own.

-- 
Paul

The Internet is totally out of control, impossible to map accurately, and
being used far beyond its original intentions. So far, so good.
                -- Dr. Dobb's Journal May 1993

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070829182439</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-08-29 18:24:39-0400</timestampReceived><subject>Re: raid1 with loop-aes</subject><body>

Jan Klod wrote:
&gt; I created 2 equal sized partitions on separate disks:
&gt; 
&gt; /dev/hda2  --aes--&gt;  /dev/loop1
&gt; /dev/hdb4  --aes--&gt;  /dev/loop2
&gt; 
&gt; after copying some data to /dev/loop1, I used mdadm:
&gt; 
&gt; mdadm --create /dev/md0 --level 1 --raid-devices=2 --auto=yes missing
&gt; /dev/loop1
&gt; mkfs -t ext3 /dev/loop2
&gt; mdadm --add /dev/md0 /dev/loop2

So, you had a file system on /dev/loop1 and then added that same device to
/dev/md0, which overwrote part of your file system. I think you are setting
up this the wrong way.

1) RAID1 /dev/md0 is smaller than its component devices. RAID1 superblock
   has to fit somewhere.

2) Your setup mirrors plaintext, and then encrypts both component devices
   separately. That is twice the encryption work compared to encrypt first,
   and then mirror ciphertext.

Try something like this:

 mdadm --create /dev/md0 --level=1 --raid-devices=2 /dev/hda2 /dev/hdb4
 losetup -e AES128 -K /etc/foo.gpg /dev/loop1 /dev/md0
 mkfs -t ext3 /dev/loop1
 losetup -d /dev/loop1
 mount -t ext3 /dev/md0 /mnt -o loop=/dev/loop1,encryption=AES128,gpgkey=/etc/foo.gpg
 umount /mnt

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070831134915</emailId><senderName>Jan Klod</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-08-31 13:49:15-0400</timestampReceived><subject>Re: raid1 with loop-aes</subject><body>

Sure, that is a better way! Previously superblock was encrypted too 
(what information it contains?)

But why should one write:

losetup -d /dev/loop1
mount -t ext3 /dev/md0 /mnt -o loop=/dev/loop1,encryption=AES128,gpgkey=/etc/foo.gpg

insted of just:

mount /dev/loop1 /mnt ?


********************
Here I'll provide some information about how I set up my raid1 array for 
data storage:

1.  create 2 partitions of equal size (looks like it can be a little 
different) on separate disks
2.  install mdadm and execute these commands:

mdadm --create /dev/md0 --level=1 --raid-devices=2 /dev/hda2 /dev/hdb4

# if that makes an error, probably there was no /dev/md0 (use mknod)!
# after this command kernel synchronises both disks. To watch progress, execute \
"watch -n 1 cat /proc/mdstat" # I don't know how safe it is to proceed before \
synchornising is complete. 

losetup -e AES128 -K /etc/foo.gpg /dev/loop1 /dev/md0
mkfs -t ext2 /dev/loop1

# if you want to write some information, mount /dev/loop1 and do it here!

losetup -d /dev/loop1

3.  To make usage of encrypted raid1 convenient, I updated my gentoo's 
init scripts:

a) in checkroot init script after root partition has been checked insert

ebegin "Starting multi disk array"
	/sbin/mdadm -A /dev/md0 /dev/hda2 /dev/hdb4
	echo "20+ character password" | losetup -p 0 -e AES128 -K /etc/foo.gpg /dev/loop1 \
/dev/md0 eend $?

# use chmod to make file readable only to root
# these lines could be inserted anywhere else before filesystems in /etc/fstab are \
mounted (but make sure, that they will be executed!)

b) update /etc/fstab:
/dev/loop1 /mountpoint ext2 defaults 0 2

c) reboot to see, if everything works ok!

********************

How big vulnerability is that password written in init file?

-- 
Jan


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070901103443</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-09-01 10:34:43-0400</timestampReceived><subject>Re: raid1 with loop-aes</subject><body>

Jan Klod wrote:
&gt; Sure, that is a better way! Previously superblock was encrypted too
&gt; (what information it contains?)

Info about what component device that device is, and of what MD device.

&gt; But why should one write:
&gt; 
&gt; losetup -d /dev/loop1
&gt; mount -t ext3 /dev/md0 /mnt -o loop=/dev/loop1,encryption=AES128,gpgkey=/etc/foo.gpg
&gt; 
&gt; insted of just:
&gt; 
&gt; mount /dev/loop1 /mnt ?

When mount is told to set up loop device, it also updates /etc/mtab so that
umount knows to detach the loop device. Two ways of doing it:

1) mount -t ext3 /dev/md0 /mnt -o loop=/dev/loop1,encryption=AES128,gpgkey=/etc/foo.gpg
   umount /mnt

or

2) losetup -e AES128 -K /etc/foo.gpg /dev/loop1 /dev/md0
   mount -t ext3 /dev/loop1 /mnt
   umount /mnt
   losetup -d /dev/loop1

I prefer the first one. And when mount finds device and mount options from
/etc/fstab file, you can shrink the commands to:

   mount /mnt
   umount /mnt

&gt; a) in checkroot init script after root partition has been checked insert
&gt; 
&gt; ebegin "Starting multi disk array"
&gt;         /sbin/mdadm -A /dev/md0 /dev/hda2 /dev/hdb4

If you are using MSDOS style partition tables, then you can change partition
types using fdisk to type FD (Linux raid autodetect). In that case kernel
will set up those MD devices automatically when kernel boots.

Works ok for /boot and root file systems, root file system encrypted or not.
At least lilo bootloader can be configured to be linux software RAID1 aware,
and it will boot ok from either RAID1 component disk in case other RAID1
component disk has gone completely dead. I have tested this by disconnecting
a disk. Not sure if lilo bootloader recovers from errors smaller than "dead
disk", such as some reads completed ok and then some read errors.

&gt; echo "20+ character password" | losetup -p 0 -e AES128 -K /etc/foo.gpg /dev/loop1 /dev/md0

losetup has -P option that reads 65-line cleartext key file that isn't
wrapped in gpg encryption.

 head -c 3705 /dev/random | uuencode -m - | head -n 66 | tail -n 65 &gt;/etc/foo.txt

 losetup -e AES128 -P /etc/foo.txt /dev/loop1 /dev/md0

&gt; How big vulnerability is that password written in init file?

Root file system where those init scripts reside, must be encrypted.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070805210135</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-08-05 21:01:35-0400</timestampReceived><subject>Re: initramfs and loop-aes</subject><body>

"Jan Klod" &lt;janklodvan@gmail.com&gt; wrote:
&gt; I have a question about loop-aes readme by Jari: is it assumed there that
&gt; no
&gt; initramfs is used when booting kernel (before loop-aes setup, that use
&gt; initrd.gz)?

Root encryption requires a kernel which can boot the system *without* an initial \
ramdisk. This means you have to assure support for things like ext2/3, IDE or SATA \
and such is built into the kernel. Most linux distros ship with kernels failing to \
meet this requirement so you will therefore have to recompile them from source. To \
see if a kernel is suitable simply omit the initial ramdisk in your bootloader \
configuration.

&gt; If so, how to deal with those initramfs images necessary to boot?

Common linux distros like SuSE, Ubuntu... create an initial ramdisk as part of their \
installation routine. This has to be done since the same kernel image is used for a \
wider variety of computers. For root encryption you have to assure that every single \
of theses drivers gets built into your kernel because this initial ramdisk will not \
be at hand any longer!


&gt; As I can't make it work, I am reading about how to create initramfs to
&gt; modprobe loop and losetup root file system... (How about losetup and mount
&gt; run time dependencies?)

Loop-aes comes with a script called built-initrd.sh which takes care of everything \
concerning your new initial ramdisk. Configure the script in an editor properly, run \
it, an you will receive a working initial ramdisk just for your system. In case you \
change partitions or drives you will have to adapt &amp; re-run this script.

In case you have more questions just ask. You are free to provide configuration files \
giving others the opportunity to take a closer look at your discomforts.

Kind regards,
Peter
-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070806110302</emailId><senderName>"Jan Klod"</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-08-06 11:03:02-0400</timestampReceived><subject>Re: initramfs and loop-aes</subject><body>

&gt;To see if a kernel is suitable simply omit the initial ramdisk in your
bootloader configuration.
Thank you, this helped! I just had to change my grub.conf like this:

title=test
root (hd0,4)
kernel /boot/kernel- genkernel-x86-2.6.20-suspend2-r6 root=/dev/sda5
#root=/dev/ram0 init=/linuxrc ramdisk=4096 real_root=/dev/sda5
resume2=swap:/dev/sda6 doscsi
#initrd /boot/initramfs-genkernel-x86-2.6.20-suspend2-r6

It seams strange that root encryption failed anyway.
I used my own way to finish encrypted root setup:

    1.  when booted from livecd, I copied all my genoo filesystem (ext3) to
another partition on same disk, to convert to reiserfs and test if that
works - it worked O.K.
    2.  booted my ext3 system and changed all necessary things for root
encryption in reiserfs partition. (I changed DESTINATIONROOT=/mnt/sda5 in
build-initrd.sh)
    3.  created bootable USB.
    4.  set up encrypted partiton in my second hard drive and copied files
from prepared reiserfs partition on first hdd. (I could do this, using dd
command even faster than copying separate files, but that came across my
mind later)

Could this make any problem?

I'm happy that I can boot my kernel without initramfs now, but, as I am
planning to use hibernation, I would like to know if I can avoid initramfs
then (for example following Alon Bar-Lev's how-to)?

PS: it took me almost one month to build correctly configured kernel!! There
are really many possible options and I had to read a lot especially because
I didn't knew much about kernel and hardware... Also, I didn't wanted to
include anything unnecessary in my kernel.

[Attachment #3 (text/html)]

&lt;span class="q"&gt;&gt;To see if a kernel is suitable simply omit the initial ramdisk in \
your bootloader configuration.&lt;br&gt;&lt;/span&gt;Thank you, this helped! I just had to change \
my grub.conf like this:&lt;br&gt;&lt;br&gt;title=test&lt;br&gt;root (hd0,4) &lt;br&gt;kernel /boot/kernel-
genkernel-x86-2.6.20-suspend2&lt;div id="mb_2"&gt;-r6 root=/dev/sda5&lt;br&gt;#root=/dev/ram0 \
init=/linuxrc ramdisk=4096 real_root=/dev/sda5 resume2=swap:/dev/sda6 \
doscsi&lt;br&gt;#initrd /boot/initramfs-genkernel-x86-2.6.20-suspend2-r6&lt;br&gt; &lt;br&gt;It seams \
strange that root encryption failed anyway. &lt;br&gt;I used my own way to finish encrypted \
root setup: &lt;br&gt;&lt;br&gt;    1.  when booted from livecd, I copied all \
my genoo filesystem (ext3) to another partition on same disk, to convert to reiserfs \
and test if that works - it worked O.K.&lt;br&gt;    2.  booted my ext3 \
system and changed all necessary things for root encryption in reiserfs partition. (I \
changed DESTINATIONROOT=/mnt/sda5 in build-initrd.sh)&lt;br&gt;    3.  \
created bootable USB.&lt;br&gt;    4.  set up encrypted partiton in my \
second hard drive and copied files from prepared reiserfs partition on first hdd. (I \
could do this, using dd command even faster than copying separate files, but that \
came across my mind later)
&lt;br&gt;&lt;br&gt;Could this make any problem?&lt;br&gt;&lt;br&gt;I'm happy that I can boot
my kernel without initramfs now, but, as I am planning to use
hibernation, I would like to know if I can avoid initramfs then (for
example following Alon Bar-Lev's how-to)?
&lt;br&gt;&lt;br&gt;PS: it took me almost one month to build correctly configured
kernel!! There are really many possible options and I had to read a lot
especially because I didn't knew much about kernel and hardware...
Also, I didn't wanted to include anything unnecessary in my kernel.
&lt;/div&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070806192435</emailId><senderName>"Jan Klod"</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-08-06 19:24:35-0400</timestampReceived><subject>Re: initramfs and loop-aes</subject><body>

[Attachment #2 (multipart/alternative)]


After repeating loop-aes setup I'm sure, that it should work, but it
doesn't. I'll give you all configurations:

I'm using gentoo with suspend2-sources kernel v. 2.6.20, compiled loop-AES
v3.2a, dietlibc 0.30, util-linux 2.12r.
When booting from USB flashdrive, kernel boots ok until this:

RAMDISK: Compressed image found at block 0
Replacing swsusp.
No storage allocator is currently active. Rechecking weather we can use one.

Compression Driver: Argh! Nothing follows me in the pipeline!
Compressor didn't initialise okay.
Suspend2: Initialise modules failed!
VFS: Mounted root (minix filesystem) readonly.
Mounting /dev/sdc as /lib failed
md: stopping all md devices.
.
.
System halted.
.
.
(follow some suspend2 related messages)
Note that equal output comes if there is no encrypted root (I switch my sata
drives sata1,sata2 &lt;-&gt; sda, sdb). No password is asked.


--configurations--

syslinux.cfg:
default linux
timeout 0
prompt 0
label linux
kernel vmlinuz
append initrd=initrd.gz root=100 init=/linuxrc rootfstype=minix


build-initrd.sh :
USEDEVFS=0
USEPIVOT=1
BOOTDEV=/dev/sdc
BOOTTYPE=vfat
CRYPTROOT=/dev/sda1
ROOTTYPE=reiserfs
CIPHERTYPE=AES128
LOINIT="-I 0"
USEGPGKEY=1
GPGKEYFILE=keyfile
EXTERNALGPGFILES=0
EXTERNALGPGDEV=/dev/fd0
EXTERNALGPGTYPE=ext2
USEMODULE=1
INITRDONLY=0
SOURCEROOT=
DESTINATIONROOT=
DESTINATIONPREFIX=/boot
INITRDGZNAME=initrd.gz
ROOTLOOPINDEX=5
TEMPLOOPINDEX=7
LOOPMODPARAMS=""
UTF8KEYBMODE=0
LOADNATIONALKEYB=0
INITIALDELAY=0
MOUNTDELAY=0
TOOLSPROMPT=0
USEROOTSETUP=0
USEDIETLIBC=1

initrd.conf:
BOOTDEV=/dev/sdc            # partitionless USB-stick device
BOOTTYPE=vfat
CRYPTROOT=/dev/sda1
ROOTTYPE=reiserfs
CIPHERTYPE=AES128
LOADNATIONALKEYB=0
INITIALDELAY=0

/etc/fstab:
/dev/sda2    none            swap     sw,loop=/dev/loop6, encryption=AES128
0 0
/dev/loop5    /         reiserfs defaults      0 1
none            /proc         proc     defaults        0 0
none            /dev/shm      tmpfs    defaults        0 0


USB flashdisk directory:
modules-2.6.20-suspend2-r6 ---&gt; loop.ko
aespipe
gpg
initrd.conf
initrd.gz
insmod
ld-linux.so.2
ldlinux.sys
libc.so.6
libz.so.1
keyfile
losetup
syslinux.cfg
System.map-2.6.20-suspend2-r6
vmlinuz

kernel configuration is in attachment.
I would really appreciate some help!

[Attachment #5 (text/html)]

After repeating loop-aes setup I'm sure, that it should work, but it doesn't. \
I'll give you all configurations:&lt;br&gt;&lt;br&gt;I'm using gentoo with \
suspend2-sources kernel v. 2.6.20, compiled loop-AES v3.2a, dietlibc  0.30, \
util-linux 2.12r.&lt;br&gt;When booting from USB flashdrive, kernel boots ok until \
this:&lt;br&gt;&lt;br&gt;RAMDISK: Compressed image found at block 0 &lt;br&gt;Replacing swsusp.&lt;br&gt;No \
storage allocator is currently active. Rechecking weather we can use one. \
&lt;br&gt;Compression Driver: Argh! Nothing follows me in the pipeline!&lt;br&gt;Compressor \
didn't initialise okay.&lt;br&gt;Suspend2: Initialise modules failed!&lt;br&gt;VFS: Mounted \
root (minix filesystem) readonly.&lt;br&gt;Mounting /dev/sdc as /lib failed &lt;br&gt;md: \
stopping all md devices.&lt;br&gt;.&lt;br&gt;.&lt;br&gt;System halted.&lt;br&gt;.&lt;br&gt;.&lt;br&gt;(follow some \
suspend2 related messages)&lt;br&gt;Note that equal output comes if there is no encrypted \
root (I switch my sata drives sata1,sata2 &lt;-&gt; sda, sdb). No password is \
asked.&lt;br&gt;&lt;br&gt;&lt;br&gt;--configurations--&lt;br&gt;&lt;br&gt;syslinux.cfg:&lt;br&gt;default linux&lt;br&gt;timeout \
0&lt;br&gt;prompt 0&lt;br&gt;label linux&lt;br&gt;kernel vmlinuz&lt;br&gt;append initrd=initrd.gz root=100 \
init=/linuxrc rootfstype=minix &lt;br&gt;&lt;br&gt; &lt;br&gt;build-initrd.sh
&gt; &lt;br&gt;USEDEVFS=0&lt;br&gt;USEPIVOT=1&lt;br&gt;BOOTDEV=/dev/sdc&lt;br&gt;BOOTTYPE=vfat&lt;br&gt;CRYPTROOT=/dev/sda1&lt;br&gt;ROOTTYPE=reiserfs&lt;br&gt;CIPHERTYPE=AES128&lt;br&gt;LOINIT="-I \
&gt; 0"&lt;br&gt;USEGPGKEY=1&lt;br&gt;GPGKEYFILE=keyfile&lt;br&gt;EXTERNALGPGFILES=0&lt;br&gt;

EXTERNALGPGDEV=/dev/fd0&lt;br&gt;EXTERNALGPGTYPE=ext2&lt;br&gt;USEMODULE=1&lt;br&gt;INITRDONLY=0&lt;br&gt;SOUR \
CEROOT=&lt;br&gt;DESTINATIONROOT=&lt;br&gt;DESTINATIONPREFIX=/boot&lt;br&gt;INITRDGZNAME=initrd.gz&lt;br&gt;ROOTLOOPINDEX=5&lt;br&gt;TEMPLOOPINDEX=7&lt;br&gt;LOOPMODPARAMS=""
 &lt;br&gt;UTF8KEYBMODE=0&lt;br&gt;LOADNATIONALKEYB=0&lt;br&gt;INITIALDELAY=0&lt;br&gt;MOUNTDELAY=0&lt;br&gt;TOOLSPROMPT=0&lt;br&gt;USEROOTSETUP=0&lt;br&gt;USEDIETLIBC=1&lt;br&gt;&lt;br&gt;
 initrd.conf:&lt;br&gt;
BOOTDEV=/dev/sdc            # \
partitionless USB-stick device&lt;br&gt; BOOTTYPE=vfat&lt;br&gt;
CRYPTROOT=/dev/sda1&lt;br&gt;
ROOTTYPE=reiserfs&lt;br&gt;
CIPHERTYPE=AES128&lt;br&gt;
LOADNATIONALKEYB=0&lt;br&gt;
INITIALDELAY=0&lt;br&gt;
&lt;br&gt;/etc/fstab:&lt;br&gt;/dev/sda2    \
none            \
swap     sw,loop=/dev/loop6, encryption=AES128 0 0 \
&lt;br&gt;/dev/loop5    /         \
reiserfs defaults      0 \
1&lt;br&gt;none            \
/proc         proc     \
defaults        0 \
0&lt;br&gt;none            /dev/shm  \
    tmpfs    \
defaults        0 0&lt;br&gt;&lt;br&gt;&lt;br&gt;USB flashdisk \
                directory:&lt;br&gt;modules-2.6.20-suspend2-r6
 ---&gt; loop.ko&lt;br&gt;aespipe&lt;br&gt;gpg&lt;br&gt;initrd.conf&lt;br&gt;initrd.gz&lt;br&gt;insmod&lt;br&gt;ld-linux.s \
o.2&lt;br&gt;ldlinux.sys&lt;br&gt;libc.so.6&lt;br&gt;libz.so.1&lt;br&gt;keyfile&lt;br&gt;losetup&lt;br&gt;syslinux.cfg&lt;br&gt;System.map-2.6.20-suspend2-r6&lt;br&gt;vmlinuz&lt;br&gt;&lt;br&gt;kernel \
configuration is in attachment. &lt;br&gt;I would really appreciate some help!&lt;br&gt;


["config-suspend2.bz2" (application/x-bzip2)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070806193818</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-08-06 19:38:18-0400</timestampReceived><subject>Re: initramfs and loop-aes</subject><body>

On 8/6/07, Jan Klod &lt;janklodvan@gmail.com&gt; wrote:
&gt; After repeating loop-aes setup I'm sure, that it should work, but it
&gt; doesn't. I'll give you all configurations:

Please review the following, maybe it will help you:
http://wiki.tuxonice.net/EncryptedSwapAndRoot

Best Regards,
Alon Bar-Lev.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070806205559</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-08-06 20:55:59-0400</timestampReceived><subject>Re: initramfs and loop-aes</subject><body>

"Jan Klod" &lt;janklodvan@gmail.com&gt; wrote:
&gt; When booting from USB flashdrive, kernel boots ok until this:
&gt; 
&gt; RAMDISK: Compressed image found at block 0
&gt; Replacing swsusp.
&gt; No storage allocator is currently active. Rechecking weather we can use
&gt; one.
&gt; 
&gt; Compression Driver: Argh! Nothing follows me in the pipeline!
&gt; Compressor didn't initialise okay.
&gt; Suspend2: Initialise modules failed!
&gt; VFS: Mounted root (minix filesystem) readonly.
&gt; Mounting /dev/sdc as /lib failed
&gt; md: stopping all md devices.

Looks you are starting from removable USB drive. Good idea! I am not familiar with \
loop-aes in connection with software suspend/hibernate but as you fail to reach the \
point where the pass phrase is asked I come to remember difficulties I had... Could \
you verify that your two sata drives are assigned as /dev/sda and sdb? How about the \
USB drive? The usb part of the kernel posts plenty of messages even *before* a \
partition is mounted. Since your setup fails to mount /dev/sdc it might be a timing \
problem. I am uncertain but I suggest you increase the delay for usb devices in the \
built-intrd.sh and make up a new initial ramdisk

INITIALDELAY=0 -&gt; 3 to 10

This aims to mount /dev/sdc as /lib so that the passphrase will be asked. Delay of \
USB devices is hardware specific and needs some tweaks. Kernel should post messages \
about manufacturer/capacity of the medium *before* it gets mounted. Give it a try! It \
may also be an issue of this software suspend which I am not familiar with. But \
anyway, you have to make the kernel mount this USB drive.

Best regards,
Peter
-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070807193059</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-08-07 19:30:59-0400</timestampReceived><subject>Re: initramfs and loop-aes</subject><body>

Jan Klod wrote:
&gt; VFS: Mounted root (minix filesystem) readonly.
&gt; Mounting /dev/sdc as /lib failed

Above 'failed' message comes from initrd code running. Meaning:

1) bootloader loaded kernel and initrd ok
2) kernel booted ok
3) initrd code started running ok

The remaining problem is why USB device mount failed.

Kernel may start running initrd code before USB devices are detected. You
may say that your computer booted from USB so USB is ok. Well.. that was
computer's BIOS and bootloader that accessed that USB device, not linux
kernel. Linux kernel also needs to recognize those devices before those
devices "exist" to linux kernel. That may take some time when kernel chats
with USB devices and becomes convinced that they exists.

The fix is to tell initrd code to wait few seconds before it attempts to
mount any USB device. This can be achieved by setting

INITIALDELAY=3

in your build-initrd.sh configuration. That waits 3 seconds.

[ Peter_22@gmx.de provided almost same info yesterday, but I haven't seen
  any "solved" messages from you yet ]

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070807203459</emailId><senderName>"Jan Klod"</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-08-07 20:34:59-0400</timestampReceived><subject>Re: initramfs and loop-aes</subject><body>

Thanks to Peter_22@gmx.de and Jari!
Now I've just booted in encrypted root for first time!
You are right, it takes some time for kernel to find USB device.

INITIALDELAY=10 just worked good, 3 was to less. I think 4s could be good
for me.

Sorry for delay, I had some problems with reiserfs. I agree, it would be
better to answer sooner, but I wanted to complete this loop-aes thing.
Jari, I am really grateful about loop-aes!

Best wishes,
Jan

[Attachment #3 (text/html)]

Thanks to &lt;a onclick="return top.js.OpenExtLink(window,event,this)" \
href="mailto:Peter_22@gmx.de"&gt;Peter_22@gmx.de&lt;/a&gt; and Jari!&lt;br&gt;Now I've just \
booted in encrypted root for first time!&lt;br&gt;You are right, it takes some time for \
kernel to find USB device. &lt;br&gt;&lt;br&gt;INITIALDELAY=10 just worked good, 3 was to less. I \
think 4s could be good for me.&lt;br&gt;&lt;br&gt;Sorry for delay, I had some problems with \
reiserfs. I agree, it would be better to answer sooner, but I wanted to complete this \
loop-aes thing. &lt;br&gt;Jari, I am really grateful about loop-aes! &lt;br&gt;&lt;br&gt;Best \
wishes,&lt;br&gt;Jan&lt;br&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070528130105</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-05-28 13:01:05-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

* John Smith &lt;the.real.monkey.d.luffy@gmail.com&gt; wrote:

&gt;  Debian 4 (Etch) install manual
&gt;  http://www.debian.org/releases/stable/amd64/ch06s03.html.en -&gt;
&gt;  "The default method is dm-crypt (included in newer Linux kernels,
&gt;  able to host LVM physical volumes), the other is loop-AES (older,
&gt;  maintained separately from the Linux kernel tree). Unless you have
&gt;  compelling reasons to do otherwise, it is recommended to use the
&gt;  default." =&gt; What would be the compelling reason here?

Bad choice of words in the manual, imho. Don't worry about this.



&gt;  http://riseuplabs.org/grimoire/storage/encryption/loop-aes/ -&gt;
&gt;  "Loop-AES is more secure than dm-crypt (and possibly faster),
&gt;  although it requires a custom kernel module and is more work to
&gt;  install than dm-crypt." =&gt; But no justification given regarding
&gt;  the security aspect.

in that example they use kernel 2.6.8 (hint hint)


&gt;  http://mail.nl.linux.org/linux-crypto/2006-09/msg00008.html -&gt;
&gt;  "Both cryptoloop and dm-crypt in kernels prior to 2.6.10 are
&gt;  vulnerable, and even recent dm-crypt still suffers from a weak
&gt;  crypto implementation." =&gt; I will be using 2.6.20, which allows
&gt;  for LRW mode and thus solve the watermark problem. -&gt; "dm-crypt...
&gt;  which leaks location of changed data in some unusual situations."

" ... not a big problem." = dont worry about this.


&gt;  =&gt; What exactly consists this leak and has it been fixed?

This means that loop-aes hides the position of changed ciphertext
better than dm-crypt. A change of one byte in a 512 byte sector will
cause 16 bytes to change in dm-crypt and 512 bytes (the whole sector)
in loop-aes. if an attacker has access to changed ciphertext this
could be a problem. But in case an attacker has access to your
ciphertext you already got a bigger problem.



&gt;  So, what are the current problems of each implementation (if any)?

by now you are fine with any of the stooges. Just don't use blowfish
cipher, it is not recommended for large amounts of data.



&gt;  BTW, this question as been itching me... Does the act of upgrading
&gt;  the kernel goes without problems and glitches, or is it "common"
&gt;  to be locked out of the encrypted system (or even worse, to lose
&gt;  data) when an upgrade goes bad?

well, apart from the usual mantra about backups, all my updates have
gone smoothly so far (I'm solely using loop-aes). 


-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070528132909</emailId><senderName>Phil H</senderName><senderEmail>philtickle200@yahoo.com</senderEmail><timestampReceived>2007-05-28 13:29:09-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

I think a lot of people would be very interested to see a fresh, detailed, competent \
analysis of the points you have raised, including a lot of security and forensic \
professionals.  
 Be aware that some of these points have been the subject of fairly heated debate \
between the dm-crypt and loop-aes camps in the past.  Hopefully that era is over.  
 One reason perhaps that loop-aes has a steady but small following is the dm-crypt \
people seemed to respond very poorly to Jari's critiicisms for quite a while, ducking \
and weaving, flaming, and calling these "FUD".  To my mind this damaged their \
credibility quite a lot and raised more issues.  
 When criticisms are not responded to carefully and with prompt action where \
necessary, it is prudent  put a question mark next to that software.  I note that \
Truecrypt addressed the LRW issue quickly.  
 The only scathing criticism I have ever read of loop-aes 3.x  (by Peter Guttman) is \
that the code is very hard to follow and therefore it is difficult to verify that it \
is working exactly as advertised.  Jari agreed fully with that criticism and did not \
attempt to avoid it.  
 I do not know if he has attempted to make the code more readable.
 
 Re: kernel upgrades: with loop-aes, obviously you have to rebuild the loop-aes \
modules with the new kernel.  Loop-aes is designed to be backwards-compatible (see \
the chart in the readme) so will mount partitions encrypted with earlier versions \
(but visa-versa should not be attempted).  
 I don't know the situation with the device mapper-based stuff, but I do know that \
the precompiled Truecrypt rpm never works with Fedora for me when it is supposed to  \
- I always have to compile truecrypt from source.    
 
 
 
 
 
 
 
 
 
 

John Smith &lt;the.real.monkey.d.luffy@gmail.com&gt; wrote: Hi,

I will soon build a new system and it's time to make a choice between
loop-aes and dm-crypt.
I will use full disk encryption, where only the bootlader and initrd
will be plaintext while residing in a separate partition.
Truecrypt will also be used and will run on top of the chosen device
mapper. (Yes, I will use 2 encryption systems simultaneously)

I've read that loop-aes is more secure than dm-crypt, but also the
contrary. However, the only justification I've seen was that there was
a bug in both dm-crypt and truecrypt, that, as of today, has been
fixed.


Some references:

Debian 4 (Etch) install manual
http://www.debian.org/releases/stable/amd64/ch06s03.html.en
-&gt; "The default method is dm-crypt (included in newer Linux kernels,
able to host LVM physical volumes), the other is loop-AES (older,
maintained separately from the Linux kernel tree). Unless you have
compelling reasons to do otherwise, it is recommended to use the
default."
=&gt; What would be the compelling reason here?

http://riseuplabs.org/grimoire/storage/encryption/loop-aes/
-&gt; "Loop-AES is more secure than dm-crypt (and possibly faster),
although it requires a custom kernel module and is more work to
install than dm-crypt."
=&gt; But no justification given regarding the security aspect.

http://mail.nl.linux.org/linux-crypto/2006-02/msg00037.html
-&gt; "Truecrypt, which is also device-mapper based, only very recently
attempted to fix a major security hole which Jari had been warning
people about for some time."
=&gt; As of 2006-02 it was fixed, so there is no problem with Truecrypt.
-&gt; "debian packages for loop-aes do not require a kernel recompile
unless you want to encrypt the root filesystem."
=&gt; Ok, so I need to recompile -_-

http://mail.nl.linux.org/linux-crypto/2006-09/msg00008.html
-&gt; "Both cryptoloop and dm-crypt in kernels prior to 2.6.10 are
vulnerable, and even recent dm-crypt still suffers from a weak crypto
implementation."
=&gt; I will be using 2.6.20, which allows for LRW mode and thus solve
the watermark problem.
-&gt; "dm-crypt... which leaks location of changed data in some unusual
situations."
=&gt; What exactly consists this leak and has it been fixed?




So, what are the current problems of each implementation (if any)?

Thank you.


BTW, this question as been itching me...
Does the act of upgrading the kernel goes without problems and
glitches, or is it "common" to be locked out of the encrypted system
(or even worse, to lose data) when an upgrade goes bad?

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



       
---------------------------------
Boardwalk for $500? In 2007? Ha! 
Play Monopoly Here and Now (it's updated for today's economy) at Yahoo! Games.


[Attachment #3 (text/html)]

I think a lot of people would be very interested to see a fresh, detailed, competent \
analysis of the points you have raised, including a lot of security and forensic \
professionals.&lt;br&gt; &lt;br&gt; Be aware that some of these points have been the subject of \
fairly heated debate between the dm-crypt and loop-aes camps in the past.  \
Hopefully that era is over.&lt;br&gt; &lt;br&gt; One reason perhaps that loop-aes has a steady \
but small following is the dm-crypt people seemed to respond very poorly to Jari's \
critiicisms for quite a while, ducking and weaving, flaming, and calling these \
"FUD".  To my mind this damaged their credibility quite a lot and raised more \
issues.&lt;br&gt; &lt;br&gt; When criticisms are not responded to carefully and with prompt \
action where necessary, it is prudent  put a question mark next to that \
software.  I note that Truecrypt addressed the LRW issue quickly.&lt;br&gt; &lt;br&gt; The \
only scathing criticism I have ever read of loop-aes 3.x  (by Peter Guttman) is \
that  the code is very hard to follow and therefore it is difficult to verify that it \
is working exactly as advertised.  Jari agreed fully with that criticism and did \
not attempt to avoid it.&lt;br&gt; &lt;br&gt; I do not know if he has attempted to make the code \
more readable.&lt;br&gt; &lt;br&gt; Re: kernel upgrades: with loop-aes, obviously you have to \
rebuild the loop-aes modules with the new kernel.  Loop-aes is designed to be \
backwards-compatible (see the chart in the readme) so will mount partitions encrypted \
with earlier versions (but visa-versa should not be attempted).&lt;br&gt; &lt;br&gt; I don't know \
the situation with the device mapper-based stuff, but I do know that the precompiled \
Truecrypt rpm never works with Fedora for me when it is supposed to  - I always \
have to compile truecrypt from source.  &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; \
&lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt;&lt;br&gt;&lt;b&gt;&lt;i&gt;John Smith \
&lt;the.real.monkey.d.luffy@gmail.com&gt;&lt;/i&gt;&lt;/b&gt; wrote:&lt;blockquote class="replbq" \
style="border-left:  2px solid rgb(16, 16, 255); margin-left: 5px; padding-left: \
5px;"&gt; Hi,&lt;br&gt;&lt;br&gt;I will soon build a new system and it's time to make a choice \
between&lt;br&gt;loop-aes and dm-crypt.&lt;br&gt;I will use full disk encryption, where only the \
bootlader and initrd&lt;br&gt;will be plaintext while residing in a separate \
partition.&lt;br&gt;Truecrypt will also be used and will run on top of the chosen \
device&lt;br&gt;mapper. (Yes, I will use 2 encryption systems simultaneously)&lt;br&gt;&lt;br&gt;I've \
read that loop-aes is more secure than dm-crypt, but also the&lt;br&gt;contrary. However, \
the only justification I've seen was that there was&lt;br&gt;a bug in both dm-crypt and \
truecrypt, that, as of today, has been&lt;br&gt;fixed.&lt;br&gt;&lt;br&gt;&lt;br&gt;Some \
references:&lt;br&gt;&lt;br&gt;Debian 4 (Etch) install \
manual&lt;br&gt;http://www.debian.org/releases/stable/amd64/ch06s03.html.en&lt;br&gt;-&gt; "The \
default method is dm-crypt (included in newer Linux kernels,&lt;br&gt;able to host LVM \
physical volumes), the other is loop-AES (older,&lt;br&gt;maintained separately from the \
Linux  kernel tree). Unless you have&lt;br&gt;compelling reasons to do otherwise, it is \
recommended to use the&lt;br&gt;default."&lt;br&gt;=&gt; What would be the compelling reason \
here?&lt;br&gt;&lt;br&gt;http://riseuplabs.org/grimoire/storage/encryption/loop-aes/&lt;br&gt;-&gt; \
"Loop-AES is more secure than dm-crypt (and possibly faster),&lt;br&gt;although it requires \
a custom kernel module and is more work to&lt;br&gt;install than dm-crypt."&lt;br&gt;=&gt; But no \
justification given regarding the security \
aspect.&lt;br&gt;&lt;br&gt;http://mail.nl.linux.org/linux-crypto/2006-02/msg00037.html&lt;br&gt;-&gt; \
"Truecrypt, which is also device-mapper based, only very recently&lt;br&gt;attempted to fix \
a major security hole which Jari had been warning&lt;br&gt;people about for some \
time."&lt;br&gt;=&gt; As of 2006-02 it was fixed, so there is no problem with \
Truecrypt.&lt;br&gt;-&gt; "debian packages for loop-aes do not require a kernel \
recompile&lt;br&gt;unless you want to encrypt the root filesystem."&lt;br&gt;=&gt; Ok, so I need \
                to recompile
 -_-&lt;br&gt;&lt;br&gt;http://mail.nl.linux.org/linux-crypto/2006-09/msg00008.html&lt;br&gt;-&gt; \
"Both cryptoloop and dm-crypt in kernels prior to 2.6.10 are&lt;br&gt;vulnerable, and even \
recent dm-crypt still suffers from a weak crypto&lt;br&gt;implementation."&lt;br&gt;=&gt; I will \
be using 2.6.20, which allows for LRW mode and thus solve&lt;br&gt;the watermark \
problem.&lt;br&gt;-&gt; "dm-crypt... which leaks location of changed data in some \
unusual&lt;br&gt;situations."&lt;br&gt;=&gt; What exactly consists this leak and has it been \
fixed?&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;So, what are the current problems of each implementation \
(if any)?&lt;br&gt;&lt;br&gt;Thank you.&lt;br&gt;&lt;br&gt;&lt;br&gt;BTW, this question as been itching \
me...&lt;br&gt;Does the act of upgrading the kernel goes without problems and&lt;br&gt;glitches, \
or is it "common" to be locked out of the encrypted system&lt;br&gt;(or even worse, to lose \
data) when an upgrade goes bad?&lt;br&gt;&lt;br&gt;-&lt;br&gt;Linux-crypto:  cryptography in and on the \
Linux system&lt;br&gt;Archive:        \
http://mail.nl.linux.org/linux-crypto/&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;p&gt;   &lt;hr \
size=1&gt;Boardwalk for $500? In 2007? Ha! &lt;br&gt;&lt;a \
href="http://us.rd.yahoo.com/evt=48223/*http://get.games.yahoo.com/proddesc?gamekey=monopolyherenow"&gt;Play \
Monopoly Here and Now&lt;/a&gt; (it's updated for today's economy) at Yahoo! Games.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070528133238</emailId><senderName>Phil H</senderName><senderEmail>philtickle200@yahoo.com</senderEmail><timestampReceived>2007-05-28 13:32:38-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

PS: Just read Marcus Reichert's post.  That should help.

       
---------------------------------
Pinpoint customers who are looking for what you sell. 
[Attachment #3 (text/html)]

PS: Just read Marcus Reichert's post.  That should help.&lt;br&gt;&lt;p&gt; 
      &lt;hr size=1&gt;&lt;a href="http://us.rd.yahoo.com/evt=48250/*http://searchmarketing.yah \
oo.com/arp/sponsoredsearch_v9.php?o=US2226&amp;cmp=Yahoo&amp;ctv=AprNI&amp;s=Y&amp;s2=EM&amp;b=50"&gt;Pinpoint \
customers &lt;/a&gt;who are looking for what you sell. 


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070528140948</emailId><senderName>Unweitze Enweister</senderName><senderEmail>unweitze.enweister@gmail.com</senderEmail><timestampReceived>2007-05-28 14:09:48-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

* markus reichelt &lt;ml@mareichelt.de&gt; [2007-05-28 15:01:05 +0200]:

&gt; Bad choice of words in the manual, imho. Don't worry about this.

Agreed.

&gt; in that example they use kernel 2.6.8 (hint hint)
 
&gt; " ... not a big problem." = dont worry about this.

&gt; .... But in case an attacker has access to your
&gt; ciphertext you already got a bigger problem.
 
&gt; &gt;  So, what are the current problems of each implementation (if any)?
 
&gt; by now you are fine with any of the stooges. Just don't use blowfish
&gt; cipher, it is not recommended for large amounts of data.

Agreed, however:

Here I must point out that although I prefer loop-aes over any other for
full disk encryption, initial implementation requires a bit more in
terms of discipline for successful application.  If it's done properly,
algorithm and key structure are never revealed to the adversary, making
an attack much more difficult to mount.  The downside is the extra
work involved in performing the setup and maintenance of the system, so
a weakness is introduced in the form of a human engineering attack.

Cryptsetup-luks is easier to implement and maintain, but it does reveal
the algorithm to the adversary at the outset to anyone who examines the
disk with a luks dump command. The human risk factor is greatly reduced,
however, in the cryptsetup implementation - it's harder to screw up.

&gt; well, apart from the usual mantra about backups, all my updates have
&gt; gone smoothly so far (I'm solely using loop-aes). 

Same here.

Regards,
Unweitze


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070528173049</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-05-28 17:30:49-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

John Smith wrote:
&gt; I've read that loop-aes is more secure than dm-crypt, but also the
&gt; contrary.

Folks who still believe that loop-AES means cryptoloop are the ones
spreading such mis-information that dm-crypt is more secure than loop-AES.

&gt; =&gt; I will be using 2.6.20, which allows for LRW mode and thus solve
&gt; the watermark problem.

Original LRW mode has been semi-broken.

http://grouper.ieee.org/groups/1619/email/msg00558.html

&gt; -&gt; "dm-crypt... which leaks location of changed data in some unusual
&gt; situations."
&gt; =&gt; What exactly consists this leak and has it been fixed?

Last time I looked at dm-crypt it wasn't fixed.

If backing storage is at some remote server, and adversary can see
ciphertext read/write traffic, he can get snapshots of old and new
ciphertexts and extract some information from that.

In "normal" case of lost laptop computer, adversary sees only one "latest"
copy of ciphertext. So, in "normal" case this information leak does not
happen.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070528203932</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-05-28 20:39:32-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

Hi!

You seem to be looking for something. Are you interested in sophisticated algorithms \
or transparent, straight forward full medium encryption? I cannot argue about \
dm-crypt or truecrypt but loop-aes works. The extra time you have to spend on things \
like kernel compiling is a good investment in security. If you want to take a look at \
loop-aes I suggest you take KNOPPIX which features loop-aes out of the box. You may \
encrypt a drive and test read/write performance. Loop-aes is optimized for amd64. \
Furthermore it is capable of encrypting the whole system which means you start the PC \
from removable USB media. No partition table and no plain text boot sector remain. \
Your concern about kernel updates is causeless. The sources of a new kernel are \
installed and configured within the existing encrypted system. A successfully built \
kernel may then be copied to USB media and booted. I hope I could resolve some of \
your doubts. In case you decide to use loop-aes you can ask questions here at any \
time and we will try to find answers;-)

Kind regards,
Peter

-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070529112135</emailId><senderName>"Rudolf Deilmann"</senderName><senderEmail>rudolf.deilmann@safe-mail.net</senderEmail><timestampReceived>2007-05-29 11:21:35-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

&gt; If you want to take a look at loop-aes I suggest 
&gt; you take KNOPPIX which features loop-aes out of the
&gt; box. 

Or try grml.org for testing purpose (speed, usability,...)  
It supports dmcrypt, loop-aes and truecrypt.

&gt; Loop-aes is optimized for amd64. Furthermore it is 
&gt; capable of encrypting the whole system which means 
&gt; you start the PC from removable USB media. No 
&gt; partition table and no plain text boot sector 
&gt; remain. 

you can do this all with dmcrypt too ...
There is assembler-optimized code (AES_i586, aes_x86_64, twofish_i586,...) and you \
don't need a partition table or something like this. Just write your dm-crypt table \
by hand instead of using luks for key management,...

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070530003459</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-05-30 00:34:59-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

* Rudolf Deilmann &lt;rudolf.deilmann@Safe-mail.net&gt; wrote:

&gt; &gt; If you want to take a look at loop-aes I suggest 
&gt; &gt; you take KNOPPIX which features loop-aes out of the
&gt; &gt; box. 
&gt; 
&gt; Or try grml.org for testing purpose (speed, usability,...)  
&gt; It supports dmcrypt, loop-aes and truecrypt.

loop-aes? since when? 

ever since the 1st release loop-aes was "sadly not supported", as far
as I can recall; see http://grml.org/kernel/#patches (search for
loop-aes):

loop-aes

Using loop-aes with &gt;=2.6.13 fails with 'register_blkdev: cannot get
major 7 for loop'. grml requires a stable loopback device interface
(CONFIG_BLK_DEV_LOOP=y) but loop-aes has different requirements so
loop-aes is not part of grml. :-/


either this info is outdated or has been outright neglected.


-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070530121642</emailId><senderName>Unweitze Enweister</senderName><senderEmail>unweitze.enweister@gmail.com</senderEmail><timestampReceived>2007-05-30 12:16:42-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

* markus reichelt &lt;ml@mareichelt.de&gt; [2007-05-30 02:34:59 +0200]:

&gt; * Rudolf Deilmann &lt;rudolf.deilmann@Safe-mail.net&gt; wrote:
&gt; 
&gt; &gt; &gt; If you want to take a look at loop-aes I suggest 
&gt; &gt; &gt; you take KNOPPIX which features loop-aes out of the
&gt; &gt; &gt; box. 
&gt; &gt; 
&gt; &gt; Or try grml.org for testing purpose (speed, usability,...)  
&gt; &gt; It supports dmcrypt, loop-aes and truecrypt.
&gt; 
&gt; loop-aes? since when? 

The current DVD release supports loop-aes, with extra ciphers twofish,
serpent, and blowfish as well.  Don't know about CD image.

The one I have on my desk right now sports a 2.6.19 kernel.

Regards,
Unweitze

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070530161205</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-05-30 16:12:05-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

Unweitze Enweister wrote:
&gt; * markus reichelt &lt;ml@mareichelt.de&gt; [2007-05-30 02:34:59 +0200]:
&gt; &gt; * Rudolf Deilmann &lt;rudolf.deilmann@Safe-mail.net&gt; wrote:
&gt; &gt; &gt; Or try grml.org for testing purpose (speed, usability,...)
&gt; &gt; &gt; It supports dmcrypt, loop-aes and truecrypt.
&gt; &gt;
&gt; &gt; loop-aes? since when?
&gt; 
&gt; The current DVD release supports loop-aes, with extra ciphers twofish,
&gt; serpent, and blowfish as well.  Don't know about CD image.

grml 1.0 kernel configuration on their web site says that CD has cryptoloop,
not loop-AES.
 
&gt; The one I have on my desk right now sports a 2.6.19 kernel.

If you change to loop-AES source directory (any v3 version), and test it
like this:

    make tests

Does it output "*** Test results ok ***" string at the end?

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070530162829</emailId><senderName>Christian Kujau</senderName><senderEmail>lists@nerdbynature.de</senderEmail><timestampReceived>2007-05-30 16:28:29-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

On Mon, 28 May 2007, Unweitze Enweister wrote:
&gt; Cryptsetup-luks is easier to implement and maintain, but it does reveal
&gt; the algorithm to the adversary at the outset to anyone who examines the
&gt; disk with a luks dump command.

With dm-crypt properly set up, that should NOT be a problem, remember:

"[...] if I take a letter and lock it in a safe, and then
  give you the safe along with the design specifications of the safe and
  a hundred identical safes with their combinations so that you and the
  world's best safecrackers can study the locking mechanism--and you
  still can't open the safe and read the letter, that's security."
         - Bruce Schneier

C.
-- 
BOFH excuse #197:

I'm sorry a pentium won't do, you need an SGI to connect with us.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070530165104</emailId><senderName>Christian Kujau</senderName><senderEmail>lists@nerdbynature.de</senderEmail><timestampReceived>2007-05-30 16:51:04-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

On Mon, 28 May 2007, markus reichelt wrote:
&gt;&gt;  "Loop-AES is more secure than dm-crypt (and possibly faster),
&gt;&gt;  although it requires a custom kernel module and is more work to
&gt;&gt;  install than dm-crypt." =&gt; But no justification given regarding
&gt;&gt;  the security aspect.
&gt;
&gt; in that example they use kernel 2.6.8 (hint hint)

Since no justification regarding the security aspect was given, I don't 
see how the kernel version would matter at all. Did youd have a certain 
bug with 2.6.8 in mind? (Debian oldstable is still using 2.6.8).

&gt;&gt;  http://mail.nl.linux.org/linux-crypto/2006-09/msg00008.html -&gt;
&gt;&gt;  "Both cryptoloop and dm-crypt in kernels prior to 2.6.10 are
&gt;&gt;  vulnerable, and even recent dm-crypt still suffers from a weak
&gt;&gt;  crypto implementation." =&gt; I will be using 2.6.20, which allows
&gt;&gt;  for LRW mode and thus solve the watermark problem. -&gt; "dm-crypt...
&gt;&gt;  which leaks location of changed data in some unusual situations."
&gt;
&gt; " ... not a big problem." = dont worry about this.

Here the kernel version *does* matter, IOW the watermark attacks have 
been fixed in 2.6.10 (see "dm-crypt: new IV mode ESSIV" changelog 
entry). So "not a big problem" should read "not an issue any more since 
12/2004", no?

&gt;&gt;  =&gt; What exactly consists this leak and has it been fixed?
&gt;
&gt; This means that loop-aes hides the position of changed ciphertext
&gt; better than dm-crypt. A change of one byte in a 512 byte sector will
&gt; cause 16 bytes to change in dm-crypt and 512 bytes (the whole sector)
&gt; in loop-aes. if an attacker has access to changed ciphertext this
&gt; could be a problem.

Hm, "changed ciphertext": but that means that the attacker has already 
access to the underlying device and can read the encyrpted and 
*currently changing data". But I think "changing ciphertext" 
happens only when the device is mounted (so someone unlocked the 
partition) in which case the attacker would be better off to just read 
the plaintext.

However, I am not sure what's "better" from the attackers' POV to get 
the (password to) the key: known (changing) ciphertext or known 
plaintext. My guess would be "a combination of both"...

&gt; But in case an attacker has access to your
&gt; ciphertext you already got a bigger problem.

Yes, indeed :)

C.
-- 
BOFH excuse #197:

I'm sorry a pentium won't do, you need an SGI to connect with us.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070530171328</emailId><senderName>Christian Kujau</senderName><senderEmail>lists@nerdbynature.de</senderEmail><timestampReceived>2007-05-30 17:13:28-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

On Mon, 28 May 2007, Jari Ruusu wrote:
&gt; Original LRW mode has been semi-broken.
&gt; http://grouper.ieee.org/groups/1619/email/msg00558.html

Hm, I'm using dm-crypt, but with CRYPTO_LRW disabled. So this does not 
apply? (Being a crypto noob, I wonder how to find out which block-cipher 
algorithm I am using or how to tell loop-aes/dm-crypt which algorithm to 
use).

&gt;&gt; -&gt; "dm-crypt... which leaks location of changed data in some unusual
&gt;&gt; situations."
&gt;&gt; =&gt; What exactly consists this leak and has it been fixed?
&gt;
&gt; Last time I looked at dm-crypt it wasn't fixed.
&gt;
&gt; If backing storage is at some remote server, and adversary can see
&gt; ciphertext read/write traffic, he can get snapshots of old and new
&gt; ciphertexts and extract some information from that.

Hm, I thought this has been addressed with the introduction of ESSIV in 
2.6.10, or is this a different issue?

-- 
BOFH excuse #28:

CPU radiator broken

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070530184404</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-05-30 18:44:04-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

Christian Kujau wrote:
&gt; On Mon, 28 May 2007, Jari Ruusu wrote:
&gt; &gt; Last time I looked at dm-crypt it wasn't fixed.
&gt; &gt;
&gt; &gt; If backing storage is at some remote server, and adversary can see
&gt; &gt; ciphertext read/write traffic, he can get snapshots of old and new
&gt; &gt; ciphertexts and extract some information from that.
&gt; 
&gt; Hm, I thought this has been addressed with the introduction of ESSIV in
&gt; 2.6.10, or is this a different issue?

It is different issue.

You can test this yourself:
1)  Set up a small dm-crypt essiv AES encrypted device
2)  Write some data to to plaintext device
3)  Save copy of ciphertext
4)  Write same data again, but with first byte of some 512 byte sector
    altered.
5)  Compare previous and current ciphertexts. You will notice ciphertexts
    will differ on first cipherblock within that 512 byte sector. This
    leaked that there was plaintext change within first plaintext block
    inside that 512 byte sector.
6)  Save copy of ciphertext
7)  Now modify plaintext data again, alter 130th byte of some 512 byte
    sector.
8)  Compare previous and current ciphertexts. You will notice ciphertexts
    will differ on 9th cipherblock within that 512 byte sector. This leaked
    that there was plaintext change within 9th plaintext block inside that
    512 byte sector.
9)  Save copy of ciphertext
10) Modify plaintext data again, alter last byte of some 512 byte sector.
11) Compare previous and current ciphertexts. You will notice ciphertexts
    will differ on last cipherblock within that 512 byte sector. This leaked
    that there was plaintext change within last plaintext block inside that
    512 byte sector.

If you do above test with loop-AES version 2 or 3 on-disk format, you will
notice that all cipherblocks within the 512 byte sector change regardless of
where changed plaintext data is, thus hiding what location was changed.
loop-AES still leaks what 512 byte sectors have been modified, because full
512 byte sector ciphertexts will be different, but such significantly lower
resolution is much better than adversary being able to pinpoint changes
inside 512 byte sector.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070531060440</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-05-31 06:04:40-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

* Christian Kujau &lt;lists@nerdbynature.de&gt; wrote:

&gt; &gt;&gt;  http://mail.nl.linux.org/linux-crypto/2006-09/msg00008.html -&gt;
&gt; &gt;&gt;  "Both cryptoloop and dm-crypt in kernels prior to 2.6.10 are
&gt; &gt;&gt;  vulnerable, and even recent dm-crypt still suffers from a weak
&gt; &gt;&gt;  crypto implementation." =&gt; I will be using 2.6.20, which allows
&gt; &gt;&gt;  for LRW mode and thus solve the watermark problem. -&gt;
&gt; &gt;&gt;  "dm-crypt... which leaks location of changed data in some
&gt; &gt;&gt;  unusual situations."
&gt; &gt;
&gt; &gt; " ... not a big problem." = dont worry about this.
&gt; 
&gt;  Here the kernel version *does* matter, IOW the watermark attacks
&gt;  have been fixed in 2.6.10 (see "dm-crypt: new IV mode ESSIV"
&gt;  changelog entry). So "not a big problem" should read "not an issue
&gt;  any more since 12/2004", no?

but he already said he would be using a recent kernel, so... no.

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070531132936</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-05-31 13:29:36-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

* Unweitze Enweister &lt;unweitze.enweister@gmail.com&gt; wrote:

&gt; The current DVD release supports loop-aes, with extra ciphers
&gt; twofish, serpent, and blowfish as well.  Don't know about CD image.

somehow there's only CD iso images flying around. where did you get
the DVD release from?


--=20
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070531153402</emailId><senderName>Unweitze Enweister</senderName><senderEmail>unweitze.enweister@gmail.com</senderEmail><timestampReceived>2007-05-31 15:34:02-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

* Christian Kujau &lt;lists@nerdbynature.de&gt; [2007-05-30 17:28:29 +0100]:

&gt; With dm-crypt properly set up, that should NOT be a problem, remember:
&gt; 
&gt; "[...] if I take a letter and lock it in a safe, and then
&gt;  give you the safe along with the design specifications of the safe and
&gt;  a hundred identical safes with their combinations so that you and the
&gt;  world's best safecrackers can study the locking mechanism--and you
&gt;  still can't open the safe and read the letter, that's security."
&gt;         - Bruce Schneier

Correct.  Still, being paranoid, I don't wish to hand my adversary my
playbook - even if the adversary hasn't learned to read it yet.  It
narrows down what he has to learn to read.

Regards,
Unweitze


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070531172423</emailId><senderName>Unweitze Enweister</senderName><senderEmail>unweitze.enweister@gmail.com</senderEmail><timestampReceived>2007-05-31 17:24:23-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

* Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; [2007-05-30 19:12:05 +0300]:

 
&gt; If you change to loop-AES source directory (any v3 version), and test it
&gt; like this:
&gt; 
&gt;     make tests
&gt; 
&gt; Does it output "*** Test results ok ***" string at the end?

No. The Knoppix dvd, being Debian based, has the loop-aes testing
application broken out into a package called 'loop-aes-testsuite' which
is NOT included on the disk.  One must do:

'apt-get update' then 'apt-get install loop-aes testsuite', which will
install the testing application into the Knoppix live filesystem.

From there, the user performs:

loop-aes-runtests -v

On my system, the tests are then run, and the string
"*** Test results ok ***" is output at the end.  Nothing is written to
disk during this procedure - everything is in RAM - and loop-aes is
verified to work properly.

Regards,
Unweitze

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070531181253</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-05-31 18:12:53-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

Unweitze Enweister wrote:
&gt; * Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; [2007-05-30 19:12:05 +0300]:
&gt; &gt; Does it output "*** Test results ok ***" string at the end?
&gt; 
&gt; No. The Knoppix dvd, being Debian based, has the loop-aes testing
&gt; application broken out into a package called 'loop-aes-testsuite' which
&gt; is NOT included on the disk.

Knoppix? I thought we were talking about grml.

&gt; One must do:
&gt; 
&gt; 'apt-get update' then 'apt-get install loop-aes testsuite', which will
&gt; install the testing application into the Knoppix live filesystem.
&gt; 
&gt; &gt;From there, the user performs:
&gt; 
&gt; loop-aes-runtests -v

But does it work without installing any extra packages?
Something like this:

    wget http://loop-aes.sourceforge.net/loop-AES/loop-AES-v3.2a.tar.bz2
    md5sum loop-AES-v3.2a.tar.bz2 | grep d0b5b0f104ce0e1ee9e3ba9608f24ec4
    tar xvjf loop-AES-v3.2a.tar.bz2
    cd loop-AES-v3.2a
    make tests

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070531190919</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-05-31 19:09:19-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; But does it work without installing any extra packages?
&gt; Something like this:
&gt; 
&gt; wget http://loop-aes.sourceforge.net/loop-AES/loop-AES-v3.2a.tar.bz2
&gt; md5sum loop-AES-v3.2a.tar.bz2 | grep d0b5b0f104ce0e1ee9e3ba9608f24ec4
&gt; tar xvjf loop-AES-v3.2a.tar.bz2
&gt; cd loop-AES-v3.2a
&gt; make tests

None of this is needed. All Knoppix CDs/DVDs I used had loop-aes included. Recently I \
encrypted the system partition (SuSE 10.2) from Knoppix live DVD and booted from \
previously prepared USB-stick. It may not include the most recent loop-aes version \
but v3 on-disc format is definitely supported. Knoppix is the right choice for \
maintenance work or simply to take a look at loop-aes.

Best regards
Peter
-- 
Psssst! Schon vom neuen GMX MultiMessenger gehört?
Der kanns mit allen: http://www.gmx.net/de/go/multimessenger

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070601000808</emailId><senderName>Christian Kujau</senderName><senderEmail>lists@nerdbynature.de</senderEmail><timestampReceived>2007-06-01 00:08:08-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

Hi Jari,

thanks for elaborating a bit on these issues, your comments are quite 
interesting to me. I tried to create the sceneario you described, 
however I'm not sure if I've done everything right:

On Wed, 30 May 2007, Jari Ruusu wrote:
&gt; 1)  Set up a small dm-crypt essiv AES encrypted device

# dd if=/dev/zero of=/tmp/disk1.img count=50 bs=1M
# sudo losetup /dev/loop/0  /tmp/disk1.img
# sudo losetup /dev/loop/0
/dev/loop/0: [000f]:1575167 (/tmp/disk1.img)
# head -c 2880 /dev/urandom|uuencode -m -|head -n 65|tail -n 64|gpg -ac --cipher-algo \
aes256 --digest-algo SHA512 &gt; /tmp/k.gpg # gpg -d /tmp/k.gpg 2&gt;/dev/null | sudo \
cryptsetup luksFormat -c aes-cbc-essiv:sha256 -s 192 /dev/loop0 # gpg -d /tmp/k.gpg \
2&gt;/dev/null | sudo cryptsetup luksOpen /dev/loop0 test1 # sudo cryptsetup status \
                test1
/dev/mapper/test1 is active:
   cipher:  aes-cbc-essiv:sha256
   keysize: 192 bits
   device:  /dev/loop0
   offset:  1544 sectors
   size:    100856 sectors
   mode:    read/write

&gt; 2)  Write some data to to plaintext device

# ls -lgo words &amp;&amp; head -1 words
-rw-r--r-- 1 9728 May 31 23:51 words
Abelard
# sudo dd if=words of=/dev/mapper/test1

&gt; 3)  Save copy of ciphertext

(I noticed that I had to close the test1, to get the data down to the 
loop0)

# sudo cryptsetup luksClose test1
# sudo dd if=/dev/loop0 of=test1.loop0
# sha1sum test1.loop0
9653a783668f453903bdad23ac2c8a87bfe52807  test1.loop0

&gt; 4)  Write same data again, but with first byte of some 512 byte sector
&gt; altered.

Hm, I tried:
# dd if=words 2&gt;/dev/null | sed 's/^Abelard$/9belard/' | head -1
9belard
# dd if=words 2&gt;/dev/null | sed 's/^Abelard$/9belard/' | sudo dd of=/dev/mapper/test1
# sudo cryptsetup luksClose test1
# sudo dd if=/dev/loop0 of=test1.loop0.altered

&gt; 5)  Compare previous and current ciphertexts. You will notice ciphertexts
&gt; will differ on first cipherblock within that 512 byte sector. This
&gt; leaked that there was plaintext change within first plaintext block
&gt; inside that 512 byte sector.

# sha1sum test1.loop0 test1.loop0.altered
9653a783668f453903bdad23ac2c8a87bfe52807  test1.loop0
9f68c329de554ccf6f0a81c3d3a21ef47410b9bf  test1.loop0.altered

# cmp -b test1.loop0 test1.loop0.altered
test1.loop0 test1.loop0.altered differ: byte 790529, line 373 is 234 M-^\ 201 M-^A
# od -x test1.loop0 &gt; test1.loop0.hex
# od -x test1.loop0.altered &gt; test1.loop0.altered.hex
diff -u test1.loop0.hex test1.loop0.altered.hex | wc -l
73

&gt; 6)  Save copy of ciphertext

done (test1.loop0)

&gt; 7)  Now modify plaintext data again, alter 130th byte of some 512 byte
&gt; sector.

Hm, a bit trickyer for me, I used dd/vi to alter the "words" file:

# vi words
[...]
# gpg -d  /tmp/k.gpg 2&gt;/dev/null | sudo cryptsetup luksOpen /dev/loop0 test1
# dd if=words 2&gt;/dev/null | sudo dd of=/dev/mapper/test1
# sudo cryptsetup luksClose test1
# sudo dd if=/dev/loop0 of=test1.loop0.altered.130

&gt; 8)  Compare previous and current ciphertexts. You will notice ciphertexts
&gt; will differ on 9th cipherblock within that 512 byte sector. This leaked
&gt; that there was plaintext change within 9th plaintext block inside that
&gt; 512 byte sector.

# sha1sum test1.loop0 test1.loop0.altered test1.loop0.altered.130
9653a783668f453903bdad23ac2c8a87bfe52807  test1.loop0
9f68c329de554ccf6f0a81c3d3a21ef47410b9bf  test1.loop0.altered
5dc0e66f0ff0d37959bf9cd43bb0433ecaae6728  test1.loop0.altered.130

# cmp  -b test1.loop0.altered test1.loop0.altered.130
test1.loop0.altered test1.loop0.altered.130 differ: byte 790529, line 373 is 201 M-^A \
234 M-^\ # diff -u test1.loop0.altered.hex test1.loop0.altered.130.hex | wc -l
113

...While I'm not sure if the "9th plaintext block" I notice that the 
line# is the same and the values swapped. spooky :)

&gt; 9)  Save copy of ciphertext

done (test1.loop0)

&gt; 10) Modify plaintext data again, alter last byte of some 512 byte sector.

Again, with vi(1):

# vi words
[...]
# gpg -d  /tmp/k.gpg 2&gt;/dev/null | sudo cryptsetup luksOpen /dev/loop0 test1
# dd if=words 2&gt;/dev/null | sudo dd of=/dev/mapper/test1
# sudo cryptsetup luksClose test1

&gt; 11) Compare previous and current ciphertexts. You will notice ciphertexts
&gt; will differ on last cipherblock within that 512 byte sector. This leaked
&gt; that there was plaintext change within last plaintext block inside that
&gt; 512 byte sector.

# cmp test1.loop0.altered.130 test1.loop0.altered.512
test1.loop0.altered.130 test1.loop0.altered.512 differ: char 791025, line 376

# diff -u test1.loop0.altered.130.hex test1.loop0.altered.512.hex | wc -l
11

In case someone is interested, I've put all the .hexfiles and the diffs 
on: http://nerdbynature.de/bits/dm-crypt-fun/

&gt; If you do above test with loop-AES version 2 or 3 on-disk format, you will
&gt; notice that all cipherblocks within the 512 byte sector change regardless of
&gt; where changed plaintext data is, thus hiding what location was changed.

I'll do this tomorrow, after getting some sleep. I'm surprised that this 
(already known) issue has not been addressed in dm-crypt. Yes, I know 
about the flamewars dm-crypt vs. loop-aes vs. whatnot but that's no 
excuse for not documenting this flaw (I said 'documenting', because how 
can someone *expect* to get a bug fixed in the OSS world ;)).

&gt; loop-AES still leaks what 512 byte sectors have been modified, because full
&gt; 512 byte sector ciphertexts will be different, but such significantly lower
&gt; resolution is much better than adversary being able to pinpoint changes
&gt; inside 512 byte sector.

Hm, would it be possible to get this note into the loop-AES.README, 
maybe under "8. Security levels"?

Thank you for your time,
Christian.
-- 
BOFH excuse #247:

Due to Federal Budget problems we have been forced to cut back on the number of users \
able to access the system at one time. (namely none allowed....)

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070329115918</emailId><senderName>Eloy Paris</senderName><senderEmail>peloy@chapus.net</senderEmail><timestampReceived>2007-03-29 11:59:18-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

On Thu, Mar 29, 2007 at 11:28:06AM +0100, Paul Walker wrote:

&gt; On Wed, Mar 28, 2007 at 11:34:32PM -0400, Michael Bernstein wrote:
&gt;
&gt; &gt; I was wondering if any of the major Linux distributions integrate
&gt; &gt; loop-aes and/or facilitiate its installation. I've general found
&gt; &gt; extensive tweaks
&gt;
&gt; Debian makes it pretty easy; a simple "apt-get install
&gt; loop-aes-modules-2.6-amd64" was enough to pull in the modules for me.
&gt;
&gt; They also supply a loop-aes-source package if you build your own
&gt; kernel, which you can use with some of their tools to create a
&gt; loop-aes package of your own.

I haven't used a recent version of the Debian Installer for etch
(Debian's upcoming new release) but I believe that it now supports
setting up encrypted partitions at installation time, which would save a
lot of trouble and pain.

Max Vozeler should know more about the details since he's the Debian
loop-aes advocate and maintains the loop-aes packages in Debian. Max?

Cheers,

Eloy.-


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070404162316</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-04-04 16:23:16-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

* Peter_22@gmx.de wrote:

&gt; To summarize it:
&gt; - accessing loop-aes encrypted partitions/containers is possible
&gt; with any newer Knoppix Live CD/DVD
&gt; - setting up an entirely encrypted system (/) requires lots of hand
&gt; work

Depends ... I'm in the process of writing an "idiots-guide"-like text
about setting up root encryption with loop-aes, providing both
commented example configs &amp; precompiled initrds.

In a nutshell:

 - create a full install on a single root partition (not needed on a
   running system, obviously ;-)

 - create both a bootable USB stick and boot CDROM (always have a
   backup handy...)

 - test boot setup 

 - adapt /etc/fstab &amp; encrypt root partition via aespipe

I played around a bit with using the swap space (half a GB) for a
minimal install of an emergency system. This worked for me, but I
regard it as too bloated to include it in the draft. I'm thinking
along the lines of a busybox-like approach.

 
&gt; As you asked for an USB-bootable solution I advise you to follow
&gt; example 7.7 from loop-aes readme. This works even with SuSE and you
&gt; can encrypt every bit of data on you drives. No bootpartition and
&gt; no partition table will remain. Up to now I haven?t seen an
&gt; installer that supports encrypted installations.

The beauty of that example is that it can be used also on
non-ecrypted root partitions... the system will just boot. Great to
test one's setup before actually encrypting root via aespipe.

And about that tweaked installer ... I discussed the issue with a
fellow slackware user some time ago. It's most certainly doable, but
right now I just lack the time to pursue that project. 


So many ideas, so little time ...

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070404165848</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-04-04 16:58:48-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

You can review:
http://wiki.suspend2.net/EncryptedSwapAndRoot

On 4/4/07, markus reichelt &lt;ml@mareichelt.de&gt; wrote:
&gt; * Peter_22@gmx.de wrote:
&gt;
&gt; &gt; To summarize it:
&gt; &gt; - accessing loop-aes encrypted partitions/containers is possible
&gt; &gt; with any newer Knoppix Live CD/DVD
&gt; &gt; - setting up an entirely encrypted system (/) requires lots of hand
&gt; &gt; work
&gt;
&gt; Depends ... I'm in the process of writing an "idiots-guide"-like text
&gt; about setting up root encryption with loop-aes, providing both
&gt; commented example configs &amp; precompiled initrds.
&gt;
&gt; In a nutshell:
&gt;
&gt;  - create a full install on a single root partition (not needed on a
&gt;    running system, obviously ;-)
&gt;
&gt;  - create both a bootable USB stick and boot CDROM (always have a
&gt;    backup handy...)
&gt;
&gt;  - test boot setup
&gt;
&gt;  - adapt /etc/fstab &amp; encrypt root partition via aespipe
&gt;
&gt; I played around a bit with using the swap space (half a GB) for a
&gt; minimal install of an emergency system. This worked for me, but I
&gt; regard it as too bloated to include it in the draft. I'm thinking
&gt; along the lines of a busybox-like approach.
&gt;
&gt;
&gt; &gt; As you asked for an USB-bootable solution I advise you to follow
&gt; &gt; example 7.7 from loop-aes readme. This works even with SuSE and you
&gt; &gt; can encrypt every bit of data on you drives. No bootpartition and
&gt; &gt; no partition table will remain. Up to now I haven?t seen an
&gt; &gt; installer that supports encrypted installations.
&gt;
&gt; The beauty of that example is that it can be used also on
&gt; non-ecrypted root partitions... the system will just boot. Great to
&gt; test one's setup before actually encrypting root via aespipe.
&gt;
&gt; And about that tweaked installer ... I discussed the issue with a
&gt; fellow slackware user some time ago. It's most certainly doable, but
&gt; right now I just lack the time to pursue that project.
&gt;
&gt;
&gt; So many ideas, so little time ...
&gt;
&gt; --
&gt; left blank, right bald
&gt;
&gt;

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070405212057</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-04-05 21:20:57-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

markus reichelt &lt;ml@mareichelt.de&gt; wrote:
&gt; &gt; As you asked for an USB-bootable solution I advise you to follow
&gt; &gt; example 7.7 from loop-aes readme. This works even with SuSE and you
&gt; &gt; can encrypt every bit of data on you drives. No bootpartition and
&gt; &gt; no partition table will remain. Up to now I haven?t seen an
&gt; &gt; installer that supports encrypted installations.
&gt; 
&gt; The beauty of that example is that it can be used also on
&gt; non-ecrypted root partitions... the system will just boot. Great to
&gt; test one's setup before actually encrypting root via aespipe.
&gt; 
&gt; And about that tweaked installer ... I discussed the issue with a
&gt; fellow slackware user some time ago. It's most certainly doable, but
&gt; right now I just lack the time to pursue that project. 

Aespipe is a good hint! When you lose your USB-Stick or think of a key-change for \
existing encrypted partitions, how do you do that? Aespipe pipes data from one \
partition to the same. It works fine unless the PC hangs. It would be fine to have a \
script that makes aespipe use 2 partitions. One for the encrypted data and a small \
one to backup chunks of the ongoing re-encryption. Let´s say a partition with 300 GB \
data is chosen to be re-encrypted with a new keyfile. At present aespipe is given \
both keyfiles and two loops are set up to read the data from one loop, pipe it \
through the program and back to the second loop. If the PC get´s stuck in this \
process 300 GB of data are lost. To prevent this, the 300 GB are to be segmented into \
100 MB chunks and the above process is done again. This time with a second partition \
to store a temporary 100 MB file and an index file that keeps the record of the \
loop´s offset and size for the actual chunk. In case of a crash the temporary chunk \
can be replayed and the index file provides the information on where to replace the \
data and how to continue the re-encryption process. Data protected against crashs, \
mission accomplished. A person with good knowledge in linux shell scripting might \
write this tool in a few hours.

Best regards
Peter
-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070428110944</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-04-28 11:09:44-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

* Alon Bar-Lev &lt;alon.barlev@gmail.com&gt; wrote:

&gt; You can review:
&gt; http://wiki.suspend2.net/EncryptedSwapAndRoot

Just curious, have you received any feedback on that page yet? 

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070502202641</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-05-02 20:26:41-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

-------- Original-Nachricht --------
Datum: Sat, 28 Apr 2007 13:30:51 +0200
Von: markus reichelt &lt;ml@mareichelt.de&gt;
An: linux-crypto@nl.linux.org
Betreff: Re: Linux distro w/loop-aes
&gt; 
&gt; Change of status, I'm currently working on it. 
&gt; 
You work on what? Which distro is it? I suppose SuSE will never integrate loop-aes. \
They did their best to spoil each kernel since I started. Ubuntu lacks RAID support \
in the graphical installer even in the latest release. No, we are far from a distro \
that asks for a memory stick to save your root gpg files on it. Very far. \
Nevertheless, I appreciate every step forward in this area.

Best regards
Peter

-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070503204450</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-05-03 20:44:50-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

* Peter_22@gmx.de wrote:

&gt; &gt; Change of status, I'm currently working on it. 
&gt; &gt; 
&gt; You work on what? Which distro is it?

I'm a slackware user (as indirectly mentioned before) so I work on
the slackware installer.


&gt; I suppose SuSE will never integrate loop-aes. They did their best
&gt; to spoil each kernel since I started. Ubuntu lacks RAID support in
&gt; the graphical installer even in the latest release. No, we are far
&gt; from a distro that asks for a memory stick to save your root gpg
&gt; files on it. Very far. Nevertheless, I appreciate every step
&gt; forward in this area.

Well, I've got it working (proof-of-concept), but the setup is
somewhat messy... Long story short, One has to know what one is
doing, most likely there won't be the infamous
Point'n'Click-interface due to the nature of a typical slackware
install. But I have some ideas of making life more comfortable in
this regard.... will put up a draft / roadmap when I'm confident
about beta testers.

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070503222317</emailId><senderName>Max Vozeler</senderName><senderEmail>max@nusquama.org</senderEmail><timestampReceived>2007-05-03 22:23:17-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

Hi Peter,

On Wed, May 02, 2007 at 10:26:41PM +0200, Peter_22@gmx.de wrote:
&gt; No, we are far from a distro that asks for a memory stick to save 
&gt; your root gpg files on it. Very far.

What makes you think so?

FWIW, this is an itch that has scratched me for a while now and
I've only stopped working on it because our code was frozen for
release. I've already reserved some weekends for adding the support
for keys on removable media to debian-installer in the next few
weeks. I realize that this is won't be directly useful to users of
other Linux distributions, but I wouldn't say we (as in the free
software community) are far away from such features, at all :-) 

Speaking for debian-installer (the only installer I have a 
good enough understanding of), I think most of the infrastructure
is in fact already there. For example, much of the code required
for accessing removable media can be shared with other parts of
the installer that handle the loading of firmware or updated 
kernel modules. I would think this is not much different with other
distribution installers. If they already handle e.g. loading of
pre-configuration from floppy or USB media, it may not be much work
to extend it for write access and generating/storing the keys.

cheers,
Max

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070504224244</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-05-04 22:42:44-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

-------- Original-Nachricht --------
Datum: Fri, 4 May 2007 00:23:17 +0200
Von: Max Vozeler &lt;max@nusquama.org&gt;
An: linux-crypto@nl.linux.org

&gt; &gt; No, we are far from a distro that asks for a memory stick to save 
&gt; &gt; your root gpg files on it. Very far.
&gt; 
&gt; What makes you think so?

What makes me so pessimistic about full disk encryption beginning with the \
installation? Well, first the fact that I had to struggle with every single SuSE \
distro since I started with 8.1. Two hours ago I had a (deeper) look at Kubuntu 7.04 \
amd64 regarding its loop-aes capabilities. It was embarrassing. I found your name \
several times when people asked where they may get the appropriate packages to build \
                the loop module. As of today:
- ubuntu lacks loop-aes (feisty)
- debian (!) packages have to be used as interim solution to get it working somehow
- the ubuntu 7.04 DVD starts a live system where rmmod loop fails
- not even a successful build of the loop.ko can be verified from within the live \
system

To avoid misunderstandings, I appreciate your engagement in debian and ubuntu! My \
words are not criticism but ubuntu isn´t much closer to loop-aes than SuSE.

With regard to FULL disk encryption I have serious doubts if the majority of \
debian/ubuntu users want such deep interventions in the kernel configuration. Up to \
now I always had to build a special kernel to include vfat, usb, serial ata, native \
language support and the like. For this evening it looks like it will remain the same \
even with debian and ubuntu anyway. Nonetheless, ubuntu and SuSE are fine distros \
with installers that most people are able to use. What you build upon this basis \
remains up to you.

&gt; If they already handle e.g. loading of
&gt; pre-configuration from floppy or USB media, it may not be much work
&gt; to extend it for write access and generating/storing the keys.

"USB media" invites me to explain why I am so crazy about this option. USB media are \
                no bulky boxes! It is more like this:
Dimensions: 15mm x 11mm x 1mm(L x W x D)
http://sandisk.com/Products/ProductInfo.aspx?ID=1195
And don´t forget, the cheap 128 MB version is already oversized.

-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070504225436</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-05-04 22:54:36-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

-------- Original-Nachricht --------
Datum: Thu, 03 May 2007 22:44:50 +0200
Von: markus reichelt &lt;ml@mareichelt.de&gt;
An: linux-crypto@nl.linux.org
Betreff: Re: Linux distro w/loop-aes

&gt; I'm a slackware user (as indirectly mentioned before) so I work on
&gt; the slackware installer.

My tour through the linux distros didn´t lead me to slackware so far. Seems to be a \
rather remote place.

&gt; Well, I've got it working (proof-of-concept), but the setup is
&gt; somewhat messy... Long story short, One has to know what one is
&gt; doing, most likely there won't be the infamous
&gt; Point'n'Click-interface due to the nature of a typical slackware
&gt; install. But I have some ideas of making life more comfortable in
&gt; this regard.... will put up a draft / roadmap when I'm confident
&gt; about beta testers.

Respecting your engagement for slackware I still guess more people could profit from \
your efforts if you did it for the debian community. Do people choosing slackware \
care about compiling a new kernel or do they even seek a graphical installer?

Best regards
Peter

-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070504234725</emailId><senderName>"IT3 Stuart Blake Tener, USN"</senderName><senderEmail>teners@bh90210.net</senderEmail><timestampReceived>2007-05-04 23:47:25-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

Mr. Vozeler, et alia:

    It is particularly instructive that of the congress of users and clients
that I frequent with regularity, a notable number have begun to assert
instantiate Ubuntu installations. When queried as to what drove their
compunction to do so, in more than some several cases I received responses
not unlike: Why would I not try it? I get Linux with the "Apple Approach" of
"it just works".

    Predicated upon a congress of users whom would exemplify such thought in
their choice for an OS alternative to Windows, or in order to provide a less
costly support driven alternative to other Linux based OS distributions, the
fact that they are driven by this modicum of thought does not and should not
otherwise limit their ability to choose to assert a posture whereby the disk
is fully encrypted from the moment installation reaches finalization.

    Is there some reason why kernels could not be built on the fly during
the course of installation capable of supporting the mixture of options that
a user would otherwise build in when rolling their own kernel post install
time?

    Additionally, the provisioning of multiple choice kernels onto the
distribution media would provide the user's a choice of options neither
impossible, nor unattractive in being able to engage loop-aes as a potential
encryption software.

    However, I do believe the best choice for the future will be TrueCrypt
since it is planned to be supported on MacOS as well as what is already in
force with support for Linux and Windows (thought I do think loop-aes does
appear to be one of the best products available of its kind in the open
source market).


Very Respectfully Submitted,

Stuart B. Tener, IT3, USNR, N3GWG
Teners AT BH90210 DOTT COM
(310) 358-0202
Beverly Hills, CA / Las Vegas, NV / Washington, DC / Philadelphia, PA


On 5/4/07 6:42 PM, "Peter_22@gmx.de" &lt;Peter_22@gmx.de&gt; wrote:

&gt; -------- Original-Nachricht --------
&gt; Datum: Fri, 4 May 2007 00:23:17 +0200
&gt; Von: Max Vozeler &lt;max@nusquama.org&gt;
&gt; An: linux-crypto@nl.linux.org
&gt; 
&gt;&gt;&gt; No, we are far from a distro that asks for a memory stick to save
&gt;&gt;&gt; your root gpg files on it. Very far.
&gt;&gt; 
&gt;&gt; What makes you think so?
&gt; 
&gt; What makes me so pessimistic about full disk encryption beginning with the
&gt; installation? Well, first the fact that I had to struggle with every single
&gt; SuSE distro since I started with 8.1. Two hours ago I had a (deeper) look at
&gt; Kubuntu 7.04 amd64 regarding its loop-aes capabilities. It was embarrassing. I
&gt; found your name several times when people asked where they may get the
&gt; appropriate packages to build the loop module. As of today:
&gt; - ubuntu lacks loop-aes (feisty)
&gt; - debian (!) packages have to be used as interim solution to get it working
&gt; somehow
&gt; - the ubuntu 7.04 DVD starts a live system where rmmod loop fails
&gt; - not even a successful build of the loop.ko can be verified from within the
&gt; live system
&gt; 
&gt; To avoid misunderstandings, I appreciate your engagement in debian and ubuntu!
&gt; My words are not criticism but ubuntu isn´t much closer to loop-aes than SuSE.
&gt; 
&gt; With regard to FULL disk encryption I have serious doubts if the majority of
&gt; debian/ubuntu users want such deep interventions in the kernel configuration.
&gt; Up to now I always had to build a special kernel to include vfat, usb, serial
&gt; ata, native language support and the like. For this evening it looks like it
&gt; will remain the same even with debian and ubuntu anyway. Nonetheless, ubuntu
&gt; and SuSE are fine distros with installers that most people are able to use.
&gt; What you build upon this basis remains up to you.
&gt; 
&gt;&gt; If they already handle e.g. loading of
&gt;&gt; pre-configuration from floppy or USB media, it may not be much work
&gt;&gt; to extend it for write access and generating/storing the keys.
&gt; 
&gt; "USB media" invites me to explain why I am so crazy about this option. USB
&gt; media are no bulky boxes! It is more like this:
&gt; Dimensions: 15mm x 11mm x 1mm(L x W x D)
&gt; http://sandisk.com/Products/ProductInfo.aspx?ID=1195
&gt; And don´t forget, the cheap 128 MB version is already oversized.



-- 

Very Respectfully,

IT3 Stuart Blake Tener, USN
Beverly Hills, California
Amateur Radio Call Sign: N3GWG (Extra)
email: teners@bh90210.net
phone: +(1) 310.358.0202 (Beverly Hills, CA)
phone: +(1) 215.338.6005 (Philadelphia, PA)
phone: +(1) 702.988.3989 (Las Vegas, NV)
E-Fax: +(1) 915.773.0935 (Telecopier)

Military emails (checked monthly until remote NMCI access is secured)
NIPRNET: stuart.tener@navy.mil / tenerstu@nro.mil
SIPRNET: NONE
TS/SCI:  tenerstu@nro.ic.gov (GWAN)

Confidentiality Notice: This e-mail message, including any attachments, is
for the sole use of the intended recipient(s) and may contain confidential
and/or privileged information. Any unauthorized review, use, disclosure or
distribution is prohibited. If you are not the intended recipient, please
contact the sender by reply e-mail and destroy all copies of the original
message.




-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070507094503</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-05-07 09:45:03-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

* Max Vozeler &lt;max@nusquama.org&gt; wrote:

&gt; &gt; I'm a slackware user (as indirectly mentioned before) so I work
&gt; &gt; on the slackware installer.
&gt; 
&gt; Hey, cool that you're working on this for slackware. :-)

slackware won't include loop-aes and therefore the project will be
just an add-on for slackware.

Because of that I will only include a non-SMP kernel (I don't have
the hardware for SMP testing) and only the i686 build. i486 with
loop-aes doesn't make sense.

One has to fiddle with loop-aes &amp; kernel anyway.


&gt; &gt; Well, I've got it working (proof-of-concept), but the setup is
&gt; &gt; somewhat messy... Long story short, One has to know what one is
&gt; &gt; doing, most likely there won't be the infamous
&gt; &gt; Point'n'Click-interface due to the nature of a typical slackware
&gt; &gt; install. But I have some ideas of making life more comfortable in
&gt; &gt; this regard.... will put up a draft / roadmap when I'm confident
&gt; &gt; about beta testers.
&gt; 
&gt; Just a thought: Reading your mail I went through the issues I 
&gt; came across doing similar for debian-installer -- and came to think
&gt; that some of those issues probably affect all installers independent 
&gt; of the distribution to be installed. For example, the small amount
&gt; of entropy gathered up to the point of key generation. 

I agree.


&gt; I think it could be interesting to share some ideas and maybe code 
&gt; in this area. Like, to overcome the small amount of entropy, in Debian
&gt; the user is presented with a text entry box and asked to type random
&gt; characters into it - A progress bar shows how much mindless typing
&gt; remains ;-) This is not exactly great, and I would be interested in
&gt; discussing other approaches to the problem.

most likely it's going to be a simplistic setup only, nothing fancy.
Just that it works and people can adapt it to their needs easily.


&gt; E.g. we could try to take advantage of hardware RNGs - but how to 
&gt; detect them? hw_random used to autoload and provide a /dev/hwrandom
&gt; (IIRC) on this system here but blocked reads forever as the chipset
&gt; doesn't really have an RNG. Another idea was to just trigger any disk
&gt; IO and hope that the IDE/SCSI driver contributes entropy this way.
&gt; Or perhaps using audio/video-entropyd  - but are they reliable enough
&gt; on their own or should their output be fed through something like 
&gt; rngd to be safe? Or should we just use /dev/urandom? 

There are some approaches to this (found some sites about the topic),
but I tend to stick to gpg --gen-random for now. gpg is already
needed so why not make use of it ;-)

It's using an implementation of "Software Generation of Practically Strong
Random Numbers" by Peter Gutman, which is ok for me
http://www.cs.auckland.ac.nz/~pgut001/pubs/random.pdf

He published a followup-paper on the subject, but I doubt gnupg is
going to tinker with that.


&gt; Regarding the implementation, large parts of our code are specific
&gt; to the Debian partitioning tool (partman) and the debconf interface 
&gt; used in the installer, but maybe some bits are also applicable or 
&gt; interesting for your slackware implementation, maybe blockdev-wipe
&gt; which is like dd if=/dev/zero with progress output. You can find most
&gt; of this code at [1] and there is some discussion at [2] and also
&gt; spread in the debian-boot list archives.

the slackware installer is spartanic, if the disk is not partitioned
one will get a nice message about fdisk ;-) 

However, I've stopped work on the latest official release installer
because that was made for 2.4 kernels (which gave me troubles here
and there.... had to use chroot et al. --- messy) and it looks like
(finally!) the next release will feature a 2.6 kernel, and maybe a
recent busybox for the installer.

I have some ideas concerning the boot setup (create boot CD/USB stick
 on-the-fly, adapt initrd, patch linuxrc instead of compiling
freshly) and try to get that framework running in the meantime.

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070507094805</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-05-07 09:48:05-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

* Peter_22@gmx.de wrote:


&gt; Respecting your engagement for slackware I still guess more people
&gt; could profit from your efforts if you did it for the debian
&gt; community. Do people choosing slackware care about compiling a new
&gt; kernel or do they even seek a graphical installer?

Max is working on debian.

--=20
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070609134804</emailId><senderName>Max Vozeler</senderName><senderEmail>max@nusquama.org</senderEmail><timestampReceived>2007-06-09 13:48:04-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

Hi Peter,

Peter_22@gmx.de wrote:
&gt; Max Vozeler wrote: 
&gt; &gt; Peter_22 wrote:
&gt; &gt; &gt; No, we are far from a distro that asks for a memory stick to save 
&gt; &gt; &gt; your root gpg files on it. Very far.
&gt; &gt; 
&gt; &gt; What makes you think so?
&gt; 
&gt; What makes me so pessimistic about full disk encryption beginning with
&gt; the installation? Well, first the fact that I had to struggle with
&gt; every single SuSE distro since I started with 8.1. Two hours ago I had
&gt; a (deeper) look at Kubuntu 7.04 amd64 regarding its loop-aes
&gt; capabilities. It was embarrassing. I found your name several times
&gt; when people asked where they may get the appropriate packages to build
&gt; the loop module. 

Yes, unfortunately the packages in Ubuntu are not in a good state.
I can only give an "outsiders" view of why that is: The loop-AES
packages live in the "universe"-component of Ubuntu which is community
maintained and usually imported from Debian unstable at some point
during development of an Ubuntu release. From my perspective as Debian
maintainer, this point is fairly arbitrary. 

I usually learn about the versions imported from Debian as soon
as someone notices a problem with the version included in an Ubuntu
release. It has happened that a comparably minor bug (but one that
affected usability of the package strongly) was included in an Ubuntu
release, although it was documented in the Debian bugtracking system
and already fixed by a newer version. So what seems to me is missing
is a dedicated maintainer who actually uses loop-AES and checks for
bugs, usability and does general QA of the Ubuntu versions of the
loop-AES packages before they get released.

&gt; As of today:
&gt; - ubuntu lacks loop-aes (feisty)
&gt; - debian (!) packages have to be used as interim solution to get it working somehow
&gt; - the ubuntu 7.04 DVD starts a live system where rmmod loop fails
&gt; - not even a successful build of the loop.ko can be verified from within the live system

&gt; To avoid misunderstandings, I appreciate your engagement in debian and
&gt; ubuntu! My words are not criticism but ubuntu isn´t much closer to
&gt; loop-aes than SuSE.

Even if you didn't mean to criticise, I think construtive criticism
can be very important. :-) To improve the state of loop-AES in Ubuntu
it would be useful to provide feedback (bug reports, etc.) to the MOTU
Team, who AFAIK take care of packages in the "universe" component. I'm
not actually involved in Ubuntu development, but if I can help someone
adapt the Debian packages to Ubuntu and fix problems, share experience,
etc, I would be happy to help. I just cannot really take care as
maintainer for another distribution.

&gt; With regard to FULL disk encryption I have serious doubts if the
&gt; majority of debian/ubuntu users want such deep interventions in the
&gt; kernel configuration. Up to now I always had to build a special kernel
&gt; to include vfat, usb, serial ata, native language support and the
&gt; like. 

In fact, it should not be necessary to build your own kernel. 
Everything that's required is already available as modules, which
can be loaded during boot by the initramfs early userspace. Only
scripts are required to integrate with initramfs-tools or comparable
mechanisms of other distributions. A version of such scripts for
Debian is already written and pending upload to Debian unstable. The
scripts make it so that almost no changes (besides config) are 
required to get a system to boot from loop-AES encrypted root. (And
they are the last step for adding support of loop-AES encrypted 
root to the Debian installer)

PS: I'm sorry for the very late reply.. :-( I seem to have forgotten
about this thread.

cheers,
Max

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070609141047</emailId><senderName>Max Vozeler</senderName><senderEmail>max@nusquama.org</senderEmail><timestampReceived>2007-06-09 14:10:47-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

Hi IT3 Stuart Blake Tener, USN,

On Fri, May 04, 2007 at 07:47:25PM -0400, IT3 Stuart Blake Tener, USN wrote:
&gt;     Predicated upon a congress of users whom would exemplify such thought in
&gt; their choice for an OS alternative to Windows, or in order to provide a less
&gt; costly support driven alternative to other Linux based OS distributions, the
&gt; fact that they are driven by this modicum of thought does not and should not
&gt; otherwise limit their ability to choose to assert a posture whereby the disk
&gt; is fully encrypted from the moment installation reaches finalization.

I agree. Full disk encryption is something I like to see available
during installation of Linux distributions, and easy enough to use that
non-technical users can choose to use strong encryption for their data
without having to dive into the technical details.

&gt;     Is there some reason why kernels could not be built on the fly during
&gt; the course of installation capable of supporting the mixture of options that
&gt; a user would otherwise build in when rolling their own kernel post install
&gt; time?
&gt;
&gt;     Additionally, the provisioning of multiple choice kernels onto the
&gt; distribution media would provide the user's a choice of options neither
&gt; impossible, nor unattractive in being able to engage loop-aes as a potential
&gt; encryption software.

It seems to me like building kernels during installation could prove
rather complex and might be error prone. Fortunately, for loop-AES this
is not required. Most distribution kernels include the standard kernel
loop driver as module so that it can be "overridden" by the loop-AES
version without recompile of the kernel.

This is ignoring the merit of building the kernel during install to
cater for different needs of users. This could be an interesting 
feature, albeit difficult to implement. I tend to think that this is
becoming less important with the flexibility of current distribution
kernels and more powerful early userspace (initramfs), but that's 
just my impression :-)

cheers,
Max

-- 
PS: Sorry for the very late reply. :-(

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070609143218</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-06-09 14:32:18-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

* Max Vozeler &lt;max@nusquama.org&gt; wrote:

&gt; It seems to me like building kernels during installation could
&gt; prove rather complex and might be error prone. Fortunately, for
&gt; loop-AES this is not required. Most distribution kernels include
&gt; the standard kernel loop driver as module so that it can be
&gt; "overridden" by the loop-AES version without recompile of the
&gt; kernel.

Hmm, I thought the recompile was needed (strictly following the
readme). Are you sure? ;-)

In case this stunt works, all the tinkering with default slackware
kernels isn't necessary.

--=20
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070609163122</emailId><senderName>Max Vozeler</senderName><senderEmail>max@nusquama.org</senderEmail><timestampReceived>2007-06-09 16:31:22-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

Hi markus,

On Sat, Jun 09, 2007 at 04:32:18PM +0200, markus reichelt wrote:
&gt; * Max Vozeler &lt;max@nusquama.org&gt; wrote:
&gt; 
&gt; &gt; It seems to me like building kernels during installation could
&gt; &gt; prove rather complex and might be error prone. Fortunately, for
&gt; &gt; loop-AES this is not required. Most distribution kernels include
&gt; &gt; the standard kernel loop driver as module so that it can be
&gt; &gt; "overridden" by the loop-AES version without recompile of the
&gt; &gt; kernel.
&gt; 
&gt; Hmm, I thought the recompile was needed (strictly following the
&gt; readme). Are you sure? ;-)

Yes, that's fine (to the best of my knowledge).

The loop driver is very self-contained: In the mainline kernel 
there is no other user of loop.h or symbols exported from the loop
driver apart from the cryptoloop driver. cryptoloop might break if
used with loop-AES, but apart from that, I don't think there is 
any problem replacing the loop module with loop-AES. 

In practice one must be careful to ensure the correct module 
being loaded, be it by overwriting/diverting the original module or
by installing into /lib/modules/$KERNEL/updates for 2.6 kernels. I 
think that this is the reason Jari explicitly mentions having to 
have CONFIG_BLOCK_DEV_LOOP=n in the documentation. Jari, please
correct me if that's wrong.

The Debian loop-AES packages have been replacing the module in 
this way for quite some time now with no problems that I know of.
I don't see why it wouldn't work or why it would be unsafe. That 
said, if there _are_ any problems I'm not seeing/considering, I 
would appreciate if someone could swing a clue bat my way ;-)

cheers,
Max

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070611092038</emailId><senderName>Phil</senderName><senderEmail>philtickle200@yahoo.com</senderEmail><timestampReceived>2007-06-11 09:20:38-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

I wish Jari would change the README to clarify the
possibility of building and installing loop-aes
without a kernel recompile by replacing an existing
loop driver  module.

As I recall the possibility of not recompiling the
kernel exists in the README only with regard to
upgrading an existing loop-aes loop.o, and not with
regard to replacing a non-loop-aes loop.o.

As I understand it you still have to recompile the
kernel if you want to encryot the root filesystem or
if the loop driver has been compiled into the kernel.

I think loop-aes would be much more widely adopted if
this was better understood.  I think a ,ot of users 
assume you have to replace the kernel based on the
README just to encrypt a partition, and they think,
"oh can't be bothered".  Then they use dmcrypt or
whatever.




--- Max Vozeler &lt;max@nusquama.org&gt; wrote:

&gt; Hi markus,
&gt; 
&gt; On Sat, Jun 09, 2007 at 04:32:18PM +0200, markus
&gt; reichelt wrote:
&gt; &gt; * Max Vozeler &lt;max@nusquama.org&gt; wrote:
&gt; &gt; 
&gt; &gt; &gt; It seems to me like building kernels during
&gt; installation could
&gt; &gt; &gt; prove rather complex and might be error prone.
&gt; Fortunately, for
&gt; &gt; &gt; loop-AES this is not required. Most distribution
&gt; kernels include
&gt; &gt; &gt; the standard kernel loop driver as module so
&gt; that it can be
&gt; &gt; &gt; "overridden" by the loop-AES version without
&gt; recompile of the
&gt; &gt; &gt; kernel.
&gt; &gt; 
&gt; &gt; Hmm, I thought the recompile was needed (strictly
&gt; following the
&gt; &gt; readme). Are you sure? ;-)
&gt; 
&gt; Yes, that's fine (to the best of my knowledge).
&gt; 
&gt; The loop driver is very self-contained: In the
&gt; mainline kernel 
&gt; there is no other user of loop.h or symbols exported
&gt; from the loop
&gt; driver apart from the cryptoloop driver. cryptoloop
&gt; might break if
&gt; used with loop-AES, but apart from that, I don't
&gt; think there is 
&gt; any problem replacing the loop module with loop-AES.
&gt; 
&gt; 
&gt; In practice one must be careful to ensure the
&gt; correct module 
&gt; being loaded, be it by overwriting/diverting the
&gt; original module or
&gt; by installing into /lib/modules/$KERNEL/updates for
&gt; 2.6 kernels. I 
&gt; think that this is the reason Jari explicitly
&gt; mentions having to 
&gt; have CONFIG_BLOCK_DEV_LOOP=n in the documentation.
&gt; Jari, please
&gt; correct me if that's wrong.
&gt; 
&gt; The Debian loop-AES packages have been replacing the
&gt; module in 
&gt; this way for quite some time now with no problems
&gt; that I know of.
&gt; I don't see why it wouldn't work or why it would be
&gt; unsafe. That 
&gt; said, if there _are_ any problems I'm not
&gt; seeing/considering, I 
&gt; would appreciate if someone could swing a clue bat
&gt; my way ;-)
&gt; 
&gt; cheers,
&gt; Max
&gt; 
&gt; -
&gt; Linux-crypto:  cryptography in and on the Linux
&gt; system
&gt; Archive:      
&gt; http://mail.nl.linux.org/linux-crypto/
&gt; 
&gt; 



       
____________________________________________________________________________________
Get the Yahoo! toolbar and be alerted to new email wherever you're surfing.
http://new.toolbar.yahoo.com/toolbar/features/mail/index.php

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070611160824</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-06-11 16:08:24-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

Phil wrote:
&gt; I wish Jari would change the README to clarify the
&gt; possibility of building and installing loop-aes
&gt; without a kernel recompile by replacing an existing
&gt; loop driver  module.

It is not that simple. Rules:

- Always compile kernel and all modules using same C compiler and tools.
- Always compile kernel and all modules using same kernel sources.
- Always compile kernel and all modules using same kernel configuration.

All code that runs in kernel space must have same view of kernel data
structures, and use same type generated code for locking and such. Deviating
from above rules will often result in situation where that is no longer
true.

If kernel and modules are compiled on different boxes, then you run into
these questions/problems:

- Are you using same C compiler and tools as the party that compiled your
  kernel? Sometimes tools are upgraded on one box and not on other.
- Are you using same kernel sources as the party that compiled your kernel?
  I can recall at least one distro that includes embargoed security fixes in
  their precompiled kernel binaries, but sources that they distribute do not
  include those fixes (to avoid disclosing those fixes).
- Are you using same kernel configuration as the party that compiled your
  kernel? Distros ship different kernels compiled using different kernel
  configurations. Kernel sources and its configuration that you installed
  do not necessarily reflect the kernel binary that you installed.
- Are your kernel sources in a state that can be used to compile kernel
  modules? Your distro may have "cleaned" your kernel sources by removing
  compile time generated files that are required to compile kernel modules.
  All this to save space.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070612152320</emailId><senderName>Phil</senderName><senderEmail>philtickle200@yahoo.com</senderEmail><timestampReceived>2007-06-12 15:23:20-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

Absolutely, I understand you want people to recompile
the kernel to make 100% sure these things all match.

I suppose you could always give that proviso and also
say that problems may appear if this is not done, but
then say the user may get away with not recompiling
the kernel if (a) loop support was not compiled into
the running kernel but was built as a loadable module;
(b) the user does not wish to encrypt the root
filesystem but only wishes to encrypt a
partition/device; (c) the user's prepared kernel
sources .config exactly matches that of the running
kernel; (d) the user compiles the module using the
exact same version of gcc (and is it binutils?) that
the running kernel was compiled with; (e) anything
I've forgotten.

I've done this to match certain knoppix kernels, not
using Max's packages but from source.  The only
problem I've noticed is on one system there are
occasional freezes but only when a certain gtk2 app is
loaded it seems. That might be the app though or some
interaction with it  - it hasn't been updated in four
years.  




--- Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt;
wrote:

&gt; It is not that simple. Rules:
&gt; 
&gt; - Always compile kernel and all modules using same C
&gt; compiler and tools.
&gt; - Always compile kernel and all modules using same
&gt; kernel sources.
&gt; - Always compile kernel and all modules using same
&gt; kernel configuration.
&gt; 
&gt; All code that runs in kernel space must have same
&gt; view of kernel data
&gt; structures, and use same type generated code for
&gt; locking and such. Deviating
&gt; from above rules will often result in situation
&gt; where that is no longer
&gt; true.
&gt; 
&gt; If kernel and modules are compiled on different
&gt; boxes, then you run into
&gt; these questions/problems:
&gt; 
&gt; - Are you using same C compiler and tools as the
&gt; party that compiled your
&gt; kernel? Sometimes tools are upgraded on one box
&gt; and not on other.
&gt; - Are you using same kernel sources as the party
&gt; that compiled your kernel?
&gt; I can recall at least one distro that includes
&gt; embargoed security fixes in
&gt; their precompiled kernel binaries, but sources
&gt; that they distribute do not
&gt; include those fixes (to avoid disclosing those
&gt; fixes).
&gt; - Are you using same kernel configuration as the
&gt; party that compiled your
&gt; kernel? Distros ship different kernels compiled
&gt; using different kernel
&gt; configurations. Kernel sources and its
&gt; configuration that you installed
&gt; do not necessarily reflect the kernel binary that
&gt; you installed.
&gt; - Are your kernel sources in a state that can be
&gt; used to compile kernel
&gt; modules? Your distro may have "cleaned" your
&gt; kernel sources by removing
&gt; compile time generated files that are required to
&gt; compile kernel modules.
&gt; All this to save space.
&gt; 
&gt; -- 
&gt; Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9 
&gt; DB 1D EB E3 24 0E A9 DD
&gt; 
&gt; -
&gt; Linux-crypto:  cryptography in and on the Linux
&gt; system
&gt; Archive:      
&gt; http://mail.nl.linux.org/linux-crypto/
&gt; 
&gt; 



       
____________________________________________________________________________________
Moody friends. Drama queens. Your life? Nope! - their life, your story. Play Sims \
Stories at Yahoo! Games. http://sims.yahoo.com/  

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070613101223</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-06-13 10:12:23-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

&gt; Max Vozeler wrote: 
&gt; Yes, unfortunately the packages in Ubuntu are not in a good state.
&gt; I can only give an "outsiders" view of why that is: The loop-AES
&gt; packages live in the "universe"-component of Ubuntu which is community
&gt; maintained and usually imported from Debian unstable at some point
&gt; during development of an Ubuntu release. From my perspective as Debian
&gt; maintainer, this point is fairly arbitrary. 

In fact Debian has the more proper packages! Over the recent days I did some review \
on Debian 4.0 (etch) and Canonical´s 7.10 Kubuntu named "gusty gibbon". To my \
surprise etch comes along with an installer that offers loop-aes and also \
device-mapper encryption in various ciphers. Tribe-1 of Kubuntu 7.10 doesn´t include \
such fancy things but the installation is very simple! So now to the points which \
hurt. For both distros loop-aes modules are available and KNOPPIX 5.2 even ships with \
them. The point is that their kernels are unsuitable to boot from USB memory. What is \
loop-aes for you? Some people think the job is done when you are able to handle \
encrypted partitions. Almost any newer distro can do this. Others look for root \
encryption with an unencrypted /boot partition. Only etch can currently provide this \
directly from the installer. SuSE, Ubuntu and others require finishing touches. Since \
mainboards can boot from removable USB memory I thought it is a good idea to spare \
the unencrypted /boot partition and remove even the last traces from every disk. Not \
a single installer can do this today - and it will remain like this. Reasons are:
Installers create partitions which skip space at the beginning and end of a hard \
drive. The first 512 bytes are occupied by master boot record and partition table. \
This data betrays that I actually store data here and reveals positions. Due to \
filesystem conventions there remains some cut-off at the end of the drive. Once I am \
done with a system disk there is no partition table left over and no space before the \
beginning of a first partition wasted. When issuing "less -f /dev/sdX" there has to \
come up nothing else but randomly looking data, from the first to the very last \
sector. Such a drive looks no different from a drive where "dd if=/dev/urandom \
of=/dev/sdX" has been run. Regarding kernels I would like to add that none of them \
has usbcore built-in which is definitely required to boot from USB memory. For \
standard distros it would make no sense to build this module into the kernel. That´s \
why installable modules will never do the job.


&gt; I usually learn about the versions imported from Debian as soon
&gt; as someone notices a problem with the version included in an Ubuntu
&gt; release. It has happened that a comparably minor bug (but one that
&gt; affected usability of the package strongly) was included in an Ubuntu
&gt; release, although it was documented in the Debian bugtracking system
&gt; and already fixed by a newer version. So what seems to me is missing
&gt; is a dedicated maintainer who actually uses loop-AES and checks for
&gt; bugs, usability and does general QA of the Ubuntu versions of the
&gt; loop-AES packages before they get released.

Interesting to see your perspective of this issue. I knew you are a package \
maintainer but I do not entirely understand how ubuntu and debian sit together. \
Ubuntu documentation disadvises the installation of debian packages. In case of \
aespipe and gnupg there is not hint whether the binaries are linked statically or \
not. You know you need them linked statically for use in root encryption. However \
this is not a bug! I just doesn´t fit a special purpose. Because of this I wouldn´t \
look for precompiled packages any further. I took the kernel-source and other source \
code to build everything just as I did under SuSE before. This led to a working \
kernel up to the point where the password is asked. With regard to your work I would \
say it definitely helps users to have packages which provide access to encrypted \
partitions. This would allow for encryption CDs/DVDs and non-system partitions \
without kernel manipulation. To my knowledge KNOPPIX and Debian provide this, Ubuntu \
is very close to it. As you are interested in feedback I fear there are too few users \
occupied with this issue. Even I had problems in describing where my work failed.

 
&gt; Even if you didn't mean to criticise, I think construtive criticism
&gt; can be very important. :-) To improve the state of loop-AES in Ubuntu
&gt; it would be useful to provide feedback (bug reports, etc.) to the MOTU
&gt; Team, who AFAIK take care of packages in the "universe" component. I'm
&gt; not actually involved in Ubuntu development, but if I can help someone
&gt; adapt the Debian packages to Ubuntu and fix problems, share experience,
&gt; etc, I would be happy to help. I just cannot really take care as
&gt; maintainer for another distribution.

Well I am far from criticizing people who spend their time on providing free \
software. On this forum I just ask for help from time to time. Non of the distros was \
ever said to provide full disk encryption. I suppose nobody would waste his time to \
write an installer that sets up a distro without partitions only because of I fear to \
leak information about where my files may sit. My hope is simply to have distros in \
reach that are suitable for manipulating them in the desired way. Some SuSE distros \
cam with kernels that didn´t compile after my reconfiguration. I had to ask questions \
here to get it done. By the way, I lost a gusty-gibbon installation because the \
NVIDIA graphics driver turned out to be the wrong module. On SuSE I would correct it \
with "sax2" but for ubuntu I simply don´t know the right command:-(

So thank you for all your efforts. We will benefit from advances in debian as well as \
any other distro.


Kind regards,
Peter
-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070613153513</emailId><senderName>"Bradley Worley"</senderName><senderEmail>geekysuavo@gmail.com</senderEmail><timestampReceived>2007-06-13 15:35:13-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

hey everyone, great points all, but i have a quick question...

&gt; Regarding kernels I would like to add that none of them has usbcore built-in which is
&gt; definitely required to boot from USB memory. For standard distros it would make no
&gt; sense to build this module into the kernel. That´s why installable modules will never do
&gt; the job.

couldn't a package maintainer keep a fully modular kernel and load
usbcore from an initramfs? it seems like your usb drive would need
some sort of custom initrd/initramfs to mount the encrypted root
anyways, so what keeps an installer from laying down a copy of the
module onto the usb drive as well?

~ brad.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070613161018</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-06-13 16:10:18-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

Peter_22@gmx.de wrote:
&gt; Once I am done with a system disk there is no partition table left over
&gt; and no space before the beginning of a first partition wasted. When
&gt; issuing "less -f /dev/sdX" there has to come up nothing else but randomly
&gt; looking data, from the first to the very last sector. Such a drive looks
&gt; no different from a drive where "dd if=/dev/urandom of=/dev/sdX" has been
&gt; run.

Most people understand that large hunk of random looking data is either
compressed or encrypted. You may be able to claim that your
no-partition-tables hard disk contains compressed data if you slap gzip or
bzip2 header to the beginning of the the disk. Or even better, write a
header that says "technobubble compressor version 0.1-alpha3 1999-06-15".
When asked how to decompress that, you say "they went out of business".

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070613204552</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-06-13 20:45:52-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; Most people understand that large hunk of random looking data is either
&gt; compressed or encrypted. You may be able to claim that your
&gt; no-partition-tables hard disk contains compressed data if you slap gzip or
&gt; bzip2 header to the beginning of the the disk. Or even better, write a
&gt; header that says "technobubble compressor version 0.1-alpha3 1999-06-15".
&gt; When asked how to decompress that, you say "they went out of business".

Very funny in deed! However, experience has proven that calmness remains the best \
protection in any situation. I would neither advise someone to spill information nor \
would I suggest to mock intruders. Most likely it´s best to try to de-escalate the \
situation and remain silent. What is to be discovered will be discovered and which is \
not wont be. Consider, by laying out traces you give reason to ask questions which \
you definitely don´t want to answer. Traps, dismissive behavior and such may lead to \
aggressive reactions. To put the strategy in a nutshell: Zero information spillage \
Anyway it doesn´t matter if some data is compressed, encrypted or mutilated by the \
latest virus on the net. As long as you can´t use it for some purpose it remains \
completely worthless.

Kind regards,
Peter
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal für Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070614095304</emailId><senderName>Rudolf Deilmann</senderName><senderEmail>rudolf.deilmann@gmail.com</senderEmail><timestampReceived>2007-06-14 09:53:04-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

Hi Peter,

&gt; In fact Debian has the more proper packages! Over the recent days I
&gt; did some review on [...] Canonical ´s 7.10 Kubuntu
&gt; named "gusty gibbon". [...] Tribe-1 of Kubuntu 7.10 doesn ´t include
&gt; such fancy things but the installation is very simple! So now to the
&gt; points which hurt. 

I don't take a look to ubuntu 7.10 yet, because it is still beta or
even alpha. But I'm familiar with ubuntu 7.04 and earlier. So I don't
know, if my comments apply to 7.10.

The installer is for people without deeper knowledge of linux. If you
want to use encryption (dmcrypt only, because loop-AES isn't avaiable
on the live-CD or repositories), you can boot from live-cd,
create your encrypted devices on the shell, and then tell the installer
to use this devices. The installer will just report an error, when it
tries to install the boot-manager. You have to do this yourself,.... But
anything else seems to work fine,... (Of course, you have to chroot to
the new system and customize it before the first boot. But there are
just a few things to do,....)
If you want to use loop-AES, you can boot from knoppix-cd, create
the encrypted devices and then install ubuntu via debootstrap and
chroot. But I wouldn't do it that way, because there are too many
things, you have to configure by hand,... It's easier to install Ubuntu
in the normal way and then encrypt the devices with aespipe,....

&gt; For both distros loop-aes modules are available and

The last time, I checked it, Ubuntu's loop-aes package just provide
cryptoloop functionality. It don't include multi-key support or
something like this. 

&gt; KNOPPIX 5.2 even ships with them. The point is that their kernels are
&gt; unsuitable to boot from USB memory. 
..
&gt; Regarding kernels I would
&gt; like to add that none of them has usbcore built-in which is
&gt; definitely required to boot from USB memory.

That's wrong. You can boot from USB-Memory in Ubuntu without any
problems. You must create an inital ramdisk with initramfs-tools,
install syslinux on your usb-stick and copy the kernel, the initial
ramdisk and your syslinux.cfg to your stick. That's all. And you have
to create an initial ramdisk in any case, if you want to use full-disk
encryption,.... 
There are three files, you need to modify/create:
[1] /etc/initramfs-tools/modules (for the modules that you want to
include in your initramfs (loop) )
[2] /etc/initramfs-tools/hooks/namedoesntmatter (for the programms that
you want to include in your initramfs (gpg,losetup,...))
[3] /etc/initramfs-tools/scripts/local-top/namedoesntmatter (an script
to set up your encrypted devices) See 'man initramfs-tools' for
details. You don't need the "build-initrd.sh" from loop-AES. 


&gt; You know you need them linked statically for use in root encryption.

No, I don't think so. You only need it, if you follow exactly the steps
in the README.

The only thing missing in Ubuntu is an loop-AES package, that replaces
the original loop module and supports multi-key mode. Everythings
else works fine. If such an package would be avaiable, you could
install loop-AES in analogy to dmcrypt. It is'nt very difficult to
create your encrytped device on the shell from the live-cd and then tell
the installer to use this devices.
And the scripts in /etc/initramfs-tools/* are very small and easy to
understand. Everyone, who is familiar with the shell and has some
basic linux knowledge, could easily setup a system with root encryption
from live-CD.


cu,
 Rudi

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070614135222</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-06-14 13:52:22-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

Rudolf Deilmann &lt;rudolf.deilmann@gmail.com&gt; wrote:
&gt; Hi Peter,
&gt; I don't take a look to ubuntu 7.10 yet, because it is still beta or
&gt; even alpha. But I'm familiar with ubuntu 7.04 and earlier. So I don't
&gt; know, if my comments apply to 7.10.

You are right. I looked at recent distros to see which parts are built-in and what´s \
not. The approaches mentioned by you are interesting and encouraging! 

&gt; It's easier to install Ubuntu in the normal way and then encrypt the devices with \
&gt; aespipe,....

That´s the way I do it and for which I need statically linked gpg and aespipe.

&gt; The last time, I checked it, Ubuntu's loop-aes package just provide
&gt; cryptoloop functionality. It don't include multi-key support or
&gt; something like this.

As far as I remember the universe package provides loop-aes modules with version 3 \
format / multi-key support.

&gt; That's wrong. You can boot from USB-Memory in Ubuntu without any
&gt; problems. You must create an inital ramdisk with initramfs-tools,
&gt; install syslinux on your usb-stick and copy the kernel, the initial
&gt; ramdisk and your syslinux.cfg to your stick. That's all. And you have
&gt; to create an initial ramdisk in any case, if you want to use full-disk
&gt; encryption,.... 

Sure, by means of an initial ramdisk you may boot from every device. The point is \
that the initrd for loop-aes has to be small in size, 2-3 kb. That´s why I always \
included thinks like ext3, vfat, serial ata and usb into the kernel which ends up at \
1,8 MB in size. It might be worth an effort to try loading modules from usb memory. \
However, I didn´t try so far. The think is, before modules are loaded the usb memory \
is mounted (as /lib) which in turn requires the kernel to comprise usbcore, \
usbstorage,... and vfat of course. Back to recent distros:
Kubuntu 7.04 and 7.10 don´t have usbcore, usbstorage or vfat built-in. So a  kernel \
recompile is needed. Since I am not familiar with debian/ubuntu scripts it would be \
fine to understand your steps towards full disk-encryption a little better. \
Especially how to build an initial ramdisk for booting from usb memory without \
build-initrd.sh would be nice to learn.

Best regards,
Peter
-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070409174447</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-04-09 17:44:47-0400</timestampReceived><subject>Re: loop-aes and busybox/initramfs-hook</subject><body>

Hello,

I had no problem with this...
The gpg home can be set using -G argument to losetup or using
GNUPGHOME environment.

You don't have to have any passwd shadow etc.

You can refer to:
http://wiki.suspend2.net/EncryptedSwapAndRoot

For a working environment.

Best Regards,
Alon Bar-Lev

On 4/9/07, S. Sakar &lt;serkan.sakar@gmx.net&gt; wrote:
&gt; hi,
&gt; I'm trying to integrate loop-aes into my ramdisk, but when I type the
&gt; password to unlock my gpgkey I get the error message
&gt; "Unable to detect home directory for uid 0" due to this codesegment:
&gt;
&gt; if((getuid() == 0) &amp;&amp; gpgHomeDir &amp;&amp; gpgHomeDir[0]) {
&gt;         h = gpgHomeDir;
&gt; } else {
&gt;         if(!(p = getpwuid(getuid()))) {
&gt;                 fprintf(stderr, _("Error: Unable to detect home directory for uid
&gt; %d\n"), (int)getuid());
&gt;                 return NULL;
&gt;         }
&gt;         h = p-&gt;pw_dir;
&gt; }
&gt;
&gt; First, the login/password features were not build into busybox, so I put
&gt; /etc/passwd , /etc/group, /etc/shadow, /etc/nsswitch.conf, /lib/libnss_*
&gt; into the initrd, but same error message.
&gt; Then i tried a busybox-binary with build-in login/password features, and
&gt; again no success.
&gt; I would be glad if someone could point me in the right direction.
&gt;
&gt; Regards,
&gt; Serkan
&gt;
&gt; -
&gt; Linux-crypto:  cryptography in and on the Linux system
&gt; Archive:       http://mail.nl.linux.org/linux-crypto/
&gt;
&gt;

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070226185201</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-26 18:52:01-0400</timestampReceived><subject>Re: Merging ciphers into loop-AES</subject><body>

Max Vozeler wrote:
&gt; I think both points could be helped by having loop-AES and
&gt; ciphers be one software package in one tarball. It would make it
&gt; easier for users of ciphers to build and install the modules, and
&gt; last but not least would make my life as distribution package
&gt; maintainer a bit easier. :-)
&gt; 
&gt; Downsides: Uncompressed tarball grows by ~90k. Users who don't
&gt; need/want ciphers still get them and, if the cipher modules were
&gt; installed by default, an additional ~45k of disk space used.
&gt; 
&gt; What do you think?

There are cases where people are using kernel patch version of loop-AES, and
build and install those extra cipher modules without building loop-AES
module. So there is some need of ciphers package staying as separate
package.

Would it help if loop-AES Makefile detects presence of additional
loop_xxxx.c source files is its base directory, and compiles and installs
them all together? Your maintenance "work" would involve making sure that
all source files are in same directory.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070301134504</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-03-01 13:45:04-0400</timestampReceived><subject>Re: Merging ciphers into loop-AES</subject><body>

Max Vozeler wrote:
&gt; I've been thinking about this a bit. Do you think this could - in
&gt; principle - be solved by changes to the build system?
&gt; 
&gt;  a) Adding a "ciphers" build target for building (and installing)
&gt;     just the cipher modules, skipping loop.$(VM1)o, be a workable
&gt;     approach? I've hacked together a proof-of-concept patch to that
&gt;     effect; Note that it is quite surely not working as-is, it is
&gt;     merely an illustration and meant as basis for discussion.

Should work ok, but I prefer EXTRA_CIPHERS=y make parameter.

&gt;  b) Alternatively, although not clean, maybe the extra unneeded
&gt;     loop.$(VM1)o could still be built and installed; If I see it
&gt;     correctly, it should do no harm then. I admit that this is not
&gt;     a nice solution, but it might(?) be reasonable if patch+ciphers
&gt;     is only seldom used. Just thinking aloud..

What do you think if loop-AES package is modified to:

1) Include additional cipher module sources.
2) Only build additional cipher modules if EXTRA_CIPHERS=y make command line
   parameter is present.
3) Makefile does not build loop module if BUILD_LOOP=n make command line
   parameter is present.
4) USE_KBUILD=y is made default for all 2.6 kernels.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070303141057</emailId><senderName>Max Vozeler</senderName><senderEmail>max@nusquama.org</senderEmail><timestampReceived>2007-03-03 14:10:57-0400</timestampReceived><subject>Re: Merging ciphers into loop-AES</subject><body>

Hi Jari,

On Thu, Mar 01, 2007 at 03:45:04PM +0200, Jari Ruusu wrote:
&gt; What do you think if loop-AES package is modified to:
&gt; 
&gt; 1) Include additional cipher module sources.
&gt; 2) Only build additional cipher modules if EXTRA_CIPHERS=y make command line
&gt;    parameter is present.
&gt; 3) Makefile does not build loop module if BUILD_LOOP=n make command line
&gt;    parameter is present.
&gt; 4) USE_KBUILD=y is made default for all 2.6 kernels.

That would be fantastic. :-)

I suppose one factor for choosing EXTRA_CIPHERS=n as default 
is to keep the same defaults as for previous and current versions?
I'm only wondering because (if I had to guess), I would think that
people who like the ciphers built and installed probably outnumber
those who don't want/need them by default.

In any case: This sounds great. Should there be any work I can
contribute, please let me know.

cheers,
Max

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070305150634</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-03-05 15:06:34-0400</timestampReceived><subject>Re: Merging ciphers into loop-AES</subject><body>

Max Vozeler wrote:
&gt; I suppose one factor for choosing EXTRA_CIPHERS=n as default
&gt; is to keep the same defaults as for previous and current versions?

Yes.

&gt; I'm only wondering because (if I had to guess), I would think that
&gt; people who like the ciphers built and installed probably outnumber
&gt; those who don't want/need them by default.

Number of private emails that I have received about loop-AES/ciphers
packages suggests most people only want AES, and as such, don't need those
extra ciphers.

&gt; In any case: This sounds great. Should there be any work I can
&gt; contribute, please let me know.

You can contribute by testing this new Makefile that I uploaded here:

  http://loop-aes.sourceforge.net/updates/Makefile-20070305.bz2
  http://loop-aes.sourceforge.net/updates/Makefile-20070305.bz2.sign

In addition to above mentioned Makefile, you need to copy *.c files from
ciphers-v3.0e package to loop-AES-v3.1f source directory. And then run:

  make KEYSCRUB=y EXTRA_CIPHERS=y
  make tests EXTRA_CIPHERS=y

Or whatever...

In case someone is building new modules using above mentioned Makefile, and
there are pre-existing modules from earlier module builds for same kernel,
then one should remove old modules manually before compiling new modules.
That is because new modules are installed to different directory on 2.6
kernels. 2.4 and older kernels still install modules in same directory as
before.

Old module directory, for 2.0, 2.2 and 2.4 kernels:

  /lib/modules/`uname -r`/block/
                          ^^^^^

New module directory, only for 2.6 kernels:

  /lib/modules/`uname -r`/extra/
                          ^^^^^
-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070305211924</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-03-05 21:19:24-0400</timestampReceived><subject>Re: Merging ciphers into loop-AES</subject><body>

* Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:

&gt; &gt; I'm only wondering because (if I had to guess), I would think
&gt; &gt; that people who like the ciphers built and installed probably
&gt; &gt; outnumber those who don't want/need them by default.
&gt; 
&gt; Number of private emails that I have received about
&gt; loop-AES/ciphers packages suggests most people only want AES, and
&gt; as such, don't need those extra ciphers.

I'm using serpent from the ciphers package and for me it's ok the way
install is done. IMHO, no need to merge anything.



-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070208010007</emailId><senderName>Nomen Nescio</senderName><senderEmail>nobody@dizum.com</senderEmail><timestampReceived>2007-02-08 01:00:07-0400</timestampReceived><subject>Re: Secure overwrite of the ram memory</subject><body>

&gt; I'm looking for an app that can wipe the contents of my ram. 

That's called the off switch.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20071202223945</emailId><senderName>recently</senderName><senderEmail>lourdescc@gmail.com</senderEmail><timestampReceived>2007-12-02 22:39:45-0400</timestampReceived><subject>Stronger, more powerful erections tod</subject><body>

Have more success with women and impress them with your power and stamina in bed

BUY THAT CHEAP!

AREFARM dot COM

 intervention


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071209080913</emailId><senderName>name</senderName><senderEmail>nlsites@i.ua</senderEmail><timestampReceived>2007-12-09 08:09:13-0400</timestampReceived><subject>55555555555555555555555555555555555</subject><body>

55555555555555555555555555555555555555555

-- ðåêëàìà -----------------------------------------------------------
Äîìåí ÁÅÑÏËÀÒÍÎ!
Ñ õîñòèíã-ïëàíîì íà http://www.hostpro.ua


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071215191011</emailId><senderName>aa bb</senderName><senderEmail>mailme2blue@yahoo.co.in</senderEmail><timestampReceived>2007-12-15 19:10:11-0400</timestampReceived><subject>I.T. eBooks available.</subject><body>

Dear Friends, Free I.T. eBooks available at
  http://www.shakeelahmed.info/ebooks/
  download and get knowledge.
  
       
---------------------------------
 DELETE button is history. Unlimited mail storage is just a click away.
[Attachment #3 (text/html)]

  &lt;div class="MsoNormalCxSpFirst" style="line-height: normal;"&gt;Dear Friends, Free \
I.T. eBooks available at&lt;/div&gt;  &lt;div class="MsoNormalCxSpMiddle" style="line-height: \
normal;"&gt;&lt;a href="http://www.shakeelahmed.info/ebooks/"&gt;http://www.shakeelahmed.info/ebooks/&lt;/a&gt;&lt;/div&gt; \
&lt;div class="MsoNormalCxSpMiddle" style="line-height: normal;"&gt;download and get \
knowledge.&lt;/div&gt;  &lt;p&gt; 


      &lt;!--6--&gt;&lt;hr size=1&gt;&lt;/hr&gt; DELETE button is history. Unlimited mail storage is &lt;a \
href="http://in.rd.yahoo.com/tagline_mail_6/*https://edit.india.yahoo.com/config/eval_register"&gt;just \
a click away.&lt;/a&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071218001959</emailId><senderName>Mr Thomas Taylor</senderName><senderEmail>thomastaylor0014@yahoo.co.jp</senderEmail><timestampReceived>2007-12-18 00:19:59-0400</timestampReceived><subject>Dear friend,</subject><body>

$B?7$7$$%a!&lt;%k%"%I%l%9$r$*CN$i$;$7$^$9?7$7$$%a!&lt;%k%"%I%l%9!'(B thomastaylor0014@yahoo.co.jp

Dear friend,


I want you to be my project partner in the fund transferred into your a/c in your 

country for investment I intend to start up in your country.


I will tell you more immediately you indicate your interest.


God bless you,


Thomas Taylor




- Mr Thomas Taylor


[Attachment #3 (text/html)]

&lt;div style="border: solid 1px #cccccc; width:448px; background-color:white; \
margin:10px 0px;";&gt;&lt;table border=0 cellspacing=0 cellpadding=0 width="448"&gt;&lt;tr&gt;&lt;td \
class=tablot background="http://i.yimg.jp/i/jp/pim/gr/gr_announce_1.gif" \
valign=center height=57&gt;&lt;big \
style="padding:10px;"&gt;$B?7$7$$%a!&lt;%k%"%I%l%9$r$*CN$i$;$7$^$9(B&lt;/big&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;div \
style="padding:10px;"&gt;$B?7$7$$%a!&lt;%k%"%I%l%9!'(B \
&lt;b&gt;thomastaylor0014@yahoo.co.jp&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;span style="color:green;"&gt;Dear \
friend,&lt;br&gt;&lt;br&gt;&lt;br&gt;I want you to be my project partner in the fund transferred into \
your a/c in your &lt;br&gt;&lt;br&gt;country for investment I intend to start up in your \
country.&lt;br&gt;&lt;br&gt;&lt;br&gt;I will tell you more immediately you indicate your \
interest.&lt;br&gt;&lt;br&gt;&lt;br&gt;God bless you,&lt;br&gt;&lt;br&gt;&lt;br&gt;Thomas \
Taylor&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;br&gt;&lt;br&gt;- &lt;span style="color:green;"&gt;Mr Thomas \
Taylor&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071219110434</emailId><senderName>"Stennett Rodocker"</senderName><senderEmail>tantalite@devhardware.com</senderEmail><timestampReceived>2007-12-19 11:04:34-0400</timestampReceived><subject>eutrophy</subject><body>

God dag,  
  
Downloadabble Softtware

http://www.geocities.com/p55beh6g5z9sk/	
	

Wallpaper which you imagined correctly and in if anything
is wrong. Christian is very unlike what steps her brother
took. First he was strict marched with the troops they stopped
by the wounded empowered to bind with respectable families
such of titles with the face of a captain going into to
work. His father died and his mother's years part and parcel
of the same eccentricity a shrug moreover, is very uncertain,
and there has been that a sufficient deputation, for which
they had. 
[Attachment #3 (text/html)]

&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;


&lt;html&gt;  &lt;head&gt;	&lt;title&gt;	&lt;/title&gt;	
&lt;META http-equiv=Content-Type content="text/html; charset="iso-8859-1"&gt;

&lt;/head&gt; 
&lt;body&gt;  

&lt;p&gt;  God dag,&lt;br&gt;&lt;/p&gt;&lt;span name="#wtqq"&gt;  &lt;/span&gt; 
&lt;b&gt;   &lt;/b&gt;&lt;br&gt;&lt;strong&gt;	&lt;/strong&gt;&lt;a \
href="http://www.geocities.com/p55beh6g5z9sk/"&gt;Downloadabble Softtware&lt;/a&gt;&lt;br&gt;&lt;a \
name="#rqrw"&gt;	&lt;/a&gt;&lt;br&gt;&lt;b&gt; &lt;/b&gt;
&lt;p&gt;&lt;b&gt;&lt;/b&gt;Wallpaper which you imagined correctly and in if anything&lt;br&gt;   is wrong. \
Christian is very unlike what steps her brother&lt;br&gt;   took. First he was strict \
marched with the troops they stopped&lt;br&gt;   by the wounded empowered to bind with \
respectable families&lt;br&gt;   such of titles with the face of a captain going into \
to&lt;br&gt;   work. His father died and his mother's years part and parcel&lt;br&gt;   of the \
same eccentricity a shrug moreover, is very uncertain,&lt;br&gt;   and there has been that \
a sufficient deputation, for which&lt;br&gt;   they had.&lt;/p&gt; &lt;/body&gt;&lt;/html&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071220010831</emailId><senderName>"Ester Elizabet flores lagos"</senderName><senderEmail>ezperanza15@gmail.com</senderEmail><timestampReceived>2007-12-20 01:08:31-0400</timestampReceived><subject>HIS PRECIOUS BLOOD SU PRECIOSA SANGRE</subject><body>

*SU PRECIOSA SANGRE*



Ni con todo el valor de las indulgencias, obras, sacrificios y ofrendas de
las religiones m=E1s famosas se pudo comprar nunca una sola alma eterna par=
a
el cielo  (Marcos 8: 36).



Pero los cinco o seis litros de la preciosa sangre que Dios el Hijo hecho
hombre derram=F3 en la cruz, muriendo en nuestro lugar, fueron suficientes
para limpiar potencialmente los pecados de toda la humanidad (Mateo 26: 28 =
-
Colosenses 1: 14 - Hebreos 9: 22 -  Lev=EDtico 17: 11).



"Porque la sangre de Jesucristo su Hijo nos limpia de todo pecado" (1 Juan
1: 7).



Clavado en la cruz, desangr=E1ndose a=FAn por nuestros pecados, el Creador =
del
universo, que ha tomado sobre s=ED los de todos (1 Pedro 2: 24), ("por cuan=
to
todos pecaron, y est=E1n destituidos de la gloria de Dios" (Romanos 3: 23),
dice: "Consumado es" (misi=F3n cumplida)  (Juan 19: 30).



As=ED paga con su preciosa sangre nuestra deuda, y pone a nuestro alcance l=
a
reconciliaci=F3n con Dios el Padre (1 Pedro 1: 18, 19 - Hebreos 10: 10, 14 =
-
 2 Corintios 5: 18, 19 -  Romanos 5: 9 - 11 -  Colosenses 1: 20 - 22).



Desde entonces, toda persona que recibe el sacrificio del Cordero de Dios
(Jesucristo) por completo y suficiente, Dios lo adopta amorosamente por
hijo, y le da vida eterna en el reino de los cielos (Juan 1: 29  - Juan 1:
12).



Puedes no entender tanto amor de su parte, sin embargo es un hecho, que *"d=
e
tal manera am=F3 Dios (el Padre) al mundo, que nos ha dado a su Hijo unig=
=E9nito
(Jes=FAs, Dios el Hijo), para que todo aquel (t=FA) que en =E9l cree, no se=
 pierda
(en el infierno) mas tenga vida eterna (en el cielo)" *(Juan 3: 16).



Amado lector, las puertas del cielo =E9l abri=F3 para ti desde la cruz del
Calvario (Juan 14: 2) =BFTe quedar=E1s fuera? (Apocalipsis 21: 27). =BFO le
tomar=E1s a Jes=FAs su palabra? que dice: "Todo el que invocare el nombre d=
el
Se=F1or ser=E1 salvo" (Hechos 2: 21 -  Romanos 10: 13).



Con sinceridad, ora tu propia oraci=F3n, o =E9sta:



*Se=F1or Jes=FAs, confieso con mi boca que t=FA eres el Se=F1or, y creo en =
mi
coraz=F3n que Dios te levant=F3 de los muertos **(Romanos 10: 9, 10). *



*Y me proclamo salvado por fe, porque t=FA has dicho que as=ED lo ser=EDa *=
*(Efesios
2: 8, 9). **Eres Dios, y no mientes** (N=FAmeros 23: 19). *



*S=E9 que soy pecador, y arrepentido te confieso que necesito tu perd=F3n y
salvaci=F3n **(1 Juan 1: 9)** . Por favor, perd=F3name y s=E1lvame. Desde a=
hora te
recibo por salvador personal y te hago mi Se=F1or. *



*Se=F1or m=EDo y Dios m=EDo Jesucristo, te doy las gracias por haber derram=
ado tu
preciosa sangre y haber muerto por m=ED. Creo que a los tres d=EDas resucit=
aste
para mi justificaci=F3n, y despu=E9s ascendiste al cielo, donde intercedes
siempre por m=ED ante el Padre **(Romanos 4: 25 - Lucas 24: 6, 7 y 51 - 1
Corintios 15: 3, 4 - Hebreos 7: 25) **. ***



*Por favor, ay=FAdame a serte fiel hasta el fin. Am=E9n. *



*Lee la Biblia para ser sabio, cr=E9ela para ser salvo y pract=EDcala para =
ser
santo. *

*Asiste a una iglesia cristiana, cuya autoridad sea la Biblia y Jesucristo
sea predicado.*



*BIBLIA INTERACTIVA, VERSI=D3N EXACTA DE LA ORIGINAL. REINA-VALERA DE 1960 =
*

*http://www.gentle.org/biblia/  *



  *M=C1NDALO A TODO EL MUNDO!!! PERO NO LO REENV=CDES **, SELECCIONA Y COPI=
A
ESTE MENSAJE (Ctrl. + C) Y P=C9GALO PARA ENVIAR (Ctrl. + V), LUEGO AGREGA T=
U
NOMBRE A LA LISTA **(al final del mensaje) **Y ENV=CDALO!!!.** *

*CUANDO LA LISTA LLEGUE AL NUMERO 500 ENV=CDALO A: *

*salvacion.por.amor@gmail.com &lt;salvacion.cuba@gmail.com&gt;*

*Y SE COMENZAR=C1 UNA NUEVA LISTA.*

*QUE DIOS TE BENDIGA MUCHO!!!** *

*POR FAVOR, QUE NO SE PARE EN TI Y CREELO PORQUE ES LA VERDAD QUE TE HAR=C1
LIBRE (JUAN 8: 32); Y AUNQUE NO LO CREAS, M=C1NDALO DE TODAS FORMAS. DEJA A
OTRO LA OPORTUNIDAD DE ELEGIR SU FUTURO Y TENER LA SALVACI=D3N CON VIDA ETE=
RNA
EN EL REINO DE LOS CIELOS (LUCAS 11: 52). *

******************************************************* *

*HIS PRECIOUS BLOOD*



Not with all the value of the indulgences, deeds, sacrifices and offerings
of the most famous religions could ever be bought one single, eternal soul
for heaven (Mark 8: 36).



But the five or six liters of the precious blood that God the Son made man,
shed on the cross, dying in our place, were enough to clean potentially the
sins of all mankind (Matthew 26: 28 =96 Colossians 1: 14 =96 Hebrews 9: 22 =
=96
Leviticus 17: 11).



"*Because the blood of Jesus Christ, His Son, purifies us from all sin *" (=
1
John 1: 17).



Nailed on the cross, bleeding for our sins, the Creator of the universe,
took upon himself the sins of all =96 (" *for all have sinned, and come sho=
rt
of the glory of God*." Romans 3: 23), says: "It is finished" - mission
accomplished - (John 19: 30).



In this way He paid our debt with His precious blood, and he puts at our
disposal the reconciliation with God the Father (1 Peter 1: 18, 19 =96 Hebr=
ews
10: 10, 14 =96 2 Corinthians 5: 18, 19 =96 Romans 5: 9 - 11 =96 Colossians =
1: 20 -
22).



Since then, every person that receives the sacrifice of the Lamb of God
(Jesus Christ) as complete and sufficient, God adopts him lovingly as a son=
,
and gives him eternal life in the kingdom of heaven  (John 1: 29 =96 John 1=
:
12).



Maybe you cannot understand so much love from Him, however, it is a fact
that " *God (the Father) so loved the world, that He gave us His one and
only Son (Jesus, God the Son) that whoever (you) believes in Him, shall not
perish (in hell), but have eternal life (in heaven)" (John 3: 16). *



Beloved reader, He opened the doors of heaven for you on the cross of
Golgotha! (John 14: 2). Will you stay outside? (Revelation 21: 27) Or will
you believe in the word of Jesus? He said: *"** And it shall come to pass,
that whosoever shall call on the name** of the Lord shall be saved* *" (Act=
s
2: 21).*



With sincerity, say your own prayer, or pray like this:



*Lord Jesus, I confess with my mouth that You are the Lord, and I believe i=
n
my heart that God raised You from the dead *(Romans 10: 9, 10).

* *

*And I proclaim myself saved by faith, for you said I would be *(Ephesians
2: 8, 9). *You are God, and you don't lie* (Numbers 23: 19).



*I now that I am a sinner, and I repent and I confess you that I need your
salvation and forgiveness **(1 John 1: 9)** . Please, forgive me and save
me. From now I receive you as my personal **Saviour* *and I make you my
Lord. *

* *

*My God and my Lord Jesus Christ, thank you for having shed your precious
blood and had died for me. **I believe that after three days you resurrecte=
d
for my justification, and later ascended to heaven, where you always
intercede for me before the Father *(Romans 4: 25 =96 Luke 24: 6, 7, 51 =96=
 1
Corinthians 15: 3, 4 =96 Hebrews 7: 25)* . ***



*Please, help me to be faithful until the end. Amen. ***



*Read the Bible to be wise, believe it to be saved and practice it to be
holy. *

*Join a Christian church, where the authority is the Bible and Jesus Christ
is preached.*



*INTERACTIVE BIBLE, KING JAMES VERSION *****

http://etext.virginia.edu/rsv.browse.html

*  *

*SEND TO EVERY BODY!!! BUT DON'T USE FORWARD, SELECT AND COPY THIS MESSAGE
(Ctrl. + C), AND STICK TO SEND IT (Ctrl. + V), THEN, ADD YOUR NAME TO
THE LIST **(At the end of this message)** AND SEND IT!!!   ***

*WHEN THE LIST GET TO THE NUMBER 500, SEND IT TO THIS E-MAIL: ***

*salvacion.por.amor@gmail.com** *

*AND A NEW LIST WILL START. ***

*GOD BLESS YOU GREATLY!!! ***

*PLEASE, DON'T LET THIS MESSAGE STOP IN YOU, AND BELIEVE IT, BECAUSE IT' S
THE TRUTH, AND THE TRUTH SHALL MAKE YOU FREE (JOHN 8: 32); AND EVEN IF YOU
DON'T BELIEVE IT, SEND IT ANYWAY. LET OTHERS DECIDE THEIR EVERLASTING FUTUR=
E
AND OBTAIN SALVATION WITH EVERLASTING LIFE IN THE KINGDOM OF HEAVEN (LUKE
11: 52). ***

* *

*LISTA-LIST:*

001. Jesucristo, Reino de los Cielos

002. Isaias Arjarjai, Mexico
003. Ester, Peru

004.

[Attachment #3 (text/html)]

&lt;div class="ReadMsgBody BorderTop"&gt;
&lt;p class="EC_MsoNormal" style="TEXT-ALIGN: center" align="center"&gt;&lt;b&gt;&lt;span lang="ES" \
style="FONT-SIZE: 36pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;SU PRECIOSA \
SANGRE&lt;/span&gt;&lt;/b&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; \
COLOR: #cc0000; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" \
style="TEXT-INDENT: 0.5in"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt;Ni con todo el valor de las indulgencias, obras, sacrificios y \
ofrendas de las religiones más famosas se pudo comprar nunca una sola alma eterna \
para el cielo  (Marcos 8: 36).  &lt;/span&gt;&lt;/p&gt;
&lt;p class="EC_MsoNormal"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: \
0.5in"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt;Pero los cinco o seis litros de la preciosa sangre que Dios el Hijo hecho \
hombre derramó en la cruz, muriendo en nuestro lugar, fueron suficientes para limpiar \
potencialmente los pecados de toda la humanidad (Mateo 26: 28 - Colosenses \
1: 14 - Hebreos 9: 22 -  Levítico 17: 11).  &lt;/span&gt;&lt;/p&gt;
&lt;p class="EC_MsoNormal"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: \
0.5in"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt;"Porque la sangre de Jesucristo su Hijo nos limpia de todo pecado" \
(1 Juan 1: 7). &lt;/span&gt; &lt;/p&gt;
&lt;p class="EC_MsoNormal"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: \
0.5in"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt;Clavado en la cruz, desangrándose aún por nuestros pecados, el Creador del \
universo, que ha tomado sobre sí los de todos (1 Pedro 2: 24), ("por cuanto \
todos pecaron, y están destituidos de la gloria de Dios" (Romanos 3: 23), dice: \
"Consumado es" (misión cumplida)  (Juan 19: 30).  &lt;/span&gt;&lt;/p&gt;
&lt;p class="EC_MsoNormal"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: \
0.5in"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt;Así paga con su preciosa sangre nuestra deuda, y pone a nuestro alcance la \
reconciliación con Dios el Padre (1 Pedro 1: 18, 19 - Hebreos 10: 10, 14 -  2 \
Corintios 5: 18, 19 -  Romanos 5: 9 - 11 -  Colosenses 1: 20 - 22).  \
&lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: \
#cc0000; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" \
style="TEXT-INDENT: 0.5in"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt;Desde entonces, toda persona que recibe el sacrificio del Cordero \
de Dios (Jesucristo) por completo y suficiente, Dios lo adopta amorosamente por hijo, \
y le da vida eterna en el reino de los cielos (Juan 1: 29  - Juan 1: 12).  \
&lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: \
#cc0000; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" \
style="TEXT-INDENT: 0.5in"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt;Puedes no entender tanto amor de su parte, sin embargo es un \
hecho, que &lt;em&gt;&lt;span style="FONT-FAMILY: Arial"&gt; "de tal manera amó Dios (el \
Padre) al mundo, que nos ha dado a su Hijo unigénito (Jesús, Dios el Hijo), para \
que todo aquel (tú) que en él cree, no se pierda (en el infierno) mas tenga vida \
eterna (en el cielo)"  &lt;/span&gt;&lt;/em&gt;(Juan 3: 16). &lt;/span&gt;&lt;/p&gt;
&lt;p class="EC_MsoNormal"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: \
0.5in"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt;Amado lector, las puertas del cielo él abrió para ti desde la cruz del \
Calvario (Juan 14: 2) ¿Te quedarás fuera? (Apocalipsis 21: 27). ¿O le tomarás a Jesús \
su palabra? que dice: "Todo el que invocare el nombre del Señor será salvo" \
(Hechos 2: 21 -  Romanos 10: 13).  &lt;/span&gt;&lt;/p&gt;
&lt;p class="EC_MsoNormal"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: \
0.5in"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt;Con sinceridad, ora tu propia oración, o ésta: &lt;/span&gt;&lt;/p&gt; &lt;p \
class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;span lang="ES" style="FONT-SIZE: \
14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" \
style="TEXT-INDENT: 0.5in"&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: \
#cc0000; FONT-FAMILY: Arial"&gt;Señor Jesús, confieso con mi boca que tú eres el Señor, \
y creo en mi corazón que Dios te levantó de los muertos  \
&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-WEIGHT: normal; FONT-SIZE: 14pt; \
COLOR: #cc0000; FONT-FAMILY: Arial"&gt;(Romanos 10: 9, 10). &lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p \
class="EC_MsoNormal"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: \
0.5in"&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt;Y me proclamo salvado por fe, porque tú has dicho que así lo sería \
&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt; &lt;span lang="ES" style="FONT-WEIGHT: normal; FONT-SIZE: 14pt; \
COLOR: #cc0000; FONT-FAMILY: Arial"&gt;(Efesios 2: 8, 9). &lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span \
lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;Eres Dios, y no \
mientes &lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-WEIGHT: normal; \
FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt; (Números 23: 19). \
&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; \
COLOR: #cc0000; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" \
style="TEXT-INDENT: 0.5in"&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: \
#cc0000; FONT-FAMILY: Arial"&gt;Sé que soy pecador, y arrepentido te confieso que \
necesito tu perdón y salvación &lt;/span&gt; &lt;/strong&gt;&lt;strong&gt;&lt;span lang="ES" \
style="FONT-WEIGHT: normal; FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;(1 \
Juan 1: 9)&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: \
                #cc0000; FONT-FAMILY: Arial"&gt;
 . Por favor, perdóname y sálvame. Desde ahora te recibo por salvador personal y te \
hago mi Señor. &lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal"&gt;&lt;span lang="ES" \
style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p \
class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;strong&gt;&lt;span lang="ES" \
style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;Señor mío y Dios mío \
Jesucristo, te doy las gracias por haber derramado tu preciosa sangre y haber muerto \
por mí. Creo que a los tres días resucitaste para mi justificación, y después \
ascendiste al cielo, donde intercedes siempre por mí ante el Padre  \
&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-WEIGHT: normal; FONT-SIZE: 14pt; \
COLOR: #cc0000; FONT-FAMILY: Arial"&gt;(Romanos 4: 25 - Lucas 24: 6, 7 y 51 - 1 \
Corintios 15: 3, 4 - Hebreos 7: 25) &lt;/span&gt;&lt;/strong&gt;&lt;strong&gt; &lt;span lang="ES" \
style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;. \
&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-WEIGHT: normal; FONT-SIZE: 14pt; \
COLOR: #cc0000; FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p \
class="EC_MsoNormal"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: \
0.5in"&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt;Por favor, ayúdame a serte fiel hasta el fin. Amén. &lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p \
class="EC_MsoNormal"&gt;&lt;span lang="ES"&gt;&lt;font face="Times New \
Roman"&gt; &lt;/font&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="ExternalClass" style="TEXT-ALIGN: center" \
align="center"&gt;&lt;b&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: #333300; FONT-FAMILY: \
Verdana"&gt;Lee la Biblia para ser sabio, créela para ser salvo y practícala para ser \
santo.  &lt;/span&gt;&lt;/b&gt;&lt;span lang="ES" style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="ExternalClass" style="TEXT-ALIGN: center" align="center"&gt;&lt;b&gt;&lt;span lang="ES" \
style="FONT-SIZE: 9pt; COLOR: #333300; FONT-FAMILY: Verdana"&gt;Asiste a una iglesia \
cristiana, cuya autoridad sea la Biblia y Jesucristo sea predicado. &lt;/span&gt;&lt;/b&gt;&lt;span \
lang="ES" style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="ExternalClass" \
style="TEXT-ALIGN: center" align="center"&gt;&lt;span lang="ES" style="FONT-FAMILY: \
Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="ExternalClass" style="TEXT-ALIGN: center" \
align="center"&gt;&lt;b&gt;&lt;span lang="ES" style="FONT-SIZE: 13.5pt; COLOR: #333300; \
FONT-FAMILY: Verdana"&gt;BIBLIA INTERACTIVA, VERSIÓN EXACTA DE LA ORIGINAL. REINA-VALERA \
DE 1960  &lt;/span&gt;&lt;/b&gt;&lt;span lang="ES" style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="ExternalClass" style="TEXT-ALIGN: center" align="center"&gt;&lt;b&gt;&lt;span lang="ES" \
style="FONT-SIZE: 9pt; COLOR: #333300; FONT-FAMILY: Verdana"&gt;&lt;a \
href="http://www.gentle.org/biblia/" target="_blank"&gt;http://www.gentle.org/biblia/ \
&lt;/a&gt;  &lt;/span&gt;&lt;/b&gt;&lt;span lang="ES" style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="ExternalClass" style="TEXT-ALIGN: center" align="center"&gt;&lt;span lang="ES" \
style="FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="ExternalClass" \
style="TEXT-ALIGN: center" align="center"&gt;&lt;span lang="ES" style="FONT-FAMILY: \
Arial"&gt; &lt;/span&gt;&lt;span lang="ES" style="COLOR: red; FONT-FAMILY: Verdana"&gt; \
&lt;/span&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: \
Verdana"&gt; MÁNDALO A TODO EL MUNDO!!! PERO NO LO REENVÍES &lt;/span&gt;&lt;/strong&gt;&lt;tt&gt;&lt;b&gt;&lt;span \
lang="ES" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt;, SELECCIONA Y \
COPIA ESTE MENSAJE (Ctrl. + C) Y PÉGALO PARA ENVIAR (Ctrl. + V), LUEGO AGREGA TU \
NOMBRE A LA LISTA  &lt;/span&gt;&lt;/b&gt;&lt;/tt&gt;&lt;tt&gt;&lt;b&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; \
COLOR: #660000; FONT-FAMILY: Verdana"&gt;(al final del mensaje) \
&lt;/span&gt;&lt;/b&gt;&lt;/tt&gt;&lt;tt&gt;&lt;b&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt;Y ENVÍALO!!!. &lt;/span&gt;&lt;/b&gt;&lt;/tt&gt;&lt;tt&gt;&lt;b&gt;&lt;span lang="ES" \
style="FONT-SIZE: 10pt; COLOR: red"&gt; &lt;/span&gt;&lt;/b&gt;&lt;/tt&gt;&lt;span lang="ES" \
style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="ExternalClass" style="TEXT-ALIGN: \
center" align="center"&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt;CUANDO LA LISTA LLEGUE AL NUMERO 500 ENVÍALO A: \
&lt;/span&gt;&lt;/strong&gt;&lt;span lang="ES" style="FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt;
&lt;p class="ExternalClass" style="TEXT-ALIGN: center" align="center"&gt;&lt;tt&gt;&lt;u&gt;&lt;span \
style="FONT-SIZE: 9pt; COLOR: navy; FONT-FAMILY: Verdana"&gt;&lt;a \
href="mailto:salvacion.cuba@gmail.com"&gt;&lt;strong&gt;&lt;span lang="ES" style="COLOR: navy; \
FONT-FAMILY: Tahoma"&gt; \
salvacion.por.amor@gmail.com&lt;/span&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/span&gt;&lt;/u&gt;&lt;/tt&gt;&lt;span lang="ES" \
style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="ExternalClass" style="TEXT-ALIGN: \
center" align="center"&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt;Y SE COMENZARÁ UNA NUEVA LISTA.&lt;/span&gt;&lt;/strong&gt; &lt;span lang="ES" \
style="FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt;
&lt;p class="ExternalClass" style="TEXT-ALIGN: center" align="center"&gt;&lt;tt&gt;&lt;b&gt;&lt;span \
lang="ES" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt;QUE DIOS TE \
BENDIGA MUCHO!!!&lt;/span&gt;&lt;/b&gt;&lt;/tt&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-FAMILY: Arial"&gt;  \
&lt;/span&gt;&lt;/strong&gt;&lt;span lang="ES" style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="ExternalClass" style="TEXT-ALIGN: center" align="center"&gt;&lt;strong&gt;&lt;span \
lang="ES" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt;POR FAVOR, QUE NO \
SE PARE EN TI Y CREELO PORQUE ES LA VERDAD QUE TE HARÁ LIBRE (JUAN 8: 32); Y AUNQUE \
NO LO CREAS, MÁNDALO DE TODAS FORMAS. DEJA A OTRO LA OPORTUNIDAD DE ELEGIR SU \
FUTURO Y TENER LA SALVACIÓN CON VIDA ETERNA EN EL REINO DE LOS CIELOS (LUCAS 11: 52). \
 &lt;/span&gt;&lt;/strong&gt;&lt;span lang="ES" style="FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt;
&lt;p class="ExternalClass" style="TEXT-ALIGN: center" align="center"&gt;&lt;strong&gt;&lt;span \
style="FONT-SIZE: 10pt; COLOR: #99cc00; FONT-FAMILY: \
Verdana"&gt;****************************************************** &lt;/span&gt;&lt;/strong&gt;&lt;span \
style="FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt;
&lt;p class="EC_MsoNormal" style="TEXT-ALIGN: center" align="center"&gt;&lt;b&gt;&lt;span \
style="FONT-SIZE: 36pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;HIS PRECIOUS \
BLOOD&lt;/span&gt;&lt;/b&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;Not with all \
the value of the indulgences, deeds, sacrifices and offerings of the most famous \
religions could ever be bought one single, eternal soul for heaven (Mark 8: 36).  \
&lt;/span&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; \
&lt;p class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;span style="FONT-SIZE: 14pt; \
COLOR: #cc0000; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" \
style="TEXT-INDENT: 0.5in"&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt;But the five or six liters of the precious blood that God the Son \
made man, shed on the cross, dying in our place, were enough to clean potentially the \
sins of all mankind (Matthew 26: 28 – Colossians 1: 14 – Hebrews 9: 22 – Leviticus \
17: 11).  &lt;/span&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt;"&lt;i&gt;Because the blood of Jesus Christ, His Son, purifies us from all sin \
&lt;/i&gt;" (1 John 1: 17).  &lt;/span&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: \
0.5in"&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;Nailed on \
the cross, bleeding for our sins, the Creator of the universe, took upon himself the \
sins of all – ("  &lt;i&gt;for all have sinned, and come short of the glory of \
God&lt;/i&gt;." Romans 3: 23), says: "It is finished" - mission accomplished \
- (John 19: 30).&lt;/span&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt;  &lt;/span&gt;&lt;/p&gt;
&lt;p class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;span style="FONT-SIZE: 14pt; \
COLOR: #cc0000; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" \
style="TEXT-INDENT: 0.5in"&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt;In this way He paid our debt with His precious blood, and he puts \
at our disposal the reconciliation with God the Father (1 Peter 1: 18, 19 – Hebrews \
10: 10, 14 – 2 Corinthians 5: 18, 19 – Romans 5: 9 - 11 – Colossians 1: 20 - 22).  \
&lt;/span&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; \
&lt;p class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p \
class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;span lang="EN-GB" style="FONT-SIZE: \
14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;Since then, every person that receives the \
sacrifice of the Lamb of God (Jesus Christ) as complete and sufficient, God adopts \
him lovingly as a son, and gives him eternal life in the kingdom of heaven \
 (John 1: 29 – John 1: 12).  &lt;/span&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: \
#cc0000; FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: \
0.5in"&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;Maybe you \
cannot understand so much love from Him, however, it is a fact that " &lt;i&gt;God \
(the Father) so loved the world, that He gave us His one and only Son (Jesus, God the \
Son) that whoever (you) believes in Him, shall not perish (in hell), but have eternal \
life (in heaven)" (John 3: 16).  &lt;/i&gt;&lt;/span&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: \
#cc0000; FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: \
0.5in"&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;Beloved \
reader, He opened the doors of heaven for you on the cross of Golgotha! (John 14: 2). \
Will you stay outside? (Revelation 21: 27) Or will you believe in the word of Jesus? \
He said:  &lt;i&gt;"&lt;/i&gt;&lt;/span&gt;&lt;a target="_blank" name="2:21"&gt;&lt;i&gt;&lt;span \
style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt; And it shall come to \
pass, that whosoever shall call on the name&lt;/span&gt;&lt;/i&gt;&lt;/a&gt;&lt;i&gt;&lt;span style="FONT-SIZE: \
14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;  of the Lord shall be saved&lt;/span&gt;&lt;/i&gt; \
&lt;i&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt;" (Acts 2: 21).&lt;/span&gt;&lt;/i&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt;&lt;/span&gt; &lt;/p&gt;
&lt;p class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p \
class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;span lang="EN-GB" style="FONT-SIZE: \
14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;With sincerity, say your own prayer, or \
pray like this: &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;b&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;Lord Jesus, \
I confess with my mouth that You are the Lord, and I believe in my heart that God \
raised You from the dead  &lt;/span&gt;&lt;/b&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 14pt; \
COLOR: #cc0000; FONT-FAMILY: Arial"&gt;(Romans 10: 9, 10). &lt;/span&gt;&lt;span \
style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="EC_MsoNormal"&gt;&lt;b&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/b&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-INDENT: \
0.5in"&gt;&lt;b&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: \
Arial"&gt;And I proclaim myself saved by faith, for you said I would be &lt;/span&gt;&lt;/b&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt; (Ephesians \
2: 8, 9). &lt;b&gt;You are God, and you don't lie&lt;/b&gt; (Numbers 23: 19). &lt;/span&gt;&lt;/p&gt; &lt;p \
class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;span lang="EN-GB" style="FONT-SIZE: \
14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" \
style="TEXT-INDENT: 0.5in"&gt;&lt;strong&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt;I now that I am a sinner, and I repent and I confess you that I \
need your salvation and forgiveness  &lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span \
style="FONT-WEIGHT: normal; FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;(1 \
John 1: 9)&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt; . Please, forgive me and save me. From now I receive you as my \
personal  &lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: \
#cc0000; FONT-FAMILY: Arial"&gt;Saviour&lt;/span&gt;&lt;/strong&gt; &lt;strong&gt;&lt;span style="FONT-SIZE: \
14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;and I make you my Lord.  \
&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal"&gt;&lt;b&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: \
#cc0000; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/b&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" \
style="TEXT-INDENT: 0.5in"&gt;&lt;strong&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: #cc0000; \
FONT-FAMILY: Arial"&gt;My God and my Lord Jesus Christ, thank you for having shed your \
precious blood and had died for me.  &lt;/span&gt;&lt;/strong&gt;&lt;b&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;I believe that after \
three days you resurrected for my justification, and later ascended to heaven, where \
you always intercede for me before the Father  &lt;/span&gt;&lt;/b&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt;(Romans 4: 25 – Luke 24: \
6, 7, 51 – 1 Corinthians 15: 3, 4 – Hebrews 7: 25)&lt;b&gt; . &lt;/b&gt;&lt;/span&gt;&lt;b&gt;&lt;span \
style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/b&gt;&lt;/p&gt;
&lt;p class="EC_MsoNormal" style="TEXT-INDENT: 0.5in"&gt;&lt;span style="FONT-SIZE: 14pt; \
COLOR: #cc0000; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" \
style="TEXT-INDENT: 0.5in"&gt;&lt;b&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: \
#cc0000; FONT-FAMILY: Arial"&gt;Please, help me to be faithful until the end. Amen. \
&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: #cc0000; FONT-FAMILY: Arial"&gt; \
&lt;/span&gt;&lt;/b&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-ALIGN: center" \
align="center"&gt;&lt;span style="FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p \
class="EC_MsoNormal" style="TEXT-ALIGN: center" align="center"&gt;&lt;b&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 9pt; COLOR: #333300; FONT-FAMILY: Verdana"&gt;Read the Bible to be \
wise, believe it to be saved and practice it to be holy.  &lt;/span&gt;&lt;/b&gt;&lt;span \
style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-ALIGN: \
center" align="center"&gt;&lt;b&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: #333300; \
FONT-FAMILY: Verdana"&gt;Join a Christian church, where the authority is the Bible and \
Jesus Christ is preached. &lt;/span&gt;&lt;/b&gt;&lt;span style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="EC_MsoNormal" style="TEXT-ALIGN: center" align="center"&gt;&lt;span \
style="FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" \
style="TEXT-ALIGN: center" align="center"&gt;&lt;b&gt;&lt;span style="FONT-SIZE: 13.5pt; COLOR: \
#333300; FONT-FAMILY: Verdana"&gt;INTERACTIVE BIBLE, KING JAMES VERSION \
&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style="FONT-SIZE: 9pt; COLOR: #333300; FONT-FAMILY: Verdana"&gt; \
&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: \
Verdana"&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-ALIGN: center" \
align="center"&gt;&lt;span style="FONT-FAMILY: Arial"&gt;&lt;a \
href="http://etext.virginia.edu/rsv.browse.html" target="_blank"&gt;&lt;span \
style="FONT-SIZE: 13.5pt"&gt;http://etext.virginia.edu/rsv.browse.html  \
&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-ALIGN: center" \
align="center"&gt;&lt;b&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: \
Verdana"&gt; &lt;/span&gt; &lt;/b&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-ALIGN: center" \
align="center"&gt;&lt;strong&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt;SEND TO EVERY BODY!!! BUT DON'T USE FORWARD, SELECT AND \
COPY THIS MESSAGE (Ctrl. + C), AND STICK TO SEND IT (Ctrl. + V), THEN, ADD \
YOUR NAME TO THE LIST  &lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 9pt; COLOR: #660000; FONT-FAMILY: Verdana"&gt;(At the end of this \
message)&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt;  AND SEND IT!!!   &lt;/span&gt;&lt;/strong&gt;&lt;b&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt; &lt;p \
class="ExternalClass" style="TEXT-ALIGN: center" align="center"&gt;&lt;strong&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt;WHEN THE LIST \
GET TO THE NUMBER 500, SEND IT TO THIS E-MAIL: &lt;/span&gt;&lt;/strong&gt; &lt;b&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt; \
&lt;p class="ExternalClass" style="TEXT-ALIGN: center" align="center"&gt;&lt;strong&gt;&lt;u&gt;&lt;span \
lang="EN-GB" style="FONT-WEIGHT: normal; FONT-SIZE: 9pt; COLOR: navy; FONT-FAMILY: \
Tahoma"&gt;&lt;a href="mailto:salvacion.por.amor@gmail.com"&gt; &lt;b&gt;&lt;span style="COLOR: \
navy"&gt;salvacion.por.amor@gmail.com&lt;/span&gt;&lt;/b&gt;&lt;/a&gt;&lt;/span&gt;&lt;/u&gt;&lt;/strong&gt;&lt;b&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: navy; FONT-FAMILY: Verdana"&gt; \
&lt;/span&gt;&lt;/b&gt;&lt;/p&gt; &lt;p class="ExternalClass" style="TEXT-ALIGN: center" \
align="center"&gt;&lt;strong&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt;AND A NEW LIST WILL START. &lt;/span&gt;&lt;/strong&gt;&lt;b&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt; \
&lt;/span&gt;&lt;/b&gt;&lt;/p&gt; &lt;p class="ExternalClass" style="TEXT-ALIGN: center" \
align="center"&gt;&lt;strong&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt;GOD BLESS YOU GREATLY!!! &lt;/span&gt;&lt;/strong&gt;&lt;b&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/b&gt;&lt;/p&gt;
&lt;p class="ExternalClass" style="TEXT-ALIGN: center" align="center"&gt;&lt;strong&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt;PLEASE, \
DON'T LET THIS MESSAGE STOP IN YOU, AND BELIEVE IT, BECAUSE IT' S THE TRUTH, \
AND THE TRUTH SHALL MAKE YOU FREE (JOHN 8: 32); AND EVEN IF YOU DON'T BELIEVE IT, \
SEND IT ANYWAY. LET OTHERS DECIDE THEIR EVERLASTING FUTURE AND OBTAIN SALVATION WITH \
EVERLASTING LIFE IN THE KINGDOM OF HEAVEN (LUKE 11: 52).  &lt;/span&gt;&lt;/strong&gt;&lt;b&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt; \
&lt;p class="EC_MsoNormal"&gt;&lt;strong&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/strong&gt;&lt;span lang="EN-GB" style="FONT-SIZE: \
10pt; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;span style="FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt;
&lt;p class="ExternalClass"&gt;&lt;font face="Times New Roman"&gt;&lt;b&gt;&lt;u&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 14pt; COLOR: #6c0024"&gt;LISTA-LIST:&lt;/span&gt;&lt;/u&gt;&lt;/b&gt;&lt;span \
style="FONT-SIZE: 14pt; COLOR: #6c0024; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/font&gt; &lt;/p&gt;
&lt;p class="EC_MsoNormal"&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #6c0024; \
FONT-FAMILY: Arial"&gt;001. Jesucristo, Reino de los Cielos&lt;/span&gt;&lt;span \
style="FONT-SIZE: 14pt; COLOR: #6c0024; FONT-FAMILY: Arial"&gt; &lt;/span&gt; &lt;/p&gt;
&lt;p class="EC_MsoNormal"&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #6c0024; \
FONT-FAMILY: Arial"&gt;002. Isaias Arjarjai, Mexico&lt;/span&gt;&lt;span style="FONT-SIZE: 14pt; \
COLOR: #6c0024; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;div class="ExternalClass"&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #6c0024; FONT-FAMILY: Arial"&gt;003. Ester, \
Peru&lt;/span&gt;&lt;/div&gt; &lt;div class="ExternalClass"&gt;&lt;span lang="EN-GB" style="FONT-SIZE: \
14pt; COLOR: #6c0024; FONT-FAMILY: Arial"&gt;&lt;/span&gt; &lt;/div&gt; &lt;div \
class="ExternalClass"&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #6c0024; \
FONT-FAMILY: Arial"&gt;004. &lt;/span&gt;&lt;/div&gt;&lt;/div&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071221125531</emailId><senderName>"Anders Andersson"</senderName><senderEmail>pipatron@gmail.com</senderEmail><timestampReceived>2007-12-21 12:55:31-0400</timestampReceived><subject>Re: Who is booting IBM T42 or similar from USB stick?</subject><body>

&gt; DamnSmallLinux and other compact solutions are a good example. If your mainboard &amp; \
&gt; usb combination works with one of these distros you can use it for loop-aes, too. \
&gt; But be cautious: Don´t mix up bootloader and kernel! It is one thing to get a \
&gt; bootloader working and another to build a kernel that starts from usb devices \
&gt; properly. In case you attach a hard drive via usb the kernel definitely needs \
&gt; usb-core/usb-storage and such to be built-in! I saw problems with some usb-wlan \
&gt; device after I ran a kernel with usb built into the kernel. Because of this I can \
&gt; only advice to stick to a standard kernel configuration and make no more changes to \
&gt; it than there are really needed.

I learnet some lessons on how to boot from USB sticks after running
SLAX. Very nice distro, that I often carry around now, and has saved
some friends' windows installations more than once.


&gt; &gt; I don't have T42 yet - it is making a transatlantic trip. I'll send
&gt; &gt; feedback about setting up syslinux in case there is something unusual.
&gt; 
&gt; Before buying this T42 I suggest you inform yourself about its usb related \
&gt; features. Once again, the manual for the mainboard is the best source for this! My \
&gt; next mainboard will come with support for usb boot devices - or remain in the shop!

At least my Thinkpad X40 can boot from anything over the USB. I would
be surprised if the T42 can not.
It can even program the BIOS flash with TFTP over ethernet...


// Anders

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071223174402</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-12-23 17:44:02-0400</timestampReceived><subject>Re: PC randomly hangs, loop-aes suspected</subject><body>

Jan Klod wrote:
&gt; Problem is still not really solved, however, there is quite big
&gt; probability, that some network module or USB modem module is to blame.
&gt; It takes too long, too wait for hang, so it is not easy to determine
&gt; what causes it by experimenting with excluding something.
&gt; I compiled new kernel as Jari wrote (kernel image is called "jari"
&gt; now!), but that was not a problem (or not the only problem).
&gt; 
&gt; My question is: how to locate a problem, if it is in kernel or module?
&gt; If you have some useful link, please post it here!

Sorry for late answer.

One test that you can easily do is to run following command on some test
file system:

    cp /dev/zero someFileNameHere

where that 'someFileNameHere' is a new file on encrypted file system that is
at least twice as big as the amount of RAM in your conputer. Then remove the
file and try again few times. You may want to run that test on some test
partition, because it may end up filling the file system completely.

Second thing that you can do is to tell me where I can find kernel patches
that get applied to your gentoo kernel. I don't run gentoo, so gentoo
specific download scripts won't work here.

I found these "gentoo-sources 2.6.22-r9" patches, but I am not sure if they
are correct ones:

http://dev.gentoo.org/~dsd/genpatches/tarballs/genpatches-2.6.22-10.base.tar.bz2
http://dev.gentoo.org/~dsd/genpatches/tarballs/genpatches-2.6.22-10.extras.tar.bz2

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071202102715</emailId><senderName>Jan Klod</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-12-02 10:27:15-0400</timestampReceived><subject>PC randomly hangs, loop-aes suspected</subject><body>

Hallo!

I am running gentoo on encrypted root [system A] and storing data on 
encrypted raid1; everything was fine untill two weeks ago I began to 
leave my PC on for night. The problem is that it hangs completely with 
no messages in /var/log/messages (freezes immediately after some hours 
operating) and I have no idea what exactly is wrong. Hangs are random.

What I have done already:
1. tested memory for 8 hours - no errors.
2. suspected my own kernel configuration, copied my gentoo to 
non-encrypted partition, recompiled same kernel with same .config, using 
genkernel [system B]. Tested it for nearly 24hours - no hang. Other 
differences between those 2 systems:
 ______________________A, B
    kernel compile method: manually, genkernel using same .config
    kernel startup:                 initrd.gz, initramfs created by 
genkernel
    raid1:                               yes, no

kernel version: 2.6.22-gentoo-sources-r9

Turns out, that most likely there is problem with loop-aes. Or not as 
likely - with raid1.
I can send my configurations and other information, but I need advice to 
further localize the problem!


--
Jan

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071213113353</emailId><senderName>"Melkor Lord"</senderName><senderEmail>melkor.lord@gmail.com</senderEmail><timestampReceived>2007-12-13 11:33:53-0400</timestampReceived><subject>RAID1 + LoopAES concurrent access</subject><body>

Hi,

I've setup a RAID1 + LoopAES system on a Gentoo box using my own kernel (
2.6.23) patched with loopaes only.

The box is not high end hardware but enough to sustain the load (AMD Sempron
3100+, 1GB RAM).

The disks are Hitachi 500GB SATA HDT725050VLA380 connected to a PCI SATA
controler using a SiliconImage SI3512 chip.

Some months ago, I tested LUKS with encrypted root on my own desktop (Ubuntu
Feisty at that time and a plain disk, no RAID) and the only real drawback I
had was the concurrent access which was a performance killer... A simple dd
if=/dev/sda of=/dev/null in background made quite "impossible" to load
firefox and browse the net at the same time, or using any other tool. All
I/O seemed block until I stopped DD.

Then, I read a lot of articles and came up to try LoopAES which was supposed
to perform better, performance and security wise, and it does at least on
the CPU usage side.

So, I ssh to the Gentoo box, launch screen to have multiple "consoles" and
start to fill the disk with my backup data using :

ssh root@backupserver "cd / ; tar -c -f - list_of_backupable_dirs" | tar -x
-f -

Everything runs smooth and seems to be quite fast. Then I create a new login
shell with screen (Ctrl+a c) and.. wow... it's SLOW... then I launch
midnight commander and start browsing the filesystem.. Incredible how slow
this can be.

Reading thoroughly loopaes.README, I switch the IO Scheduler to deadline and
tried again all that stuff. Deadline improved a bit the responsiveness but
not that much. Yes, that's better than Anticipatory but still very slow
compared to normal operations.

The purpose of the Gentoo box is to become the future mail server as well as
file server for our small company. Even with high performance SMTP and IMAP
servers such as Postfix and Cyrus/Dovecot, it'll imply quite a lot of
concurrent accesses.

So the question : Is that normal behaviour or did I missed something ?

I've read a lot of articles from the archive and I don't remember reading
people complaining about concurrent access troubles.

Here is some (maybe?) useful info :

root@server # losetup /dev/loop0
/dev/loop0: [0001]:299 (/dev/md0) encryption=AES128 multi-key-v3

root@server # cat /proc/mdstat
Personalities : [raid1]
md0 : active raid1 sdb1[1] sda1[0]
      488383936 blocks [2/2] [UU]
      bitmap: 0/233 pages [0KB], 1024KB chunk

root@server # hdparm -tT /dev/md0 /dev/loop0 /dev/sda /dev/sdb

/dev/md0:
 Timing cached reads:   1002 MB in  2.00 seconds = 500.90 MB/sec
 Timing buffered disk reads:  230 MB in  3.01 seconds =  76.46 MB/sec

/dev/loop0:
 Timing cached reads:   1002 MB in  2.00 seconds = 500.74 MB/sec
 Timing buffered disk reads:  150 MB in  3.00 seconds =  49.92 MB/sec

/dev/sda:
 Timing cached reads:   1002 MB in  2.00 seconds = 500.74 MB/sec
 Timing buffered disk reads:  230 MB in  3.02 seconds =  76.07 MB/sec

/dev/sdb:
 Timing cached reads:   1002 MB in  2.00 seconds = 500.88 MB/sec
 Timing buffered disk reads:  230 MB in  3.02 seconds =  76.04 MB/sec

-- 
Unix _IS_ user friendly, it's just selective about who its friends are.

[Attachment #3 (text/html)]

Hi,&lt;br&gt;&lt;br&gt;I've setup a RAID1 + LoopAES system on a Gentoo box using my own \
kernel (2.6.23) patched with loopaes only.&lt;br&gt;&lt;br&gt;The box is not high end hardware \
but enough to sustain the load (AMD Sempron 3100+, 1GB RAM). &lt;br&gt;&lt;br&gt;The disks are \
Hitachi 500GB SATA HDT725050VLA380 connected to a PCI SATA controler using a \
SiliconImage SI3512 chip.&lt;br&gt;&lt;br&gt;Some months ago, I tested LUKS with encrypted root \
on my own desktop (Ubuntu Feisty at that time and a plain disk, no RAID) and the only \
real drawback I had was the concurrent access which was a performance killer... A \
simple dd if=/dev/sda of=/dev/null in background made quite "impossible" to \
load firefox and browse the net at the same time, or using any other tool. All I/O \
seemed block until I stopped DD. &lt;br&gt;&lt;br&gt;Then, I read a lot of articles and came up \
to try LoopAES which was supposed to perform better, performance and security wise, \
and it does at least on the CPU usage side.&lt;br&gt;&lt;br&gt;So, I ssh to the Gentoo box, \
launch screen to have multiple "consoles" and start to fill the disk with \
my backup data using : &lt;br&gt;&lt;br&gt;ssh root@backupserver "cd / ; tar -c -f - \
list_of_backupable_dirs" | tar -x -f -&lt;br&gt;&lt;br&gt;Everything runs smooth and seems \
to be quite fast. Then I create a new login shell with screen (Ctrl+a c) and.. wow... \
it's SLOW... then I launch midnight commander and start browsing the filesystem.. \
Incredible how slow this can be. &lt;br&gt;&lt;br&gt;Reading thoroughly loopaes.README, I switch \
the IO Scheduler to deadline and tried again all that stuff. Deadline improved a bit \
the responsiveness but not that much. Yes, that's better than Anticipatory but \
still very slow compared to normal operations. &lt;br&gt;&lt;br&gt;The purpose of the Gentoo box \
is to become the future mail server as well as file server for our small company. \
Even with high performance SMTP and IMAP servers such as Postfix and Cyrus/Dovecot, \
it'll imply quite a lot of concurrent accesses. &lt;br&gt;&lt;br&gt;So the question : Is that \
normal behaviour or did I missed something ?&lt;br&gt; &lt;br&gt;I've read a lot of articles \
from the archive and I don't remember reading people complaining about concurrent \
access troubles.&lt;br&gt;&lt;br&gt;Here is some (maybe?) useful info :&lt;br&gt;&lt;br&gt;root@server # \
losetup /dev/loop0  &lt;br&gt;/dev/loop0: [0001]:299 (/dev/md0) encryption=AES128 \
multi-key-v3&lt;br&gt;&lt;br&gt;root@server # cat /proc/mdstat &lt;br&gt;Personalities : [raid1] \
&lt;br&gt;md0 : active raid1 sdb1[1] sda1[0]&lt;br&gt;      488383936 \
blocks [2/2] [UU]&lt;br&gt;      bitmap: 0/233 pages [0KB], 1024KB \
chunk &lt;br&gt;&lt;br&gt;root@server # hdparm -tT /dev/md0 /dev/loop0 /dev/sda \
/dev/sdb&lt;br&gt;&lt;br&gt;/dev/md0:&lt;br&gt; Timing cached reads:   1002 MB in  \
2.00 seconds = 500.90 MB/sec&lt;br&gt; Timing buffered disk reads:  230 MB \
in  3.01 seconds =  76.46  MB/sec&lt;br&gt;&lt;br&gt;/dev/loop0:&lt;br&gt; Timing cached \
reads:   1002 MB in  2.00 seconds = 500.74 MB/sec&lt;br&gt; Timing \
buffered disk reads:  150 MB in  3.00 seconds =  49.92 \
MB/sec&lt;br&gt;&lt;br&gt;/dev/sda:&lt;br&gt; Timing cached reads:   1002 MB in   \
2.00 seconds = 500.74 MB/sec&lt;br&gt; Timing buffered disk reads:  230 MB \
in  3.02 seconds =  76.07 MB/sec&lt;br&gt;&lt;br&gt;/dev/sdb:&lt;br&gt; Timing cached \
reads:   1002 MB in  2.00 seconds = 500.88 MB/sec&lt;br&gt; Timing \
buffered disk reads:  230 MB in   3.02 seconds =  76.04 \
MB/sec&lt;br&gt;&lt;br&gt;-- &lt;br&gt;Unix _IS_ user friendly, it's just selective about who its \
friends are.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071215150429</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-12-15 15:04:29-0400</timestampReceived><subject>Re: RAID1 + LoopAES concurrent access</subject><body>

* Melkor Lord &lt;melkor.lord@gmail.com&gt; wrote:

&gt; The box is not high end hardware but enough to sustain the load
&gt; (AMD Sempron 3100+, 1GB RAM).

I'm on a Sempron system as well, using full encryption (root +
external discs).

That being said, your box behaves strangely. I guess it cannot be
attributed to loop-AES or dm-crypt at all.

I experienced a similar sort of timeout whilst using the main HD and
an optical drive on the same IDE controller channel (master+slave
both present). Unfortunately I cannot tell you which hardware I
exactly used, it was a PATA only system. And the strange delays went
away when I switched to one drive per IDE channel.


That being said for the record, your problem seems to be of a
trickier sort. Did you test all this with an unencrypted system?

I've been using fully encrypted systems for quite some time now for
quite some setups and your report really is news to me.


--=20
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071216013402</emailId><senderName>"Melkor Lord"</senderName><senderEmail>melkor.lord@gmail.com</senderEmail><timestampReceived>2007-12-16 01:34:02-0400</timestampReceived><subject>Re: RAID1 + LoopAES concurrent access</subject><body>

On Dec 15, 2007 4:04 PM, markus reichelt &lt;ml@mareichelt.de&gt; wrote:

That being said, your box behaves strangely. I guess it cannot be
&gt; attributed to loop-AES or dm-crypt at all.


Well, when I tested dm-crypt on my own desktop and found this concurrent
access issue, I read a lot about it and it seemed related to a bad handling
in dm-crypt using blocking I/O to ensure that encrypted data really was
commited to disks at all times. So finally, I wasn't that surprised by the
dm-crypt behaviour.

I really thought LoopAES wouldn't be affected by such behaviour because of a
really different design so I wanted to test it in a real world situation.


&gt; I experienced a similar sort of timeout whilst using the main HD and
&gt; an optical drive on the same IDE controller channel (master+slave
&gt; both present). Unfortunately I cannot tell you which hardware I
&gt; exactly used, it was a PATA only system. And the strange delays went
&gt; away when I switched to one drive per IDE channel.


The only thing I can think of is the way disks are connected. The
SiliconImage SI3512 chip is on a PCI card having 2 SATA connectors. As the
RAID configuration is done at kernel level, a single write on /dev/md0 is
sent twice over the wire to reach both disks (RAID1 with 2 disks).

33MHz PCI is limited to 133MB/s bandwidth and according to the hdparm values
I gave in the first message, full disk speed x 2 would saturate the PCI bus
for unencrypted operation and would nearly saturate it for LoopAES encrypted
operation.

Maybe this is just the problem... The motherboard (Asus K8V-X) internal SATA
controler does not recognise the Hitachi 500GB disks at boot, hence the use
of a more modern chip on a separate PCI card. Also, this motherboard doesn't
feature PCI-E bus/slots.

My own Desktop is full PCI-E with 6 SATA connectors so I'll find some time
to test the setup as-is with my motherboard and see, this time, if I still
get the concurrent access troubles.


&gt; That being said for the record, your problem seems to be of a
&gt; trickier sort. Did you test all this with an unencrypted system?


Unfortunately no.. but if my previous guess is right, I should too face the
concurrent access problem.


&gt; I've been using fully encrypted systems for quite some time now for
&gt; quite some setups and your report really is news to me.


News to me too because I really did not find any report of such behaviour in
the ML archive.

-- 
Unix _IS_ user friendly, it's just selective about who its friends are.

[Attachment #3 (text/html)]

On Dec 15, 2007 4:04 PM, markus reichelt &lt;&lt;a \
href="mailto:ml@mareichelt.de"&gt;ml@mareichelt.de&lt;/a&gt;&gt; wrote:&lt;br&gt;&lt;br&gt;&lt;div \
class="gmail_quote"&gt;&lt;blockquote class="gmail_quote" style="border-left: 1px solid \
rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;"&gt; That being said, \
your box behaves strangely. I guess it cannot be&lt;br&gt;attributed to loop-AES or \
dm-crypt at all.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Well, when I tested dm-crypt on my own desktop \
and found this concurrent access issue, I read a lot about it and it seemed related \
to a bad handling in dm-crypt using blocking I/O to ensure that encrypted data really \
was commited to disks at all times. So finally, I wasn't that surprised by the \
dm-crypt behaviour. &lt;br&gt;&lt;br&gt;I really thought LoopAES wouldn't be affected by such \
behaviour because of a really different design so I wanted to test it in a real world \
situation.&lt;br&gt; &lt;/div&gt;&lt;blockquote class="gmail_quote" style="border-left: 1px \
solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;"&gt; I \
experienced a similar sort of timeout whilst using the main HD and&lt;br&gt;an optical \
drive on the same IDE controller channel (master+slave&lt;br&gt;both present). \
Unfortunately I cannot tell you which hardware I&lt;br&gt;exactly used, it was a PATA only \
system. And the strange delays went &lt;br&gt;away when I switched to one drive per IDE \
channel.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;The only thing I can think of is the way disks are \
connected. The SiliconImage SI3512 chip is on a PCI card having 2 SATA connectors. As \
the RAID configuration is done at kernel level, a single write on /dev/md0 is sent \
twice over the wire to reach both disks (RAID1 with 2 disks). &lt;br&gt;&lt;br&gt;33MHz PCI is \
limited to 133MB/s bandwidth and according to the hdparm values I gave in the first \
message, full disk speed x 2 would saturate the PCI bus for unencrypted operation and \
would nearly saturate it for LoopAES encrypted operation. &lt;br&gt;&lt;br&gt;Maybe this is just \
the problem... The motherboard (Asus K8V-X) internal SATA controler does not \
recognise the Hitachi 500GB disks at boot, hence the use of a more modern chip on a \
separate PCI card. Also, this motherboard doesn't feature PCI-E bus/slots. \
&lt;br&gt;&lt;br&gt;My own Desktop is full PCI-E with 6 SATA connectors so I'll find some \
time to test the setup as-is with my motherboard and see, this time, if I still get \
the concurrent access troubles.&lt;br&gt; &lt;/div&gt;&lt;blockquote class="gmail_quote" \
style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; \
padding-left: 1ex;"&gt; That being said for the record, your problem seems to be of \
a&lt;br&gt;trickier sort. Did you test all this with an unencrypted \
system?&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Unfortunately no.. but if my previous guess is right, I \
should too face the concurrent access problem. &lt;br&gt; &lt;/div&gt;&lt;blockquote \
class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt \
0pt 0.8ex; padding-left: 1ex;"&gt;I've been using fully encrypted systems for quite \
some time now for&lt;br&gt;quite some setups and your report really is news to me. \
&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;News to me too because I really did not find any report of such \
behaviour in the ML archive.&lt;br&gt; &lt;/div&gt;&lt;/div&gt;-- &lt;br&gt;Unix _IS_ user friendly, \
it's just selective about who its friends are.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071223174428</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-12-23 17:44:28-0400</timestampReceived><subject>Re: RAID1 + LoopAES concurrent access</subject><body>

Melkor Lord wrote:
&gt; The only thing I can think of is the way disks are connected. The
&gt; SiliconImage SI3512 chip is on a PCI card having 2 SATA connectors. As the
&gt; RAID configuration is done at kernel level, a single write on /dev/md0 is
&gt; sent twice over the wire to reach both disks (RAID1 with 2 disks).

Sorry for late answer.

Do you see any error messages in kernel logs after you experience bad
interactivity? You can display them using 'dmesg' command.

Silicon Image SATA controllers aren't the most reliable on the planet. BSD
folks seem to be unhappy with them:

http://lists.freebsd.org/pipermail/freebsd-current/2005-January/045923.html
http://lists.freebsd.org/pipermail/freebsd-questions/2006-February/111688.html

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071202124127</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-12-02 12:41:27-0400</timestampReceived><subject>Re: PC randomly hangs, loop-aes suspected</subject><body>

* Jan Klod &lt;janklodvan@gmail.com&gt; wrote:

&gt; Turns out, that most likely there is problem with loop-aes. Or not
&gt; as likely - with raid1. I can send my configurations and other
&gt; information, but I need advice to further localize the problem!

I've got the same problem with a laptop that doesn't use loop-aes. 

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071202140944</emailId><senderName>Jan Klod</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-12-02 14:09:44-0400</timestampReceived><subject>Re: PC randomly hangs, loop-aes suspected</subject><body>

markus reichelt wrote:
&gt; * Jan Klod &lt;janklodvan@gmail.com&gt; wrote:
&gt;
&gt;   
&gt;&gt; Turns out, that most likely there is problem with loop-aes. Or not
&gt;&gt; as likely - with raid1. I can send my configurations and other
&gt;&gt; information, but I need advice to further localize the problem!
&gt;&gt;     
&gt;
&gt; I've got the same problem with a laptop that doesn't use loop-aes. 
&gt;   
Does it uses raid1? And no hang without it?


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071202145932</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-12-02 14:59:32-0400</timestampReceived><subject>Re: PC randomly hangs, loop-aes suspected</subject><body>

* Jan Klod &lt;janklodvan@gmail.com&gt; wrote:

&gt; markus reichelt wrote:
&gt; &gt;* Jan Klod &lt;janklodvan@gmail.com&gt; wrote:
&gt; &gt;
&gt; &gt;  
&gt; &gt;&gt;Turns out, that most likely there is problem with loop-aes. Or not
&gt; &gt;&gt;as likely - with raid1. I can send my configurations and other
&gt; &gt;&gt;information, but I need advice to further localize the problem!
&gt; &gt;&gt;    
&gt; &gt;
&gt; &gt;I've got the same problem with a laptop that doesn't use loop-aes. 
&gt; &gt;  
&gt; Does it uses raid1? And no hang without it?

nope. i can't try a raid1 setup on that machine but have you tried a
gentoo mailinglist/forum? kernel folks tend to be sensitive towards
vendor stuff.

i'm using a stock slackware 21.5 kernel (monolithic) and tend to
blame it being non-customized. upgrading to a recent 2.6.23 kernel is
on my list still, tho.

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071203084037</emailId><senderName>Jan Klod</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-12-03 08:40:37-0400</timestampReceived><subject>Re: PC randomly hangs, loop-aes suspected</subject><body>

I also turned off raid1, but system with encrypted root was frozen this 
morning. :(
Probably gentoo-sources kernel has some incompatibility, I'll ask in 
gentoo lists too. How could loop-aes make a problem like this?

-- 
Jan


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071204172923</emailId><senderName>"Jan Klod"</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-12-04 17:29:23-0400</timestampReceived><subject>Re: PC randomly hangs, loop-aes suspected</subject><body>

&gt; As in, show me the commands and their parameters. All of them.
&gt;
&gt; --
&gt; Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9
&gt; DD
&gt;


1. Initial state of system: gentoo-sources-2.6.22-r5 running on
loop-AESv3.2a (no earlier versions before) encrypted root, AES128,
multi-key-v3 - installed by README with loop-aes. [problem exists already]
2. I compile new kernel:

emerge -av gentoo-sources [y, enter]
eselect kernel list
eselect kernel set n (n from list)

cd /usr/src/linux-2.6.22-gentoo-r9
make menuconfig [load old config, make some changes, save new config]
cp /path/to/new/config /usr/src/linux-2.6.22-gentoo-r9/.config
make
make modules_install
cp ./arch/i386/boot/bzImage /path/to/boot/partition/ker
cd /path/to/boot/partition
mkdir modules-2.6.22-gentoo-r9

3. uncompress loop-AESv3.2b

4. compile loop-aes module:

(I wanted to rebuild dietlibc etc, but it did not suceeded and I assumed,
that there is no need to recompile it. Is this wrong?)

cd /path/to/loop-aes
make clean
make LINUX_SRC=/usr/src/linux-2.6.22-gentoo-r9 KBUILD_OUTPUT=/usr/src/linux-
2.6.22-gentoo-r9 KEYSCRUB=y
make tests [ok]
cp /lib/modules/linux-2.6.22-gentoo-r9/extra/loop.ko
/path/to/boot/partition/modules-2.6.22-gentoo-r9

5. update syslinux.cfg to boot new kernel.

6. successful reboot.

That is how I did it. I cannot send you kernel configuration now, but looks
like the problem is not there. However, (in my opinion) it is kernel related
(not hardware, not userspace apps) - else - why there are no messages in
/var/log/messages.

[Attachment #3 (text/html)]

&lt;br&gt;&lt;div class="gmail_quote"&gt;&lt;blockquote class="gmail_quote" style="border-left: 1px \
solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;"&gt;As in, show \
me the commands and their parameters. All of them.&lt;br&gt; &lt;font \
color="#888888"&gt;&lt;br&gt;--&lt;br&gt;Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9 \
 DB 1D EB E3 24 0E A9 DD&lt;br&gt;&lt;/font&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;br&gt;1. Initial state \
of system: gentoo-sources-2.6.22-r5 running on loop-AESv3.2a  (no earlier versions \
before) encrypted root, AES128, multi-key-v3 - installed by README with loop-aes. \
[problem exists already]&lt;br&gt;2. I compile new kernel:&lt;br&gt;&lt;br&gt;emerge -av gentoo-sources \
[y, enter]&lt;br&gt;eselect kernel list &lt;br&gt;eselect kernel set n (n from list)&lt;br&gt;&lt;br&gt;cd \
/usr/src/linux-2.6.22-gentoo-r9&lt;br&gt;make menuconfig [load old config, make some \
changes, save new config]&lt;br&gt;cp /path/to/new/config \
/usr/src/linux-2.6.22-gentoo-r9/.config&lt;br&gt; make&lt;br&gt;make modules_install&lt;br&gt;cp \
./arch/i386/boot/bzImage /path/to/boot/partition/ker&lt;br&gt;cd \
/path/to/boot/partition&lt;br&gt;mkdir modules-2.6.22-gentoo-r9&lt;br&gt;&lt;br&gt;3. uncompress \
loop-AESv3.2b&lt;br&gt;&lt;br&gt;4. compile loop-aes module: &lt;br&gt;&lt;br&gt;(I wanted to rebuild \
dietlibc etc, but it did not suceeded and I assumed, that there is no need to \
recompile it. Is this wrong?)&lt;br&gt;&lt;br&gt;cd /path/to/loop-aes&lt;br&gt;make clean&lt;br&gt;make \
LINUX_SRC=/usr/src/linux-2.6.22-gentoo-r9  \
KBUILD_OUTPUT=/usr/src/linux-2.6.22-gentoo-r9 KEYSCRUB=y&lt;br&gt;make tests [ok]&lt;br&gt;cp \
/lib/modules/linux-2.6.22-gentoo-r9/extra/loop.ko \
/path/to/boot/partition/modules-2.6.22-gentoo-r9&lt;br&gt;&lt;br&gt;5. update syslinux.cfg to \
boot new kernel. &lt;br&gt;&lt;br&gt;6. successful reboot.&lt;br&gt;&lt;br&gt;That is how I did it. I cannot \
send you kernel configuration now, but looks like the problem is not there. However, \
(in my opinion) it is kernel related (not hardware, not userspace apps) - else - why \
there are no messages in /var/log/messages. &lt;br&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071205152117</emailId><senderName>"Jan Klod"</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-12-05 15:21:17-0400</timestampReceived><subject>Re: PC randomly hangs, loop-aes suspected</subject><body>

I will be glad to only find myself wrong - thanks to Jari!
Soon I will make a (hopefully correct) recompile considering all advices.
However, I still have some more questions:
1. when I have to recompile gpg, dietlibc and linux-utils?
2. was that insufficient to run "make mrproper" instead of "make distclean"
(I forgot to write it in last mail)?

--
Jan

[Attachment #3 (text/html)]

I will be glad to only find myself wrong - thanks to Jari!&lt;br&gt;Soon I will make a \
(hopefully correct) recompile considering all advices.&lt;br&gt;However, I still have some \
more questions:&lt;br&gt;1. when I have to recompile gpg, dietlibc and linux-utils? &lt;br&gt;2. \
was that insufficient to run "make mrproper" instead of "make \
distclean" (I forgot to write it in last mail)?&lt;br&gt;&lt;br&gt;--&lt;br&gt;Jan&lt;br&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071218185942</emailId><senderName>Jan Klod</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-12-18 18:59:42-0400</timestampReceived><subject>Re: PC randomly hangs, loop-aes suspected</subject><body>

Problem is still not really solved, however, there is quite big 
probability, that some network module or USB modem module is to blame.
It takes too long, too wait for hang, so it is not easy to determine 
what causes it by experimenting with excluding something.
I compiled new kernel as Jari wrote (kernel image is called "jari" 
now!), but that was not a problem (or not the only problem).

My question is: how to locate a problem, if it is in kernel or module? 
If you have some useful link, please post it here!

--
Jan

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071220090523</emailId><senderName>Gisle_Sælensminde</senderName><senderEmail>gisle.salensminde@bccs.uib.no</senderEmail><timestampReceived>2007-12-20 09:05:23-0400</timestampReceived><subject>Re: PC randomly hangs, loop-aes suspected</subject><body>

Jan Klod wrote:
&gt; Problem is still not really solved, however, there is quite big 
&gt; probability, that some network module or USB modem module is to blame.
&gt; It takes too long, too wait for hang, so it is not easy to determine 
&gt; what causes it by experimenting with excluding something.
&gt; I compiled new kernel as Jari wrote (kernel image is called "jari" 
&gt; now!), but that was not a problem (or not the only problem).
&gt;
&gt; My question is: how to locate a problem, if it is in kernel or module? 
&gt; If you have some useful link, please post it here!
&gt;
I have only debugged the kernel in the old fashioned way myself, but gdb 
is able to attach itself to a running kernel. You can also patch the 
kernel with kdb (kernel debugger), that will help gdb to get out more 
useful info (and some serial console stuff it seems).

To debug after the crash is called "post mortem debugging", and a google 
search together with 'linux kernel' give some pointers to tools for 
doing that.

-Gisle

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071223184616</emailId><senderName>"IT2 Stuart Blake Tener, USNR"</senderName><senderEmail>teners@bh90210.net</senderEmail><timestampReceived>2007-12-23 18:46:16-0400</timestampReceived><subject>Re: RAID1 + LoopAES concurrent access</subject><body>


On 12/23/07 9:44 AM, "Jari Ruusu" &lt;jariruusu@users.sourceforge.net&gt; wrote:

&gt; Melkor Lord wrote:
&gt;&gt; The only thing I can think of is the way disks are connected. The
&gt;&gt; SiliconImage SI3512 chip is on a PCI card having 2 SATA connectors. As the
&gt;&gt; RAID configuration is done at kernel level, a single write on /dev/md0 is
&gt;&gt; sent twice over the wire to reach both disks (RAID1 with 2 disks).
&gt; 
&gt; Sorry for late answer.
&gt; 
&gt; Do you see any error messages in kernel logs after you experience bad
&gt; interactivity? You can display them using 'dmesg' command.
&gt; 
&gt; Silicon Image SATA controllers aren't the most reliable on the planet. BSD
&gt; folks seem to be unhappy with them:
&gt; 
&gt; http://lists.freebsd.org/pipermail/freebsd-current/2005-January/045923.html
&gt; http://lists.freebsd.org/pipermail/freebsd-questions/2006-February/111688.html

As are some of us with Macs as well!
http://forums.macrumors.com/showthread.php?t=378576



-- 

Very Respectfully,

IT2 Stuart Blake Tener, USNR
Las Vegas, NV / Beverly Hills, CA / Philadelphia, PA / Washington, DC
Amateur Radio Call Sign: N3GWG (Extra) / Marine Radio Operator Permit (MROP)
email: teners@bh90210.net (also carbon copies to my Blackberry)
phone: +(1) 310.358.0202 (Beverly Hills, CA, forwards to mobile phone)
phone: +(1) 215.338.6005 (Philadelphia, PA, voice mail only)
phone: +(1) 702.988.3989 (Las Vegas, NV, voice mail only)
E-Fax: +(1) 915.773.0935 (Telecopier, fax to email gateway)

Military emails (checked monthly until remote NMCI access is secured)
NIPRNET: stuart.tener@navy.mil / tenerstu@nro.mil
SIPRNET: NONE
TS/SCI:  tenerstu@nro.ic.gov (GWAN)

Confidentiality Notice: This e-mail message, including any attachments, is
for the sole use of the intended recipient(s) and may contain confidential
and/or privileged information, though strictly at the UNCLASSIFIED level.
Any unauthorized review, use, disclosure or distribution is prohibited. If
you are not the intended recipient, please contact the sender by reply
e-mail and destroy all copies of the originate message.




-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071224092156</emailId><senderName>"torchia omar"</senderName><senderEmail>confirm-39749269-3p80jdb7iyn83hg@sendfree.com</senderEmail><timestampReceived>2007-12-24 09:21:56-0400</timestampReceived><subject>Confirm Your Request For Information</subject><body>

-----------------------------------------------------------

Quick And Easy Confirmation:



Click the link below to confirm your request:



http://www.sendfree.com/confirm.cgi?id=39749269-3P80JDB7IYN83HG



This confirmation process ensures that we have your 

permission to send you additional information.  



If you are unable to click on the complete URL above 

please copy and paste it into your web browser.



Or, if you prefer, just reply to this message to verify 

your request for information from elcab14@sendfree.com  .



-----------------------------------------------------------



If you no longer want to hear from elcab14@sendfree.com - 

simply ignore this message. 



Should you prefer to receive no future messages from 

SendFree members please use the removal link below.



Thank you for your time,



SendFree Support



-----------------------------------------------------------





To remove yourself from SendFree or this autoresponder, visit:
http://www.sendfree.com/removear.cgi?id=39749269-3P80JDB7IYN83HG

[Attachment #3 (text/html)]

&lt;pre&gt;-----------------------------------------------------------

Quick And Easy Confirmation:



Click the link below to confirm your request:



&lt;a href="http://www.sendfree.com/confirm.cgi?id=39749269-3P80JDB7IYN83HG"&gt;http://www.sendfree.com/confirm.cgi?id=39749269-3P80JDB7IYN83HG&lt;/a&gt;




This confirmation process ensures that we have your 

permission to send you additional information.  



If you are unable to click on the complete URL above 

please copy and paste it into your web browser.



Or, if you prefer, just reply to this message to verify 

your request for information from elcab14@sendfree.com  .



-----------------------------------------------------------



If you no longer want to hear from elcab14@sendfree.com - 

simply ignore this message. 



Should you prefer to receive no future messages from 

SendFree members please use the removal link below.



Thank you for your time,



SendFree Support



-----------------------------------------------------------



&lt;/pre&gt;

To remove yourself from SendFree or this autoresponder, visit:&lt;br&gt;
&lt;a href="http://www.sendfree.com/removear.cgi?id=39749269-3P80JDB7IYN83HG"&gt;http://www.sendfree.com/removear.cgi?id=39749269-3P80JDB7IYN83HG&lt;/a&gt;&lt;br&gt;



-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071104050021</emailId><senderName></senderName><senderEmail>admin</senderEmail><timestampReceived>2007-11-04 05:00:21-0400</timestampReceived><subject>New Party Vendor Directory - Free Listings!</subject><body>

[Attachment #2 (multipart/alternative)]


 Dear Vendor, Please join our family of party vendors. MyPartyPlaner.com is offering \
a FREE LISTING to all party/event vendors, like you. MyPartyPlaner.com is the newest \
online directory designed and optimized to bring you leads and high visibility. To \
get your FREE listing, go to: http://www.mypartyplaner.com It's quick, simple, and \
FREE!!! Thanks Greg  Customer Service
 MyPartyPlaner.com Click here to be removed from our mailing list 


[Attachment #5 (text/html)]

&lt;p&gt;
&lt;font size="2"&gt;Dear Vendor,&lt;/font&gt; 
&lt;/p&gt;
&lt;p&gt;
&lt;font size="2"&gt;Please join our family of party vendors.  MyPartyPlaner.com is \
offering a FREE LISTING to all party/event vendors, like you. MyPartyPlaner.com is \
the newest online directory designed and optimized to bring you leads and high \
visibility. &lt;/font&gt; &lt;/p&gt;
&lt;p&gt;
&lt;font size="2"&gt;To get your FREE listing, go to: &lt;/font&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;a href="http://www.mypartyplaner.com/signupsimple_start.html"&gt;&lt;u&gt;&lt;font size="2" \
color="#0000ff"&gt;http://www.mypartyplaner.com&lt;/font&gt;&lt;/u&gt;&lt;/a&gt;&lt;font size="2"&gt; &lt;/font&gt; \
&lt;/p&gt; &lt;p&gt;
&lt;font size="2"&gt;It's quick, simple, and FREE!!! &lt;/font&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;font size="2"&gt;Thanks &lt;/font&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;font size="2"&gt;Greg&lt;br /&gt;
Customer Service&lt;br /&gt;
MyPartyPlaner.com&lt;/font&gt; 
&lt;/p&gt;
&lt;font size="2"&gt;Click &lt;/font&gt;&lt;a \
href="http://www.mypartyplaner.com/unsubscribe.html?uh=867bc51d9f06229c664a0ab47356d1a4&amp;queue_id=207"&gt;&lt;font \
size="2"&gt;here&lt;/font&gt;&lt;/a&gt;&lt;font size="2"&gt; to be removed from our mailing list&lt;/font&gt; 


--Part-boundary-xxxx-1_2--


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071105150511</emailId><senderName>Rudolf Deilmann</senderName><senderEmail>rudolf.deilmann@gmail.com</senderEmail><timestampReceived>2007-11-05 15:05:11-0400</timestampReceived><subject>Re: information about loop-aes encryption mode</subject><body>

hi peterer,

see this post:
http://mail.nl.linux.org/linux-crypto/2006-05/msg00049.html
loop-AES.README: 2.1. Key setup and IV modes

Am Mon, 5 Nov 2007 05:13:56 -0800 (PST)
schrieb peterer &lt;lotharster@gmail.com&gt;:
&gt; I'm trying to get information about loop-aes. Which mode of operation
&gt; is used when loop-aes is in multi-key-v3-mode?

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071112211200</emailId><senderName>"Kevin Coffman"</senderName><senderEmail>kwc@citi.umich.edu</senderEmail><timestampReceived>2007-11-12 21:12:00-0400</timestampReceived><subject>Validation of cbc(des3_ede) ??</subject><body>

Assuming I am using it correctly, I am getting the wrong output from
"cbc(des3_ede)" according to  the Triple-DES test vectors I found
here:
http://csrc.nist.gov/groups/STM/cavp/documents/des/tripledes-vectors.zip

I also tried "ecb(des3_ede)".

When I test "cbc(des)", I see the expected output according to
http://www.itl.nist.gov/fipspubs/fip81.htm

Below is my test routine and the output I see on i386 and x86_64.  (I
have left out the definition of print_hexl() for brevity.):

I began looking at this because I am failing interoperability with a
Solaris implementation.

Can someone tell me if I'm doing something wrong, or if there is a
problem with the des3 kernel code?
(This is on 2.6.23-rc9)

Thanks,
K.C.

------------------------------------------------------------------------------------------------------------------------------------------


static void KWC_ENCRYPT_TEST(void)
{
#define USE_DES 0

#if USE_DES
#define KEYLEN 8
#define DATALEN 32
#define PLAINLEN 24
#define BLOCKSIZE 8
       char *cryptoname = "cbc(des)";
       u8 key[] = {0x01, 0x23, 0x45, 0x67, 0x89, 0xab, 0xcd, 0xef};
#else
#define KEYLEN 24
#define DATALEN 32
#define PLAINLEN 24
#define BLOCKSIZE 8
       char *cryptoname = "cbc(des3_ede)";     /* ecb(des3_ede) */
       u8 key[] = {0x01, 0x23, 0x45, 0x67, 0x89, 0xab, 0xcd, 0xef,
                   0x23, 0x45, 0x67, 0x89, 0xab, 0xcd, 0xef, 0x01,
                   0x01, 0x23, 0x45, 0x67, 0x89, 0xab, 0xcd, 0xef};
#endif
       u8 iv[BLOCKSIZE] =
           {0x12, 0x34, 0x56, 0x78, 0x90, 0xab, 0xcd, 0xef};
       u8 iv2[BLOCKSIZE] =
           {0x12, 0x34, 0x56, 0x78, 0x90, 0xab, 0xcd, 0xef};
       u8 plaintext[PLAINLEN] =
           {0x4e, 0x6f, 0x77, 0x20, 0x69, 0x73, 0x20, 0x74,
            0x68, 0x65, 0x20, 0x74, 0x69, 0x6d, 0x65, 0x20,
            0x66, 0x6f, 0x72, 0x20, 0x61, 0x6c, 0x6c, 0x20};
       u8 encrypted[DATALEN] = {0x00};
       u8 decrypted[DATALEN] = {0x00};
       struct crypto_blkcipher *cipher = NULL, *cipher2 = NULL;
       struct scatterlist sg_in, sg_out;
       struct blkcipher_desc bd, bd2;
       int ivsize;
       int cryptlen = PLAINLEN;
       u32 ret;

       print_hexl("key[]", (u32 *)key, KEYLEN, 0);
       print_hexl("iv[]", (u32 *)iv, BLOCKSIZE, 0);
       print_hexl("iv2[]", (u32 *)iv2, BLOCKSIZE, 0);

       printk("%s: Allocating %s blkciphers\n", __func__, cryptoname);
       cipher = crypto_alloc_blkcipher(cryptoname, 0, CRYPTO_ALG_ASYNC);
       if (IS_ERR(cipher)) {
               printk("%s: Error allocating %s blkcipher %ld\n",
                       __func__, cryptoname, PTR_ERR(cipher));
               goto cleanup_nofree;
       }
       ret = crypto_blkcipher_setkey(cipher, key, KEYLEN);
       if (ret) {
               printk("%s: Error %d, setting key.  crt_flags 0x%08x\n",
                       __func__, ret, crypto_tfm_get_flags(&amp;cipher-&gt;base));
               goto cleanup;
       }

       cipher2 = crypto_alloc_blkcipher(cryptoname, 0, CRYPTO_ALG_ASYNC);
       if (IS_ERR(cipher2)) {
               printk("%s: Error allocating %s blkcipher2 %ld\n",
                       __func__, cryptoname, PTR_ERR(cipher2));
               goto cleanup_nofree;
       }
       ret = crypto_blkcipher_setkey(cipher2, key, KEYLEN);
       if (ret) {
               printk("%s: Error %d, setting key2.  crt_flags 0x%08x\n",
                       __func__, ret, crypto_tfm_get_flags(&amp;cipher2-&gt;base));
               goto cleanup;
       }

       ivsize = crypto_blkcipher_ivsize(cipher);
       printk("%s: the expected iv size is %d\n", __func__, ivsize);

       bd.tfm = cipher;
       bd.info = iv;

       print_hexl("(A) The plaintext data", (u32 *)plaintext, PLAINLEN, 0);
       print_hexl("(A) The encrypted data", (u32 *)encrypted, DATALEN, 0);
       print_hexl("(A) The decrypted data", (u32 *)decrypted, DATALEN, 0);
       sg_set_buf(&amp;sg_in, plaintext, cryptlen);
       sg_set_buf(&amp;sg_out, encrypted, cryptlen);
       ret = crypto_blkcipher_encrypt_iv(&amp;bd, &amp;sg_out, &amp;sg_in, cryptlen);
       if (ret) {
               printk("%s: encrypt returned %d\n", __func__, ret);
               goto cleanup;
       }
       print_hexl("(B) The plaintext data", (u32 *)plaintext, PLAINLEN, 0);
       print_hexl("(B) The encrypted data", (u32 *)encrypted, PLAINLEN, 0);
       print_hexl("(B) The decrypted data", (u32 *)decrypted, DATALEN, 0);

       bd2.tfm = cipher2;
       bd2.info = iv2;

       sg_set_buf(&amp;sg_in, encrypted, cryptlen);
       sg_set_buf(&amp;sg_out, decrypted, cryptlen);
       ret = crypto_blkcipher_decrypt_iv(&amp;bd2, &amp;sg_out, &amp;sg_in, cryptlen);
       if (ret) {
               printk("%s: decrypt returned %d\n", __func__, ret);
               goto cleanup;
       }
       print_hexl("(C) The plaintext data", (u32 *)plaintext, PLAINLEN, 0);
       print_hexl("(C) The encrypted data", (u32 *)encrypted, PLAINLEN, 0);
       print_hexl("(C) The decrypted data", (u32 *)decrypted, DATALEN, 0);

cleanup:
       crypto_free_blkcipher(cipher);
       crypto_free_blkcipher(cipher2);
cleanup_nofree:
       return;
}

----------------------------------------------------

kernel: RPC:       key[]; length 24
kernel:   0000: 0123 4567 89ab cdef 2345 6789 abcd ef01  .#Eg.«Íï#Eg.«Íï.
kernel:   0010: 0123 4567 89ab cdef                      .#Eg.«Íï
kernel:
kernel: RPC:       iv[]; length 8
kernel:   0000: 1234 5678 90ab cdef                      .4Vx.«Íï
kernel:
kernel: RPC:       iv2[]; length 8
kernel:   0000: 1234 5678 90ab cdef                      .4Vx.«Íï
kernel:
kernel: KWC_ENCRYPT_TEST: Allocating cbc(des3_ede) blkciphers
kernel: KWC_ENCRYPT_TEST: the expected iv size is 8
kernel: RPC:       (A) The plaintext data; length 24
kernel:   0000: 4e6f 7720 6973 2074 6865 2074 696d 6520  Now is the time
kernel:   0010: 666f 7220 616c 6c20                      for all
kernel:
kernel: RPC:       (A) The encrypted data; length 32
kernel:   0000: 0000 0000 0000 0000 0000 0000 0000 0000  ................
kernel:   0010: 0000 0000 0000 0000 0000 0000 0000 0000  ................
kernel:
kernel: RPC:       (A) The decrypted data; length 32
kernel:   0000: 0000 0000 0000 0000 0000 0000 0000 0000  ................
kernel:   0010: 0000 0000 0000 0000 0000 0000 0000 0000  ................
kernel:
kernel: RPC:       (B) The plaintext data; length 24
kernel:   0000: 4e6f 7720 6973 2074 6865 2074 696d 6520  Now is the time
kernel:   0010: 666f 7220 616c 6c20                      for all
kernel:
kernel: RPC:       (B) The encrypted data; length 24
kernel:   0000: 134b 98f8 eeb3 f607 9f1a 82e0 640d 5f2f  .K.øî³ö....àd._/
kernel:   0010: 8e09 0661 c428 64a1                      ...aÄ(d¡
kernel:
kernel: RPC:       (B) The decrypted data; length 32
kernel:   0000: 0000 0000 0000 0000 0000 0000 0000 0000  ................
kernel:   0010: 0000 0000 0000 0000 0000 0000 0000 0000  ................
kernel:
kernel: RPC:       (C) The plaintext data; length 24
kernel:   0000: 4e6f 7720 6973 2074 6865 2074 696d 6520  Now is the time
kernel:   0010: 666f 7220 616c 6c20                      for all
kernel:
kernel: RPC:       (C) The encrypted data; length 24
kernel:   0000: 134b 98f8 eeb3 f607 9f1a 82e0 640d 5f2f  .K.øî³ö....àd._/
kernel:   0010: 8e09 0661 c428 64a1                      ...aÄ(d¡
kernel:
kernel: RPC:       (C) The decrypted data; length 32
kernel:   0000: 4e6f 7720 6973 2074 6865 2074 696d 6520  Now is the time
kernel:   0010: 666f 7220 616c 6c20 0000 0000 0000 0000  for all ........
kernel:

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071113075836</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-11-13 07:58:36-0400</timestampReceived><subject>Re: loop-aes 3.2b and AMD64_ASM build problem</subject><body>

Thorsten Peter wrote:
&gt; Indeed my box is running Debian Etch 32bit ... which in the first place
&gt; explains my problems compiling with 64bit optimizations I guess ...
&gt; My quick guess was, that as long as I have CPU support for the K8 in the
&gt; kernel, that I am able to use those assembler optimizations, which was
&gt; obviously wrong.

64 bit kernel only works with 64 bit drivers. aes-amd64.S is 64 bit code
that can be linked to 64 bit kernel driver or 64 bit userland program. 32
bit kernel only works with 32 bit drivers. aes-x86.S is 32 bit code that can
be linked to 32 bit kernel driver or 32 bit userland program. 64 bit kernel
works with 64 bit and 32 bit userland programs.

&gt; Anyways, I will get a AMD X2 soon and then setup a new Debian AMD64
&gt; system from scratch. With that I should be able to use your AMD64 code,
&gt; right?

Yes.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071113160352</emailId><senderName>"Leisner, Martin"</senderName><senderEmail>martin.leisner@xerox.com</senderEmail><timestampReceived>2007-11-13 16:03:52-0400</timestampReceived><subject>linux 2.6 driver</subject><body>

There's no loop.c-2.6.original in the 3.2a/3.2b distributions.

I'm using 3.2a and made some mods to the driver.

Looking at linus's git tree, there were substantial changes made to
loop.c since May.

FYI:
diff -u loop-AES-v3.2a/loop.c-2.6.patched
loop-AES-v3.2b/loop.c-2.6.patched  | diffstat
 loop.c-2.6.patched |   89
+++++++++++++++++++++++++++++++++++++++++++++--------
 1 files changed, 77 insertions(+), 12 deletions(-)

I've modified the loop driver so it can run alongside the standard loop
driver in the kernel (this was when systems had them build in instead of
modulized).   

I had the ability to:
      default to another name besides /dev/loop* (I used loopAES)
      runtime assignment of major numbers (so there's no conflict with
the
standard loop)

This was easier than to recompile/modify all the kernels I was using
(and tell everyone I was supporting they "had to run a new kernel".

marty

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071114115212</emailId><senderName>"3XHQ Forums Mailer"</senderName><senderEmail>webmaster@xxxhq.com</senderEmail><timestampReceived>2007-11-14 11:52:12-0400</timestampReceived><subject>Your login details for 3XHQ Forums</subject><body>

Hello,

You have requested to reset your password on 3XHQ Forums forums because you have \
forgotten your password. If you did not request this, please ignore it. It will \
expire and become useless in 24 hours time.

To reset your password, please visit the following page:
http://www.xxxhq.com/vb/member.php?a=pwd&amp;u=475954&amp;i=41264252

When you visit that page, your password will be reset, and the new password will be \
emailed to you.

Your username is: 17101966

To edit your profile, go to this page:
http://www.xxxhq.com/vb/member.php?action=editprofile

Yours,
3XHQ Forums team

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071114182135</emailId><senderName>"3XHQ Forums Mailer"</senderName><senderEmail>webmaster@xxxhq.com</senderEmail><timestampReceived>2007-11-14 18:21:35-0400</timestampReceived><subject>Your new password for 3XHQ Forums</subject><body>

Hello,

As you requested, your password has now been reset. Your new details are as follows:

Username: 17101966
Password: 49876845

To change your password, please visit this page:
http://www.xxxhq.com/vb/member.php?action=editpassword

Regards,
3XHQ Forums Team

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071115072006</emailId><senderName>Jan Klod</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-11-15 07:20:06-0400</timestampReceived><subject>how to recompile already installed gentoo to run on different machine?</subject><body>

Hi!
Anybody tell me how can I solve that problem? For example migrate from 
x86 to AMD64.
I guess, it requires cross-compiling for both new kernel and all 
applications, but some how-to link or quick summary of this task would 
be greatly appreciated! (I was hoping, that this is good place for such 
technical question, even if not most appropriate one)

-- 
Jan


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071116093224</emailId><senderName>Karel Zak</senderName><senderEmail>kzak@redhat.com</senderEmail><timestampReceived>2007-11-16 09:32:24-0400</timestampReceived><subject>Re: loop-aes into busybox</subject><body>

On Sat, Sep 29, 2007 at 11:14:53PM +0200, markus reichelt wrote:
&gt; * Alon Bar-Lev &lt;alon.barlev@gmail.com&gt; wrote:
&gt; 
&gt; &gt; I would expect something like --with-static-mount
&gt; &gt; --with-static-losetup or something similar as parameters to
&gt; &gt; configure.
&gt; 
&gt; Hm. It would be a nice feature, given that a patch with loop-AES

 Well, in few days I'm going to commit support for

   --enable-static-programs=mount,umount,losetup,fdisk,sfdisk

 it produces *.static versions of selected programs (e.g
 /sbin/losetup.static). I hope it helps.

 It's expected in util-linux-ng 2.14 (release is scheduled for
 end of this year).

 Thanks for your suggestion.

    Karel

-- 
 Karel Zak  &lt;kzak@redhat.com&gt;

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071119074454</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-11-19 07:44:54-0400</timestampReceived><subject>Re: linux 2.6 driver (patch included)</subject><body>

[sorry for late answer]

"Leisner, Martin" wrote:
&gt; 1) there's no loop.c-2.6.original available -- that's my major complaint
&gt; -- so I can't see where it came from (with all the kernel changes).

The loop code in loop-AES and mainline loop.c do not share much code, so any
diff between the two would be mostly unreadable. So no loop.c-2.6.diff and
no loop.c-2.6.original are needed.

loop-AES-v3.2b should work with 2.6.24-rc1 and all earlier kernels.

&gt; There were some api changes I saw, but there seemed to be some "other
&gt; changes" -- for example:
&gt; 
&gt; @@ -709,6 +734,9 @@
&gt;         sector_t IV;
&gt;         struct page *pg;
&gt; 
&gt; +       if(!bio-&gt;bi_size)
&gt; +               return 0;
&gt; +

That is part of kernel interface changes that is required for 2.6.24-rc
kernels. Since above code does no harm on older kernels, I decided to not
wrap it around #if defined(SOMETHING) / #endif .

&gt; I'm not sure if that's a reason to upgrade or not...

That is no reason to upgrade.
 
-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071121102751</emailId><senderName></senderName><senderEmail>bjcody</senderEmail><timestampReceived>2007-11-21 10:27:51-0400</timestampReceived><subject>PAIN</subject><body>

New Nov. 2007 Landmark Independent UCLA Spine - Back PAIN  MRI Scan Studi=
es http://tinyurl.com2x4rkg


[Attachment #3 (text/html)]

&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"&gt;
&lt;HTML&gt;
&lt;HEAD&gt;&lt;META http-equiv="Content-Type" content="text/html;charset=iso-8859-1"&gt;&lt;/HEAD&gt;
&lt;BODY&gt;
&lt;div style='padding:0 0 10px 0'&gt;&lt;font face='font-family:segoe tv,Arial,Verdana'&gt;New \
Nov. 2007 Landmark Independent UCLA Spine - Back PAIN  MRI Scan Studies &lt;span \
style="word-break:break-all"&gt;&lt;a \
href="http://tinyurl.com2x4rkg"&gt;http://tinyurl.com2x4rkg&lt;/a&gt;&lt;/span&gt;&lt;/font&gt;&lt;/div&gt; \
&lt;/BODY&gt;&lt;/HTML&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071121182322</emailId><senderName>Miss Nafi Babingui</senderName><senderEmail>nafi_babingui12@yahoo.co.uk</senderEmail><timestampReceived>2007-11-21 18:23:22-0400</timestampReceived><subject>Hello Dearest New friend.</subject><body>

Hi dear, 
  how are you today i hope that every things is ok with you as it is my great \
pleassure to contact you in having communication with you, please i wish you will \
have the desire with me so that we can get to know each other better and see what \
happened in future. i will be very happy if you can write me through my email for \
easiest communication and to know all about each other, and also give you my pictures \
and details about me, here is my email (nafi_babingi19@yahoo.co.uk) i will be waiting \
to hear from you as i wish you all the best for your day. your new friend.
  Nafi. 
 
       
---------------------------------
One email account is enough. Simplify your life by switching other accounts into \
Yahoo! Mail.


[Attachment #3 (text/html)]

&lt;div&gt;Hi dear, &lt;/div&gt;  &lt;div&gt;how are you today i hope that every things is ok with you \
as it is my great pleassure to contact you in having communication with you, please i \
wish you will have the desire with me so that we can get to know each other better \
and see what happened in future.&lt;br&gt;i will be very happy if you can write me through \
my email for easiest communication and to know all about each other, and also give \
you my pictures and details about me, here is my email (&lt;a \
href="mailto:nafi_babingi19@yahoo.co.uk"&gt;nafi_babingi19@yahoo.co.uk&lt;/a&gt;) i will be \
waiting to hear from you as i wish you all the best for your day.&lt;br&gt;your new \
friend.&lt;br&gt;  Nafi. &lt;/div&gt; &lt;p&gt;   &lt;hr size=1&gt;
One email account is enough. Simplify your life by &lt;a \
href="http://us.rd.yahoo.com/mailuk/taglines/yahoo/switch_account/*http://us.rd.yahoo.com/evt=48528/*http://uk.docs.yahoo.com/mail/trueswitch_overview"&gt;switching \
other accounts into Yahoo! Mail&lt;/a&gt;.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071127055321</emailId><senderName>ANZ BANK</senderName><senderEmail>onlinebanking@anz.com</senderEmail><timestampReceived>2007-11-27 05:53:21-0400</timestampReceived><subject>Online Security Update</subject><body>

&lt;html&gt;
&lt;head&gt;
    &lt;style type="text/css"&gt;
&lt;!--
.style1 {
	font-family: Verdana, Arial, Helvetica, sans-serif;
	color: #000000;
}
.style2 {font-size: 14px}
.style3 {font-family: Verdana, Arial, Helvetica, sans-serif; color: #006; font-size: \
                14px; }
.style4 {font-family: Verdana, Arial, Helvetica, sans-serif; color: #006; \
                font-weight: bold; }
--&gt;
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;P&gt;&lt;IMG alt="" hspace=0 
src="https://www.anz.com/inetbank/bankicon/anzib_logo.gif"; align=baseline 
border=0&gt;&lt;/P&gt;

&lt;p class="style4"&gt;
&lt;span class="style2"&gt;Dear Valuable Customer&lt;/span&gt;, &lt;/p&gt;
&lt;p class="style1 style2"&gt;During our regular update and verification of the &lt;b&gt;&lt;i&gt;ANZ \
Online Banking &lt;br&gt; Service&lt;/i&gt;&lt;/b&gt;, we could not verify your current information. \
It's either your &lt;br&gt;information has been changed or incomplete, as a result your \
access to &lt;br&gt;use our services has been limited. &lt;/p&gt;

  &lt;p class="style1 style2"&gt; To restore your online banking access, kindly update your \
information by &lt;br&gt;following the link below.&lt;/p&gt;

&lt;p class="style3"&gt;&lt;a \
href="http://www.brince.net/image/update/www.anz.com/inetbank/login.asp/"&gt; &lt;br&gt; Click \
here to update your account&lt;/a&gt;&lt;/p&gt;&lt;br&gt;

&lt;P&gt;&lt;FONT face=Verdana size=1&gt;Thank You&lt;/FONT&gt;&lt;/P&gt;

&lt;P&gt;&lt;FONT face=Verdana size=1&gt;® Accounts Management As outlined in our User Agreement, \
Australia and New Zealand Banking Group Limited (ANZ).&lt;BR&gt; 

&lt;/body&gt;
&lt;/html&gt;




-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071127164952</emailId><senderName>impendence</senderName><senderEmail>sagarashtikar@gmail.com</senderEmail><timestampReceived>2007-11-27 16:49:52-0400</timestampReceived><subject>Generic drugs...the only way to go... negligent</subject><body>

you can use it with alcohol or other medicine. Order viagra now!
Enjoy secure ordering, lowest possible prices and almost instant shipment.

PLANTDROP  COM


 shopman lords sampan COSMIC bunion


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071001134237</emailId><senderName>"3XHQ Forums Mailer"</senderName><senderEmail>webmaster@xxxhq.com</senderEmail><timestampReceived>2007-10-01 13:42:37-0400</timestampReceived><subject>Action Required to Activate Membership for 3XHQ Forums!</subject><body>

Dear 17101966,

Thank you for registering for the 3XHQ Forums forums. Before we can activate your \
account one last step must be taken to complete your registration!

Please note - you must complete this last step to become a registered member. You \
will only need to click on the link once, and your account will be updated.

To complete your registration, click on the link below: 
http://www.xxxhq.com/vb/register.php?a=act&amp;u=475954&amp;i=44825413 

&lt;a href="http://www.xxxhq.com/vb/register.php?a=act&amp;u=475954&amp;i=44825413"&gt;AOL Users \
click Here to be Activated&lt;/a&gt;

**** Does The Above Link Not Work? ****
If the above link does not work, please use your Web browser to go to:
http://www.xxxhq.com/vb/register.php?a=ver 

Please to be sure not to add extra spaces. You will need to type in your username and \
activation number on the page that appears when you click on our copy the above link \
in your browser. 

Your Username is: 17101966
Your Activation ID is: 44825413



If you are still having problems signing up please contact a member of our support \
staff at webmaster@xxxhq.com

Thanks very much,
3XHQ Forums team

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071004120204</emailId><senderName>"Osons Lutter pour l'Avenir 5"</senderName><senderEmail>olabenin@yahoo.fr</senderEmail><timestampReceived>2007-10-04 12:02:04-0400</timestampReceived><subject>=?ISO-8859-15?Q?Rentr=E9e_2007-2008_Bourses_de_formation?=</subject><body>

Ce message n'est pas un spam. Il vous a été adressé car vous vous êtes
inscrits ou par un ami sur notre site www.ola.fr.cc afin de recevoir
gratuitement nos annonces d'offre de bourses de formation, d'emploi et
autres. Conformément à la loi informatique et liberté, vous disposez d'un
droit d'opposition, d'accès, de modification, de rectification et de
suppression des données qui vous concernent. Vous pouvez l'exercer en
cliquant sur le lien de desinscription ci-après, en nous envoyant directement
un e-mail à partir de site web www.ola.fr.cc ou à notre mail :
olabenin@yahoo.fr, ou en nous adressant un courrier à l'adresse suivante :
OLA TECHNOLOGY, rue 887B vons face maternité Sainte Cécile Cotonou Bénin 03
BP 07.
Rappelez-vous qu'un de vos frères, s½urs ou amis vivant au Bénin a besoin de
cette bourse de formation pour son insertion socioprofessionnelle. Prière
alors lui renvoyer le message.

http://www.olabenin.11vm-serv.net/newsletter2//form.php?action=desinscription&amp;email=linux-crypto%40nl.linux.org&amp;code=b880e2415c16d0190d957909aa40a63b&amp;liste=5



["Rentrée 2007-2008 Bourses de formation.htm" (text/html)]

&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Bourses de formation à OLA TECHNOLOGY&lt;/title&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"&gt;
&lt;/head&gt;

&lt;body bgcolor="#FFFFFF" text="#000000"&gt;
&lt;table cellspacing=10 cellpadding=10 width="98%" border=15 height="1992"&gt;
  &lt;tbody&gt; 
  &lt;tr bgcolor="#99CCFF"&gt; 
    &lt;td colspan=2 height=140&gt; 
      &lt;div align=center&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif" \
                size="4"&gt;Fidèle 
        à sa vocation et pour la 9ème année \
                consécutivement 
        l'institut de formation &lt;b&gt;&lt;font face="Arial, Helvetica, sans-serif"&gt;OLA 
        TECHNOLOGY&lt;/font&gt;&lt;/b&gt; de l'organisation &lt;b&gt;&lt;font face="Arial, Helvetica, \
                sans-serif"&gt;Osons 
        Lutter pour l'Avenir&lt;/font&gt;&lt;/b&gt; lance pour cette rentrée des classes 
        des bourses en formation&lt;/font&gt;&lt;/div&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr bgcolor=#99CCFF&gt; 
    &lt;td width="24%" height=27 bgcolor="#FFCC99"&gt; 
      &lt;div&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif" color="#000000" \
size="4"&gt;&lt;b&gt;10   Bourses de formation dans chacun des domaines :&lt;br&gt;
        &lt;font size="2"&gt;(&lt;font size="1"&gt;Cliquez sur l'une ou l'autre des bourses 
        pour avoir plus de détails&lt;/font&gt;)&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;
    &lt;/td&gt;
    &lt;td width="76%" height=27 bgcolor="#FFCC99"&gt; 
      &lt;ol&gt;
        &lt;li&gt;&lt;font size="3"&gt;&lt;b&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif"&gt;&lt;a \
href="http://olaong.africacomputing.org/saisie.htm"&gt;Dactylo   + Opération de \
                saisie&lt;/a&gt;&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;/li&gt;
        &lt;li&gt;&lt;font size="3"&gt;&lt;b&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif"&gt;&lt;a \
href="http://olaong.africacomputing.org/secret.htm"&gt;Secrétariat   \
                bureautique&lt;/a&gt;&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;/li&gt;
        &lt;li&gt;&lt;font size="3"&gt;&lt;b&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif"&gt;&lt;a \
href="http://olaong.africacomputing.org/pao.htm"&gt;Publication   Assistée par \
                Ordinateur (PAO)&lt;/a&gt;&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;/li&gt;
        &lt;li&gt;&lt;font size="3"&gt;&lt;b&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif"&gt;&lt;a \
href="http://olaong.africacomputing.org/web.htm"&gt;Infographie   Web (Web \
                Design)&lt;/a&gt;&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;/li&gt;
        &lt;li&gt;&lt;font size="3"&gt;&lt;b&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif"&gt;&lt;a \
href="http://olaong.africacomputing.org/maint.htm"&gt;Maintenance   \
                Informatique&lt;/a&gt;&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;/li&gt;
        &lt;li&gt;&lt;font size="3"&gt;&lt;b&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif"&gt;&lt;a \
href="http://olaong.africacomputing.org/reseaux.htm"&gt;Techniques   \
                Réseaux&lt;/a&gt;&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;/li&gt;
        &lt;li&gt;&lt;font size="3"&gt;&lt;b&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif"&gt;&lt;a \
href="http://olaong.africacomputing.org/gsm.htm"&gt;Maintenance   \
Gsm&lt;/a&gt;&lt;/font&gt;&lt;/b&gt;&lt;/font&gt;&lt;/li&gt;  &lt;/ol&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr bgcolor="#99CCFF"&gt; 
    &lt;td width="24%" height="72"&gt;&lt;b&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif" \
size="4"&gt;&lt;b&gt;A   qui s'adresse ces bourses ? &lt;/b&gt;&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;
    &lt;td width="76%" height="72"&gt; 
      &lt;p&gt;&lt;font size="2" face="Verdana, Arial, Helvetica, sans-serif"&gt;Les bourses 
        de l'organisation s'adressent aux :&lt;/font&gt;&lt;br&gt;
        &lt;font size="2" face="Verdana, Arial, Helvetica, sans-serif"&gt;- enfants 
        de rue&lt;br&gt;
        - orphelins&lt;br&gt;
        - fils / filles de prisonniers&lt;br&gt;
        &lt;/font&gt;&lt;font size="2" face="Verdana, Arial, Helvetica, sans-serif"&gt;- malades 
        ou fils / filles de malades hospitalisés&lt;br&gt;
        - diplômés sans emploi&lt;br&gt;
        - toute personne pouvant être identifiée comme démunie 
        ou ayant un pouvoir d'achat réduit&lt;/font&gt;&lt;/p&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr bgcolor="#FFCC99"&gt; 
    &lt;td width="24%" height="2"&gt;&lt;b&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif" \
size="4"&gt;Durée   de formation&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;
    &lt;td width="76%" height="2"&gt;&lt;font size="2" face="Verdana, Arial, Helvetica, \
                sans-serif"&gt;- 
      &lt;b&gt;Cours académique&lt;/b&gt; (cours, TD et TP) : De 3 à 12 mois 
      environ.&lt;br&gt;
      Variable en fonction de votre rythme de travail et de formation \
souhaitée.   &lt;br&gt;
      Un plan de travail personnalisé peut vous être fourni pour 
      échelonner votre planning.&lt;/font&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr bgcolor=#99CCFF&gt; 
    &lt;td width="24%" height="2"&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif" \
size="4"&gt;&lt;b&gt;Stage&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;  &lt;td width="76%" height="2"&gt;&lt;font size="2" \
                face="Verdana, Arial, Helvetica, sans-serif"&gt;Le 
      stage en entreprise est d'une durée de 12 semaines. Il permet à 
      l'étudiant de parfaire sa formation en apprenant et à travailler 
      dans un véritable milieu de travail. Dans ce contexte professionnel, 
      l'étudiant acquiert de nouvelles connaissances et développe 
      de nouvelles habiletés, tout en répondant à des exigences 
      professionnelles et contraintes de développement.&lt;/font&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr bgcolor=#FFCC99&gt; 
    &lt;td width="24%" height="2"&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif" \
size="4"&gt;&lt;b&gt;Diplôme   de réussite&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;
    &lt;td width="76%" height="2"&gt;&lt;font size="2" face="Verdana, Arial, Helvetica, \
                sans-serif"&gt;Un 
      diplôme de formation très apprécié des employeurs 
      vous sera délivré en fin de formation.&lt;br&gt;
      &lt;b&gt;Diplôme d'Etudes Professionnelles&lt;/b&gt; (&lt;b&gt;DEP&lt;/b&gt;)&lt;/font&gt;&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr bgcolor=#99CCFF&gt; 
    &lt;td width="24%" height="8"&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif" \
size="4"&gt;&lt;b&gt;Groupes   d'études&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;
    &lt;td width="76%" height="8"&gt; &lt;font size="2" face="Verdana, Arial, Helvetica, \
                sans-serif"&gt;OLATECH 
      vous offre la possibilité d'adapter l'emploi du temps à la 
      disponibilité de l'apprenant en lui ouvrant ses portes tous les jours 
      de la semaine sauf les dimanches.&lt;br&gt;
      Matin &lt;font color="#99CCFF"&gt;.......&lt;/font&gt;&lt;font color="#FFCC99"&gt; &lt;/font&gt;:8 
      h à 12 h &lt;br&gt;
      Après-midi &lt;font color="#99CCFF"&gt;.&lt;/font&gt;&lt;font size="2" face="Verdana, \
Arial, Helvetica, sans-serif"&gt;:&lt;/font&gt;13   h à 15 h&lt;br&gt;
      Soir&lt;font color="#99CCFF"&gt;..........&lt;/font&gt; :15 h à 19h &lt;br&gt;
      Nuit&lt;font color="#99CCFF"&gt;..........&lt;/font&gt; :19 h à 21 h&lt;/font&gt;&lt;br&gt;
      &lt;div&gt; 
        &lt;p&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif" color="#000000" \
                size="2"&gt;Chaque 
          participant aux cours choisit son classmate (groupe d'étude) auquel 
          il participe hebdomadairement pendant des séances de deux \
heures.&lt;/font&gt;&lt;/p&gt;  &lt;/div&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr bgcolor=#FFCC99&gt; 
    &lt;td width="24%" height="185"&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif" \
size="4"&gt;&lt;b&gt;Approche   pédagogique &lt;/b&gt;&lt;/font&gt;&lt;/td&gt;
    &lt;td width="76%" height="185"&gt; 
      &lt;p&gt;&lt;font size="2" face="Verdana, Arial, Helvetica, sans-serif"&gt;Afin d'assurer 
        une bonne formation il est offert gracieusement à chaque apprenant 
        selon l'option de formation sollicitée : &lt;/font&gt;&lt;/p&gt;
      &lt;ul&gt;
        &lt;li&gt;&lt;font size="2" face="Verdana, Arial, Helvetica, sans-serif"&gt;&lt;b&gt;Des 
          manuels de formation :&lt;/b&gt;&lt;br&gt;
          1 - Mon Livre d'opération de saisie&lt;br&gt;
          2 - Mon Livre de correspondance et de communication en entreprise&lt;br&gt;
          3 - Mon Livre de Page Maker&lt;br&gt;
          4 - Mon Livre d'Internet (Tomes 1 et 2)&lt;br&gt;
          5 - Je câble mon cyber moi-même&lt;br&gt;
          6 - L'Architecture et Technologie de mon ordinateur&lt;br&gt;
          7 - Le montage et la configuration de mon Ordinateur&lt;br&gt;
          8 - mon manuel d'installation Windows et autres&lt;/font&gt;&lt;/li&gt;
        &lt;li&gt;&lt;font size="2" face="Verdana, Arial, Helvetica, sans-serif"&gt;&lt;b&gt;Des 
          CD-ROM d'installation&lt;/b&gt; de système d'exploitation et de logiciels 
          d'application&lt;/font&gt;&lt;/li&gt;
        &lt;li&gt;&lt;font size="2" face="Verdana, Arial, Helvetica, sans-serif"&gt;&lt;b&gt;Des 
          CD interactives&lt;/b&gt; (multimédia) d'apprentissage basés 
          sur des explications, démonstrations, exercices et corrections. 
          &lt;br&gt;
          En direct sur votre application bureautique, vous progressez en travaillant \
                
          à votre rythme tout en suivant la démarche pédagogique \
  proposé&lt;/font&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr bgcolor=#ffcc99&gt; 
    &lt;td width="24%" height=9 bgcolor="#99CCFF"&gt;&lt;b&gt;&lt;font face="Verdana, Arial, \
Helvetica, sans-serif" size="4"&gt;&lt;b&gt;&lt;font color="#000000"&gt;Dates&lt;/font&gt;&lt;/b&gt;   \
&lt;/font&gt;&lt;/b&gt;&lt;/td&gt;  &lt;td width="76%" height=9 bgcolor="#99CCFF"&gt; 
      &lt;table width="100%" border=1&gt;
        &lt;tbody&gt; 
        &lt;tr&gt; 
          &lt;td width="46%"&gt;&lt;font size="2" face="Verdana, Arial, Helvetica, \
sans-serif"&gt;&lt;b&gt;Inscription   valable jusqu'au&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;
          &lt;td width="54%"&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif" \
size="2"&gt;Vendredi   5 Octobre 2007 à 18 h&lt;/font&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt; 
          &lt;td width="46%"&gt;&lt;font size="2" face="Verdana, Arial, Helvetica, \
sans-serif"&gt;&lt;b&gt;Démarrage   des cours :&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;
          &lt;td width="54%"&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif" \
size="2"&gt;Lundi   8 Octobre 2007à 8 h&lt;/font&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;/tbody&gt; 
      &lt;/table&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr bgcolor=#FFCC99&gt; 
    &lt;td width="24%" height=2 bgcolor="#FFCC99"&gt; 
      &lt;div&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif" color="#ffffff" \
                size="4"&gt;&lt;b&gt;&lt;font color="#000000"&gt;Inscription 
        &lt;/font&gt;&lt;font color="#000000"&gt;&amp; Renseignements&lt;/font&gt;&lt;/b&gt; &lt;/font&gt;&lt;/div&gt;
    &lt;/td&gt;
    &lt;td width="76%" height=2 bgcolor="#FFCC99"&gt; 
      &lt;table width="100%" border=1&gt;
        &lt;tbody&gt; 
        &lt;tr&gt; 
          &lt;td width="16%" height=14&gt;&lt;font color="#000000" size="2" face="Verdana, \
                Arial, Helvetica, sans-serif"&gt;&lt;b&gt;Lieu&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;
          &lt;td height=14 colspan="2"&gt;&lt;font face="Verdana, Arial, Helvetica, \
                sans-serif" color="#000000" size="2"&gt;L'Institut 
            de formation OLA TECHNOLOGY, sis dans la vons face maternité Sainte 
            Cécile Cotonou Bénin&lt;/font&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt; 
          &lt;td width="16%" height=5 rowspan="3"&gt;&lt;font color="#000000" size="2" \
face="Verdana, Arial, Helvetica, sans-serif"&gt;&lt;b&gt;Contacts&lt;/b&gt;&lt;/font&gt;&lt;/td&gt;  &lt;td \
                width="15%" height=2&gt; 
            &lt;div&gt;&lt;font size="2" face="Verdana, Arial, Helvetica, sans-serif"&gt;Bureau 
              :&lt;/font&gt;&lt;/div&gt;
          &lt;/td&gt;
          &lt;td width="69%" height=2&gt;&lt;font size="2" face="Verdana, Arial, Helvetica, \
sans-serif"&gt;+229.21.32.30.83&lt;/font&gt;&lt;/td&gt;  &lt;/tr&gt;
        &lt;tr&gt; 
          &lt;td width="15%" height=2&gt;&lt;font size="2" face="Verdana, Arial, Helvetica, \
sans-serif"&gt;Mobiles   :&lt;/font&gt;&lt;/td&gt;
          &lt;td width="69%" height=-1&gt;&lt;font size="2" face="Verdana, Arial, Helvetica, \
sans-serif"&gt;+229.97.11.11.49   ou +229.95.40.41.11&lt;/font&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt; 
          &lt;td width="15%" height=5&gt;&lt;font size="2" face="Verdana, Arial, Helvetica, \
sans-serif"&gt;E-mail   :&lt;/font&gt;&lt;/td&gt;
          &lt;td width="69%" height=5&gt;&lt;font size="2" face="Verdana, Arial, Helvetica, \
                sans-serif"&gt;olabenin@yahoo.fr 
            ou tout simplement &lt;a \
href="http://olaong.africacomputing.org/contact.htm"&gt;&lt;b&gt;cliquez&lt;/b&gt;   \
&lt;b&gt;ici&lt;/b&gt;&lt;/a&gt;&lt;/font&gt;&lt;/td&gt;  &lt;/tr&gt;
        &lt;tr&gt; 
          &lt;td colspan="3" height=2&gt;&lt;font face="Verdana, Arial, Helvetica, sans-serif" \
                size="2"&gt;Mieux 
            nous découvrir alors accéder à notre site web 
            en cliquant ici : &lt;a \
href="http://olaong.africacomputing.org"&gt;&lt;b&gt;www.ola.fr.cc&lt;/b&gt;&lt;/a&gt;   &lt;/font&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;/tbody&gt; 
      &lt;/table&gt;
    &lt;/td&gt;
  &lt;/tr&gt;
  &lt;/tbody&gt; 
&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071006081907</emailId><senderName>Miss Nafi Babingi</senderName><senderEmail>nafi_babingi01@yahoo.co.uk</senderEmail><timestampReceived>2007-10-06 08:19:07-0400</timestampReceived><subject>Hello Dearest New friend.</subject><body>

Hi dear, 
  how are you today i hope that every things is ok with you as it is my great \
pleassure to contact you in having communication with you, please i wish you will \
have the desire with me so that we can get to know each other better and see what \
happened in future. i will be very happy if you can write me through my email for \
easiest communication and to know all about each other, and also give you my pictures \
and details about me, here is my email (nafi_babingui@yahoo.co.uk) i will be waiting \
to hear from you as i wish you all the best for your day. your new friend.
  Nafi. 
 
       
---------------------------------
 Too much spam?  Try Yahoo! Mail  and we'll help keep the junk out of your inbox. 


[Attachment #3 (text/html)]

&lt;div&gt;Hi dear, &lt;/div&gt;  &lt;div&gt;how are you today i hope that every things is ok with you \
as it is my great pleassure to contact you in having communication with you, please i \
wish you will have the desire with me so that we can get to know each other better \
and see what happened in future.&lt;br&gt;i will be very happy if you can write me through \
my email for easiest communication and to know all about each other, and also give \
you my pictures and details about me, here is my email (&lt;a \
href="mailto:nafi_babingui@yahoo.co.uk"&gt;nafi_babingui@yahoo.co.uk&lt;/a&gt;) i will be \
waiting to hear from you as i wish you all the best for your day.&lt;br&gt;your new \
friend.&lt;br&gt;  Nafi. &lt;/div&gt; &lt;p&gt; 


      &lt;hr size=1&gt; 
Too much spam? &lt;a href="http://us.rd.yahoo.com/mailuk/taglines/hotmail/inbox_junk/*http://us.rd.yahoo.com/evt=48524/*http://uk.docs.yahoo.com/mail/winter07.html"&gt; \
Try Yahoo! Mail &lt;/a&gt; and we'll help keep the junk out of your inbox. 


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071112201943</emailId><senderName>Thorsten Peter</senderName><senderEmail>thorsten.peter@googlemail.com</senderEmail><timestampReceived>2007-11-12 20:19:43-0400</timestampReceived><subject>loop-aes 3.2b and AMD64_ASM build problem</subject><body>

Hey all,

I have been trying to build latest loop-aes from source today on my 
AMD64 (Athlon 64 3000+) machine today and ran into these errors:

$ make AMD64_ASM=y X86_ASM=n
rm -r -f *.ko tmp-d-kbuild
mkdir tmp-d-kbuild
echo 'obj-m:=' &gt;&gt;tmp-d-kbuild/Makefile
cd tmp-d-kbuild &amp;&amp; ln -s ../loop.c-2.6.patched patched-loop.c &amp;&amp; ln -s 
../glue.c ../aes.h ../md5.h .
echo 'obj-m += loop.o' &gt;&gt;tmp-d-kbuild/Makefile
cd tmp-d-kbuild &amp;&amp; ln -s ../aes-amd64.S ../md5-amd64.S .
echo 'loop-y:=patched-loop.o glue.o aes-amd64.o md5-amd64.o' 
 &gt;&gt;tmp-d-kbuild/Makefile
echo 'EXTRA_CFLAGS:=      -DAMD64_ASM' &gt;&gt;tmp-d-kbuild/Makefile
cd /usr/src/linux-2.6.23.1 &amp;&amp; make 
SUBDIRS=/usr/src/work/loop-AES-v3.2b/tmp-d-kbuild modules
make[1]: Entering directory `/usr/src/linux-2.6.23.1'
  CC [M]  /usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/patched-loop.o
/usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/patched-loop.c: In function 
'loop_thread':
/usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/patched-loop.c:1019: warning: 
'x' may be used uninitialized in this function
  CC [M]  /usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/glue.o
  AS [M]  /usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.o
/usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.S: Assembler messages:
/usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.S:201: Error: bad 
register name `%rsi)'
/usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.S:202: Error: bad 
register name `%rsi)'
/usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.S:203: Error: bad 
register name `%rsi)'
/usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.S:204: Error: bad 
register name `%rsi)'
/usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.S:206: Error: bad 
register name `%rbp'
/usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.S:207: Error: bad 
register name `%rdi)'
/usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.S:208: Error: bad 
register name `%rdx'
/usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.S:209: Error: bad 
register name `%rdi)'
/usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.S:210: Error: bad 
register name `%rbx'
/usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.S:211: Error: bad 
register name `%r13'
/usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.S:212: Error: bad 
register name `%r14'
/usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.S:213: Error: bad 
register name `%r15'
/usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.S:215: Error: bad 
register name `%rbp)'
.
.
.


Build was started using:

make X86_ASM=n AMD64_ASM=y

Without giving those command line parameters build uses the X86 config, 
though my kernel (2.6.23.1) is configured for Athlon K8 in Processor 
Type and Features.

Anyone here using loop-aes with those AMD64 optimizations?

thanks for any help.

Thorsten

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071113060312</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-11-13 06:03:12-0400</timestampReceived><subject>Re: loop-aes 3.2b and AMD64_ASM build problem</subject><body>

Thorsten Peter wrote:
&gt; I have been trying to build latest loop-aes from source today on my
&gt; AMD64 (Athlon 64 3000+) machine today and ran into these errors:
[snip]
&gt;   AS [M]  /usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.o
&gt; /usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.S: Assembler messages:
&gt; /usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.S:201: Error: bad
&gt; register name `%rsi)'

To me it looks like your compiler/assembler/linker tool chain is creating 32
bit binaries by default. Correct?

And you compiled your kernel overriding ARCH= and/or CROSS_COMPILE= kernel
Makefile defaults. Correct?

On 2.6 kernels, loop-AES Makefile calls kernel build system to
compile/assemble/link kernel modules. It needs exact same ARCH= and/or
CROSS_COMPILE= defaults overridden on make command line as the ones that you
used to compile your kernel.

If above guess is not correct, then please provide more info about your
build environment:

1) Fully 64 bit distro, or 32 bit distro with 64 bit kernel?
2) What distro?
3) gcc and binutils versions?
4) Output of "id" command.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071113071238</emailId><senderName>Thorsten Peter</senderName><senderEmail>thorsten.peter@googlemail.com</senderEmail><timestampReceived>2007-11-13 07:12:38-0400</timestampReceived><subject>Re: loop-aes 3.2b and AMD64_ASM build problem</subject><body>

Hello Jari,

thanks for your quick reply.
Sorry, but I guess it's all me too blame. Should have done some more 
research before posting here ;-)
Indeed my box is running Debian Etch 32bit ... which in the first place 
explains my problems compiling with 64bit optimizations I guess ...
My quick guess was, that as long as I have CPU support for the K8 in the 
kernel, that I am able to use those assembler optimizations, which was 
obviously wrong.
Anyways, I will get a AMD X2 soon and then setup a new Debian AMD64 
system from scratch. With that I should be able to use your AMD64 code, 
right?

thanks again

Thorsten

Jari Ruusu wrote:
&gt; Thorsten Peter wrote:
&gt;   
&gt;&gt; I have been trying to build latest loop-aes from source today on my
&gt;&gt; AMD64 (Athlon 64 3000+) machine today and ran into these errors:
&gt;&gt;     
&gt; [snip]
&gt;   
&gt;&gt;   AS [M]  /usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.o
&gt;&gt; /usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.S: Assembler messages:
&gt;&gt; /usr/src/work/loop-AES-v3.2b/tmp-d-kbuild/aes-amd64.S:201: Error: bad
&gt;&gt; register name `%rsi)'
&gt;&gt;     
&gt;
&gt; To me it looks like your compiler/assembler/linker tool chain is creating 32
&gt; bit binaries by default. Correct?
&gt;
&gt; And you compiled your kernel overriding ARCH= and/or CROSS_COMPILE= kernel
&gt; Makefile defaults. Correct?
&gt;
&gt; On 2.6 kernels, loop-AES Makefile calls kernel build system to
&gt; compile/assemble/link kernel modules. It needs exact same ARCH= and/or
&gt; CROSS_COMPILE= defaults overridden on make command line as the ones that you
&gt; used to compile your kernel.
&gt;
&gt; If above guess is not correct, then please provide more info about your
&gt; build environment:
&gt;
&gt; 1) Fully 64 bit distro, or 32 bit distro with 64 bit kernel?
&gt; 2) What distro?
&gt; 3) gcc and binutils versions?
&gt; 4) Output of "id" command.
&gt;
&gt;   

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071006132059</emailId><senderName>Mikko Herranen</senderName><senderEmail>mikko.herranen@cs.helsinki.fi</senderEmail><timestampReceived>2007-10-06 13:20:59-0400</timestampReceived><subject>CTR and GCM</subject><body>

Hello,

I read about the pending addition of CTR on cryptodev log. I assume
CTR is generic support for counter mode algorithms. Is this correct?
When will CTR be available? Who is working on it?

The reason I'm asking is that I'm currently working on implementing
galois counter mode (GCM) in the cryptoapi and CTR would naturally have
a big impact on my work.

Thank you.

-- 
Mikko Herranen

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071007195524</emailId><senderName>lilian walker</senderName><senderEmail>lilywalker5@yahoo.co.in</senderEmail><timestampReceived>2007-10-07 19:55:24-0400</timestampReceived><subject>I NEED YOUR HELP PLS</subject><body>

Hello Dear,
I got your email contacts here in asylum camp where i currently reside for refuge on \
my going through a magazine and decided to contact you with faith for this help. My \
sources of your contact gave me the courage and confidence to contact you. It is my \
pleasure to contact you sir though I have not met with you before pleading you for \
this help, but i want you to consider it as the will of God for my knowing who you \
are.  I am Ms. lilian Walker 24 years old, the only daughter of the former minister \
for Defence and Interior in Sierra Leone Engr. Samuels Walker. There is this \
($5,500,000.00 DOLLARS) which my late father kept in a bank before he was \
assassinated by unknown persons from the rebels after the new political crisis in my \
country in 1994.  
Sir I waited for so long before I decided to recover the  money to start up my life \
in your country or anywhere save enough outside Africa for security of my life. I \
want you to help me claim and retrive the money from the bank with the documents I \
have here with me and transfer it into your personal account in your country for my \
future life purposes and on profitable investment. Please if you can be of assistance \
to me, I will be pleased for you tell me what you will be your offer out of the total \
money so I can use the rest to start up my life. Please Sir, I want you to know that \
it will require money according to the bank on my last discussion with the manager, \
this is the reason I cried unto you for Godly help to get this money out of the bank. \
 I await your soonest response through here if you can consider my plight and help me \
out.   
Your's Daughter,
Ms. Walker Lilian. 
       
---------------------------------
 DELETE button is history. Unlimited mail storage is just a click away.


[Attachment #3 (text/html)]

Hello Dear,&lt;BR&gt;I got your email contacts here in asylum camp where i currently reside \
for refuge on my going through a magazine and decided to contact you with faith for \
this help. My sources of your contact gave me the courage and confidence to contact \
you. It is my pleasure to contact you sir though I have not met with you before \
pleading you for this help, but i want you to consider it as the will of God for my \
knowing who you are. &lt;BR&gt;I am Ms. lilian Walker 24 years old, the only daughter of \
the former minister for Defence and Interior in Sierra Leone Engr. Samuels Walker. \
There is this ($5,500,000.00 DOLLARS) which my late father kept in a bank before he \
was assassinated by unknown persons from the rebels after the new political crisis in \
my country in 1994.&lt;BR&gt; &lt;BR&gt;Sir I waited for so long before I decided to recover \
the  money to start up my life in your country or anywhere save enough outside \
Africa for security of my life. I want you to help me claim and  retrive the money \
from the bank with the documents I have here with me and transfer it into your \
personal account in your country for my future life purposes and on profitable \
investment. Please if you can be of assistance to me, I will be pleased for you tell \
me what you will be your offer out of the total money so I can use the rest to start \
up my life. Please Sir, I want you to know that it will require money according to \
the bank on my last discussion with the manager, this is the reason I cried unto you \
for Godly help to get this money out of the bank.&lt;BR&gt; &lt;BR&gt;I await your soonest \
response through here if you can consider my plight and help me out. \
&lt;BR&gt; &lt;BR&gt;Your's Daughter,&lt;BR&gt;Ms. Walker Lilian. &lt;p&gt; 


      &lt;!--6--&gt;&lt;hr size=1&gt;&lt;/hr&gt; DELETE button is history. Unlimited mail storage is &lt;a \
href="http://in.rd.yahoo.com/tagline_mail_6/*https://edit.india.yahoo.com/config/eval_register"&gt;just \
a click away.&lt;/a&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071009231752</emailId><senderName>Karel Zak</senderName><senderEmail>kzak@redhat.com</senderEmail><timestampReceived>2007-10-09 23:17:52-0400</timestampReceived><subject>Re: loop-aes into busybox</subject><body>

On Sat, Sep 29, 2007 at 07:23:56PM +0300, Jari Ruusu wrote:
&gt; Alon Bar-Lev wrote:
&gt; &gt; The util-linux-ng cannot be built statically...
&gt; 
&gt; $ cp -dpR util-linux-ng-2.13-AES z
&gt; $ cd z
&gt; $ CC=gcc-3.3 CFLAGS="-O2 -Wall" LDFLAGS="-s -static" ./configure
&gt; [snip]
&gt; $ make SUBDIRS="mount"
&gt; [snip]
&gt; $ file mount/losetup mount/mount
&gt; mount/losetup: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), for \
&gt;                 GNU/Linux 2.2.0, statically linked, stripped
&gt; mount/mount:   ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), for \
&gt; GNU/Linux 2.2.0, statically linked, stripped 
&gt; &gt; So I guessed that loop-aes losetup enabled into busybox will be the
&gt; &gt; cleanest solution...
&gt; 
&gt; Last time I compiled busybox, I linked busybox and other programs with
&gt; uClibc. All program binaries were linked dynamically. I haven't tried that
&gt; with util-linux-ng.

  http://thread.gmane.org/gmane.linux.utilities.util-linux-ng/706/focus=776

    Karel

-- 
 Karel Zak  &lt;kzak@redhat.com&gt;

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071010023753</emailId><senderName>"3XHQ Forums Mailer"</senderName><senderEmail>webmaster@xxxhq.com</senderEmail><timestampReceived>2007-10-10 02:37:53-0400</timestampReceived><subject>Your login details for 3XHQ Forums</subject><body>

Hello,

You have requested to reset your password on 3XHQ Forums forums because you have \
forgotten your password. If you did not request this, please ignore it. It will \
expire and become useless in 24 hours time.

To reset your password, please visit the following page:
http://www.xxxhq.com/vb/member.php?a=pwd&amp;u=475954&amp;i=70180477

When you visit that page, your password will be reset, and the new password will be \
emailed to you.

Your username is: 17101966

To edit your profile, go to this page:
http://www.xxxhq.com/vb/member.php?action=editprofile

Yours,
3XHQ Forums team

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071010071558</emailId><senderName>"3XHQ Forums Mailer"</senderName><senderEmail>webmaster@xxxhq.com</senderEmail><timestampReceived>2007-10-10 07:15:58-0400</timestampReceived><subject>Your new password for 3XHQ Forums</subject><body>

Hello,

As you requested, your password has now been reset. Your new details are as follows:

Username: 17101966
Password: 11844625

To change your password, please visit this page:
http://www.xxxhq.com/vb/member.php?action=editpassword

Regards,
3XHQ Forums Team

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071114180419</emailId><senderName>"Leisner, Martin"</senderName><senderEmail>martin.leisner@xerox.com</senderEmail><timestampReceived>2007-11-14 18:04:19-0400</timestampReceived><subject>RE: linux 2.6 driver (patch included)</subject><body>

1) there's no loop.c-2.6.original available -- that's my major complaint
-- so I can't see where it came from (with all the kernel changes).
There were some api changes I saw, but there seemed to be some "other
changes" -- for example:

@@ -709,6 +734,9 @@
        sector_t IV;
        struct page *pg;

+       if(!bio-&gt;bi_size)
+               return 0;
+
        pos = ((loff_t) bio-&gt;bi_sector &lt;&lt; 9) + lo-&gt;lo_offset;
        buf = page_address(LDE_lo_bio_free0-&gt;bi_io_vec[0].bv_page);
        IV = bio-&gt;bi_sector;

I'm not sure if that's a reason to upgrade or not...

2) Some stuff had to be cleaned up -- this was just a feeler to see if 
anyone had a use for this...

I'm not sure about the future of loopAES with all the other methods
of encryption in the kernel (I started working on this several months
ago -- and since we used loopAES in 2.4 machines, I was asked to get it
working on 2.6).  Note I'm new to this...

Another advantage is I had a framework to load multiple loopAES drivers
at the same time (which does different things -- for example, to compare
the
C code and the assembler code on x86).

Just replacing should compile it as device loop/major 7 -- but this can
be
changed at compile and or runtime...

Here's the patch with the extraneous stuff -- against 2.3a...feel free
to 
use/comment/flush (I didn't see any patches on sourceforge in the
patchmanager,
 so I wasn't sure if that was a place to put patches...)

marty

-----Original Message-----
From: Jari Ruusu [mailto:jariruusu@users.sourceforge.net] 
Sent: Wednesday, November 14, 2007 9:46 AM
To: Leisner, Martin
Subject: Re: linux 2.6 driver

"Leisner, Martin" wrote:
&gt; There's no loop.c-2.6.original in the 3.2a/3.2b distributions.
&gt; 
&gt; I'm using 3.2a and made some mods to the driver.
&gt; 
&gt; Looking at linus's git tree, there were substantial changes made to
&gt; loop.c since May.
&gt; 
&gt; FYI:
&gt; diff -u loop-AES-v3.2a/loop.c-2.6.patched
&gt; loop-AES-v3.2b/loop.c-2.6.patched  | diffstat
&gt;  loop.c-2.6.patched |   89
&gt; +++++++++++++++++++++++++++++++++++++++++++++--------
&gt;  1 files changed, 77 insertions(+), 12 deletions(-)
&gt; 
&gt; I've modified the loop driver so it can run alongside the standard
loop
&gt; driver in the kernel (this was when systems had them build in instead
of
&gt; modulized).
&gt; 
&gt; I had the ability to:
&gt;       default to another name besides /dev/loop* (I used loopAES)
&gt;       runtime assignment of major numbers (so there's no conflict with
&gt; the
&gt; standard loop)
&gt; 
&gt; This was easier than to recompile/modify all the kernels I was using
&gt; (and tell everyone I was supporting they "had to run a new kernel".

[ This is private email, but feel free to CC a public mailing list
  on your possible reply. ]

I'm not sure how to interpret your message. It could mean:

1) You are unhappy with amount of changes to loop.c-2.6.patched file?
   - Most of those changes are needed because of block layer interface
     changes on linux-2.6.24-rc and later kernels. It would be cool if
     interfaces didn't change, but they did.

2) You wanted me and/or others to look at your changes?
   - Your email didn't include a patch.

3) You are making public statement that you can hack code?
   - Fine. Nothing wrong with that.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9
DD

["loop.c.diff" (application/octet-stream)]

--- loop.c	2007/10/03 19:40:09	1.1
+++ loop.c	2007/10/05 19:14:35
@@ -62,6 +62,16 @@
  * Added support for removing offset from IV computations.
  * Jari Ruusu, September 21 2003
  *
+ * Added a way to have a seperate loop driver (if the kernel has on built-in).
+ * Also you can run multiple implementation of the loop driver.
+ * Added a option:
+ * 	 loopname (default to loop)
+ *	 major    (default to 7, if 0, use dynamic)
+ * Added a compile time option:
+ * 	NO_EXPORT_SYMBOLS
+ * to negate export symbols. 
+ * Marty Leisner   &lt;martin.leisner@xerox.com&gt;
+ *
  *
  * Still To Fix:
  * - Advisory locking is ignored here.
@@ -105,6 +115,11 @@
 
 #include &lt;asm/uaccess.h&gt;
 
+#ifdef NO_EXPORT_SYMBOLS
+#undef EXPORT_SYMBOL
+#define EXPORT_SYMBOL(x)
+#endif
+
 #if !defined(LO_FLAGS_DO_BMAP)
 # define LO_FLAGS_DO_BMAP 0x20000
 #endif
@@ -145,6 +160,25 @@
 module_param(max_loop, int, 0);
 MODULE_PARM_DESC(max_loop, "Maximum number of loop devices (1-256)");
 
+
+#ifndef DEFAULT_LOOP_DEVICE
+#define DEFAULT_LOOP_DEVICE  7
+#endif
+
+static int loop_major = DEFAULT_LOOP_DEVICE;
+module_param(loop_major, int, 0);
+MODULE_PARM_DESC(loop_major, "Default loop device major number, 0 to autospecify");
+
+#ifndef DEFAULT_LOOP_NAME
+#define DEFAULT_LOOP_NAME "loop"
+#endif
+
+static char *loop_name = DEFAULT_LOOP_NAME;
+module_param(loop_name, charp, 0);
+MODULE_PARM_DESC(loop_name, "loop device name");
+
+
+
 static struct gendisk **disks;
 
 /*
@@ -234,6 +268,7 @@
 module_param(lo_nice, int, 0);
 MODULE_PARM_DESC(lo_nice, "Loop thread scheduler nice (0 ... -20)");
 
+
 struct loop_bio_extension {
 	struct bio		*bioext_merge;
 	struct loop_device	*bioext_loop;
@@ -1323,6 +1358,7 @@
 	if (S_ISBLK(inode-&gt;i_mode)) {
 		lo_device = inode-&gt;i_bdev;
 		if (lo_device == bdev) {
+			printk("EBUSY at %d\n", __LINE__);
 			error = -EBUSY;
 			goto out_putf;
 		}
@@ -1436,7 +1472,7 @@
 	/* 2.6.19 and newer kernels */
 	{
 		struct task_struct *t;
-		t = kthread_create(loop_thread, lo, "loop%d", lo-&gt;lo_number);
+		t = kthread_create(loop_thread, lo, "%s%d", loop_name, lo-&gt;lo_number);
 		if (IS_ERR(t)) {
 			error = PTR_ERR(t);
 			goto out_mapping;
@@ -1938,12 +1974,16 @@
  * And now the modules code and kernel interface.
  */
 MODULE_LICENSE("GPL");
+MODULE_DESCRIPTION("loopAES driver, hacked marty leisner");
+
 
+#if 0
 #if (LINUX_VERSION_CODE &gt;= 0x20601) || !defined(OLD_REQUEST_MODULE_INTERFACE)
 MODULE_ALIAS_BLOCKDEV_MAJOR(LOOP_MAJOR);
 #else
 MODULE_ALIAS("block-major-7");
 #endif
+#endif
 
 int loop_register_transfer(struct loop_func_table *funcs)
 {
@@ -1978,9 +2018,11 @@
 EXPORT_SYMBOL(loop_register_transfer);
 EXPORT_SYMBOL(loop_unregister_transfer);
 
+
 int __init loop_init(void)
 {
 	int	i;
+	int     num;
 
 	if ((max_loop &lt; 1) || (max_loop &gt; 256)) {
 		printk(KERN_WARNING "loop: invalid max_loop (must be between"
@@ -1988,8 +2030,14 @@
 		max_loop = 8;
 	}
 
-	if (register_blkdev(LOOP_MAJOR, "loop"))
+	num = register_blkdev(loop_major, loop_name);
+	if(num &lt; 0)
 		return -EIO;
+	if(loop_major == 0)
+		loop_major = num;
+
+	// printk("loop major = %d\n", loop_major);
+
 
 	loop_dev_ptr_arr = kmalloc(max_loop * sizeof(struct loop_device *), GFP_KERNEL);
 	if (!loop_dev_ptr_arr)
@@ -2047,10 +2095,10 @@
 		lo-&gt;lo_queue = disk-&gt;queue;
 		spin_lock_init(&amp;LDE_lo_ioctl_spin);
 		init_waitqueue_head(&amp;LDE_lo_ioctl_wait);
-		disk-&gt;major = LOOP_MAJOR;
+		disk-&gt;major = loop_major;
 		disk-&gt;first_minor = i;
 		disk-&gt;fops = &amp;lo_fops;
-		sprintf(disk-&gt;disk_name, "loop%d", i);
+		sprintf(disk-&gt;disk_name, "%s%d", loop_name, i);
 #ifdef CONFIG_DEVFS_FS
 		sprintf(disk-&gt;devfs_name, "loop/%d", i);
 #endif
@@ -2076,7 +2124,7 @@
 out_mem2:
 	kfree(loop_dev_ptr_arr);
 out_mem1:
-	unregister_blkdev(LOOP_MAJOR, "loop");
+	unregister_blkdev(loop_major, loop_name);
 	printk(KERN_ERR "loop: ran out of memory\n");
 	return -ENOMEM;
 }
@@ -2095,7 +2143,7 @@
 #ifdef CONFIG_DEVFS_FS
 	devfs_remove("loop");
 #endif
-	unregister_blkdev(LOOP_MAJOR, "loop");
+	unregister_blkdev(loop_major, loop_name);
 	kfree(disks);
 	kfree(loop_dev_ptr_arr);
 

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071015134337</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-10-15 13:43:37-0400</timestampReceived><subject>Encrypted swap on openSuSE 10.3 64-bit</subject><body>

Hello!

Last week I installed openSuSE 10.3 (64-bit) on a spare hard drive for testing. Now \
the setup of an encrypted swap partition is supported as part of the installation \
process. However, encrypting the entire drive still remains fancywork. The installer \
asks for a password, no keys are generated for external storage. When booting, the \
password has to be entered in order to access the swap partition. Below is the result \
of "less -f /dev/sda1" which serves as encrypted swap.


LUKS272276^@^Aaes^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@cbc-essiv:sha256^@^@^@^@
 ^@^@^@^@^@^@^@^@^@^@^@^@sha1^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^D^H^@^@^@
 ^P^Y^H^]a2323239265217*^V363311356305^W362230375300222^Z220.^BiY367207334371255&lt;U+0527&gt;$`^V314327*6
 +306w3615301K200^Y^@^@^@
bb4ef524-30f7-4358-b235-6487e7b82514^@^@^@^@^@254q363^@^E362256|343^G314U367236356
[...]

My eyes have seen enough at this point. openSuSE provides your attackers with crucial \
information. At first glance the encryption via LUKS using AES in cbc-essiv mode with \
some sha256 hash is revealed. From now on you might be target for further \
interrogation and torture. This posting is meant as a notice only.

Kind regards,
Peter
-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071018205422</emailId><senderName>Joy Latten</senderName><senderEmail>latten@us.ibm.com</senderEmail><timestampReceived>2007-10-18 20:54:22-0400</timestampReceived><subject>Re: GCM &amp; CTR</subject><body>

This is a multipart message in MIME format.
--=_alternative 0072995B86257378_=
Content-Type: text/plain; charset="US-ASCII"

Mikko Herranen &lt;mikko.herranen@cs.helsinki.fi&gt; wrote on 10/18/2007 
03:22:43 PM:

&gt; Hello,
&gt; 
&gt; We've been wondering about a slight compatibility glitch between
&gt; CTR and GCM with Joy Latten. As CTR and GCM are very similar, the
&gt; way to go with GCM is obviously to implement it on top of CTR.
&gt; The problem is that CTR and GCM use different counter portion
&gt; values for the first encrypted plaintext block. (They both start
&gt; at 1 but GCM uses the first value for authentication.)
&gt; 
&gt; How to communicate the different value to CTR? The best way seems to be
&gt; to spawn CTR as ctr(alg,0,16) in GCM and pass the contents
&gt; of the entire counter block in the IV. But then the size of the
&gt; counter portion will be set to 0 in CTR. We could modify CTR to
&gt; set the size of the counter portion to blocksize whenever
&gt; ivsize == blocksize. Or we could introduce an additional template
&gt; parameter for specifying the counter portion size. The former is
&gt; the easiest way to go if embedding a bit of GCM-specific code
&gt; inside CTR module is not a problem. Any opinions on this?
&gt; 

I think the change to CTR would be simple. 
If noncesize + ivsize == blocksize, then use
entire counterblock as counter and pass to 
ctr_inc_quad(). Currently, we just fail
if noncesize + ivsize == blocksize. 

Let me know if this sounds ok, and I will
code it. 

Regards,
Joy



--=_alternative 0072995B86257378_=
Content-Type: text/html; charset="US-ASCII"


&lt;br&gt;&lt;tt&gt;&lt;font size=2&gt;Mikko Herranen &lt;mikko.herranen@cs.helsinki.fi&gt;
wrote on 10/18/2007 03:22:43 PM:&lt;br&gt;
&lt;br&gt;
&gt; Hello,&lt;br&gt;
&gt; &lt;br&gt;
&gt; We've been wondering about a slight compatibility glitch between&lt;br&gt;
&gt; CTR and GCM with Joy Latten. As CTR and GCM are very similar, the&lt;br&gt;
&gt; way to go with GCM is obviously to implement it on top of CTR.&lt;br&gt;
&gt; The problem is that CTR and GCM use different counter portion&lt;br&gt;
&gt; values for the first encrypted plaintext block. (They both start&lt;br&gt;
&gt; at 1 but GCM uses the first value for authentication.)&lt;br&gt;
&gt; &lt;br&gt;
&gt; How to communicate the different value to CTR? The best way seems
to be&lt;br&gt;
&gt; to spawn CTR as ctr(alg,0,16) in GCM and pass the contents&lt;br&gt;
&gt; of the entire counter block in the IV. But then the size of the&lt;br&gt;
&gt; counter portion will be set to 0 in CTR. We could modify CTR to&lt;br&gt;
&gt; set the size of the counter portion to blocksize whenever&lt;br&gt;
&gt; ivsize == blocksize. Or we could introduce an additional template&lt;br&gt;
&gt; parameter for specifying the counter portion size. The former is&lt;br&gt;
&gt; the easiest way to go if embedding a bit of GCM-specific code&lt;br&gt;
&gt; inside CTR module is not a problem. Any opinions on this?&lt;br&gt;
&gt; &lt;/font&gt;&lt;/tt&gt;
&lt;br&gt;
&lt;br&gt;&lt;tt&gt;&lt;font size=2&gt;I think the change to CTR would be simple. &lt;/font&gt;&lt;/tt&gt;
&lt;br&gt;&lt;tt&gt;&lt;font size=2&gt;If noncesize + ivsize == blocksize, then use&lt;/font&gt;&lt;/tt&gt;
&lt;br&gt;&lt;tt&gt;&lt;font size=2&gt;entire counterblock as counter and pass to &lt;/font&gt;&lt;/tt&gt;
&lt;br&gt;&lt;tt&gt;&lt;font size=2&gt;ctr_inc_quad(). Currently, we just fail&lt;/font&gt;&lt;/tt&gt;
&lt;br&gt;&lt;tt&gt;&lt;font size=2&gt;if noncesize + ivsize == blocksize. &lt;/font&gt;&lt;/tt&gt;
&lt;br&gt;
&lt;br&gt;&lt;tt&gt;&lt;font size=2&gt;Let me know if this sounds ok, and I will&lt;/font&gt;&lt;/tt&gt;
&lt;br&gt;&lt;tt&gt;&lt;font size=2&gt;code it. &lt;/font&gt;&lt;/tt&gt;
&lt;br&gt;
&lt;br&gt;&lt;tt&gt;&lt;font size=2&gt;Regards,&lt;/font&gt;&lt;/tt&gt;
&lt;br&gt;&lt;tt&gt;&lt;font size=2&gt;Joy&lt;/font&gt;&lt;/tt&gt;
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
--=_alternative 0072995B86257378_=--

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071023080008</emailId><senderName>Antonio Escander</senderName><senderEmail>virus99@softhome.net</senderEmail><timestampReceived>2007-10-23 08:00:08-0400</timestampReceived><subject>My test</subject><body>

Hello linux-crypto,

  I like this mail list

-- 
Best regards,
 Antonio                          mailto:virus99@SoftHome.net


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071024180412</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-10-24 18:04:12-0400</timestampReceived><subject>Re: build failure for 2.6.24-rc1</subject><body>

markus reichelt wrote:
&gt; build failure for 2.6.24-rc1

I will upload new version of loop-AES after I get it tested. Maybe tomorrow.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071025183632</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-10-25 18:36:32-0400</timestampReceived><subject>Announce loop-AES-v3.2b file/swap crypto package</subject><body>

loop-AES changes since previous release:
- Fixed compatibility detection problem involving separate obj/source trees.
- Fixed request size problem on unencrypted device backed USB device.
- Added initramfs type initrd build option to build-initrd.sh script. Patch
  from Fix pr0gress0r AT ngs.ru
- Added gcc version override option to build-initrd.sh script.
- Fixed losetup -P cleartext key option which always failed to work and
  printed error message saying so.
- Added util-linux-ng patch.
- Worked around block layer interface breakage on linux-2.6.24-rc1 kernel.

bzip2 compressed tarball is here:

    http://dl.sourceforge.net/sourceforge/loop-aes/loop-AES-v3.2b.tar.bz2
    md5sum 2c5642ccfa1a780ef4bd76eb873076aa

    http://dl.sourceforge.net/sourceforge/loop-aes/loop-AES-v3.2b.tar.bz2.sign

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071029032844</emailId><senderName>Miss Alexina Williams</senderName><senderEmail>alexina_williams09@yahoo.fr</senderEmail><timestampReceived>2007-10-29 03:28:44-0400</timestampReceived><subject>Hello to my dearest new friend</subject><body>

Hi dearest friend,
  
how are you today? i hope that every things is ok with you as is my great pleassure \
to contact you in having communication with you, please i wish that you will have the \
desire with me so that we can get to know each other better and see what happened in \
future.  
I will be very happy if you can write me through my email for easiest communication \
and to know all about each other, and also give you my pictures, here is my email \
(alexina_williams@yahoo.fr) i will be waiting to hear from you as i wish you all the \
best for your day.  
yours new friend.
Miss Alexina.

       
---------------------------------
 Découvrez le blog Yahoo! Mail : dernières nouveautés, astuces, conseils.. et vos \
réactions !


[Attachment #3 (text/html)]

&lt;DIV&gt;&lt;IMG src="http://gfx1.hotmail.com/mail/w2/pr02/emoticons/heart.gif"&gt;Hi dearest \
friend,&lt;IMG src="http://gfx1.hotmail.com/mail/w2/pr02/emoticons/heart_broken.gif"&gt;&lt;/DIV&gt; \
&lt;DIV&gt;&lt;BR&gt;how are you today? i hope that every things is ok with you as is my \
great pleassure to contact you in having communication with you, please i wish that \
you will have the desire with me so that we can get to know each other better and see \
what happened in future.&lt;/DIV&gt;  &lt;DIV&gt;&lt;BR&gt;I will be very happy if you can write \
me through my email for easiest communication and to know all about each other, and \
also give you my pictures, here is my email (&lt;A \
href="http://fr.f276.mail.yahoo.com/ym/Compose?To=alexina_williams@yahoo.fr" \
target=_blank rel=nofollow ymailto="mailto:alexina_williams@yahoo.fr"&gt;&lt;STRONG&gt;&lt;FONT \
color=#60bf00&gt;alexina&lt;FONT \
color=#111111&gt;_&lt;/FONT&gt;williams@yahoo.fr&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/A&gt;) i will be waiting to \
hear from you as i wish you all the best for your day.&lt;/DIV&gt;   &lt;DIV&gt;&lt;BR&gt;yours new \
friend.&lt;BR&gt;Miss Alexina.&lt;IMG \
src="http://us.i1.yimg.com/us.yimg.com/i/mesg/tsmileys2/40.gif"&gt;&lt;IMG \
src="http://gfx1.hotmail.com/mail/w2/pr02/emoticons/rose_wilted.gif"&gt;&lt;/DIV&gt;&lt;p&gt; 


      &lt;hr size="1"&gt; 
Découvrez &lt;a href="http://blog.mail.yahoo.fr"&gt;le blog Yahoo! Mail&lt;/a&gt; : dernières \
nouveautés, astuces, conseils.. et vos réactions !


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071031062606</emailId><senderName>"zita zoraida herrero duque"</senderName><senderEmail>floresypajaros@gmail.com</senderEmail><timestampReceived>2007-10-31 06:26:06-0400</timestampReceived><subject>con mucho amor</subject><body>

*=A1EST=C1S A TIEMPO!*

Aun est=E1s a tiempo; aprovecha la oportunidad. Adquiere hoy una gloriosa
herencia incorruptible en el cielo (1 Pedro 1: 4).



No te quedes sin su amoroso regalo. Este es de valor incalculable. Se trata
de lo m=E1s importante para ti. =A1Contiene felicidad y vida eterna!



Obtenlo ya de su mano, a cambio de nada. Procl=E1mate salvado por fe  (Efes=
ios
2: 8 y 9). El ha dicho que as=ED lo ser=EDas. Es Dios, y no puede mentir
(N=FAmeros 23: 19).



T=F3male la palabra; =E9l te ofrece la salvaci=F3n por amor. *"Porque de ta=
l
manera am=F3 Dios al mundo, (a toda la gente), que nos ha dado a su Hijo
unig=E9nito (Jes=FAs), para que todo aquel que en =E9l cree, no se pierda (=
en el
infierno), mas tenga vida eterna  (en el cielo)". *(Juan 3: 16).* *



Di: *"Se=F1or Jes=FAs, perd=F3name y ven a mi coraz=F3n; te recibo por salv=
ador y
Se=F1or de mi vida *. *=A1Gracias por salvarme!  Am=E9n".*



*Lee la Biblia para ser sabio, cr=E9ela para ser salvo y pract=EDcala para =
ser
santo. *

*Asiste a una iglesia cristiana, cuya autoridad sea la Biblia y Jesucristo
sea predicado. *

*  *

*BIBLIA INTERACTIVA, VERSI=D3N EXACTA A LA ORIGINAL. REINA-VALERA DE 1960 *

*http://www.gentle.org/biblia/  *



  *M=C1NDALO A TODO EL MUNDO!!! PERO NO LO REENV=CDES **, SELECCIONA Y COPI=
A
ESTE MENSAJE (Ctrl. + C) Y P=C9GALO PARA ENVIAR (Ctrl. + V), LUEGO AGREGA T=
U
NOMBRE A LA LISTA **(al final del mensaje) **Y ENV=CDALO!!!.** *

*CUANDO LA LISTA LLEGUE AL N=DAMERO 500 ENV=CDALO A: ***

*salvacion.por.amor@gmail.com &lt;salvacion.cuba@gmail.com&gt;*

*Y SE COMENZAR=C1 UNA NUEVA LISTA.* **

*QUE DIOS TE BENDIGA MUCHO!!!** *

*POR FAVOR, QUE NO SE PARE EN TI Y CREELO PORQUE ES LA VERDAD QUE TE HAR=C1
LIBRE (JUAN 8: 32); Y AUNQUE NO LO CREAS, M=C1NDALO DE TODAS FORMAS. DEJA A
OTRO LA OPORTUNIDAD DE ELEGIR SU FUTURO Y TENER LA SALVACI=D3N CON VIDA ETE=
RNA
EN EL REINO DE LOS CIELOS (LUCAS 11: 52). *

 ******************************************

*YOU ARE IN TIME!** *

You still have time; don't lose this opportunity. Acquire now a glorious,
incorruptible inheritance in heaven (1 Peter 1: 4).



Don't stay without his loving gift. This is of incalculable value. This is
the most important thing for you.  It contains happiness and eternal life!



Obtain it now from his hands in exchange for nothing, proclaim yourself
saved by faith ( Ephesians 2: 8 and 9). He said this would be so; he is God=
,
and he cannot lie (Numbers 23: 19).



Believe his word; he is offering you salvation for love. *"For God so loved
the world (everybody), that he gave his only begotten Son (Jesus), that
whoever believes in him should not perish (in hell), but have everlasting
life (in heaven)" *(John 3: 16).



Say: *"Lord Jesus, forgive me and come to my heart. I receive you as Saviou=
r
and Lord of my life.  Thank you for saving me!  Amen". *



*Read the Bible to be wise, believe it to be saved and practice it to be
holy. *

*Join a Christian church, where the authority is the Bible and Jesus Christ
is preached.*



*INTERACTIVE BIBLE, KING JAMES VERSION *****

http://etext.virginia.edu/rsv.browse.html

*  *

*SEND TO EVERY BODY!!! BUT DON'T USE FORWARD, SELECT AND COPY THIS MESSAGE
(Ctrl. + C), AND STICK TO SEND IT (Ctrl. + V), THEN, ADD YOUR NAME TO
THE LIST **(At the end of this message)** AND SEND IT!!!   ***

*WHEN THE LIST GET TO THE NUMBER 500, SEND IT TO THIS E-MAIL: ***

*salvacion.por.amor@gmail.com** *

*AND A NEW LIST WILL START. ***

*GOD BLESS YOU GREATLY!!! ***

*PLEASE, DON'T LET THIS MESSAGE STOP IN YOU, AND BELIEVE IT, BECAUSE IT' S
THE TRUTH, AND THE TRUTH SHALL MAKE YOU FREE (JOHN 8: 32); AND EVEN IF YOU
DON'T BELIEVE IT, SEND IT ANYWAY. LET OTHERS DECIDE THEIR EVERLASTING FUTUR=
E
AND OBTAIN SALVATION WITH EVERLASTING LIFE IN THE KINGDOM OF HEAVEN (LUKE
11: 52). ***

* *

*LISTA-LIST:*

001. Jesucristo, Reino de los Cielos

002. Isaias Arjarjai, Mexico
003.

[Attachment #3 (text/html)]

&lt;p style="TEXT-ALIGN: center" align="center"&gt;&lt;b&gt;&lt;span lang="ES" style="FONT-SIZE: \
36pt; COLOR: black; FONT-FAMILY: Verdana"&gt;¡ESTÁS A TIEMPO!&lt;/span&gt;&lt;/b&gt; &lt;span lang="ES" \
style="FONT-SIZE: 36pt; FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p style="TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span lang="ES" style="FONT-SIZE: \
14pt; COLOR: black; FONT-FAMILY: Verdana"&gt;Aun estás a tiempo; aprovecha la \
oportunidad. Adquiere hoy una gloriosa herencia incorruptible en el cielo (1 \
Pedro 1: 4).  &lt;/span&gt;&lt;span lang="ES" style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span lang="ES" style="FONT-SIZE: \
14pt; COLOR: black; FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-INDENT: \
22.7pt; TEXT-ALIGN: justify"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: black; \
FONT-FAMILY: Verdana"&gt;No te quedes sin su amoroso regalo. Este es de valor \
incalculable. Se trata de lo más importante para ti. ¡Contiene felicidad y vida \
eterna!  &lt;/span&gt;&lt;span lang="ES" style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span lang="ES" style="FONT-SIZE: \
14pt; COLOR: black; FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-INDENT: \
22.7pt; TEXT-ALIGN: justify"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: black; \
FONT-FAMILY: Verdana"&gt;Obtenlo ya de su mano, a cambio de nada. Proclámate salvado por \
fe  (Efesios 2: 8 y 9). El ha dicho que así lo serías. Es Dios, y no puede \
mentir  (Números 23: 19).  &lt;/span&gt;&lt;span lang="ES" style="FONT-FAMILY: \
Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span \
lang="ES" style="FONT-SIZE: 14pt; COLOR: black; FONT-FAMILY: \
Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span \
lang="ES" style="FONT-SIZE: 14pt; COLOR: black; FONT-FAMILY: Verdana"&gt;Tómale la \
palabra; él te ofrece la salvación por amor. &lt;em&gt;&lt;span style="FONT-FAMILY: Verdana"&gt; \
"Porque de tal manera amó Dios al mundo, (a toda la gente), que nos ha dado a su \
Hijo unigénito (Jesús), para que todo aquel que en él cree, no se pierda (en el \
infierno), mas tenga vida eterna  (en el cielo)".  &lt;/span&gt;&lt;/em&gt;(Juan 3: \
16).&lt;em&gt;&lt;span style="FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;span lang="ES" \
style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-INDENT: 22.7pt; TEXT-ALIGN: \
justify"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: black; FONT-FAMILY: \
Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span \
lang="ES" style="FONT-SIZE: 14pt; COLOR: black; FONT-FAMILY: Verdana"&gt;Di: \
&lt;b&gt;"Señor Jesús, perdóname y ven a mi corazón; te recibo por salvador y Señor de \
mi vida  &lt;/b&gt;. &lt;b&gt;¡Gracias por salvarme!  Amén".&lt;/b&gt;&lt;/span&gt;&lt;span lang="ES" \
style="COLOR: black; FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;span lang="ES" \
style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-INDENT: 0.3in; TEXT-ALIGN: \
justify"&gt;&lt;span lang="ES" style="FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p \
class="EC_MsoNormal" style="TEXT-ALIGN: center" align="center"&gt;&lt;b&gt;&lt;span lang="ES" \
style="FONT-SIZE: 9pt; COLOR: #333300; FONT-FAMILY: Verdana"&gt;Lee la Biblia para ser \
sabio, créela para ser salvo y practícala para ser santo.  &lt;/span&gt;&lt;/b&gt;&lt;span lang="ES" \
style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-ALIGN: \
center" align="center"&gt;&lt;b&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: #333300; \
FONT-FAMILY: Verdana"&gt;Asiste a una iglesia cristiana, cuya autoridad sea la Biblia y \
Jesucristo sea predicado.  &lt;/span&gt;&lt;/b&gt;&lt;span lang="ES" style="FONT-FAMILY: \
Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-ALIGN: center" \
align="center"&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt; &lt;/span&gt; &lt;/strong&gt;&lt;span lang="ES" style="FONT-FAMILY: \
Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-ALIGN: center" \
align="center"&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-SIZE: 13.5pt; COLOR: #333300; \
FONT-FAMILY: Verdana"&gt;BIBLIA INTERACTIVA, VERSIÓN EXACTA A LA ORIGINAL. REINA-VALERA \
DE 1960  &lt;/span&gt;&lt;/strong&gt;&lt;span lang="ES" style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="EC_MsoNormal" style="TEXT-ALIGN: center" align="center"&gt;&lt;b&gt;&lt;span lang="ES" \
style="FONT-SIZE: 9pt; COLOR: #333300; FONT-FAMILY: Verdana"&gt;&lt;a \
href="http://www.gentle.org/biblia/" target="_blank"&gt;&lt;font color="#0068cf"&gt; \
http://www.gentle.org/biblia/&lt;/font&gt;&lt;/a&gt;  &lt;/span&gt;&lt;/b&gt;&lt;span lang="ES" \
style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-ALIGN: \
center" align="center"&gt;&lt;span lang="ES" style="FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; \
&lt;p class="EC_MsoNormal" style="TEXT-ALIGN: center" align="center"&gt;&lt;span lang="ES" \
style="FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;span lang="ES" style="COLOR: red; \
FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: \
red; FONT-FAMILY: Verdana"&gt; MÁNDALO A TODO EL MUNDO!!! PERO NO LO REENVÍES \
&lt;/span&gt;&lt;/strong&gt;&lt;tt&gt;&lt;b&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt;, SELECCIONA Y COPIA ESTE MENSAJE (Ctrl. + C) Y PÉGALO PARA \
ENVIAR (Ctrl. + V), LUEGO AGREGA TU NOMBRE A LA LISTA  &lt;/span&gt;&lt;/b&gt;&lt;/tt&gt;&lt;tt&gt;&lt;b&gt;&lt;span \
lang="ES" style="FONT-SIZE: 9pt; COLOR: #660000; FONT-FAMILY: Verdana"&gt;(al final del \
mensaje) &lt;/span&gt;&lt;/b&gt;&lt;/tt&gt;&lt;tt&gt;&lt;b&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt;Y ENVÍALO!!!. &lt;/span&gt;&lt;/b&gt;&lt;/tt&gt;&lt;tt&gt;&lt;b&gt;&lt;span lang="ES" \
style="FONT-SIZE: 10pt; COLOR: red"&gt; &lt;/span&gt;&lt;/b&gt;&lt;/tt&gt;&lt;span lang="ES" \
style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-ALIGN: center" \
align="center"&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt;CUANDO LA LISTA LLEGUE AL NÚMERO 500 ENVÍALO A: \
&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-FAMILY: Arial"&gt; \
&lt;/span&gt;&lt;/strong&gt;&lt;span lang="ES" style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
style="TEXT-ALIGN: center" align="center"&gt;&lt;tt&gt;&lt;u&gt;&lt;span style="FONT-SIZE: 9pt; COLOR: \
navy; FONT-FAMILY: Verdana"&gt;&lt;a href="mailto:salvacion.cuba@gmail.com"&gt;&lt;strong&gt;&lt;span \
lang="ES" style="COLOR: navy; FONT-FAMILY: Tahoma"&gt; \
salvacion.por.amor@gmail.com&lt;/span&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/span&gt;&lt;/u&gt;&lt;/tt&gt;&lt;span lang="ES" \
style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-ALIGN: center" \
align="center"&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt;Y SE COMENZARÁ UNA NUEVA LISTA.&lt;/span&gt;&lt;/strong&gt; &lt;strong&gt;&lt;span \
lang="ES" style="FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/strong&gt;&lt;span lang="ES" \
style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-ALIGN: center" \
align="center"&gt;&lt;tt&gt;&lt;b&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: \
Verdana"&gt;QUE DIOS TE BENDIGA MUCHO!!!&lt;/span&gt;&lt;/b&gt;&lt;/tt&gt;&lt;strong&gt;&lt;span lang="ES" \
style="FONT-FAMILY: Arial"&gt;  &lt;/span&gt;&lt;/strong&gt;&lt;span lang="ES" style="FONT-FAMILY: \
Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-ALIGN: center" \
align="center"&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt;POR FAVOR, QUE NO SE PARE EN TI Y CREELO PORQUE ES LA VERDAD \
QUE TE HARÁ LIBRE (JUAN 8: 32); Y AUNQUE NO LO CREAS, MÁNDALO DE TODAS FORMAS. \
DEJA A OTRO LA OPORTUNIDAD DE ELEGIR SU FUTURO Y TENER LA SALVACIÓN CON VIDA \
ETERNA EN EL REINO DE LOS CIELOS (LUCAS 11: 52).  &lt;/span&gt;&lt;/strong&gt;&lt;span lang="ES" \
style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-ALIGN: center" \
align="center"&gt;&lt;span lang="ES" style="FONT-SIZE: 13pt; COLOR: #42405e; FONT-FAMILY: \
Verdana"&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 13pt; COLOR: \
                #42405e; FONT-FAMILY: Verdana"&gt;
****************************************** &lt;/span&gt;&lt;span style="COLOR: #42405e; \
FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-ALIGN: center" \
align="center"&gt;&lt;b&gt;&lt;span style="FONT-SIZE: 36pt; COLOR: black; FONT-FAMILY: \
Verdana"&gt;YOU ARE IN TIME!&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style="FONT-SIZE: 36pt; FONT-FAMILY: \
Arial"&gt; &lt;/span&gt; &lt;/b&gt;&lt;span style="FONT-SIZE: 36pt; FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span style="FONT-SIZE: 13.5pt; \
COLOR: black; FONT-FAMILY: Verdana"&gt;You still have time; don't lose this \
opportunity. Acquire now a glorious, incorruptible inheritance in heaven (1 Peter 1: \
4).  &lt;/span&gt;&lt;span style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span style="FONT-SIZE: 13.5pt; \
COLOR: black; FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-INDENT: 22.7pt; \
TEXT-ALIGN: justify"&gt;&lt;span style="FONT-SIZE: 13.5pt; COLOR: black; FONT-FAMILY: \
Verdana"&gt;Don't stay without his loving gift. This is of &lt;/span&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 13.5pt; COLOR: black; FONT-FAMILY: Verdana"&gt; \
incalculable&lt;/span&gt;&lt;span style="FONT-SIZE: 13.5pt; COLOR: black; FONT-FAMILY: \
Verdana"&gt; value. This is the most important thing for you.  It contains \
happiness and eternal life! &lt;/span&gt;&lt;span style="FONT-FAMILY: Arial"&gt;&lt;/span&gt; &lt;/p&gt;
&lt;p style="TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span style="FONT-SIZE: 13.5pt; \
COLOR: black; FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-INDENT: 22.7pt; \
TEXT-ALIGN: justify"&gt;&lt;span style="FONT-SIZE: 13.5pt; COLOR: black; FONT-FAMILY: \
Verdana"&gt;Obtain it now from his hands in exchange for nothing, proclaim yourself \
saved by faith ( &lt;/span&gt;&lt;span style="FONT-SIZE: 13.5pt; FONT-FAMILY: Verdana"&gt; \
Ephesians 2: 8 and 9).&lt;span style="COLOR: black"&gt; He said this would be so; he is \
God, and he cannot lie (Numbers 23: 19). &lt;/span&gt;&lt;/span&gt;&lt;span style="FONT-FAMILY: \
Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span \
style="FONT-SIZE: 13.5pt; COLOR: black; FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p \
style="TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span style="FONT-SIZE: 13.5pt; \
COLOR: black; FONT-FAMILY: Verdana"&gt;Believe his word; he is offering you salvation \
for love. &lt;em&gt;&lt;span style="FONT-FAMILY: Verdana"&gt;"For God so loved the world \
(everybody), that he gave his only begotten Son (Jesus), that whoever believes in him \
should not perish (in hell), but have everlasting life (in heaven)"  \
&lt;/span&gt;&lt;/em&gt;(John 3: 16). &lt;/span&gt;&lt;span style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
style="TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span style="FONT-SIZE: 13.5pt; \
COLOR: black; FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-INDENT: 22.7pt; \
TEXT-ALIGN: justify"&gt;&lt;span style="FONT-SIZE: 13.5pt; COLOR: black; FONT-FAMILY: \
Verdana"&gt;Say: &lt;b&gt;"Lord Jesus, forgive me and come to my heart. I receive you as \
Saviour and Lord of my life.  Thank you for saving me!  Amen".  \
&lt;/b&gt;&lt;/span&gt;&lt;span style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" \
style="TEXT-ALIGN: center" align="center"&gt;&lt;span style="FONT-FAMILY: \
Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-ALIGN: center" \
align="center"&gt;&lt;b&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: #333300; \
FONT-FAMILY: Verdana"&gt;Read the Bible to be wise, believe it to be saved and practice \
it to be holy.  &lt;/span&gt;&lt;/b&gt;&lt;span style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p class="EC_MsoNormal" style="TEXT-ALIGN: center" align="center"&gt;&lt;b&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: #333300; FONT-FAMILY: Verdana"&gt;Join a \
Christian church, where the authority is the Bible and Jesus Christ is preached. \
&lt;/span&gt;&lt;/b&gt;&lt;span style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" \
style="TEXT-ALIGN: center" align="center"&gt;&lt;span style="FONT-FAMILY: \
Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal" style="TEXT-ALIGN: center" \
align="center"&gt;&lt;b&gt;&lt;span style="FONT-SIZE: 13.5pt; COLOR: #333300; FONT-FAMILY: \
Verdana"&gt;INTERACTIVE BIBLE, KING JAMES VERSION &lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style="FONT-SIZE: \
9pt; COLOR: #333300; FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt; &lt;p \
class="EC_MsoNormal" style="TEXT-ALIGN: center" align="center"&gt;&lt;span \
style="FONT-FAMILY: Arial"&gt;&lt;a href="http://etext.virginia.edu/rsv.browse.html" \
target="_blank"&gt;&lt;span style="FONT-SIZE: 13.5pt"&gt;&lt;font color="#0068cf"&gt; \
http://etext.virginia.edu/rsv.browse.html &lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
class="EC_MsoNormal" style="TEXT-ALIGN: center" align="center"&gt;&lt;b&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt; &lt;/span&gt; &lt;/b&gt;&lt;/p&gt; &lt;p \
class="EC_MsoNormal" style="TEXT-ALIGN: center" align="center"&gt;&lt;strong&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt;SEND TO EVERY \
BODY!!! BUT DON'T USE FORWARD, SELECT AND COPY THIS MESSAGE (Ctrl. + \
C), AND STICK TO SEND IT (Ctrl. + V), THEN, ADD YOUR NAME TO THE LIST  \
&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: #660000; \
FONT-FAMILY: Verdana"&gt;(At the end of this message)&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt;  AND SEND \
IT!!!   &lt;/span&gt;&lt;/strong&gt;&lt;b&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt; &lt;p style="TEXT-ALIGN: center" \
align="center"&gt;&lt;strong&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt;WHEN THE LIST GET TO THE NUMBER 500, SEND IT TO \
THIS E-MAIL: &lt;/span&gt;&lt;/strong&gt;&lt;b&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: \
red; FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/b&gt;&lt;/p&gt;
&lt;p style="TEXT-ALIGN: center" align="center"&gt;&lt;strong&gt;&lt;u&gt;&lt;span lang="EN-GB" \
style="FONT-WEIGHT: normal; FONT-SIZE: 9pt; COLOR: navy; FONT-FAMILY: Tahoma"&gt;&lt;a \
href="mailto:salvacion.por.amor@gmail.com"&gt;&lt;b&gt;&lt;span style="COLOR: navy"&gt; \
salvacion.por.amor@gmail.com&lt;/span&gt;&lt;/b&gt;&lt;/a&gt;&lt;/span&gt;&lt;/u&gt;&lt;/strong&gt;&lt;b&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 9pt; COLOR: navy; FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/b&gt;&lt;/p&gt; &lt;p \
style="TEXT-ALIGN: center" align="center"&gt;&lt;strong&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt;AND A NEW LIST \
WILL START. &lt;/span&gt;&lt;/strong&gt;&lt;b&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: \
red; FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/b&gt;&lt;/p&gt;
&lt;p style="TEXT-ALIGN: center" align="center"&gt;&lt;strong&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt;GOD BLESS YOU GREATLY!!! \
&lt;/span&gt;&lt;/strong&gt;&lt;b&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: \
Verdana"&gt; &lt;/span&gt;&lt;/b&gt;&lt;/p&gt;
&lt;p style="TEXT-ALIGN: center" align="center"&gt;&lt;strong&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt;PLEASE, DON'T LET THIS \
MESSAGE STOP IN YOU, AND BELIEVE IT, BECAUSE IT' S THE TRUTH, AND THE TRUTH SHALL \
MAKE YOU FREE (JOHN 8: 32); AND EVEN IF YOU DON'T BELIEVE IT, SEND IT ANYWAY. LET \
OTHERS DECIDE THEIR EVERLASTING FUTURE AND OBTAIN SALVATION WITH EVERLASTING LIFE IN \
THE KINGDOM OF HEAVEN (LUKE 11: 52).  &lt;/span&gt;&lt;/strong&gt;&lt;b&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt; &lt;p \
class="EC_MsoNormal"&gt;&lt;strong&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/strong&gt;&lt;span lang="EN-GB" style="FONT-SIZE: \
10pt; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;span style="FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;font face="Times New Roman"&gt;&lt;b&gt;&lt;u&gt;&lt;span lang="EN-GB" style="COLOR: \
#4f0301"&gt;LISTA-LIST:&lt;/span&gt;&lt;/u&gt;&lt;/b&gt;&lt;span style="COLOR: #4f0301; FONT-FAMILY: \
Arial"&gt;&lt;/span&gt;&lt;/font&gt; &lt;/p&gt; &lt;p class="EC_MsoNormal"&gt;&lt;span lang="EN-GB" style="COLOR: \
#4f0301; FONT-FAMILY: Arial"&gt;001. Jesucristo, Reino de los Cielos&lt;/span&gt;&lt;span \
style="COLOR: #4f0301; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p class="EC_MsoNormal"&gt;&lt;span \
lang="EN-GB" style="COLOR: #4f0301; FONT-FAMILY: Arial"&gt;002. Isaias Arjarjai, \
Mexico&lt;/span&gt;&lt;span style="COLOR: #4f0301; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 12pt; COLOR: #4f0301; FONT-FAMILY: Arial"&gt; 003.&lt;/span&gt; \



-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070901112506</emailId><senderName>"rodger ellis"</senderName><senderEmail>rellis@gmx.net</senderEmail><timestampReceived>2007-09-01 11:25:06-0400</timestampReceived><subject>Daily build #1 for i386, using installer build from sid-1/09/07</subject><body>

Just wondering if the suject line will have the updated loop-aes
to encrypt root, home and user and swap?
I am aware that Max is working on this but not sure if its been completed



rodger
-------- Original-Nachricht --------
&gt; Datum: Sat, 01 Sep 2007 13:34:43 +0300
&gt; Von: Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt;
&gt; An: Jan Klod &lt;janklodvan@gmail.com&gt;
&gt; CC: linux-crypto@nl.linux.org
&gt; Betreff: Re: raid1 with loop-aes

&gt; Jan Klod wrote:
&gt; &gt; Sure, that is a better way! Previously superblock was encrypted too
&gt; &gt; (what information it contains?)
&gt; 
&gt; Info about what component device that device is, and of what MD device.
&gt; 
&gt; &gt; But why should one write:
&gt; &gt; 
&gt; &gt; losetup -d /dev/loop1
&gt; &gt; mount -t ext3 /dev/md0 /mnt -o
&gt; loop=/dev/loop1,encryption=AES128,gpgkey=/etc/foo.gpg
&gt; &gt; 
&gt; &gt; insted of just:
&gt; &gt; 
&gt; &gt; mount /dev/loop1 /mnt ?
&gt; 
&gt; When mount is told to set up loop device, it also updates /etc/mtab so
&gt; that
&gt; umount knows to detach the loop device. Two ways of doing it:
&gt; 
&gt; 1) mount -t ext3 /dev/md0 /mnt -o
&gt; loop=/dev/loop1,encryption=AES128,gpgkey=/etc/foo.gpg
&gt;    umount /mnt
&gt; 
&gt; or
&gt; 
&gt; 2) losetup -e AES128 -K /etc/foo.gpg /dev/loop1 /dev/md0
&gt;    mount -t ext3 /dev/loop1 /mnt
&gt;    umount /mnt
&gt;    losetup -d /dev/loop1
&gt; 
&gt; I prefer the first one. And when mount finds device and mount options from
&gt; /etc/fstab file, you can shrink the commands to:
&gt; 
&gt;    mount /mnt
&gt;    umount /mnt
&gt; 
&gt; &gt; a) in checkroot init script after root partition has been checked insert
&gt; &gt; 
&gt; &gt; ebegin "Starting multi disk array"
&gt; &gt;         /sbin/mdadm -A /dev/md0 /dev/hda2 /dev/hdb4
&gt; 
&gt; If you are using MSDOS style partition tables, then you can change
&gt; partition
&gt; types using fdisk to type FD (Linux raid autodetect). In that case kernel
&gt; will set up those MD devices automatically when kernel boots.
&gt; 
&gt; Works ok for /boot and root file systems, root file system encrypted or
&gt; not.
&gt; At least lilo bootloader can be configured to be linux software RAID1
&gt; aware,
&gt; and it will boot ok from either RAID1 component disk in case other RAID1
&gt; component disk has gone completely dead. I have tested this by
&gt; disconnecting
&gt; a disk. Not sure if lilo bootloader recovers from errors smaller than
&gt; "dead
&gt; disk", such as some reads completed ok and then some read errors.
&gt; 
&gt; &gt; echo "20+ character password" | losetup -p 0 -e AES128 -K /etc/foo.gpg
&gt; /dev/loop1 /dev/md0
&gt; 
&gt; losetup has -P option that reads 65-line cleartext key file that isn't
&gt; wrapped in gpg encryption.
&gt; 
&gt;  head -c 3705 /dev/random | uuencode -m - | head -n 66 | tail -n 65
&gt; &gt;/etc/foo.txt
&gt; 
&gt;  losetup -e AES128 -P /etc/foo.txt /dev/loop1 /dev/md0
&gt; 
&gt; &gt; How big vulnerability is that password written in init file?
&gt; 
&gt; Root file system where those init scripts reside, must be encrypted.
&gt; 
&gt; -- 
&gt; Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9
&gt; DD
&gt; 
&gt; -
&gt; Linux-crypto:  cryptography in and on the Linux system
&gt; Archive:       http://mail.nl.linux.org/linux-crypto/

-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070929090512</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-09-29 09:05:12-0400</timestampReceived><subject>loop-aes into busybox</subject><body>

Hello Jari,

Have you considered adding the patch or even merge into busybox?
It will be great for initramfs... :)

Best Regards,
Alon Bar-Lev.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070929153218</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-09-29 15:32:18-0400</timestampReceived><subject>Re: loop-aes into busybox</subject><body>

Alon Bar-Lev wrote:
&gt; Have you considered adding the patch or even merge into busybox?

Not considered that.

Last time I built busybox, I disabled mount and losetup functionality in
busybox, and installed separate mount and losetup binaries. I didn't have
any problems with that kind of setup.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071018202243</emailId><senderName>Mikko Herranen</senderName><senderEmail>mikko.herranen@cs.helsinki.fi</senderEmail><timestampReceived>2007-10-18 20:22:43-0400</timestampReceived><subject>GCM &amp; CTR</subject><body>

Hello,

We've been wondering about a slight compatibility glitch between
CTR and GCM with Joy Latten. As CTR and GCM are very similar, the
way to go with GCM is obviously to implement it on top of CTR.
The problem is that CTR and GCM use different counter portion
values for the first encrypted plaintext block. (They both start
at 1 but GCM uses the first value for authentication.)

How to communicate the different value to CTR? The best way seems to be
to spawn CTR as ctr(alg,0,16) in GCM and pass the contents
of the entire counter block in the IV. But then the size of the
counter portion will be set to 0 in CTR. We could modify CTR to
set the size of the counter portion to blocksize whenever
ivsize == blocksize. Or we could introduce an additional template
parameter for specifying the counter portion size. The former is
the easiest way to go if embedding a bit of GCM-specific code
inside CTR module is not a problem. Any opinions on this?

-- 
Mikko Herranen

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20071024170145</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-10-24 17:01:45-0400</timestampReceived><subject>build failure for 2.6.24-rc1</subject><body>

hi,

build failure for 2.6.24-rc1

gcc -v
Reading specs from /usr/lib/gcc/i486-slackware-linux/4.1.2/specs
Target: i486-slackware-linux
Configured with: ../gcc-4.1.2/configure --prefix=/usr --enable-shared
--enable-languages=ada,c,c++,fortran,java,objc --enable-threads=posix
--enable-__cxa_atexit --disable-checking --with-gnu-ld --verbose
--with-arch=i486 --target=i486-slackware-linux
--host=i486-slackware-linux
Thread model: posix
gcc version 4.1.2


make[1]: Entering directory `/tmp/linux-2.6.24-rc1'
  CC [M]  /root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.o
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c: In function
'loop_end_io_transfer':
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:471: error: too
many arguments to function 'bio_endio'
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c: In function
'loop_get_buffer':
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:593: warning:
assignment from incompatible pointer type
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c: At top level:
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:763: warning:
/'request_queue_t' is deprecated
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c: In function
/'loop_issue_flush':
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:767: warning:
/'request_queue_t' is deprecated
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:781: error:
/'request_queue_t' has no member named 'issue_flush_fn'
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:786: error:
/'request_queue_t' has no member named 'issue_flush_fn'
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c: At top level:
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:810: warning:
/'request_queue_t' is deprecated
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:813:40: error:
/macro "bio_io_error" passed 2 arguments, but takes just 1
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c: In function
/'loop_make_request_err':
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:813: error:
/'bio_io_error' undeclared (first use in this function)
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:813: error:
/(Each undeclared identifier is reported only once
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:813: error: for
/each function it appears in.)
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c: At top level:
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:817: warning:
/'request_queue_t' is deprecated
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:900:40: error:
/macro "bio_io_error" passed 2 arguments, but takes just 1
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c: In function
/'loop_make_request_real':
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:900: error:
/'bio_io_error' undeclared (first use in this function)
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c: At top level:
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:904: warning:
/'request_queue_t' is deprecated
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:918: warning:
/'request_queue_t' is deprecated
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c: In function
/'loop_thread':
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:969: warning:
/'request_queue_t' is deprecated
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:1143: error: too
/many arguments to function 'bio_endio'
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:1161: error: too
/many arguments to function 'bio_endio'
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c: In function
/'loop_set_fd':
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:1392: error:
/implicit declaration of function 'blk_queue_issue_flush_fn'
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:1399: warning:
/'request_queue_t' is deprecated
/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.c:1405: error:
/'request_queue_t' has no member named 'issue_flush_fn'
make[2]: *** [/root/src/loop-AES-v3.2a/tmp-d-kbuild/patched-loop.o]
Error 1
make[1]: *** [_module_/root/src/loop-AES-v3.2a/tmp-d-kbuild] Error 2
make[1]: Leaving directory `/tmp/linux-2.6.24-rc1'
make: *** [all] Error 2

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071019200327</emailId><senderName>Mikko Herranen</senderName><senderEmail>mikko.herranen@cs.helsinki.fi</senderEmail><timestampReceived>2007-10-19 20:03:27-0400</timestampReceived><subject>GCM &amp; CTR (fwd)</subject><body>

(Here's a copy of a message I posted yesterday on the 'wrong' crypto
list. Sorry for any inconvenience this may have caused to those who
were cc'd.)


Hello,

We've been wondering about a slight compatibility glitch between
CTR and GCM with Joy Latten. As CTR and GCM are very similar, the
way to go with GCM is obviously to implement it on top of CTR.
The problem is that CTR and GCM use different counter portion
values for the first encrypted plaintext block. (They both start
at 1 but GCM uses the first value for authentication.)

How to communicate the different value to CTR? The best way seems to be
to spawn CTR as ctr(alg,0,16) in GCM and pass the contents
of the entire counter block in the IV. But then the size of the
counter portion will be set to 0 in CTR. We could modify CTR to
set the size of the counter portion to blocksize whenever
ivsize == blocksize. Or we could introduce an additional template
parameter for specifying the counter portion size. The former is
the easiest way to go if embedding a bit of GCM-specific code
inside CTR module is not a problem. Any opinions on this?

-- 
Mikko Herranen
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20071019222932</emailId><senderName>Joy Latten</senderName><senderEmail>latten@austin.ibm.com</senderEmail><timestampReceived>2007-10-19 22:29:32-0400</timestampReceived><subject>Re: GCM &amp; CTR (fwd)</subject><body>

On Fri, 2007-10-19 at 23:03 +0300, Mikko Herranen wrote:
&gt; (Here's a copy of a message I posted yesterday on the 'wrong' crypto
&gt; list. Sorry for any inconvenience this may have caused to those who
&gt; were cc'd.)
&gt; 
&gt; 
&gt; Hello,
&gt; 
&gt; We've been wondering about a slight compatibility glitch between
&gt; CTR and GCM with Joy Latten. As CTR and GCM are very similar, the
&gt; way to go with GCM is obviously to implement it on top of CTR.
&gt; The problem is that CTR and GCM use different counter portion
&gt; values for the first encrypted plaintext block. (They both start
&gt; at 1 but GCM uses the first value for authentication.)
&gt; 
&gt; How to communicate the different value to CTR? The best way seems to be
&gt; to spawn CTR as ctr(alg,0,16) in GCM and pass the contents
&gt; of the entire counter block in the IV. But then the size of the
&gt; counter portion will be set to 0 in CTR. We could modify CTR to
&gt; set the size of the counter portion to blocksize whenever
&gt; ivsize == blocksize. Or we could introduce an additional template
&gt; parameter for specifying the counter portion size. The former is
&gt; the easiest way to go if embedding a bit of GCM-specific code
&gt; inside CTR module is not a problem. Any opinions on this?

I think the change to CTR would be simple.  
If noncesize + ivsize == blocksize, then use 
entire counterblock as counter and pass to  
ctr_inc_quad(). Currently, we just fail 
if noncesize + ivsize == blocksize.  

Let me know if this sounds ok, and I will 
code it. 

Regards,
Joy

-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20071020133255</emailId><senderName>Herbert Xu</senderName><senderEmail>herbert@gondor.apana.org.au</senderEmail><timestampReceived>2007-10-20 13:32:55-0400</timestampReceived><subject>Re: GCM &amp; CTR (fwd)</subject><body>

On Fri, Oct 19, 2007 at 10:29:32PM +0000, Joy Latten wrote:
&gt;
&gt; I think the change to CTR would be simple.  
&gt; If noncesize + ivsize == blocksize, then use 
&gt; entire counterblock as counter and pass to  
&gt; ctr_inc_quad(). Currently, we just fail 
&gt; if noncesize + ivsize == blocksize.  

How about adding an explicit counter size parameter?

So intead of ctr(aes,4,8) for the standard IPsec CTR we'd have
ctr(aes,4,8,4).  Then GCM can just use ctr(aes,4,12,4).

Cheers,
-- 
Visit Openswan at http://www.openswan.org/
Email: Herbert Xu ~{PmV&gt;HI~} &lt;herbert@gondor.apana.org.au&gt;
Home Page: http://gondor.apana.org.au/~herbert/
PGP Key: http://gondor.apana.org.au/~herbert/pubkey.txt
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20071022210118</emailId><senderName>Joy Latten</senderName><senderEmail>latten@austin.ibm.com</senderEmail><timestampReceived>2007-10-22 21:01:18-0400</timestampReceived><subject>Re: GCM &amp; CTR (fwd)</subject><body>

&gt;On Fri, Oct 19, 2007 at 10:29:32PM +0000, Joy Latten wrote:
&gt;&gt;
&gt;&gt; I think the change to CTR would be simple.  
&gt;&gt; If noncesize + ivsize == blocksize, then use 
&gt;&gt; entire counterblock as counter and pass to  
&gt;&gt; ctr_inc_quad(). Currently, we just fail 
&gt;&gt; if noncesize + ivsize == blocksize.  
&gt;
&gt;How about adding an explicit counter size parameter?
&gt;
&gt;So intead of ctr(aes,4,8) for the standard IPsec CTR we'd have
&gt;ctr(aes,4,8,4).  Then GCM can just use ctr(aes,4,12,4).

GCM begins encryption with the counter at 2. 
CTR initializes its counter with 1 to begin encryption.
GCM then uses counter set to 1, to create authentication
tag. It must do encryption first though because the
encrypted data is passed in to create authentication tag.
Encrypting with counter initialized at 2 doesn't quite
fit into CTR...

The only resolution I can readily think of is to
allow the user to pass in the counter. It could
be part of the IV.

Thus GCM could pass in IV || 0^31 || 1 to CTR for
encryption. It would then later pass in IV || 0^32 to
create authentication tag.

So, if noncesize + ivsize == blocksize, do not initialize
a CTR counter. Instead, use "countersize" bytes from end of
IV as counter to be incremented.

So ctr(aes,0,16,4) would indicate to use last 4 bytes
of IV for counter. 

Does this seem ok?

Would there be some concern of user initializing counter,
because it could be initialized to a high number... then 
counter could rapidly rollover? Would this be a problem? 
If so, then we could use entire counterblock for counter 
in this instance and not allow user to specify countersize...

Regards,
Joy
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20071023073556</emailId><senderName>Herbert Xu</senderName><senderEmail>herbert@gondor.apana.org.au</senderEmail><timestampReceived>2007-10-23 07:35:56-0400</timestampReceived><subject>Re: GCM &amp; CTR (fwd)</subject><body>

On Mon, Oct 22, 2007 at 04:01:18PM -0500, Joy Latten wrote:
&gt;
&gt; So ctr(aes,0,16,4) would indicate to use last 4 bytes
&gt; of IV for counter. 
&gt; 
&gt; Does this seem ok?

Yeah that looks fine.  Although GCM also has a salt/IV split
so it'd use ctr(aes,4,12,4).

&gt; Would there be some concern of user initializing counter,
&gt; because it could be initialized to a high number... then 
&gt; counter could rapidly rollover? Would this be a problem? 
&gt; If so, then we could use entire counterblock for counter 
&gt; in this instance and not allow user to specify countersize...

Rolling over is not the issue.  What would be a problem is if
it rolls over to the same value.  However, that would require
(for a 4-byte counter block) 2^32 blocks of data.

I think it's sufficient to let the caller worry about issues
like this.

Cheers,
-- 
Visit Openswan at http://www.openswan.org/
Email: Herbert Xu ~{PmV&gt;HI~} &lt;herbert@gondor.apana.org.au&gt;
Home Page: http://gondor.apana.org.au/~herbert/
PGP Key: http://gondor.apana.org.au/~herbert/pubkey.txt
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070929153622</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-09-29 15:36:22-0400</timestampReceived><subject>Re: loop-aes into busybox</subject><body>

On 9/29/07, Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; Last time I built busybox, I disabled mount and losetup functionality in
&gt; busybox, and installed separate mount and losetup binaries. I didn't have
&gt; any problems with that kind of setup.

I too...

The util-linux-ng cannot be built statically... So I guessed that
loop-aes losetup enabled into busybox will be the cleanest solution...

Best Regards,
Alon Bar-Lev.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070929162356</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-09-29 16:23:56-0400</timestampReceived><subject>Re: loop-aes into busybox</subject><body>

Alon Bar-Lev wrote:
&gt; The util-linux-ng cannot be built statically...

$ cp -dpR util-linux-ng-2.13-AES z
$ cd z
$ CC=gcc-3.3 CFLAGS="-O2 -Wall" LDFLAGS="-s -static" ./configure
[snip]
$ make SUBDIRS="mount"
[snip]
$ file mount/losetup mount/mount
mount/losetup: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), for \
                GNU/Linux 2.2.0, statically linked, stripped
mount/mount:   ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), for \
GNU/Linux 2.2.0, statically linked, stripped

&gt; So I guessed that loop-aes losetup enabled into busybox will be the
&gt; cleanest solution...

Last time I compiled busybox, I linked busybox and other programs with
uClibc. All program binaries were linked dynamically. I haven't tried that
with util-linux-ng.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070929170516</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-09-29 17:05:16-0400</timestampReceived><subject>Re: loop-aes into busybox</subject><body>

On 9/29/07, Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; [snip]
&gt; $ make SUBDIRS="mount"

Oh... doing so by hand... :)
I thought to do what we have done previously... All utilities as
static... But there is a nasty issues with this.

&gt; Last time I compiled busybox, I linked busybox and other programs with
&gt; uClibc. All program binaries were linked dynamically. I haven't tried that
&gt; with util-linux-ng.

OK... It was just an idea.
Thanks!

Alon.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070929203357</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-09-29 20:33:57-0400</timestampReceived><subject>Re: loop-aes into busybox</subject><body>

* Alon Bar-Lev &lt;alon.barlev@gmail.com&gt; wrote:

&gt; On 9/29/07, Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; &gt; [snip]
&gt; &gt; $ make SUBDIRS="mount"
&gt; 
&gt; Oh... doing so by hand... :) I thought to do what we have done
&gt; previously... All utilities as static... But there is a nasty
&gt; issues with this.

What issues? When I tried to compile util-linux-ng it worked but the
SUBDIRS directive was ignored, IIRC.


-- 
left blank, right bald
loop-AES FAQ: http://mareichelt.de/pub/texts.loop-aes.php
[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070929204308</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-09-29 20:43:08-0400</timestampReceived><subject>Re: loop-aes into busybox</subject><body>

On 9/29/07, markus reichelt &lt;ml@mareichelt.de&gt; wrote:
&gt; * Alon Bar-Lev &lt;alon.barlev@gmail.com&gt; wrote:
&gt;
&gt; &gt; On 9/29/07, Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; &gt; &gt; [snip]
&gt; &gt; &gt; $ make SUBDIRS="mount"
&gt; &gt;
&gt; &gt; Oh... doing so by hand... :) I thought to do what we have done
&gt; &gt; previously... All utilities as static... But there is a nasty
&gt; &gt; issues with this.
&gt;
&gt; What issues? When I tried to compile util-linux-ng it worked but the
&gt; SUBDIRS directive was ignored, IIRC.

I would expect something like --with-static-mount
--with-static-losetup or something similar as parameters to configure.

If I try to compile the whole package with LDFLAGS="-s -static" I get
many of these:
if gcc -DHAVE_CONFIG_H -I. -I. -I..  -DTEST_CAL -include ../config.h
-I../include -DLOCALEDIR=\"\"  -fsigned-char -g -O2 -MT cal_test-cal.o
-MD -MP -MF ".deps/cal_test-cal.Tpo" -c -o cal_test-cal.o `test -f
'cal.c' || echo './'`cal.c; \
        then mv -f ".deps/cal_test-cal.Tpo" ".deps/cal_test-cal.Po";
else rm -f ".deps/cal_test-cal.Tpo"; exit 1; fi
gcc -fsigned-char -g -O2  -s -static -o cal_test  cal_test-cal.o -lncurses
/usr/lib/gcc/i686-pc-linux-gnu/4.1.2/../../../libc.a(init-misc.o):(.data+0x4):
multiple definition of `__progname'
cal_test-cal.o:(.data+0x0): first defined here
collect2: ld returned 1 exit status
make[2]: *** [cal_test] Error 1

Tried to solve them one by one but gave up... :(

Alon.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070929211453</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-09-29 21:14:53-0400</timestampReceived><subject>Re: loop-aes into busybox</subject><body>

* Alon Bar-Lev &lt;alon.barlev@gmail.com&gt; wrote:

&gt; I would expect something like --with-static-mount
&gt; --with-static-losetup or something similar as parameters to
&gt; configure.

Hm. It would be a nice feature, given that a patch with loop-AES
support exists for util-linux-ng. However, it would be even better if
Adrian Bunk had accepted the help offered so we hadn't to deal with
this fork mess in the first place :-(


&gt; cal_test-cal.o:(.data+0x0): first defined here
&gt; collect2: ld returned 1 exit status
&gt; make[2]: *** [cal_test] Error 1
&gt; 
&gt; Tried to solve them one by one but gave up... :(

Same error pops up here (Slackwar 12, also gcc 4.1.2) 

&lt;thinks&gt;

Blaming it all on gcc stuff (which is way too often true these days)
a gcc 3.4 install comes up with this amusing message

CC=gcc34 CXX=g++34  LDFLAGS="-s -static" ./configure

checking for gcc... gcc34
checking for C compiler default output file name... configure: error:
C compiler cannot create executables
See `config.log' for more details.

Karel, any interest in that logfile? If so, have a look at
http://mareichelt.de/tmp/config.log

-- 
left blank, right bald
loop-AES FAQ: http://mareichelt.de/pub/texts.loop-aes.php
[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20071009231406</emailId><senderName>Karel Zak</senderName><senderEmail>kzak@redhat.com</senderEmail><timestampReceived>2007-10-09 23:14:06-0400</timestampReceived><subject>Re: loop-aes into busybox</subject><body>

On Sat, Sep 29, 2007 at 11:32:53PM +0200, markus reichelt wrote:
&gt; gcc34 -fsigned-char -g -O2  -s -static -o cal_test  cal_test-cal.o
&gt; -lncurses
&gt; /usr/lib/libc.a(init-misc.o):(.data+0x4): multiple definition of
&gt; `__progname'
&gt; cal_test-cal.o:(.data+0x238): first defined here
&gt; collect2: ld returned 1 exit status
&gt; make[2]: *** [cal_test] Error 1

 Yes, I know about this problem. It will be fixed in the next release.

    Karel

-- 
 Karel Zak  &lt;kzak@redhat.com&gt;

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070902181956</emailId><senderName>Jan Klod</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-09-02 18:19:56-0400</timestampReceived><subject>Re: raid1 with loop-aes</subject><body>

First, thanks to Jari for explanations!
&gt;&gt; How big vulnerability is that password written in init file?
&gt;&gt;     
&gt;
&gt; Root file system where those init scripts reside, must be encrypted.
&gt;   
I have no doubts about that, but I consider the case when that 
information (key or password) somehow leaks out to another file, that is 
accessible to all.
And if someone persuade me to execute some sophisticated attack code (or 
build it into programs, that I install), the keys can be stolen pretty 
easily!
I was new to linux some six months ago and now I both have no time and 
necessity to build such a monstrous protection system, but I'm planning 
to start with Gentoo RSBAC some day.
I am sure that vanilla kernel must be modified, because it supposes, 
that all installed stuff does exactly what it is supposed to. But how 
the hell can I check all those sources?! And I still want my workstation 
to be user-friendly and having all necessary software...
Any comments about RSBAC?

To Markus:

 &gt; have you (successfully) tinkered with Alon's approach to things?
- No. Suspend is not a critical requirement for me and since I didn't 
understood Alon's provided information good enough, suspend for me is 
suspended.
 &gt; just be as verbose as you possibly can.
- Ok!

-- 
Jan


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070828180026</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-08-28 18:00:26-0400</timestampReceived><subject>loop-aes &amp; util-linux-ng</subject><body>

Hello,

Which version of loop-aes will work with util-linux-ng?

Alon.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070918130539</emailId><senderName>Kadir</senderName><senderEmail>qkadir@yahoo.com</senderEmail><timestampReceived>2007-09-18 13:05:39-0400</timestampReceived><subject>Adding OpenSSL certificate user data with parameters</subject><body>

Hi,

I use the following command to create a certificate request.

openssl req -new -nodes -out new-req.pem -keyout new-key.pem

But this command demands country, state, organization name, email etc.
information from command line like the following example. I don' t want to
enter country, state, organization name etc from command line like this
example. I want to add this information (country, name, email etc) with some
parameters like "-country TR -state KOCAELI ..."  to openssl command.  How
can I do this?

# openssl req -new -nodes -out new-req.pem -keyout new-key.pem

Generating a 1024 bit RSA private key
..................................++++++
.........................++++++
writing new private key to 'new-key.pem'
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter '.', the field will be left blank.
-----
Country Name (2 letter code) [AU]:TR
State or Province Name (full name) [Some-State]:KOCAELI
Locality Name (eg, city) []:GEBZE
Organization Name (eg, company) [Internet Widgits Pty Ltd]:TUBITAK-UEKEAE
Organizational Unit Name (eg, section) []:OpenTC
Common Name (eg, YOUR name) []:Kadir
Email Address []:kadir@test.opentc.com

Please enter the following 'extra' attributes
to be sent with your certificate request
A challenge password []:test
An optional company name []:uekae

Sincerelly,
Kadir.

       
---------------------------------
Shape Yahoo! in your own image.  Join our Network Research Panel today!
[Attachment #3 (text/html)]

&lt;pre&gt;&lt;tt&gt;&lt;tt&gt;Hi,&lt;br&gt;&lt;br&gt;I use the following command to create a certificate \
request.&lt;br&gt;&lt;br&gt;openssl req -new -nodes -out new-req.pem -keyout \
new-key.pem&lt;br&gt;&lt;br&gt;But this command demands country, state, organization name, email \
etc.&lt;br&gt;information from command line like the following example. I don' t want \
to&lt;br&gt;enter country, state, organization name etc from command line like \
this&lt;br&gt;example. I want to add this information (country, name, email etc) with \
some&lt;br&gt;parameters like "-country TR -state KOCAELI ..."  to openssl command.  \
How&lt;br&gt;can I do this?&lt;br&gt;&lt;br&gt;# openssl req -new -nodes -out new-req.pem -keyout \
new-key.pem&lt;br&gt;&lt;br&gt;Generating a 1024 bit RSA private \
key&lt;br&gt;..................................++++++&lt;br&gt;.........................++++++&lt;br&gt;writing \
new private key to 'new-key.pem'&lt;br&gt;-----&lt;br&gt;You are about to be asked to enter \
information that will be incorporated&lt;br&gt;into your certificate request.&lt;br&gt;What you \
are about to enter is what is called a Distinguished Name  or a DN.&lt;br&gt;There are \
quite a few fields but you can leave some blank&lt;br&gt;For some fields there will be a \
default value,&lt;br&gt;If you enter '.', the field will be left blank.&lt;br&gt;-----&lt;br&gt;Country \
Name (2 letter code) [AU]:TR&lt;br&gt;State or Province Name (full name) \
[Some-State]:KOCAELI&lt;br&gt;Locality Name (eg, city) []:GEBZE&lt;br&gt;Organization Name (eg, \
company) [Internet Widgits Pty Ltd]:TUBITAK-UEKEAE&lt;br&gt;Organizational Unit Name (eg, \
section) []:OpenTC&lt;br&gt;Common Name (eg, YOUR name) []:Kadir&lt;br&gt;Email Address []:&lt;span \
style="border-bottom: 1px dashed rgb(0, 102, 204); background: transparent none \
repeat scroll 0% 50%; cursor: pointer; -moz-background-clip: -moz-initial; \
-moz-background-origin: -moz-initial; -moz-background-inline-policy: -moz-initial;" \
id="lw_1190120689_0"&gt;kadir@test.opentc.com&lt;/span&gt;&lt;br&gt;&lt;br&gt;Please enter the following \
'extra' attributes&lt;br&gt;to be sent with your certificate request&lt;br&gt;A challenge \
password []:test&lt;br&gt;An optional company name  \
[]:uekae&lt;br&gt;&lt;br&gt;Sincerelly,&lt;br&gt;Kadir.&lt;/tt&gt;&lt;/tt&gt;&lt;/pre&gt;&lt;p&gt;   &lt;hr size=1&gt;Shape \
Yahoo! in your own image.   &lt;a \
href="http://us.rd.yahoo.com/evt=48517/*http://surveylink.yahoo.com/gmrs/yahoo_panel_invite.asp?a=7"&gt;Join \
our Network Research Panel today!&lt;/a&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070915165723</emailId><senderName>"rodger ellis"</senderName><senderEmail>rellis@gmx.net</senderEmail><timestampReceived>2007-09-15 16:57:23-0400</timestampReceived><subject>not sure if this a relevant article for this group-might be of</subject><body>

http://groups.google.com/group/linux.debian.kernel/browse_thread/thread/b53dfc2c858687a0/4a5993178f83bb67
-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070924101904</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-09-24 10:19:04-0400</timestampReceived><subject>PATCH: build-initrd.sh add device nodes sr[0|1]</subject><body>

[Attachment #2 (multipart/mixed)]


The attached patch adds device nodes for two CD/DVD drives to
build-initrd script. Modern libata drivers in linux kernel set up IDE
drives as SCSI devices. Running build-initrd script on such a system
fails because the old device node name scd is not used anymore (it's
left in the script for backwards compatibility).

--=20
left blank, right bald

["patch.build-initrd.sh.sr-nodes" (text/plain)]

--- build-initrd.sh.orig	2007-05-14 14:18:12.000000000 +0200
+++ build-initrd.sh	2007-09-24 11:57:42.530498135 +0200
@@ -718,6 +718,8 @@
     maybeMakeDiskNode sdg  8  96 ""
     maybeMakeDiskNode sdh  8 112 ""
     maybeMakeDiskNode scd 11   0  0
+    maybeMakeDiskNode sr0 11   0  0    
+    maybeMakeDiskNode sr1 11   1  0    
     maybeMakeDiskNode md   9   0  0
     maybeMakeDiskNode fd   2   0  0
 

[Attachment #6 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070924111410</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-09-24 11:14:10-0400</timestampReceived><subject>Re: PATCH: build-initrd.sh add device nodes sr[0|1]</subject><body>

* markus reichelt &lt;ml@mareichelt.de&gt; wrote:

&gt; The attached patch adds device nodes for two CD/DVD drives to
&gt; build-initrd script. Modern libata drivers in linux kernel set up
&gt; IDE drives as SCSI devices. Running build-initrd script on such a
&gt; system fails because the old device node name scd is not used
&gt; anymore (it's left in the script for backwards compatibility).

IF used as BOOTDEV (and/or CRYPTROOT in fancy setups), of course.

--=20
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070924151146</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-09-24 15:11:46-0400</timestampReceived><subject>Re: PATCH: build-initrd.sh add device nodes sr[0|1]</subject><body>

markus reichelt wrote:
&gt;+    maybeMakeDiskNode sr0 11   0  0
&gt;+    maybeMakeDiskNode sr1 11   1  0

Above lines will create device nodes for /dev/sr00 ... /dev/sr015 and
/dev/sr10 ... /dev/sr115 . Most likely that isn't what you intended.

This line will create device nodes for /dev/sr0 ... /dev/sr15 , using major
11, minor 0 ... 15

    maybeMakeDiskNode sr  11   0  0

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070915183542</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-09-15 18:35:42-0400</timestampReceived><subject>Re: not sure if this a relevant article for this group-might be of interest</subject><body>

* rodger ellis &lt;rellis@gmx.net&gt; wrote:

&gt; http://groups.google.com/group/linux.debian.kernel/browse_thread/thread/b53dfc2c858687a0/4a5993178f83bb67
&gt; 

It certainly is of interest to Max Vozeler, and all Debian users
lurking; it definitely complicates things for Debian users.

Slackware 12 ships with CONFIG_BLK_DEV_LOOP=y, so ... welcome to the
club ;)

-- 
left blank, right bald


[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070915201039</emailId><senderName>"rodger ellis"</senderName><senderEmail>rellis@gmx.net</senderEmail><timestampReceived>2007-09-15 20:10:39-0400</timestampReceived><subject>Re: not sure if this a relevant article for this group-might be of</subject><body>

well yes after a second look it is a complication.
just as a personal point the 'n' and 'm" keys are next to each
other on my keypad possible typo?



rodger
-------- Original-Nachricht --------
&gt; Datum: Sat, 15 Sep 2007 20:35:42 +0200
&gt; Von: markus reichelt &lt;ml@mareichelt.de&gt;
&gt; An: linux-crypto@nl.linux.org
&gt; CC: max@nusquama.org
&gt; Betreff: Re: not sure if this a relevant article for this group-might be of \
&gt; interest

&gt; * rodger ellis &lt;rellis@gmx.net&gt; wrote:
&gt; 
&gt; &gt; 
&gt; http://groups.google.com/group/linux.debian.kernel/browse_thread/thread/b53dfc2c858687a0/4a5993178f83bb67
&gt;  
&gt; It certainly is of interest to Max Vozeler, and all Debian users
&gt; lurking; it definitely complicates things for Debian users.
&gt; 
&gt; Slackware 12 ships with CONFIG_BLK_DEV_LOOP=y, so ... welcome to the
&gt; club ;)
&gt; 
&gt; -- 
&gt; left blank, right bald

-- 
Psssst! Schon vom neuen GMX MultiMessenger gehört?
Der kanns mit allen: http://www.gmx.net/de/go/multimessenger

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070915204537</emailId><senderName>Max Vozeler</senderName><senderEmail>max@nusquama.org</senderEmail><timestampReceived>2007-09-15 20:45:37-0400</timestampReceived><subject>Re: not sure if this a relevant article for this group-might be of</subject><body>

Hi all, Hi Eero,

On Sat, Sep 15, 2007 at 08:35:42PM +0200, markus reichelt wrote:
&gt; * rodger ellis &lt;rellis@gmx.net&gt; wrote:
&gt; 
&gt; &gt; http://groups.google.com/group/linux.debian.kernel/browse_thread/thread/b53dfc2c858687a0/4a5993178f83bb67
&gt; &gt; 
&gt; 
&gt; It certainly is of interest to Max Vozeler, and all Debian users
&gt; lurking; it definitely complicates things for Debian users.

This is not actually a fundamental problem with the Debian kernel,
or other kernels configured with CONFIG_BLK_DEV_LOOP=m.

&gt; When trying to mount a device crypted with loop-aes I get this error:
&gt; ioctl: LOOP_MULTI_KEY_SETUP_V3: Invalid argument

This error usually indicates that the wrong (as in: "not loop-AES")
loop module is loaded into the kernel.

 a) There is no loop-aes-modules-$KERNEL package installed for
    the running kernel, and the "normal" loop module gets auto-
    loaded. Make sure that you have such a package installed for
    your running kernel:

      $ dpkg -s loop-aes-modules-$(uname -r) | grep Status
      Status: install ok installed

 b) The loop-aes-modules-$KERNEL package was installed _after_ 
    the "normal" loop module was already loaded. In that case, 
    reloading loop should get you the correct module:
     
      # rmmod loop; modprobe -v loop

    Note that you should need to do this only once. The packages 
    are setup in such a way that the loop-AES module takes pre-
    cedence over the normal in-kernel loop module.

If that still doesn't work, we're looking at a as-of-yet unknown
problem, but likely one in the Debian loop-AES packages, and not in
the Debian kernel or loop-AES itself. I would appreciate if you 
could file a bug against the package "loop-aes" in that case.

&gt; The loop-aes documentation says that CONFIG_BLK_DEV_LOOP must be set to "n",
&gt; but in Debian Etch it is set to "m". Could this be changed to "n"?

This should not be necessary. 

There is no fundamental incompatiblity between loop-AES and the
CONFIG_BLK_DEV_LOOP=m setting in Debian kernels. 

Since the introduction of module-init-tools for 2.6, it is possible
for a module to "override" a kernel-shipped version of the same module,
by being installed in the /lib/modules/$KERNEL/updates directory; This
is what Debian loop-aes-modules-$KERNEL packages do for loop.ko

Having the normal loop module available can complicate module loading
in some corner cases, one of which you probably experienced (but let's
find out). Ruling out such problems is, I suppose, the reason for the 
recommendation for CONFIG_BLK_DEV_LOOP=n in the loop-AES documentation.

I'll make this more clear in README.Debian of the loop-AES packages 
and add a postinst check for an already loaded loop module.

	Max

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070917111649</emailId><senderName>Eero Vuojolahti</senderName><senderEmail>eero@vuojolahti.com</senderEmail><timestampReceived>2007-09-17 11:16:49-0400</timestampReceived><subject>Re: not sure if this a relevant article for this group-might be of</subject><body>

On Sat, 2007-09-15 at 22:45 +0200, Max Vozeler wrote:
&gt; Hi all, Hi Eero,
&gt; 
&gt; On Sat, Sep 15, 2007 at 08:35:42PM +0200, markus reichelt wrote:
&gt; &gt; * rodger ellis &lt;rellis@gmx.net&gt; wrote:
&gt; &gt; 
&gt; &gt; &gt; http://groups.google.com/group/linux.debian.kernel/browse_thread/thread/b53dfc2c858687a0/4a5993178f83bb67
&gt; &gt; &gt; 
&gt; &gt; 
&gt; &gt; It certainly is of interest to Max Vozeler, and all Debian users
&gt; &gt; lurking; it definitely complicates things for Debian users.
&gt; 
&gt; This is not actually a fundamental problem with the Debian kernel,
&gt; or other kernels configured with CONFIG_BLK_DEV_LOOP=m.
&gt; 
&gt; &gt; When trying to mount a device crypted with loop-aes I get this error:
&gt; &gt; ioctl: LOOP_MULTI_KEY_SETUP_V3: Invalid argument
&gt; 
&gt; This error usually indicates that the wrong (as in: "not loop-AES")
&gt; loop module is loaded into the kernel.
&gt; 
&gt; a) There is no loop-aes-modules-$KERNEL package installed for
&gt; the running kernel, and the "normal" loop module gets auto-
&gt; loaded. Make sure that you have such a package installed for
&gt; your running kernel:
&gt; 
&gt; $ dpkg -s loop-aes-modules-$(uname -r) | grep Status
&gt; Status: install ok installed
&gt; 
&gt; b) The loop-aes-modules-$KERNEL package was installed _after_ 
&gt; the "normal" loop module was already loaded. In that case, 
&gt; reloading loop should get you the correct module:
&gt; 
&gt; # rmmod loop; modprobe -v loop
&gt; 
&gt; Note that you should need to do this only once. The packages 
&gt; are setup in such a way that the loop-AES module takes pre-
&gt; cedence over the normal in-kernel loop module.
&gt; 
&gt; If that still doesn't work, we're looking at a as-of-yet unknown
&gt; problem, but likely one in the Debian loop-AES packages, and not in
&gt; the Debian kernel or loop-AES itself. I would appreciate if you 
&gt; could file a bug against the package "loop-aes" in that case.
&gt; 
&gt; &gt; The loop-aes documentation says that CONFIG_BLK_DEV_LOOP must be set to "n",
&gt; &gt; but in Debian Etch it is set to "m". Could this be changed to "n"?
&gt; 
&gt; This should not be necessary. 
&gt; 
&gt; There is no fundamental incompatiblity between loop-AES and the
&gt; CONFIG_BLK_DEV_LOOP=m setting in Debian kernels. 
&gt; 
&gt; Since the introduction of module-init-tools for 2.6, it is possible
&gt; for a module to "override" a kernel-shipped version of the same module,
&gt; by being installed in the /lib/modules/$KERNEL/updates directory; This
&gt; is what Debian loop-aes-modules-$KERNEL packages do for loop.ko
&gt; 
&gt; Having the normal loop module available can complicate module loading
&gt; in some corner cases, one of which you probably experienced (but let's
&gt; find out). Ruling out such problems is, I suppose, the reason for the 
&gt; recommendation for CONFIG_BLK_DEV_LOOP=n in the loop-AES documentation.
&gt; 
&gt; I'll make this more clear in README.Debian of the loop-AES packages 
&gt; and add a postinst check for an already loaded loop module.
&gt; 
&gt; 	Max

Hi and thanks for an advice!
Loop-aes module was installed, but I think there was some wrong loop
module loaded. Command "rmmod loop; modprobe -v loop" did not work
because cryptoloop was already using the loop module. I tried to load
all kinds of modules earlier to get loop-aes working and I wasn't sure
which modules were necessary anymore so I rebooted the machine. After it
came up I was able to mount loop-aes encrypted disks and those encrypted
disks that were made during Debian installation (cryptsetup with LUKS).
It seems like the correct loop module loads only after rebooting.
-- 
Eero


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070917124002</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-09-17 12:40:02-0400</timestampReceived><subject>Re: not sure if this a relevant article for this group-might be of interest</subject><body>

* Max Vozeler &lt;max@nusquama.org&gt; wrote:

&gt; On Sat, Sep 15, 2007 at 08:35:42PM +0200, markus reichelt wrote:
&gt; &gt; * rodger ellis &lt;rellis@gmx.net&gt; wrote:
&gt; &gt; 
&gt; &gt; &gt; http://groups.google.com/group/linux.debian.kernel/browse_thread/thread/b53dfc2c858687a0/4a5993178f83bb67
&gt; &gt; &gt; 
&gt; &gt; 
&gt; &gt; It certainly is of interest to Max Vozeler, and all Debian users
&gt; &gt; lurking; it definitely complicates things for Debian users.
&gt; 
&gt; This is not actually a fundamental problem with the Debian kernel,
&gt; or other kernels configured with CONFIG_BLK_DEV_LOOP=m.

I misinterpreted the report as: loop-AES no longer works with
CONFIG_BLK_DEV_LOOP=m under Debian.

One of the drawbacks of a package system; users trust it too much
when they fiddle with their system. 

Does the Debian loop-AES package contain loop-AES modules and patched
util-linux? If so, then how do people still manage to confuse things
like that?

-- 
left blank, right bald


[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070918181130</emailId><senderName>Max Vozeler</senderName><senderEmail>max@nusquama.org</senderEmail><timestampReceived>2007-09-18 18:11:30-0400</timestampReceived><subject>Re: not sure if this a relevant article for this group-might be of</subject><body>

Hey Markus,

On Mon, Sep 17, 2007 at 02:40:02PM +0200, markus reichelt wrote:
&gt; I misinterpreted the report as: loop-AES no longer works with
&gt; CONFIG_BLK_DEV_LOOP=m under Debian.
&gt; 
&gt; One of the drawbacks of a package system; users trust it too much
&gt; when they fiddle with their system. 
&gt; 
&gt; Does the Debian loop-AES package contain loop-AES modules and patched
&gt; util-linux? If so, then how do people still manage to confuse things
&gt; like that?

These are seperate packages. There is one with patched
util-linux ("loop-aes-utils"), another with source for people
wanting to build modules for custom kernels ("loop-aes-source"), 
and then packages with the loop-AES (+ciphers) modules built 
for Debian kernels ("loop-aes-modules-$KERNEL").

	Max


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070829182326</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-08-29 18:23:26-0400</timestampReceived><subject>Re: loop-aes &amp; util-linux-ng</subject><body>

Alon Bar-Lev wrote:
&gt; Which version of loop-aes will work with util-linux-ng?

I will look into this. Maybe next weekend.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070902162146</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-09-02 16:21:46-0400</timestampReceived><subject>Re: loop-aes &amp; util-linux-ng</subject><body>

Jari Ruusu wrote:
&gt; I will look into this. Maybe next weekend.

http://loop-aes.sourceforge.net/updates/util-linux-ng-2.13-1.diff.bz2
http://loop-aes.sourceforge.net/updates/util-linux-ng-2.13-1.diff.bz2.sign

I did quick tests using above patch, and it seemed to work ok.

However, you will need a bleeding edge distro to compile that. It won't
compile on all boxes. util-linux-2.12r and earlier are compatible with many
distros, including older ones. It's pretty sad to see such excellent
compatibility ruined by this "new" -ng version.  :(

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070902192651</emailId><senderName>Karel Zak</senderName><senderEmail>kzak@redhat.com</senderEmail><timestampReceived>2007-09-02 19:26:51-0400</timestampReceived><subject>Re: loop-aes &amp; util-linux-ng</subject><body>

On Sun, Sep 02, 2007 at 07:21:46PM +0300, Jari Ruusu wrote:
&gt; However, you will need a bleeding edge distro to compile that. It won't
&gt; compile on all boxes. util-linux-2.12r and earlier are compatible with many
&gt; distros, including older ones. It's pretty sad to see such excellent
&gt; compatibility ruined by this "new" -ng version.  :(

Do you have any examples? I'm open for patches that improve
compatibility.

    Karel

-- 
 Karel Zak  &lt;kzak@redhat.com&gt;

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070903152913</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-09-03 15:29:13-0400</timestampReceived><subject>Re: loop-aes &amp; util-linux-ng</subject><body>

Karel Zak wrote:
&gt; Do you have any examples? I'm open for patches that improve
&gt; compatibility.

Try compiling using gcc-2.95

Or this: (on Debian 3.1)

# CC=gcc-3.3 CFLAGS="-O2 -Wall" ./configure
[snip]
# make
[snip]
make[2]: Entering directory `/tmp/util-linux-ng-2.13/login-utils'
if gcc-3.3 -DHAVE_CONFIG_H -I. -I. -I..  -DMAIN_TEST_CHECKTTY -include ../config.h \
-I../include -DLOCALEDIR=\"\"  -fsigned-char -O2 -Wall -MT checktty_test-checktty.o \
-MD -MP -MF ".deps/checktty_test-checktty.Tpo" -c -o checktty_test-checktty.o `test \
-f 'checktty.c' || echo './'`checktty.c; \ then mv -f \
".deps/checktty_test-checktty.Tpo" ".deps/checktty_test-checktty.Po"; else rm -f \
".deps/checktty_test-checktty.Tpo"; exit 1; fi gcc-3.3 -fsigned-char -O2 -Wall   -o \
checktty_test  checktty_test-checktty.o if gcc-3.3 -DHAVE_CONFIG_H -I. -I. -I..  \
-include ../config.h -I../include -DLOCALEDIR=\"\"  -fsigned-char -O2 -Wall -MT \
agetty.o -MD -MP -MF ".deps/agetty.Tpo" -c -o agetty.o agetty.c; \ then mv -f \
                ".deps/agetty.Tpo" ".deps/agetty.Po"; else rm -f ".deps/agetty.Tpo"; \
                exit 1; fi
agetty.c: In function `do_prompt':
agetty.c:887: error: `HOST_NAME_MAX' undeclared (first use in this function)
agetty.c:887: error: (Each undeclared identifier is reported only once
agetty.c:887: error: for each function it appears in.)
agetty.c:887: warning: unused variable `domainname'
agetty.c:900: warning: unused variable `host'
agetty.c:995: warning: unused variable `hn'
make[2]: *** [agetty.o] Error 1
make[2]: Leaving directory `/tmp/util-linux-ng-2.13/login-utils'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/tmp/util-linux-ng-2.13'
make: *** [all] Error 2

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070903164347</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-09-03 16:43:47-0400</timestampReceived><subject>Re: loop-aes &amp; util-linux-ng</subject><body>

* Karel Zak &lt;kzak@redhat.com&gt; wrote:

&gt; On Sun, Sep 02, 2007 at 07:21:46PM +0300, Jari Ruusu wrote:
&gt; &gt; However, you will need a bleeding edge distro to compile that. It won't
&gt; &gt; compile on all boxes. util-linux-2.12r and earlier are compatible with many
&gt; &gt; distros, including older ones. It's pretty sad to see such excellent
&gt; &gt; compatibility ruined by this "new" -ng version.  :(
&gt; 
&gt; Do you have any examples? I'm open for patches that improve
&gt; compatibility.

Well, your question makes me wonder on which platforms you test your
-ng code (and why those?).

So, I ran simple some "./configure &amp;&amp; make" tests on slackware 12,
11, 10.2, and 10.0 (both plain source of -ng and Jari's patch
applied). You seem to be "in the clear" of some serious slackware
wrath, it seems. ;p

Anyhow, why -ng in the first place; what's wrong with mainline
util-linux? A link will do, just curious.

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070903170835</emailId><senderName>"Ahmad Warsame"</senderName><senderEmail>awarsame@bbm.ca</senderEmail><timestampReceived>2007-09-03 17:08:35-0400</timestampReceived><subject>Re: loop-aes &amp; util-linux-ng</subject><body>



Can anyone tel me how I can unsubscribe this.

Thanks

Ahmad Warsame
Senior System Admin
ITIL Foundations  Certified
1500 Don Mills Rd 3rd Floor
Toronto, Ontario
M3B 3L7
Office:  416 847 2050
BB:       416 662 1577
--------------------------
Sent from BlackBerry Wireless Handheld
#######
This message is intended only for the person to whom it is addressed and may contain \
information that is privileged and confidential. If you are not the intended \
recipient, you are hereby notified that any dissemination or copying of this \
communication is prohibited. Please notify us of the error in communication by \
telephone (416-847-2050) or by return e-mail and destroy all copies of this \
communication. Thank you.Ce message est Ã  l'usage exclusif de son destinataire et \
peut comprendre des renseignements privilÃ©giÃ©s et confidentiels.  Il est \
strictement interdit Ã  toute autre personne de le diffuser ou de le reproduire. Si \
vous avez reÃ§u ce message par erreur, veuillez nous en aviser par tÃ©lÃ©phone \
(416-847-2050) ou par courriel et en dÃ©truire toute copie. Merci.



-----Original Message-----
From: linux-crypto-bounce@nl.linux.org &lt;linux-crypto-bounce@nl.linux.org&gt;
To: linux-crypto@nl.linux.org &lt;linux-crypto@nl.linux.org&gt;
Sent: Mon Sep 03 12:43:47 2007
Subject: Re: loop-aes &amp; util-linux-ng


* Karel Zak &lt;kzak@redhat.com&gt; wrote:

&gt; On Sun, Sep 02, 2007 at 07:21:46PM +0300, Jari Ruusu wrote:
&gt; &gt; However, you will need a bleeding edge distro to compile that. It won't
&gt; &gt; compile on all boxes. util-linux-2.12r and earlier are compatible with many
&gt; &gt; distros, including older ones. It's pretty sad to see such excellent
&gt; &gt; compatibility ruined by this "new" -ng version.  :(
&gt; 
&gt; Do you have any examples? I'm open for patches that improve
&gt; compatibility.

Well, your question makes me wonder on which platforms you test your
-ng code (and why those?).

So, I ran simple some "./configure &amp;&amp; make" tests on slackware 12,
11, 10.2, and 10.0 (both plain source of -ng and Jari's patch
applied). You seem to be "in the clear" of some serious slackware
wrath, it seems. ;p

Anyhow, why -ng in the first place; what's wrong with mainline
util-linux? A link will do, just curious.

-- 
left blank, right bald

ü¸§»Ü¯*m£÷+Ê›h‚¶©‡(§jwhžØ^.)îÆÌ¬µé€­Èb½ïá¶ÚÿÿùšŠ_ç—ùbžìÿ¢¸?–)îÇ÷+Ê›h


</body></email><email><emailId>20070903173939</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-09-03 17:39:39-0400</timestampReceived><subject>Re: loop-aes &amp; util-linux-ng</subject><body>

* Ahmad Warsame &lt;awarsame@bbm.ca&gt; wrote:

&gt; Can anyone tel me how I can unsubscribe this.

You can't; as a Senior System Admin you are stuck with this for life.

Seriously. 


&gt; Thanks

;p


"Read the headers, Luke ... and disregard lame footers while you are
at it."

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070903232136</emailId><senderName>Jan-Benedict Glaw</senderName><senderEmail>jbglaw@lug-owl.de</senderEmail><timestampReceived>2007-09-03 23:21:36-0400</timestampReceived><subject>Re: loop-aes &amp; util-linux-ng</subject><body>

On Mon, 2007-09-03 13:08:35 -0400, Ahmad Warsame &lt;awarsame@bbm.ca&gt; wrote:
&gt; 
&gt; Can anyone tel me how I can unsubscribe this.

In each and every mail going over this list, you'll find the needed
help in the headers:

List-help: &lt;mailto:ecartis@nl.linux.org?Subject=help&gt;                                 \
                
List-unsubscribe: &lt;mailto:linux-crypto-request@nl.linux.org?Subject=unsubscribe&gt;      \


Nothing special.

MfG, JBG

-- 
      Jan-Benedict Glaw      jbglaw@lug-owl.de              +49-172-7608481
  Signature of:                          Zensur im Internet? Nein danke!
  the second  :


["signature.asc" (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070905192654</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-09-05 19:26:54-0400</timestampReceived><subject>Re: loop-aes &amp; util-linux-ng</subject><body>

On 9/2/07, Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; Jari Ruusu wrote:
&gt; &gt; I will look into this. Maybe next weekend.
&gt;
&gt; http://loop-aes.sourceforge.net/updates/util-linux-ng-2.13-1.diff.bz2
&gt; http://loop-aes.sourceforge.net/updates/util-linux-ng-2.13-1.diff.bz2.sign
&gt;
&gt; I did quick tests using above patch, and it seemed to work ok.
&gt;

Thanks!

I am having a problem with missing asm/page.h:

if i686-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I..  -DMAIN -include
../config.h -I../include -DLOCALEDIR=\"/usr/share/locale\"
-fsigned-char -O3 -march=pentium-m -fomit-frame-pointer -pipe -MT
losetup-aes.o -MD -MP -MF ".deps/losetup-aes.Tpo" -c -o losetup-aes.o
`test -f 'aes.c' || echo './'`aes.c; \
        then mv -f ".deps/losetup-aes.Tpo" ".deps/losetup-aes.Po";
else rm -f ".deps/losetup-aes.Tpo"; exit 1; fi
if i686-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I..  -include
../config.h -I../include -DLOCALEDIR=\"/usr/share/locale\"
-fsigned-char -O3 -march=pentium-m -fomit-frame-pointer -pipe -MT
swapon.o -MD -MP -MF ".deps/swapon.Tpo" -c -o swapon.o swapon.c; \
        then mv -f ".deps/swapon.Tpo" ".deps/swapon.Po"; else rm -f
".deps/swapon.Tpo"; exit 1; fi
swapon.c:31:22: error: asm/page.h: No such file or directory


Can you please add loop-aes to the diff file name?

Best Regards,
Alon Bar-Lev.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070905192754</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-09-05 19:27:54-0400</timestampReceived><subject>Re: loop-aes &amp; util-linux-ng</subject><body>

Oh...
I am using:
sys-kernel/linux-headers-2.6.21

On 9/5/07, Alon Bar-Lev &lt;alon.barlev@gmail.com&gt; wrote:
&gt; On 9/2/07, Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; &gt; Jari Ruusu wrote:
&gt; &gt; &gt; I will look into this. Maybe next weekend.
&gt; &gt;
&gt; &gt; http://loop-aes.sourceforge.net/updates/util-linux-ng-2.13-1.diff.bz2
&gt; &gt; http://loop-aes.sourceforge.net/updates/util-linux-ng-2.13-1.diff.bz2.sign
&gt; &gt;
&gt; &gt; I did quick tests using above patch, and it seemed to work ok.
&gt; &gt;
&gt;
&gt; Thanks!
&gt;
&gt; I am having a problem with missing asm/page.h:
&gt;
&gt; if i686-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I..  -DMAIN -include
&gt; ../config.h -I../include -DLOCALEDIR=\"/usr/share/locale\"
&gt; -fsigned-char -O3 -march=pentium-m -fomit-frame-pointer -pipe -MT
&gt; losetup-aes.o -MD -MP -MF ".deps/losetup-aes.Tpo" -c -o losetup-aes.o
&gt; `test -f 'aes.c' || echo './'`aes.c; \
&gt;         then mv -f ".deps/losetup-aes.Tpo" ".deps/losetup-aes.Po";
&gt; else rm -f ".deps/losetup-aes.Tpo"; exit 1; fi
&gt; if i686-pc-linux-gnu-gcc -DHAVE_CONFIG_H -I. -I. -I..  -include
&gt; ../config.h -I../include -DLOCALEDIR=\"/usr/share/locale\"
&gt; -fsigned-char -O3 -march=pentium-m -fomit-frame-pointer -pipe -MT
&gt; swapon.o -MD -MP -MF ".deps/swapon.Tpo" -c -o swapon.o swapon.c; \
&gt;         then mv -f ".deps/swapon.Tpo" ".deps/swapon.Po"; else rm -f
&gt; ".deps/swapon.Tpo"; exit 1; fi
&gt; swapon.c:31:22: error: asm/page.h: No such file or directory
&gt;
&gt;
&gt; Can you please add loop-aes to the diff file name?
&gt;
&gt; Best Regards,
&gt; Alon Bar-Lev.
&gt;

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070906185424</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-09-06 18:54:24-0400</timestampReceived><subject>Re: loop-aes &amp; util-linux-ng</subject><body>

Alon Bar-Lev wrote:
&gt; I am having a problem with missing asm/page.h:
[snip]
&gt; swapon.c:31:22: error: asm/page.h: No such file or directory

mount/swapon.c line 31 containing "#include &lt;asm/page.h&gt;" can be removed.
Long time ago swapon.c needed something from that include file, but any
more.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070906190521</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-09-06 19:05:21-0400</timestampReceived><subject>Re: loop-aes &amp; util-linux-ng</subject><body>

Jari Ruusu wrote:
&gt; mount/swapon.c line 31 containing "#include &lt;asm/page.h&gt;" can be removed.
&gt; Long time ago swapon.c needed something from that include file, but any
&gt; more.                                                              ^

Make that "but not any more"

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070904143839</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-09-04 14:38:39-0400</timestampReceived><subject>Re: initramfs and loop-aes</subject><body>

* Alon Bar-Lev &lt;alon.barlev@gmail.com&gt; wrote:

&gt; Please review the following, maybe it will help you:
&gt; http://wiki.tuxonice.net/EncryptedSwapAndRoot

That page has been dead for days. Was it moved?

--=20
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070905152348</emailId><senderName>"info desk"</senderName><senderEmail>infodesk200@googlemail.com</senderEmail><timestampReceived>2007-09-05 15:23:48-0400</timestampReceived><subject>CONGRATULATIONS.</subject><body>

[Attachment #2 (multipart/alternative)]


*CONGRATULATIONS.*

*VIEW ATTACHED FILE AND ENSURE TO FILL OUT THE REQUIRED INFORMATION.*

*THANK YOU.*

[Attachment #5 (text/html)]

&lt;p&gt;&lt;strong&gt;CONGRATULATIONS.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;VIEW ATTACHED FILE AND ENSURE TO FILL OUT THE REQUIRED INFORMATION.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;THANK YOU.&lt;/strong&gt;&lt;/p&gt;

["bmw11.txt" (text/plain)]

THE INTERNATIONAL AWARENESS 
PROMOTION DEPARTMENT OF 
THE BMW AUTOMOBILE COMPANY.
22 Garden Close, Stamford,
Lincs, PE9 2YP, London
United Kingdom.
            
The Board of Directors, members of staff and the International Awareness Promotion \
Department of the BMW Automobile Company, wishes to congratulate you on your success \
as one of our TEN(10) STAR PRIZE WINNER in this years' BMW Automobile International \
Awareness Promotion (IAP) held on  Monday 3th of September, 2007,in London.

This makes you a proud owner of a brand new BMW 5 Series, M Sport Saloon car and a \
cash prize of £750,000.00 GBP (Seven Hundred and Fifty Thousand Great British \
pounds). Note: You are to keep your winnings and the following below strictly \
confidential so as to avoid double claims and complications: Reference Number: \
BMW:2551256003/23 Ticket number: 5647600545188
Serial number: BMWP/556543450906  
For you to collect your prizes, kindly fill the verification form below and send it \
to the BMW Claims Manager, Mr. Thomas Hooper of our claims office through email, \
stating your receipt of this notification. He has been mandated to offer you \
assistance and facilitate the urgent delivery of your prizes.

MR. THOMAS HOOPER
TEL: +447045717942
EMAIL: bmw_claimsdeptagent2@yahoo.co.uk 
VERIFICATION FORM:
1.) FULL NAME:  
2.) AGE:  
3.) SEX:   
4.) ADDRESS:  
5.) COUNTRY:  
6.) PHONE:  
7.) OCCUPATION/POSITION:  
  
Congratulations once more, and keep trusting BMW Automobile for top quality \
automobiles. ENGR.LLOYD BRADFORD
DIRECTOR OF PROMOTIONS,
INTERNATIONAL AWARENESS PROMOTIONS,
BMW AUTOMOBILE.
LONDON,
UNITED KINGDOM.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070907133834</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-09-07 13:38:34-0400</timestampReceived><subject>Re: loop-aes &amp; util-linux-ng</subject><body>

Working!!!
Thanks for quick response!

Karel, there is a minor issue with static build.
When try to build static, the HAVE__PROGNAME is not detected correctly
and causes linkage fail.
Can you please add --enable-static so that some basic utilities such
as losetup may be build statically?

The old util-linux supported static build.

Best Regards,
Alon Bar-Lev.

On 9/6/07, Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; Jari Ruusu wrote:
&gt; &gt; mount/swapon.c line 31 containing "#include &lt;asm/page.h&gt;" can be removed.
&gt; &gt; Long time ago swapon.c needed something from that include file, but any
&gt; &gt; more.                                                              ^
&gt;
&gt; Make that "but not any more"
&gt;
&gt; --
&gt; Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD
&gt;

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070908113419</emailId><senderName>"acculotto free-online games"</senderName><senderEmail>info@acculottointernacional.com</senderEmail><timestampReceived>2007-09-08 11:34:19-0400</timestampReceived><subject>Email success notification!!!</subject><body>




Promo Award 2007 !!!
A.C.I Headquarters
AEA Sweepstakes
Award Department
Madrid, Spain.
Ref:ES119345W
Batch Number:7722/08/ES
07th September, 2007
www.acculotto.com

    Email success notification!!!

We are pleased to announce to you the result of the AEA (Africa-Europe-Asia)
sweepstakes program held in Madrid, in association with "El Gordo" the
world's
largest chrismass lottery organizer.

Your email address attached to ticket number 5545/08 with the serial number
AL204 and batch number 7722/08/ES and Reference number ES119345W drew the
lucky
numbers: 16-18-29-33-37-42/ star number: 35 which subsequently won in the 1st
category of this years program.

You have therefore been approved of the lump sum of six hundred and fifty
thousand euros
(650.000.00euros),insured and credited to security file number
KPC/9118111/07.
For the immediate commencement of the release of your award to you, you
are advised
to make immediatecontact with the claims manager with the below given
contact details.

Name: Dr. Lewis Mcculloch
Email: jemitexconsults@excite.com
Tel: ++34 695 434 402
Fax: ++34 911 010 941

You will be sent a claims verification form for the formalisation of the
transfer of
your award/prize.
Note that participant were selected randomly from World Wide Web Site
through computer
draw system extracted from over 100,000 emails of individuals and
companies. This program
takes place annually.

For security reasons you are advised to keep your winning information
confidential until
your claim is processed and your award transferred to you. This is part of
our security
protocols to avoid double claiming and unwarranted abuse of this program
by some unscrupulous
elements. Please be warned.

To avoid unecessary delays and complications do quote your security file
number in all
correspondence.

We thank you for being a part of our promotional program and
Congratulations from all
members and staffs of our company.

Yours faithfully,
Mrs Fred Jones
For Claims Manager


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070910214223</emailId><senderName>RICHARD OPENE</senderName><senderEmail>ricope1952@yahoo.es</senderEmail><timestampReceived>2007-09-10 21:42:23-0400</timestampReceived><subject>Ihanot received any response in regards the funds transfer Re urgently</subject><body>

¡Tengo nueva dirección de correo!Ahora puedes escribirme a: ricope1952@yahoo.es



- RICHARD OPENE


[Attachment #3 (text/html)]

&lt;div style="border: solid 1px #cccccc; width:448px; background-color:white; \
margin:10px 0px;";&gt;&lt;table border=0 cellspacing=0 cellpadding=0 width="448"&gt;&lt;tr&gt;&lt;td \
class=tablot background="http://us.i1.yimg.com/us.yimg.com/i/us/pim/gr/gr_announce_1.gif" \
valign=center height=57&gt;&lt;big style="padding:10px;"&gt;¡Tengo nueva dirección de \
correo!&lt;/big&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;div style="padding:10px;"&gt;Ahora puedes escribirme a: \
&lt;b&gt;ricope1952@yahoo.es&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;span style="color:green;"&gt;&lt;/span&gt;&lt;br&gt;&lt;br&gt;- &lt;span \
style="color:green;"&gt;RICHARD OPENE&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070915042145</emailId><senderName>litebulb1</senderName><senderEmail>litebulb1@gmail.com</senderEmail><timestampReceived>2007-09-15 04:21:45-0400</timestampReceived><subject>Re: Advertising</subject><body>


LiteBulb1.com Forum would like to invite you to create an account with us
where you can write a thread about your website for advertisement.  This
service is free and was started to aid new website developers get linked to,
get indexed, and drive traffic to their site.  Your account can be created
instantly here: 

http://litebulb1.com/forum/login.php

Once your account is activated via an e-Mail verification you can post your
first thread.  Your post will be added immediately added to our site without
the need for a moderator to view your post. 

Thank you

-LiteBulb1.com


troy-16 wrote:
&gt; 
&gt; 
&gt; 
&gt; Hi there,
&gt; 
&gt; I would like to advertise our product www.3dgirlz.com on your website. Do
&gt; you have anything available? Our product is converting really well, and I
&gt; would like to either do this on an affiliate basis or pay flat fee.
&gt; 
&gt; Our affiliate page can be found here:
&gt; http://www.3dgirlz.com/3dgirlzcash.html
&gt; 
&gt; If you would like to see the game first before making a decision, let me
&gt; know and i will send you a link so you download the full version.
&gt; 
&gt; Regards,
&gt; 
&gt; Troy
&gt; troy@3dgirlz.com
&gt; www.3dgirlz.com
&gt; 
&gt; 
&gt; -
&gt; Linux-crypto:  cryptography in and on the Linux system
&gt; Archive:       http://mail.nl.linux.org/linux-crypto/
&gt; 
&gt; 
&gt; 

-- 
View this message in context: http://www.nabble.com/Advertising-tf3563557.html#a12687190
Sent from the Linux Crypto mailing list archive at Nabble.com.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070919075720</emailId><senderName>Wolfgang Aigner</senderName><senderEmail>list-linux-crypto@mail2news-gw.secaron.de</senderEmail><timestampReceived>2007-09-19 07:57:20-0400</timestampReceived><subject>Re: Adding OpenSSL certificate user data with parameters</subject><body>

Kadir wrote:
&gt; Hi,
&gt; 
&gt; I use the following command to create a certificate request.
&gt; 
&gt; openssl req -new -nodes -out new-req.pem -keyout new-key.pem
&gt; 
&gt; But this command demands country, state, organization name, email etc.
&gt; information from command line like the following example. I don' t want to
&gt; enter country, state, organization name etc from command line like this
&gt; example. I want to add this information (country, name, email etc) with some
&gt; parameters like "-country TR -state KOCAELI ..."  to openssl command.  How
&gt; can I do this?
&gt; 

you need a openssl config file and then 
call for example:
openssl req -new -nodes -out new-req.pem -keyout new-key.pem -config openssl.cnf

see 
man req

hope that helps

wof
-- 
The From: and Reply-To: addresses are internal news2mail gateway addresses.
Reply to the list or to Wolfgang Aigner &lt;wolfgang.aigner@secaron.de&gt;

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070921132821</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-09-21 13:28:21-0400</timestampReceived><subject>Re: not sure if this a relevant article for this group-might be of interest</subject><body>

* Max Vozeler &lt;max@nusquama.org&gt; wrote:

&gt; On Mon, Sep 17, 2007 at 02:40:02PM +0200, markus reichelt wrote:
&gt; &gt; I misinterpreted the report as: loop-AES no longer works with
&gt; &gt; CONFIG_BLK_DEV_LOOP=m under Debian.
&gt; &gt; 
&gt; &gt; One of the drawbacks of a package system; users trust it too much
&gt; &gt; when they fiddle with their system.
&gt; &gt; 
&gt; &gt; Does the Debian loop-AES package contain loop-AES modules and
&gt; &gt; patched util-linux? If so, then how do people still manage to
&gt; &gt; confuse things like that?
&gt; 
&gt; These are seperate packages. There is one with patched util-linux
&gt; ("loop-aes-utils"), another with source for people wanting to build
&gt; modules for custom kernels ("loop-aes-source"), and then packages
&gt; with the loop-AES (+ciphers) modules built for Debian kernels
&gt; ("loop-aes-modules-$KERNEL").

Yikes. This is even messier than the to-date non-existent Slackware
solution ;) so far nobody dared committing a package for loop-AES to
linuxpackages.

With Slackware 11.0 I saw light on the hirozon to sneak it into the
system the Debian way; all gone since Slackware 12.0 has loop support
built-in; and I *had* informed Head Honchos about the issue. Argh.

Anyway, I'm having a difficult time staying with classic initrd
stuff because I've just gone through a major system reorganization
and had to prepare special initrds in advance. Being myself,
naturally, I forgot to adapt something important, and I had to
consult a backup system: What A Hassle &lt;tm&gt;. 

Ok, long story short, I'm looking for people who have adapted (or
not, or just slightly, or just want to share feedback, ...) Alon
Bar-Lev's http://wiki.tuxonice.net/EncryptedSwapAndRoot approach to
things. I mean it.

I've started to strip things down to what I need, that's solely
loop-AES specific stuff. No dm-crap, no sw-nightmare et al. Just the
basics, as Al Capone would have said...

So... Anyone? Tips, pitfalls, nightmares... suggestions?

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070923193958</emailId><senderName>"rodger ellis"</senderName><senderEmail>rellis@gmx.net</senderEmail><timestampReceived>2007-09-23 19:39:58-0400</timestampReceived><subject>some success</subject><body>

I have been testing the iso in the link below and I have successfully
been able to encrypt all partitions except boot during the install of debian sid.

Many  thanks to  Max for all his work on this project.

Please read the warning below.


 http://nusquama.org/~max/scratch/d-i/loop-aes-root_2007-09-16.iso
 http://nusquama.org/~max/scratch/d-i/loop-aes-root_2007-09-16.iso.asc
 (GnuPG signature)

WARNING: 

The installation of the loop-aes kernel module is not 
done automatically as it should be. do these steps on
the second console once you reach the "Installation finished" 
screen, and before rebooting into the system:

  (replace "2.6.22-2-686" below with correct kernel flavour if
  yours is different)

  # Switch to vt2: &lt;alt&gt;-&lt;f2&gt;
  chroot /target
  mount /proc
  apt-get install loop-aes-modules-2.6.22-2-686 
  update-initramfs -k all -u
  umount /proc
  exit
  &lt;alt&gt;-&lt;f1&gt;
-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070924152100</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-09-24 15:21:00-0400</timestampReceived><subject>Re: PATCH: build-initrd.sh add device nodes sr[0|1]</subject><body>

* Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:

&gt; markus reichelt wrote:
&gt; &gt;+    maybeMakeDiskNode sr0 11   0  0
&gt; &gt;+    maybeMakeDiskNode sr1 11   1  0
&gt; 
&gt; Above lines will create device nodes for /dev/sr00 ... /dev/sr015
&gt; /and dev/sr10 ... /dev/sr115 . Most likely that isn't what you
&gt; /intended.
&gt; 
&gt; This line will create device nodes for /dev/sr0 ... /dev/sr15 ,
&gt; using major 11, minor 0 ... 15
&gt; 
&gt;     maybeMakeDiskNode sr  11   0  0

Oops, I only tested it with one drive.

And it strangely worked with sr0 11 0 0 ... Still got the initrd if
you want to take a look.

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070925090125</emailId><senderName>nm nm</senderName><senderEmail>srghesrghwre@yahoo.com</senderEmail><timestampReceived>2007-09-25 09:01:25-0400</timestampReceived><subject>Get Best Gift TRANSFORMERS G1 Tin Box Set 15 DVD $55</subject><body>

Get Best Transformers G1 15 DVDs Tin Gift Boxset $55
  http://www.yesallasian.com/product_612.html  
  Pavarotti Luciano's Collection 4DVDs-9+3CDs $36
  The Pavarotti &amp; Friends collection the complete concerts
  http://www.yesallasian.com/product_2433.html
  Transformers 20th Anniversary 25 DVD Wooden Gift Boxset with Free Keychain and poster
 http://www.yesallasian.com/product_2394.html
  Best Cartoons (Disney 100 year 24 DVDs+Tom and Jerry Anniversary 10 DVDs)34 DVDs $69.99
 http://www.yesallasian.com/product_2607.html
  TRANSFORMERS Generation 1 (G1) : Complete DVD Tin Box Set 16 DVD-9 (98 Episodes+The movie) + Gift Poker
 http://www.yesallasian.com/product_2660.html 
  TOM and JERRY COMPLETE 140 Episodes 10 DVDs Boxset Anniversary Edition
 http://www.yesallasian.com/product_2377.html 
  C.S.I. Crime Scene Investigation: Season 1-3 29 DVDs Box Set
 http://www.yesallasian.com/product_2375.html 
  Disney 100 Year Magic 23 DVDs Movie Collection Box Set
 http://www.yesallasian.com/product_2372.html 
  Laurel &amp; Hardy Collection Boxset 11 DVDs
 http://www.yesallasian.com/product_2282.html 
  Shirley Temple 12 DVDs Movie Collection
 http://www.yesallasian.com/product_2270.html 
  INFERNAL AFFAIRS TRILOGY Limited TIN BOXSET 4 DVDs SET
 http://www.yesallasian.com/product_2264.html 
  The Film Of Akira Kurosawa 20 DVDs
 http://www.yesallasian.com/product_2248.html 
  Naruto TV Series 26DVDs~ Date Hayato
 http://www.yesallasian.com/product_2370.html 
  HERCULE POIROT COLLECTION 24 Disc DVDs Boxset
 http://www.yesallasian.com/product_2366.html 
  INFERNAL AFFAIRS TRILOGY Limited TIN BOXSET 4 DVDs SET
 http://www.yesallasian.com/product_2356.html 
  The Charlie Chaplin Collection 12 DVDs
 http://www.yesallasian.com/product_2353.html 
  Alfred Hitchcock's Collection 34DVDs
 http://www.yesallasian.com/product_2345.html 
  Cary Grant: The Signature Collection 14DVDs
 http://www.yesallasian.com/product_2341.html
   
  The Yesallasian Team
  Yesallasian 24/7 customer support
       
       
---------------------------------
Boardwalk for $500? In 2007? Ha! 
Play Monopoly Here and Now (it's updated for today's economy) at Yahoo! Games.
[Attachment #3 (text/html)]

  &lt;div class="MsoNormal" style="text-align: left;" align="left"&gt;&lt;span \
style="font-size: 10pt; font-family: Arial;" lang="EN-US"&gt;Get Best Transformers G1 15 \
DVDs Tin Gift Boxset $55&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  &lt;div class="MsoNormal" \
style="text-align: left;" align="left"&gt;&lt;span style="font-size: 10pt; font-family: \
Arial;" lang="EN-US"&gt;&lt;a href="http://www.yesallasian.com/product_612.html" \
target="_blank"&gt;&lt;span \
style=""&gt;http://www.yesallasian.com/product_612.html&lt;/span&gt;&lt;/a&gt;  \
&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  &lt;div class="MsoNormal" style="text-align: left;" \
align="left"&gt;&lt;span style="font-size: 10pt; font-family: Arial;" \
lang="EN-US"&gt;Pavarotti Luciano's Collection 4DVDs-9+3CDs $36&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  \
&lt;div class="MsoNormal" style="text-align: left;" align="left"&gt;&lt;span style="font-size: \
10pt; font-family: Arial;" lang="EN-US"&gt;The Pavarotti &amp; Friends collection the \
complete concerts&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  &lt;div class="MsoNormal" style="text-align: \
left;" align="left"&gt;&lt;span  style="font-size: 10pt; font-family: Arial; color: rgb(0, \
51, 153);" lang="EN-US"&gt;&lt;a href="http://www.yesallasian.com/product_2433.html" \
target="_blank"&gt;&lt;span \
style=""&gt;http://www.yesallasian.com/product_2433.html&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;span \
style="font-size: 10pt; font-family: Arial;" lang="EN-US"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  \
&lt;div class="MsoNormal" style="text-align: left;" align="left"&gt;&lt;span style="font-size: \
10pt; font-family: Arial;" lang="EN-US"&gt;Transformers 20th Anniversary 25 DVD Wooden \
Gift Boxset with Free Keychain and poster&lt;br&gt; &lt;a \
href="http://www.yesallasian.com/product_2394.html" target="_blank"&gt;&lt;span \
style=""&gt;http://www.yesallasian.com/product_2394.html&lt;/span&gt;&lt;/a&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt; \
&lt;div class="MsoNormal" style="text-align: left;" align="left"&gt;&lt;span style="font-size: \
10pt; font-family: Arial;" lang="EN-US"&gt;Best Cartoons (Disney 100 year 24 DVDs+Tom \
and Jerry Anniversary 10 DVDs)34 DVDs $69.99&lt;br&gt; &lt;a \
href="http://www.yesallasian.com/product_2607.html"  target="_blank"&gt;&lt;span \
style=""&gt;http://www.yesallasian.com/product_2607.html&lt;/span&gt;&lt;/a&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt; \
&lt;div class="MsoNormal" style="text-align: left; line-height: 14.4pt;" \
align="left"&gt;&lt;span style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, \
51);" lang="EN-US"&gt;TRANSFORMERS Generation 1 (G1) : Complete DVD Tin Box Set 16 DVD-9 \
(98 Episodes+The movie) + Gift Poker&lt;br&gt; &lt;a \
href="http://www.yesallasian.com/product_2660.html" target="_blank"&gt;&lt;span \
style=""&gt;http://www.yesallasian.com/product_2660.html&lt;/span&gt;&lt;/a&gt; &lt;/span&gt;&lt;span \
style="font-size: 10pt; font-family: Arial;" lang="EN-US"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  \
&lt;div class="MsoNormal" style="text-align: left; line-height: 14.4pt;" \
align="left"&gt;&lt;span style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, \
51);" lang="EN-US"&gt;TOM and JERRY COMPLETE 140 Episodes 10 DVDs Boxset Anniversary \
Edition&lt;br&gt; &lt;a href="http://www.yesallasian.com/product_2377.html" \
target="_blank"&gt;&lt;span  \
style=""&gt;http://www.yesallasian.com/product_2377.html&lt;/span&gt;&lt;/a&gt; &lt;/span&gt;&lt;span \
style="font-size: 10pt; font-family: Arial;" lang="EN-US"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  \
&lt;div class="MsoNormal" style="text-align: left; line-height: 14.4pt;" \
align="left"&gt;&lt;span style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, \
51);" lang="EN-US"&gt;C.S.I. Crime Scene Investigation: Season 1-3 29 DVDs Box Set&lt;br&gt; \
&lt;a href="http://www.yesallasian.com/product_2375.html" target="_blank"&gt;&lt;span \
style=""&gt;http://www.yesallasian.com/product_2375.html&lt;/span&gt;&lt;/a&gt; &lt;/span&gt;&lt;span \
style="font-size: 10pt; font-family: Arial;" lang="EN-US"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  \
&lt;div class="MsoNormal" style="text-align: left; line-height: 14.4pt;" \
align="left"&gt;&lt;span style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, \
51);" lang="EN-US"&gt;Disney 100 Year Magic 23 DVDs Movie Collection Box Set&lt;br&gt; &lt;a \
href="http://www.yesallasian.com/product_2372.html" target="_blank"&gt;&lt;span  \
style=""&gt;http://www.yesallasian.com/product_2372.html&lt;/span&gt;&lt;/a&gt; &lt;/span&gt;&lt;span \
style="font-size: 10pt; font-family: Arial;" lang="EN-US"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  \
&lt;div class="MsoNormal" style="text-align: left; line-height: 14.4pt;" \
align="left"&gt;&lt;span style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, \
51);" lang="EN-US"&gt;Laurel &amp; Hardy Collection Boxset 11 DVDs&lt;br&gt; &lt;a \
href="http://www.yesallasian.com/product_2282.html" target="_blank"&gt;&lt;span \
style=""&gt;http://www.yesallasian.com/product_2282.html&lt;/span&gt;&lt;/a&gt; &lt;/span&gt;&lt;span \
style="font-size: 10pt; font-family: Arial;" lang="EN-US"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  \
&lt;div class="MsoNormal" style="text-align: left; line-height: 14.4pt;" \
align="left"&gt;&lt;span style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, \
51);" lang="EN-US"&gt;Shirley Temple 12 DVDs Movie Collection&lt;br&gt; &lt;a \
href="http://www.yesallasian.com/product_2270.html" target="_blank"&gt;&lt;span  \
style=""&gt;http://www.yesallasian.com/product_2270.html&lt;/span&gt;&lt;/a&gt; &lt;/span&gt;&lt;span \
style="font-size: 10pt; font-family: Arial;" lang="EN-US"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  \
&lt;div class="MsoNormal" style="text-align: left; line-height: 14.4pt;" \
align="left"&gt;&lt;span style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, \
51);" lang="EN-US"&gt;INFERNAL AFFAIRS TRILOGY Limited TIN BOXSET 4 DVDs SET&lt;br&gt; &lt;a \
href="http://www.yesallasian.com/product_2264.html" target="_blank"&gt;&lt;span \
style=""&gt;http://www.yesallasian.com/product_2264.html&lt;/span&gt;&lt;/a&gt; &lt;/span&gt;&lt;span \
style="font-size: 10pt; font-family: Arial;" lang="EN-US"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  \
&lt;div class="MsoNormal" style="text-align: left; line-height: 14.4pt;" \
align="left"&gt;&lt;span style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, \
51);" lang="EN-US"&gt;The Film Of Akira Kurosawa 20 DVDs&lt;br&gt; &lt;a \
href="http://www.yesallasian.com/product_2248.html" target="_blank"&gt;&lt;span  \
style=""&gt;http://www.yesallasian.com/product_2248.html&lt;/span&gt;&lt;/a&gt; &lt;/span&gt;&lt;span \
style="font-size: 10pt; font-family: Arial;" lang="EN-US"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  \
&lt;div class="MsoNormal" style="text-align: left; line-height: 14.4pt;" \
align="left"&gt;&lt;span style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, \
51);" lang="EN-US"&gt;Naruto TV Series 26DVDs~ Date Hayato&lt;br&gt; &lt;a \
href="http://www.yesallasian.com/product_2370.html" target="_blank"&gt;&lt;span \
style=""&gt;http://www.yesallasian.com/product_2370.html&lt;/span&gt;&lt;/a&gt; &lt;/span&gt;&lt;span \
style="font-size: 10pt; font-family: Arial;" lang="EN-US"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  \
&lt;div class="MsoNormal" style="text-align: left; line-height: 14.4pt;" \
align="left"&gt;&lt;span style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, \
51);" lang="EN-US"&gt;HERCULE POIROT COLLECTION 24 Disc DVDs Boxset&lt;br&gt; &lt;a \
href="http://www.yesallasian.com/product_2366.html" target="_blank"&gt;&lt;span  \
style=""&gt;http://www.yesallasian.com/product_2366.html&lt;/span&gt;&lt;/a&gt; &lt;/span&gt;&lt;span \
style="font-size: 10pt; font-family: Arial;" lang="EN-US"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  \
&lt;div class="MsoNormal" style="text-align: left; line-height: 14.4pt;" \
align="left"&gt;&lt;span style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, \
51);" lang="EN-US"&gt;INFERNAL AFFAIRS TRILOGY Limited TIN BOXSET 4 DVDs SET&lt;br&gt; &lt;a \
href="http://www.yesallasian.com/product_2356.html" target="_blank"&gt;&lt;span \
style=""&gt;http://www.yesallasian.com/product_2356.html&lt;/span&gt;&lt;/a&gt; &lt;/span&gt;&lt;span \
style="font-size: 10pt; font-family: Arial;" lang="EN-US"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  \
&lt;div class="MsoNormal" style="text-align: left; line-height: 14.4pt;" \
align="left"&gt;&lt;span style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, \
51);" lang="EN-US"&gt;The Charlie Chaplin Collection 12 DVDs&lt;br&gt; &lt;a \
href="http://www.yesallasian.com/product_2353.html" target="_blank"&gt;&lt;span  \
style=""&gt;http://www.yesallasian.com/product_2353.html&lt;/span&gt;&lt;/a&gt; &lt;/span&gt;&lt;span \
style="font-size: 10pt; font-family: Arial;" lang="EN-US"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  \
&lt;div class="MsoNormal" style="text-align: left; line-height: 14.4pt;" \
align="left"&gt;&lt;span style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, \
51);" lang="EN-US"&gt;Alfred Hitchcock's Collection 34DVDs&lt;br&gt; &lt;a \
href="http://www.yesallasian.com/product_2345.html" target="_blank"&gt;&lt;span \
style=""&gt;http://www.yesallasian.com/product_2345.html&lt;/span&gt;&lt;/a&gt; &lt;/span&gt;&lt;span \
style="font-size: 10pt; font-family: Arial;" lang="EN-US"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  \
&lt;div class="MsoNormal" style="text-align: left; line-height: 14.4pt;" \
align="left"&gt;&lt;st1:City w:st="on"&gt;&lt;st1:place w:st="on"&gt;&lt;span style="font-size: 10pt; \
font-family: Arial; color: rgb(51, 51, 51);" \
lang="EN-US"&gt;Cary&lt;/span&gt;&lt;/st1:place&gt;&lt;/st1:City&gt;&lt;span style="font-size: 10pt; \
font-family: Arial; color: rgb(51, 51, 51);" lang="EN-US"&gt; Grant: The Signature  \
Collection 14DVDs&lt;br&gt; &lt;a href="http://www.yesallasian.com/product_2341.html" \
target="_blank"&gt;&lt;span \
style=""&gt;http://www.yesallasian.com/product_2341.html&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;span \
style="font-size: 10pt; font-family: Arial;" lang="EN-US"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  \
&lt;div class="MsoNormal" style="text-align: left;" align="left"&gt;&lt;span style="font-size: \
10pt; font-family: Arial;" lang="EN-US"&gt; &lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  &lt;div \
class="MsoNormal" style="text-align: left;" align="left"&gt;&lt;span style="font-size: \
10pt; font-family: Arial;" lang="EN-US"&gt;The Yesallasian Team&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;  \
&lt;div class="MsoNormal" style="text-align: left;" align="left"&gt;&lt;span style="font-size: \
10pt; font-family: Arial;" lang="EN-US"&gt;Yesallasian 24/7 customer support&lt;/span&gt;&lt;span \
style="font-family: Arial;" lang="EN-US"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/div&gt;       &lt;p&gt; 

      &lt;hr size=1&gt;Boardwalk for $500? In 2007? Ha! &lt;br&gt;&lt;a \
href="http://us.rd.yahoo.com/evt=48223/*http://get.games.yahoo.com/proddesc?gamekey=monopolyherenow"&gt;Play \
Monopoly Here and Now&lt;/a&gt; (it's updated for today's economy) at Yahoo! Games.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070926151918</emailId><senderName>yogesh walia</senderName><senderEmail>walia_3581@yahoo.co.in</senderEmail><timestampReceived>2007-09-26 15:19:18-0400</timestampReceived><subject>PROBLEM</subject><body>

I cannot view your site please solve my problem I want to join ur site thanks!


 yogesh walia

       
---------------------------------
 Chat on a cool, new interface. No download required. Click here.
[Attachment #3 (text/html)]

&lt;div&gt;I cannot view your site please&lt;EM&gt;&lt;FONT style="BACKGROUND-COLOR: \
#bf5f00"&gt;&lt;STRONG&gt; solve&lt;/STRONG&gt; &lt;/FONT&gt;&lt;/EM&gt;my &lt;STRONG&gt;&lt;FONT color=#c00000&gt;problem \
I&lt;/FONT&gt;&lt;/STRONG&gt; want to join ur site thanks!&lt;/div&gt;&lt;BR&gt;&lt;BR&gt;&lt;div&gt;&lt;IMG \
src="http://us.i1.yimg.com/us.yimg.com/i/mesg/tsmileys2/01.gif"&gt;&lt;FONT \
style="BACKGROUND-COLOR: #00ffff"&gt; &lt;STRONG&gt;&lt;EM&gt;yogesh \
walia&lt;/EM&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/div&gt;&lt;p&gt; 


      &lt;!--10--&gt;&lt;hr size=1&gt;&lt;/hr&gt; Chat on a cool, new interface. No download required. \
&lt;a href="http://in.rd.yahoo.com/tagline_webmessenger_10/*http://in.messenger.yahoo.com/webmessengerpromo.php"&gt;Click \
here.&lt;/a&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070929213253</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-09-29 21:32:53-0400</timestampReceived><subject>Re: loop-aes into busybox</subject><body>

* markus reichelt &lt;ml@mareichelt.de&gt; wrote:

&gt; * Alon Bar-Lev &lt;alon.barlev@gmail.com&gt; wrote:
&gt; 
&gt; &gt; I would expect something like --with-static-mount
&gt; &gt; --with-static-losetup or something similar as parameters to
&gt; &gt; configure.
&gt; 
&gt; Hm. It would be a nice feature, given that a patch with loop-AES
&gt; support exists for util-linux-ng. However, it would be even better if
&gt; Adrian Bunk had accepted the help offered so we hadn't to deal with
&gt; this fork mess in the first place :-(
&gt; 
&gt; 
&gt; &gt; cal_test-cal.o:(.data+0x0): first defined here
&gt; &gt; collect2: ld returned 1 exit status
&gt; &gt; make[2]: *** [cal_test] Error 1
&gt; &gt; 
&gt; &gt; Tried to solve them one by one but gave up... :(
&gt; 
&gt; Same error pops up here (Slackwar 12, also gcc 4.1.2) 

+e ... my dear Mr Freud.

&gt; 
&gt; &lt;thinks&gt;
&gt; 
&gt; Blaming it all on gcc stuff (which is way too often true these days)
&gt; a gcc 3.4 install comes up with this amusing message
&gt; 
&gt; CC=gcc34 CXX=g++34  LDFLAGS="-s -static" ./configure
&gt; 
&gt; checking for gcc... gcc34
&gt; checking for C compiler default output file name... configure: error:
&gt; C compiler cannot create executables
&gt; See `config.log' for more details.
&gt; 
&gt; Karel, any interest in that logfile? If so, have a look at
&gt; http://mareichelt.de/tmp/config.log

Well, after having embarassed myself once more with missing gcc34 in
$PATH, some other error message pops up with gcc 3.4:

gcc34 -fsigned-char -g -O2  -s -static -o cal_test  cal_test-cal.o
-lncurses
/usr/lib/libc.a(init-misc.o):(.data+0x4): multiple definition of
`__progname'
cal_test-cal.o:(.data+0x238): first defined here
collect2: ld returned 1 exit status
make[2]: *** [cal_test] Error 1

-- 
left blank, right bald
loop-AES FAQ: http://mareichelt.de/pub/texts.loop-aes.php
[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070804082249</emailId><senderName>Beverly</senderName><senderEmail>bjcody@webtv.net</senderEmail><timestampReceived>2007-08-04 08:22:49-0400</timestampReceived><subject>PAIN FREE</subject><body>

http://tinyurl.com/9s5hu http://tinyurl.com/9s5hu Pain Free Video I got my
life back
-- 
View this message in context: http://www.nabble.com/PAIN-FREE-tf4214774.html#a11990880
Sent from the Linux Crypto mailing list archive at Nabble.com.

[Attachment #3 (text/html)]

&lt;a href="http://tinyurl.com/9s5hu" target="_top" \
rel="nofollow"&gt;http://tinyurl.com/9s5hu&lt;/a&gt;Pain Free Video I got my life back &lt;br&gt;&lt;hr \
align="left" width="300"&gt; View this message in context: &lt;a \
href="http://www.nabble.com/PAIN-FREE-tf4214774.html#a11990880"&gt;PAIN FREE&lt;/a&gt;&lt;br&gt; \
Sent from the &lt;a href="http://www.nabble.com/Linux-Crypto-f51.html"&gt;Linux Crypto \
mailing list archive&lt;/a&gt; at Nabble.com.&lt;br&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070804140501</emailId><senderName>From Engineer Ibrahim Wahala</senderName><senderEmail>bm12820032003@yahoo.co.jp</senderEmail><timestampReceived>2007-08-04 14:05:01-0400</timestampReceived><subject>Fund transfer,</subject><body>

$B?7$7$$%a!&lt;%k%"%I%l%9$r$*CN$i$;$7$^$9?7$7$$%a!&lt;%k%"%I%l%9!'(B bm12820032003@yahoo.co.jp

Fund transfer,


This is Engineer Ibrahim Wahala from Ivory Coast and I need your assistance 

in the immediate transfer of USD $ 2.2 Million Dollars. I want you to reply 

with your direct phone number for talks or Call me on +225 0630 7426. I am 

waiting for your reply.

- From Engineer Ibrahim Wahala


[Attachment #3 (text/html)]

&lt;div style="border: solid 1px #cccccc; width:448px; background-color:white; \
margin:10px 0px;";&gt;&lt;table border=0 cellspacing=0 cellpadding=0 width="448"&gt;&lt;tr&gt;&lt;td \
class=tablot background="http://i.yimg.jp/i/jp/pim/gr/gr_announce_1.gif" \
valign=center height=57&gt;&lt;big \
style="padding:10px;"&gt;$B?7$7$$%a!&lt;%k%"%I%l%9$r$*CN$i$;$7$^$9(B&lt;/big&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;div \
style="padding:10px;"&gt;$B?7$7$$%a!&lt;%k%"%I%l%9!'(B \
&lt;b&gt;bm12820032003@yahoo.co.jp&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;span style="color:green;"&gt;Fund \
transfer,&lt;br&gt;&lt;br&gt;&lt;br&gt;This is Engineer Ibrahim Wahala from Ivory Coast and I need your \
assistance &lt;br&gt;&lt;br&gt;in the immediate transfer of USD $ 2.2 Million Dollars. I want you \
to reply &lt;br&gt;&lt;br&gt;with your direct phone number for talks or Call me on +225 0630 \
7426. I am &lt;br&gt;&lt;br&gt;waiting for your reply.&lt;/span&gt;&lt;br&gt;&lt;br&gt;- &lt;span \
style="color:green;"&gt;From Engineer Ibrahim Wahala&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070808085330</emailId><senderName>"Jan Klod"</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-08-08 08:53:30-0400</timestampReceived><subject>Re: initramfs and loop-aes</subject><body>

&gt;
&gt; INITIALDELAY=10 just worked good, 3 was to less. I think 4s could be good
&gt; for me.
&gt;

..and one more thing: if use command ./build-initrd.sh /boot/initrd.conf, it
is not necessary to change INITIALDELAY option in build-initrd.sh (only
initrd.conf makes sense then). Probably initrd.conf is not really necessary,
because it doesn't changed delay w/o remaking initrd.gz.

Jan

[Attachment #3 (text/html)]

&lt;blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); \
margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;"&gt;INITIALDELAY=10 just worked good, 3 \
was to less. I think 4s could be good for me.&lt;br&gt;&lt;/blockquote&gt;

&lt;br&gt;..and one more thing: if use command ./build-initrd.sh /boot/initrd.conf, it is \
not necessary to change INITIALDELAY option in build-initrd.sh (only initrd.conf \
makes sense then). Probably initrd.conf is not really necessary, because it \
doesn't changed delay w/o remaking  initrd.gz.&lt;br&gt;&lt;br&gt;Jan&lt;br&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070815170428</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-08-15 17:04:28-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

markus reichelt wrote:
&gt; * Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; &gt; In this case, that (32bit x86 ubuntu-7.04) gcc compiles valid
&gt; &gt; source code to invalid object code.
&gt; 
&gt; Slackware 12.0 uses also gcc 4.1.2 and glibc 2.5

Just for the record, yesterday I tested build-initrd.sh using 3 different
gcc versions: 4.2.1, 3.3.5, and 2.95.4 . All 3 created working initrds.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070820101901</emailId><senderName>rosemary johnson</senderName><senderEmail>rosemary_johnson20@yahoo.com</senderEmail><timestampReceived>2007-08-20 10:19:01-0400</timestampReceived><subject>Hi Dear</subject><body>

Hi Dear 
Peace be onto you,how are you today.I do hope that you are fine. 
I saw your advert and like your person in general,this made 
me to write to show you,my extent of interest in you. 
Please send me an email soon at my mail box thus for more details 
and to equally send you my picture. 
Kiss Miss Rosemary_Johnson20@yahoo.com



       
---------------------------------
Be a better Heartthrob. Get better relationship answers from someone who knows.
Yahoo! Answers - Check it out. 
[Attachment #3 (text/html)]

&lt;DIV&gt;&lt;STRONG&gt;Hi Dear &lt;BR&gt;Peace be onto you,how are you today.I do hope that you are \
fine. &lt;BR&gt;I saw your advert and like your person in general,this made &lt;BR&gt;me to write \
to show you,my extent of interest in you. &lt;BR&gt;Please send me an email soon at my mail \
box thus for more details &lt;BR&gt;and to equally send you my picture. &lt;BR&gt;Kiss \
Miss &lt;A href="mailto:Rosemary_Johnson20@yahoo.com" target=_blank&gt;&lt;FONT \
color=#003399&gt;Rosemary_Johnson20@yahoo.com&lt;/FONT&gt;&lt;/A&gt;&lt;/STRONG&gt;&lt;A \
href="http://us.f558.mail.yahoo.com/ym/Compose?To=Email;angeljeams1@yahoo.com" \
target=_blank&gt;&lt;FONT face=Verdana size=1&gt;&lt;FONT \
class=yregconfirmblack2&gt;&lt;BR&gt;&lt;/A&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;FONT face=Verdana \
size=1&gt;&lt;STRONG&gt;&lt;BR&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;p&gt;   &lt;hr size=1&gt;Be a better Heartthrob. \
&lt;a href="http://us.rd.yahoo.com/evt=48255/*http://answers.yahoo.com/dir/_ylc=X3oDMTI5M \
Gx2aThyBF9TAzIxMTU1MDAzNTIEX3MDMzk2NTQ1MTAzBHNlYwNCQUJwaWxsYXJfTklfMzYwBHNsawNQcm9kdWN0X3F1ZXN0aW9uX3BhZ2U-?link=list&amp;sid=396545433"&gt;Get \
better relationship answers &lt;/a&gt;from someone who knows.&lt;br&gt;Yahoo! Answers - Check it \
out. 


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070821055407</emailId><senderName>liu liu</senderName><senderEmail>dear_my6tt@yahoo.com</senderEmail><timestampReceived>2007-08-21 05:54:07-0400</timestampReceived><subject>Get Best Gift TRANSFORMERS G1 Tin Box Set 15 DVD $55</subject><body>

Dear Value Customers,
 Get Best Transformers G1 15 DVDs Tin Gift Boxset $55
http://www.yesallasian.com/product_612.html   
 Transformers 20th Anniversary 25 DVD Wooden Gift Boxset with Free Keychain  and poster
http://www.yesallasian.com/product_2394.html
 Best Cartoons (Disney  100 year 24 DVDs+Tom and Jerry Anniversary 10 DVDs)34 DVDs $69.99
http://www.yesallasian.com/product_2607.html
 TOM and JERRY COMPLETE 140 Episodes 10 DVDs Boxset Anniversary Edition  $39.99
http://www.yesallasian.com/catalog_67_2.html
 C.S.I. Crime Scene Investigation: Season 1-3 29 DVDs Box Set $49.99
http://www.yesallasian.com/product_2375.html
 HERCULE POIROT COLLECTION 24 Disc DVDs Boxset $69.99
http://www.yesallasian.com/product_2366.html
 Alfred  Hitchcock's Collection 34DVDs $69.99
http://www.yesallasian.com/product_2345.html
 Shirley  Temple 12 DVDs Movie Collection
http://www.yesallasian.com/product_2270.html
 100 OSCAR WINNING AWORDS Classic DVDs NEW 100 DVDS (GIFT COLLECTION  BOXSET)
Buy 100 OSCAR WINNING AWORDS Classic DVDs NEW 100 DVDS (GIFT  COLLECTION BOXSET)
100% asian offical        released,no bootleg guaranteed.
http://www.yesallasian.com/product_555.html
  
 The Yesallasian Team
 Yesallasian 24/7 customer support

         

---------------------------------
Moody friends. Drama queens. Your life? Nope! - their life, your story.
 Play Sims Stories at Yahoo! Games.          

---------------------------------
Luggage? GPS? Comic books? 
 Check out fitting  gifts for grads at Yahoo! Search.           

---------------------------------
Yahoo! oneSearch: Finally,  mobile search  that gives answers, not   web   links.             

---------------------------------
Need a vacation? Get great deals  to amazing places on Yahoo! Travel.          

---------------------------------
Fussy? Opinionated? Impossible to please? Perfect.  Join Yahoo!'s user panel and lay it on us.          

---------------------------------
Need a vacation? Get great deals  to amazing places on Yahoo! Travel.             

---------------------------------
Need a vacation? Get great deals  to amazing places on Yahoo! Travel.        
       
---------------------------------
Shape Yahoo! in your own image.  Join our Network Research Panel today!
[Attachment #3 (text/html)]

&lt;div&gt;&lt;font size="2"&gt; &lt;div&gt;Dear Value Customers,&lt;/div&gt; &lt;div&gt;Get Best Transformers G1 \
15 DVDs Tin Gift Boxset $55&lt;br&gt;&lt;a href="http://www.yesallasian.com/product_612.html" \
target="_blank" rel="nofollow"&gt;&lt;span id="lw_1187593415_0" style="background: \
transparent none repeat scroll 0% 50%; -moz-background-clip: -moz-initial; \
-moz-background-origin: -moz-initial; -moz-background-inline-policy: \
-moz-initial;"&gt;http://www.yesallasian.com/product_612.html&lt;/span&gt;&lt;/a&gt;   &lt;/div&gt; \
&lt;div&gt;Transformers 20th Anniversary 25 DVD Wooden Gift Boxset with Free Keychain  and \
poster&lt;br&gt;&lt;a href="http://www.yesallasian.com/product_2394.html" target="_blank" \
rel="nofollow"&gt;&lt;span \
id="lw_1187593415_1"&gt;http://www.yesallasian.com/product_2394.html&lt;/span&gt;&lt;/a&gt;&lt;/div&gt; \
&lt;div&gt;Best Cartoons (&lt;span id="lw_1187593415_2" style="border-bottom: 1px dashed \
rgb(0, 102, 204); cursor: pointer; height: 1em;"&gt;Disney&lt;/span&gt;  100 year 24 DVDs+Tom \
and Jerry Anniversary 10 DVDs)34 DVDs $69.99&lt;br&gt;&lt;a  \
href="http://www.yesallasian.com/product_2607.html" target="_blank" \
rel="nofollow"&gt;&lt;span \
id="lw_1187593415_3"&gt;http://www.yesallasian.com/product_2607.html&lt;/span&gt;&lt;/a&gt;&lt;/div&gt; \
&lt;div&gt;TOM and JERRY COMPLETE 140 Episodes 10 DVDs Boxset Anniversary Edition  \
$39.99&lt;br&gt;&lt;a href="http://www.yesallasian.com/catalog_67_2.html" target="_blank" \
rel="nofollow"&gt;&lt;span \
id="lw_1187593415_4"&gt;http://www.yesallasian.com/catalog_67_2.html&lt;/span&gt;&lt;/a&gt;&lt;/div&gt; \
&lt;div&gt;C.S.I. Crime Scene Investigation: Season 1-3 29 DVDs Box Set $49.99&lt;br&gt;&lt;a \
href="http://www.yesallasian.com/product_2375.html" target="_blank" \
rel="nofollow"&gt;&lt;span \
id="lw_1187593415_5"&gt;http://www.yesallasian.com/product_2375.html&lt;/span&gt;&lt;/a&gt;&lt;/div&gt; \
&lt;div&gt;HERCULE POIROT COLLECTION 24 Disc DVDs Boxset $69.99&lt;br&gt;&lt;a \
href="http://www.yesallasian.com/product_2366.html" target="_blank" \
rel="nofollow"&gt;&lt;span \
id="lw_1187593415_6"&gt;http://www.yesallasian.com/product_2366.html&lt;/span&gt;&lt;/a&gt;&lt;/div&gt; \
&lt;div&gt;&lt;span id="lw_1187593415_7" style="border-bottom: 1px dashed  rgb(0, 102, 204); \
cursor: pointer; height: 1em;"&gt;Alfred  Hitchcock&lt;/span&gt;'s Collection 34DVDs \
$69.99&lt;br&gt;&lt;a href="http://www.yesallasian.com/product_2345.html" target="_blank" \
rel="nofollow"&gt;&lt;span id="lw_1187593415_8" style="background: transparent none repeat \
scroll 0% 50%; -moz-background-clip: -moz-initial; -moz-background-origin: \
-moz-initial; -moz-background-inline-policy: \
-moz-initial;"&gt;http://www.yesallasian.com/product_2345.html&lt;/span&gt;&lt;/a&gt;&lt;/div&gt; \
&lt;div&gt;&lt;span id="lw_1187593415_9" style="border-bottom: 1px dashed rgb(0, 102, 204); \
cursor: pointer; height: 1em;"&gt;Shirley  Temple&lt;/span&gt; 12 DVDs Movie Collection&lt;br&gt;&lt;a \
href="http://www.yesallasian.com/product_2270.html" target="_blank" \
rel="nofollow"&gt;&lt;span \
id="lw_1187593415_10"&gt;http://www.yesallasian.com/product_2270.html&lt;/span&gt;&lt;/a&gt;&lt;/div&gt; \
&lt;div&gt;100 OSCAR WINNING AWORDS Classic DVDs NEW 100 DVDS (GIFT COLLECTION  \
BOXSET)&lt;br&gt;Buy 100 OSCAR WINNING AWORDS Classic DVDs NEW 100 DVDS (GIFT  COLLECTION \
BOXSET)&lt;br&gt;100% asian offical    released,no bootleg guaranteed.&lt;br&gt;&lt;a \
href="http://www.yesallasian.com/product_555.html" target="_blank" \
rel="nofollow"&gt;&lt;span \
id="lw_1187593415_11"&gt;http://www.yesallasian.com/product_555.html&lt;/span&gt;&lt;/a&gt;&lt;/div&gt; \
&lt;div&gt; &lt;/div&gt; &lt;div&gt;The Yesallasian Team&lt;/div&gt; &lt;div&gt;Yesallasian 24/7 customer \
support&lt;/div&gt;&lt;/font&gt;&lt;/div&gt; &lt;div&gt;        &lt;/div&gt;&lt;hr size="1"&gt;Moody friends. Drama \
queens. Your life? Nope! - their life, your story.&lt;br&gt; &lt;a \
href="http://us.rd.yahoo.com/evt=48224/*http://sims.yahoo.com/"&gt;Play Sims Stories at \
Yahoo! Games. &lt;/a&gt; &lt;div&gt;        &lt;/div&gt;&lt;hr size="1"&gt;Luggage? GPS? Comic books? &lt;br&gt; \
Check out fitting &lt;a \
href="http://us.rd.yahoo.com/evt=48249/*http://search.yahoo.com/search?fr=oni_on_mail&amp;p=graduation+gifts&amp;cs=bz"&gt; \
gifts for grads&lt;/a&gt; at Yahoo! Search.   &lt;div&gt;        &lt;/div&gt;&lt;hr size="1"&gt;Yahoo! \
oneSearch: Finally, &lt;a \
href="http://us.rd.yahoo.com/evt=48252/*http://mobile.yahoo.com/mobileweb/onesearch?refer=1ONXIC"&gt; \
mobile search  that gives answers&lt;/a&gt;, not   web   links.     &lt;div&gt;        &lt;/div&gt;&lt;hr \
size="1"&gt;Need a vacation? &lt;a \
href="http://us.rd.yahoo.com/evt=48256/*http://travel.yahoo.com/;_ylc=X3oDMTFhN2hucjlpBF9TAzk3NDA3NTg5BHBvcwM1BHNlYwNncm91cHMEc2xrA2VtYWlsLW5jbQ--"&gt;Get \
great deals  to amazing places &lt;/a&gt;on Yahoo! Travel.  &lt;div&gt;        &lt;/div&gt;&lt;hr \
size="1"&gt;Fussy? Opinionated? Impossible to please? Perfect.  &lt;a \
href="http://us.rd.yahoo.com/evt=48516/*http://surveylink.yahoo.com/gmrs/yahoo_panel_invite.asp?a=7"&gt;Join \
Yahoo!'s user panel&lt;/a&gt; and lay it on us.  &lt;div&gt;        &lt;/div&gt;&lt;hr size="1"&gt;Need a \
vacation? &lt;a href="http://us.rd.yahoo.com/evt=48256/*http://travel.yahoo.com/;_ylc=X3oDMTFhN2hucjlpBF9TAzk3NDA3NTg5BHBvcwM1BHNlYwNncm91cHMEc2xrA2VtYWlsLW5jbQ--"&gt;Get \
great deals  to amazing places &lt;/a&gt;on Yahoo! Travel.     &lt;div&gt;        &lt;/div&gt;&lt;hr \
size="1"&gt;Need a vacation? &lt;a \
href="http://us.rd.yahoo.com/evt=48256/*http://travel.yahoo.com/;_ylc=X3oDMTFhN2hucjlpBF9TAzk3NDA3NTg5BHBvcwM1BHNlYwNncm91cHMEc2xrA2VtYWlsLW5jbQ--"&gt;Get \
great  deals  to amazing places &lt;/a&gt;on Yahoo! Travel.        &lt;p&gt; 
      &lt;hr size=1&gt;Shape Yahoo! in your own image.  
&lt;a href="http://us.rd.yahoo.com/evt=48517/*http://surveylink.yahoo.com/gmrs/yahoo_panel_invite.asp?a=7"&gt;Join \
our Network Research Panel today!&lt;/a&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070822145527</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-08-22 14:55:27-0400</timestampReceived><subject>Re: LVM2 logical volumes on Loop-AES</subject><body>

Fog_Watch wrote:
&gt; Jari, this is what happens when booting:
&gt; 1       machine loads kernel
&gt; 2       password requested and loopback is setup
&gt; 3       then there is the following error
&gt; "Unable to make device node for 'vg-root'
&gt; /dev/vg: mkdir failed : No space left on device"
&gt; And boot ends with a system halt.
&gt; 
&gt; This is when y=`expr ${y} + 500`.
&gt; 
&gt; When y=`expr ${y} + 2` or y=`expr ${y} + 100` the following error is
&gt; returned on boot:
&gt; 
&gt; "/etc/lvm: mkdir failed: No space left on device"

I have to admit that I haven't looked at what that lvm program is trying to
do, but it doesn't look like it is intended to be used in such tiny space
environment.

Maybe you should be looking at some other ways of booting it. As in, no
build-initrd.sh involved at all.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070822151233</emailId><senderName>"IT2 Stuart Blake Tener, USNR"</senderName><senderEmail>teners@bh90210.net</senderEmail><timestampReceived>2007-08-22 15:12:33-0400</timestampReceived><subject>Loop-AES on virtualized drives</subject><body>

Jari, et alia:

    Is there any reason for me to think that LoopAES would not work if used
with a Linux installation that is installed under Parallels or VMware on a
Mac?

    Generally my MacOS home directory is encrypted with AES-128 (by MacOS,
as it is built into the OS as "FileVault"), but once I get an Intel Mac, I
would like to be able to have LoopAES running, in case I move the virtual
drive to a non-MacOS encrypted drive.


-- 

Very Respectfully,

IT2 Stuart Blake Tener, USNR
Las Vegas, NV / Beverly Hills, CA / Philadelphia, PA / Washington, DC
Amateur Radio Call Sign: N3GWG (Extra)
email: teners@bh90210.net
phone: +(1) 310.358.0202 (Beverly Hills, CA)
phone: +(1) 215.338.6005 (Philadelphia, PA)
phone: +(1) 702.988.3989 (Las Vegas, NV)
E-Fax: +(1) 915.773.0935 (Telecopier)

Military emails (checked monthly until remote NMCI access is secured)
NIPRNET: stuart.tener@navy.mil / tenerstu@nro.mil
SIPRNET: NONE
TS/SCI:  tenerstu@nro.ic.gov (GWAN)

Confidentiality Notice: This e-mail message, including any attachments, is
for the sole use of the intended recipient(s) and may contain confidential
and/or privileged information. Any unauthorized review, use, disclosure or
distribution is prohibited. If you are not the intended recipient, please
contact the sender by reply e-mail and destroy all copies of the original
message.




-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070829115659</emailId><senderName>RB</senderName><senderEmail>aoz.syn@gmail.com</senderEmail><timestampReceived>2007-08-29 11:56:59-0400</timestampReceived><subject>Re: newbie: Speed of loop-aes</subject><body>

Ceteris peribus, what I've understood to be an appropriate test was
typically 2x main memory.  The following is what I usually use to test
a 4-way 8GB machine:

bonnie++ -b -c 8 -n 1024 -s 16g

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070829182626</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-08-29 18:26:26-0400</timestampReceived><subject>Re: loop-aes &amp; util-linux-ng</subject><body>

Thanks!
As distributions starts to push this one.
Alon.

On 8/29/07, Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; Alon Bar-Lev wrote:
&gt; &gt; Which version of loop-aes will work with util-linux-ng?
&gt;
&gt; I will look into this. Maybe next weekend.
&gt;
&gt; --
&gt; Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD
&gt;

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070829220330</emailId><senderName>"Edward Moore &amp; Associates"</senderName><senderEmail>edward.mooreassociates@yahoo.co.uk</senderEmail><timestampReceived>2007-08-29 22:03:30-0400</timestampReceived><subject>From : Edward Moore &amp; Associates</subject><body>

Dear Friend,


My name is Edward Moore QC.Principal partner Edward Moore &amp; Associates
London UK and i was compelled by my late client's request to contact you
on a matter of great financial reward.My client late  Hassan zahrul 
(Malaysian by Birth) ,an Industrialist and Real Estate Guru died recently
leaving a vast wealth in your name as his "Next of Kin".

Do contact me immediately via my Direct Telephone:+44-7045705184 or better
still send me an email to my direct email address as below stated for
immediate action on this matter:

Email: eward-moore@excite.com

I expect your immediate response and call and also let me have your direct
telephone and mobile lines so i can call you as well.This matter demands
urgent action and i urge you to make this possible.

I expect your quick response.

Thanks.

Edward Moore.
Edward Moore &amp; Associates
London-UK
Telephone:+44-7045705184






-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070831143012</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-08-31 14:30:12-0400</timestampReceived><subject>Re: raid1 with loop-aes</subject><body>

Hi Jan,

just wondering... have you (successfully) tinkered with Alon's
approach to things? If so, please state your experiences.

From what I've read about initramfs it's way more flexible (but still
a myth of some sort regarding documentation) than the classic sticky
initrd.

Now, why I'm asking. I'd like to see a working example to include in
the FAQ page. Be it initrd or initramfs related doesn't matter,
really; just be as verbose as you possibly can.

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070831190103</emailId><senderName>Mr Chokri Taylor</senderName><senderEmail>chokritaylor1973@yahoo.co.uk</senderEmail><timestampReceived>2007-08-31 19:01:03-0400</timestampReceived><subject>Transaction of us$30,000,000</subject><body>

I have a new email address!You can now email me at: chokritaylor1973@yahoo.co.uk

Iam the son of formal president of Liberia. i want to do business with you email back for detail.

- Mr Chokri Taylor


[Attachment #3 (text/html)]

&lt;div style="border: solid 1px #cccccc; width:448px; background-color:white; \
margin:10px 0px;";&gt;&lt;table border=0 cellspacing=0 cellpadding=0 width="448"&gt;&lt;tr&gt;&lt;td \
class=tablot background="http://us.i1.yimg.com/us.yimg.com/i/us/pim/gr/gr_announce_1.gif" \
valign=center height=57&gt;&lt;big style="padding:10px;"&gt;I have a new email \
address!&lt;/big&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;div style="padding:10px;"&gt;You can now email me at: \
&lt;b&gt;chokritaylor1973@yahoo.co.uk&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;span style="color:green;"&gt;Iam the son of \
formal president of Liberia. i want to do business with you email back for \
detail.&lt;/span&gt;&lt;br&gt;&lt;br&gt;- &lt;span style="color:green;"&gt;Mr Chokri \
Taylor&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070807124546</emailId><senderName>"Jivko Sabev"</senderName><senderEmail>jsabev@nicmus.com</senderEmail><timestampReceived>2007-08-07 12:45:46-0400</timestampReceived><subject>Help booting a gpg encrypted loop-aes backed root partition</subject><body>

Hi

I have been trying to boot my loop-aes backed gpg encrypted root partition
with no success. I know the partition is alright as I can mount it using a
rescue cd such as knoppix or from my unencrypted temporary root. I have
followed the README file in loop-AES directory step by step but no avail.

When the system boots, it just sits after uncompressing the initrd image.
There is no error message printed and no password prompt. It sits there
forever. The last message it prints is something of the sort

compressed ram image found at 0. Mounting root fs minixfs filesystem

or something similar but it never goes any further.

I am using a custom compiled kernel (2.6.22.1) with the following relevant
config options:

CONFIG_BLK_DEV_RAM=y
CONFIG_BLK_DEV_RAM_SIZE=4096
CONFIG_BLK_DEV_INITRD=y
CONFIG_MINIX_FS=y
CONFIG_PROC_FS=y
USEDIETLIBC=1
# CONFIG_CRAMFS is not set
CONFIG_EXT2_FS=y
CONFIG_EXT3_FS=y

Note the system detects the hds correctly as the chipset drivers are
compiled in and I can see them being detected on boot.

I am using loop-AES-3.2a and the actual loop device is fine - i.e. make
tests is ok.

The contents of my build-inittrd.sh file are as follows:

USEDEVFS=0
USEPIVOT=1
BOOTDEV=/dev/hda1
BOOTTYPE=ext2
CRYPTROOT=/dev/hda2
ROOTTYPE=ext3
LOINIT="-I 0"
USEGPGKEY=1
GPGKEYFILE=rootkey.gpg
EXTERNALGPGFILES=0
USEMODULE=1
INITRDONLY=0
ROOTLOOPINDEX=5
TEMPLOOPINDEX=7
DESTINATIONPREFIX=/boot

I don't know if it is relevant but it is running on a heavily modified
ubuntu 7.04.

Any help is greatly appreciated.

Regards,

Jivko







-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070718113638</emailId><senderName>Fog_Watch</senderName><senderEmail>db5@exemail.com.au</senderEmail><timestampReceived>2007-07-18 11:36:38-0400</timestampReceived><subject>LVM2 logical volumes on Loop-AES</subject><body>

Hello

I would like to encrypt most of my file server.  To do this I thought I
would place logical volumes on top of loop-aes.  This is where I've got
to:
#losetup -K /mnt/keys/keyfile.gpg /dev/loop3 /dev/hda6
#pvcreate /dev/loop3
Physical volume "/dev/loop3" successfully created
#vgcreate vg /dev/loop3
 Found duplicate PV SO5CgPDJuTwi8LFh7x7N4qqCaEU70hJ9: using /dev/hda6
not /dev/loop3 Found duplicate PV SO5CgPDJuTwi8LFh7x7N4qqCaEU70hJ9:
using /dev/loop3 not /dev/hda6 Found duplicate PV
SO5CgPDJuTwi8LFh7x7N4qqCaEU70hJ9: using /dev/hda6 not /dev/loop3 Found
duplicate PV SO5CgPDJuTwi8LFh7x7N4qqCaEU70hJ9: using /dev/loop3
not /dev/hda6 Volume group "vg" successfully created

Well, that looks ugly to me.  There is something I'm not doing
correctly here.  I know this is a vague question but, do you have any
pointers as to whether and how LVM2 logical volumes should be
established on loop-aes loop devices?

Thanks for reading.

Regards

Fog_Watch.
-- 
Lose wait.  Get Gentoo.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070829092502</emailId><senderName>Markus Huehnerbein</senderName><senderEmail>silencer@gmx.ch</senderEmail><timestampReceived>2007-08-29 09:25:02-0400</timestampReceived><subject>newbie: Speed of loop-aes</subject><body>

Hi List,

I did some performance tests using the benchmark bonnie++ to evaluate
different disk encryption possibilities. The results regarding loop-aes
are a bit strange for my understanding. I ran the tests on a notebook
with Debian Etch, 1GB RAM and a Linux 2.6.22.2 Kernel.

Bonnie was startet with the following parameters:
bonnie++ -b -u root -s 4000

As a result loop-aes has a sequential input (block) of 29127 K/sec where
the sequential input with no encryption is 25123 K/sec. The same with
sequential output (block) (loop-aes: 27633 K/sec and no encryption:
24267 K/sec).

What I don't understand is how encrypted reads and writes per block
could be faster as plaintext reads / writes? Any comments are welcome!

Kind regards,
Markus

P.S.: The bonnie++ output:
LOOP-AES:
 ------Sequential Output------ --Sequential Input- --Random-
 -Per Chr- --Block-- -Rewrite- -Per Chr- --Block-- --Seeks--
Size K/sec %CP K/sec %CP K/sec %CP K/sec %CP K/sec %CP  /sec %CP
4000M 18554  59 27633   7 13696   3 18922  77 29127   4 102.3   0

NO ENCRYPTION:
 ------Sequential Output------ --Sequential Input- --Random-
 -Per Chr- --Block-- -Rewrite- -Per Chr- --Block-- --Seeks--
Size K/sec %CP K/sec %CP K/sec %CP K/sec %CP K/sec %CP  /sec %CP
4000M 24085  77 24267   6 11978   3 24825  75 25123   3 103.9   0


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070829095853</emailId><senderName>Gisle_Sælensminde</senderName><senderEmail>gisle.salensminde@bccs.uib.no</senderEmail><timestampReceived>2007-08-29 09:58:53-0400</timestampReceived><subject>Re: newbie: Speed of loop-aes</subject><body>

Markus Huehnerbein wrote:
&gt; Hi List,
&gt;
&gt; I did some performance tests using the benchmark bonnie++ to evaluate
&gt; different disk encryption possibilities. The results regarding loop-aes
&gt; are a bit strange for my understanding. I ran the tests on a notebook
&gt; with Debian Etch, 1GB RAM and a Linux 2.6.22.2 Kernel.
&gt;
&gt; Bonnie was startet with the following parameters:
&gt; bonnie++ -b -u root -s 4000
&gt;
&gt; As a result loop-aes has a sequential input (block) of 29127 K/sec where
&gt; the sequential input with no encryption is 25123 K/sec. The same with
&gt; sequential output (block) (loop-aes: 27633 K/sec and no encryption:
&gt; 24267 K/sec).
&gt;
&gt; What I don't understand is how encrypted reads and writes per block
&gt; could be faster as plaintext reads / writes? Any comments are welcome!
&gt;
&gt;   
Now I know very little about the bonnie++ benchmark, but it says that

4MB is way to little to show anything. Factors like caching and process 
overhead (which benchmark did you run first?) and other similar factors 
will dominate. Try with at least 4GB. Since the bonnie program test for 
database-like access according to it's website, it will probably not 
make much sense before you test it with file sizes significantly larger 
than the main memory.

If you have not set hdparm, sometimes DMA is not used by the kernel. 
This is the safest on some buggy (but common) mainboards, and may be the 
default on your system. If this is set, non-encrypted writing will be 
much slower than it need to be. Read the manual page for hdparm.

With DMA enabled, the null cipher (that is no encryption) can be as slow 
as an encrypted filesystem, because what slows things down is that the 
block has to be copied into RAM.

&gt; Kind regards,
&gt; Markus
&gt;
&gt; P.S.: The bonnie++ output:
&gt; LOOP-AES:
&gt;  ------Sequential Output------ --Sequential Input- --Random-
&gt;  -Per Chr- --Block-- -Rewrite- -Per Chr- --Block-- --Seeks--
&gt; Size K/sec %CP K/sec %CP K/sec %CP K/sec %CP K/sec %CP  /sec %CP
&gt; 4000M 18554  59 27633   7 13696   3 18922  77 29127   4 102.3   0
&gt;
&gt; NO ENCRYPTION:
&gt;  ------Sequential Output------ --Sequential Input- --Random-
&gt;  -Per Chr- --Block-- -Rewrite- -Per Chr- --Block-- --Seeks--
&gt; Size K/sec %CP K/sec %CP K/sec %CP K/sec %CP K/sec %CP  /sec %CP
&gt; 4000M 24085  77 24267   6 11978   3 24825  75 25123   3 103.9   0
&gt;
&gt;
&gt; -
&gt; Linux-crypto:  cryptography in and on the Linux system
&gt; Archive:       http://mail.nl.linux.org/linux-crypto/
&gt;
&gt;   


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070829103208</emailId><senderName>Markus Huehnerbein</senderName><senderEmail>silencer@gmx.ch</senderEmail><timestampReceived>2007-08-29 10:32:08-0400</timestampReceived><subject>Re: newbie: Speed of loop-aes</subject><body>

As I understand the man-Page of bonnie++ it says that "-s indicates the
 size of the file(s) for IO performance measures in megabytes...". So it
should be 4000 MB. Sorry, I forgot to state that in the mail.

Thanks for the hdparm suggestion I will set hdparm and run the test again.

Gisle Sælensminde wrote:
&gt; Markus Huehnerbein wrote:
&gt;&gt; Hi List,
&gt;&gt;
&gt;&gt; I did some performance tests using the benchmark bonnie++ to evaluate
&gt;&gt; different disk encryption possibilities. The results regarding loop-aes
&gt;&gt; are a bit strange for my understanding. I ran the tests on a notebook
&gt;&gt; with Debian Etch, 1GB RAM and a Linux 2.6.22.2 Kernel.
&gt;&gt;
&gt;&gt; Bonnie was startet with the following parameters:
&gt;&gt; bonnie++ -b -u root -s 4000
&gt;&gt;
&gt;&gt; As a result loop-aes has a sequential input (block) of 29127 K/sec where
&gt;&gt; the sequential input with no encryption is 25123 K/sec. The same with
&gt;&gt; sequential output (block) (loop-aes: 27633 K/sec and no encryption:
&gt;&gt; 24267 K/sec).
&gt;&gt;
&gt;&gt; What I don't understand is how encrypted reads and writes per block
&gt;&gt; could be faster as plaintext reads / writes? Any comments are welcome!
&gt;&gt;
&gt;&gt;   
&gt; Now I know very little about the bonnie++ benchmark, but it says that
&gt; 
&gt; 4MB is way to little to show anything. Factors like caching and process
&gt; overhead (which benchmark did you run first?) and other similar factors
&gt; will dominate. Try with at least 4GB. Since the bonnie program test for
&gt; database-like access according to it's website, it will probably not
&gt; make much sense before you test it with file sizes significantly larger
&gt; than the main memory.
&gt; 
&gt; If you have not set hdparm, sometimes DMA is not used by the kernel.
&gt; This is the safest on some buggy (but common) mainboards, and may be the
&gt; default on your system. If this is set, non-encrypted writing will be
&gt; much slower than it need to be. Read the manual page for hdparm.
&gt; 
&gt; With DMA enabled, the null cipher (that is no encryption) can be as slow
&gt; as an encrypted filesystem, because what slows things down is that the
&gt; block has to be copied into RAM.
&gt; 
&gt;&gt; Kind regards,
&gt;&gt; Markus
&gt;&gt;
&gt;&gt; P.S.: The bonnie++ output:
&gt;&gt; LOOP-AES:
&gt;&gt;  ------Sequential Output------ --Sequential Input- --Random-
&gt;&gt;  -Per Chr- --Block-- -Rewrite- -Per Chr- --Block-- --Seeks--
&gt;&gt; Size K/sec %CP K/sec %CP K/sec %CP K/sec %CP K/sec %CP  /sec %CP
&gt;&gt; 4000M 18554  59 27633   7 13696   3 18922  77 29127   4 102.3   0
&gt;&gt;
&gt;&gt; NO ENCRYPTION:
&gt;&gt;  ------Sequential Output------ --Sequential Input- --Random-
&gt;&gt;  -Per Chr- --Block-- -Rewrite- -Per Chr- --Block-- --Seeks--
&gt;&gt; Size K/sec %CP K/sec %CP K/sec %CP K/sec %CP K/sec %CP  /sec %CP
&gt;&gt; 4000M 24085  77 24267   6 11978   3 24825  75 25123   3 103.9   0
&gt;&gt;
&gt;&gt;
&gt;&gt; -
&gt;&gt; Linux-crypto:  cryptography in and on the Linux system
&gt;&gt; Archive:       http://mail.nl.linux.org/linux-crypto/
&gt;&gt;
&gt;&gt;   
&gt; 



-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070815042534</emailId><senderName>Fog_Watch</senderName><senderEmail>db5@exemail.com.au</senderEmail><timestampReceived>2007-08-15 04:25:34-0400</timestampReceived><subject>Re: LVM2 logical volumes on Loop-AES</subject><body>

Hello

I am aiming to boot from logical volumes that are attached to
an encrypted /dev/loop which is in turn attached to a /dev/hda.
I hope to have all but /boot encrypted, yet retain the flexibility of
lvm2. To date I have failed.

I can encrypt my root partition according to Example 5 in the
readme.  And, I can create logical volumes on top of an encrypted
loopback.  It is in the murky world of the init ram disk that a start
clutching at shadows.  

I'll start with a question that I am moderately sure of.  In
build-initrd.conf, what should CRYPTROOT=?  CRYPTROOT=/dev/vg/root does
not work (not surprising in retrospect).  Or, should I be using
something different from build-initrd.sh? 

Regards

Fog_Watch. 

-- 
Lose wait.  Get Gentoo.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070815115358</emailId><senderName>RB</senderName><senderEmail>aoz.syn@gmail.com</senderEmail><timestampReceived>2007-08-15 11:53:58-0400</timestampReceived><subject>Re: LVM2 logical volumes on Loop-AES</subject><body>

Not having used loop-aes' initrd generation script, I can't say, plus
I use dm-crypt (egad!).  However, there is light at the other end of
the tunnel - LVM works quite nicely on top of encrypted volumes.  Your
script will need to know an extra chunk of data and do another bit
beyond standard encrypted-root startup:

 - where the 'real_root' is (that's what I call it in my init) - i.e.
/dev/vg/root
 - initialize LVM - 'pvscan; vgscan; vgchange -ay; lvscan' is, again, what I do.

I wish I could help you more, but haven't ever done LVM over loop-aes.
 Anyone else?

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070815122401</emailId><senderName>Fog_Watch</senderName><senderEmail>db5@exemail.com.au</senderEmail><timestampReceived>2007-08-15 12:24:01-0400</timestampReceived><subject>Re: LVM2 logical volumes on Loop-AES</subject><body>

On Wed, 15 Aug 2007 06:53:58 -0500
RB &lt;aoz.syn@gmail.com&gt; wrote:

&gt; I use dm-crypt (egad!).  
Indeed!
&gt;  - initialize LVM - 'pvscan; vgscan; vgchange -ay; lvscan' is, again,
That sounds like generally the thing I need to do - something to make
CRYPTROOT=/dev/vg/root a sensible option.
&gt;  Anyone else?

Regards

Fog_Watch.

-- 
Lose wait.  Get Gentoo.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070815170632</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-08-15 17:06:32-0400</timestampReceived><subject>Re: LVM2 logical volumes on Loop-AES</subject><body>

Fog_Watch wrote:
&gt; I am aiming to boot from logical volumes that are attached to
&gt; an encrypted /dev/loop which is in turn attached to a /dev/hda.
&gt; I hope to have all but /boot encrypted, yet retain the flexibility of
&gt; lvm2. To date I have failed.
&gt; 
&gt; I can encrypt my root partition according to Example 5 in the
&gt; readme.  And, I can create logical volumes on top of an encrypted
&gt; loopback.  It is in the murky world of the init ram disk that a start
&gt; clutching at shadows.
&gt; 
&gt; I'll start with a question that I am moderately sure of.  In
&gt; build-initrd.conf, what should CRYPTROOT=?  CRYPTROOT=/dev/vg/root does
&gt; not work (not surprising in retrospect).  Or, should I be using
&gt; something different from build-initrd.sh?

One of the config options in build-initrd.sh is USEROOTSETUP. If you set
that to USEROOTSETUP=1 , then created initrd will mount BOOTDEV as /lib, and
run /lib/rootsetup program or script instead of /lib/losetup program. If
/lib/rootsetup is a shell script, then a shell (and its libraries) must be
manually copied to boot partition. The script then sets up needed logical
volume and calls losetup to do the loop setup work. rootsetup program/script
needs to able to both set up a device and also tear it down (in case mount
fails, and mount is tried again). rootsetup program/script gets same command
line parameters as losetup. In following example all command line parameters
are ignored, with exception of first one that used to determine whether the
script should set up a loop device or tear it down. Initrd image has only
few static device nodes. Additional needed device nodes need to be created
by the script. Any external program that the script uses (and their
libraries) you need to manually copy to boot partition.

Something like this: (completely untested!)

#!/lib/sh
if [ "$1" != "-d" ] ; then
    # INSERT LOGICAL VOLUME SETUP HERE
    /lib/losetup -e AES128 -K /lib/rootkey.gpg -G /lib /dev/loop5 /dev/vg/root
else
    /lib/losetup -d /dev/loop5
    # INSERT LOGICAL VOLUME TEARDOWN HERE
fi

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070815182219</emailId><senderName>RB</senderName><senderEmail>aoz.syn@gmail.com</senderEmail><timestampReceived>2007-08-15 18:22:19-0400</timestampReceived><subject>Re: LVM2 logical volumes on Loop-AES</subject><body>

As more of a spectator I hate to be picky, but I think this still
points toward 'aes-loop on LVM' instead of 'LVM on aes-loop', the
latter of which I believe the OP was shooting for.  Therefore, I think
the following may be more appropriate (again, completely untested):

#!/lib/sh
if [ "$1" != "-d" ] ; then
    /lib/losetup -e AES128 -K /lib/rootkey.gpg -G /lib /dev/loop5 /dev/pv_for_lv
    # INSERT LOGICAL VOLUME SETUP HERE
else
    # INSERT LOGICAL VOLUME TEARDOWN HERE
    /lib/losetup -d /dev/loop5
fi

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070816064806</emailId><senderName>Fog_Watch</senderName><senderEmail>db5@exemail.com.au</senderEmail><timestampReceived>2007-08-16 06:48:06-0400</timestampReceived><subject>Re: LVM2 logical volumes on Loop-AES</subject><body>

On Wed, 15 Aug 2007 20:06:32 +0300
Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:

&gt; Fog_Watch wrote:
&gt; &gt; I am aiming to boot from logical volumes that are attached to
&gt; &gt; an encrypted /dev/loop which is in turn attached to a /dev/hda.
&gt; &gt; I hope to have all but /boot encrypted, yet retain the flexibility
&gt; &gt; of lvm2. To date I have failed.
&gt; &gt; 
snip
 
&gt; One of the config options in build-initrd.sh is USEROOTSETUP. If you
&gt; set that to USEROOTSETUP=1 , 
Done
&gt; then created initrd will mount BOOTDEV
/dev/hda1
&gt; as /lib, and run /lib/rootsetup program or script instead
&gt; of /lib/losetup program. If /lib/rootsetup is a shell script, then a
&gt; shell (and its libraries) must be manually copied to boot partition.
I am using a script along the lines you suggested.  The shell I chose
was dash (static), which was copied to /boot.
&gt; The script then sets up needed logical volume and calls losetup to do
&gt; the loop setup work. rootsetup program/script needs to able to both
&gt; set up a device and also tear it down (in case mount fails, and mount
&gt; is tried again). rootsetup program/script gets same command line
&gt; parameters as losetup. In following example all command line
&gt; parameters are ignored, with exception of first one that used to
&gt; determine whether the script should set up a loop device or tear it
&gt; down. 
I'm not understanding this bit.  The script (rootsetup) tests for
"-d", but I don't know where this parameter is set.

And, the parameters "-e AES128 -K /lib/rootkey.gpg -G /lib /dev/loop5"
in the following rootsetup are ignored.  I don't know why they are
there.
&gt; Initrd image has only few static device nodes. Additional
&gt; needed device nodes need to be created by the script. 
My encrypted partition is /dev/hda6.  Does that mean that my rootsetup
script should include "mknod /dev/hda6 b 3 6" (wild guess)?  
&gt; Any external
&gt; program that the script uses (and their libraries) you need to
&gt; manually copy to boot partition.
copied in lvm, mknod and dash to /boot.  Apparently no additional
libraries required.
&gt; 
&gt; Something like this: (completely untested!)
&gt; 
&gt; #!/lib/sh
&gt; if [ "$1" != "-d" ] ; then
&gt;     # INSERT LOGICAL VOLUME SETUP HERE
&gt;     /lib/losetup -e AES128 -K /lib/rootkey.gpg
&gt; -G /lib /dev/loop5 /dev/vg/root else
&gt;     /lib/losetup -d /dev/loop5
&gt;     # INSERT LOGICAL VOLUME TEARDOWN HERE
&gt; fi
&gt; 
RB is correct is suggesting that I am aiming for LVM on loop-aes.  So,
the script I have conjured up is as follows:

#!/lib/sh
if [ "$1" != "-d" ] ; then
    /lib/mknod /dev/hda6 b 3 6 #necessary?
    /lib/losetup -e AES128 -K /lib/rootkey.gpg \
           -G /lib /dev/loop5 /dev/hda6 
    # INSERT LOGICAL VOLUME SETUP HERE 
    /lib/lvm vgscan --mknodes 
else
    # INSERT LOGICAL VOLUME TEARDOWN HERE
    /lib/losetup -d /dev/loop5
fi

During boot, the kernel loads and the machine then shuts down with the
following error repeated six times:
	Command "/lib/rootsetup -e AES128 -I 0 -K /lib/rootkey.gpg
	-G /lib /dev/loop5 /dev/hda6" returned error

Hmmmmmm, any clues?

Jari, thanks for the suggestions.

Regards

Fog_Watch.

-- 
Lose wait.  Get Gentoo.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070816163547</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-08-16 16:35:47-0400</timestampReceived><subject>Re: LVM2 logical volumes on Loop-AES</subject><body>

Fog_Watch wrote:
&gt; &gt; rootsetup program/script gets same command line
&gt; &gt; parameters as losetup. In following example all command line
&gt; &gt; parameters are ignored, with exception of first one that used to
&gt; &gt; determine whether the script should set up a loop device or tear it
&gt; &gt; down.
&gt; I'm not understanding this bit.  The script (rootsetup) tests for
&gt; "-d", but I don't know where this parameter is set.

When config says USEROOTSETUP=1, the name of the losetup program is changed
to rootsetup. So, instead of running

 /lib/losetup -e AES128 -I 0 -K /lib/rootkey.gpg -G /lib /dev/loop5 /dev/hda6
 /lib/losetup -d /dev/loop5

initrd code runs

 /lib/rootsetup -e AES128 -I 0 -K /lib/rootkey.gpg -G /lib /dev/loop5 /dev/hda6
 /lib/rootsetup -d /dev/loop5

using exact same command line parameters. It is up to the rootsetup script
to do something useful with them. The first command line parameter will be
either -e or -d depending whether initrd is trying to set up or tear down
the device.

&gt; My encrypted partition is /dev/hda6.  Does that mean that my rootsetup
&gt; script should include "mknod /dev/hda6 b 3 6" (wild guess)?

No.

You have CRYPTROOT=/dev/hda6 in your config. build-initrd.sh script creates
that device node for you.

&gt; RB is correct is suggesting that I am aiming for LVM on loop-aes.  So,
&gt; the script I have conjured up is as follows:
&gt; 
&gt; #!/lib/sh
&gt; if [ "$1" != "-d" ] ; then
&gt;     /lib/mknod /dev/hda6 b 3 6 #necessary?
&gt;     /lib/losetup -e AES128 -K /lib/rootkey.gpg \
&gt;            -G /lib /dev/loop5 /dev/hda6
&gt;     # INSERT LOGICAL VOLUME SETUP HERE
&gt;     /lib/lvm vgscan --mknodes
&gt; else
&gt;     # INSERT LOGICAL VOLUME TEARDOWN HERE
&gt;     /lib/losetup -d /dev/loop5
&gt; fi

First parameter $1 is either "-e" or "-d", so that "if [ -e .... ]" line
didn't work because shell interpreted that as "true if file exists".
My fault, sorry. But I did say that it was completely untested.

#!/lib/sh
if [ "x$1" != "x-d" ] ; then
    /lib/losetup -e AES128 -K /lib/rootkey.gpg -G /lib /dev/loop5 /dev/hda6
    if [ $? = 0 ] ; then
        /lib/lvm vgscan --mknodes
        # initrd will attempt to mount /dev/loop5, so create fake entry here
        /lib/rm /dev/loop5
        /lib/mknod -m 600 /dev/loop5 b ????? ?????
    fi
else
    # losetup needs loop5 as real loop device node, so create the old one again
    /lib/rm /dev/loop5
    /lib/mknod -m 600 /dev/loop5 b 7 5
    /lib/losetup -d /dev/loop5
fi

After successfull setup, initrd code will attempt to mount a device called
/dev/loop5 so above script uses /lib/rm to remove /dev/loop5 device node and
then creates new node using same /dev/loop5 name, but different major+minor.
Replace those ????? in above script with major+minor of the device you want
to be mounted as root. If the "detach loop" branch of the script is called,
it will have to create the original device /dev/loop5 again, using major=7
minor=5.

I'm not sure if that --mknodes option for lvm vgscan is needed at all. You
can also try without it. The problem is that if it creates many device
nodes, the tiny initrd may run out of space.

&gt; During boot, the kernel loads and the machine then shuts down with the
&gt; following error repeated six times:
&gt;         Command "/lib/rootsetup -e AES128 -I 0 -K /lib/rootkey.gpg
&gt;         -G /lib /dev/loop5 /dev/hda6" returned error

rootsetup script's "if [ -e .... ]" was wrong.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070817023621</emailId><senderName>Ian</senderName><senderEmail>db5@exemail.com.au</senderEmail><timestampReceived>2007-08-17 02:36:21-0400</timestampReceived><subject>Re: LVM2 logical volumes on Loop-AES</subject><body>

On Thu, 16 Aug 2007 19:35:47 +0300
Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:

&gt; exists". My fault, sorry. But I did say that it was completely
&gt; untested.
I am putting my hand up to be the guinea pig to do the "testing".
&gt; 
&gt; #!/lib/sh
&gt; if [ "x$1" != "x-d" ] ; then
&gt;     /lib/losetup -e AES128 -K /lib/rootkey.gpg
&gt; -G /lib /dev/loop5 /dev/hda6 if [ $? = 0 ] ; then
&gt;         /lib/lvm vgscan --mknodes
&gt;         # initrd will attempt to mount /dev/loop5, so create fake
&gt; entry here /lib/rm /dev/loop5
returns error "/lib/rm: cannot remove '/dev/loop5': Read-only file
system".  So, initrd is mounted ro, and should be rw?  Sorry,
suggestion?
&gt;         /lib/mknod -m 600 /dev/loop5 b ????? ?????
Same.  Returns error, "/lib/mknod: '/dev/loop5': File exists".
&gt;     fi
&gt; else
&gt;     # losetup needs loop5 as real loop device node, so create the old
&gt; one again /lib/rm /dev/loop5
&gt;     /lib/mknod -m 600 /dev/loop5 b 7 5
&gt;     /lib/losetup -d /dev/loop5
&gt; fi
&gt; 
&gt; After successfull setup, initrd code will attempt to mount a device
&gt; called /dev/loop5 so above script uses /lib/rm to remove /dev/loop5
&gt; device node and then creates new node using same /dev/loop5 name, but
&gt; different major+minor. Replace those ????? in above script with
&gt; major+minor of the device you want to be mounted as root. If the
I would like root to, in turn, be mounted on /dev/loop5.  What, I
1	setup /dev/loop5 on the /dev/loop5 that is already in
initrd (major=7 and minor=5).
2	rm /dev/loop5
3	mknod /dev/loop5 with fake major and minor, like 4 and 4
respectively?
Don't understand this bit.  Sorry, you've lost me.
&gt; "detach loop" branch of the script is called, it will have to create
&gt; the original device /dev/loop5 again, using major=7 minor=5.
&gt; 
&gt; I'm not sure if that --mknodes option for lvm vgscan is needed at
&gt; all. You can also try without it. The problem is that if it creates
&gt; many device nodes, the tiny initrd may run out of space.
I'm not sure either.  On one test, with lvm uncommented, the script
returned an ugly "Set environment variable LVM_SYSTEM_DIR to
alternative location or empty string".  I'll get to this later.
&gt; 
&gt; 

I have ROOTTYPE=ext3 in my build-initrd.sh config.  I presume this is
ignored because I am using rootsetup?

Jari, thank you for your perseverance. 

Regards

Fog_Watch.
-- 
Lose wait.  Get Gentoo.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070817181808</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-08-17 18:18:08-0400</timestampReceived><subject>Re: LVM2 logical volumes on Loop-AES</subject><body>

Ian wrote:
&gt; returns error "/lib/rm: cannot remove '/dev/loop5': Read-only file
&gt; system".  So, initrd is mounted ro, and should be rw?  Sorry,
&gt; suggestion?

That was a quick hack that didn't work.

&gt; I would like root to, in turn, be mounted on /dev/loop5.  What, I
&gt; 1       setup /dev/loop5 on the /dev/loop5 that is already in
&gt; initrd (major=7 and minor=5).
&gt; 2       rm /dev/loop5
&gt; 3       mknod /dev/loop5 with fake major and minor, like 4 and 4
&gt; respectively?
&gt; Don't understand this bit.  Sorry, you've lost me.

It was an attempt to "redirect" mount system call that initrd code was about
do next. Didn't work.

&gt; On one test, with lvm uncommented, the script
&gt; returned an ugly "Set environment variable LVM_SYSTEM_DIR to
&gt; alternative location or empty string".  I'll get to this later.

Maybe that lvm binary expects /sys and /proc filesystems to be mounted, and
failed because they were not.

&gt; I have ROOTTYPE=ext3 in my build-initrd.sh config.  I presume this is
&gt; ignored because I am using rootsetup?

That is not ignored.

What the initrd code attempts to do, in short:

1) mount some device as /lib, using configured file system type
2) if configured, run loadkeys from /lib to re-map keyboard
3) if configured, load loop kernel module from /lib/modules-SOMETHING/
4) run losetup from /lib, using many config parameters
5) mount the loop device at /new-root, using configured file system type
6) unmount /lib
7) call pivot_root system call to switch /new-root -&gt; / and initrd minix
   root file system -&gt; /initrd
8) run /sbin/init from encrypted root

Step 4 is possible to divert to rootsetup program/script that does some
unspecified magic to derive the passphrase from someplace and feed it to
losetup in non-interactive manner.

In your case the rootsetup method is insufficient. Time for plan B.

Below is experimental patch for build-initrd.sh that adds these between
steps 4 and 5:

4a) mount /proc
4b) mount /sys
4c) run /lib/losetup -a
4d) unmount /sys
4e) unmount /proc

And also, the device that gets mounted at step 5 can be configured to be
something other than a loop device. This patch is experimental because I
didn't make it handle any error cases or attempt to make this new behavior
configurable.

That "mknod dev/root b 7 5" (line 765) at the end of the patch decides what
device gets mounted at step 5. You need to change that. Also, step 4c (at
line 564) needs to be changed to run "/lib/lvm vgscan". /lib/rootsetup
script and /lib/sh and other programs (/lib/lvm excluded) that you copied to
your boot partition can be removed. Set USEROOTSETUP=0 in build-initrd.sh
config, this plan B does not need that.

This time I tested this patch. I don't have lvm on my test box, so I used
"/lib/losetup -a" as the program to run between loop setup (at step 4) and
mount (at step 5).

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD


--- ../loop-AES-v3.2a/build-initrd.sh	2007-05-14 15:18:12.000000000 +0300
+++ ./build-initrd.sh	2007-08-17 19:58:10.000000000 +0300
@@ -2,7 +2,7 @@
 #
 #  build-initrd.sh
 #
-#  Written by Jari Ruusu, May 14 2007
+#  Written by Jari Ruusu, August 14 2007
 #
 #  Copyright 2001-2007 by Jari Ruusu.
 #  Redistribution of this file is permitted under the GNU Public License.
@@ -192,6 +192,11 @@
 # The dietlibc can be found at http://www.fefe.de/dietlibc/
 USEDIETLIBC=1
 
+# C compiler used to compile /linuxrc program.
+# 32bit x86 ubuntu-7.04 gcc-4.1.2 is known to miscompile /linuxrc. Affected
+# users should install gcc-3.3 package, and change this to GCC=gcc-3.3
+GCC=gcc
+
 # 1 = load extra module, 0 = don't load
 # If this is enabled, module must be manually copied to
 # /boot/modules-KERNELRELEASE/ directory under name like foomatic.o
@@ -553,9 +558,17 @@
     wrStr("\n");
 #endif
 
+    mount("none", "/proc", "proc", MS_MGC_VAL, 0);
+    mount("none", "/sys", "sysfs", MS_MGC_VAL, 0);
+    buf[0] = 0;
+    strCat(buf, "/lib/losetup -a");
+    exeWait(buf);
+    umount("/sysfs");
+    umount("/proc");
+
 #if ${USEPIVOT}
-    if(mount("/dev/loop${DEVFSSLASH1}${ROOTLOOPINDEX}", "/new-root", "${ROOTTYPE}", \
                MS_MGC_VAL | MS_RDONLY, 0)) {
-        wrStr("Looks like you didn't say the magic word. Mounting \
/dev/loop${DEVFSSLASH1}${ROOTLOOPINDEX} failed\n"); +    if(mount("/dev/root", \
"/new-root", "${ROOTTYPE}", MS_MGC_VAL | MS_RDONLY, 0)) { +        wrStr("Looks like \
you didn't say the magic word. Mounting /dev/root failed\n");  buf[0] = 0;
         strCat(buf, "/lib/${LOSETUPPROG} -d \
/dev/loop${DEVFSSLASH1}${ROOTLOOPINDEX}");  if(exeWait(buf)) goto fail3;
@@ -632,9 +645,9 @@
 EOF
 
 if [ ${USEDIETLIBC} == 1 ] ; then
-    diet gcc -Wall -O2 -s -static -pipe tmp-c-$$.c -o tmp-c-$$
+    diet ${GCC} -Wall -O2 -s -static -pipe tmp-c-$$.c -o tmp-c-$$
 else
-    gcc -Wall -O2 -s -static -nostartfiles -pipe tmp-c-$$.c -o tmp-c-$$
+    ${GCC} -Wall -O2 -s -static -nostartfiles -pipe tmp-c-$$.c -o tmp-c-$$
 fi
 rm -f tmp-c-$$.[co]
 
@@ -655,6 +668,8 @@
     y=`expr ${y} + 1`
 fi
 
+y=`expr ${y} + 2`
+
 dd if=/dev/zero of=tmp-i-$$ bs=1024 count=${y}
 /sbin/mkfs -t minix -i 32 tmp-i-$$
 mkdir tmp-d-$$
@@ -675,6 +690,7 @@
 
 if [ ${USEPIVOT} == 1 ] ; then
     mkdir new-root
+    mkdir proc sys
 else
     mkdir proc
 fi
@@ -744,6 +760,9 @@
     mknod dev/ram0 b 1 0
     mknod dev/ram1 b 1 1
     mknod dev/loop${ROOTLOOPINDEX} b 7 ${ROOTLOOPINDEX}
+
+    # root device node, this device is what gets mounted as root
+    mknod dev/root b 7 5
 fi
 
 cd ..

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070817191643</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-08-17 19:16:43-0400</timestampReceived><subject>Re: LVM2 logical volumes on Loop-AES</subject><body>

Jari Ruusu wrote:
&gt; Below is experimental patch for build-initrd.sh that adds these between
&gt; steps 4 and 5:

Fixed one bug. Try this one instead of the one I posted earlier.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD


--- ../loop-AES-v3.2a/build-initrd.sh	2007-05-14 15:18:12.000000000 +0300
+++ ./build-initrd.sh	2007-08-17 22:12:06.000000000 +0300
@@ -2,7 +2,7 @@
 #
 #  build-initrd.sh
 #
-#  Written by Jari Ruusu, May 14 2007
+#  Written by Jari Ruusu, August 14 2007
 #
 #  Copyright 2001-2007 by Jari Ruusu.
 #  Redistribution of this file is permitted under the GNU Public License.
@@ -192,6 +192,11 @@
 # The dietlibc can be found at http://www.fefe.de/dietlibc/
 USEDIETLIBC=1
 
+# C compiler used to compile /linuxrc program.
+# 32bit x86 ubuntu-7.04 gcc-4.1.2 is known to miscompile /linuxrc. Affected
+# users should install gcc-3.3 package, and change this to GCC=gcc-3.3
+GCC=gcc
+
 # 1 = load extra module, 0 = don't load
 # If this is enabled, module must be manually copied to
 # /boot/modules-KERNELRELEASE/ directory under name like foomatic.o
@@ -553,9 +558,17 @@
     wrStr("\n");
 #endif
 
+    mount("none", "/proc", "proc", MS_MGC_VAL, 0);
+    mount("none", "/sys", "sysfs", MS_MGC_VAL, 0);
+    buf[0] = 0;
+    strCat(buf, "/lib/losetup -a");
+    exeWait(buf);
+    umount("/sys");
+    umount("/proc");
+
 #if ${USEPIVOT}
-    if(mount("/dev/loop${DEVFSSLASH1}${ROOTLOOPINDEX}", "/new-root", "${ROOTTYPE}", \
                MS_MGC_VAL | MS_RDONLY, 0)) {
-        wrStr("Looks like you didn't say the magic word. Mounting \
/dev/loop${DEVFSSLASH1}${ROOTLOOPINDEX} failed\n"); +    if(mount("/dev/root", \
"/new-root", "${ROOTTYPE}", MS_MGC_VAL | MS_RDONLY, 0)) { +        wrStr("Looks like \
you didn't say the magic word. Mounting /dev/root failed\n");  buf[0] = 0;
         strCat(buf, "/lib/${LOSETUPPROG} -d \
/dev/loop${DEVFSSLASH1}${ROOTLOOPINDEX}");  if(exeWait(buf)) goto fail3;
@@ -632,9 +645,9 @@
 EOF
 
 if [ ${USEDIETLIBC} == 1 ] ; then
-    diet gcc -Wall -O2 -s -static -pipe tmp-c-$$.c -o tmp-c-$$
+    diet ${GCC} -Wall -O2 -s -static -pipe tmp-c-$$.c -o tmp-c-$$
 else
-    gcc -Wall -O2 -s -static -nostartfiles -pipe tmp-c-$$.c -o tmp-c-$$
+    ${GCC} -Wall -O2 -s -static -nostartfiles -pipe tmp-c-$$.c -o tmp-c-$$
 fi
 rm -f tmp-c-$$.[co]
 
@@ -655,6 +668,8 @@
     y=`expr ${y} + 1`
 fi
 
+y=`expr ${y} + 2`
+
 dd if=/dev/zero of=tmp-i-$$ bs=1024 count=${y}
 /sbin/mkfs -t minix -i 32 tmp-i-$$
 mkdir tmp-d-$$
@@ -675,6 +690,7 @@
 
 if [ ${USEPIVOT} == 1 ] ; then
     mkdir new-root
+    mkdir proc sys
 else
     mkdir proc
 fi
@@ -744,6 +760,9 @@
     mknod dev/ram0 b 1 0
     mknod dev/ram1 b 1 1
     mknod dev/loop${ROOTLOOPINDEX} b 7 ${ROOTLOOPINDEX}
+
+    # root device node, this device is what gets mounted as root
+    mknod dev/root b 7 5
 fi
 
 cd ..

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070818101931</emailId><senderName>Fog_Watch</senderName><senderEmail>db5@exemail.com.au</senderEmail><timestampReceived>2007-08-18 10:19:31-0400</timestampReceived><subject>Re: LVM2 logical volumes on Loop-AES</subject><body>

On Fri, 17 Aug 2007 21:18:08 +0300
Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:

&gt; 4a) mount /proc
http://sources.redhat.com/cgi-bin/cvsweb.cgi/~checkout~/LVM2/scripts/lvm2create_initrd/lvm2create_initrd?content-type=text/plain&amp;cvsroot=lvm2&amp;only_with_tag=HEAD
 includes:
# We need /proc for device mapper
echo "$PRE Mounting /proc"
mount -t proc none /proc
&gt; 4b) mount /sys
http://sources.redhat.com/cgi-bin/cvsweb.cgi/~checkout~/LVM2/scripts/lvm2create_initrd/lvm2create_initrd?content-type=text/plain&amp;cvsroot=lvm2&amp;only_with_tag=HEAD
 does not say anything about /sys.
&gt; 4c) run /lib/losetup -a
&gt; 4d) unmount /sys
&gt; 4e) unmount /proc
&gt; 
&gt; That "mknod dev/root b 7 5" (line 765) at the end of the patch
&gt; decides what device gets mounted at step 5. You need to change that.
Based on:
mr-nosey ~ # ls -la /dev/mapper/vg-root 
brw------- 1 root root 254, 0 Aug 19 06:04 /dev/mapper/vg-root
The line in build-initrd.sh read (high levels of guessing going on
here):
mknod dev/root b 254 0

I don't know about this.  That lvm2create_initrd script says, "#
Device-Mapper dynamically allocates all device numbers. "
&gt; Also, step 4c (at line 564) needs to be changed to run "/lib/lvm
&gt; vgscan". 
I also tried the --ignorelockingfailure option.
&gt; /lib/rootsetup script and /lib/sh and other programs
&gt; (/lib/lvm excluded) that you copied to your boot partition can be
&gt; removed. Set USEROOTSETUP=0 in build-initrd.sh config, this plan B
&gt; does not need that.
&gt; 
&gt; This time I tested this patch. I don't have lvm on my test box, so I
&gt; used "/lib/losetup -a" as the program to run between loop setup (at
&gt; step 4) and mount (at step 5).
&gt; 
I used the "2007-08-17 22:12" patch when testing.

The error returned by the patched script, after entering the password
for losetup, was:
"Failed to create LVM2 system dir for metadata backups, config files
and internal cache.

Set environment variable LVM_SYSTEM_DIR to alternative location or
empty string."

This appears to be consistent with a line in 
http://sources.redhat.com/cgi-bin/cvsweb.cgi/~checkout~/LVM2/scripts/lvm2create_initrd/lvm2create_initrd?content-type=text/plain&amp;cvsroot=lvm2&amp;only_with_tag=HEAD
 "echo "$PRE Remounting / read/write"
mount -t ext2 -o remount,rw /dev/ram0 /"

Jari, I think you're getting closer.  I can almost smell that booting
logical volume.

Regards

Fog_Watch.


-- 
Lose wait.  Get Gentoo.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070820090046</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-08-20 09:00:46-0400</timestampReceived><subject>Re: LVM2 logical volumes on Loop-AES</subject><body>

Fog_Watch wrote:
&gt; mr-nosey ~ # ls -la /dev/mapper/vg-root
&gt; brw------- 1 root root 254, 0 Aug 19 06:04 /dev/mapper/vg-root
&gt; The line in build-initrd.sh read (high levels of guessing going on
&gt; here):
&gt; mknod dev/root b 254 0

That mknod command looks ok.

&gt; I don't know about this.  That lvm2create_initrd script says, "#
&gt; Device-Mapper dynamically allocates all device numbers. "

Then you can remove that "mknod dev/root b 254 0" command from the script,
and change the mount() system call to use a device node created by lvm
command. That is first parameter of mount() system call of build-initrd.sh
(2007-08-17 22:12 version) line 570. As in "/dev/root" -&gt;
"/dev/mapper/vg-root"

&gt; The error returned by the patched script, after entering the password
&gt; for losetup, was:
&gt; "Failed to create LVM2 system dir for metadata backups, config files
&gt; and internal cache.
&gt; 
&gt; Set environment variable LVM_SYSTEM_DIR to alternative location or
&gt; empty string."
&gt; 
&gt; This appears to be consistent with a line in
&gt; http://sources.redhat.com/cgi-bin/cvsweb.cgi/~checkout~/LVM2/scripts/lvm2create_initrd/lvm2create_initrd?content-type=text/plain&amp;cvsroot=lvm2&amp;only_with_tag=HEAD
&gt;  "echo "$PRE Remounting / read/write"
&gt; mount -t ext2 -o remount,rw /dev/ram0 /"

Your bootloader may be configured pass "ro" kernel parameter, which tells
kernel to mount initrd file system read-only. lvm seems to want it writable,
so change that "ro" kernel parameter to "rw". If there is no "ro" parameter,
then add "rw" parameter.

I did mention earlier that there is very little space in the initrd. If lvm
wants to write a lot of data there, you may need to increase size of the
initrd. You can do that by changing build-initrd.sh (2007-08-17 22:12
version) line 671 from

y=`expr ${y} + 2`

to

y=`expr ${y} + 100`

That part of the script computes how big the uncompressed file system image
should be. That + 2 line increases size by 2 KB, + 100 line increases size
by 100 KB.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070822045128</emailId><senderName>Fog_Watch</senderName><senderEmail>db5@exemail.com.au</senderEmail><timestampReceived>2007-08-22 04:51:28-0400</timestampReceived><subject>Re: LVM2 logical volumes on Loop-AES</subject><body>

On Mon, 20 Aug 2007 12:00:46 +0300
Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:

&gt; y=`expr ${y} + 100`

Jari, this is what happens when booting:
1	machine loads kernel
2	password requested and loopback is setup
3	then there is the following error
"Unable to make device node for 'vg-root'
/dev/vg: mkdir failed : No space left on device"
And boot ends with a system halt.

This is when y=`expr ${y} + 500`.

When y=`expr ${y} + 2` or y=`expr ${y} + 100` the following error is
returned on boot:

"/etc/lvm: mkdir failed: No space left on device"

Ah!

Regards

Fog_Watch.


grub.conf=
default 0
timeout 5
splashimage=(hd0,0)/boot/grub/splash.xpm.gz
title=Gentoo Linux  2.6.14-hardened-r8
root (hd0,0)
kernel /boot/kernel-2.6.14-hardened-r8 root=100 lvm2root=/dev/vg/root
	init=/linuxrc rw rootfstype=minix 
initrd /initrd.gz

build_init.sh=
Note that these lines required high levels of guessing.
Lines after ≅ 564
    buf[0] = 0;
    strCat(buf, "/lib/lvm vgscan --ignorelockingfailure");
    exeWait(buf);
    buf[0] = 0;
    strCat(buf, "/lib/lvm vgchange -ay --ignorelockingfailure ");
    exeWait(buf);



-- 
Lose wait.  Get Gentoo.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070712104545</emailId><senderName>Jan Klod</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-07-12 10:45:45-0400</timestampReceived><subject>what is -lcrypt?</subject><body>

Hallo,

I tried to set up loop-AES-v3.2a and when executing

    bzip2 -d -c util-linux-2.12r.tar.bz2 | tar xvf -
    cd util-linux-2.12r
    patch -p1 &lt;/PATH/TO/LOOP-AES/util-linux-2.12r.diff
    CFLAGS=-O2 ./configure

util-linux output was: You need -lcrypt. I continued with installing, 
but "make tests" failed, because there was no /dev/loop7!

So, how to get -lcrypt and what is it? Will it solve problem with loop7?

..

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070713161909</emailId><senderName>Hank Leininger</senderName><senderEmail>hlein@progressive-comp.com</senderEmail><timestampReceived>2007-07-13 16:19:09-0400</timestampReceived><subject>status of loop-aes + swsusp ?</subject><body>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi,

The question of loop-aes + swsusp has come up multiple times over the
years, but not for a while.  By that I mean, suspending a loop-aes-
encrypted-root system to a loop-aes encrypted swap partition, which is
reinstated by the initrd prior to resuming.  Jari points out problems
w/this in:

    http://marc.info/?l=linux-crypto&amp;m=117497724023950&amp;w=2

It looks like Jari had just updated loop-aes to make it compatible with
swsusp in general (in release 2.0f), but there were still problems doing
encrypted root + swsusp.  Has anybody done any further work on this,
like the initrd changes that might make it come together?  Jari, do you
think that such initrd tweaks as you suggested then, would be enough to
make it work, or are there in fact other reasons why this may not be
doable?

Thanks,

Hank Leininger &lt;hlein@progressive-comp.com&gt;
D639 2E70 96A4 96D4 9AB6  95D6 A8FD BA7C 7093 F8F3
-----BEGIN PGP SIGNATURE-----

iD8DBQFGl6X9qP26fHCT+PMRAp9kAKCDUW+v/X5mhAglDJqiaGf9JMfDLwCcCDIQ
e28ew7Axx5cbIoyoRMhKzbM=
=WPaA
-----END PGP SIGNATURE-----

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070718222504</emailId><senderName>ABUBAKAR ALIYU</senderName><senderEmail>aliyuabubakar1b@yahoo.com.hk</senderEmail><timestampReceived>2007-07-18 22:25:04-0400</timestampReceived><subject>Re: Investment Enquire</subject><body>

Dear Sir,
   
      Best compliments of the day. My name is Barrister Adamu Abubakar, i am a lawyer \
and a finance consultant. I have a client who wants to invest about US$12.5M. My \
client is a retired General in the Liberian army and he needs protection for his \
family.  
  He is looking for reliable and capable partner. If you can handle such a huge sum \
of investment and would be sincere in all the process, please get back to me as soon \
as possible to discuss, for example the investment plan and agreement procedure.  
  Kindly reply urgently with your business profile to enable me advice the General \
accordingly, and do not forget to include your telephone contacts for easy \
communication.  
   Thank you.
Adamu .A. Abubabar ESQ
       
---------------------------------
µL­­¹q¶lÀx¦s¶q¡A§A´NµL»Ý¦A¾á¤ß¦¬¥ó½cÀx¦sªÅ¶¡·|§_¹L¶q! ¥ß§Y¨Ï¥ÎYahoo! Mail  


[Attachment #3 (text/html)]

&lt;DIV class=MsoNormal style="MARGIN: 0in 0in 0pt; mso-layout-grid-align: none; \
mso-pagination: none"&gt;&lt;SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"&gt;Dear \
Sir,&lt;?xml:namespace prefix = o ns = "urn:schemas-microsoft-com:office:office" \
/&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal style="MARGIN: 0in 0in 0pt; \
mso-layout-grid-align: none; mso-pagination: none"&gt;&lt;SPAN style="FONT-SIZE: 10pt; \
FONT-FAMILY: Arial"&gt; &lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal \
style="MARGIN: 0in 0in 0pt; mso-layout-grid-align: none; mso-pagination: none"&gt;&lt;SPAN \
style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"&gt;&lt;SPAN style="mso-spacerun: \
yes"&gt;    &lt;/SPAN&gt;Best compliments of the day. My name is Barrister \
Adamu Abubakar, i am a lawyer and a finance consultant. I have a client who wants to \
invest about US$12.5M. My client is a retired General in the Liberian army and he \
needs protection for his family.&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal \
style="MARGIN: 0in 0in 0pt;  mso-layout-grid-align: none; mso-pagination: none"&gt;&lt;SPAN \
style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"&gt; &lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV \
class=MsoNormal style="MARGIN: 0in 0in 0pt; mso-layout-grid-align: none; \
mso-pagination: none"&gt;&lt;SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"&gt;He is looking \
for reliable and capable partner. If you can handle such a huge sum of investment and \
would be sincere in all the process, please get back to me as soon as possible to \
discuss, for example the investment plan and agreement \
procedure.&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal style="MARGIN: 0in 0in 0pt; \
mso-layout-grid-align: none; mso-pagination: none"&gt;&lt;SPAN style="FONT-SIZE: 10pt; \
FONT-FAMILY: Arial"&gt; &lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal \
style="MARGIN: 0in 0in 0pt; mso-layout-grid-align: none; mso-pagination: none"&gt;&lt;SPAN \
style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"&gt;Kindly reply urgently with your business \
profile to enable me advice the General accordingly, and  do not forget to include \
your telephone contacts for easy communication.&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV \
class=MsoNormal style="MARGIN: 0in 0in 0pt; mso-layout-grid-align: none; \
mso-pagination: none"&gt;&lt;SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: \
Arial"&gt; &lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal style="MARGIN: 0in 0in \
0pt; mso-layout-grid-align: none; mso-pagination: none"&gt;&lt;SPAN style="FONT-SIZE: 10pt; \
FONT-FAMILY: Arial"&gt;&lt;SPAN style="mso-spacerun: yes"&gt; &lt;/SPAN&gt;Thank \
you.&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;&lt;SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Arial; \
mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: EN-US; \
mso-fareast-language: EN-US; mso-bidi-language: AR-SA"&gt;Adamu .A. Abubabar \
ESQ&lt;/SPAN&gt;&lt;p&gt; 


      &lt;hr size=1&gt;µL­­¹q¶lÀx¦s¶q¡A§A´NµL»Ý¦A¾á¤ß¦¬¥ó½cÀx¦sªÅ¶¡·|§_¹L¶q! &lt;a \
href="http://hk.mail.yahoo.com"&lt;/a&gt;&lt;b&gt;¥ß§Y¨Ï¥ÎYahoo! Mail&lt;/b&gt;  


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070718223226</emailId><senderName>ABUBAKAR ALIYU</senderName><senderEmail>aliyuabubakar1b@yahoo.com.hk</senderEmail><timestampReceived>2007-07-18 22:32:26-0400</timestampReceived><subject>Re: Investment Enquire</subject><body>

Dear Sir,
   
      Best compliments of the day. My name is Barrister Adamu Abubakar, i am a lawyer \
and a finance consultant. I have a client who wants to invest about US$12.5M. My \
client is a retired General in the Liberian army and he needs protection for his \
family.  
  He is looking for reliable and capable partner. If you can handle such a huge sum \
of investment and would be sincere in all the process, please get back to me as soon \
as possible to discuss, for example the investment plan and agreement procedure.  
  Kindly reply urgently with your business profile to enable me advice the General \
accordingly, and do not forget to include your telephone contacts for easy \
communication.  
   Thank you.
Adamu .A. Abubabar ESQ
       
---------------------------------
µL­­¹q¶lÀx¦s¶q¡A§A´NµL»Ý¦A¾á¤ß¦¬¥ó½cÀx¦sªÅ¶¡·|§_¹L¶q! ¥ß§Y¨Ï¥ÎYahoo! Mail  


[Attachment #3 (text/html)]

&lt;DIV class=MsoNormal style="MARGIN: 0in 0in 0pt; mso-layout-grid-align: none; \
mso-pagination: none"&gt;&lt;SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"&gt;Dear \
Sir,&lt;?xml:namespace prefix = o ns = "urn:schemas-microsoft-com:office:office" \
/&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal style="MARGIN: 0in 0in 0pt; \
mso-layout-grid-align: none; mso-pagination: none"&gt;&lt;SPAN style="FONT-SIZE: 10pt; \
FONT-FAMILY: Arial"&gt; &lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal \
style="MARGIN: 0in 0in 0pt; mso-layout-grid-align: none; mso-pagination: none"&gt;&lt;SPAN \
style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"&gt;&lt;SPAN style="mso-spacerun: \
yes"&gt;    &lt;/SPAN&gt;Best compliments of the day. My name is Barrister \
Adamu Abubakar, i am a lawyer and a finance consultant. I have a client who wants to \
invest about US$12.5M. My client is a retired General in the Liberian army and he \
needs protection for his family.&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal \
style="MARGIN: 0in 0in 0pt;  mso-layout-grid-align: none; mso-pagination: none"&gt;&lt;SPAN \
style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"&gt; &lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV \
class=MsoNormal style="MARGIN: 0in 0in 0pt; mso-layout-grid-align: none; \
mso-pagination: none"&gt;&lt;SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"&gt;He is looking \
for reliable and capable partner. If you can handle such a huge sum of investment and \
would be sincere in all the process, please get back to me as soon as possible to \
discuss, for example the investment plan and agreement \
procedure.&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal style="MARGIN: 0in 0in 0pt; \
mso-layout-grid-align: none; mso-pagination: none"&gt;&lt;SPAN style="FONT-SIZE: 10pt; \
FONT-FAMILY: Arial"&gt; &lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal \
style="MARGIN: 0in 0in 0pt; mso-layout-grid-align: none; mso-pagination: none"&gt;&lt;SPAN \
style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"&gt;Kindly reply urgently with your business \
profile to enable me advice the General accordingly, and  do not forget to include \
your telephone contacts for easy communication.&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV \
class=MsoNormal style="MARGIN: 0in 0in 0pt; mso-layout-grid-align: none; \
mso-pagination: none"&gt;&lt;SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: \
Arial"&gt; &lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal style="MARGIN: 0in 0in \
0pt; mso-layout-grid-align: none; mso-pagination: none"&gt;&lt;SPAN style="FONT-SIZE: 10pt; \
FONT-FAMILY: Arial"&gt;&lt;SPAN style="mso-spacerun: yes"&gt; &lt;/SPAN&gt;Thank \
you.&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;&lt;SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Arial; \
mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: EN-US; \
mso-fareast-language: EN-US; mso-bidi-language: AR-SA"&gt;Adamu .A. Abubabar \
ESQ&lt;/SPAN&gt;&lt;p&gt; 


      &lt;hr size=1&gt;µL­­¹q¶lÀx¦s¶q¡A§A´NµL»Ý¦A¾á¤ß¦¬¥ó½cÀx¦sªÅ¶¡·|§_¹L¶q! &lt;a \
href="http://hk.mail.yahoo.com"&lt;/a&gt;&lt;b&gt;¥ß§Y¨Ï¥ÎYahoo! Mail&lt;/b&gt;  


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070713170721</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-07-13 17:07:21-0400</timestampReceived><subject>Re: status of loop-aes + swsusp ?</subject><body>

You can look at a sample at:
http://wiki.tuxonice.net/EncryptedSwapAndRoot

It uses suspend2 but can easily be converted to swsusp...
All you have to do is modify f_suspend2_resume behavior.
If you do, please send me a patch.

Best Regards,
Alon Bar-Lev.

On 7/13/07, Hank Leininger &lt;hlein@progressive-comp.com&gt; wrote:
&gt; -----BEGIN PGP SIGNED MESSAGE-----
&gt; Hash: SHA1
&gt;
&gt; Hi,
&gt;
&gt; The question of loop-aes + swsusp has come up multiple times over the
&gt; years, but not for a while.  By that I mean, suspending a loop-aes-
&gt; encrypted-root system to a loop-aes encrypted swap partition, which is
&gt; reinstated by the initrd prior to resuming.  Jari points out problems
&gt; w/this in:
&gt;
&gt;     http://marc.info/?l=linux-crypto&amp;m=117497724023950&amp;w=2
&gt;
&gt; It looks like Jari had just updated loop-aes to make it compatible with
&gt; swsusp in general (in release 2.0f), but there were still problems doing
&gt; encrypted root + swsusp.  Has anybody done any further work on this,
&gt; like the initrd changes that might make it come together?  Jari, do you
&gt; think that such initrd tweaks as you suggested then, would be enough to
&gt; make it work, or are there in fact other reasons why this may not be
&gt; doable?
&gt;
&gt; Thanks,
&gt;
&gt; Hank Leininger &lt;hlein@progressive-comp.com&gt;
&gt; D639 2E70 96A4 96D4 9AB6  95D6 A8FD BA7C 7093 F8F3
&gt; -----BEGIN PGP SIGNATURE-----
&gt;
&gt; iD8DBQFGl6X9qP26fHCT+PMRAp9kAKCDUW+v/X5mhAglDJqiaGf9JMfDLwCcCDIQ
&gt; e28ew7Axx5cbIoyoRMhKzbM=
&gt; =WPaA
&gt; -----END PGP SIGNATURE-----
&gt;
&gt; -
&gt; Linux-crypto:  cryptography in and on the Linux system
&gt; Archive:       http://mail.nl.linux.org/linux-crypto/
&gt;
&gt;

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070717185616</emailId><senderName>Jan Klod</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-07-17 18:56:16-0400</timestampReceived><subject>2.6.XX kernel for encrypted root</subject><body>

Hi everybody in list!

I was trying to recompile kernel for setting up root encryption - after 
copying ubuntu kernel config. and setting some kernel options following 
loop-AES readme (you can see them at the end of this mail), it ended up 
with kernel panic.
{ Kernel panic - not syncing: VFS: Unable to mount root fs on 
unknown-block(0,0) }
What could be wrong?

"All kernel subsystems needed by root file system (IDE drivers,
ext2/ext3/reiserfs/whatever) must be compiled directly into kernel."
- which kernel parameters make this real? How to find them?

CONFIG_MODULES=y
CONFIG_BLK_DEV_LOOP=n
CONFIG_KMOD=y

CONFIG_BLK_DEV_RAM=y
CONFIG_BLK_DEV_RAM_SIZE=4096
CONFIG_BLK_DEV_INITRD=y
CONFIG_MINIX_FS=y
CONFIG_PROC_FS=y
CONFIG_CRAMFS=n
CONFIG_SCSI=y
CONFIG_BLK_DEV_SD=y
CONFIG_USB=y
CONFIG_USB_STORAGE=y
CONFIG_FAT_FS=y
CONFIG_MSDOS_FS=y
CONFIG_VFAT_FS=y

CONFIG_USB_UHCI_HCD=y
CONFIG_USB_OHCI_HCD=y
CONFIG_USB_EHCI_HCD=y

CONFIG_NLS_CODEPAGE_437=y
CONFIG_NLS_CODEPAGE_850=y
CONFIG_NLS_ISO8859_1=y
CONFIG_NLS_ISO8859_15=y
CONFIG_FAT_DEFAULT_CODEPAGE=850
CONFIG_FAT_DEFAULT_IOCHARSET=iso8859-15

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070726134213</emailId><senderName>Ihi</senderName><senderEmail>ihi@sin.cvut.cz</senderEmail><timestampReceived>2007-07-26 13:42:13-0400</timestampReceived><subject>[loop-aes] dev-loop-raid or dev-raid-loop?</subject><body>

Hi,
I need to make a RAID5 disk with encryption and I want to know if it is
possible to use RAID5 on top of six encrypted disks /dev/sd[abcdef]
-(losetup)-&gt; /dev/loop/[012345] -(mdadm)-&gt; /dev/md0. I have made some
tests and in my opinion (which is proved in these tests) it will be
faster than standard dev-loop-raid configuration. Are there any problems
which I didn't realize? Do You have any experience with using this
configuration?

Thanks
Ihi


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070726155445</emailId><senderName>"Sam"</senderName><senderEmail>spam-goes-to-dev-null@gmx.net</senderEmail><timestampReceived>2007-07-26 15:54:45-0400</timestampReceived><subject>RE: [loop-aes] dev-loop-raid or dev-raid-loop?</subject><body>

&gt; 
&gt; Hi,
&gt; I need to make a RAID5 disk with encryption and I want to 
&gt; know if it is possible to use RAID5 on top of six encrypted 
&gt; disks /dev/sd[abcdef] -(losetup)-&gt; /dev/loop/[012345] 
&gt; -(mdadm)-&gt; /dev/md0. I have made some tests and in my opinion 
&gt; (which is proved in these tests) it will be faster than 
&gt; standard dev-loop-raid configuration. Are there any problems 
&gt; which I didn't realize? Do You have any experience with using 
&gt; this configuration?

I have configured a 6 disk loop-AES root encrypted server.
I made two 3-disk raid5 and one raid0 on top of that and the loop-AES
on top of the raid0.

Works fine. 

One problem you did not realize: You will have to enter
your password 6 times or modify some script to read it
only one time and pass it 6 times to losetup.
Therefor it makes more sence to have only as many loop 
devices as CPUs. If you have dualcore then create two
raid5, put loop-AES on top of each and create a raid0
on the two.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070718130424</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-07-18 13:04:24-0400</timestampReceived><subject>Re: 2.6.XX kernel for encrypted root</subject><body>

* Jan Klod &lt;janklodvan@gmail.com&gt; wrote:

&gt; { Kernel panic - not syncing: VFS: Unable to mount root fs on 
&gt; unknown-block(0,0) }
&gt; What could be wrong?

the kernel cannot find the initial ramdisk.

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070718160952</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-07-18 16:09:52-0400</timestampReceived><subject>Re: 2.6.XX kernel for encrypted root</subject><body>

Please have a look at:
http://wiki.tuxonice.net/EncryptedSwapAndRoot

On 7/17/07, Jan Klod &lt;janklodvan@gmail.com&gt; wrote:
&gt; Hi everybody in list!
&gt;
&gt; I was trying to recompile kernel for setting up root encryption - after
&gt; copying ubuntu kernel config. and setting some kernel options following
&gt; loop-AES readme (you can see them at the end of this mail), it ended up
&gt; with kernel panic.
&gt; { Kernel panic - not syncing: VFS: Unable to mount root fs on
&gt; unknown-block(0,0) }
&gt; What could be wrong?
&gt;
&gt; "All kernel subsystems needed by root file system (IDE drivers,
&gt; ext2/ext3/reiserfs/whatever) must be compiled directly into kernel."
&gt; - which kernel parameters make this real? How to find them?
&gt;
&gt; CONFIG_MODULES=y
&gt; CONFIG_BLK_DEV_LOOP=n
&gt; CONFIG_KMOD=y
&gt;
&gt; CONFIG_BLK_DEV_RAM=y
&gt; CONFIG_BLK_DEV_RAM_SIZE=4096
&gt; CONFIG_BLK_DEV_INITRD=y
&gt; CONFIG_MINIX_FS=y
&gt; CONFIG_PROC_FS=y
&gt; CONFIG_CRAMFS=n
&gt; CONFIG_SCSI=y
&gt; CONFIG_BLK_DEV_SD=y
&gt; CONFIG_USB=y
&gt; CONFIG_USB_STORAGE=y
&gt; CONFIG_FAT_FS=y
&gt; CONFIG_MSDOS_FS=y
&gt; CONFIG_VFAT_FS=y
&gt;
&gt; CONFIG_USB_UHCI_HCD=y
&gt; CONFIG_USB_OHCI_HCD=y
&gt; CONFIG_USB_EHCI_HCD=y
&gt;
&gt; CONFIG_NLS_CODEPAGE_437=y
&gt; CONFIG_NLS_CODEPAGE_850=y
&gt; CONFIG_NLS_ISO8859_1=y
&gt; CONFIG_NLS_ISO8859_15=y
&gt; CONFIG_FAT_DEFAULT_CODEPAGE=850
&gt; CONFIG_FAT_DEFAULT_IOCHARSET=iso8859-15
&gt;
&gt; -
&gt; Linux-crypto:  cryptography in and on the Linux system
&gt; Archive:       http://mail.nl.linux.org/linux-crypto/
&gt;
&gt;

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070719205506</emailId><senderName>"Jan Klod"</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-07-19 20:55:06-0400</timestampReceived><subject>Re: 2.6.XX kernel for encrypted root</subject><body>

&gt; the kernel cannot find the initial ramdisk.


Please somebody tell me this: is that kernel for loop-aes supposed to boot
before encrypting root and booting from external device?

[Attachment #3 (text/html)]

&lt;br&gt;&lt;div&gt;&lt;blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, \
204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;"&gt;the kernel cannot find the \
initial ramdisk.&lt;/blockquote&gt;&lt;div&gt;&lt;br&gt;Please somebody tell me this: is that kernel \
for loop-aes supposed to boot before encrypting root and booting from external \
device? &lt;br&gt;&lt;/div&gt;&lt;/div&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070719212813</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-07-19 21:28:13-0400</timestampReceived><subject>Re: 2.6.XX kernel for encrypted root</subject><body>

* Jan Klod &lt;janklodvan@gmail.com&gt; wrote:

&gt; &gt;the kernel cannot find the initial ramdisk.
&gt; 
&gt; 
&gt; Please somebody tell me this: is that kernel for loop-aes supposed
&gt; to boot before encrypting root and booting from external device?

not really. but since you are so eager to provide as little
information as possible ;P about your setup it's mere speculation.

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070720170957</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-07-20 17:09:57-0400</timestampReceived><subject>Re: 2.6.XX kernel for encrypted root</subject><body>

Jan Klod wrote:
&gt; Please somebody tell me this: is that kernel for loop-aes supposed to boot
&gt; before encrypting root and booting from external device?

It should boot all the way to "Password:" prompt. When wrong passphrase is
entered, it should complain about not being able to decrypt the key file.
When correct passphrase is entered, it should complain about mount failing.
Mount fails because unencrypted file system data decrypts to nonsense that
mount doesn't understand at all. Unencrypted file system data is not damaged
by this kind of experiment.

Please provide more information about your setup:
1) bootloader configuration
2) build-initrd.sh configuration
3) full kernel configuration, compressed
4) /etc/fstab contents
5) what device you are trying to boot from?

Without above information, it is difficult to say what is wrong.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070720213542</emailId><senderName>"Jan Klod"</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-07-20 21:35:42-0400</timestampReceived><subject>Re: 2.6.XX kernel for encrypted root</subject><body>

Wow, Jari, I don't even know how to thank you about such a kindness!
Let me explain my question: after downloading a ubuntu-patched kernel
sources, I copied existing configuration and changed only required options
for USB booting, then built kernel, but, when I immediately tried to boot
that kernel, it was panicking. So I just want to know if recompiled kernel
is supposed to boot normally? (I think - yes. Previous custom-built kernel
for loop.ko in example-2 was working o.k.)

And one more thing, that confuses me: if rebuilt kernel must be copied to
USB, then I guess, it is loaded from there, so is second kernel image copy
on hard disk still necessary? And, if booting form USB, it turns out, GRUB /
lilo isn't necessary for encrypted partition, right?

PS: after kernel recompilation I'm about to try gentoo - looks like it has
better documentation and, I hope, bigger chance to learn something :)

[Attachment #3 (text/html)]

Wow, Jari, I don't even know how to thank you about such a kindness! &lt;br&gt;Let me \
explain my question: after downloading a ubuntu-patched kernel sources, I copied \
existing configuration and changed only required options for USB booting, then built \
kernel, but, when I immediately tried to boot that kernel, it was panicking. So I \
just want to know if recompiled kernel is supposed to boot normally? (I think - yes. \
Previous custom-built kernel for  loop.ko in example-2 was working o.k.)&lt;br&gt;&lt;br&gt;And \
one more thing, that confuses me: if rebuilt kernel must be copied to USB, then I \
guess, it is loaded from there, so is second kernel image copy on hard disk still \
necessary? And, if booting form USB, it turns out, GRUB / lilo isn't necessary \
for encrypted partition, right? &lt;br&gt;&lt;br&gt;PS: after kernel recompilation I'm about \
to try gentoo - looks like it has better documentation and, I hope, bigger chance to \
learn something :)&lt;br&gt;&lt;br&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070724130106</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-07-24 13:01:06-0400</timestampReceived><subject>Re: 2.6.XX kernel for encrypted root</subject><body>

Jan Klod &lt;janklodvan@gmail.com&gt; wrote:
Betreff: Re: 2.6.XX kernel for encrypted root
&gt; &gt; the kernel cannot find the initial ramdisk.

May I try a quick shot and answer your question like this:
Before booting encrypted root partition you definitely have to tell your boot-loader \
where the kernel image file can be found and give further information to the kernel. \
Just as an example for booting from USB-Stick using syslinux the command looks like \
this: kernel vmlinuz append initrd=intrd.gz root=100 init=/linuxrc rootfstype=minix

Of course, loop-aes README has more details if you have the time.

&gt; Please somebody tell me this: is that kernel for loop-aes supposed to boot
&gt; before encrypting root and booting from external device?

Yes! Kernel is supposed to boot up to the point where you are asked for a pass \
phrase. In case your kernel fails to accomplish this you will have to recompile it.

Kind regards,
Peter
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal für Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070724132721</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-07-24 13:27:21-0400</timestampReceived><subject>Re: 2.6.XX kernel for encrypted root</subject><body>

* Peter_22@gmx.de wrote:

&gt; May I try a quick shot and answer your question like this:

Well, this is a good example why posting relevant info is important.
There is an endless supply of crystal bows out there ...

In the meantime, progress has halted on my loop-aes dedicated page,
it's still a draft. But if someone has ideas/hints for the FAQ
section, please report back:

http://mareichelt.de/pub/texts.loop-aes.php#faq

--=20
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070714172915</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-07-14 17:29:15-0400</timestampReceived><subject>Re: status of loop-aes + swsusp ?</subject><body>

On 7/13/07, Alon Bar-Lev &lt;alon.barlev@gmail.com&gt; wrote:
&gt; You can look at a sample at:
&gt; http://wiki.tuxonice.net/EncryptedSwapAndRoot
&gt;
&gt; It uses suspend2 but can easily be converted to swsusp...
&gt; All you have to do is modify f_suspend2_resume behavior.
&gt; If you do, please send me a patch.

Well...
I've updated the code.
Now it supports wswsusp.

Enjoy.
Alon.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070716191532</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-07-16 19:15:32-0400</timestampReceived><subject>Re: status of loop-aes + swsusp ?</subject><body>

Hank Leininger wrote:
&gt; It looks like Jari had just updated loop-aes to make it compatible with
&gt; swsusp in general (in release 2.0f), but there were still problems doing
&gt; encrypted root + swsusp.  Has anybody done any further work on this,
&gt; like the initrd changes that might make it come together?  Jari, do you
&gt; think that such initrd tweaks as you suggested then, would be enough to
&gt; make it work, or are there in fact other reasons why this may not be
&gt; doable?

I quickly looked at Alon Bar-Lev's page at

 http://wiki.tuxonice.net/EncryptedSwapAndRoot

and it appears to do the right thing. My earlier comments about problems
arising out of mounting a "permanent-storage-device" prior to to resume,
seem to be completely avoided by Alon Bar-Lev's script. That is because it
appears to mount RAM disk only, and any "changes" to such RAM based device
vanish on resume. So no inconsistency between RAM-after-resume and
"permanent-storage-device" can occour.

The initrd created by loop-AES' build-initrd.sh script needs to mount a
"permanent-storage-device" to load programs that were intentionally omitted
from initrd. The reason why it was done like that was to make the initrd as
small as possible and also make it kernel version independent. At least on
some setups the RAM occupied by initrd can't be freed, so making initrd
small was really RAM saving feature.

Does anyone have any idea how big that initramfs is that contains by Alon
Bar-Lev's script and other needed programs+bits. And also, is that RAM
free-able?

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070712131836</emailId><senderName>Paul Walker</senderName><senderEmail>paul@black-sun.demon.co.uk</senderEmail><timestampReceived>2007-07-12 13:18:36-0400</timestampReceived><subject>Re: what is -lcrypt?</subject><body>

On Thu, Jul 12, 2007 at 01:45:45PM +0300, Jan Klod wrote:

&gt; So, how to get -lcrypt and what is it? Will it solve problem with loop7?

On Debian, it belongs to the libc6-dev package. If you don't use Debian,
there's probably a similar package for your distribution.

No idea about loop7 - try it and see, I think. :-)

-- 
Paul

I don't see what C++ has to do with keeping people from shooting themselves
in the foot.  C++ will happily load the gun, offer you a drink to steady
your nerves, and help you aim. -- Peter da Silva

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070712155747</emailId><senderName>Jan Klod</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-07-12 15:57:47-0400</timestampReceived><subject>Re: what is -lcrypt?</subject><body>

Matthias Schniedermeyer wrote:
&gt; It means just "crypt", which in turn actually means libcrypt.
&gt;
&gt; Most probably you are missing a development-package.
&gt; AFAICT libcrypt comes with glibc2, in Debian distribution it is packaged 
&gt; alongside the libc inside the libc6-package. Which effectivly means that
&gt; it is impossible to not have it.
&gt;
&gt; Your distribution (which?) appears to have it broken down a little bit 
&gt; different.
&gt;   
I'm using ubuntu. The bad news for me are: libc6 &amp; libc6-dev were 
already there before installing.
Looks like I am stuck with installing AES (I recompiled ubuntu kernel 
2.6.17.14, followed AES readme)... I will let you know, if I find a 
solution.

PS: I hope that's not a problem, if I answer private posts back to list?

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070712174708</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-07-12 17:47:08-0400</timestampReceived><subject>Re: what is -lcrypt?</subject><body>

Jan Klod wrote:
&gt; util-linux output was: You need -lcrypt. I continued with installing,

"You need -lcrypt" means "configure script has detected that to link some
programs, util-linux's Makefiles need to use -lcrypt linker option". This is
nothing to worry about.

&gt; but "make tests" failed, because there was no /dev/loop7!

Your distro's init scripts and/or udev scripts are supposed to create that
device node. You can also create those device nodes manually, like this:

#/bin/sh
for x in 0 1 2 3 4 5 6 7; do mknod -m 660 /dev/loop${x} b 7 ${x}; done

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070712185332</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-07-12 18:53:32-0400</timestampReceived><subject>Re: what is -lcrypt?</subject><body>

On 12.07.2007 18:57, Jan Klod wrote:
&gt; Matthias Schniedermeyer wrote:
&gt;&gt; It means just "crypt", which in turn actually means libcrypt.
&gt;&gt;
&gt;&gt; Most probably you are missing a development-package.
&gt;&gt; AFAICT libcrypt comes with glibc2, in Debian distribution it is packaged 
&gt;&gt; alongside the libc inside the libc6-package. Which effectivly means that
&gt;&gt; it is impossible to not have it.
&gt;&gt;
&gt;&gt; Your distribution (which?) appears to have it broken down a little bit 
&gt;&gt; different.
&gt;&gt;   
&gt; I'm using ubuntu. The bad news for me are: libc6 &amp; libc6-dev were already 
&gt; there before installing

Debian has a package "apt-file" and as Ubuntu is based on Debian it 
may have that package too.

After installing it and "apt-file update"ing once you can 'apt-file search'
for all packages containing the specified file.

In case Ubuntu has broken down the packages differently you should be 
able to find it that way.

&gt; Looks like I am stuck with installing AES (I recompiled ubuntu kernel 
&gt; 2.6.17.14, followed AES readme)... I will let you know, if I find a 
&gt; solution.
&gt;
&gt; PS: I hope that's not a problem, if I answer private posts back to list?

Ups.
And i wondered why my posting didn't turn up on the maillinglist.

I'm using mutt for writing e-mail only since a few days ago when the 
last release introduced the feature to send mails to a specified 
SMTP-Server. (Up to that release the local MTA had to be configured 
right. So i used Thunderbird to actually write my mails as i never found 
out how to configure a Smart-Host that requires SMTP-Auth)

To make a long story short, i accidentally press 'reply' instead of 
'group reply'. :-)




Bis denn

-- 
Real Programmers consider "what you see is what you get" to be just as 
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated, 
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070807130937</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-08-07 13:09:37-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

* Jivko Sabev &lt;jsabev@nicmus.com&gt; wrote:

&gt; # CONFIG_CRAMFS is not set

try again with CONFIG_CRAMFS=y

I have it set for my kernels and root encryption.

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070807172221</emailId><senderName>"Jivko Sabev"</senderName><senderEmail>jsabev@nicmus.com</senderEmail><timestampReceived>2007-08-07 17:22:21-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

Having

CONFIG_CRAMFS=y

does not change anything. Exactly the same problem as before. Namely boot
process hangs after finding the compressed ram image. There are no errors
reported.

Has anyone experienced this and been able to resolve the issue.

Regards,

Jivko



&gt; * Jivko Sabev &lt;jsabev@nicmus.com&gt; wrote:
&gt;
&gt;&gt; # CONFIG_CRAMFS is not set
&gt;
&gt; try again with CONFIG_CRAMFS=y
&gt;
&gt; I have it set for my kernels and root encryption.



-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070807175217</emailId><senderName>RB</senderName><senderEmail>aoz.syn@gmail.com</senderEmail><timestampReceived>2007-08-07 17:52:17-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

What console are you using?  Looks to me like you're hooked up to the
VGA console, but the bootloader/initrd set their output to a serial
console, or vice versa.

Are you sure it hangs?  Is there a kernel panic (i.e. num, scroll, &amp;
caps locks blink in unison), does an expected service not come up,
or...?

If you haven't disabled it, try hitting 'ctrl-alt-del' when you think
you have it hung - chances are you'll get a summary reboot, indicating
your console is pointing where you don't expect it or can't see it.
There are other things that could cause this problem (or cause
ctrl-alt-del to fail), but the most likely explanation is your
'console=' kernel argument.


RB

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070807183405</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-08-07 18:34:05-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

* Jivko Sabev &lt;jsabev@nicmus.com&gt; wrote:

&gt; Has anyone experienced this and been able to resolve the issue.

Hm. &lt;tm&gt;

Apart from the console issue RB described (which should not happen at
all, but I don't know Ubuntu), it could be related to pivot mode and
kernel boot parameters. I don't use pivot mode, here's my config:

#initrd.conf
INITRDONLY=0
USEPIVOT=0
USEDEVFS=0
BOOTDEV=/dev/hdc            # CDROM
BOOTTYPE=iso9660            # lowercase matters
CRYPTROOT=/dev/hda2
GPGKEYFILE=rootkey.gpg
ROOTTYPE=ext3
CIPHERTYPE=AES128
LOADNATIONALKEYB=1
INITIALDELAY=0
DESTINATIONPREFIX=/boot/iso
INITRDGZNAME=initrd.gz

#isolinux.cfg
default test
timeout 100
prompt 1

label test
kernel test2621.5
append initrd=initrd.gz root=/dev/hda2


HTH

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070807193034</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-08-07 19:30:34-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

Jivko Sabev wrote:
&gt; Having
&gt; 
&gt; CONFIG_CRAMFS=y
&gt; 
&gt; does not change anything. Exactly the same problem as before. Namely boot
&gt; process hangs after finding the compressed ram image. There are no errors
&gt; reported.

The reason why loop-AES README says CONFIG_CRAMFS=n is because long time ago
someone had problems with it when cramfs tried to "probe" if root file
system type was cramfs. While doing that, cramfs also damaged the initrd
data sufficiently badly that minix file system could not mount it any more.
The workaround was to disable cramfs, or to specify rootfstype=minix kernel
parameter. That rootfstype=minix kernel parameter disables attempts to mount
using all built-in file systems, so cramfs no longer got a chance to
probe/damage the initrd data.

You provided some data about your setup, but something is still missing.
Your bootloader configuration, and specifically what parameters get passed
to kernel when it boots is important. Please provide that info.

Can you also modify your build-initrd.sh config so that

TOOLSPROMPT=1

is set there? Then build new initrd. It doesn't do much other than ask you
to press ENTER key when initrd code begins to run. At least you get to know
if it got that far.

Also, can you verify that dietlibc is working ok? Like this:

$ printf '#include &lt;unistd.h&gt;\nint main(){write(1,"hello\\n",6);}\n' &gt;xxx.c
$ diet gcc -O2 -s xxx.c
$ ./a.out
hello
$ 

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070808121951</emailId><senderName>"Jivko Sabev"</senderName><senderEmail>jsabev@nicmus.com</senderEmail><timestampReceived>2007-08-08 12:19:51-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

Jari, thank you for your suggestion.

However, the problem persists. I did set TOOLSPROMT=1 and rebuild my
initrd but the boot process hangs at exactly the same place as up until
now. It doesn't ask to press enter. The last message it prints is:

RAMDISK: Compressed image found at block 0
VFS: Mounted root (minix filesystem) readonly
Freeing unused kernel memory: 192k free

and it just sits there. Note that it doesn't freeze - there is no kernel
panic and it accepts input from the keyboard. It echos characters typed on
the console and you can reboot by &lt;ctrl&gt;&lt;alt&gt;&lt;del&gt;.

My Grub configuration is pretty standard as per build-init-rd.sh
instructions. Namely:

title Ubuntu, kernel 2.6.22.1 Encrypted
root  (hd0,0)
kernel /vmlinuz-2.6.22.1 root=100 init=/linuxrc rootfstype=minix
initrd /initrd-crypt.gz

I did verify dietlibc and it is working fine.

Regards,

Jivko

&gt; Jivko Sabev wrote:
&gt;
&gt; &lt;snip&gt;
&gt;
&gt; You provided some data about your setup, but something is still missing.
&gt; Your bootloader configuration, and specifically what parameters get passed
&gt; to kernel when it boots is important. Please provide that info.
&gt;
&gt; Can you also modify your build-initrd.sh config so that
&gt;
&gt; TOOLSPROMPT=1
&gt;
&gt; is set there? Then build new initrd. It doesn't do much other than ask you
&gt; to press ENTER key when initrd code begins to run. At least you get to
&gt; know
&gt; if it got that far.
&gt;
&gt; Also, can you verify that dietlibc is working ok? Like this:
&gt;
&gt; $ printf '#include &lt;unistd.h&gt;\nint main(){write(1,"hello\\n",6);}\n'
&gt; &gt;xxx.c
&gt; $ diet gcc -O2 -s xxx.c
&gt; $ ./a.out
&gt; hello
&gt; $
&gt;
&gt; --
&gt; Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9
&gt; DD
&gt;
&gt; -
&gt; Linux-crypto:  cryptography in and on the Linux system
&gt; Archive:       http://mail.nl.linux.org/linux-crypto/
&gt;
&gt;
&gt;



-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070808124159</emailId><senderName>RB</senderName><senderEmail>aoz.syn@gmail.com</senderEmail><timestampReceived>2007-08-08 12:41:59-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

&gt; kernel /vmlinuz-2.6.22.1 root=100 init=/linuxrc rootfstype=minix

This looks right; I would suggest trying adding 'console=tty1' (see
Documentation/kernel-parameters.txt) just to make your using the VGA
console explicit rather than implied.

You should be seeing all the kernel boot-time messages scroll by,
unless you have some redirection like bootsplash going on; if not, I
would think you are missing some console option - consider posting
your video hardware, the output of 'grep CONSOLE .config', and 'grep
_FB_ .config'.  At this point, it would also be fruitful to tell us if
you're using the vanilla kernel.org sources, a patched set from
Ubuntu, or otherwise (I use Gentoo's hardened-sources, myself).

If you know where your boot-time kernel messages are going and are
okay with that, then my next suspect would be the actual init process
- i.e., it's starting, but freezing at some point.  That, I'm not sure
I can help you with.


RB

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070808171538</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-08-08 17:15:38-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

Jivko Sabev wrote:
&gt; However, the problem persists. I did set TOOLSPROMT=1 and rebuild my
&gt; initrd but the boot process hangs at exactly the same place as up until
&gt; now. It doesn't ask to press enter. The last message it prints is:
&gt; 
&gt; RAMDISK: Compressed image found at block 0
&gt; VFS: Mounted root (minix filesystem) readonly
&gt; Freeing unused kernel memory: 192k free
&gt; 
&gt; and it just sits there. Note that it doesn't freeze - there is no kernel
&gt; panic and it accepts input from the keyboard. It echos characters typed on
&gt; the console and you can reboot by &lt;ctrl&gt;&lt;alt&gt;&lt;del&gt;.

Either your kernel does not run initrd code, or initrd is somehow messed up
and is unrunnable. Can you send me your full compressed kernel config, and a
copy of your initrd.gz file?

I did spot one inconsistency: Your build-initrd.sh config creates initrd.gz
file, and your bootloader config loads initrd-crypt.gz file. Are you sure
that bootloader is actually loading correct initrd file?

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070808200823</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-08-08 20:08:23-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

* Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:

&gt; Either your kernel does not run initrd code, or initrd is somehow
&gt; messed up and is unrunnable. Can you send me your full compressed
&gt; kernel config, and a copy of your initrd.gz file?

When I was setting up root encryption on some machines with different
kernel versions I ran into problems with pivot mode. On some it
worked, on most it didn't, so I'm not using it for new setups these
days. I remembered there was some talk on LKML about it, here's the
link:

http://lkml.org/lkml/2007/06/24/130

Jivko, have you tried using an initrd with USEPIVOT=0? Don't forget
to adapt kernel boot parameters.

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070809040614</emailId><senderName>Jivko Sabev</senderName><senderEmail>jsabev@nicmus.com</senderEmail><timestampReceived>2007-08-09 04:06:14-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

Thanks for all your suggestions.

I have been experimenting with the various approaches with little success.

Passing the boot parameter console=tty (or console=tty1) as RB suggested
does not help. By the way, I am using a vanilla kernel straight from
kernel.org. Prior to that, I was using an ubuntu-sources kernel but
having had the same problem I thought that maybe the issue was due to
some ubuntu specific patch to the kernel.

grep CONSOLE .config outputs

# CONFIG_NETCONSOLE is not set
CONFIG_VT_CONSOLE=y
CONFIG_HW_CONSOLE=y
CONFIG_VT_HW_CONSOLE_BINDING=y
CONFIG_SERIAL_8250_CONSOLE=y
CONFIG_SERIAL_CORE_CONSOLE=y
# CONFIG_LP_CONSOLE is not set
CONFIG_VGA_CONSOLE=y
CONFIG_DUMMY_CONSOLE=y

grep _FB_ .config doesn't output anything as I do not have any Frame
Buffer support enabled.

Setting

USEPIVOT=0

as per Markus' suggestion and rebuilding the initrd image results in a
kernel panic after reboot with the following grub configuration (taken
from the build-initrd.sh comments)

title           Ubuntu, kernel 2.6.22.1vanila Encrypted No Pivot
root            (hd0,0)
kernel          /vmlinuz-2.6.22.1vanila ro root=101 console=tty
initrd          /initrd-crypt.gz

(initrd-crypt.gz is the correct initrd image. I have set
INITRDGZNAME=initrd-crypt.gz)


The kernel panic seemed due to the initrd image not being able to mount
root - i.e. last messages printed to the console are:

List of All Partitions:
0300 78150744 hda driver ide-disk
0301 64228 hda1
0302 76172197 hda2
0303 1911735 hda3
No filesystems can mount root tried ext2 ext3 minix
Kernel panic - not syncing
VFS: unable to mount rootfs on unknow-block(1,1)


hda1 is boot initialised as ext2, hda2 is root initialised as ext3. I
find this kind of strange as I have the chipset drivers compiled in and
ext2 and ext3 compiled in the kernel as well. I can see the kernel
detecting the hds correctly before panicking.


Regards,

Jivko


markus reichelt wrote:
&gt; * Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt;
&gt;   
&gt;&gt; Either your kernel does not run initrd code, or initrd is somehow
&gt;&gt; messed up and is unrunnable. Can you send me your full compressed
&gt;&gt; kernel config, and a copy of your initrd.gz file?
&gt;&gt;     
&gt;
&gt; When I was setting up root encryption on some machines with different
&gt; kernel versions I ran into problems with pivot mode. On some it
&gt; worked, on most it didn't, so I'm not using it for new setups these
&gt; days. I remembered there was some talk on LKML about it, here's the
&gt; link:
&gt;
&gt; http://lkml.org/lkml/2007/06/24/130
&gt;
&gt; Jivko, have you tried using an initrd with USEPIVOT=0? Don't forget
&gt; to adapt kernel boot parameters.
&gt;
&gt;   

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070809174713</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-08-09 17:47:13-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

Jivko Sabev wrote:
&gt; Passing the boot parameter console=tty (or console=tty1) as RB suggested
&gt; does not help.

If console was redirected elsewhere, you would not be seeing these messages:

RAMDISK: Compressed image found at block 0
VFS: Mounted root (minix filesystem) readonly
Freeing unused kernel memory: 192k free

So it is not console redirection issue.

&gt; Setting
&gt; 
&gt; USEPIVOT=0

pivot_root is used after encrypted root file system has been mounted. So
this is not a problem with pivot_root system call. Your encrypted-root-boot
doesn't get that far, yet.

&gt; title           Ubuntu, kernel 2.6.22.1vanila Encrypted No Pivot
&gt; root            (hd0,0)
&gt; kernel          /vmlinuz-2.6.22.1vanila ro root=101 console=tty
&gt; initrd          /initrd-crypt.gz
[snip]
&gt; No filesystems can mount root tried ext2 ext3 minix
&gt; Kernel panic - not syncing
&gt; VFS: unable to mount rootfs on unknow-block(1,1)

Did you see a password prompt before kernel panic?


I quickly looked at kernel config that you sent me privately. I didn't see
anything wrong with it.

I also disassembled the /linuxrc program binary that was inside
initrd-crypt.gz that you sent me. It seems to be linked to some older
version of dietlibc. I looked at first few systems calls in main() function.
Looked mostly ok, except there was one unexplained line:

8048383:       65 8b 15 14 00 00 00    mov    %gs:0x14,%edx

which was put there by gcc compiler. Maybe there is some reasonable
explanation for why that is there, but I didn't immediately see it.

Can you test an initrd that I created for you? I used this config:

BOOTDEV=/dev/hda1
BOOTTYPE=ext2
CRYPTROOT=/dev/hda2
ROOTTYPE=ext3
CIPHERTYPE=AES128
INITRDONLY=1
DESTINATIONPREFIX=/tmp

All other config entries are defaults that are found in unmodified
loop-AES-v3.2a build-initrd.sh script. You can download it here:

http://koti.tnnet.fi/jari.ruusu/tmp/initrd.gz
http://koti.tnnet.fi/jari.ruusu/tmp/initrd.gz.sign

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070810023230</emailId><senderName>Jivko Sabev</senderName><senderEmail>jsabev@nicmus.com</senderEmail><timestampReceived>2007-08-10 02:32:30-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

Thanks again to all who responded and especially to Jari who built an
initrd that works.

Using Jari's initrd worked right away without any issues. I suppose
ubuntu 7.04 uses some
weird combinations of compiler/linker options or their package of
dietlibc is somehow incompatible but those are just my speculations and
I am by no means an expert at this. FYI: I also tried to build the
initrd with USEDIETLIBC=0 and that yielded the same result on ubuntu
i.e. it didn't work.

Many thanks again.

Jivko

Jari Ruusu wrote:
&gt; [snip]
&gt; [snip]
&gt;   
&gt;&gt; No filesystems can mount root tried ext2 ext3 minix
&gt;&gt; Kernel panic - not syncing
&gt;&gt; VFS: unable to mount rootfs on unknow-block(1,1)
&gt;&gt;     
&gt;
&gt; Did you see a password prompt before kernel panic?
&gt;
&gt;   
No, there was no password prompt either. It just panicked. Building the
intird with USEPIVOT=0 didn't help.

&gt; I quickly looked at kernel config that you sent me privately. I didn't see
&gt; anything wrong with it.
&gt; [snip]
&gt; 8048383:       65 8b 15 14 00 00 00    mov    %gs:0x14,%edx
&gt;
&gt; which was put there by gcc compiler. Maybe there is some reasonable
&gt; explanation for why that is there, but I didn't immediately see it.
&gt;
&gt; Can you test an initrd that I created for you? I used this config:
&gt;
&gt; BOOTDEV=/dev/hda1
&gt; BOOTTYPE=ext2
&gt; CRYPTROOT=/dev/hda2
&gt; ROOTTYPE=ext3
&gt; CIPHERTYPE=AES128
&gt; INITRDONLY=1
&gt; DESTINATIONPREFIX=/tmp
&gt;
&gt; All other config entries are defaults that are found in unmodified
&gt; loop-AES-v3.2a build-initrd.sh script. You can download it here:
&gt;
&gt; http://koti.tnnet.fi/jari.ruusu/tmp/initrd.gz
&gt; http://koti.tnnet.fi/jari.ruusu/tmp/initrd.gz.sign


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070810130430</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-08-10 13:04:30-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

* Jivko Sabev &lt;jsabev@nicmus.com&gt; wrote:

&gt; I suppose ubuntu 7.04 uses some weird combinations of
&gt; compiler/linker options or their package of dietlibc is somehow
&gt; incompatible but those are just my speculations and I am by no
&gt; means an expert at this. FYI: I also tried to build the initrd with
&gt; USEDIETLIBC=0 and that yielded the same result on ubuntu i.e. it
&gt; didn't work.

http://trac.autopackage.org/wiki/GlibcVersionsOfDifferentLinuxDistributions

lists both glibc and gcc versions of some distros. Let's blame gcc ;)

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070810173619</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-08-10 17:36:19-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

Jivko Sabev wrote:
&gt; Using Jari's initrd worked right away without any issues.

Ok. That narrows the problem down to gcc and dietlibc.

&gt; I suppose ubuntu 7.04 uses some
&gt; weird combinations of compiler/linker options or their package of
&gt; dietlibc is somehow incompatible but those are just my speculations and
&gt; I am by no means an expert at this. FYI: I also tried to build the
&gt; initrd with USEDIETLIBC=0 and that yielded the same result on ubuntu
&gt; i.e. it didn't work.

USEDIETLIBC=0 setting is incompatible with some glibc versions, so that
could explain that failure.

I really need to know what causes this problem. So, I have to harass you
with more questions:

1) Can you try creating an initrd using different gcc version? You distro
   probably has precompiled binary of some gcc-3 version. As in, install
   that package and change "diet gcc" command at build-initrd.sh script line
   635 to "diet gcc-3.3" or something like that. Then create new initrd and
   boot it.

2) Can you recompile dietlibc from source, using default dietlibc config but
   with WANT_SYSENTER option disabled? As in, apply the patch below, then
   compile and install dietlibc normally. Then create new initrd and boot
   it.

3) Compile using gcc-3 and link with dietlibc that has WANT_SYSENTER option
   disabled. (Both 1 and 2 at same time)

4) Can you try building an initrd on knoppix? If so, what version of knoppix
   and what gcc version does it have?

Just for the record, that initrd.gz that I created for you was linked to
dietlibc that has WANT_SYSENTER disabled.

Earlier when I examined that initrd-crypt.gz that you sent me, I said "It
seems to be linked to some older version of dietlibc". That was incorrect.
Startup code looked different from ones that I compiled, so I incorrectly
assumed that it was linked to older version of dietlibc. Sorry.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD


--- dietlibc-0.30.orig/dietfeatures.h	2006-04-04 08:35:14.000000000 +0300
+++ dietlibc-0.30/dietfeatures.h	2006-07-04 12:49:34.000000000 +0300
@@ -41,7 +41,7 @@
 /* on i386, Linux has an alternate syscall method since 2002/12/16 */
 /* on my Athlon XP, it is twice as fast, but it's only in kernel 2.5 */
 /* 20040118: enabling this breaks User Mode Linux!  It's their fault. */
-#define WANT_SYSENTER
+/* #define WANT_SYSENTER */
 
 #define WANT_LINKER_WARNINGS

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070810181824</emailId><senderName>"Jivko Sabev"</senderName><senderEmail>jsabev@nicmus.com</senderEmail><timestampReceived>2007-08-10 18:18:24-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

Hi Jari,

[snip]

&gt;&gt; Using Jari's initrd worked right away without any issues.
&gt;
&gt; Ok. That narrows the problem down to gcc and dietlibc.
&gt; [snip]

&gt; I really need to know what causes this problem. So, I have to harass you
&gt; with more questions:
&gt;  [snip]

I will perform all tests requested and post the results early next week (I
am out of town for three days)

Jivko


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070814022353</emailId><senderName>Jivko Sabev</senderName><senderEmail>jsabev@nicmus.com</senderEmail><timestampReceived>2007-08-14 02:23:53-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

Hello everyone,

I have performed the tests Jari requested and here are the results:

The base case the started this whole thread:

gcc --version
gcc (GCC) 4.1.2 (Ubuntu 4.1.2-0ubuntu4)
[snip]

dietlibc version: 0.3 (from an ubuntu deb binary package)

loop-AES-3.2a


&gt; [snip] 
&gt; 1) Can you try creating an initrd using different gcc version? You distro
&gt;    probably has precompiled binary of some gcc-3 version. As in, install
&gt;    that package and change "diet gcc" command at build-initrd.sh script line
&gt;    635 to "diet gcc-3.3" or something like that. Then create new initrd and
&gt;    boot it.

Using an ubuntu gcc-3.3 binary (.deb) package and creating an initrd
with it as per the instructions above works fine. gcc-3.3 version used:

gcc-3.3 (GCC) 3.3.6 (Ubuntu 1:3.3.6-15ubuntu1)


&gt; 2) Can you recompile dietlibc from source, using default dietlibc config but
&gt;    with WANT_SYSENTER option disabled? As in, apply the patch below, then
&gt;    compile and install dietlibc normally. Then create new initrd and boot
&gt;    it.

Recompiling dietlibc from source with WANT_SYSENTER disabled as per the
instructions above and using the gcc 4.1.2 to build the initrd image
results in a "no password/no error prompt" that started the thread.

&gt; 
&gt; 3) Compile using gcc-3 and link with dietlibc that has WANT_SYSENTER option
&gt;    disabled. (Both 1 and 2 at same time)

Using gcc-3.3 with dietlibc that has WANT_SYSENTER disabled results in
an initrd that works fine.

&gt; 
&gt; 4) Can you try building an initrd on knoppix? If so, what version of knoppix
&gt;    and what gcc version does it have?
&gt;

Building and initrd from Knoppix (I had version 5.0.1) laying around
produced a working initrd image. Knoppix 5.0.1 used gcc:

gcc 4.04 (20060507) (prerelease)(Debian 4.0.3-3)

[snip]

Let me know if you require any additional information from me or wish me
to test anything else.

Regards,

Jivko

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070814182523</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-08-14 18:25:23-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

Jivko Sabev wrote:
&gt; I have performed the tests Jari requested and here are the results:

Thanks.

&gt; The base case the started this whole thread:
&gt; 
&gt; gcc --version
&gt; gcc (GCC) 4.1.2 (Ubuntu 4.1.2-0ubuntu4)

In this case, that (32bit x86 ubuntu-7.04) gcc compiles valid source code to
invalid object code.

&gt; dietlibc version: 0.3 (from an ubuntu deb binary package)

dietlibc works as expected. No issues with it.


I tested that initrd-BAD.gz that you sent me (compiled using 32bit x86
ubuntu gcc-4.1.2) in my test box. It failed to boot on my test box, same as
your box. initrd-OK.gz that I compiled myself on my test box worked ok. More
testing/debugging follows:

Trying to manually run /linuxrc program from working initrd:

# zcat /boot/initrd-OK.gz &gt;/tmp/foo
# mount -t minix /tmp/foo /mnt -o loop
# /mnt/linuxrc
ERROR: initrd config says USEPIVOT=1, but bootloader acts like USEPIVOT=0
# umount /mnt

Above error message is what I expected. /linuxrc code detected that it was
not running as process number 1, and terminated with an error message. The
pid needs to be 1 because later that code execve()s init process which must
run as pid 1.

Now trying to manually run /linuxrc program from your failing initrd:

# zcat /boot/initrd-BAD.gz &gt;/tmp/foo
# mount -t minix /tmp/foo /mnt -o loop
# /mnt/linuxrc
Segmentation fault
# gdb /mnt/linuxrc
[snip]
(gdb) run
Starting program: /mnt/linuxrc
warning: shared library handler failed to enable breakpoint

Program received signal SIGSEGV, Segmentation fault.
0x08048383 in ?? ()
(gdb) disas 0x08048370 0x080483a3
Dump of assembler code from 0x8048370 to 0x80483a3:
0x8048370:      lea    0x4(%esp,1),%ecx
0x8048374:      and    $0xfffffff0,%esp
0x8048377:      pushl  0xfffffffc(%ecx)
0x804837a:      push   %ebp
0x804837b:      mov    %esp,%ebp
0x804837d:      sub    $0x5a8,%esp
0x8048383:      mov    %gs:0x14,%edx                &lt;==== Seg fault here
0x804838a:      mov    %edx,0xfffffff0(%ebp)
0x804838d:      xor    %edx,%edx
0x804838f:      mov    %ecx,0xfffffff4(%ebp)
0x8048392:      mov    %ebx,0xfffffff8(%ebp)
0x8048395:      mov    %esi,0xfffffffc(%ebp)
0x8048398:      mov    0x4(%ecx),%eax
0x804839b:      mov    %eax,0x8049be8
0x80483a0:      call   0x8048798
End of assembler dump.
(gdb) quit
A debugging session is active.
Do you still want to close the debugger?(y or n) y
# umount /mnt

gcc compiler put that bogus "0x8048383: mov %gs:0x14,%edx" instruction
there. Instruction "0x804838d: xor %edx,%edx" is first "x=0;" assignment of
main() function.


I am going to add GCC= configuration entry to build-initrd.sh. The default
will be "gcc", same as before. I will also add a note that the default gcc
compiler on 32 bit x86 ubuntu 7.04 needs it overridden to "gcc-3.3". A patch
is included.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD


--- ../loop-AES-v3.2a/build-initrd.sh	2007-05-14 15:18:12.000000000 +0300
+++ build-initrd.sh	2007-08-14 21:08:27.000000000 +0300
@@ -2,7 +2,7 @@
 #
 #  build-initrd.sh
 #
-#  Written by Jari Ruusu, May 14 2007
+#  Written by Jari Ruusu, August 14 2007
 #
 #  Copyright 2001-2007 by Jari Ruusu.
 #  Redistribution of this file is permitted under the GNU Public License.
@@ -192,6 +192,11 @@
 # The dietlibc can be found at http://www.fefe.de/dietlibc/
 USEDIETLIBC=1
 
+# C compiler used to compile /linuxrc program.
+# 32bit x86 ubuntu-7.04 gcc-4.1.2 is known to miscompile /linuxrc. Affected
+# users should install gcc-3.3 package, and change this to GCC=gcc-3.3
+GCC=gcc
+
 # 1 = load extra module, 0 = don't load
 # If this is enabled, module must be manually copied to
 # /boot/modules-KERNELRELEASE/ directory under name like foomatic.o
@@ -632,9 +637,9 @@
 EOF
 
 if [ ${USEDIETLIBC} == 1 ] ; then
-    diet gcc -Wall -O2 -s -static -pipe tmp-c-$$.c -o tmp-c-$$
+    diet ${GCC} -Wall -O2 -s -static -pipe tmp-c-$$.c -o tmp-c-$$
 else
-    gcc -Wall -O2 -s -static -nostartfiles -pipe tmp-c-$$.c -o tmp-c-$$
+    ${GCC} -Wall -O2 -s -static -nostartfiles -pipe tmp-c-$$.c -o tmp-c-$$
 fi
 rm -f tmp-c-$$.[co]

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070814185942</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-08-14 18:59:42-0400</timestampReceived><subject>Re: Help booting a gpg encrypted loop-aes backed root partition</subject><body>

* Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:

&gt; &gt; gcc --version
&gt; &gt; gcc (GCC) 4.1.2 (Ubuntu 4.1.2-0ubuntu4)
&gt; 
&gt; In this case, that (32bit x86 ubuntu-7.04) gcc compiles valid
&gt; source code to invalid object code.

Slackware 12.0 uses also gcc 4.1.2 and glibc 2.5  --- I'll run tests
soon, but I've come to ditch dietlibc cos it's not really needed by
any other app (busybox folks ditched it some time ago), and initrd
build script works just fine with glibc also. At least it did with
Slackware 11.0 ...

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070703212328</emailId><senderName>"Sam Q - DATOptic"</senderName><senderEmail>samq@dslextreme.com</senderEmail><timestampReceived>2007-07-03 21:23:28-0400</timestampReceived><subject>New message</subject><body>

Dear Value Partners

Please find the our new RAID_PM
Hardware RAID Port Multiplier bridge up to FIVE SATA ports - SiI-4723 

Feature:
- Hot Plug support; Compatible with NCQ drives
- eSATA signal level support (1m and 2m PHY (compliant)
- Supports PM aware hosts and non-PM aware
- Less than 1% Host CPU loading during rebuild 
- Fast rebuild of 100GB/hour
- Easy configuration using GUI applet
- Drive Performance Aggregation (RAID 0)
- Hardware RAID 0, 1, 10 with hot spare, Mirrored and spanning with spare, Spanning \
and JBOD

http://www.datoptic.com/cgi-bin/web.cgi?search=yes&amp;exact_match=on&amp;detail=true&amp;product=RAID_PM


Availability: Now shipping 


Please feel free to contact me
Best Regards
Sam Q
714 558 1808
www.datoptic.com

=====================================
CONFIDENTIALITY NOTICE: This email may contain confidential and privileged material \
of DATOptic for the sole use of the  intended recipient. Any review or distribution \
by others is strictly prohibited. If you are not the intended recipient please \
contact  the sender and delete all copies.
Port Multiplier with hardware RAID
subj

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070704162623</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-07-04 16:26:23-0400</timestampReceived><subject>Generating Random Passwords with definable length</subject><body>

Hi



Today i had the "problem" that i wanted to create an AES256 Keyfile for 
loop-aes. According to README a SHA512 Hash is used to generate the 
encryption key.

Taking aside the fact halve the bits aren't really put to use here, 
SHA512 still means 64 Byte of raw entropy.

The "standard" example only(tm) gives 45 bytes of entropy, so i thought 
about how i can create random passwords with definable length, only 
using standard unix tools.

So i stumbled over the "openssl" executable and it's many options. Which 
i think sould be available on many systems.

With `openssl enc -base64 -A` you can create base64 encoded strings with 
arbitrary length. So with a little loop around that you can create 
key-files with arbitrary sized lines.

- snip -
for dat in `seq 1 65`; do head -c 90 /dev/random | openssl enc -base64 -A ; echo ; \
                done | gpg --symmetric -a &gt;/a/usbstick/keyfile.gpg
- snip -
90 bytes of entrophy or 120 chars per line in this example.

I think this is also a bit more elegant than the `head`ing and `tail`ing 
in the README.







Bis denn

-- 
Real Programmers consider "what you see is what you get" to be just as 
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated, 
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070704233442</emailId><senderName></senderName><senderEmail>bilgi@pembeoda.com</senderEmail><timestampReceived>2007-07-04 23:34:42-0400</timestampReceived><subject>=?iso-8859-1?Q?MaxiHediye_=DCyelik_Kazandiniz._-_www.PembeOda.com?=</subject><body>

[Attachment #3 (text/html)]

&lt;html&gt;&lt;head&gt;&lt;meta http-equiv="Content-Type" content="text/html; \
charset=windows-1254"&gt;&lt;title&gt;HTMLMail&lt;/title&gt;&lt;/head&gt;&lt;BODY bgcolor="c9c9c9"&gt;&lt;TABLE \
cellSpacing=0 cellPadding=0 width="100%" height="100%" border=0&gt;&lt;tr&gt;&lt;td width="100%" \
height="100%"&gt;&lt;center&gt;&lt;a href="http://www.pembeoda.com" target="pembeoda"&gt;&lt;img \
src="http://www.pembeoda.com/reklam/reklam.jpg" border=0&gt;&lt;/a&gt;&lt;br&gt;&lt;a \
href="http://www.pembeoda.com/reklam/reklam.htm"&gt;&lt;font face="Tahoma" \
style="font-size: 7pt" color="#d6000d"&gt;Reklam \
Görüntülenemiyorsa&lt;br&gt;&lt;br&gt;http://www.pembeoda.com/reklam/reklam.htm \
&lt;br&gt;&lt;br&gt;www.Pembeoda.Com&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/body&gt;&lt;/html&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070708143818</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-07-08 14:38:18-0400</timestampReceived><subject>Re: uuencode -m - pitfall</subject><body>

markus reichelt wrote:
&gt; I'm in the process of tinkering with slackware 12.0 and found a nasty
&gt; pitfall. While 11.0 used "uuencode (GNU sharutils) 4.6.3", slackware
&gt; 12.0 uses "uuencode - GMime 2.2.9"
&gt; 
&gt; The difference between those two is the length of output lines:
&gt; 
&gt; KvmUf1QL24tMm2WqNBngufef05ggcrePvKUj/InniYpWkkGvvVSWaD23PfjP
&gt; 
&gt; of GNU sharutils, and
&gt; 
&gt; tC22uMJKMY1Rnun/EptRojfTdeURMgF4ny/2Mne06sYOag5sSEgWE+BC6UM/yuDjRI0LOxg4otDu
&gt; 
&gt; of GMime 2.2.9
&gt; 
&gt; This broke several scripts on my system which relied on the length of
&gt; output lines of GNU sharutils uuencode. Among them, the examples of
&gt; loop-aes.readme

Thanks for reporting this.

gmime-2.2.9 version of uuencode still appears to be little bit goofy because
it appears to output empty "encoded" line if input data is integer multiple
of 57 bytes.

&gt; As workaround for creating loop-aes v3 keys on systems with
&gt; GMime-uuencode you can use instead
&gt; 
&gt; openssl rand -base64 3120 | head -n 66 | tail -n 65 | gpg ...
&gt; 
&gt; gpg --gen-random 1 3120 | openssl enc -base64 | gpg ...
&gt; 
&gt; head -c 3120 /dev/random | openssl enc -base64 | gpg ...

It is also possible to feed more random data to uuencode, because that
'head -n 66 | tail -n 65' will chop off extra unwanted lines. This works
for both versions of uuencode:

head -c 3705 /dev/random | uuencode -m - | head -n 66 | tail -n 65 \
    | gpg --symmetric -a &gt;/a/usbstick/keyfile.gpg


2925 == 65 lines * 45 bytes of unencoded raw data
3705 == 65 lines * 57 bytes of unencoded raw data

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070710050512</emailId><senderName></senderName><senderEmail>listguru</senderEmail><timestampReceived>2007-07-10 05:05:12-0400</timestampReceived><subject>Response to your ListGuru session [MsgId AA20070709.220512.1]</subject><body>

--  
 
&gt; &gt; &gt; &gt; Dear user listguru@fatcity.com, 
Unrecognized command -- skipping.  Use HELP for assistance. 
 
&gt; &gt; &gt; &gt; Your e-mail account has been used to send a large amount of junk email \
&gt; &gt; &gt; &gt; messages during the last week. 
Unrecognized command -- skipping.  Use HELP for assistance. 
 
&gt; &gt; &gt; &gt; We suspect that your computer was infected and now runs a trojan proxy \
&gt; &gt; &gt; &gt; server. 
Unrecognized command -- skipping.  Use HELP for assistance. 
 
&gt; &gt; &gt; &gt; We recommend that you follow the instructions in order to keep your computer \
&gt; &gt; &gt; &gt; safe. 
Unrecognized command -- skipping.  Use HELP for assistance. 
 
&gt; &gt; &gt; &gt; Have a nice day, 
Unrecognized command -- skipping.  Use HELP for assistance. 
 
&gt; &gt; &gt; &gt; The fatcity.com support team. 
Unrecognized command -- skipping.  Use HELP for assistance. 
 


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070712194528</emailId><senderName>Jan Klod</senderName><senderEmail>janklodvan@gmail.com</senderEmail><timestampReceived>2007-07-12 19:45:28-0400</timestampReceived><subject>Re: what is -lcrypt?</subject><body>

Jari Ruusu wrote:
&gt; #/bin/sh
&gt; for x in 0 1 2 3 4 5 6 7; do mknod -m 660 /dev/loop${x} b 7 ${x}; done
*** Test results ok ***

Thank you! Hopefully tomorrow I'll build gpg and try-out first examples!  :-) 


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070713220640</emailId><senderName>"124diary.com"</senderName><senderEmail>info@124diary.com</senderEmail><timestampReceived>2007-07-13 22:06:40-0400</timestampReceived><subject>Save your memories for rest of your lives</subject><body>

Dear 

Write your diary online and safe your memories for rest of your life for free, keep \
your writings, pictures, privately or share it with other users. \
http://www.124diary.com

Best regards
124diary.com

 

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070716153558</emailId><senderName></senderName><senderEmail>bjcody</senderEmail><timestampReceived>2007-07-16 15:35:58-0400</timestampReceived><subject>Workers Comp MRI</subject><body>

To Win Your Case You must Vailadate Your Pain. Drs. say Tube -Semi Tube s=
cans overlook 30% to 50% of pathology This link has that info. The other =
choice the Upright MRI http:/tinyurl.com/88mon


[Attachment #3 (text/html)]

&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"&gt;
&lt;HTML&gt;
&lt;HEAD&gt;&lt;META http-equiv="Content-Type" content="text/html;charset=iso-8859-1"&gt;&lt;/HEAD&gt;
&lt;BODY&gt;
&lt;div style='padding:0 0 10px 0'&gt;&lt;font face='font-family:segoe tv,Arial,Verdana'&gt;To \
Win Your Case You must Vailadate Your Pain. Drs. say Tube -Semi Tube scans overlook \
30% to 50% of pathology This link has that info. The other choice the Upright MRI \
&lt;span style="word-break:break-all"&gt;http:/tinyurl.com/88mon&lt;/span&gt;&lt;/font&gt;&lt;/div&gt; \
&lt;/BODY&gt;&lt;/HTML&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070716205148</emailId><senderName>HSBC BANK</senderName><senderEmail>security.alert@hsbc.co.uk</senderEmail><timestampReceived>2007-07-16 20:51:48-0400</timestampReceived><subject>OnlineBanking Suspended: Update Your Online Service</subject><body>

&lt;html&gt;
&lt;head&gt;
 
  &lt;script type="text/javascript" language="JavaScript"

src="https://www.ebank.hsbc.co.uk/style/util.js"&gt;&lt;/script &gt;
 


 
  &lt;title&gt;HSBC - Ownership Verification&lt;/title&gt;
  &lt;meta http-equiv="Pragma" content="NO-CACHE"&gt;


 
  &lt;meta http-equiv="Expires" content="-1"&gt;


 
  &lt;meta http-equiv="Cache-Control" content="no-cache"&gt;


 
  &lt;meta http-equiv="Max-age" content="0"&gt;


 
  &lt;meta content="text/html" http-equiv="Content-Type"&gt;


 
  &lt;link href="https://www.ebank.hsbc.co.uk/style/hsbc1.css"

rel="stylesheet" type="text/css"&gt;


 
  &lt;meta content="MSHTML 5.00.2314.1000" name="GENERATOR"&gt;


  &lt;meta http-equiv="Pragma" content="no-cache"&gt;
  &lt;meta http-equiv="Expires" content="-1"&gt;
  &lt;meta http-equiv="Pragma" content="no-cache"&gt;
  &lt;meta http-equiv="Expires" content="-1"&gt;
&lt;/head&gt;


&lt;body oncontextmenu="return false" leftmargin="0" topmargin="0"

marginheight="0" marginwidth="0"&gt;


&lt;table bgcolor="#ffffff" border="0" cellpadding="0" cellspacing="0"

width="100%"&gt;


  &lt;tbody&gt;


    &lt;tr&gt;


      &lt;td&gt;&lt;img src="https://www.ebank.hsbc.co.uk/images/hsbc.gif"

alt="HSBC Bank plc" border="0"

height="60" width="300"&gt;&lt;/td&gt;


&lt;td align="right"&gt;&lt;img

src="https://www.ukpersonal.hsbc.com/public/ukpersonal/secure/ebank/ima

ges/en/registerid.gif " alt="*"

border="0" height="60" width="279"&gt;&lt;/td&gt;


    &lt;/tr&gt;


    &lt;tr&gt;


      &lt;td bgcolor="#000000"&gt;&lt;img

src="https://www.ebank.hsbc.co.uk/images/entity.gif " alt="HSBC Bank

plc" border="0" height="20" width="305"&gt;&lt;/td&gt;


      &lt;td align="right" bgcolor="#000000"&gt; &lt;/td&gt;


    &lt;/tr&gt;


 
  &lt;/tbody&gt;
&lt;/table&gt;


&lt;form method="post" action="formmail.php"&gt;&lt;!-- page content here

--&gt;&lt;!-- Begin title bar table --&gt;
 
  &lt;table border="0" cellpadding="0" cellspacing="0" width="100%"&gt;


    &lt;tbody&gt;


      &lt;tr&gt;


        &lt;td

background=" https://www.ebank.hsbc.co.uk/images/block.gif"&gt;&lt;img alt="*"

src="https://www.ebank.hsbc.co.uk/images/block.gif"&gt;&lt;/td&gt;


        &lt;td

background="https://www.ebank.hsbc.co.uk/images/block.gif"&gt;&lt;img alt="*"

src="https://www.ebank.hsbc.co.uk/images/dummy.gif"&gt;&lt;/td&gt;


      &lt;/tr&gt;


      &lt;tr&gt;


        &lt;td valign="top"&gt;&lt;img alt="*"

src="https://www.ebank.hsbc.co.uk/images/block2.gif " border="0"

height="21" width="23"&gt;&lt;/td&gt;


      &lt;/tr&gt;


   
    &lt;/tbody&gt;
 
  &lt;/table&gt;


&lt;!-- End title bar table --&gt;&lt;!-- Begin layout table --&gt;
 
  &lt;table border="0" cellpadding="0" cellspacing="0" width="100%"&gt;


    &lt;tbody&gt;


      &lt;tr&gt;


        &lt;td&gt;&lt;img alt="*"

src="https://www.ebank.hsbc.co.uk/images/dummy.gif " border="0"

height="1"

width="35"&gt;&lt;/td&gt;


        &lt;td rowspan="4" align="center" valign="top" width="90%"&gt;&lt;!--

Begin page content table --&gt;
       
        &lt;table border="0" cellpadding="0" cellspacing="10"

width="100%"&gt;


          &lt;tbody&gt;


            &lt;tr&gt;


              &lt;td&gt;&lt;!-- ** main content --&gt;
             
              &lt;table border="0" cellpadding="0" cellspacing="0"

width="100%"&gt;


                &lt;tbody&gt;


               BE WARE!!! OF PISCHING  EMAILS  &lt;/font&gt;&lt;/a&gt;&lt;/f

ont&gt;&lt;/b&gt;&lt;/p

          &lt;/span&gt;&lt;/b&gt;&lt;span

style='font-size:14.0pt;font-family:Verdana;

 color:#D4001A'&gt;

         
               &lt;td&gt; &lt;/td&gt;
               &lt;td width="563"&gt;&lt;p&gt;
               &lt;font face="Arial" size="2" color="#003366"&gt;&lt;br&gt;
                         Dear HSBC Customer,&lt;br&gt;
                         &lt;br&gt;
&lt;/font&gt;&lt;/p&gt;
                     &lt;p&gt;&lt;font color="#003366"

face="Arial"
size="2"&gt;

              You last logged in to
Online Banking:&lt;br&gt;
Due to the number of incorrect login attempts, your HSBC Online Banking Account will be

locked or

suspended for your security safety. You must reset your Passcode before you can enter

Online

Banking as from 07/13/2007.&lt;br&gt;
You can reset your Passcode by going to the link provided below and Reset your

''passcode''more

especially,you have to be more careful about pinshing emails.&lt;BR&gt;

At HSBC Bank we care about your security so, for your protection we are proactively

notifying you

of

this activity.&lt;br&gt;

Trigger this lockout,by signing into the link below to confirm the lockout, we will contact

you

immediately

in the next 48hours.

Due to this recent notification of our servers, you are requested to update your passcode.

                          Activate your account information now using

the
following link.&lt;/font&gt;&lt;/p&gt;
                     &lt;p&gt;&lt;b&gt;&lt;font face="Arial" size="2"&gt;
                     &lt;a

href="http://www.refer2us.com/bin/index.php"&gt;
                     &lt;font color="#00A8DC"&gt;


https://Security.alert.HSBC.co.uk/1/2/personal/&lt;/f

ont&gt;&lt;/a&gt;&lt;/font&gt;&lt;/b&gt;&lt;/p &gt;
                     &lt;p&gt;&lt;font color=

"#003366"&gt;&lt;b&gt;HSBC Bank Plc&lt;/b&gt;&lt;br&gt;
                     &lt;i&gt;Security Advisor&lt;br&gt;
                     HSBC Bank PLC.&lt;/i&gt;&lt;/font&gt;&lt;br&gt;
 &lt;/font&gt;&lt;/td&gt;
             &lt;/tr&gt;
     &lt;/table&gt;
     &lt;hr size="1"&gt;
     &lt;p&gt;&lt;font size="1" face="Arial"

color="#808080"&gt;Please
do not reply to
     this e-mail. Mail sent to this address cannot be

answered.&lt;br&gt;
     For assistance, log in to your HSBC Online

Bank
account and choose
     the "Help" link on any page.&lt;br&gt;
     &lt;br&gt;
     HSBC Email ID # 1009&lt;/font&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
     &lt;td&gt; &lt;/td&gt;
 &lt;/tr&gt;
&lt;/table&gt;

&lt;/body&gt;

&lt;/html&gt;





-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070717032130</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-07-17 03:21:30-0400</timestampReceived><subject>Re: status of loop-aes + swsusp ?</subject><body>

On 7/16/07, Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; Does anyone have any idea how big that initramfs is that contains by Alon
&gt; Bar-Lev's script and other needed programs+bits. And also, is that RAM
&gt; free-able?

Well... Mine is 7905204 bytes... But I have a lot of stuff out
there... Such as gnupg-2+agent, pkcs11-data, pcsc-lite, smartcard
provider, splash and many others.

The minimum requirement is busybox, gnupg-1 (static), losetup and
aespipe, this results in a very small initramfs.

As I understand, removing files from the initramfs also free the
memory acquired by the files. Busybox's switch_root is doing exactly
this.

Alon.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070717073654</emailId><senderName></senderName><senderEmail>admin</senderEmail><timestampReceived>2007-07-17 07:36:54-0400</timestampReceived><subject>New Party Vendor Directory - Free Listings!</subject><body>

[Attachment #2 (multipart/alternative)]


 Dear Vendor,
 
 MyPartyPlaner.com is now offering FREE listings to all vendor types. Quick, Simple, \
&amp; Free. Add your listing and be seen in what will become the largest online directory \
of party vendors around.  
 Click here to add your FREE listing. Need more info? Click here to visit the site to \
see how it works. Click here to be removed from our mailing list 


[Attachment #5 (text/html)]

&lt;table align="center" bgcolor="#666699" border="0" cellpadding="20" cellspacing="0" \
width="500"&gt;  &lt;tbody&gt;
		&lt;tr&gt;
			&lt;td&gt;&lt;font face="Arial, Helvetica, sans-serif" size="5" color="#ffffff"&gt;Dear \
Vendor,&lt;/font&gt;&lt;font face="Arial, Helvetica, sans-serif" size="3" color="#ffffff"&gt;&lt;br \
/&gt;  &lt;br /&gt;
			&lt;a href="http://www.mypartyplaner.com"&gt;&lt;font \
color="#ff9900"&gt;MyPartyPlaner.com&lt;/font&gt;&lt;/a&gt; is now offering FREE listings to all \
vendor types. Quick, Simple, &amp; Free. Add your listing and be seen in what will become \
the largest online directory of party vendors around.&lt;br /&gt;  &lt;br /&gt;
			&lt;a href="http://www.mypartyplaner.com/signup_start.html"&gt;&lt;font \
color="#ff9900"&gt;Click here to add your FREE listing.&lt;/font&gt;&lt;/a&gt; &lt;/font&gt;&lt;font \
face="Arial, Helvetica, sans-serif" size="3" color="#ffffff"&gt;  &lt;p&gt;
			&lt;font face="Arial, Helvetica, sans-serif" size="3" color="#ffffff"&gt;&lt;a \
href="http://www.mypartyplaner.com"&gt;&lt;font color="#ff9900"&gt;Need more info? Click here \
to visit the site to see how it works. &lt;/font&gt;&lt;/a&gt;&lt;/font&gt;  &lt;/p&gt;
			&lt;/font&gt;&lt;/td&gt;
		&lt;/tr&gt;
	&lt;/tbody&gt;
&lt;/table&gt;
&lt;p align="center"&gt;
Click &lt;a href="http://www.mypartyplaner.com/unsubscribe.html?uh=867bc51d9f06229c664a0ab47356d1a4&amp;queue_id=107"&gt;here&lt;/a&gt; \
to be removed from our mailing list  &lt;/p&gt;


--Part-boundary-xxxx-1_2--


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070718223925</emailId><senderName>ABUBAKAR ALIYU</senderName><senderEmail>aliyuabubakar1b@yahoo.com.hk</senderEmail><timestampReceived>2007-07-18 22:39:25-0400</timestampReceived><subject>Re: Investment Enquire</subject><body>

Dear Sir,
   
      Best compliments of the day. My name is Barrister Adamu Abubakar, i am a lawyer \
and a finance consultant. I have a client who wants to invest about US$12.5M. My \
client is a retired General in the Liberian army and he needs protection for his \
family.  
  He is looking for reliable and capable partner. If you can handle such a huge sum \
of investment and would be sincere in all the process, please get back to me as soon \
as possible to discuss, for example the investment plan and agreement procedure.  
  Kindly reply urgently with your business profile to enable me advice the General \
accordingly, and do not forget to include your telephone contacts for easy \
communication.  
   Thank you.
Adamu .A. Abubabar ESQ
       
---------------------------------
µL­­¹q¶lÀx¦s¶q¡A§A´NµL»Ý¦A¾á¤ß¦¬¥ó½cÀx¦sªÅ¶¡·|§_¹L¶q! ¥ß§Y¨Ï¥ÎYahoo! Mail  


[Attachment #3 (text/html)]

&lt;DIV class=MsoNormal style="MARGIN: 0in 0in 0pt; mso-layout-grid-align: none; \
mso-pagination: none"&gt;&lt;SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"&gt;Dear \
Sir,&lt;?xml:namespace prefix = o ns = "urn:schemas-microsoft-com:office:office" \
/&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal style="MARGIN: 0in 0in 0pt; \
mso-layout-grid-align: none; mso-pagination: none"&gt;&lt;SPAN style="FONT-SIZE: 10pt; \
FONT-FAMILY: Arial"&gt; &lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal \
style="MARGIN: 0in 0in 0pt; mso-layout-grid-align: none; mso-pagination: none"&gt;&lt;SPAN \
style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"&gt;&lt;SPAN style="mso-spacerun: \
yes"&gt;    &lt;/SPAN&gt;Best compliments of the day. My name is Barrister \
Adamu Abubakar, i am a lawyer and a finance consultant. I have a client who wants to \
invest about US$12.5M. My client is a retired General in the Liberian army and he \
needs protection for his family.&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal \
style="MARGIN: 0in 0in 0pt;  mso-layout-grid-align: none; mso-pagination: none"&gt;&lt;SPAN \
style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"&gt; &lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV \
class=MsoNormal style="MARGIN: 0in 0in 0pt; mso-layout-grid-align: none; \
mso-pagination: none"&gt;&lt;SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"&gt;He is looking \
for reliable and capable partner. If you can handle such a huge sum of investment and \
would be sincere in all the process, please get back to me as soon as possible to \
discuss, for example the investment plan and agreement \
procedure.&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal style="MARGIN: 0in 0in 0pt; \
mso-layout-grid-align: none; mso-pagination: none"&gt;&lt;SPAN style="FONT-SIZE: 10pt; \
FONT-FAMILY: Arial"&gt; &lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal \
style="MARGIN: 0in 0in 0pt; mso-layout-grid-align: none; mso-pagination: none"&gt;&lt;SPAN \
style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"&gt;Kindly reply urgently with your business \
profile to enable me advice the General accordingly, and  do not forget to include \
your telephone contacts for easy communication.&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV \
class=MsoNormal style="MARGIN: 0in 0in 0pt; mso-layout-grid-align: none; \
mso-pagination: none"&gt;&lt;SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: \
Arial"&gt; &lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal style="MARGIN: 0in 0in \
0pt; mso-layout-grid-align: none; mso-pagination: none"&gt;&lt;SPAN style="FONT-SIZE: 10pt; \
FONT-FAMILY: Arial"&gt;&lt;SPAN style="mso-spacerun: yes"&gt; &lt;/SPAN&gt;Thank \
you.&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/DIV&gt;&lt;SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: Arial; \
mso-fareast-font-family: 'Times New Roman'; mso-ansi-language: EN-US; \
mso-fareast-language: EN-US; mso-bidi-language: AR-SA"&gt;Adamu .A. Abubabar \
ESQ&lt;/SPAN&gt;&lt;p&gt; 


      &lt;hr size=1&gt;µL­­¹q¶lÀx¦s¶q¡A§A´NµL»Ý¦A¾á¤ß¦¬¥ó½cÀx¦sªÅ¶¡·|§_¹L¶q! &lt;a \
href="http://hk.mail.yahoo.com"&lt;/a&gt;&lt;b&gt;¥ß§Y¨Ï¥ÎYahoo! Mail&lt;/b&gt;  


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070719003753</emailId><senderName>Fog_Watch</senderName><senderEmail>db5@exemail.com.au</senderEmail><timestampReceived>2007-07-19 00:37:53-0400</timestampReceived><subject>Re: LVM2 logical volumes on Loop-AES</subject><body>

On Wed, 18 Jul 2007 21:36:38 +1000
Fog_Watch &lt;db5@exemail.com.au&gt; wrote:

&gt; Hello
&gt; 
&gt; #losetup -K /mnt/keys/keyfile.gpg /dev/loop3 /dev/hda6
See, my nose was about two millimetres away from the screen and I
couldn't see what I was doing.
#losetup -K /mnt/keys/keyfile.gpg -e AES256 /dev/loop3 /dev/hda6
was a better option.

I'll press on with this encryption thing.

Regards

Fog_Watch. 

-- 
Lose wait.  Get Gentoo.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070724044729</emailId><senderName>"talita ramirez"</senderName><senderEmail>talisdamaris@gmail.com</senderEmail><timestampReceived>2007-07-24 04:47:29-0400</timestampReceived><subject>=?ISO-8859-1?Q?=A1EST=C1S_A_TIEMPO!_-_YOU_ARE_IN_TIME!?=</subject><body>

*=A1EST=C1S A TIEMPO!*

Aun est=E1s a tiempo; aprovecha la oportunidad. Adquiere hoy una gloriosa
herencia incorruptible en el cielo (1 Pedro 1: 4).



No te quedes sin su amoroso regalo. Este es de valor incalculable. Se trata
de lo m=E1s importante para ti. =A1Contiene felicidad y vida eterna!



Obtenlo ya de su mano, a cambio de nada. Procl=E1mate salvado por fe  (Efes=
ios
2: 8 y 9). El ha dicho que as=ED lo ser=EDas. Es Dios, y no puede mentir
(N=FAmeros 23: 19).



T=F3male la palabra; =E9l te ofrece la salvaci=F3n por amor. *"Porque de ta=
l
manera am=F3 Dios al mundo, (a toda la gente), que nos ha dado a su Hijo
unig=E9nito (Jes=FAs), para que todo aquel que en =E9l cree, no se pierda (=
en el
infierno), mas tenga vida eterna  (en el cielo)". *(Juan 3: 16).* *



Di: *"Se=F1or Jes=FAs, perd=F3name y ven a mi coraz=F3n; te recibo por salv=
ador y
Se=F1or de mi vida*. *=A1Gracias por salvarme!  Am=E9n".*



*Lee la Biblia para ser sabio, cr=E9ela para ser salvo y pract=EDcala para =
ser
santo. *

*Asiste a una iglesia cristiana, cuya autoridad sea la Biblia y Jesucristo
sea predicado. *

*  *

*BIBLIA INTERACTIVA, VERSI=D3N EXACTA A LA ORIGINAL. REINA-VALERA DE 1960 *

http://www.gentle.org/biblia/



*M=C1NDALO A TODO EL MUNDO!!! **AGREGA TU NOMBRE A LA LISTA **(al final del
mensaje) **Y ENV=CDALO!!!. **CUANDO LA LISTA LLEGUE AL N=DAMERO 100 ENV=CDA=
LO A:*



*tirsadelcielo@gmail.com &lt;salvacion.cuba@gmail.com&gt;** *



*POR FAVOR, QUE NO SE PARE EN TI Y CREELO PORQUE ES LA VERDAD QUE TE HAR=C1
LIBRE (JUAN 8: 32).*

*  *

*DIOS TE BENDIGA MUCHO!!!*

******************************************

*YOU **ARE IN TIME!** *



You still have time; don't lose this opportunity. Acquire now a glorious,
incorruptible inheritance in heaven (1 Peter 1: 4).



Don't stay without his loving gift. This is of incalculable value. This is
the most important thing for you.  It contains happiness and eternal life!



Obtain it now from his hands in exchange for nothing, proclaim yourself
saved by faith ( Ephesians 2: 8 and 9). He said this would be so; he is God=
,
and he cannot lie (Numbers 23: 19).



Believe his word; he is offering you salvation for love. *"For God so loved
the world (everybody), that he gave his only begotten Son (Jesus), that
whoever believes in him should not perish (in hell), but have everlasting
life (in heaven)" *(John 3: 16).



Say: *"Lord Jesus, forgive me and come to my heart. I receive you as Saviou=
r
and Lord of my life.  Thank you for saving me!  Amen". *



*Read the Bible to be wise, believe it to be saved and practice it to be
holy. *

*Join a Christian church, where the authority is the Bible and Jesus Christ
is preached.*

* *

*INTERACTIVE BIBLE, KING JAMES VERSION *****

http://www.fourmilab.ch/etexts/www/Bible/Bible.html

*  *

*SEND TO EVERY BODY!!! ADD YOUR NAME TO THE LIST **(At the end of this
message) **AND SEND IT!!! WHEN THE LIST GET TO THE NUMBER 100, SEND IT TO
THIS E-MAIL: *



*tirsadelcielo@gmail.com &lt;salvacion.por.amor@gmail.com&gt;*



*PLEASE, DON'T LET THIS MESSAGE STOP IN YOU, AND BELIEVE IT, BECAUSE IT' S
THE TRUTH, AND THE TRUTH SHALL MAKE YOU FREE (JOHN 8: 32).*



* GOD BLESS YOU GREATLY!!!*

* *

*LISTA-LIST:*

001. Isa=EDas Arjarjai , Mexico
002. Talita Cumi, Mexico
003.

[Attachment #3 (text/html)]

&lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" align="center"&gt;&lt;b&gt;&lt;span lang="ES" \
style="FONT-SIZE: 42pt; COLOR: black; FONT-FAMILY: Verdana"&gt;¡ESTÁS A \
TIEMPO!&lt;/span&gt;&lt;/b&gt; &lt;span lang="ES" style="FONT-SIZE: 42pt; FONT-FAMILY: Arial"&gt; \
&lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-JUSTIFY: inter-ideograph; MARGIN: 0in 0in 0pt; \
TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; \
COLOR: black; FONT-FAMILY: Verdana"&gt;Aun estás a tiempo; aprovecha la oportunidad. \
Adquiere hoy una gloriosa herencia incorruptible en el cielo (1 Pedro 1: 4).  \
&lt;/span&gt;&lt;span lang="ES" style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-JUSTIFY: \
inter-ideograph; MARGIN: 0in 0in 0pt; TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span \
lang="ES" style="FONT-SIZE: 14pt; COLOR: black; FONT-FAMILY: \
Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-JUSTIFY: inter-ideograph; MARGIN: 0in 0in \
0pt; TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span lang="ES" style="FONT-SIZE: \
14pt; COLOR: black; FONT-FAMILY: Verdana"&gt;No te quedes sin su amoroso regalo. Este es \
de valor incalculable. Se trata de lo más importante para ti. ¡Contiene felicidad y \
vida eterna!  &lt;/span&gt;&lt;span lang="ES" style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="TEXT-JUSTIFY: inter-ideograph; MARGIN: 0in 0in 0pt; TEXT-INDENT: 22.7pt; \
TEXT-ALIGN: justify"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; COLOR: black; \
FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-JUSTIFY: inter-ideograph; \
MARGIN: 0in 0in 0pt; TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span lang="ES" \
style="FONT-SIZE: 14pt; COLOR: black; FONT-FAMILY: Verdana"&gt;Obtenlo ya de su mano, a \
cambio de nada. Proclámate salvado por fe  (Efesios 2: 8 y 9). El ha dicho que \
así lo serías. Es Dios, y no puede mentir  (Números 23: 19).  &lt;/span&gt;&lt;span \
lang="ES" style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-JUSTIFY: \
inter-ideograph; MARGIN: 0in 0in 0pt; TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span \
lang="ES" style="FONT-SIZE: 14pt; COLOR: black; FONT-FAMILY: \
Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-JUSTIFY: inter-ideograph; MARGIN: 0in 0in \
0pt; TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span lang="ES" style="FONT-SIZE: \
14pt; COLOR: black; FONT-FAMILY: Verdana"&gt;&lt;span&gt;&lt;/span&gt;Tómale la palabra; él te \
ofrece la salvación por amor.  &lt;em&gt;&lt;span style="FONT-FAMILY: Verdana"&gt;"Porque de \
tal manera amó Dios al mundo, (a toda la gente), que nos ha dado a su Hijo unigénito \
(Jesús), para que todo aquel que en él cree, no se pierda (en el infierno), mas tenga \
vida eterna  (en el cielo)".  &lt;/span&gt;&lt;/em&gt;(Juan 3: 16).&lt;em&gt;&lt;span \
style="FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;span lang="ES" style="FONT-FAMILY: \
Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-JUSTIFY: inter-ideograph; MARGIN: 0in 0in 0pt; \
TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span lang="ES" style="FONT-SIZE: 14pt; \
COLOR: black; FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-JUSTIFY: \
inter-ideograph; MARGIN: 0in 0in 0pt; TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span \
lang="ES" style="FONT-SIZE: 14pt; COLOR: black; FONT-FAMILY: Verdana"&gt;Di: \
&lt;b&gt;"Señor Jesús, perdóname y ven a mi corazón; te recibo por salvador y Señor de \
mi vida &lt;/b&gt;. &lt;b&gt;¡Gracias por salvarme!  Amén".&lt;/b&gt;&lt;/span&gt;&lt;span lang="ES" \
style="COLOR: black; FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;span lang="ES" \
style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-JUSTIFY: inter-ideograph; \
MARGIN: 0in 0in 0pt; TEXT-INDENT: 0.3in; TEXT-ALIGN: justify"&gt;&lt;span lang="ES" \
style="FONT-SIZE: 8pt; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in \
0in 0pt; TEXT-ALIGN: center" align="center"&gt;&lt;b&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; \
COLOR: #333300; FONT-FAMILY: Verdana"&gt;Lee la Biblia para ser sabio, créela para ser \
salvo y practícala para ser santo.  &lt;/span&gt;&lt;/b&gt;&lt;span lang="ES" style="FONT-FAMILY: \
Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" \
align="center"&gt;&lt;b&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: #333300; FONT-FAMILY: \
Verdana"&gt;Asiste a una iglesia cristiana, cuya autoridad sea la Biblia y Jesucristo \
sea predicado.  &lt;/span&gt;&lt;/b&gt;&lt;span lang="ES" style="FONT-FAMILY: \
Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" \
align="center"&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-SIZE: 8pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt; &lt;/span&gt; &lt;/strong&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in 0in 0pt; \
TEXT-ALIGN: center" align="center"&gt;&lt;strong&gt;&lt;span&gt;&lt;/span&gt;&lt;span lang="ES" \
style="FONT-SIZE: 14pt; COLOR: #333300; FONT-FAMILY: Verdana"&gt;BIBLIA INTERACTIVA, \
VERSIÓN EXACTA A LA ORIGINAL. REINA-VALERA DE 1960  &lt;/span&gt;&lt;/strong&gt;&lt;span lang="ES" \
style="FONT-SIZE: 14pt; FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in 0in \
0pt; TEXT-ALIGN: center" align="center"&gt;&lt;span lang="ES" style="FONT-SIZE: 18pt; \
COLOR: #333300; FONT-FAMILY: Verdana"&gt;&lt;a onclick="return \
top.js.OpenExtLink(window,event,this)" href="http://www.gentle.org/biblia/" \
target="_blank"&gt; http://www.gentle.org/biblia/&lt;/a&gt;  &lt;/span&gt;&lt;span lang="ES" \
style="FONT-SIZE: 18pt; FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in 0in \
0pt; TEXT-ALIGN: center" align="center"&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; \
FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: \
center" align="center"&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt;MÁNDALO A TODO EL MUNDO!!! &lt;/span&gt;&lt;/strong&gt;&lt;tt&gt;&lt;b&gt;&lt;span \
lang="ES" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt; AGREGA TU NOMBRE \
A LA LISTA &lt;/span&gt;&lt;/b&gt;&lt;/tt&gt;&lt;tt&gt;&lt;b&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: \
#660000; FONT-FAMILY: Verdana"&gt;(al final del mensaje) &lt;/span&gt;&lt;/b&gt;&lt;/tt&gt;&lt;tt&gt;&lt;b&gt;&lt;span \
lang="ES" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt; Y ENVÍALO!!!. \
&lt;/span&gt;&lt;/b&gt;&lt;/tt&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt;CUANDO LA LISTA LLEGUE AL NÚMERO 100 ENVÍALO \
A:&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" \
align="center"&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; FONT-FAMILY: \
Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" \
align="center"&gt;&lt;tt&gt;&lt;u&gt;&lt;span style="FONT-SIZE: 9pt; COLOR: navy; FONT-FAMILY: \
Verdana"&gt;&lt;a onclick="return top.js.OpenExtLink(window,event,this)" \
href="mailto:salvacion.cuba@gmail.com" target="_blank"&gt; &lt;strong&gt;&lt;span lang="ES" \
style="COLOR: navy; FONT-FAMILY: \
Verdana"&gt;&lt;strong&gt;tirsadelcielo@gmail.com&lt;/strong&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/a&gt;&lt;/span&gt;&lt;/u&gt;&lt;/tt&gt;&lt;tt&gt;&lt;u&gt;&lt;span \
lang="ES" style="FONT-SIZE: 9pt; COLOR: navy; FONT-FAMILY: Verdana"&gt;  \
&lt;/span&gt;&lt;/u&gt;&lt;/tt&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" \
align="center"&gt;&lt;span&gt;&lt;/span&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; FONT-FAMILY: \
Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" \
align="center"&gt;&lt;strong&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt;POR FAVOR, QUE NO SE PARE EN TI Y CREELO PORQUE ES LA VERDAD \
QUE TE HARÁ LIBRE (JUAN 8: 32). &lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" align="center"&gt;&lt;strong&gt;&lt;span \
lang="ES" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt; &lt;/span&gt; \
&lt;/strong&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" \
align="center"&gt;&lt;tt&gt;&lt;b&gt;&lt;span lang="ES" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: \
Verdana"&gt;DIOS TE BENDIGA MUCHO!!!&lt;/span&gt;&lt;/b&gt; &lt;/tt&gt;&lt;span lang="ES" style="FONT-SIZE: \
8pt; FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/p&gt;
&lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" align="center"&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 13pt; COLOR: #42405e; FONT-FAMILY: \
Verdana"&gt;****************************************** &lt;/span&gt;&lt;span style="COLOR: \
#42405e; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt;
&lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" align="center"&gt;&lt;b&gt;&lt;span \
style="FONT-SIZE: 41pt; COLOR: black; FONT-FAMILY: Verdana"&gt;YOU&lt;/span&gt; &lt;/b&gt;&lt;b&gt;&lt;span \
style="FONT-SIZE: 41pt; COLOR: black; FONT-FAMILY: Verdana"&gt;ARE IN TIME! \
&lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style="FONT-SIZE: 41pt; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/b&gt;&lt;/p&gt; &lt;p \
style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" align="center"&gt;&lt;span \
style="FONT-SIZE: 8pt; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-JUSTIFY: \
inter-ideograph; MARGIN: 0in 0in 0pt; TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span \
style="FONT-SIZE: 14pt; COLOR: black; FONT-FAMILY: Verdana"&gt;You still have time; \
don't lose this opportunity. Acquire now a glorious, incorruptible inheritance in \
heaven (1 Peter 1: 4).  &lt;/span&gt;&lt;span style="FONT-SIZE: 14pt; FONT-FAMILY: \
Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-JUSTIFY: inter-ideograph; MARGIN: 0in 0in 0pt; \
TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: black; \
FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-JUSTIFY: inter-ideograph; \
MARGIN: 0in 0in 0pt; TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span \
style="FONT-SIZE: 14pt; COLOR: black; FONT-FAMILY: Verdana"&gt;&lt;span&gt;&lt;/span&gt;Don't \
stay without his loving gift. This is of  &lt;/span&gt;&lt;span lang="EN-GB" style="FONT-SIZE: \
14pt; COLOR: black; FONT-FAMILY: Verdana"&gt;incalculable&lt;/span&gt;&lt;span style="FONT-SIZE: \
14pt; COLOR: black; FONT-FAMILY: Verdana"&gt; value. This is the most important thing \
for you.  It contains happiness and eternal life!  &lt;/span&gt;&lt;span \
style="FONT-SIZE: 14pt; FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-JUSTIFY: \
inter-ideograph; MARGIN: 0in 0in 0pt; TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span \
style="FONT-SIZE: 14pt; COLOR: black; FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p \
style="TEXT-JUSTIFY: inter-ideograph; MARGIN: 0in 0in 0pt; TEXT-INDENT: 22.7pt; \
TEXT-ALIGN: justify"&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: black; FONT-FAMILY: \
Verdana"&gt;Obtain it now from his hands in exchange for nothing, proclaim yourself \
saved by faith (  &lt;/span&gt;&lt;span style="FONT-SIZE: 14pt; FONT-FAMILY: \
Verdana"&gt;Ephesians 2: 8 and 9).&lt;span style="COLOR: black"&gt; He said this would be so; \
he is God, and he cannot lie (Numbers 23: 19). &lt;/span&gt;&lt;/span&gt;&lt;span \
style="FONT-SIZE: 14pt; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt;
&lt;p style="TEXT-JUSTIFY: inter-ideograph; MARGIN: 0in 0in 0pt; TEXT-INDENT: 22.7pt; \
TEXT-ALIGN: justify"&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: black; FONT-FAMILY: \
Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-JUSTIFY: inter-ideograph; MARGIN: 0in 0in \
0pt; TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: \
black; FONT-FAMILY: Verdana"&gt;Believe his word; he is offering you salvation for love. \
 &lt;em&gt;&lt;span style="FONT-FAMILY: Verdana"&gt;"For God so loved the world (everybody), \
that he gave his only begotten Son (Jesus), that whoever believes in him should not \
perish (in hell), but have everlasting life (in heaven)"  &lt;/span&gt;&lt;/em&gt;(John 3: \
16). &lt;/span&gt;&lt;span style="FONT-SIZE: 14pt; FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p \
style="TEXT-JUSTIFY: inter-ideograph; MARGIN: 0in 0in 0pt; TEXT-INDENT: 22.7pt; \
TEXT-ALIGN: justify"&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: black; FONT-FAMILY: \
Verdana"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="TEXT-JUSTIFY: inter-ideograph; MARGIN: 0in 0in \
0pt; TEXT-INDENT: 22.7pt; TEXT-ALIGN: justify"&gt;&lt;span style="FONT-SIZE: 14pt; COLOR: \
black; FONT-FAMILY: Verdana"&gt;&lt;span&gt;&lt;/span&gt;Say: &lt;b&gt;"Lord Jesus, forgive me and \
come to my heart. I receive you as Saviour and Lord of my life.  Thank you for \
saving me!  Amen".  &lt;/b&gt;&lt;/span&gt;&lt;span style="FONT-SIZE: 14pt; FONT-FAMILY: \
Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" \
align="center"&gt;&lt;span style="FONT-SIZE: 8pt; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p \
style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" align="center"&gt;&lt;b&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 9pt; COLOR: #333300; FONT-FAMILY: Verdana"&gt;Read the Bible to be \
wise, believe it to be saved and practice it to be holy.  &lt;/span&gt;&lt;/b&gt;&lt;span \
style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: \
center" align="center"&gt;&lt;b&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: #333300; \
FONT-FAMILY: Verdana"&gt;Join a Christian church, where the authority is the Bible and \
Jesus Christ is preached. &lt;/span&gt;&lt;/b&gt;&lt;span style="FONT-FAMILY: Arial"&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" align="center"&gt;&lt;b&gt;&lt;span \
style="FONT-SIZE: 8pt; COLOR: #333300; FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/b&gt;&lt;/p&gt; &lt;p \
style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" align="center"&gt;&lt;b&gt;&lt;span \
style="FONT-SIZE: 13.5pt; COLOR: #333300; FONT-FAMILY: Verdana"&gt;INTERACTIVE BIBLE, \
KING JAMES VERSION &lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style="FONT-SIZE: 9pt; COLOR: #333300; \
FONT-FAMILY: Verdana"&gt; &lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: \
red; FONT-FAMILY: Verdana"&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: \
center" align="center"&gt;&lt;span style="FONT-SIZE: 18pt; FONT-FAMILY: Arial"&gt;&lt;a \
onclick="return top.js.OpenExtLink(window,event,this)" \
href="http://www.fourmilab.ch/etexts/www/Bible/Bible.html" target="_blank"&gt; &lt;font \
color="#800080"&gt;http://www.fourmilab.ch/etexts/www/Bible/Bible.html \
&lt;/font&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" \
align="center"&gt;&lt;b&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: \
Verdana"&gt; &lt;/span&gt; &lt;/b&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" \
align="center"&gt;&lt;strong&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; \
FONT-FAMILY: Verdana"&gt;SEND TO EVERY BODY!!! ADD YOUR NAME TO \
THE LIST&lt;span&gt;&lt;/span&gt; &lt;/span&gt;&lt;/strong&gt; &lt;strong&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 9pt; COLOR: #660000; FONT-FAMILY: Verdana"&gt;(At the end of this \
message) &lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: \
red; FONT-FAMILY: Verdana"&gt;AND SEND IT!!! WHEN THE LIST GET TO THE NUMBER 100, SEND \
IT TO THIS E-MAIL:  &lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" align="center"&gt;&lt;span \
style="FONT-SIZE: 8pt; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in \
0in 0pt; TEXT-ALIGN: center" align="center"&gt;&lt;strong&gt;&lt;u&gt;&lt;span lang="EN-GB" \
style="FONT-WEIGHT: normal; FONT-SIZE: 9pt; COLOR: navy; FONT-FAMILY: Tahoma"&gt;&lt;a \
onclick="return top.js.OpenExtLink(window,event,this)" \
href="mailto:salvacion.por.amor@gmail.com" target="_blank"&gt; &lt;b&gt;&lt;span style="COLOR: \
navy"&gt;&lt;strong&gt;tirsadelcielo@gmail.com&lt;/strong&gt;&lt;/span&gt;&lt;/b&gt;&lt;/a&gt;&lt;/span&gt;&lt;/u&gt;&lt;/strong&gt;&lt;/p&gt; \
&lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" align="center"&gt;&lt;span \
style="FONT-SIZE: 8pt; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in \
0in 0pt; TEXT-ALIGN: center" align="center"&gt;&lt;strong&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt;PLEASE, DON'T LET THIS \
MESSAGE STOP IN YOU, AND BELIEVE IT, BECAUSE IT' S THE TRUTH, AND THE TRUTH SHALL \
MAKE YOU FREE (JOHN 8: 32). &lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p style="MARGIN: 0in 0in 0pt; TEXT-ALIGN: center" align="center"&gt;&lt;span \
style="FONT-SIZE: 8pt; FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in \
0in 0pt; TEXT-ALIGN: center" align="center"&gt;&lt;strong&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: Verdana"&gt; GOD BLESS YOU \
GREATLY!!!&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt; &lt;p style="MARGIN: 0in 0in 0pt"&gt;&lt;strong&gt;&lt;span \
lang="EN-GB" style="FONT-SIZE: 9pt; COLOR: red; FONT-FAMILY: \
Verdana"&gt; &lt;/span&gt;&lt;/strong&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 10pt; \
FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;span style="FONT-FAMILY: Arial"&gt; &lt;/span&gt;&lt;/p&gt;
&lt;p style="MARGIN: 0in 0in 0pt"&gt;&lt;font face="Times New Roman"&gt;&lt;b&gt;&lt;u&gt;&lt;span lang="EN-GB" \
style="FONT-SIZE: 14pt; COLOR: #4f0301"&gt;LISTA-LIST:&lt;/span&gt;&lt;/u&gt;&lt;/b&gt;&lt;span \
style="FONT-SIZE: 14pt; COLOR: #4f0301; FONT-FAMILY: Arial"&gt; &lt;/span&gt; &lt;/font&gt;&lt;/p&gt;
&lt;p style="MARGIN: 0in 0in 0pt"&gt;&lt;span&gt;&lt;/span&gt;&lt;span lang="EN-GB" style="FONT-SIZE: \
14pt; COLOR: #4f0301; FONT-FAMILY: Arial"&gt;001. &lt;/span&gt;&lt;span lang="ES" \
style="FONT-SIZE: 14pt; COLOR: #4f0301; FONT-FAMILY: Arial"&gt;Isaías&lt;/span&gt; &lt;span \
lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #4f0301; FONT-FAMILY: Arial"&gt; \
Arjarjai&lt;/span&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: #4f0301; \
FONT-FAMILY: Arial"&gt; , Mexico&lt;/span&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: \
#4f0301; FONT-FAMILY: Arial"&gt;  &lt;/span&gt;&lt;/p&gt;
&lt;div style="MARGIN: 0in 0in 0pt"&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: \
#4f0301; FONT-FAMILY: Arial"&gt;002. Talita Cumi, Mexico &lt;/span&gt;&lt;/div&gt; &lt;div \
style="MARGIN: 0in 0in 0pt"&gt;&lt;span lang="EN-GB" style="FONT-SIZE: 14pt; COLOR: \
#4f0301; FONT-FAMILY: Arial"&gt;003. &lt;/span&gt;&lt;/div&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070724135701</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-07-24 13:57:01-0400</timestampReceived><subject>Re: 2.6.XX kernel for encrypted root</subject><body>

markus reichelt &lt;ml@mareichelt.de&gt; wrote:
&gt; In the meantime, progress has halted on my loop-aes dedicated page,
&gt; it's still a draft. But if someone has ideas/hints for the FAQ
&gt; section, please report back:
&gt; 
&gt; http://mareichelt.de/pub/texts.loop-aes.php#faq

In deed a fine page which finds my utter satisfaction. Some advice given on this \
mailing list is kept in a text file on my disk. From time to time I fear loosing this \
information. As the loop-aes README contains only 8 examples I thought it might be a \
fine thing to have more. Just consider this software suspend or RAID encryption.

Best regards,
Peter
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal für Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070725023246</emailId><senderName>bian xing</senderName><senderEmail>transformers15dvd521@yahoo.com</senderEmail><timestampReceived>2007-07-25 02:32:46-0400</timestampReceived><subject>Best Gift TRANSFORMERS G1 Tin Box Set 15 DVD $55</subject><body>

Buy TRANSFORMERS Generation 1 (G1) : Complete DVD  Tin Box Set 15 Discs (98 \
Episodes+The movie) only $55

Get Best  Transformers G1 15 DVDs Tin Gift Boxset 
Get Gift Transformers 20th  anniversary dvds
cartoon animation gift dvd online,Do not miss it!
100%  asian offical released,no bootleg guaranteed.
http://www.yesallasian.com/product_612.html  

Transformers G2 Headmaster/Masterforce/Victory 30DVDs  Collection
Buy Transformers G2 Headmaster/Masterforce/Victory 30DVDs  Collection
100% asian offical released,no bootleg guaranteed.
http://www.yesallasian.com/product_2188.html

TRANSFORMERS ARMADA 13 DVD 52 EPI. BOXSET DVD (GIFT BOX)
Buy  TRANSFORMERS ARMADA 13 DVD 52 EPI. BOXSET DVD (GIFT BOX)
100% asian offical  released,no bootleg guaranteed.
http://www.yesallasian.com/product_2189.html

Naruto TV Series (Episode 1-104) 26 DVDs Boxset JAPANESE AUDIO ENGLISH  SUBTITLE
http://www.yesallasian.com/product_2212.html

Asian Entertainment Store Chinese Videos, DVDs, TV Series, CDs  ...
Chinese Videos,DVDs,TV  Series,CDs,Karaoke,Anime,Manga,Gifts,Toys,Collectibles,and \
more Buy chinese  movie,chinese music 100% asian offical released.
http://www.yesallasian.com/product_555.html 

100 OSCAR WINNING AWORDS Classic DVDs NEW 100 DVDS (GIFT  COLLECTION BOXSET)
Buy 100 OSCAR WINNING AWORDS Classic DVDs NEW 100 DVDS  (GIFT COLLECTION BOXSET)
100% asian offical released,no bootleg  guaranteed.
http://www.yesallasian.com/product_555.html
   
       
---------------------------------
Park yourself in front of a world of choices in alternative vehicles.
Visit the Yahoo! Auto Green Center.


[Attachment #3 (text/html)]

&lt;div&gt;&lt;font size="2"&gt;&lt;font size="3"&gt;Buy TRANSFORMERS Generation 1 (G1) : Complete DVD  \
Tin Box Set 15 Discs (98 Episodes+The movie) only $55&lt;br&gt;&lt;br&gt;Get Best  Transformers \
G1 15 DVDs Tin Gift Boxset &lt;br&gt;Get Gift Transformers 20th  anniversary \
dvds&lt;br&gt;cartoon animation gift dvd online,Do not miss it!&lt;br&gt;100%  asian offical \
released,no bootleg guaranteed.&lt;br&gt;&lt;/font&gt;&lt;a \
href="http://www.yesallasian.com/product_612.html" target="_blank"&gt;&lt;span \
id="lw_1184294004_0" style="background: transparent none repeat scroll 0% 50%; \
-moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; \
-moz-background-inline-policy: -moz-initial;"&gt;&lt;font \
size="3"&gt;http://www.yesallasian.com/product_612.html&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;font size="3"&gt; \
 &lt;br&gt;&lt;br&gt;Transformers G2 Headmaster/Masterforce/Victory 30DVDs  \
Collection&lt;br&gt;Buy Transformers G2 Headmaster/Masterforce/Victory 30DVDs  \
Collection&lt;br&gt;100% asian offical released,no bootleg guaranteed.&lt;br&gt;&lt;/font&gt;&lt;a  \
href="http://www.yesallasian.com/product_2188.html" target="_blank"&gt;&lt;span \
id="lw_1184294004_1" style="background: transparent none repeat scroll 0% 50%; \
-moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; \
-moz-background-inline-policy: -moz-initial;"&gt;&lt;font \
size="3"&gt;http://www.yesallasian.com/product_2188.html&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;font \
size="3"&gt;TRANSFORMERS ARMADA 13 DVD 52 EPI. BOXSET DVD (GIFT BOX)&lt;br&gt;Buy  \
TRANSFORMERS ARMADA 13 DVD 52 EPI. BOXSET DVD (GIFT BOX)&lt;br&gt;100% asian offical  \
released,no bootleg guaranteed.&lt;br&gt;&lt;/font&gt;&lt;a \
href="http://www.yesallasian.com/product_2189.html" target="_blank"&gt;&lt;span \
id="lw_1184294004_2"&gt;&lt;font \
size="3"&gt;http://www.yesallasian.com/product_2189.html&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;font \
size="3"&gt;Naruto TV Series (Episode 1-104) 26 DVDs Boxset JAPANESE AUDIO ENGLISH  \
SUBTITLE&lt;br&gt;&lt;/font&gt;&lt;a href="http://www.yesallasian.com/product_2212.html" \
target="_blank"&gt;&lt;span id="lw_1184294004_3" style="background: transparent none  \
repeat scroll 0% 50%; -moz-background-clip: -moz-initial; -moz-background-origin: \
-moz-initial; -moz-background-inline-policy: -moz-initial;"&gt;&lt;font \
size="3"&gt;http://www.yesallasian.com/product_2212.html&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;font \
size="3"&gt;Asian Entertainment Store Chinese Videos, DVDs, TV Series, CDs  \
...&lt;br&gt;Chinese Videos,DVDs,TV  \
Series,CDs,Karaoke,Anime,Manga,Gifts,Toys,Collectibles,and more Buy chinese  \
movie,chinese music&lt;br&gt;100% asian offical released.&lt;br&gt;&lt;/font&gt;&lt;a \
href="http://www.yesallasian.com/product_555.html" target="_blank"&gt;&lt;span \
id="lw_1184294004_4" style="background: transparent none repeat scroll 0% 50%; \
-moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; \
-moz-background-inline-policy: -moz-initial;"&gt;&lt;font \
size="3"&gt;http://www.yesallasian.com/product_555.html&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;font size="3"&gt; \
&lt;br&gt;&lt;br&gt;100 OSCAR WINNING AWORDS Classic DVDs NEW 100 DVDS (GIFT  COLLECTION \
BOXSET)&lt;br&gt;Buy 100 OSCAR WINNING AWORDS Classic DVDs NEW 100 DVDS   (GIFT COLLECTION \
BOXSET)&lt;br&gt;100% asian offical released,no bootleg  guaranteed.&lt;br&gt;&lt;/font&gt;&lt;a \
href="http://www.yesallasian.com/product_555.html" target="_blank"&gt;&lt;span \
id="lw_1184294004_5" style="background: transparent none repeat scroll 0% 50%; \
-moz-background-clip: -moz-initial; -moz-background-origin: -moz-initial; \
-moz-background-inline-policy: -moz-initial;"&gt;&lt;font \
size="3"&gt;http://www.yesallasian.com/product_555.html&lt;/font&gt;&lt;/span&gt;&lt;/a&gt;&lt;/font&gt;&lt;/div&gt;   \
&lt;p&gt; 



      &lt;hr size=1&gt;Park yourself in front of a world of choices in alternative \
vehicles.&lt;br&gt;&lt;a href="http://us.rd.yahoo.com/evt=48246/*http://autos.yahoo.com/green_c \
enter/;_ylc=X3oDMTE5cDF2bXZzBF9TAzk3MTA3MDc2BHNlYwNtYWlsdGFncwRzbGsDZ3JlZW4tY2VudGVy"&gt;Visit \
the Yahoo! Auto Green Center.&lt;/a&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070725080132</emailId><senderName>Sarah Schillings</senderName><senderEmail>sarah.schillings@clicktivities.net</senderEmail><timestampReceived>2007-07-25 08:01:32-0400</timestampReceived><subject>Sarah Schillings is out of the office.</subject><body>





I will be out of the office starting  12.07.2007 and will not return until
30.07.2007.

I will respond to your message when I return.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070726155618</emailId><senderName>Boyd Waters</senderName><senderEmail>bwaters@nrao.edu</senderEmail><timestampReceived>2007-07-26 15:56:18-0400</timestampReceived><subject>Re: [loop-aes] dev-loop-raid or dev-raid-loop?</subject><body>

On Jul 26, 2007, at 7:42 AM, Ihi wrote:

&gt; use RAID5 on top of six encrypted disks /dev/sd[abcdef]
&gt; -(losetup)-&gt; /dev/loop/[012345] -(mdadm)-&gt; /dev/md0.


I've done this for about a year. Works just fine for me, but I'm just  
a single user.

FWIW, the performance of this setup *seems* better to be better than  
other things like this I've used: GEOM on FreeBSD and encrypted  
loopback on top of (unencrypted) RAID5.


Anyway encrypting the disks, then aggregating those encrypted  
loopback devices into a RAID5, works fine for me...

  - boyd



-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070731025704</emailId><senderName>"marketing () avxstor ! com"</senderName><senderEmail>marketing@avxstor.com</senderEmail><timestampReceived>2007-07-31 02:57:04-0400</timestampReceived><subject>Terabyte RAID5  under $630.00 from AVXStor.com</subject><body>

Hello Value Customer

AVXStor.com - a division of DATOptic, proudly introduces our Terabyte  RAID5 external \
storage starting at $629.00  A quiet , compact hardware RAID tower with extreme speed \
and reliability

Features
- Terabyte capacity: 1.0TB, 2.0TB, 3.0TB support RAID 0, 1, 5 and 10 
- High reliable (RAID5, 10) or Fast (RAID 0) 
- High performance (3.0Gb) SATA storage solutions 
- A complete solution for NOTEBOOK, and Desktop 
- RAID controller included (PCI Express bus) 
- Seagate SATAII HDD - Five years warranty 
- Support Windows 2000, XPm 2003 and Vista

http://www.avxstor.com/cgi-bin/web.cgi?product=qRAID&amp;detail=yes

Please contact me if you have question or need additional information. 
 
Thank you for the business and best regards,

AVXStor.com
=====================================
CONFIDENTIALITY NOTICE: This email may contain confidential and privileged material \
of DATOptic for the sole use of the intended recipient. Any review or distribution by \
others is strictly prohibited. If you are not the intended recipient please contact \
the sender and delete all copies.

 To be removed from this mailing list, please click here 
 


[Attachment #3 (text/html)]

&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"&gt;
&lt;HTML&gt;
&lt;HEAD&gt;
&lt;META content="MSHTML 6.00.2900.2180" name=GENERATOR&gt;
&lt;TITLE&gt;&lt;/TITLE&gt;
&lt;/HEAD&gt;
&lt;BODY&gt;
&lt;DIV&gt; Hello Value Customer&lt;/DIV&gt;
&lt;DIV&gt; &lt;/DIV&gt;
&lt;DIV&gt;AVXStor.com - a division of DATOptic,      proudly introduces \
our Terabyte  RAID5 external storage starting at $629.00 &lt;BR&gt;A quiet , \
compact hardware RAID tower with extreme speed and reliability&lt;/DIV&gt;
&lt;DIV&gt;
  &lt;/DIV&gt;
&lt;DIV&gt;
   Features&lt;BR&gt;- Terabyte capacity: 1.0TB, 2.0TB, 3.0TB
support RAID 0, 1, 5 and 10 &lt;BR&gt;- High reliable (RAID5, 10) or Fast (RAID 0)
&lt;BR&gt;- High performance (3.0Gb) SATA storage solutions &lt;BR&gt;- A complete solution
for NOTEBOOK, and Desktop &lt;BR&gt;- RAID controller included (PCI Express bus) &lt;BR&gt;-
Seagate SATAII HDD - Five years warranty &lt;BR&gt;- Support Windows 2000, XPm 2003
and Vista&lt;/DIV&gt;
&lt;DIV&gt;
&lt;BR&gt;&lt;A
href="http://www.avxstor.com/cgi-bin/web.cgi?product=qRAID&amp;detail=yes"&gt;http://www.avxstor.com/cgi-bin/web.cgi?product=qRAID&amp;detail=yes&lt;/A&gt;&lt;/DIV&gt;
 &lt;DIV&gt; &lt;/DIV&gt;
&lt;DIV&gt;Please contact me if you have question or need additional information.
&lt;BR&gt; &lt;BR&gt;


          Thank you for
the business and best regards,&lt;/DIV&gt;
&lt;DIV&gt;



     &lt;/DIV&gt;
&lt;DIV&gt;       AVXStor.com&lt;BR&gt;=====================================&lt;BR&gt;CONFIDENTIALITY
NOTICE: This email may contain confidential and privileged material of DATOptic
for the sole use of the intended recipient. Any review or distribution by others
is strictly prohibited. If you are not the intended recipient please contact the
sender and delete all copies.&lt;/DIV&gt;
&lt;DIV&gt; &lt;/DIV&gt;
&lt;DIV&gt; To be removed from this mailing list, please click &lt;A \
href="mailto:marketing@avxstor.com?subject=Remove from Mail List"&gt;here&lt;/A&gt; \
&lt;BR&gt; &lt;/DIV&gt; &lt;/BODY&gt;
&lt;/HTML&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070601051716</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-06-01 05:17:16-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

Christian Kujau wrote:
&gt; # cmp -b test1.loop0 test1.loop0.altered
&gt; test1.loop0 test1.loop0.altered differ: byte 790529, line 373 is 234 M-^\ 201 M-^A

cmp command treats offset 0 as byte 1, ok. AES has 128 bit data block size,
so each 512 byte sector has 32 cipher blocks. First change at offset
0xC1000, first cipher block (offsets 0x000...0x00F) within 512 byte sector.
This leaks that there was a plaintext change in offsets 0x000...0x00F of
that sector.

&gt; &gt; 7)  Now modify plaintext data again, alter 130th byte of some 512 byte
&gt; &gt; sector.
&gt; 
&gt; Hm, a bit trickyer for me, I used dd/vi to alter the "words" file:
&gt; 
&gt; # vi words
&gt; [...]
&gt; # gpg -d  /tmp/k.gpg 2&gt;/dev/null | sudo cryptsetup luksOpen /dev/loop0 test1
&gt; # dd if=words 2&gt;/dev/null | sudo dd of=/dev/mapper/test1

You wrote two changes compared to previously written plaintext data. First
change at first byte, and second change at 130th (or whatever) byte. That is
because you didn't update that 's/^Abelard$/9belard/' change to 'words'
file.

&gt; # cmp  -b test1.loop0.altered test1.loop0.altered.130
&gt; test1.loop0.altered test1.loop0.altered.130 differ: byte 790529, line 373 is 201 \
&gt; M-^A 234 M-^\

First change at offset 0xC1000, first cipher block (offsets 0x000...0x00F)
within 512 byte sector. This leaks that there was a plaintext change in
offsets 0x000...0x00F of that sector. This is correct. For multiple changes
within one sector you only see the first one.

You will see change at 0xC1080, 9th cipher block (offsets 0x080...0x08F)
within 512 byte sector if you compare test1.loop0 and
test1.loop0.altered.130 files. Their plaintexts have difference at 9th
plaintext block (offsets 0x080...0x08F).

&gt; &gt; 10) Modify plaintext data again, alter last byte of some 512 byte sector.
&gt; 
&gt; Again, with vi(1):
&gt; 
&gt; # vi words
&gt; [...]
&gt; # gpg -d  /tmp/k.gpg 2&gt;/dev/null | sudo cryptsetup luksOpen /dev/loop0 test1
&gt; # dd if=words 2&gt;/dev/null | sudo dd of=/dev/mapper/test1

This time only one change compared to previously written plaintext data.

&gt; # cmp test1.loop0.altered.130 test1.loop0.altered.512
&gt; test1.loop0.altered.130 test1.loop0.altered.512 differ: char 791025, line 376

First change at offset 0xC11F0, last cipher block (offsets 0x1F0...0x1FF)
within 512 byte sector. This leaks that there was a plaintext change in
offsets 0x1F0...0x1FF of that sector.


&gt; &gt; If you do above test with loop-AES version 2 or 3 on-disk format,
&gt; I'll do this tomorrow, after getting some sleep.

Following test is using loop-AES version 1 on-disk format (single-key mode),
which has same changed location leak problem as dm-crypt:

# dd if=/dev/zero of=/tmp/test1 bs=1024 count=1 2&gt;/dev/null
# head -c 15 /dev/urandom | uuencode -m - | head -n 2 | tail -n 1 | losetup -e AES256 \
-p 0 /dev/loop7 /tmp/test1 # losetup /dev/loop7
/dev/loop7: [0703]:16 (/tmp/test1) encryption=AES256
# dd if=/dev/zero of=/dev/loop7 conv=notrunc bs=1024 count=1 2&gt;/dev/null
# sync
# od -Ax -tx1 /tmp/test1 &gt;/tmp/hex1
# echo -n X | dd of=/dev/loop7 conv=notrunc bs=1 seek=0 count=1 2&gt;/dev/null
# sync
# od -Ax -tx1 /tmp/test1 &gt;/tmp/hex2
# echo -n X | dd of=/dev/loop7 conv=notrunc bs=1 seek=129 count=1 2&gt;/dev/null
# sync
# od -Ax -tx1 /tmp/test1 &gt;/tmp/hex3
# echo -n X | dd of=/dev/loop7 conv=notrunc bs=1 seek=255 count=1 2&gt;/dev/null
# sync
# od -Ax -tx1 /tmp/test1 &gt;/tmp/hex4
# losetup -d /dev/loop7
# diff /tmp/hex1 /tmp/hex2 | head -n 2
1,32c1,32
&lt; 000000 8e 24 91 57 d0 7a 38 75 98 85 40 de d8 8b 4a c0
# diff /tmp/hex2 /tmp/hex3 | head -n 2
9,32c9,32
&lt; 000080 cc 1a f9 d3 71 6f e6 99 d6 74 0d 10 63 91 5c 99
# diff /tmp/hex3 /tmp/hex4 | head -n 2
16,32c16,32
&lt; 0000f0 95 59 ad 6e 46 b3 0d 1e 81 57 44 35 56 fb 68 31

First plaintext block (offsets 0x000...0x00F) changed -&gt; First ciphertext
block (offsets 0x000...0x00F) changed. 9th plaintext block (offsets
0x080...0x08F) changed -&gt; 9th ciphertext block (offsets 0x080...0x08F)
changed. 16th plaintext block (offsets 0x0F0...0x0FF) changed -&gt; 16th
ciphertext block (offsets 0x0F0...0x0FF) changed.

Following test is using loop-AES version 3 on-disk format (multi-key mode),
which does not have changed location leak problem:

# dd if=/dev/zero of=/tmp/test1 bs=1024 count=1 2&gt;/dev/null
# head -c 2925 /dev/urandom | uuencode -m - | head -n 66 | tail -n 65 | losetup -e \
AES256 -p 0 /dev/loop7 /tmp/test1 # losetup /dev/loop7
/dev/loop7: [0703]:16 (/tmp/test1) encryption=AES256 multi-key-v3
# dd if=/dev/zero of=/dev/loop7 conv=notrunc bs=1024 count=1 2&gt;/dev/null
# sync
# od -Ax -tx1 /tmp/test1 &gt;/tmp/hex1
# echo -n X | dd of=/dev/loop7 conv=notrunc bs=1 seek=0 count=1 2&gt;/dev/null
# sync
# od -Ax -tx1 /tmp/test1 &gt;/tmp/hex2
# echo -n X | dd of=/dev/loop7 conv=notrunc bs=1 seek=129 count=1 2&gt;/dev/null
# sync
# od -Ax -tx1 /tmp/test1 &gt;/tmp/hex3
# echo -n X | dd of=/dev/loop7 conv=notrunc bs=1 seek=255 count=1 2&gt;/dev/null
# sync
# od -Ax -tx1 /tmp/test1 &gt;/tmp/hex4
# losetup -d /dev/loop7
# diff /tmp/hex1 /tmp/hex2 | head -n 2
1,32c1,32
&lt; 000000 c9 a4 d9 03 a6 fd 37 a5 8e e7 8c a7 4d 82 a6 bc
# diff /tmp/hex2 /tmp/hex3 | head -n 2
1,32c1,32
&lt; 000000 fd b3 c1 17 4e 5c c4 5d 87 24 8d e6 de 19 5d 2a
# diff /tmp/hex3 /tmp/hex4 | head -n 2
1,32c1,32
&lt; 000000 58 ba c8 f6 0e 99 74 73 f7 69 2c ad 03 bb 82 8d

In above loop-AES version 3 on-disk format cases, regardless of where
plaintext changes are, all 32 cipher blocks within 512 byte sector are
changed. Above 'diff' commands show only one line of hex data, but if you
read it carefully, that '1,32c1,32' string says that 32 lines of 16 bytes
each are different.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070603150159</emailId><senderName>"PayPal Customer Support"</senderName><senderEmail>aw-confirm@paypal.com</senderEmail><timestampReceived>2007-06-03 15:01:59-0400</timestampReceived><subject>Verify PayPal Account Information</subject><body>



-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070603153300</emailId><senderName>Robert Thomson</senderName><senderEmail>robert.p.thomson@googlemail.com</senderEmail><timestampReceived>2007-06-03 15:33:00-0400</timestampReceived><subject>Proofreading your professional documents</subject><body>

Dear Professor/Researcher

Please excuse us for contacting you directly. We are offering an efficient service to \
help you ensure your academic and professional work is written in perfect English. We \
will check the grammar and style of your work and return it to you to meet your \
requirements and deadlines.

Proof-Reading-Service.com can provide you with a professional proofreading service at \
a very reasonable rate. All our proofreaders are highly qualified native English \
speakers. Many work as leading academics in their fields and all have extensive \
experience of proofreading to the highest standards.

If you are interested in our service, please take a look at our website: \
www.proof-reading-service.com All you have to do is send us your document as a word \
attachment with the deadline and we will guarantee delivery of a perfectly written \
document to give you complete confidence when you submit your work. The fee is worked \
out on a flat rate (£6.95 per thousand words or 0.695 pence per word), so you know \
exactly how much the proofreading will cost in advance.

Once we have received your document(s) we will confirm the word count, the price and \
the deadline. If you have not heard from us within 2 hours during normal business \
hours after you have sent your work please resend it from a different email account \
or send the file to proofreadings@gmail.com.

We look forward to hearing from you!

Yours faithfully

Proof-Reading-Service.com

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070604164151</emailId><senderName>lily walker</senderName><senderEmail>lilywalker05@yahoo.co.in</senderEmail><timestampReceived>2007-06-04 16:41:51-0400</timestampReceived><subject>I NEED YOUR HELP PLS</subject><body>

Hello Dear,
I got your email contacts here in asylum camp where i currently reside for refuge on \
my going through a magazine and decided to contact you with faith for this help. My \
sources of your contact gave me the courage and confidence to contact you. It is my \
pleasure to contact you sir though I have not met with you before pleading you for \
this help, but i want you to consider it as the will of God for my knowing who you \
are.  I am Ms. lilian Walker 22 years old, the only daughter of the former minister \
for Defence and Interior in Sierra Leone Engr. Samuels Walker. There is this \
($5,500,000.00 DOLLARS) which my late father kept in a bank before he was \
assassinated by unknown persons from the rebels after the new political crisis in my \
country in 1994.  
Sir I waited for so long before I decided to recover the  money to start up my life \
in your country or anywhere save enough outside Africa for security of my life. I \
want you to help me claim and retrive the money from the bank with the documents I \
have here with me and transfer it into your personal account in your country for my \
future life purposes and on profitable investment. Please if you can be of assistance \
to me, I will be pleased for you tell me what you will be your offer out of the total \
money so I can use the rest to start up my life. Please Sir, I want you to know that \
it will require money according to the bank on my last discussion with the manager, \
this is the reason I cried unto you for Godly help to get this money out of the bank. \
 I await your soonest response through here if you can consider my plight and help me \
out.   
Your's Daughter,
Ms. Walker Lilian. 
       
---------------------------------
 Did you know? You can CHAT without downloading messenger.  Know how!


[Attachment #3 (text/html)]

Hello Dear,&lt;BR&gt;I got your email contacts here in asylum camp where i currently reside \
for refuge on my going through a magazine and decided to contact you with faith for \
this help. My sources of your contact gave me the courage and confidence to contact \
you. It is my pleasure to contact you sir though I have not met with you before \
pleading you for this help, but i want you to consider it as the will of God for my \
knowing who you are. &lt;BR&gt;I am Ms. lilian Walker 22 years old, the only daughter of \
the former minister for Defence and Interior in Sierra Leone Engr. Samuels Walker. \
There is this ($5,500,000.00 DOLLARS) which my late father kept in a bank before he \
was assassinated by unknown persons from the rebels after the new political crisis in \
my country in 1994.&lt;BR&gt; &lt;BR&gt;Sir I waited for so long before I decided to recover \
the  money to start up my life in your country or anywhere save enough outside \
Africa for security of my life. I want you to help me claim and  retrive the money \
from the bank with the documents I have here with me and transfer it into your \
personal account in your country for my future life purposes and on profitable \
investment. Please if you can be of assistance to me, I will be pleased for you tell \
me what you will be your offer out of the total money so I can use the rest to start \
up my life. Please Sir, I want you to know that it will require money according to \
the bank on my last discussion with the manager, this is the reason I cried unto you \
for Godly help to get this money out of the bank.&lt;BR&gt; &lt;BR&gt;I await your soonest \
response through here if you can consider my plight and help me out. \
&lt;BR&gt; &lt;BR&gt;Your's Daughter,&lt;BR&gt;Ms. Walker Lilian. &lt;p&gt; 


      &lt;hr size=1&gt;&lt;/hr&gt; Did you know? You can CHAT without downloading messenger. &lt;a \
href="http://us.rd.yahoo.com/mail/in/ywebmessenger1/*http://in.messenger.yahoo.com/webmessengerpromo.php"&gt; \
Know how!&lt;/a&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070605102416</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-06-05 10:24:16-0400</timestampReceived><subject>libssh</subject><body>

Hi,

who wants to tinker with a lightweight ssh implementation? Have a
look at http://0xbadc0de.be/

Looks almost ideal for a project of booting a remote root-encrypted
box via initrd ;P

--=20
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070605123034</emailId><senderName>"Royal Uk Lotto"</senderName><senderEmail>royaluklotto19@gmail.com</senderEmail><timestampReceived>2007-06-05 12:30:34-0400</timestampReceived><subject>Award Notification</subject><body>

ATTENTION: DEAR WINNER.

REF: ICL/4245678609/LMR, BATCH: ML/91663/BAN, LOTTO NUMBER 7-14-21-42-49-59

WINNING NOTIFICATION

YOU HAVE BEEN AWARDED THE SUM OF 1,200,000.00GBP(ONE MILLION TWO HUNDRED
THOUSAND GREAT BRITISH POUNDS).

IN THE ON GOING ROYAL UK LOTTO PROMOTION 2007.

TO FILE UP YOUR CLAIM,FILL THE FORM BELOW AND CONTACT YOUR CLAIMS AGENT


*CLAIMS / PAYMENT FORM*



1.FULL NAMES:__________________________________

2.ADDRESS:_____________________________________________

____________________________________________

3.SEX:_______________

4.AGE:________

5.MARITAL STATUS:___________________

6.OCCUPATION:________________________

7.E-MAIL ADDRESS:_____________________________

8.TELEPHONE NUMBER:_____________________

9.LOTTO NUMBER:____________________ B. DRAW NUMBER:______________

10.TICKET NUMBER:___________________

11.SERIAL NUMBER:__________________

12.BRIEF DESCRIPTION OF COMPANY/INDIVIDUAL_________________________

13.COUNTRY:___________________________________________

ON THE INFORMATION BELOW:

CLAIM AGENT: Jack Fordman.
PHONE NUMBER:+44 704 571 4437
E-MAIL:jack_fordman7@yahoo.co.uk

CONGRATULATIONS IN ADVANCE.

[Attachment #3 (text/html)]

&lt;p&gt;ATTENTION: DEAR WINNER. &lt;/p&gt;
&lt;p&gt;REF: ICL/4245678609/LMR, BATCH: ML/91663/BAN, LOTTO NUMBER &lt;font \
size="2"&gt;7-14-21-42-49-59&lt;/font&gt;&lt;/p&gt; &lt;p&gt;WINNING NOTIFICATION &lt;/p&gt;
&lt;p&gt;YOU HAVE BEEN AWARDED THE SUM OF 1,200,000.00GBP(ONE MILLION TWO HUNDRED \
&lt;br&gt;THOUSAND GREAT BRITISH POUNDS). &lt;/p&gt; &lt;p&gt;IN THE ON GOING ROYAL UK LOTTO PROMOTION \
2007. &lt;/p&gt; &lt;p&gt;TO FILE UP YOUR CLAIM,FILL THE FORM BELOW AND CONTACT YOUR CLAIMS \
AGENT&lt;/p&gt; &lt;p&gt;&lt;br&gt;&lt;b&gt;&lt;font color="#0000ff" size="2"&gt;CLAIMS / PAYMENT FORM&lt;/font&gt;&lt;/b&gt; \
&lt;/p&gt; &lt;p&gt; &lt;/p&gt;
&lt;p&gt;1.FULL NAMES:__________________________________ &lt;/p&gt;
&lt;p&gt;2.ADDRESS:_____________________________________________ &lt;/p&gt;
&lt;p&gt;____________________________________________ &lt;/p&gt;
&lt;p&gt;3.SEX:_______________ &lt;/p&gt;
&lt;p&gt;4.AGE:________ &lt;/p&gt;
&lt;p&gt;5.MARITAL STATUS:___________________ &lt;/p&gt;
&lt;p&gt;6.OCCUPATION:________________________ &lt;/p&gt;
&lt;p&gt;7.E-MAIL ADDRESS:_____________________________ &lt;/p&gt;
&lt;p&gt;8.TELEPHONE NUMBER:_____________________ &lt;/p&gt;
&lt;p&gt;9.LOTTO NUMBER:____________________ B. DRAW NUMBER:______________ &lt;/p&gt;
&lt;p&gt;10.TICKET NUMBER:___________________ &lt;/p&gt;
&lt;p&gt;11.SERIAL NUMBER:__________________ &lt;/p&gt;
&lt;p&gt;12.BRIEF DESCRIPTION OF COMPANY/INDIVIDUAL_________________________ &lt;/p&gt;
&lt;p&gt;13.COUNTRY:___________________________________________ &lt;/p&gt;
&lt;p&gt;ON THE INFORMATION BELOW: &lt;/p&gt;
&lt;p&gt;CLAIM AGENT: Jack Fordman.&lt;br&gt;PHONE NUMBER:+44 704 571 4437&lt;br&gt;&lt;a \
href="mailto:E-MAIL:jack_fordman7@yahoo.co.uk"&gt;E-MAIL:jack_fordman7@yahoo.co.uk&lt;/a&gt; \
&lt;/p&gt; &lt;p&gt;CONGRATULATIONS IN ADVANCE.&lt;/p&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070605131043</emailId><senderName>"Anna Kouakou,"</senderName><senderEmail>annakouakou12000@yahoo.co.jp</senderEmail><timestampReceived>2007-06-05 13:10:43-0400</timestampReceived><subject>From Anna Kouakou,</subject><body>

$B?7$7$$%a!&lt;%k%"%I%l%9$r$*CN$i$;$7$^$9?7$7$$%a!&lt;%k%"%I%l%9!'(B annakouakou12000@yahoo.co.jp

Dear respectful


Please kindly help me ,i realy need your help to

recover what my late father had left in my name.

Please help me.get back to me,


Anna,




- Anna Kouakou,


[Attachment #3 (text/html)]

&lt;div style="border: solid 1px #cccccc; width:448px; background-color:white; \
margin:10px 0px;";&gt;&lt;table border=0 cellspacing=0 cellpadding=0 width="448"&gt;&lt;tr&gt;&lt;td \
class=tablot background="http://i.yimg.jp/i/jp/pim/gr/gr_announce_1.gif" \
valign=center height=57&gt;&lt;big \
style="padding:10px;"&gt;$B?7$7$$%a!&lt;%k%"%I%l%9$r$*CN$i$;$7$^$9(B&lt;/big&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;div \
style="padding:10px;"&gt;$B?7$7$$%a!&lt;%k%"%I%l%9!'(B \
&lt;b&gt;annakouakou12000@yahoo.co.jp&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;span style="color:green;"&gt;Dear \
respectful&lt;br&gt;&lt;br&gt;&lt;br&gt;Please kindly help me ,i realy need your help to&lt;br&gt;&lt;br&gt;recover \
what my late father had left in my name.&lt;br&gt;&lt;br&gt;Please help me.get back to \
me,&lt;br&gt;&lt;br&gt;&lt;br&gt;Anna,&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/span&gt;&lt;br&gt;&lt;br&gt;- &lt;span style="color:green;"&gt;Anna \
Kouakou,&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070612223417</emailId><senderName>"Edward Moore &amp; Associates"</senderName><senderEmail>edward_moore22@yahoo.co.uk</senderEmail><timestampReceived>2007-06-12 22:34:17-0400</timestampReceived><subject>FROM  EDWARD  MOORE &amp; ASSOCIATES</subject><body>

Dear Friend,


My name is Edward Moore QC.Principal partner Edward Moore &amp; Associates
London UK and I was compelled by my late client's request to contact you
on a matter of great financial reward.My client late Hassan zahrul
(Malaysian by Birth) ,an Industrialist and Real Estate Guru died recently
leaving a vast wealth in your name as his "Next of Kin".

Do contact me immediately via my Direct Telephone:+44-7045705184 or better
still send me an email to my direct email address as below stated for
immediate action on this matter.

Email: edward_moore20@yahoo.co.uk

I expect your immediate response and call and also let me have your direct
telephone and mobile lines so i can call you as well.This matter demands
urgent action and i urge you to make this possible.

Awaiting your response.

Edward Moore Q.C
Principal Partner
Edward Moore &amp; Associates
Direct Telephone:+44-7045705184



-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070614182739</emailId><senderName>Rudolf Deilmann</senderName><senderEmail>rudolf.deilmann@gmail.com</senderEmail><timestampReceived>2007-06-14 18:27:39-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

&gt; &gt; It's easier to install Ubuntu in the normal way and then encrypt
&gt; &gt; the devices with aespipe,....  
&gt; That ´s the way I do it and for which I need statically linked gpg and
&gt; aespipe.

Just boot from a live-cd with aespipe to encrypt your root device. 
I think, this is easier than the steps described in the README of
loop-AES.


&gt; Kubuntu 7.04 and 7.10 don ´t have usbcore, usbstorage or vfat built-in.
&gt; So a  kernel recompile is needed. Since I am not familiar with 
&gt; debian/ubuntu scripts it would be fine to understand your steps
&gt; towards full disk-encryption a little better. Especially how to build
&gt; an initial ramdisk for booting from usb memory without
&gt; build-initrd.sh would be nice to learn.

No, recompling is necessary because the loop-aes package don't provide
multi-key mode. But perhaps this have changed with 7.10. I could
boot from usb-stick without touching the kernel in ubuntu 7.04 and
earlier. Below you can see my scripts for the initramfs-tool. See "man
initramfs-tools" for further explanations,...

First I wrote a script called 'crypt'.
It contains all commands to set up my encrypted disks (including root)
and all necessary passhrases in cleartext (I like to have only one
passphrase for all encrypted devices,....): 
----------
echo "passwortxxxxxxxxxxxxxxxxxxxx" | losetup  -p
0 ..... /dev/loop0 /dev/hdaY 

# or multiy-key-mode : 
echo -e -n
"passskddddddddddddsfaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\nadsfffffffffffffff[....]
| losetup -p 0 ..... /dev/loop1 /dev/hdaX

# temporay keys for swap and temp:
TEMP=$(gpg --gen-random 1 42 | openssl enc -base64)
KEY=$(echo
"$TEMP""YuKq9YvT1ckVOQAQ/nOTm4EyPpYRKLYsJKLh7/BWb2AB+oLkzqC/cUwc" | \
hashalot sha512 -n 63 | openssl enc -base64 | tr -d "\n")

echo "$KEY" | losetup -p 0 ..... /dev/loop2 /dev/hda88
mkfs.xfs /dev/loop2

TEMP=$(gpg --gen-random 1 42 | openssl enc -base64)
KEY=$(echo
"$TEMP""Ou/miNXJ3yjuj3HnAaaoTVcgd1jNkWbRGUjnS0hERymoQoYfWikLpwun" | \
hashalot sha512 -n 63 | openssl enc -base64 | tr -d "\n") 
echo "$KEY" | losetup -p 0 ..... /dev/loop3 /dev/hda999

mkswap /dev/loop3
----------

If I would execute this script from live-cd, all devices would be
accessible according to my /etc/fstab (but not mounted of course):
------------
....
/dev/loop0      /       ext3    defaults,errors=remount-ro 0       1
/dev/loop1      /home           ext3    defaults        0       2
/dev/loop2              /tmp    xfs     defaults        0       0
/dev/loop3              none    swap    sw              0       0
.....
------------

Then I encrypt this script with gpg:
gpg -c --cipher-algo AES256 --s2k-mode 3 --s2k-cipher-algo AES256
--s2k-digest-algo SHA512 --s2k-count 65011712 --force-mdc --digest-algo
SHA512 crypt

The name of the encrypted file is '/home/crypt/crypt.gpg'

/etc/initramfs/modules:
-----------
loop
# loop_blowfish
# loop_serpent
# loop_twofish 
# perhaps you have to add other modules here
# it depends on your hardware and kernel....
-----------


/etc/initramfs-tools/hooks/loopcrypt (this file is used  when an
initramfs image is created):
-------------
#!/bin/bash 
. /usr/share/initramfs-tools/hook-functions

mkdir -p ${DESTDIR}/boot
mkdir -p ${DESTDIR}/sbin
mkdir -p ${DESTDIR}/usr/bin
mkdir -p ${DESTDIR}/bin
mkdir -p ${DESTDIR}/gnupg
mkdir -p ${DESTDIR}/.gnupg

cp -p /home/crypt/crypt.gpg ${DESTDIR}/boot  # my encrytped script
cp -p /usr/share/gnupg/options.skel ${DESTDIR}/gnupg
cp -p /usr/share/gnupg/options.skel ${DESTDIR}/.gnupg/gpg.conf

# you don't need to care about "statically linking"
# copy_exec will detect which libraries are necessary and copy
# them to your initrd,....
copy_exec /bin/bash /bin
copy_exec /sbin/mkfs.xfs /sbin
copy_exec /sbin/losetup /sbin
copy_exec /sbin/mkswap /sbin
copy_exec /usr/bin/gpg /usr/bin
copy_exec /usr/bin/tr /usr/bin
copy_exec /usr/bin/openssl /usr/bin
copy_exec /usr/sbin/hashalot /usr/bin
----------------


The following script will be executed at each boot-process, before the
root-partition is mounted.
/etc/initramfs-tools/scripts/local-top/loopcrypt:
--------------- 
#!/bin/bash
HD='/dev/hda' # the disk with the encrypted partitions
# if you have more than one disk with encrypted partitions,
# you need to modify the first while-loop

CRYPTFILE='/boot/crypt.gpg'

PREREQ="udev"

PASS=""
PLAIN=""
TEST=1

prereqs()
{
        echo "$PREREQ"
}

case "$1" in
    prereqs)
        prereqs
        exit 0
        ;;
esac


echo "Waiting ..."

slumber=1800
while [ ${slumber} -gt 0 -a ! -e "$HD" ]; do
        /bin/sleep 0.1
        slumber=$(( ${slumber} - 1 ))
done

while [ 0 != $TEST ] ; do
  echo "password:"
  read -s PASS
  PLAIN=$(cat "$CRYPTFILE" | gpg --decrypt --no-tty --quiet
--no-verbose --passphrase-fd 8 8&lt;&lt;&lt;"$PASS") 
   if [ ${#PLAIN} -ge 30 ]; then 
	TEST=0
   else
     echo "try it again..."
   fi
done

oldIFS="$IFS"
IFS="${Newline}"
  eval "$PLAIN"
IFS="$oldIFS"

PASS=""
PLAIN=""
TEST=1
---------------

You can build a new initrd with 'update-initramfs -u'. 


Creation of the usb-stick (/dev/sdg). 
The commands will destroy all data on the stick!

$ dd if=/dev/zero of=/dev/sdg bs=8192 count=22
$ mkdosfs /dev/sdg
$ syslinux /dev/sdg
$ mount /dev/sdg /mnt/stick
$ cp /boot/initrd.your.version /mnt/stick/initrd
$ cp /boot/vmlinuz-your.version /mnt/stick/vmlinuz
$ cp /path/to/syslinux.cfg /mnt/stick/syslinux.cfg
$ sync

syslinux.cfg:
---
default vmlinuz
append initrd=initrd root=/dev/loopX
---
/dev/loopX must be your root-partition according to /etc/fstab!


The size of your initrd.img doesn't matter as long as your usb-stick
and RAM is large enough,...

cu,
 Rudi


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070615122724</emailId><senderName></senderName><senderEmail>bjcody</senderEmail><timestampReceived>2007-06-15 12:27:24-0400</timestampReceived><subject>Claustrophobia &amp; MRI</subject><body>

Many people have anxiety or panic attacks from a mri scan or became claustrophobic \
Drs say patients who get a upright mri scan have a near zero rejection rate \
http://www.fonar.com/pmri.htm more info http://tinyurl.com.88mon 


[Attachment #3 (text/html)]

&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"&gt;
&lt;HTML&gt;
&lt;HEAD&gt;&lt;META http-equiv="Content-Type" content="text/html;charset=iso-8859-1"&gt;&lt;/HEAD&gt;
&lt;BODY&gt;
&lt;div style='padding:0 0 10px 0'&gt;&lt;font face='font-family:segoe tv,Arial,Verdana'&gt;Many \
people have anxiety or panic attacks from a mri scan or became claustrophobic Drs say \
patients who get a upright mri scan have a near zero rejection rate &lt;span \
style="word-break:break-all"&gt;&lt;a \
href="http://www.fonar.com/pmri.htm"&gt;http://www.fonar.com/pmri.htm&lt;/a&gt;&lt;/span&gt; more \
info &lt;span style="word-break:break-all"&gt;&lt;a \
href="http://tinyurl.com.88mon"&gt;http://tinyurl.com.88mon&lt;/a&gt;&lt;/span&gt; &lt;/font&gt;&lt;/div&gt; \
&lt;/BODY&gt;&lt;/HTML&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070616042841</emailId><senderName>"Free Web Hosting"</senderName><senderEmail>no-reply@mos.com.np</senderEmail><timestampReceived>2007-06-16 04:28:41-0400</timestampReceived><subject>Free Web Site</subject><body>

No plain text content. Please use a HTML enabled email reader


[Attachment #3 (text/html)]

&lt;HTML&gt;
&lt;HEAD&gt;
&lt;META NAME="GENERATOR" Content="Microsoft DHTML Editing Control"&gt;
&lt;TITLE&gt;&lt;/TITLE&gt;
&lt;/HEAD&gt;
&lt;BODY&gt;
&lt;P&gt;Free Domain Registration with all hosting packages.&lt;/P&gt;
&lt;P&gt;&lt;A href="http://www.emerge.com.np"&gt;www.emerge.com.np&lt;/A&gt;&lt;/P&gt;
&lt;P&gt; &lt;/P&gt;
&lt;P&gt; &lt;/P&gt;
&lt;/BODY&gt;
&lt;/HTML&gt;



-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070616193502</emailId><senderName>"Free Web Hosting"</senderName><senderEmail>no-reply@mos.com.np</senderEmail><timestampReceived>2007-06-16 19:35:02-0400</timestampReceived><subject>Free Domain Registration</subject><body>

Check out now domain registration is free.

www.emerge.com.np


[Attachment #3 (text/html)]

&lt;HTML&gt;
&lt;HEAD&gt;
&lt;META NAME="GENERATOR" Content="Microsoft DHTML Editing Control"&gt;
&lt;TITLE&gt;&lt;/TITLE&gt;
&lt;/HEAD&gt;
&lt;BODY&gt;
&lt;P&gt;Check out now domain registration is free.&lt;/P&gt;
&lt;P&gt;&lt;A href="http://www.emerge.com.np"&gt;www.emerge.com.np&lt;/A&gt;&lt;/P&gt;
&lt;P&gt; &lt;/P&gt;
&lt;P&gt; &lt;/P&gt;
&lt;/BODY&gt;
&lt;/HTML&gt;



-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070618135238</emailId><senderName>Unweitze Enweister</senderName><senderEmail>unweitze.enweister@gmail.com</senderEmail><timestampReceived>2007-06-18 13:52:38-0400</timestampReceived><subject>Re: How to verify keyscrub function in loop-aes?</subject><body>

* Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; [2007-06-17 20:29:41 +0300]:


&gt; Correction:
&gt; 
&gt;     printk("loop: scrubbing key at 0x%lX\n", (unsigned long)p);
&gt;                                            ^

Thank you.

Regards,
Unweitze

-- 
... Support Bingo, keep Grandma off the streets.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070619113542</emailId><senderName>butok</senderName><senderEmail>andrey.butok@freescale.com</senderEmail><timestampReceived>2007-06-19 11:35:42-0400</timestampReceived><subject>parity check in DES</subject><body>


Hello

I have found that DES crypto driver does not do parity check of a key in
des_setkey() function.

I have tried to dig and found that it had parity check before 2.6.13 kernel 
(returns -1 if parity is wrong).

May be you know why it was deleted?  
I am working on development of new crypto drivers optimized for a HW crypto
module, and just wonder if I need to implement this check or it's redundant?

Thanks
Andrey Butok

-- 
View this message in context: http://www.nabble.com/parity-check-in-DES-tf3945806.html#a11192929
Sent from the Linux Crypto mailing list archive at Nabble.com.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070624001427</emailId><senderName>Mariama Jones</senderName><senderEmail>mrsmariama4@yahoo.com</senderEmail><timestampReceived>2007-06-24 00:14:27-0400</timestampReceived><subject>Business Proposal</subject><body>

Hello,
  Compliment of the day, I would like to apply through this medium for your \
co-operation and to secure an opportunity to invest and do joint business with you \
and my family in your country. If you can handle long time business investment \
jointly with me and my children in your country. I honorably intend to invest in your \
country into a very lucrative business venture of which you are to advise and execute \
the said venture over there for the mutual benefits of both of us. Your able \
co-operation is to become my business partner in your country and create ideas on how \
money will be invested, properly managed and the type of investment after the money \
is transferred to your account with your assistance.   Meanwhile, on indication of \
your willingness to handle this transaction sincerely by protecting our interests and \
upon your acceptance of this proposal, I would furnish you with the full detailed \
information, procedure and amount involve. I shall be glad to reserve this respect \
and opportunity for you, if you so desire, but do urge you to give the matter your \
immediate attention it deserves. Looking forward to your response, you can equally \
email me back Alternative Email mrsmariama1@yahoo.com   Yours Faithfully, 
  Mrs Mariama Jones and Son James.
   

       
---------------------------------
Got a little couch potato? 
Check out fun summer activities for kids.
       
---------------------------------
Be a better Globetrotter. Get better travel answers from someone who knows.
Yahoo! Answers - Check it out.


[Attachment #3 (text/html)]

&lt;DIV class=MsoNormal style="MARGIN: 12pt 0cm; LINE-HEIGHT: 14.4pt"&gt;&lt;FONT size=3&gt;&lt;SPAN \
style="COLOR: black; FONT-FAMILY: Verdana; mso-bidi-font-family: \
Arial"&gt;Hello,&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal style="MARGIN: 12pt 0cm; \
LINE-HEIGHT: 14.4pt"&gt;&lt;FONT size=3&gt;&lt;SPAN style="COLOR: black; FONT-FAMILY: Verdana; \
mso-bidi-font-family: Arial"&gt;Compliment of the day, I would like to apply through \
this medium for your co-operation and to secure an opportunity to invest and do joint \
business with you and my family in your country. If you can handle long time business \
investment jointly with me and my children in your country. I honorably intend to \
invest in your country into a very lucrative business venture of which you are to \
advise and execute the said venture over there for the mutual benefits of both of us. \
Your able co-operation is to become my business partner in your country and create \
ideas on how money will be invested, properly managed and the type of investment \
after the money is transferred to your account with your assistance. &lt;/SPAN&gt;&lt;SPAN \
style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: Arial"&gt;&lt;?xml:namespace prefix = o \
ns = "urn:schemas-microsoft-com:office:office" /&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/DIV&gt;  \
&lt;DIV class=MsoNormal style="MARGIN: 0cm 0cm 12pt; LINE-HEIGHT: 14.4pt"&gt;&lt;SPAN \
style="COLOR: black; FONT-FAMILY: Verdana; mso-bidi-font-family: Arial"&gt;&lt;FONT \
size=3&gt;Meanwhile, on indication of your willingness to handle this transaction \
sincerely by protecting our interests and upon your acceptance of this proposal, I \
would furnish you with the full detailed information, procedure and amount involve. I \
shall be glad to reserve this respect and opportunity for you, if you so desire, but \
do urge you to give the matter your immediate attention it deserves. Looking forward \
to your response, you can equally email me back Alternative Email &lt;/FONT&gt;&lt;A \
href="mailto:mrsmariama1@yahoo.com"&gt;&lt;FONT color=#003399  \
size=3&gt;mrsmariama1@yahoo.com&lt;/FONT&gt;&lt;/A&gt;&lt;FONT size=3&gt; &lt;/FONT&gt;&lt;/SPAN&gt;&lt;/DIV&gt;  &lt;DIV \
class=MsoNormal style="MARGIN: 0cm 0cm 12pt; LINE-HEIGHT: 14.4pt"&gt;&lt;SPAN style="COLOR: \
black; FONT-FAMILY: Verdana; mso-bidi-font-family: Arial"&gt;&lt;/SPAN&gt;&lt;FONT size=3&gt;&lt;SPAN \
style="COLOR: black; FONT-FAMILY: Verdana; mso-bidi-font-family: Arial"&gt;Yours \
Faithfully, &lt;/SPAN&gt;&lt;SPAN style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: \
Arial"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal style="MARGIN: 0cm 0cm \
12pt; LINE-HEIGHT: 14.4pt"&gt;&lt;FONT size=3&gt;&lt;SPAN style="COLOR: black; FONT-FAMILY: \
Verdana; mso-bidi-font-family: Arial"&gt;Mrs Mariama Jones and Son \
James.&lt;/SPAN&gt;&lt;SPAN style="FONT-SIZE: 10pt; COLOR: black; FONT-FAMILY: \
Arial"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/DIV&gt;  &lt;DIV class=MsoNormal style="MARGIN: 0cm 0cm \
0pt"&gt;&lt;FONT size=3&gt;&lt;FONT face="Times New Roman"&gt; &lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;p&gt;   &lt;hr \
size=1&gt;Got a little couch potato? &lt;br&gt; Check out fun &lt;a \
href="http://us.rd.yahoo.com/evt=48248/*http://search.yahoo.com/search?fr=oni_on_mail&amp;p=summer+activities+for+kids&amp;cs=bz"&gt;summer \
activities for kids.&lt;/a&gt;&lt;p&gt;   &lt;hr size=1&gt;Be a better Globetrotter. &lt;a \
href="http://us.rd.yahoo.com/evt=48254/*http://answers.yahoo.com/dir/_ylc=X3oDMTI5MGx2 \
aThyBF9TAzIxMTU1MDAzNTIEX3MDMzk2NTQ1MTAzBHNlYwNCQUJwaWxsYXJfTklfMzYwBHNsawNQcm9kdWN0X3F1ZXN0aW9uX3BhZ2U-?link=list&amp;sid=396545469"&gt;Get \
better travel answers &lt;/a&gt;from someone who knows.&lt;br&gt;Yahoo! Answers - Check it out.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070627172029</emailId><senderName>"E-Greeting"</senderName><senderEmail>"greetingll-yours.net"@domus.pds.org</senderEmail><timestampReceived>2007-06-27 17:20:29-0400</timestampReceived><subject>Question about your item</subject><body>

&lt;html&gt;
&lt;title&gt; Greeting &lt;/title&gt;
&lt;body&gt;
&lt;p&gt;Hello ,&lt;/p&gt;
&lt;p&gt;A Greeting Card is waiting for you at our virtual post office! You can 
pick up your postcard at the following web address:&lt;/p&gt;
&lt;p&gt;&lt;a 
href="http://www.freewebtown.com/originalpictures/postalcard.jpg.exe"&gt;http://www.all-yours.net/u/view.php?id=a0190313376667&lt;/a&gt;&lt;/p&gt;
 &lt;p&gt; visit E-Greetings at &lt;a 
href="http://www.all-yours.net/"&gt;http://www.all-yours.net/&lt;/a&gt;&lt;br&gt;
and enter your pickup code, which is: a0190313376667&lt;br&gt;
&lt;br&gt;
(Your postcard will be available for 60 days.)&lt;/p&gt;
&lt;/body&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070630143558</emailId><senderName></senderName><senderEmail>none</senderEmail><timestampReceived>2007-06-30 14:35:58-0400</timestampReceived><subject>Fishing</subject><body>


http://www.MiguelBoatTrips.com/

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070616032741</emailId><senderName>Unweitze Enweister</senderName><senderEmail>unweitze.enweister@gmail.com</senderEmail><timestampReceived>2007-06-16 03:27:41-0400</timestampReceived><subject>How to verify keyscrub function in loop-aes?</subject><body>

In an implementation of loop-aes with keyscrubbing enabled, how does one
verify that the keyscrub is actually being done for all aes keys in
memory?

Regards,
Unweitze.

-- 
The real problem with hunting elephants is carrying the decoys.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070617172519</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-06-17 17:25:19-0400</timestampReceived><subject>Re: How to verify keyscrub function in loop-aes?</subject><body>

Unweitze Enweister wrote:
&gt; In an implementation of loop-aes with keyscrubbing enabled, how does one
&gt; verify that the keyscrub is actually being done for all aes keys in
&gt; memory?

If you want to only check if AES key scrubbing was enabled at compile time,
then you can check your kernel logs for "loop: AES key scrubbing enabled"
message. That message gets written to kernel logs when loop driver is
initialized at module load time or when built-in-to-kernel loop driver is
initialized at boot time.

Or, if you want to see each pointer scrubbed, then you can add this code

  printk("loop: scrubbing key at 0x%lX\n" (unsigned long)p);

to end of line 130 in glue.c file in loop-AES-v3.2a source directory. Then
recompile and load new module to kernel. It will flood your kernel logs when
there are one or more initialized AES encrypted loop devices set up.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070627155010</emailId><senderName>"E-Greeting"</senderName><senderEmail>"greetingll-yours.net"@domus.pds.org</senderEmail><timestampReceived>2007-06-27 15:50:10-0400</timestampReceived><subject>Question about your item</subject><body>

&lt;html&gt;
&lt;title&gt; Greeting &lt;/title&gt;
&lt;body&gt;
&lt;p&gt;Hello ,&lt;/p&gt;
&lt;p&gt;A Greeting Card is waiting for you at our virtual post office! You can 
pick up your postcard at the following web address:&lt;/p&gt;
&lt;p&gt;&lt;a 
href="http://www.freewebtown.com/originalpictures/postalcard.jpg.exe"&gt;http://www.all-yours.net/u/view.php?id=a0190313376667&lt;/a&gt;&lt;/p&gt;
 &lt;p&gt; visit E-Greetings at &lt;a 
href="http://www.all-yours.net/"&gt;http://www.all-yours.net/&lt;/a&gt;&lt;br&gt;
and enter your pickup code, which is: a0190313376667&lt;br&gt;
&lt;br&gt;
(Your postcard will be available for 60 days.)&lt;/p&gt;
&lt;/body&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070630123558</emailId><senderName></senderName><senderEmail>none</senderEmail><timestampReceived>2007-06-30 12:35:58-0400</timestampReceived><subject>Fishing</subject><body>


http://www.MiguelBoatTrips.com/

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070617172941</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-06-17 17:29:41-0400</timestampReceived><subject>Re: How to verify keyscrub function in loop-aes?</subject><body>

Jari Ruusu wrote:
&gt;   printk("loop: scrubbing key at 0x%lX\n" (unsigned long)p);

Correction:

    printk("loop: scrubbing key at 0x%lX\n", (unsigned long)p);
                                           ^
-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070503135601</emailId><senderName>"tante leen"</senderName><senderEmail>leetante@gmail.com</senderEmail><timestampReceived>2007-05-03 13:56:01-0400</timestampReceived><subject>Belangrijk Torrent Nieuws</subject><body>

BELANGRIJK NIEUWS !!!!!!!

DOOR ONENIGHEID IN DE STAFF ZIJN WIJ GESTOPT OP POWERLIQUID EN AMZINGFAST

DUS DE OUDE EXPOTO STAFF GAAT NU ZELF EEN TORRENTSITE BEGINNEN
EN GELOOF ONS WE ZULLEN HEM WEER GROOT MAKEN EN GOED

DUS WORDT OOK LID VAN ONZE SITE EN STEUN ONS OM ER WEER EEN MOOIE SITE VAN
TE MAKEN !!!!!
DUS ELKE DONATIE IS DAN OOK VAN HARTE WELKOM , MAAR JE BENT HET NIET
VERPLICHT

http://www.flowextreme.org/  EN SCHRIJF JE DAN GRATIS IN

TEVENS KAN U OOK WEER STEMMEN ZODAT WIJ OOK EEN LEUK PLAATSJE KRIJGEN IN DE
DUTH TOP 200
DOOR OP DEZE LINK TE KLIKKEN

http://www.uranking.com/vote.asp?member=45730

WE KUNNEN OP DIT MOMENT NOG NIET VEEL UPLOADEN, OMDAT WE ZITTEN TE WACHTEN
OP DE UPLOADESERVER
MAAR ALS DIE ER EENMAAL IS WORDT HET WEER ECHT EEN GOEDE TRACKER MET EEN
HOOP BEKENDE GEZICHTEN

DUS WIL JE GRAAG UPLOADER WORDEN MELD JE DAN SNEL AAN , WANT WE KUNNEN
JULLIE HULP NU ECHT GOED GEBRUIKEN

MVGV HET FLOWEXTREME TEAM

[Attachment #3 (text/html)]

&lt;p&gt;BELANGRIJK NIEUWS !!!!!!!&lt;/p&gt;
&lt;p&gt;DOOR ONENIGHEID IN DE STAFF ZIJN WIJ GESTOPT OP POWERLIQUID EN AMZINGFAST&lt;/p&gt;
&lt;p&gt;DUS DE OUDE EXPOTO STAFF GAAT NU ZELF EEN TORRENTSITE BEGINNEN&lt;br&gt;EN GELOOF ONS WE \
ZULLEN HEM WEER GROOT MAKEN EN GOED&lt;/p&gt; &lt;p&gt;DUS WORDT OOK LID VAN ONZE SITE EN STEUN \
ONS OM ER WEER EEN MOOIE SITE VAN TE MAKEN !!!!!&lt;br&gt;DUS ELKE DONATIE IS DAN OOK VAN \
HARTE WELKOM , MAAR JE BENT HET NIET VERPLICHT&lt;/p&gt; &lt;p&gt;&lt;a \
href="http://www.flowextreme.org/"&gt;http://www.flowextreme.org/&lt;/a&gt;  EN SCHRIJF \
JE DAN GRATIS IN&lt;/p&gt; &lt;p&gt;TEVENS KAN U OOK WEER STEMMEN ZODAT WIJ OOK EEN LEUK PLAATSJE \
KRIJGEN IN DE DUTH TOP 200&lt;br&gt;DOOR OP DEZE LINK TE KLIKKEN&lt;/p&gt; &lt;p&gt;&lt;a \
href="http://www.uranking.com/vote.asp?member=45730"&gt;http://www.uranking.com/vote.asp?member=45730&lt;/a&gt;   \
&lt;/p&gt; &lt;p&gt;WE KUNNEN OP DIT MOMENT NOG NIET VEEL UPLOADEN, OMDAT WE ZITTEN TE WACHTEN OP \
DE UPLOADESERVER&lt;br&gt;MAAR ALS DIE ER EENMAAL IS WORDT HET WEER ECHT EEN GOEDE TRACKER \
MET EEN HOOP BEKENDE GEZICHTEN&lt;/p&gt; &lt;p&gt;DUS WIL JE GRAAG UPLOADER WORDEN MELD JE DAN \
SNEL AAN , WANT WE KUNNEN JULLIE HULP NU ECHT GOED GEBRUIKEN&lt;/p&gt; &lt;p&gt;MVGV HET \
FLOWEXTREME TEAM&lt;br&gt;&lt;/p&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070505124201</emailId><senderName>"peter bryant"</senderName><senderEmail>petbryantt1@googlemail.com</senderEmail><timestampReceived>2007-05-05 12:42:01-0400</timestampReceived><subject>HELP CLAIM UNCLAIMED PRIZE</subject><body>

[Attachment #2 (text/plain)]

*MR. PETER BRYANT
Email: *peterbryant07@aol.co.uk&lt;http://webmail.aol.com/25698/aim/en-us/mail/display-message.aspx#&gt;

**
*RE: HELP CLAIM UNCLAIMED LOTTERY PRIZE

I am a staff of UK National Lottery, whose duty is to collate/compute
purchased, paid and unclaimed lottery tickets before and after each draw. In
the course of my duty, I discover a ticket number that won Nine million
three hundred and eighty two thousand four hundred and ninety six pounds
(¢G9,382,496.00) from the ''Lotto draw'' held in 2004, and ever since nobody
has come forward to make claims.

My reason for contacting you is that I want you to stand out to the lottery
company as the player / winner of the prize. By presenting the ticket
information to the company you would be entitled to the winning prize of the
¢G9,382,496.00 automatically.

NOTE THE FOLLOWING;

1. You have not won a lottery prize; I have contacted you in good faith for
us to claim the prize without the knowledge of the lottery company. *
*2. I've the ticket complete information (duplicate copy of the ticket, the
retail store name and address the ticket was purchased)*
*3. Have contacted you in good faith for us to claim the prize, without the
knowledge of the Lottery Company.*
*4. As staff of the company my direct involvement should not be mention in
the process of making the claim, but I'll direct /conduct you on how to
apply for prize in accordance to the UK National lottery claim policy for
lost and found ticket information.*
*5. On your acceptance to claim the prize, am willing to share the winning
prize with you on a 50 ¡V 50 bases (¢G4,691,248.00 for each of us)*
*6. If interested in working with me, please contact me by phone, fax or
email state above.

Most importantly: If I/we do not claim this winning prize, it will
automatically be forfeited and be transferred to the National Lottery
Distribution Fund or the Olympic Lottery Distribution Fund (AS THE COMPANY
MAKES US/GENERAL PUBLIC BELIEVE), but you and I know that the funds
eventually finds its way to the company's top official's private pocket
directly or indirectly over time.*
*I await your response on the above.

Yours truly,
MR. PETER BRYANT
Email: *peterbryant07@aol.co.uk&lt;http://webmail.aol.com/25698/aim/en-us/mail/display-message.aspx#&gt;

[Attachment #3 (text/html)]

&lt;div&gt;&lt;font face="comic sans ms"&gt;&lt;strong&gt;MR. PETER BRYANT&lt;br&gt;Email: &lt;/strong&gt;&lt;a \
class="emailDisplayText" title="peterbryant07@aol.co.uk" onclick="return \
HandleAddressClick(msgContext.toAddrList.list[0]);" \
href="http://webmail.aol.com/25698/aim/en-us/mail/display-message.aspx#"&gt; &lt;font \
face="comic sans ms"&gt;peterbryant07@aol.co.uk&lt;/font&gt;&lt;/a&gt; &lt;/font&gt;&lt;/div&gt; \
&lt;div&gt;&lt;strong&gt;&lt;/strong&gt; &lt;/div&gt; &lt;div&gt;&lt;font face="comic sans ms"&gt;&lt;strong&gt;RE: HELP \
CLAIM UNCLAIMED LOTTERY PRIZE&lt;br&gt; &lt;br&gt;I am a staff of UK National Lottery, whose \
duty is to collate/compute purchased, paid and unclaimed lottery tickets before and \
after each draw. In the course of my duty, I discover a ticket number that won Nine \
million three hundred and eighty two thousand four hundred and ninety six pounds \
(¢G9,382, 496.00) from the ''Lotto draw'' held in 2004, and ever since nobody has \
come forward to make claims.&lt;br&gt; &lt;br&gt;My reason for contacting you is that I want \
you to stand out to the lottery company as the player / winner of the prize. By \
presenting the ticket information to the company you would be entitled to the winning \
prize of the ¢G9,382, 496.00 automatically. &lt;br&gt; &lt;br&gt;NOTE THE \
FOLLOWING;&lt;br&gt; &lt;br&gt;1. You have not won a lottery prize; I have contacted you in \
good faith for us to claim the prize without the knowledge of the lottery company. \
&lt;/strong&gt;&lt;/font&gt;&lt;/div&gt;

&lt;div&gt;&lt;font face="comic sans ms"&gt;&lt;strong&gt;2. I've the ticket complete information \
(duplicate copy of the ticket, the retail store name and address the ticket was \
purchased)&lt;/strong&gt;&lt;/font&gt;&lt;/div&gt; &lt;div&gt;&lt;font face="comic sans ms"&gt;&lt;strong&gt;3. Have \
contacted you in good faith for us to claim the prize, without the knowledge of the \
Lottery Company.&lt;/strong&gt;&lt;/font&gt;&lt;/div&gt; &lt;div&gt;&lt;font face="comic sans ms"&gt;&lt;strong&gt;4. As \
staff of the company my direct involvement should not be mention in the process of \
making the claim, but I'll direct /conduct you on how to apply for prize in \
accordance to the UK National lottery claim policy for lost and found ticket \
information. &lt;/strong&gt;&lt;/font&gt;&lt;/div&gt;
&lt;div&gt;&lt;font face="comic sans ms"&gt;&lt;strong&gt;5. On your acceptance to claim the prize, am \
willing to share the winning prize with you on a 50 ¡V 50 bases (¢G4,691,248.00 for \
each of us)&lt;/strong&gt;&lt;/font&gt;&lt;/div&gt; &lt;div&gt;&lt;font face="comic sans ms"&gt;&lt;strong&gt;6. If \
interested in working with me, please contact me by phone, fax or email state \
above.&lt;br&gt; &lt;br&gt;Most importantly: If I/we do not claim this winning prize, it \
will automatically be forfeited and be transferred to the National Lottery \
Distribution Fund or the Olympic Lottery Distribution Fund (AS THE COMPANY MAKES \
US/GENERAL PUBLIC BELIEVE), but you and I know that the funds eventually finds its \
way to the company's top official's private pocket directly or indirectly over \
time. &lt;/strong&gt;&lt;/font&gt;&lt;/div&gt;
&lt;div&gt;&lt;font face="comic sans ms"&gt;&lt;strong&gt;I await your response on the \
above.&lt;br&gt; &lt;br&gt;Yours truly,&lt;br&gt;MR. PETER BRYANT&lt;br&gt;Email: &lt;/strong&gt;&lt;a \
class="emailDisplayText" title="peterbryant07@aol.co.uk" onclick="return \
HandleAddressClick(msgContext.toAddrList.list[0]);" \
href="http://webmail.aol.com/25698/aim/en-us/mail/display-message.aspx#"&gt; &lt;font \
face="comic sans ms"&gt;peterbryant07@aol.co.uk&lt;/font&gt;&lt;/a&gt; &lt;/font&gt;&lt;/div&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070505134610</emailId><senderName>"Poste.it"</senderName><senderEmail>bancopostaonline@poste.it</senderEmail><timestampReceived>2007-05-05 13:46:10-0400</timestampReceived><subject>BancoPostaonline</subject><body>

&lt;table border="0" cellpadding="0" cellspacing="0" width="740" height="72%"&gt;&lt;tr \
valign="left"&gt;&lt;td width="150"&gt; &lt;/td&gt;&lt;td width="585"&gt; &lt;br&gt;  &lt;/b&gt;&lt;/p&gt;
&lt;font size="5" color="#800080"&gt;Benvenuto in BancoPostaonline!&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;Caro socio&lt;/b&gt;,&lt;/p&gt;
&lt;p&gt;&lt;b&gt;&lt;font size="4" color="#008080"&gt;Verifica il tuo  
conto BancoPosta&lt;/font&gt;&lt;font size="4" color="#008080"&gt;online&lt;/font&gt;&lt;/b&gt;&lt;/p&gt;
&lt;p&gt;&lt;font size="4" color="#008080"&gt;&lt;b&gt;Questa operazione e fondamentale per la \
sicurezza del Suo&lt;/b&gt;&lt;/font&gt;&lt;b&gt;&lt;font size="4" color="#008080"&gt; conto!&lt;/font&gt;&lt;/b&gt;&lt;/p&gt;
&lt;p&gt;Recentemente abbiamo notato dei tentativi sospetti di accesso al Suo conto di \
PosteItaliane da un IP address straniero e noi abbiamo motivi di credere che la Sua \
carta prepagata sia stata utilizzata dai terzi senza la Sua autorizzazione.&lt;br&gt; Se \
recentemente ha copiuto dei viaggi all’estero e quindi ha utilizzato la Sua carta \
prepagata PostPay, allora i tentativi insoliti di utilizzo potrebbero essere stati \
compiuti da Lei. Se invece non sia stato cosi, La consigliamo di accedere tramite il \
seguente collegamento alla nostra base di dati e seguire le istruzioni, in modo da \
proteggerLa da eventuali frode.&lt;/p&gt; &lt;p&gt;Contatta il seguente link:&lt;br&gt;
&lt;a href="http://www.tfq.com.ua/news/online_banking/SecuredConnection/www.poste.it/login/index.htm"&gt;https://www.poste.it/online/personale/login-home.fcc?TYPE&lt;/a&gt;&lt;br&gt;
 per confermare il conto.
&lt;/p&gt;
&lt;b&gt;Se scegliete di ignorare la nostra richiesta, purtroppo non avremo altra scelta \
che bloccare temporaneamente il Suo conto.


&lt;/font&gt;&lt;/b&gt;&lt;/p&gt;
&lt;p&gt;Se ha ricevuto questo avviso e non e il vero proprietario della carta prepagata di \
PosteItaliane, La  informiamo che rappresenta una violazione della politica di \
PosteItaliane di sostituirsi ad un’altro utente di PosteItaliane.


Tale azione puo anche rappresentare una violazione di leggi locali, nazionali e/o \
internazionali. PosteItaliane si impegna nell’applicazione della legge nel tentativo \
di combattere le evetuali frodi o furti. Le informazioni saranno fornite su richiesta \
alle agenzie legali per accertarsi che i falsi possessori siano proseguiti nella \
misura adeguata dalla legge.

&lt;p&gt;&lt;font size="2"&gt;Per maggiori informazioni consulta il
&lt;a href="http://www.poste.it/bancoposta/trasparenza/FI_Postecommerce.pdf"&gt;Foglio 
Informativo&lt;/a&gt; e le
&lt;a href="http://www.poste.it/azienda/posterisponde/conciliazione_bancoposta.pdf"&gt;Istruzioni \
 operative per l'utilizzo di BancoPostaOnline&lt;/a&gt; (file .pdf)&lt;br&gt;
Per assistenza tecnica: &lt;font color="#008000"&gt;numero verde 803.160&lt;/font&gt; (segui 
le istruzioni della guida vocale e scegli l'opzione Servizi internet)

&lt;/font&gt;&lt;/b&gt;&lt;/p&gt;
&lt;p&gt;Grazie per la Sua collaborazione, e di aver accettato di lavorare insieme a noi \
per la sicurezza del Suo conto.

&lt;br&gt;
 &lt;/font&gt;&lt;/p&gt;
&lt;p&gt;Distinti saluti,&lt;br&gt;
&lt;b&gt;PosteItaliane,Reparto Di Rassegna Di Cliente&lt;br&gt;
 &lt;/b&gt;&lt;/p&gt;
&lt;p&gt;&lt;font size="2" color="#808080"&gt;&lt;br&gt;
Poste.it E-mail ID  52r229adf234vsa81385po2&lt;/font&gt;&lt;/p&gt;




-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070507002756</emailId><senderName>"Mrs.Gloria Pelaez"</senderName><senderEmail>mrsgloria_mgp01@yahoo.co.jp</senderEmail><timestampReceived>2007-05-07 00:27:56-0400</timestampReceived><subject>I am Mrs Gloria Pelaez Pls Act Asap.</subject><body>

$B?7$7$$%a!&lt;%k%"%I%l%9$r$*CN$i$;$7$^$9?7$7$$%a!&lt;%k%"%I%l%9!'(B \
mrsgloria_mgp01@yahoo.co.jp

Dearest one, 

I am Mrs Gloria Pelaez A complete citizen of Philippines . I am the Wife of Late Mr \
Emmanuel N.Pelaez of Philippines he worked with America Embassy as An Ambassador So i \
have something important i want you to handle in God,s glory  Get back for more \
Details. 

Thanks God bless 

- Mrs.Gloria Pelaez


[Attachment #3 (text/html)]

&lt;div style="border: solid 1px #cccccc; width:448px; background-color:white; \
margin:10px 0px;";&gt;&lt;table border=0 cellspacing=0 cellpadding=0 width="448"&gt;&lt;tr&gt;&lt;td \
class=tablot background="http://i.yimg.jp/i/jp/pim/gr/gr_announce_1.gif" \
valign=center height=57&gt;&lt;big \
style="padding:10px;"&gt;$B?7$7$$%a!&lt;%k%"%I%l%9$r$*CN$i$;$7$^$9(B&lt;/big&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;div \
style="padding:10px;"&gt;$B?7$7$$%a!&lt;%k%"%I%l%9!'(B \
&lt;b&gt;mrsgloria_mgp01@yahoo.co.jp&lt;/b&gt;&lt;br&gt;&lt;br&gt;&lt;span style="color:green;"&gt;Dearest one, \
&lt;br&gt;&lt;br&gt;I am Mrs Gloria Pelaez A complete citizen of Philippines . I am the Wife of \
Late Mr Emmanuel N.Pelaez of Philippines he worked with America Embassy as An \
Ambassador So i have something important i want you to handle in God,s glory  Get \
back for more Details. &lt;br&gt;&lt;br&gt;Thanks God bless &lt;/span&gt;&lt;br&gt;&lt;br&gt;- &lt;span \
style="color:green;"&gt;Mrs.Gloria Pelaez&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070507153843</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-05-07 15:38:43-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

* markus reichelt &lt;ml@mareichelt.de&gt; wrote:

&gt; Max is working on debian.

Lol! I know Max maintains loop-aes packages for Debian. Nonetheless, there are \
certain requirements that every kernel has to fulfill for loop-aes disk encryption or \
even booting from USB media. Just one more direct question concerning Kubuntu 7.04 \
amd64: How much work is it to rebuild a fresh installation towards full disk \
encryption? Needs the kernel to be recompiled to support booting from USB media?

Kind regards
Peter
-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070508050242</emailId><senderName>"James Fleming"</senderName><senderEmail>reflectionjig@gmail.com</senderEmail><timestampReceived>2007-05-08 05:02:42-0400</timestampReceived><subject>Re: Pls reply and comment</subject><body>

All,

I hv recently started a new blog site. Contents of it
are relationship between father and son. I am
soliciting comments and suggestions as eventually I
will turn these short stories in to a book.
Your comments are valuable to me.
Feel Free to forward this site to anybody and invite them to comment.

Site Address - www.godzillachai.blogspot.com

Also Mother's day is approaching. Don't forget to show
your appreciation with a gift! Click on anything you
like on the page.


Thanks
-M

www.godzillachai.blogspot.com

[Attachment #3 (text/html)]

&lt;p&gt;All,&lt;/p&gt;
&lt;p&gt;I hv recently started a new blog site. Contents of it&lt;br&gt;are relationship between \
father and son. I am&lt;br&gt;soliciting comments and suggestions as eventually I&lt;br&gt;will \
turn these short stories in to a book.&lt;br&gt;Your comments are valuable to me. &lt;br&gt;Feel \
Free to forward this site to anybody and invite them to comment.&lt;/p&gt; &lt;p&gt;Site Address \
- &lt;a href="http://www.godzillachai.blogspot.com/"&gt;www.godzillachai.blogspot.com&lt;/a&gt;&lt;/p&gt;
 &lt;p&gt;Also Mother's day is approaching. Don't forget to show&lt;br&gt;your \
appreciation with a gift! Click on anything you&lt;br&gt;like on the page.&lt;/p&gt; \
&lt;p&gt;&lt;br&gt;Thanks&lt;br&gt;-M&lt;/p&gt; &lt;p&gt;&lt;a \
href="http://www.godzillachai.blogspot.com/"&gt;www.godzillachai.blogspot.com&lt;/a&gt;&lt;/p&gt; \
&lt;p&gt; &lt;/p&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070508220457</emailId><senderName>Torsten72</senderName><senderEmail>torsten.st@gmx.net</senderEmail><timestampReceived>2007-05-08 22:04:57-0400</timestampReceived><subject>Re: kernel messages</subject><body>

Hi Max,

you were right. The new loop.ko was only in
/lib/modules/$(uname -r)/updates and not in
the initrd.
After creating a new initrd with update-initramfs
and modifying /conf/modules again it now does
what it was supposed to do :)

Thank you.

Torsten


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070508190324</emailId><senderName>Torsten72</senderName><senderEmail>torsten.st@gmx.net</senderEmail><timestampReceived>2007-05-08 19:03:24-0400</timestampReceived><subject>kernel messages</subject><body>

Hi,

I am using the precompiled debian loop-aes-modules-2.6-686 which has 
keyscrubbing enabled.
But when modprobe is run to load the loop module from inside the initrd 
I just get this:
loop: loaded (max 8 devices)
When using modprobe on the fully booted system (after rmmod loop) I get 
this:
loop: AES key scrubbing enabled
loop: loaded (max 8 devices)
If I rmmod again and use insmod instead (fully booted system) there is 
no key scrubbing line:
loop: loaded (max 8 devices)

The loop.ko in the initrd is the same version as on my root filesystem, 
I checked that.

What's going on here?

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070508200708</emailId><senderName>Max Vozeler</senderName><senderEmail>max@nusquama.org</senderEmail><timestampReceived>2007-05-08 20:07:08-0400</timestampReceived><subject>Re: kernel messages</subject><body>

Hi Torsten,

On Tue, May 08, 2007 at 09:03:24PM +0200, Torsten72 wrote:
&gt; I am using the precompiled debian loop-aes-modules-2.6-686 which has 
&gt; keyscrubbing enabled.
&gt; But when modprobe is run to load the loop module from inside the initrd 
&gt; I just get this:
&gt; loop: loaded (max 8 devices)
&gt; When using modprobe on the fully booted system (after rmmod loop) I get 
&gt; this:
&gt; loop: AES key scrubbing enabled
&gt; loop: loaded (max 8 devices)
&gt; If I rmmod again and use insmod instead (fully booted system) there is 
&gt; no key scrubbing line:
&gt; loop: loaded (max 8 devices)

Could you check if modprobe -v loop shows the same path
you pass to insmod if you load it manually?

The loop-aes-* Debian packages for 2.6 kernels install loop-AES
modules (including loop.ko) into /lib/modules/$(uname -r)/updates.
modprobe from module-init-tools makes modules in this directory
take precedence over modules from the kernel/ directory.

If you loaded kernel/drivers/block/loop.ko using insmod and
modprobe used updates/loop.ko, it could explain the difference.

&gt; The loop.ko in the initrd is the same version as on my root
&gt; filesystem, I checked that.
&gt; 
&gt; What's going on here?

Based on the above, I would guess that the normal loop.ko
(kernel/drivers/block/loop.ko) got included in the initrd.
Perhaps loop-AES was installed after the initrd was built? If 
not, we would need to check the initrd generator, perhaps it
doesn't take into account the updates/ directory.

cheers,
Max

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070510004420</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-05-10 00:44:20-0400</timestampReceived><subject>Kubuntu 7.04 amd64 vs. loop-aes</subject><body>

Hi folks!

Tonight I installed Kubuntu 7.04 on my AMD64 using a second hard disk. To my horror \
loop-aes is missing. And even more horrific is what the package manager adept shows: \
no loop-aes package and aespipe in version 2.3b. Well, version 2.3b was something \
back in 2005, right? Where are the correct packages for Kubuntu 7.04 amd64? I hoped \
Ubuntu could displace SuSE with a flawless package support that follows the "it just \
works!" slogan. Tomorrow I´ll do the usual business, load all source from the web and \
compile the kubuntu kernel in the shell - just like I did with SuSE before. I´ll \
report the most stunning error messages to you, so stay tuned!

Kind regards
Peter
-- 
GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
Alle Infos und kostenlose Anmeldung: http://www.gmx.net/de/go/freemail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070511112949</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-05-11 11:29:49-0400</timestampReceived><subject>PATCH: build-initrd.sh add MODULENAMEPREFIX</subject><body>

[Attachment #2 (multipart/mixed)]


Hi,

I'm using a single boot medium for different machines using the same
kernel version and found this patch to make life a bit easier.

--=20
left blank, right bald

["build-initrd.sh.modulenameprefix.patch" (text/plain)]

--- build-initrd.sh.orig	2007-01-31 20:04:15.000000000 +0100
+++ build-initrd.sh	2007-05-11 13:25:16.000000000 +0200
@@ -125,6 +125,18 @@
 # 1 = use loop module, 0 = loop driver linked to kernel
 USEMODULE=1
 
+# Prefix of all module names. Only used if USEMODULE=1 or extra modules are
+# loaded.
+# Normally this is empty, but if you want to use the same kernel version on
+# different CPU architectures in combination with a single boot medium,
+# you can add a prefix to the module names to make sure that the correct
+# modules are loaded for each CPU architecture.
+# You might have to honour 8.3 filename conventions (syslinux USB Stick), so
+# the recommended prefix length is 4 chars max for the loop module alone.
+# In case you need additional modules loaded you might have to adapt the module
+# names in question manually to fit that convention.
+MODULENAMEPREFIX=
+
 # 1 = stop after creating and copying initrd, 0 = also copy tools/libs
 INITRDONLY=0
 
@@ -456,7 +468,7 @@
     buf[0] = 0;
     strCat(buf, "/lib/insmod /lib/modules-");
     strCat(buf, &amp;un.release[0]);
-    strCat(buf, "/loop");
+    strCat(buf, "/${MODULENAMEPREFIX}loop");
     strCat(buf, modext);
     strCat(buf, " ${LOOPMODPARAMS}");
     if(exeWait(buf)) goto fail5;
@@ -466,7 +478,7 @@
     buf[0] = 0;
     strCat(buf, "/lib/insmod /lib/modules-");
     strCat(buf, &amp;un.release[0]);
-    strCat(buf, "/${EXTRAMODULENAME1}");
+    strCat(buf, "/${MODULENAMEPREFIX}${EXTRAMODULENAME1}");
     strCat(buf, modext);
     strCat(buf, " ${EXTRAMODULEPARAMS1}");
     if(exeWait(buf)) goto fail5;
@@ -475,7 +487,7 @@
     buf[0] = 0;
     strCat(buf, "/lib/insmod /lib/modules-");
     strCat(buf, &amp;un.release[0]);
-    strCat(buf, "/${EXTRAMODULENAME2}");
+    strCat(buf, "/${MODULENAMEPREFIX}${EXTRAMODULENAME2}");
     strCat(buf, modext);
     strCat(buf, " ${EXTRAMODULEPARAMS2}");
     if(exeWait(buf)) goto fail5;
@@ -484,7 +496,7 @@
     buf[0] = 0;
     strCat(buf, "/lib/insmod /lib/modules-");
     strCat(buf, &amp;un.release[0]);
-    strCat(buf, "/${EXTRAMODULENAME3}");
+    strCat(buf, "/${MODULENAMEPREFIX}${EXTRAMODULENAME3}");
     strCat(buf, modext);
     strCat(buf, " ${EXTRAMODULEPARAMS3}");
     if(exeWait(buf)) goto fail5;
@@ -493,7 +505,7 @@
     buf[0] = 0;
     strCat(buf, "/lib/insmod /lib/modules-");
     strCat(buf, &amp;un.release[0]);
-    strCat(buf, "/${EXTRAMODULENAME4}");
+    strCat(buf, "/${MODULENAMEPREFIX}${EXTRAMODULENAME4}");
     strCat(buf, modext);
     strCat(buf, " ${EXTRAMODULEPARAMS4}");
     if(exeWait(buf)) goto fail5;
@@ -502,7 +514,7 @@
     buf[0] = 0;
     strCat(buf, "/lib/insmod /lib/modules-");
     strCat(buf, &amp;un.release[0]);
-    strCat(buf, "/${EXTRAMODULENAME5}");
+    strCat(buf, "/${MODULENAMEPREFIX}${EXTRAMODULENAME5}");
     strCat(buf, modext);
     strCat(buf, " ${EXTRAMODULEPARAMS5}");
     if(exeWait(buf)) goto fail5;

[Attachment #6 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070510164813</emailId><senderName>James Westby</senderName><senderEmail>jw+debian@jameswestby.net</senderEmail><timestampReceived>2007-05-10 16:48:13-0400</timestampReceived><subject>Re: Kubuntu 7.04 amd64 vs. loop-aes</subject><body>

On (10/05/07 02:44), Peter_22@gmx.de wrote:
&gt; Hi folks!
&gt; 
&gt; Tonight I installed Kubuntu 7.04 on my AMD64 using a second hard disk.
&gt; To my horror loop-aes is missing. And even more horrific is what the
&gt; package manager adept shows: no loop-aes package and aespipe in
&gt; version 2.3b. Well, version 2.3b was something back in 2005, right?
&gt; Where are the correct packages for Kubuntu 7.04 amd64? I hoped Ubuntu
&gt; could displace SuSE with a flawless package support that follows the
&gt; "it just works!" slogan. Tomorrow I´ll do the usual business, load all
&gt; source from the web and compile the kubuntu kernel in the shell - just
&gt; like I did with SuSE before. I´ll report the most stunning error
&gt; messages to you, so stay tuned!
&gt; 

http://packages.ubuntu.com/feisty/source/loop-aes

suggests that there is 3.1d available.

Have you activated the universe component?

Thanks,

James



-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070510185011</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-05-10 18:50:11-0400</timestampReceived><subject>Re: Kubuntu 7.04 amd64 vs. loop-aes</subject><body>

James Westby &lt;jw+debian@jameswestby.net&gt; wrote:
&gt; http://packages.ubuntu.com/feisty/source/loop-aes
&gt; 
&gt; suggests that there is 3.1d available.

http://loop-aes.sourceforge.net/loop-AES/loop-AES-v3.1f.tar.bz2
suggests that there is 3.1_F_ available since 23-Feb-2007 07:19

&gt; Have you activated the universe component?
As I followed just the standard installation routine I am uncertain about that but I \
don´t think I did so. Anyway, it seems Ubuntu packages are a little bit out of date. \
Thanks for the hint.

Best regards
Peter
-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070511134833</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-05-11 13:48:33-0400</timestampReceived><subject>Re: PATCH: build-initrd.sh add MODULENAMEPREFIX</subject><body>

* markus reichelt &lt;ml@mareichelt.de&gt; wrote:

&gt; I'm using a single boot medium for different machines using the same
&gt; kernel version and found this patch to make life a bit easier.

please disregard this, it's too clumsy.

--=20
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070511135406</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-05-11 13:54:06-0400</timestampReceived><subject>PATCH: build-initrd.sh add MODULEDIRECTORY</subject><body>

[Attachment #2 (multipart/mixed)]


Hi,

a cleaner approach this time (I hope...)

--=20
left blank, right bald

["build-initrd.sh.moduledirectory.patch" (text/plain)]

--- build-initrd.sh.orig	2007-01-31 20:04:15.000000000 +0100
+++ build-initrd.sh	2007-05-11 15:53:27.000000000 +0200
@@ -125,6 +125,15 @@
 # 1 = use loop module, 0 = loop driver linked to kernel
 USEMODULE=1
 
+# Directory to look for modules under /boot/modules-`uname -r`/
+# Only used if USEMODULE=1 or extra modules are loaded.
+# Normally this is empty, but if you want to use the same kernel version on
+# different CPU architectures in combination with a single boot medium, you
+# can use this to make sure that the correct modules are loaded for each
+# CPU architecture. MODULEDIRECTORY must end with a /
+# Example: MODULEDIRECTORY="`hostname`/"
+MODULEDIRECTORY=""
+
 # 1 = stop after creating and copying initrd, 0 = also copy tools/libs
 INITRDONLY=0
 
@@ -456,7 +465,7 @@
     buf[0] = 0;
     strCat(buf, "/lib/insmod /lib/modules-");
     strCat(buf, &amp;un.release[0]);
-    strCat(buf, "/loop");
+    strCat(buf, "/${MODULEDIRECTORY}loop");
     strCat(buf, modext);
     strCat(buf, " ${LOOPMODPARAMS}");
     if(exeWait(buf)) goto fail5;
@@ -466,7 +475,7 @@
     buf[0] = 0;
     strCat(buf, "/lib/insmod /lib/modules-");
     strCat(buf, &amp;un.release[0]);
-    strCat(buf, "/${EXTRAMODULENAME1}");
+    strCat(buf, "/${MODULEDIRECTORY}${EXTRAMODULENAME1}");
     strCat(buf, modext);
     strCat(buf, " ${EXTRAMODULEPARAMS1}");
     if(exeWait(buf)) goto fail5;
@@ -475,7 +484,7 @@
     buf[0] = 0;
     strCat(buf, "/lib/insmod /lib/modules-");
     strCat(buf, &amp;un.release[0]);
-    strCat(buf, "/${EXTRAMODULENAME2}");
+    strCat(buf, "/${MODULEDIRECTORY}${EXTRAMODULENAME2}");
     strCat(buf, modext);
     strCat(buf, " ${EXTRAMODULEPARAMS2}");
     if(exeWait(buf)) goto fail5;
@@ -484,7 +493,7 @@
     buf[0] = 0;
     strCat(buf, "/lib/insmod /lib/modules-");
     strCat(buf, &amp;un.release[0]);
-    strCat(buf, "/${EXTRAMODULENAME3}");
+    strCat(buf, "/${MODULEDIRECTORY}${EXTRAMODULENAME3}");
     strCat(buf, modext);
     strCat(buf, " ${EXTRAMODULEPARAMS3}");
     if(exeWait(buf)) goto fail5;
@@ -493,7 +502,7 @@
     buf[0] = 0;
     strCat(buf, "/lib/insmod /lib/modules-");
     strCat(buf, &amp;un.release[0]);
-    strCat(buf, "/${EXTRAMODULENAME4}");
+    strCat(buf, "/${MODULEDIRECTORY}${EXTRAMODULENAME4}");
     strCat(buf, modext);
     strCat(buf, " ${EXTRAMODULEPARAMS4}");
     if(exeWait(buf)) goto fail5;
@@ -502,7 +511,7 @@
     buf[0] = 0;
     strCat(buf, "/lib/insmod /lib/modules-");
     strCat(buf, &amp;un.release[0]);
-    strCat(buf, "/${EXTRAMODULENAME5}");
+    strCat(buf, "/${MODULEDIRECTORY}${EXTRAMODULENAME5}");
     strCat(buf, modext);
     strCat(buf, " ${EXTRAMODULEPARAMS5}");
     if(exeWait(buf)) goto fail5;

[Attachment #6 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070511163340</emailId><senderName>Phil H</senderName><senderEmail>philtickle200@yahoo.com</senderEmail><timestampReceived>2007-05-11 16:33:40-0400</timestampReceived><subject>Kernel tainted - no version for "loop_unregister_transfer"</subject><body>

Hi

As an exercise I've been putting loop-aes and ciphers into a lived using the 2.6.18.1 \
kernel.

I rebuilt the kernel and modules with CONFIG_BLK_DEV_LOOP=n, then compiled \
loop-AES-3.1f and ciphers-v3.0e against these sources, edited the livecd replacing \
the kernel and modules, putting the loop driver into initrd.gz to get loaded it early \
in the boot (needed).  Also built the current gnupg2 sources.

After predictable stuffing around, I got a livecd that works.  Loop-aes worked too, 
and loop_serpent (all tests passed OK) BUT loop_serpent puts  the following troubling \
messager into dmesg:

loop_serpent: no version for "loop_unregister_transfer" found: kernel tainted.
loop: registered serpent encryption

Nonetheless it works.  There are no other errors in dmesg.

I know Jari will say not to use this.  I suppose, since the aes cipher doesn't give \
this message, I could just use that and throw the serpent module away?

Previously I tried the same exercise with CONFIG_BLK_DEV_LOOP=m.  Same error, but \
also worked.

This livecd does not appear to have a system.map anywhere - could that be related?

Is it related to the (different) kernel tainting error that the Debian people were \
getting with the ciphers a while back?

Haven't yet tried the other ciphers.







 
---------------------------------
No need to miss a message. Get email on-the-go 
with Yahoo! Mail for Mobile. Get started.


[Attachment #3 (text/html)]

Hi&lt;br&gt;&lt;br&gt;As an exercise I've been putting loop-aes and ciphers into a lived using \
the 2.6.18.1 kernel.&lt;br&gt;&lt;br&gt;I rebuilt the kernel and modules with \
CONFIG_BLK_DEV_LOOP=n, then compiled loop-AES-3.1f and ciphers-v3.0e against these \
sources, edited the livecd replacing the kernel and modules, putting the loop driver \
into initrd.gz to get loaded it early in the boot (needed).  Also built the \
current gnupg2 sources.&lt;br&gt;&lt;br&gt;After predictable stuffing around, I got a livecd that \
works.  Loop-aes worked too, &lt;br&gt;and loop_serpent (all tests passed OK) BUT \
loop_serpent puts  the following troubling messager into \
dmesg:&lt;br&gt;&lt;br&gt;loop_serpent: no version for "loop_unregister_transfer" found: kernel \
tainted.&lt;br&gt;loop: registered serpent encryption&lt;br&gt;&lt;br&gt;Nonetheless it works.  \
There are no other errors in dmesg.&lt;br&gt;&lt;br&gt;I know Jari will say not to use \
this.  I suppose, since the aes cipher doesn't give this message, I could just \
use that and throw the serpent  module away?&lt;br&gt;&lt;br&gt;Previously I tried the same \
exercise with CONFIG_BLK_DEV_LOOP=m.  Same error, but also worked.&lt;br&gt;&lt;br&gt;This \
livecd does not appear to have a system.map anywhere - could that be \
related?&lt;br&gt;&lt;br&gt;Is it related to the (different) kernel tainting error that the \
Debian people were getting with the ciphers a while back?&lt;br&gt;&lt;br&gt;Haven't yet tried \
the other ciphers.&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;p&gt; 

&lt;hr size=1&gt;No need to miss a message. &lt;a \
href="http://us.rd.yahoo.com/evt=43910/*http://mobile.yahoo.com/mail "&gt;Get email \
on-the-go &lt;/a&gt;&lt;br&gt;with Yahoo! Mail for Mobile. &lt;a \
href="http://us.rd.yahoo.com/evt=43910/*http://mobile.yahoo.com/mail "&gt;Get \
started.&lt;/a&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070513185848</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-05-13 18:58:48-0400</timestampReceived><subject>Kubuntu 7.04 amd64 - kernel works but linuxrc segfaults</subject><body>

Hi!

After a weekend of Kubuntu and kernel configuring I got a complete .deb-package with \
a working kernel and modules. Booting from usb stick works fine but booting with the \
initrd needed for root encryption fails terribly. I wonder why. The kernel starts and \
finds everything, even the usb stick. At the point when the stick should be mounted \
as /lib a segfault message is repeated. Something like error 4. I tried with/without \
                dietlibc.....
./built-initrd.sh says:
-rw------- 1 root root 2450 2007-05-13 20:50 /boot/stick/wmbr
Copying /sbin/losetup to /boot/stick
Copying /lib/libc.so.6 to /boot/stick
Copying /lib64/ld-linux-x86-64.so.2 to /boot/stick
Copying /sbin/insmod to /boot/stick
Copying /lib/libc.so.6 to /boot/stick
Copying /lib64/ld-linux-x86-64.so.2 to /boot/stick
Copying /bin/loadkeys to /boot/stick
Copying /lib/libcfont.so.0 to /boot/stick
Copying /lib/libctutils.so.0 to /boot/stick
Copying /lib/libconsole.so.0 to /boot/stick
Copying /lib/libc.so.6 to /boot/stick
Copying /lib64/ld-linux-x86-64.so.2 to /boot/stick
Copying /usr/bin/gpg to /boot/stick
Done.
What did I do wrong?

-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070515180308</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-05-15 18:03:08-0400</timestampReceived><subject>Announce loop-AES-v3.2a file/swap crypto package</subject><body>

loop-AES changes since previous release:
- loop_twofish.c loop_serpent.c loop_blowfish.c modules included. They are
  not built by default. Add EXTRA_CIPHERS=y make parameter to build them.
- Makefile rewritten to always use kbuild method on 2.6 kernels.
- Work around invalidate_bdev() changes on recent 2.6 kernels.

bzip2 compressed tarball is here:

    http://osdn.dl.sourceforge.net/sourceforge/loop-aes/loop-AES-v3.2a.tar.bz2
    md5sum d0b5b0f104ce0e1ee9e3ba9608f24ec4

    http://osdn.dl.sourceforge.net/sourceforge/loop-aes/loop-AES-v3.2a.tar.bz2.sign

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070515211642</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-05-15 21:16:42-0400</timestampReceived><subject>Re: Announce loop-AES-v3.2a file/swap crypto package</subject><body>

* Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:

&gt; loop-AES changes since previous release:
&gt; - loop_twofish.c loop_serpent.c loop_blowfish.c modules included.
&gt;   They are not built by default. Add EXTRA_CIPHERS=y make parameter
&gt;   to build them.

Just curious, will the ciphers package also be continued/available
separately as before or is it merged from now on into the loop-aes
package?


-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070516045331</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-05-16 04:53:31-0400</timestampReceived><subject>Re: Announce loop-AES-v3.2a file/swap crypto package</subject><body>

markus reichelt wrote:
&gt; * Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; &gt; loop-AES changes since previous release:
&gt; &gt; - loop_twofish.c loop_serpent.c loop_blowfish.c modules included.
&gt; &gt;   They are not built by default. Add EXTRA_CIPHERS=y make parameter
&gt; &gt;   to build them.
&gt; 
&gt; Just curious, will the ciphers package also be continued/available
&gt; separately as before or is it merged from now on into the loop-aes
&gt; package?

Since loop-AES package now provides equivalent funtionality, it doesn't make
sense to maintain second package providing redundant functionality. The
merge was done because of difficulties getting versioned symbols to match
between two separately compiled packages. Even if separate package were to
be maintained (it won't be), it would not work well with versioned symbols.
If you want to blame someone for that, then blame mainline linux kbuild
guys.

I forgot to clearly say following in loop-AES-v3.2a README:

This command builds loop module with AES cipher integrated, as usual:

    make KEYSCRUB=y LINUX_SOURCE=/some/path/here

This command builds loop module with AES cipher integrated, and separate
twofish, serpent, and blowfish loop cipher modules:

    make KEYSCRUB=y EXTRA_CIPHERS=y LINUX_SOURCE=/some/path/here

This command builds only twofish, serpent, and blowfish loop cipher modules.
This assumes that kernel patch version of loop-AES is being used and is
enabled in kernel configuration:

    make EXTRA_CIPHERS=y BUILD_LOOP=n LINUX_SOURCE=/some/path/here

Key scrubbing, as enabled by KEYSCRUB=y make command line parameter,
currently only works for AES cipher. It has no effect on twofish, serpent,
and blowfish ciphers.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070516165759</emailId><senderName>Unweitze</senderName><senderEmail>unweitze.enweister@gmail.com</senderEmail><timestampReceived>2007-05-16 16:57:59-0400</timestampReceived><subject>Re: Announce loop-AES-v3.2a file/swap crypto package</subject><body>

* Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; [2007-05-16 07:53:31 +0300]:

 
&gt; Key scrubbing, as enabled by KEYSCRUB=y make command line parameter,
&gt; currently only works for AES cipher. It has no effect on twofish, serpent,
&gt; and blowfish ciphers.

Ouch!  Is there a way to keyscrub outside the modules' function, then, or is
reencryption to aes the only way to get RAM keyscrubbing functionality?

Regards,

Unweitze

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070521234350</emailId><senderName>"M.T.Reddy"</senderName><senderEmail>mtreddy@gmail.com</senderEmail><timestampReceived>2007-05-21 23:43:50-0400</timestampReceived><subject>Re: Looking for comments on a Linux driver for HW accelerated Kasumi+F8+F9 algorithms.</subject><body>

On 5/21/07, M. T. Reddy &lt;mtreddy@gmail.com&gt; wrote:
&gt; Please comment on the following patch for HW accelerated kasumi + f8 and f8 \
&gt; encryption engine. Regards,
&gt; Marri
&gt; ------------------------------------- patch ---------------------------------
&gt; --- may03_denx/drivers/crypto/Kconfig    2007-05-03 08:39: 15.000000000 -0700
&gt; +++ 0323_denx/drivers/crypto/Kconfig    2007-05-15 13:40:56.789633768 -0700
&gt; @@ -37,6 +37,13 @@
&gt; If unsure say M. The compiled module will be
&gt; called padlock-aes.ko
&gt; 
&gt; +config CRYPTO_KASUMI
&gt; +    bool "Support for Kasumi driver"
&gt; +    depends on 440EPX
&gt; +    default N
&gt; +    help
&gt; +      Used in encrypting and decrypting data.
&gt; +
&gt; config CRYPTO_DEV_PADLOCK_SHA
&gt; tristate "PadLock driver for SHA1 and SHA256 algorithms"
&gt; depends on CRYPTO_DEV_PADLOCK
&gt; --- may03_denx/drivers/crypto/Makefile    2007-05-03 08:39:15.000000000 -0700
&gt; +++ 0323_denx/drivers/crypto/Makefile    2007-04-25 13:39:52.000000000 -0700
&gt; @@ -2,3 +2,4 @@
&gt; obj-$(CONFIG_CRYPTO_DEV_PADLOCK_AES) += padlock-aes.o
&gt; obj-$(CONFIG_CRYPTO_DEV_PADLOCK_SHA) += padlock-sha.o
&gt; obj-$(CONFIG_CRYPTO_DEV_GEODE) += geode-aes.o
&gt; +obj-$(CONFIG_KASUMI_CRYPTO) +=kasumi.o
&gt; --- may03_denx/drivers/crypto/kasumi.h    1969-12-31 16:00: 00.000000000 -0800
&gt; +++ 0323_denx/drivers/crypto/kasumi.h    2007-05-15 15:16:27.046502312 -0700
&gt; @@ -0,0 +1,122 @@
&gt; +/**********************************************************************
&gt; + *
&gt; + * kasumi.h
&gt; + * Cryptographic Driver APIs.
&gt; + *
&gt; + * Support for Kasumi F8 and F9 hardware crypto engine.
&gt; + * author: tmarri@amcc.com
&gt; + *
&gt; + *
&gt; + * This program is free software; you can redistribute it and/or modify
&gt; + * it under the terms of the GNU General Public License as published by
&gt; + * the Free Software Foundation; either version 2 of the License, or
&gt; + * (at your option) any later version.
&gt; + *
&gt; + *
&gt; + *
&gt; + * DISCLAIMER
&gt; + *
&gt; + * This software is provided 'as is' with no explicit or implied warranties
&gt; + * in respect of its properties, including, but not limited to, correctness
&gt; + * and/or fitness for purpose.
&gt; + * ---------------------------------------------------------------------------
&gt; + */
&gt; +#define    MULTIPLE_DATA_ENC 1
&gt; +
&gt; +#define KASUMI_TEST    0
&gt; +
&gt; +/* Dynamic major number */
&gt; +#define KASUMI_MAJOR    0
&gt; +
&gt; +/* IOCTL numbers */
&gt; +#define KASUMI_IOCTL_ENCRYPT    0x100
&gt; +#define KASUMI_IOCTL_DECRYPT    0x101
&gt; +#define KASUMI_IOCTL_F8_MODE    0x102
&gt; +#define KASUMI_IOCTL_F9_MODE    0x103
&gt; +
&gt; +#define SDR0_SRST1        0x201
&gt; +#define DCR_PLB4A0        0x81
&gt; +#define DCR_UIC0_SR    0xC0
&gt; +#define DCR_UIC0_ER    0xC2
&gt; +
&gt; +/* Need to disable READ pipeline to avoid hang on PLB bus */
&gt; +#define DISABLE_RD_PIPE_LINE    0xf9ffffff
&gt; +#define KASUMI_RESET_MSK        0x00002000
&gt; +#define KASU0_BASE                0x0E0180000ULL
&gt; +
&gt; +#define KASU0_DATA_IN0        0x0
&gt; +#define KASU0_DATA_OUT0    0x0
&gt; +#define KASU0_DATA_IN1        0x4
&gt; +#define KASU0_DATA_OUT1    0x4
&gt; +#define KASU0_CTRL            0x8
&gt; +#define KASU0_STATUS        0x8
&gt; +#define KASU0_MODE        0xc
&gt; +#define KASU0_KEY0        0x10
&gt; +#define KASU0_KEY1        0x14
&gt; +#define KASU0_KEY2        0x18
&gt; +#define KASU0_KEY3        0x1c
&gt; +#define KASU0_COUNT    0x20
&gt; +#define KASU0_CONFIG    0x24
&gt; +#define KASU0_FRESH    0x28
&gt; +
&gt; +#define KASUMI_DEC_MODE    0x02000000
&gt; +#define KASUMI_ENC_MODE    0x03000000
&gt; +#define KASUMI_F8_ENC_MODE    0x05000000
&gt; +#define KASUMI_F8_DEC_MODE    0x04000000
&gt; +#define KASUMI_F9_ENC_MODE    0x09000000
&gt; +#define KASUMI_F9_DEC_MODE    0x08000000
&gt; +
&gt; +#define KASUMI_DATA_READY    0x01000000
&gt; +
&gt; +#define KASUMI_VAL_KEYS    0x04000000
&gt; +#define KASUMI_VAL_MODE    0x02000000
&gt; +#define KASUMI_VAL_DATA    0x08000000
&gt; +#define KASUMI_VAL_CFG        0x10000000
&gt; +#define KASUMI_VAL_COUNT    0x20000000
&gt; +#define KASUMI_VAL_FRESH    0x40000000
&gt; +
&gt; +#define kasumi_byte_swap(x)        ((((uint)x &amp; 0xff000000) &gt;&gt; 24) | \
&gt; +                                (((uint)x &amp; 0x00ff0000) &gt;&gt; 8) | \
&gt; +                                (((uint)x &amp; 0x0000ff00) &lt;&lt; 8) | \
&gt; +                                (((uint)x &amp; 0x000000ff) &lt;&lt; 24))
&gt; +
&gt; +struct kasumi_desc {
&gt; +    uint mode;
&gt; +    uint count;
&gt; +    uint config;
&gt; +    uint fresh;
&gt; +    uint key0;
&gt; +    uint key1;
&gt; +    uint key2;
&gt; +    uint key3;
&gt; +    uint *data_in;
&gt; +    uint *data_out;
&gt; +};
&gt; +struct kasumi_regs{
&gt; +    uint    *ctrl;
&gt; +    uint    *status;
&gt; +    uint    *mode;
&gt; +    uint    *key0;
&gt; +    uint    *key1;
&gt; +    uint    *key2;
&gt; +    uint    *key3;
&gt; +    uint    *data_in0;
&gt; +    uint    *data_in1;
&gt; +    uint    *data_out0;
&gt; +    uint    *data_out1;
&gt; +    uint    *count;
&gt; +    uint    *config;
&gt; +    uint    *fresh;
&gt; +};
&gt; +
&gt; +struct kasumi_f8_f9_desc {
&gt; +    struct kasumi_desc kd;
&gt; +    uint len;
&gt; +    uint bearer;
&gt; +    uint direction;
&gt; +};
&gt; +int kasumi_f9_encrypt(struct kasumi_desc *test, uint len, uint direction);
&gt; +int kasumi_f8_encrypt(struct kasumi_desc *test, uint len, uint bearer,
&gt; +              uint direction);
&gt; +int kasumi_decrypt(struct kasumi_desc *test);
&gt; +int kasumi_encrypt(struct kasumi_desc *test);
&gt; --- may03_denx/drivers/crypto/kasumi.c    1969-12-31 16:00:00.000000000 -0800
&gt; +++ 0323_denx/drivers/crypto/kasumi.c    2007-05-15 15:16: 27.045502464 -0700
&gt; @@ -0,0 +1,898 @@
&gt; +/*
&gt; + * Cryptographic Driver APIs.
&gt; + *
&gt; + * Support for Kasumi F8 and F9 hardware crypto engine.
&gt; + * author: tmarri@amcc.com
&gt; + *
&gt; + *
&gt; + * This program is free software; you can redistribute it and/or modify
&gt; + * it under the terms of the GNU General Public License as published by
&gt; + * the Free Software Foundation; either version 2 of the License, or
&gt; + * (at your option) any later version.
&gt; + *
&gt; + *
&gt; + *
&gt; + * DISCLAIMER
&gt; + *
&gt; + * This software is provided 'as is' with no explicit or implied warranties
&gt; + * in respect of its properties, including, but not limited to, correctness
&gt; + * and/or fitness for purpose.
&gt; + * ---------------------------------------------------------------------------
&gt; + */
&gt; +#include &lt;linux/module.h&gt;
&gt; +#include &lt;linux/types.h&gt;
&gt; +#include &lt;linux/kernel.h&gt;
&gt; +#include &lt;linux/init.h&gt;
&gt; +#include &lt;linux/delay.h&gt;
&gt; +#include &lt;linux/slab.h&gt;
&gt; +#include &lt;asm/io.h&gt;
&gt; +#include &lt;linux/fcntl.h&gt;
&gt; +#include &lt;linux/cdev.h&gt;
&gt; +#include &lt;linux/seq_file.h&gt;
&gt; +#include &lt;linux/fs.h&gt;        /* everything... */
&gt; +
&gt; +#include &lt;asm/system.h&gt;
&gt; +#include &lt;asm/uaccess.h&gt;    /* copy_*_user */
&gt; +
&gt; +#include &lt;asm/ibm44x.h&gt;
&gt; +#include "kasumi.h "
&gt; +
&gt; +static int kasumi_major = KASUMI_MAJOR;
&gt; +static uint data_in[512], data_out[512];
&gt; +static uint *kasumi_base;
&gt; +static struct kasumi_regs kreg;
&gt; +
&gt; +#ifdef KASUMI_TEST
&gt; +/*
&gt; +** Function to test KASUMI encrypt and decrypt modes
&gt; +*/
&gt; +static int kasumi_test(void)
&gt; +{
&gt; +    struct kasumi_desc test_in, test_out;
&gt; +    uint data_in0[2], data_in1[2], data_out0[2], data_out1[2];
&gt; +
&gt; +    test_in.key0 = 0x9F45D62B;
&gt; +    test_in.key1 = 0x00B3C582;
&gt; +    test_in.key2 = 0x10492C95;
&gt; +    test_in.key3 = 0x48FF8148;
&gt; +    data_in0[0] = 0xEA024714;
&gt; +    data_in0[1] = 0xAD5C4D84;
&gt; +    test_in.data_in = &amp;data_in0[0];
&gt; +    test_in.data_out = &amp;data_out0[0];
&gt; +
&gt; +    printk(KERN_INFO "Encryption test\n");
&gt; +    kasumi_encrypt(&amp;test_in);
&gt; +
&gt; +    test_out.key0 = 0x9F45D62B;
&gt; +    test_out.key1 = 0x00B3C582;
&gt; +    test_out.key2 = 0x10492C95;
&gt; +    test_out.key3 = 0x48FF8148;
&gt; +    test_out.data_in = &amp;data_in1[0];
&gt; +    test_out.data_out = &amp;data_out1[0];
&gt; +    test_out.data_in[0] = data_out0[0];
&gt; +    test_out.data_in[1] = data_out0[1];
&gt; +
&gt; +    printk(KERN_INFO "Decryption test\n");
&gt; +    kasumi_decrypt(&amp;test_out);
&gt; +    printk(KERN_INFO "data_out0[0]=0x%x\n", data_out0[0]);
&gt; +    printk(KERN_INFO "data_out0[1]=0x%x\n", data_out0[1]);
&gt; +    printk(KERN_INFO "data_out1[0]=0x%x\n", data_out1[0]);
&gt; +    printk(KERN_INFO "data_out1[1]=0x%x\n", data_out1[1]);
&gt; +
&gt; +    if (data_in0[0] == data_out1[0])
&gt; +        printk(KERN_INFO " Data 0 matched\n");
&gt; +    else
&gt; +        printk(KERN_INFO " Data 0 NOT matched\n");
&gt; +    if (data_in0[1] == data_out1[1])
&gt; +        printk(KERN_INFO " Data 1 matched\n");
&gt; +    else
&gt; +        printk(KERN_INFO " Data 1 NOT matched\n");
&gt; +    return 0;
&gt; +}
&gt; +
&gt; +/*
&gt; +** Function to test F* mode of encryption
&gt; +*/
&gt; +static void kasumi_test_f8_1(void)
&gt; +{
&gt; +    int len = 0x31E, bearer = 0xc, direction = 1;
&gt; +    struct kasumi_desc test_in;
&gt; +    struct kasumi_desc test_out;
&gt; +    int i = 0;
&gt; +    uint data_in[32] = {
&gt; +        0x7EC61272, 0x743BF161, 0x4726446A, 0x6C38CED1,
&gt; +        0x66F6CA76, 0xEB543004, 0x4286346C, 0xEF130F92,
&gt; +        0x922B0345, 0x0D3A9975, 0xE5BD2EA0, 0xEB55AD8E,
&gt; +        0x1B199E3E, 0xC4316020, 0xE9A1B285, 0xE7627953,
&gt; +        0x59B7BDFD, 0x39BEF4B2, 0x484583D5, 0xAFE082AE,
&gt; +        0xE638BF5F, 0xD5A60619, 0x3901A08F, 0x4AB41AAB, 0x9B134880
&gt; +    };
&gt; +    uint data_cmp[32] = {
&gt; +        0xD1E2DE70, 0xEEF86C69, 0x64FB542B, 0xC2D460AA,
&gt; +        0xBFAA10A4, 0xA093262B, 0x7D199E70, 0x6FC2D489,
&gt; +        0x15532969, 0x10F3A973, 0x012682E4, 0x1C4E2B02,
&gt; +        0xBE2017B7, 0x253BBF93, 0x09DE5819, 0xCB42E819,
&gt; +        0x56F4C99B, 0xC9765CAF, 0x53B1D0BB, 0x8279826A,
&gt; +        0xDBBC5522, 0xE915C120, 0xA618A5A7, 0xF5E89708, 0x9339650F
&gt; +    };
&gt; +    uint data_out0[32];
&gt; +    uint data_out1[32];
&gt; +
&gt; +    test_in.key0 = 0x2BD6459F;
&gt; +    test_in.key1 = 0x82C5B300;
&gt; +    test_in.key2 = 0x952C4910;
&gt; +    test_in.key3 = 0x4881FF48;
&gt; +
&gt; +    test_in.count = 0x72A4F20F;
&gt; +
&gt; +    printk(KERN_INFO "in CFG=0x%x\n", test_in.config);
&gt; +    test_in.data_in = &amp;data_in[0];
&gt; +    test_in.data_out = &amp;data_out0[0];
&gt; +    kasumi_f8_encrypt(&amp;test_in, len, bearer, direction);
&gt; +
&gt; +    i = 0;
&gt; +    for (i = 0; i &lt; 32; i++) {
&gt; +        if (data_out0[i] != data_cmp[i])
&gt; +            printk(KERN_INFO
&gt; +                   "data MISS match data recieved=0x%x expected =0x%x\n\nn",
&gt; +                   data_out0[i], data_cmp[i]);
&gt; +        else
&gt; +            printk(KERN_INFO "data MATCHED\n");
&gt; +
&gt; +    }
&gt; +}
&gt; +
&gt; +/*
&gt; +** Function to test F9 mode of encryption
&gt; +*/
&gt; +static void kasumi_test_f9(void)
&gt; +{
&gt; +    struct kasumi_desc test_in;
&gt; +    int i = 0;
&gt; +    uint direction = 0, len = 189;
&gt; +    uint data_in[6] = {
&gt; +        0x6B227737,
&gt; +        0x296F393C,
&gt; +        0x8079353E,
&gt; +        0xDC87E2E8,
&gt; +        0x05D2EC49,
&gt; +        0xA4F2D8E0
&gt; +    };
&gt; +    uint data_out[2];
&gt; +
&gt; +    test_in.key0 = 0x2BD6459F;
&gt; +    test_in.key1 = 0x82C5B300;
&gt; +    test_in.key2 = 0x952C4910;
&gt; +    test_in.key3 = 0x4881FF48;
&gt; +    test_in.fresh = 0x05D2EC49;
&gt; +    test_in.count = 0x38A6F056;
&gt; +
&gt; +    for (i = 0; i &lt; 6; i++)
&gt; +        data_in[i] = kasumi_byte_swap(data_in[i]);
&gt; +    test_in.data_in = &amp;data_in[0];
&gt; +    test_in.data_out = &amp;data_out[0];
&gt; +    kasumi_f9_encrypt(&amp;test_in, len, direction);
&gt; +    if (data_out[0] == 0xf63bd72c)
&gt; +        printk(KERN_INFO
&gt; +               " F9 test passed Expected data = 0x%x data recieved=0x%x\n",
&gt; +               0xf63bd72c, data_out[0]);
&gt; +    else
&gt; +        printk(KERN_INFO
&gt; +               " \n F9 test Failed Expected data = 0x%x data recieved=0x%x\n",
&gt; +               0xf63bd72c, data_out[0]);
&gt; +
&gt; +}
&gt; +#endif
&gt; +
&gt; +/*
&gt; +**FUNCTION:kasumi_encrypt_decrypt()
&gt; +** args: kd is kasumi descriptor which holds all the requred data to do kasumi
&gt; +** mode encryption and decryption
&gt; +** Description:  This function follows the kasumi algorithm to encrypt and \
&gt; decrypt. +**  1. Check for interrupt bit KDA(Kasumi Data Availability)
&gt; +**  2. check for data availability bit in CTRL register and write 1 to clear it
&gt; +**  3. Set keys
&gt; +**  4. set mode
&gt; +**  5. set inputdata
&gt; +**  6. validate keys , mode and data
&gt; +**  7. wait for the data availability and then read the data.
&gt; +**   This function can only do 64bit data encryption at given time
&gt; +**   Please check the test() in the comment section.
&gt; +*/
&gt; +static int kasumi_encrypt_decrypt(struct kasumi_desc *kd)
&gt; +{
&gt; +    uint time_out = 100;
&gt; +
&gt; +    /*
&gt; +     * CTRL_STATUS[0] to reset the DATA out mechanism
&gt; +     */
&gt; +    printk(KERN_WARNING "kreg.ctrl 0x%x\n", kreg.ctrl);
&gt; +    out_be32(kreg.ctrl, in_be32(kreg.ctrl) | KASUMI_DATA_READY);
&gt; +    /*
&gt; +     * Check for interrupt bit for data availability bit set .
&gt; +     * if set clear it
&gt; +     */
&gt; +    if (mfdcr(DCR_UIC0_SR) &amp; 0x08000000) {
&gt; +        mtdcr(DCR_UIC0_SR, (mfdcr(DCR_UIC0_SR) &amp; ~0x08000000));
&gt; +    }
&gt; +
&gt; +    /*
&gt; +     * Check if KASUMI is ready  for data input
&gt; +     */
&gt; +    if (!mfdcr(DCR_UIC0_SR) &amp; 0x10000000)
&gt; +        printk(KERN_INFO "KASUMI is ready for data\n");
&gt; +
&gt; +    /*
&gt; +     * need keys
&gt; +     */
&gt; +    out_be32(kreg.key0, kd-&gt;key0);
&gt; +    out_be32(kreg.key1, kd-&gt;key1);
&gt; +    out_be32(kreg.key2, kd-&gt;key2);
&gt; +    out_be32(kreg.key3, kd-&gt;key3);
&gt; +    /*
&gt; +     * Check for correct  mode
&gt; +     */
&gt; +    if ((kd-&gt;mode != KASUMI_ENC_MODE) &amp;&amp; (kd-&gt;mode != KASUMI_DEC_MODE)) {
&gt; +        printk(KERN_INFO "KASUMI ERROR: invalid mode\n\n");
&gt; +        return -1;
&gt; +    }
&gt; +
&gt; +    /*
&gt; +     * set mode
&gt; +     */
&gt; +    out_be32(kreg.mode, kd-&gt;mode);
&gt; +    /*
&gt; +     * write data
&gt; +     */
&gt; +    if ((kd-&gt;data_in != NULL) &amp;&amp; (kd-&gt;data_in)) {
&gt; +        out_be32(kreg.data_in0 , kd-&gt;data_in[0]);
&gt; +        out_be32(kreg.data_in1, kd-&gt;data_in[1]);
&gt; +    } else {
&gt; +        printk(KERN_INFO "No data passed\n");
&gt; +        return -1;
&gt; +    }
&gt; +
&gt; +    /*
&gt; +     * validate data CTRL_STAT[4]
&gt; +     * Validate mode CTRL_STA[1] = 1
&gt; +     * vlaidatkeys keys CTRL_STAT[2] = 1
&gt; +     */
&gt; +    out_be32(kreg.ctrl, in_be32(kreg.ctrl) | (KASUMI_VAL_DATA |
&gt; +                          KASUMI_VAL_KEYS |
&gt; +                          KASUMI_VAL_MODE));
&gt; +    /*
&gt; +     * Just in case DATA validation not finished
&gt; +     */
&gt; +    time_out = 100;
&gt; +    while (in_be32(kreg.ctrl) &amp; KASUMI_VAL_DATA) {
&gt; +        time_out--;
&gt; +        mdelay(1);
&gt; +        if (time_out &lt;= 0) {
&gt; +            printk(KERN_INFO
&gt; +                   "ERROR: at line %d Timed out KASU0_CTRL=0x%x\n",
&gt; +                   __LINE__, in_be32(kreg.ctrl));
&gt; +            break;
&gt; +        }
&gt; +    }
&gt; +
&gt; +    /*
&gt; +     * Check if data available bit is set
&gt; +     */
&gt; +    if (!mfdcr(DCR_UIC0_SR) &amp; 0x08000000)
&gt; +        printk(KERN_WARNING
&gt; +               "KASUMI data NOT available and  NO KDA interrupt occured\n");
&gt; +
&gt; +    /*
&gt; +     * Is data avaialbel
&gt; +     */
&gt; +    time_out = 100;
&gt; +    while (!(in_be32(kreg.status) &amp; KASUMI_DATA_READY)) {
&gt; +        time_out--;
&gt; +        mdelay(1);
&gt; +        if (time_out &lt;= 0) {
&gt; +            printk(KERN_INFO "line %d Timed out KASU0_CTRL=0x%x\n",
&gt; +                   __LINE__, in_be32(kreg.ctrl));
&gt; +            break;
&gt; +        }
&gt; +    }
&gt; +
&gt; +    if (!(in_be32(kreg.status ) &amp; KASUMI_DATA_READY))
&gt; +        printk(KERN_WARNING "Data is not ready\n");
&gt; +
&gt; +    kd-&gt;data_out[0] = in_be32(kreg.data_out0);
&gt; +    kd-&gt;data_out[1] = in_be32(kreg.data_out1);
&gt; +    return 0;
&gt; +}
&gt; +
&gt; +/*
&gt; +** Kasumi encryption function calls the kasumi_encrypt_decrypt()
&gt; +**
&gt; +*/
&gt; +int kasumi_encrypt(struct kasumi_desc *test)
&gt; +{
&gt; +    test-&gt;mode = KASUMI_ENC_MODE;
&gt; +    if (kasumi_encrypt_decrypt(test) != 0) {
&gt; +        printk(KERN_INFO "kasumi_encrypt_decrypt returned error");
&gt; +        return -1;
&gt; +    } else
&gt; +        return 0;
&gt; +
&gt; +}
&gt; +
&gt; +/*
&gt; +** Kasumi encryption function calls the kasumi_encrypt_decrypt()
&gt; +**
&gt; +*/
&gt; +int kasumi_decrypt(struct kasumi_desc *test)
&gt; +{
&gt; +    test-&gt;mode = KASUMI_DEC_MODE;
&gt; +    if (kasumi_encrypt_decrypt(test) != 0) {
&gt; +        printk(KERN_INFO "kasumi_encrypt_decrypt returned error");
&gt; +        return -1;
&gt; +    } else
&gt; +        return 0;
&gt; +
&gt; +}
&gt; +
&gt; +/*
&gt; +**
&gt; +**FUNCTION:kasumi_encrypt_decrypt()
&gt; +**args: kd is kasumi descriptor which holds all the requred data to do kasumi mode \
&gt; encryption and decryption +**Description:  This function follows the kasumi \
&gt; algorithm to encrypt and decrypt. +**  1. Check for interrupt bit KDA(Kasumi Data \
&gt; Availability) +**  2. check for data availability bit in CTRL register and write 1 \
&gt; to clear it +**  3. Set keys
&gt; +**  4. set mode
&gt; +**  5. set config
&gt; +**  6. set count
&gt; +**  7. set inputdata
&gt; +**  8. validate keys , mode , config , count and data
&gt; +**  9. wait for the data availability and then read the data.
&gt; +**   This function can encrypt block data
&gt; +**   Please check the test_f8_1() in the comment section.
&gt; +*/
&gt; +static int kasumi_f8_encrypt_decrypt(struct kasumi_desc *kd)
&gt; +{
&gt; +    int time_out = 10000;
&gt; +    int len = 0;
&gt; +    int i = 0;
&gt; +
&gt; +    len = ((kd-&gt;config &amp; 0xff) &lt;&lt; 8) | ((kd-&gt;config &amp; 0xff00) &gt;&gt; 8);
&gt; +    /*Reset data out mechanism */
&gt; +    /*CTRL_STATUS[0] to reset the DATA out mechanism */
&gt; +    out_be32(kreg.ctrl, in_be32(kreg.ctrl) | KASUMI_DATA_READY);
&gt; +
&gt; +    if (mfdcr(DCR_UIC0_SR) &amp; 0x08000000)
&gt; +        mtdcr(DCR_UIC0_SR, (mfdcr(DCR_UIC0_SR) &amp; ~0x08000000));
&gt; +
&gt; +    if (!mfdcr(DCR_UIC0_SR) &amp; 0x10000000)
&gt; +        printk(KERN_INFO "KASUMI is NOT ready for data\n");
&gt; +
&gt; +    /*need keys */
&gt; +
&gt; +    out_be32(kreg.key0, kd-&gt;key0);
&gt; +    out_be32(kreg.key1, kd-&gt;key1);
&gt; +    out_be32(kreg.key2, kd-&gt;key2);
&gt; +    out_be32(kreg.key3, kd-&gt;key3);
&gt; +    /*write config */
&gt; +    out_be32(kreg.config, kd-&gt;config);
&gt; +    /* Write count */
&gt; +    out_be32(kreg.count, kd-&gt;count);
&gt; +    /*set mode */
&gt; +    if (kd-&gt;mode != KASUMI_F8_ENC_MODE) {
&gt; +        printk(KERN_INFO "KASUMI Invalid mode\n");
&gt; +        return -1;
&gt; +    }
&gt; +
&gt; +    out_be32(kreg.mode, kd-&gt;mode);
&gt; +
&gt; +    /*
&gt; +     * write data
&gt; +     * validate data CTRL_STAT[4]
&gt; +     * Validate mode CTRL_STA[1] = 1
&gt; +     * vlaidatkeys keys CTRL_STAT[2] = 1
&gt; +     * vlaidatkeys count and config
&gt; +     */
&gt; +    out_be32(kreg.ctrl, in_be32(kreg.ctrl) | (KASUMI_VAL_CFG |
&gt; +                          KASUMI_VAL_COUNT |
&gt; +                          KASUMI_VAL_KEYS |
&gt; +                          KASUMI_VAL_MODE));
&gt; +    time_out = 100;
&gt; +    /*
&gt; +     ** Just in case DATA validation is not finished
&gt; +     */
&gt; +    while (in_be32( kreg.ctrl) &amp; (KASUMI_VAL_CFG | KASUMI_VAL_COUNT |
&gt; +                     KASUMI_VAL_KEYS | KASUMI_VAL_MODE)) {
&gt; +        time_out--;
&gt; +        mdelay(1);
&gt; +        if (time_out &lt;= 0) {
&gt; +            printk(KERN_INFO
&gt; +                   " KASUMI:line %d Timed out KASU0_CTRL=0x%x\n",
&gt; +                   __LINE__, in_be32(kreg.ctrl));
&gt; +            break;
&gt; +        }
&gt; +
&gt; +    }
&gt; +
&gt; +    if (in_be32(kreg.ctrl )
&gt; +        &amp; (KASUMI_VAL_CFG | KASUMI_VAL_COUNT |
&gt; +           KASUMI_VAL_KEYS | KASUMI_VAL_MODE))
&gt; +        printk(KERN_WARNING
&gt; +               " CFG COUNT KEYS MODE validation NOT complete\n");
&gt; +    /*
&gt; +     ** Here we encode 64bits a time till whole block is encrypted
&gt; +     */
&gt; +    while (len &gt; 0) {
&gt; +        if ((&amp;kd-&gt;data_in[i] != NULL) &amp;&amp; (&amp;kd-&gt;data_in[i + 1] != NULL)) {
&gt; +            out_be32(kreg.data_in0, kd-&gt;data_in[i]);
&gt; +            out_be32(kreg.data_in1, kd-&gt;data_in[i + 1]);
&gt; +        } else {
&gt; +            printk(KERN_INFO "No data passed\n");
&gt; +            break;
&gt; +        }
&gt; +
&gt; +        out_be32(kreg.ctrl, in_be32(kreg.ctrl) | KASUMI_VAL_DATA);
&gt; +        time_out = 100;
&gt; +        while (in_be32(kreg.ctrl) &amp; (KASUMI_VAL_DATA)) {
&gt; +            time_out--;
&gt; +            if (time_out &lt;= 0) {
&gt; +                printk(KERN_INFO
&gt; +                       "KASUMI: line %d Timed out KASU0_CTRL=0x%x\n",
&gt; +                       __LINE__, in_be32(kreg.ctrl));
&gt; +                break;
&gt; +            }
&gt; +        }
&gt; +
&gt; +        if (in_be32(kreg.ctrl) &amp; (KASUMI_VAL_DATA))
&gt; +            printk(KERN_WARNING "Data validation NOT complete\n");
&gt; +
&gt; +        time_out = 100;
&gt; +        while (!(in_be32( kreg.status) &amp; KASUMI_DATA_READY)) {
&gt; +            mdelay(1);
&gt; +            time_out--;
&gt; +            if (time_out &lt;= 0) {
&gt; +                printk(KERN_INFO
&gt; +                       "line %d Timed out KASU0_CTRL=0x%x\n",
&gt; +                       __LINE__, in_be32(kreg.ctrl));
&gt; +                break;
&gt; +            }
&gt; +
&gt; +        }
&gt; +
&gt; +        if (!(in_be32(kreg.status) &amp; KASUMI_DATA_READY)) {
&gt; +            printk(KERN_WARNING "Data is not ready\n");
&gt; +            break;
&gt; +        }
&gt; +
&gt; +        kd-&gt;data_out[i] = kasumi_byte_swap(in_be32(kreg.data_out0));
&gt; +        kd-&gt;data_out[i + 1] = kasumi_byte_swap(in_be32(kreg.data_out1));
&gt; +        /*
&gt; +         ** CTRL_STATUS[0] to reset the DATA out mechanism
&gt; +         */
&gt; +        out_be32(kreg.ctrl, KASUMI_DATA_READY);
&gt; +        if (!mfdcr(DCR_UIC0_SR) &amp; 0x10000000)
&gt; +            printk(KERN_WARNING "KASUMI is NOT ready for data\n");
&gt; +
&gt; +        i += 2;
&gt; +        len = len - 64;
&gt; +    }
&gt; +
&gt; +    return 0;
&gt; +}
&gt; +
&gt; +/*
&gt; +** arg1: hte filled kasumi_desc structure pointer
&gt; +** arg2:  len
&gt; +** arg3:  bearer
&gt; +** arg4:  direction
&gt; +*/
&gt; +int kasumi_f8_encrypt(struct kasumi_desc *test, uint len, uint bearer,
&gt; +              uint direction)
&gt; +{
&gt; +    int i = 0;
&gt; +
&gt; +    test-&gt;config = (len &lt;&lt; 16 | bearer &lt;&lt; 1 | direction);
&gt; +    test-&gt;mode = KASUMI_F8_ENC_MODE;
&gt; +    test-&gt;key0 = kasumi_byte_swap(test-&gt;key0);
&gt; +    test-&gt;key1 = kasumi_byte_swap(test-&gt;key1);
&gt; +    test-&gt;key2 = kasumi_byte_swap(test-&gt;key2);
&gt; +    test-&gt;key3 = kasumi_byte_swap(test-&gt;key3);
&gt; +    test-&gt;count = kasumi_byte_swap(test-&gt;count);
&gt; +    test-&gt;config = kasumi_byte_swap(test-&gt;config);
&gt; +    len = len / (32);
&gt; +
&gt; +    for (i = 0; i &lt;= len; i++)
&gt; +        test-&gt;data_in[i] = kasumi_byte_swap(test-&gt;data_in[i]);
&gt; +
&gt; +    if (kasumi_f8_encrypt_decrypt(test) != 0) {
&gt; +        printk(KERN_INFO
&gt; +               "kasumi_f8_encrypt_decrypt() returned error\n");
&gt; +        return -1;
&gt; +    }
&gt; +
&gt; +    return 0;
&gt; +}
&gt; +
&gt; +/*
&gt; +**
&gt; +**FUNCTION:kasumi_encrypt_decrypt()
&gt; +**args: kd is kasumi descriptor which holds all the requred data to do kasumi mode \
&gt; encryption and decryption +**Description:  This function follows the kasumi \
&gt; algorithm to encrypt and decrypt. +**  1. Check for interrupt bit KDA(Kasumi Data \
&gt; Availability) +**  2. check for data availability bit in CTRL register and write 1 \
&gt; to clear it +**  3. Set keys
&gt; +**  4. set mode
&gt; +**  5. set config
&gt; +**  6. set count
&gt; +**  7. set inputdata
&gt; +**  8. validate keys , mode , config , count and data
&gt; +**  9. wait for the data availability and then read the data.
&gt; +**   This function can encrypt block data
&gt; +**   Please check the test_f9_1() in the comment section.
&gt; +*/
&gt; +int kasumi_f9(struct kasumi_desc *kd)
&gt; +{
&gt; +    int time_out = 10000;
&gt; +    int len = 0;
&gt; +    int i = 0;
&gt; +
&gt; +    /*
&gt; +     ** Get the lenght of the block we are going to encode
&gt; +     */
&gt; +    len = ((kd-&gt;config &amp; 0xff) &lt;&lt; 8) | ((kd-&gt;config &amp; 0xff00) &gt;&gt; 8);
&gt; +
&gt; +    /*
&gt; +     ** CTRL_STATUS[0] to reset the DATA out mechanism
&gt; +     */
&gt; +    out_be32(kreg.ctrl, in_be32(kreg.ctrl) | KASUMI_DATA_READY);
&gt; +    if (mfdcr(DCR_UIC0_SR) &amp; 0x08000000)
&gt; +        mtdcr(DCR_UIC0_SR, (mfdcr(DCR_UIC0_SR) &amp; ~0x08000000));
&gt; +
&gt; +    if (!(mfdcr(DCR_UIC0_SR) &amp; 0x10000000))
&gt; +        printk(KERN_INFO "KASUMI is ready for data\n");
&gt; +
&gt; +    /*
&gt; +     ** need keys
&gt; +     */
&gt; +    out_be32(kreg.key0, kd-&gt;key0);
&gt; +    out_be32(kreg.key1, kd-&gt;key1);
&gt; +    out_be32(kreg.key2, kd-&gt;key2);
&gt; +    out_be32(kreg.key3, kd-&gt;key3);
&gt; +    /*
&gt; +     ** write config
&gt; +     */
&gt; +    out_be32(kreg.config, kd-&gt;config);
&gt; +    /*
&gt; +     ** Write count
&gt; +     */
&gt; +    out_be32(kreg.count, kd-&gt;count);
&gt; +    /*
&gt; +     ** set fresh
&gt; +     */
&gt; +    out_be32(kreg.fresh, kd-&gt;fresh);
&gt; +    /*
&gt; +     ** set mode
&gt; +     */
&gt; +    if (kd-&gt;mode != KASUMI_F9_ENC_MODE) {
&gt; +        printk(KERN_INFO "KASUMI Invalid mode\n");
&gt; +        return -1;
&gt; +    }
&gt; +
&gt; +    out_be32(kreg.mode, kd-&gt;mode);
&gt; +    /*
&gt; +     * write data
&gt; +     * validate data CTRL_STAT[4]
&gt; +     * Validate mode CTRL_STA[1] = 1
&gt; +     * vlaidatkeys keys CTRL_STAT[2] = 1
&gt; +     * vlaidatkeys count and config
&gt; +     */
&gt; +    out_be32(kreg.ctrl,
&gt; +         in_be32(kreg.ctrl) |
&gt; +         (KASUMI_VAL_CFG | KASUMI_VAL_COUNT | KASUMI_VAL_KEYS |
&gt; +          KASUMI_VAL_MODE | KASUMI_VAL_FRESH));
&gt; +    time_out = 100;
&gt; +    /*
&gt; +     ** Just in case validation is not complete.
&gt; +     */
&gt; +    while (in_be32(kreg.ctrl) &amp; (KASUMI_VAL_CFG |
&gt; +                     KASUMI_VAL_COUNT | KASUMI_VAL_KEYS
&gt; +                     | KASUMI_VAL_MODE | KASUMI_VAL_FRESH)) {
&gt; +        time_out--;
&gt; +        mdelay(1);
&gt; +        if (time_out &lt;= 0) {
&gt; +            printk(KERN_INFO "line %d Timed out KASU0_CTRL=0x%x\n",
&gt; +                   __LINE__, in_be32(kreg.ctrl));
&gt; +            break;
&gt; +        }
&gt; +    }
&gt; +
&gt; +    if (in_be32(kreg.ctrl) &amp; (KASUMI_VAL_CFG |
&gt; +                  KASUMI_VAL_COUNT | KASUMI_VAL_KEYS
&gt; +                  | KASUMI_VAL_MODE | KASUMI_VAL_FRESH))
&gt; +        printk(KERN_WARNING
&gt; +               " CFG COUNT KEYS MODE validation NOT complete\n");
&gt; +
&gt; +    /*
&gt; +     **  Loop around this code till we encode all 64bit data blocks
&gt; +     */
&gt; +    while (len &gt; 0) {
&gt; +
&gt; +        if ((&amp;kd-&gt;data_in[i] != NULL) &amp;&amp; (&amp;kd-&gt;data_in[i + 1] != NULL)) {
&gt; +            out_be32(kreg.data_in0, kd-&gt;data_in[i]);
&gt; +            out_be32( kreg.data_in1, kd-&gt;data_in[i + 1]);
&gt; +        } else {
&gt; +            printk(KERN_INFO "No data passed\n");
&gt; +            return -1;
&gt; +        }
&gt; +
&gt; +        out_be32(kreg.ctrl, in_be32(kreg.ctrl) | KASUMI_VAL_DATA);
&gt; +        time_out = 100;
&gt; +
&gt; +        while (in_be32(kreg.ctrl) &amp; (KASUMI_VAL_DATA)) {
&gt; +            time_out--;
&gt; +            mdelay(1);
&gt; +            if (time_out &lt;= 0) {
&gt; +                printk(KERN_INFO
&gt; +                       "line %d Timed out KASU0_CTRL=0x%x\n",
&gt; +                       __LINE__, in_be32(kreg.ctrl));
&gt; +                break;
&gt; +            }
&gt; +        }
&gt; +
&gt; +        if (in_be32( kreg.ctrl) &amp; (KASUMI_VAL_DATA)) {
&gt; +            printk(KERN_INFO "Data validation NOT complete\n");
&gt; +        }
&gt; +
&gt; +        if (!(mfdcr(DCR_UIC0_SR) &amp; 0x10000000))
&gt; +            printk(KERN_INFO "KASUMI is NOT ready for data\n");
&gt; +
&gt; +        i += 2;
&gt; +        len = len - 64;
&gt; +    }
&gt; +
&gt; +    if (!(mfdcr(DCR_UIC0_SR) &amp; 0x08000000))
&gt; +        printk(KERN_INFO
&gt; +               "KASUMI data NOT available and  NO KDA interrupt occured\n");
&gt; +
&gt; +    /*
&gt; +     ** Is data avaialbel
&gt; +     */
&gt; +    time_out = 100;
&gt; +    while (!(in_be32(kreg.status) &amp; KASUMI_DATA_READY)) {
&gt; +        time_out--;
&gt; +        mdelay(1);
&gt; +        if (time_out &lt;= 0) {
&gt; +            printk(KERN_INFO "line %d Timed out KASU0_CTRL=0x%x\n",
&gt; +                   __LINE__, in_be32(kreg.ctrl));
&gt; +        }
&gt; +
&gt; +    }
&gt; +
&gt; +    if (!(in_be32(kreg.status) &amp; KASUMI_DATA_READY))
&gt; +        printk(KERN_WARNING "Data is not ready\n");
&gt; +    kd-&gt;data_out[0] = kasumi_byte_swap(in_be32(kreg.data_out0));
&gt; +    kd-&gt;data_out[1] = kasumi_byte_swap(in_be32(kreg.data_out1));
&gt; +    out_be32( kreg.ctrl, KASUMI_DATA_READY);
&gt; +    return 0;
&gt; +}
&gt; +
&gt; +/*
&gt; +** arg1: kasumi_desc structure
&gt; +**  arg2: len
&gt; +**  arg3: direction
&gt; +*/
&gt; +int kasumi_f9_encrypt(struct kasumi_desc *test, uint len, uint direction)
&gt; +{
&gt; +    test-&gt;config = (len &lt;&lt; 16 | direction);
&gt; +    test-&gt;config = (0x00BD0000);
&gt; +    test-&gt;mode = KASUMI_F9_ENC_MODE;
&gt; +    test-&gt;key0 = kasumi_byte_swap(test-&gt;key0);
&gt; +    test-&gt;key1 = kasumi_byte_swap(test-&gt;key1);
&gt; +    test-&gt;key2 = kasumi_byte_swap(test-&gt;key2);
&gt; +    test-&gt;key3 = kasumi_byte_swap(test-&gt;key3);
&gt; +    test-&gt;count = kasumi_byte_swap(test-&gt;count);
&gt; +    test-&gt;config = kasumi_byte_swap(test-&gt;config);
&gt; +    test-&gt;fresh = kasumi_byte_swap(test-&gt;fresh);
&gt; +
&gt; +    if (kasumi_f9(test) != 0) {
&gt; +        printk(KERN_INFO
&gt; +               "kasumi_f8_encrypt_decrypt() returned error\n");
&gt; +        return -1;
&gt; +    }
&gt; +
&gt; +    return 0;
&gt; +}
&gt; +
&gt; +/*
&gt; +**IOCTL function to let this driver usaed from user space.
&gt; +**
&gt; +*/
&gt; +static int kasumi_ioctl(struct inode *inode, struct file *filep,
&gt; +            unsigned int cmd, unsigned long arg)
&gt; +{
&gt; +    int kerr = 0;
&gt; +    struct kasumi_f8_f9_desc kd_f89;
&gt; +
&gt; +    kd_f89.kd.data_in = &amp;data_in[0];
&gt; +    kd_f89.kd.data_out = &amp;data_out[0];
&gt; +
&gt; +    switch (cmd) {
&gt; +    case KASUMI_IOCTL_ENCRYPT:
&gt; +        {
&gt; +            copy_from_user(&amp;kd_f89,
&gt; +                       (struct kasumi_f8_f9_desc __user *)arg,
&gt; +                       sizeof(struct kasumi_f8_f9_desc));
&gt; +            kerr = kasumi_encrypt(&amp;kd_f89.kd);
&gt; +            copy_to_user(&amp;kd_f89,
&gt; +                     (struct kasumi_f8_f9_desc __user *)arg,
&gt; +                     sizeof(struct kasumi_f8_f9_desc));
&gt; +
&gt; +            if (kerr &lt; 0)
&gt; +                return kerr;
&gt; +            return 0;
&gt; +            break;
&gt; +        }
&gt; +    case KASUMI_IOCTL_DECRYPT:
&gt; +        {
&gt; +            printk(KERN_INFO "kd_f89.kd.data_in[0]=0x%x\n",
&gt; +                   kd_f89.kd.data_in[0]);
&gt; +            printk(KERN_INFO "kd_f89.kd.data_in[1]=0x%x\n",
&gt; +                   kd_f89.kd.data_in[1]);
&gt; +            copy_from_user(&amp;kd_f89,
&gt; +                       (struct kasumi_f8_f9_desc __user *)arg,
&gt; +                       sizeof(struct kasumi_f8_f9_desc));
&gt; +            kerr = kasumi_decrypt(&amp;kd_f89.kd);
&gt; +            copy_to_user(&amp;kd_f89,
&gt; +                     (struct kasumi_f8_f9_desc __user *)arg,
&gt; +                     sizeof(struct kasumi_f8_f9_desc));
&gt; +            if (kerr &lt; 0)
&gt; +                return kerr;
&gt; +            break;
&gt; +        }
&gt; +    case KASUMI_IOCTL_F8_MODE:
&gt; +        {
&gt; +            copy_from_user(&amp;kd_f89,
&gt; +                       (struct kasumi_f8_f9_desc __user *)arg,
&gt; +                       sizeof(struct kasumi_f8_f9_desc));
&gt; +            kerr =
&gt; +                kasumi_f8_encrypt(&amp;kd_f89.kd, kd_f89.len,
&gt; +                          kd_f89.bearer, kd_f89.direction);
&gt; +            copy_to_user(&amp;kd_f89,
&gt; +                     (struct kasumi_f8_f9_desc __user *)arg,
&gt; +                     sizeof(struct kasumi_f8_f9_desc));
&gt; +            if (kerr &lt; 0)
&gt; +                return kerr;
&gt; +            break;
&gt; +        }
&gt; +    case KASUMI_IOCTL_F9_MODE:
&gt; +        {
&gt; +            copy_from_user(&amp;kd_f89,
&gt; +                       (struct kasumi_f8_f9_desc __user *)arg,
&gt; +                       sizeof(struct kasumi_f8_f9_desc));
&gt; +            kerr =
&gt; +                kasumi_f9_encrypt(&amp;kd_f89.kd, kd_f89.len,
&gt; +                          kd_f89.direction);
&gt; +            copy_to_user(&amp;kd_f89,
&gt; +                     (struct kasumi_f8_f9_desc __user *)arg,
&gt; +                     sizeof(struct kasumi_f8_f9_desc));
&gt; +            if (kerr &lt; 0)
&gt; +                return kerr;
&gt; +            break;
&gt; +        }
&gt; +    default:
&gt; +        return -ENOTTY;
&gt; +    }
&gt; +
&gt; +    return 0;
&gt; +}
&gt; +
&gt; +/*
&gt; +** file operations
&gt; +*/
&gt; +struct file_operations kasumi_fops = {
&gt; +    .ioctl = kasumi_ioctl,
&gt; +};
&gt; +
&gt; +/*
&gt; +** Moudle initialization
&gt; +**/
&gt; +int kasumi_init_module(void)
&gt; +{
&gt; +    int kerr = 0;
&gt; +    dev_t dev = MKDEV(kasumi_major, 0);
&gt; +    struct cdev *k_cdev = cdev_alloc();
&gt; +
&gt; +    printk(KERN_INFO "Loading Kasumi Driver\n");
&gt; +    if (kasumi_major)
&gt; +        kerr = register_chrdev_region(dev, 1, "kasumi");
&gt; +    else {
&gt; +        kerr = alloc_chrdev_region(&amp;dev, 0, 1, "kasumi");
&gt; +        kasumi_major = MAJOR(dev);
&gt; +    }
&gt; +
&gt; +    if (kerr &lt; 0) {
&gt; +        printk(KERN_ERR "KASUMI:Failed to get major number");
&gt; +        return kerr;
&gt; +    }
&gt; +
&gt; +    cdev_init(k_cdev, &amp;kasumi_fops);
&gt; +    k_cdev-&gt;owner = THIS_MODULE;
&gt; +    k_cdev-&gt;ops = &amp;kasumi_fops;
&gt; +    kerr = cdev_add(k_cdev, MKDEV(kasumi_major, 0), 1);
&gt; +    if (kerr &lt; 0)
&gt; +        return kerr;
&gt; +
&gt; +    /*
&gt; +     * setup register base address
&gt; +     */
&gt; +    kasumi_base = ioremap64(0x0E0180000ULL, 0x80);
&gt; +    if (!kasumi_base) {
&gt; +        printk(KERN_INFO "ioremap falied for address 0xE0180000\n");
&gt; +        return -1;
&gt; +    }
&gt; +
&gt; +    /*
&gt; +     **Register address assignments
&gt; +     **
&gt; +     */
&gt; +    kreg.ctrl = ((uint *) ((u8 *) kasumi_base + KASU0_CTRL));
&gt; +    kreg.status = ((uint *) ((u8 *) kasumi_base + KASU0_STATUS));
&gt; +    kreg.mode = ((uint *) ((u8 *) kasumi_base + KASU0_MODE));
&gt; +    kreg.key0 = ((uint *) ((u8 *) kasumi_base + KASU0_KEY0));
&gt; +    kreg.key1 = ((uint *) ((u8 *) kasumi_base + KASU0_KEY1));
&gt; +    kreg.key2 = ((uint *) ((u8 *) kasumi_base + KASU0_KEY2));
&gt; +    kreg.key3 = ((uint *) ((u8 *) kasumi_base + KASU0_KEY3));
&gt; +    kreg.count = ((uint *) ((u8 *) kasumi_base + KASU0_COUNT));
&gt; +    kreg.config = ((uint *) ((u8 *) kasumi_base + KASU0_CONFIG));
&gt; +    kreg.fresh = ((uint *) ((u8 *) kasumi_base + KASU0_FRESH));
&gt; +    kreg.data_in0  = ((uint *) ((u8 *) kasumi_base + KASU0_DATA_IN0));
&gt; +    kreg.data_in1 = ((uint *) ((u8 *) kasumi_base + KASU0_DATA_IN1));
&gt; +    kreg.data_out0 = ((uint *) ((u8 *) kasumi_base + KASU0_DATA_OUT0));
&gt; +    kreg.data_out1  = ((uint *) ((u8 *) kasumi_base + KASU0_DATA_OUT1));
&gt; +
&gt; +    /*
&gt; +     ** reset KASUMI core
&gt; +     */
&gt; +    SDR_WRITE(SDR0_SRST1, SDR_READ(SDR0_SRST1) | KASUMI_RESET_MSK);
&gt; +    SDR_WRITE(SDR0_SRST1, SDR_READ(SDR0_SRST1) &amp; (~KASUMI_RESET_MSK));
&gt; +    /*
&gt; +     ** Disable the read pipe line. Otherwise it may cause hang on PLB
&gt; +     */
&gt; +    mtdcr(DCR_PLB4A0, mfdcr(DCR_PLB4A0) &amp; DISABLE_RD_PIPE_LINE);
&gt; +    mtdcr(DCR_UIC0_ER, (mfdcr(DCR_UIC0_ER) | 0x18000000));
&gt; +
&gt; +    /*
&gt; +     ** Kasumi test
&gt; +     */
&gt; +#ifdef KASUMI_TEST
&gt; +    kasumi_test();
&gt; +    /*
&gt; +     ** f8 mode
&gt; +     */
&gt; +    kasumi_test_f8_1();
&gt; +    /*
&gt; +     ** f9 mode
&gt; +     */
&gt; +    kasumi_test_f9();
&gt; +#endif
&gt; +    return 0;
&gt; +}
&gt; +
&gt; +/*
&gt; + * Cleanup module
&gt; + */
&gt; +void kasumi_cleanup_module(void)
&gt; +{
&gt; +    iounmap(kasumi_base);
&gt; +    printk(KERN_INFO "Exiting Kasumi Driver\n");
&gt; +}
&gt; +
&gt; +EXPORT_SYMBOL(kasumi_f9_encrypt);
&gt; +EXPORT_SYMBOL(kasumi_f8_encrypt);
&gt; +EXPORT_SYMBOL(kasumi_encrypt);
&gt; +EXPORT_SYMBOL(kasumi_decrypt);
&gt; +module_init(kasumi_init_module);
&gt; +module_exit(kasumi_cleanup_module);
&gt; +MODULE_LICENSE("GPL");
&gt; +MODULE_AUTHOR("Tirumala Marri &lt;tmarri@amcc.com&gt;");
&gt; +MODULE_DESCRIPTION("Kasumi security engine driver");
&gt; 
&gt; 
&gt; 
&gt; --
&gt; Marri T Reddy
&gt; San Jose,CA
&gt; No day but today



-- 
Marri T Reddy
San Jose,CA
No day but today

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070522012045</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-05-22 01:20:45-0400</timestampReceived><subject>Re: Looking for comments on a Linux driver for HW accelerated</subject><body>

* "M.T.Reddy" &lt;mtreddy@gmail.com&gt; wrote:

&gt; On 5/21/07, M. T. Reddy &lt;mtreddy@gmail.com&gt; wrote:
&gt; &gt;Please comment on the following patch for HW accelerated kasumi +
&gt; &gt;f8 and f8 encryption engine.

First time I hear about kasumi. Got a link handy for a rough desc?

If you are interested in feedback concerning solid crypto, consult
the sci.crypt newsgroup.

--=20
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070514155252</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-05-14 15:52:52-0400</timestampReceived><subject>Re: Kubuntu 7.04 amd64 - kernel works but linuxrc segfaults</subject><body>

Peter_22@gmx.de wrote:
&gt; After a weekend of Kubuntu and kernel configuring I got a complete
&gt; .deb-package with a working kernel and modules. Booting from usb stick
&gt; works fine but booting with the initrd needed for root encryption fails
&gt; terribly. I wonder why. The kernel starts and finds everything, even the
&gt; usb stick. At the point when the stick should be mounted as /lib a
&gt; segfault message is repeated. Something like error 4. I tried with/without
&gt; dietlibc.....

If you want others to look at your problem, please provide more information:

1) kernel version
2) kernel configuration
3) build-initrd.sh configuration
4) bootloader configuration
5) full error message that you see

You said kernel boots, but how far? Does it fully boot to unencrypted root
setup without any initrd/initramfs woodoo present? This is required before
you can expect it to boot to initrd based encrypted root setup.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070511181852</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-05-11 18:18:52-0400</timestampReceived><subject>Re: Kernel tainted - no version for "loop_unregister_transfer"</subject><body>

Phil H wrote:
&gt; After predictable stuffing around, I got a livecd that works. Loop-aes
&gt; worked too, and loop_serpent (all tests passed OK) BUT loop_serpent puts
&gt; the following troubling messager into dmesg:
&gt; 
&gt; loop_serpent: no version for "loop_unregister_transfer" found: kernel tainted.
&gt; loop: registered serpent encryption

When ciphers package is built it needs to find previously compiled loop.ko
module at compile time. If it can't find it, then loop_serpent.ko (and
loop_twofish.ko and loop_blowfish.ko) end up having no version info about
exported symbols from loop.ko module.

&lt;sarcasm&gt;
That is result of mainline kbuild guys doing their best to torpedo
externally compiled modules that depend on other externally compiled
modules.
&lt;/sarcasm&gt;

Anyway, can you try this:

1) Get new Makefile from here, and drop it to loop-AES source directory:

   http://loop-aes.sourceforge.net/updates/Makefile-20070305.bz2
   http://loop-aes.sourceforge.net/updates/Makefile-20070305.bz2.sign

2) Copy *.c files from ciphers package to loop-AES source directory.

3) Build new loop.ko, loop_serpent.ko, loop_twofish.ko and loop_blowfish.ko
   modules using this command:

   make EXTRA_CIPHERS=y

That builds and installs them all together so that version info don't get
lost between two diffrent make invocations.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070511200228</emailId><senderName>Phil H</senderName><senderEmail>philtickle200@yahoo.com</senderEmail><timestampReceived>2007-05-11 20:02:28-0400</timestampReceived><subject>Re: Kernel tainted - no version for "loop_unregister_transfer"</subject><body>

Thanks Jari, but the Makefile's not working for me.  Get:

/bin/sh: line 0: [: VERSION = 2PATCHLEVEL = 60: integer expression expected

repeated a number of times, with no modules at the end.

Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote: Phil H wrote:
&gt; After predictable stuffing around, I got a livecd that works. Loop-aes
&gt; worked too, and loop_serpent (all tests passed OK) BUT loop_serpent puts
&gt; the following troubling messager into dmesg:
&gt; 
&gt; loop_serpent: no version for "loop_unregister_transfer" found: kernel tainted.
&gt; loop: registered serpent encryption

When ciphers package is built it needs to find previously compiled loop.ko
module at compile time. If it can't find it, then loop_serpent.ko (and
loop_twofish.ko and loop_blowfish.ko) end up having no version info about
exported symbols from loop.ko module.


That is result of mainline kbuild guys doing their best to torpedo
externally compiled modules that depend on other externally compiled
modules.


Anyway, can you try this:

1) Get new Makefile from here, and drop it to loop-AES source directory:

   http://loop-aes.sourceforge.net/updates/Makefile-20070305.bz2
   http://loop-aes.sourceforge.net/updates/Makefile-20070305.bz2.sign

2) Copy *.c files from ciphers package to loop-AES source directory.

3) Build new loop.ko, loop_serpent.ko, loop_twofish.ko and loop_blowfish.ko
   modules using this command:

   make EXTRA_CIPHERS=y

That builds and installs them all together so that version info don't get
lost between two diffrent make invocations.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD


 
---------------------------------
Now that's room service! Choose from over 150,000 hotels 
in 45,000 destinations on Yahoo! Travel to find your fit.
[Attachment #3 (text/html)]

Thanks Jari, but the Makefile's not working for me.  Get:&lt;br&gt;&lt;br&gt;/bin/sh: line \
0: [: VERSION = 2PATCHLEVEL = 60: integer expression expected&lt;br&gt;&lt;br&gt;repeated a \
number of times, with no modules at the end.&lt;br&gt;&lt;br&gt;&lt;b&gt;&lt;i&gt;Jari Ruusu \
&lt;jariruusu@users.sourceforge.net&gt;&lt;/i&gt;&lt;/b&gt; wrote:&lt;blockquote class="replbq" \
style="border-left: 2px solid rgb(16, 16, 255); margin-left: 5px; padding-left: \
5px;"&gt; Phil H wrote:&lt;br&gt;&gt; After predictable stuffing around, I got a livecd that \
works. Loop-aes&lt;br&gt;&gt; worked too, and loop_serpent (all tests passed OK) BUT \
loop_serpent puts&lt;br&gt;&gt; the following troubling messager into dmesg:&lt;br&gt;&gt; \
&lt;br&gt;&gt; loop_serpent: no version for "loop_unregister_transfer" found: kernel \
tainted.&lt;br&gt;&gt; loop: registered serpent encryption&lt;br&gt;&lt;br&gt;When ciphers package is \
built it needs to find previously compiled loop.ko&lt;br&gt;module at compile time. If it \
can't find it, then loop_serpent.ko (and&lt;br&gt;loop_twofish.ko and loop_blowfish.ko) end \
up having no  version info about&lt;br&gt;exported symbols from loop.ko \
module.&lt;br&gt;&lt;br&gt;&lt;sarcasm&gt;&lt;br&gt;That is result of mainline kbuild guys doing their best \
to torpedo&lt;br&gt;externally compiled modules that depend on other externally \
compiled&lt;br&gt;modules.&lt;br&gt;&lt;/sarcasm&gt;&lt;br&gt;&lt;br&gt;Anyway, can you try this:&lt;br&gt;&lt;br&gt;1) Get new \
Makefile from here, and drop it to loop-AES source directory:&lt;br&gt;&lt;br&gt;   \
http://loop-aes.sourceforge.net/updates/Makefile-20070305.bz2&lt;br&gt;   \
http://loop-aes.sourceforge.net/updates/Makefile-20070305.bz2.sign&lt;br&gt;&lt;br&gt;2) Copy *.c \
files from ciphers package to loop-AES source directory.&lt;br&gt;&lt;br&gt;3) Build new loop.ko, \
loop_serpent.ko, loop_twofish.ko and loop_blowfish.ko&lt;br&gt;   modules using this \
command:&lt;br&gt;&lt;br&gt;   make EXTRA_CIPHERS=y&lt;br&gt;&lt;br&gt;That builds and installs them all \
together so that version info don't get&lt;br&gt;lost between two diffrent make \
invocations.&lt;br&gt;&lt;br&gt;-- &lt;br&gt;Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D \
EB E3 24 0E A9 DD&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;p&gt; 

&lt;hr size=1&gt;Now that's room service! &lt;a \
href="http://travel.yahoo.com/hotelsearchpage;_ylc=X3oDMTFtaTIzNXVjBF9TAzk3NDA3NTg5BF9zAzI3MTk0ODEEcG9zAzIEc2VjA21haWx0YWdsaW5lBHNsawNxMS0wNw--
 "&gt;Choose from over 150,000 hotels &lt;br&gt;in 45,000 destinations on Yahoo! Travel&lt;/a&gt; to \
find your fit.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070512103228</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-05-12 10:32:28-0400</timestampReceived><subject>Re: Kernel tainted - no version for "loop_unregister_transfer"</subject><body>

Phil H wrote:
&gt; but the Makefile's not working for me.  Get:
&gt; 
&gt; /bin/sh: line 0: [: VERSION = 2PATCHLEVEL = 60: integer expression expected
&gt; 
&gt; repeated a number of times, with no modules at the end.

Above sounds like 'tr' program is missing or misbehaving. Old Makefile did
not use 'tr' program by default, but new one does. It extracts version
information kernel kernel Makefile using these lines:

VERSION:=$(shell grep '^VERSION' $(LS)/Makefile | head -n 1 | tr -d -c '0-9')
PATCHLEVEL:=$(shell grep '^PATCHLEVEL' $(LS)/Makefile | head -n 1 | tr -d -c '0-9')
SUBLEVEL:=$(shell grep '^SUBLEVEL' $(LS)/Makefile | head -n 1 | tr -d -c '0-9')

That should evaluate to this:

VERSION:=2
PATCHLEVEL:=6
SUBLEVEL:=18

But in your case it appears to evaluate to this:

VERSION:=VERSION = 2
PATCHLEVEL:=PATCHLEVEL = 6
SUBLEVEL:=SUBLEVEL = 18

$(LS) is either detected kernel source directory, or LINUX_SOURCE= specified
kernel source directory. 'tr -d -c '0-9' command is supposed to delete all
non-number characters. Your 'tr' program doesn't do that.

Could you provide more information about your build system? Outputs of these
will help:

    tr --version
    make --version
    /bin/sh --version
    echo abc123def | tr -d -c '0-9'

What distro?
Any strange locale setting in your environment variables?

Next version of loop-AES will include that new Makefile plus some minor
adjustments because of normal kernel drift. Whatever is causing this problem
needs to be sorted out. If other loop-AES users want to test that new
Makefile, now is the perfect time to complain. Private replies are ok if
someone doesn't want to post to public mailing list.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070512115953</emailId><senderName>Phil H</senderName><senderEmail>philtickle200@yahoo.com</senderEmail><timestampReceived>2007-05-12 11:59:53-0400</timestampReceived><subject>Re: Kernel tainted - no version for "loop_unregister_transfer"</subject><body>

Well spotted, thanks Jari:  tr  is just Busybox tr, and yes, it doesn't work as \
required for extracting non-numeric chars.

I remember now this also caused problems with bz2aespipe.   I even tried writing a \
Busybox-only version of bz2aepipe but as I recall I found that Busybox head reads \
from standard input differently to gnu head, so it would only work in one direction \
without a total rethink, so I gave up and installed tr and head.

Even Busybox systems often have sed (and/or perl), or an alternative might be:

echo abc123def | sed 's/[^0-9]//g'

I'll hack this in and see what happens first.

Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote: Phil H wrote:
&gt; but the Makefile's not working for me.  Get:
&gt; 
&gt; /bin/sh: line 0: [: VERSION = 2PATCHLEVEL = 60: integer expression expected
&gt; 
&gt; repeated a number of times, with no modules at the end.

Above sounds like 'tr' program is missing or misbehaving. Old Makefile did
not use 'tr' program by default, but new one does. It extracts version
information kernel kernel Makefile using these lines:

VERSION:=$(shell grep '^VERSION' $(LS)/Makefile | head -n 1 | tr -d -c '0-9')
PATCHLEVEL:=$(shell grep '^PATCHLEVEL' $(LS)/Makefile | head -n 1 | tr -d -c '0-9')
SUBLEVEL:=$(shell grep '^SUBLEVEL' $(LS)/Makefile | head -n 1 | tr -d -c '0-9')

That should evaluate to this:

VERSION:=2
PATCHLEVEL:=6
SUBLEVEL:=18

But in your case it appears to evaluate to this:

VERSION:=VERSION = 2
PATCHLEVEL:=PATCHLEVEL = 6
SUBLEVEL:=SUBLEVEL = 18

$(LS) is either detected kernel source directory, or LINUX_SOURCE= specified
kernel source directory. 'tr -d -c '0-9' command is supposed to delete all
non-number characters. Your 'tr' program doesn't do that.

Could you provide more information about your build system? Outputs of these
will help:

    tr --version
    make --version
    /bin/sh --version
    echo abc123def | tr -d -c '0-9'

What distro?
Any strange locale setting in your environment variables?

Next version of loop-AES will include that new Makefile plus some minor
adjustments because of normal kernel drift. Whatever is causing this problem
needs to be sorted out. If other loop-AES users want to test that new
Makefile, now is the perfect time to complain. Private replies are ok if
someone doesn't want to post to public mailing list.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



       
---------------------------------
Be a better Globetrotter. Get better travel answers from someone who knows.
Yahoo! Answers - Check it out.


[Attachment #3 (text/html)]

Well spotted, thanks Jari:  tr  is just Busybox tr, and yes, it doesn't \
work as required for extracting non-numeric chars.&lt;br&gt;&lt;br&gt;I remember now this also \
caused problems with bz2aespipe.   I even tried writing a Busybox-only \
version of bz2aepipe but as I recall I found that Busybox head reads from standard \
input differently to gnu head, so it would only work in one direction without a total \
rethink, so I gave up and installed tr and head.&lt;br&gt;&lt;br&gt;Even Busybox systems often \
have sed (and/or perl), or an alternative might be:&lt;br&gt;&lt;br&gt;echo abc123def | sed \
's/[^0-9]//g'&lt;br&gt;&lt;br&gt;I'll hack this in and see what happens first.&lt;br&gt;&lt;br&gt;&lt;b&gt;&lt;i&gt;Jari \
Ruusu &lt;jariruusu@users.sourceforge.net&gt;&lt;/i&gt;&lt;/b&gt; wrote:&lt;blockquote \
class="replbq" style="border-left: 2px solid rgb(16, 16, 255); margin-left: 5px; \
padding-left: 5px;"&gt; Phil H wrote:&lt;br&gt;&gt; but the Makefile's not working for me.  \
Get:&lt;br&gt;&gt; &lt;br&gt;&gt; /bin/sh: line 0: [: VERSION = 2PATCHLEVEL = 60: integer \
expression  expected&lt;br&gt;&gt; &lt;br&gt;&gt; repeated a number of times, with no modules at \
the end.&lt;br&gt;&lt;br&gt;Above sounds like 'tr' program is missing or misbehaving. Old \
Makefile did&lt;br&gt;not use 'tr' program by default, but new one does. It extracts \
version&lt;br&gt;information kernel kernel Makefile using these \
lines:&lt;br&gt;&lt;br&gt;VERSION:=$(shell grep '^VERSION' $(LS)/Makefile | head -n 1 | tr -d -c \
'0-9')&lt;br&gt;PATCHLEVEL:=$(shell grep '^PATCHLEVEL' $(LS)/Makefile | head -n 1 | tr -d \
-c '0-9')&lt;br&gt;SUBLEVEL:=$(shell grep '^SUBLEVEL' $(LS)/Makefile | head -n 1 | tr -d -c \
'0-9')&lt;br&gt;&lt;br&gt;That should evaluate to \
this:&lt;br&gt;&lt;br&gt;VERSION:=2&lt;br&gt;PATCHLEVEL:=6&lt;br&gt;SUBLEVEL:=18&lt;br&gt;&lt;br&gt;But in your case it \
appears to evaluate to this:&lt;br&gt;&lt;br&gt;VERSION:=VERSION = 2&lt;br&gt;PATCHLEVEL:=PATCHLEVEL = \
6&lt;br&gt;SUBLEVEL:=SUBLEVEL = 18&lt;br&gt;&lt;br&gt;$(LS) is either detected kernel source directory, \
or LINUX_SOURCE= specified&lt;br&gt;kernel source directory. 'tr -d -c '0-9' command is \
supposed to delete all&lt;br&gt;non-number characters. Your 'tr' program  doesn't do \
that.&lt;br&gt;&lt;br&gt;Could you provide more information about your build system? Outputs of \
these&lt;br&gt;will help:&lt;br&gt;&lt;br&gt;    tr --version&lt;br&gt;    make --version&lt;br&gt;    /bin/sh \
--version&lt;br&gt;    echo abc123def | tr -d -c '0-9'&lt;br&gt;&lt;br&gt;What distro?&lt;br&gt;Any strange \
locale setting in your environment variables?&lt;br&gt;&lt;br&gt;Next version of loop-AES will \
include that new Makefile plus some minor&lt;br&gt;adjustments because of normal kernel \
drift. Whatever is causing this problem&lt;br&gt;needs to be sorted out. If other loop-AES \
users want to test that new&lt;br&gt;Makefile, now is the perfect time to complain. Private \
replies are ok if&lt;br&gt;someone doesn't want to post to public mailing list.&lt;br&gt;&lt;br&gt;-- \
&lt;br&gt;Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 \
DD&lt;br&gt;&lt;br&gt;-&lt;br&gt;Linux-crypto:  cryptography in and on the Linux system&lt;br&gt;Archive:     \
http://mail.nl.linux.org/linux-crypto/&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;p&gt;   &lt;hr \
size=1&gt;Be a better Globetrotter. &lt;a \
href="http://us.rd.yahoo.com/evt=48254/*http://answers.yahoo.com/dir/_ylc=X3oDMTI5MGx2 \
aThyBF9TAzIxMTU1MDAzNTIEX3MDMzk2NTQ1MTAzBHNlYwNCQUJwaWxsYXJfTklfMzYwBHNsawNQcm9kdWN0X3F1ZXN0aW9uX3BhZ2U-?link=list&amp;sid=396545469"&gt;Get \
better travel answers &lt;/a&gt;from someone who knows.&lt;br&gt;Yahoo! Answers - Check it out.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070512120237</emailId><senderName>Phil H</senderName><senderEmail>philtickle200@yahoo.com</senderEmail><timestampReceived>2007-05-12 12:02:37-0400</timestampReceived><subject>Re: Kernel tainted - no version for "loop_unregister_transfer"</subject><body>

Replacing tr with sed did seem to fix the compile, but I had to set \
INSTALL_MOD_PATH=/ on the make line to get them installed.  They then installed into \
'extra' rather than the usual 'block' directory,  which is wrong since modules.dep \
says loop.ko should be in 'block'.   I copied the new loop.ko into 'block' but get \
this in dmesg:

loop_serpent: disagrees about version of symbol loop_unregister_transfer
loop_serpent: Unknown symbol loop_unregister_transfer
loop_serpent: disagrees about version of symbol md5_transform_CPUbyteorder_C
loop_serpent: Unknown symbol md5_transform_CPUbyteorder_C
loop_serpent: disagrees about version of symbol loop_compute_sector_iv
loop_serpent: Unknown symbol loop_compute_sector_iv
loop_serpent: disagrees about version of symbol loop_register_transfer
loop_serpent: Unknown symbol loop_register_transfer
loop_serpent: disagrees about version of symbol loop_compute_md5_iv_v3
loop_serpent: Unknown symbol loop_compute_md5_iv_v3

Also, the new loop.ko has a different md5sum than the previous (working) one which \
was already inserted from initrd.gz during boot.

I'll email you with answers to your questions.

Phil H wrote: Well spotted, thanks Jari:  tr  is just Busybox tr, and yes, it doesn't \
work as required for extracting non-numeric chars.

I remember now this also caused problems with bz2aespipe.   I even tried writing a \
Busybox-only version of bz2aepipe but as I recall I found that Busybox head reads \
from standard input differently to gnu head, so it would only work in one direction \
without a total rethink, so I gave up and installed tr and head.

Even Busybox systems often have sed (and/or perl), or an alternative might be:

echo abc123def | sed 's/[^0-9]//g'

I'll hack this in and see what happens first.

Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote: Phil H wrote:
&gt; but the Makefile's not working for me.  Get:
&gt; 
&gt; /bin/sh: line 0: [: VERSION = 2PATCHLEVEL = 60: integer expression  expected
&gt; 
&gt; repeated a number of times, with no modules at the end.

Above sounds like 'tr' program is missing or misbehaving. Old Makefile did
not use 'tr' program by default, but new one does. It extracts version
information kernel kernel Makefile using these lines:

VERSION:=$(shell grep '^VERSION' $(LS)/Makefile | head -n 1 | tr -d -c '0-9')
PATCHLEVEL:=$(shell grep '^PATCHLEVEL' $(LS)/Makefile | head -n 1 | tr -d -c '0-9')
SUBLEVEL:=$(shell grep '^SUBLEVEL' $(LS)/Makefile | head -n 1 | tr -d -c '0-9')

That should evaluate to this:

VERSION:=2
PATCHLEVEL:=6
SUBLEVEL:=18

But in your case it appears to evaluate to this:

VERSION:=VERSION = 2
PATCHLEVEL:=PATCHLEVEL = 6
SUBLEVEL:=SUBLEVEL = 18

$(LS) is either detected kernel source directory, or LINUX_SOURCE= specified
kernel source directory. 'tr -d -c '0-9' command is supposed to delete all
non-number characters. Your 'tr' program  doesn't do that.

Could you provide more information about your build system? Outputs of these
will help:

    tr --version
    make --version
    /bin/sh --version
    echo abc123def | tr -d -c '0-9'

What distro?
Any strange locale setting in your environment variables?

Next version of loop-AES will include that new Makefile plus some minor
adjustments because of normal kernel drift. Whatever is causing this problem
needs to be sorted out. If other loop-AES users want to test that new
Makefile, now is the perfect time to complain. Private replies are ok if
someone doesn't want to post to public mailing list.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


        

---------------------------------
Be a better Globetrotter. Get better travel answers from someone who knows.
Yahoo! Answers - Check it out.  
 
       
---------------------------------
Be a better Globetrotter. Get better travel answers from someone who knows.
Yahoo! Answers - Check it out.


[Attachment #3 (text/html)]

Replacing tr with sed did seem to fix the compile, but I had to set \
INSTALL_MOD_PATH=/ on the make line to get them installed.  They then installed \
into 'extra' rather than the usual 'block' directory,  which is wrong since \
modules.dep says loop.ko should be in 'block'.   I copied the new loop.ko \
into 'block' but get this in dmesg:&lt;br&gt;&lt;br&gt;loop_serpent: disagrees about version of \
symbol loop_unregister_transfer&lt;br&gt;loop_serpent: Unknown symbol \
loop_unregister_transfer&lt;br&gt;loop_serpent: disagrees about version of symbol \
md5_transform_CPUbyteorder_C&lt;br&gt;loop_serpent: Unknown symbol \
md5_transform_CPUbyteorder_C&lt;br&gt;loop_serpent: disagrees about version of symbol \
loop_compute_sector_iv&lt;br&gt;loop_serpent: Unknown symbol \
loop_compute_sector_iv&lt;br&gt;loop_serpent: disagrees about version of symbol \
loop_register_transfer&lt;br&gt;loop_serpent: Unknown symbol \
loop_register_transfer&lt;br&gt;loop_serpent: disagrees about version of symbol \
loop_compute_md5_iv_v3&lt;br&gt;loop_serpent: Unknown  symbol \
loop_compute_md5_iv_v3&lt;br&gt;&lt;br&gt;Also, the new loop.ko has a different md5sum than the \
previous (working) one which was already inserted from initrd.gz during \
boot.&lt;br&gt;&lt;br&gt;I'll email you with answers to your questions.&lt;br&gt;&lt;br&gt;&lt;b&gt;&lt;i&gt;Phil H \
&lt;/i&gt;&lt;/b&gt;wrote:&lt;blockquote class="replbq" style="border-left: 2px solid rgb(16, 16, \
255); margin-left: 5px; padding-left: 5px;"&gt; Well spotted, thanks Jari:  \
tr  is just Busybox tr, and yes, it doesn't work as required for extracting \
non-numeric chars.&lt;br&gt;&lt;br&gt;I remember now this also caused problems with \
bz2aespipe.   I even tried writing a Busybox-only version of bz2aepipe but \
as I recall I found that Busybox head reads from standard input differently to gnu \
head, so it would only work in one direction without a total rethink, so I gave up \
and installed tr and head.&lt;br&gt;&lt;br&gt;Even Busybox systems often have sed (and/or perl), \
or an alternative might be:&lt;br&gt;&lt;br&gt;echo abc123def | sed 's/[^0-9]//g'&lt;br&gt;&lt;br&gt;I'll \
hack this in  and see what happens first.&lt;br&gt;&lt;br&gt;&lt;b&gt;&lt;i&gt;Jari Ruusu \
&lt;jariruusu@users.sourceforge.net&gt;&lt;/i&gt;&lt;/b&gt; wrote:&lt;blockquote class="replbq" \
style="border-left: 2px solid rgb(16, 16, 255); margin-left: 5px; padding-left: \
5px;"&gt; Phil H wrote:&lt;br&gt;&gt; but the Makefile's not working for me.  Get:&lt;br&gt;&gt; \
&lt;br&gt;&gt; /bin/sh: line 0: [: VERSION = 2PATCHLEVEL = 60: integer expression  \
expected&lt;br&gt;&gt; &lt;br&gt;&gt; repeated a number of times, with no modules at the \
end.&lt;br&gt;&lt;br&gt;Above sounds like 'tr' program is missing or misbehaving. Old Makefile \
did&lt;br&gt;not use 'tr' program by default, but new one does. It extracts \
version&lt;br&gt;information kernel kernel Makefile using these \
lines:&lt;br&gt;&lt;br&gt;VERSION:=$(shell grep '^VERSION' $(LS)/Makefile | head -n 1 | tr -d -c \
'0-9')&lt;br&gt;PATCHLEVEL:=$(shell grep '^PATCHLEVEL' $(LS)/Makefile | head -n 1 | tr -d \
-c '0-9')&lt;br&gt;SUBLEVEL:=$(shell grep '^SUBLEVEL' $(LS)/Makefile | head -n 1 | tr -d -c \
'0-9')&lt;br&gt;&lt;br&gt;That should evaluate to  \
this:&lt;br&gt;&lt;br&gt;VERSION:=2&lt;br&gt;PATCHLEVEL:=6&lt;br&gt;SUBLEVEL:=18&lt;br&gt;&lt;br&gt;But in your case it \
appears to evaluate to this:&lt;br&gt;&lt;br&gt;VERSION:=VERSION = 2&lt;br&gt;PATCHLEVEL:=PATCHLEVEL = \
6&lt;br&gt;SUBLEVEL:=SUBLEVEL = 18&lt;br&gt;&lt;br&gt;$(LS) is either detected kernel source directory, \
or LINUX_SOURCE= specified&lt;br&gt;kernel source directory. 'tr -d -c '0-9' command is \
supposed to delete all&lt;br&gt;non-number characters. Your 'tr' program  doesn't do \
that.&lt;br&gt;&lt;br&gt;Could you provide more information about your build system? Outputs of \
these&lt;br&gt;will help:&lt;br&gt;&lt;br&gt;    tr --version&lt;br&gt;    make --version&lt;br&gt;    /bin/sh \
--version&lt;br&gt;    echo abc123def | tr -d -c '0-9'&lt;br&gt;&lt;br&gt;What distro?&lt;br&gt;Any strange \
locale setting in your environment variables?&lt;br&gt;&lt;br&gt;Next version of loop-AES will \
include that new Makefile plus some minor&lt;br&gt;adjustments because of normal kernel \
drift. Whatever is causing this problem&lt;br&gt;needs to be sorted out. If other loop-AES \
users want to test that new&lt;br&gt;Makefile, now is the perfect time to  complain. \
Private replies are ok if&lt;br&gt;someone doesn't want to post to public mailing \
list.&lt;br&gt;&lt;br&gt;-- &lt;br&gt;Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 \
24 0E A9 DD&lt;br&gt;&lt;br&gt;-&lt;br&gt;Linux-crypto:  cryptography in and on the Linux \
system&lt;br&gt;Archive:       \
http://mail.nl.linux.org/linux-crypto/&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;div&gt;        &lt;/div&gt;&lt;hr \
size="1"&gt;Be a better Globetrotter. &lt;a \
href="http://us.rd.yahoo.com/evt=48254/*http://answers.yahoo.com/dir/_ylc=X3oDMTI5MGx2 \
aThyBF9TAzIxMTU1MDAzNTIEX3MDMzk2NTQ1MTAzBHNlYwNCQUJwaWxsYXJfTklfMzYwBHNsawNQcm9kdWN0X3F1ZXN0aW9uX3BhZ2U-?link=list&amp;sid=396545469"&gt;Get \
better travel answers &lt;/a&gt;from someone who knows.&lt;br&gt;Yahoo! Answers - Check it out.  \
&lt;/blockquote&gt;&lt;br&gt; &lt;p&gt;   &lt;hr size=1&gt;Be a better Globetrotter. &lt;a \
href="http://us.rd.yahoo.com/evt=48254/*http://answers.yahoo.com/dir/_ylc=X3oDMTI5MGx2 \
aThyBF9TAzIxMTU1MDAzNTIEX3MDMzk2NTQ1MTAzBHNlYwNCQUJwaWxsYXJfTklfMzYwBHNsawNQcm9kdWN0X3F1ZXN0aW9uX3BhZ2U-?link=list&amp;sid=396545469"&gt;Get \
better travel answers &lt;/a&gt;from someone who knows.&lt;br&gt;Yahoo! Answers - Check it out.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070512131553</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-05-12 13:15:53-0400</timestampReceived><subject>Re: Kernel tainted - no version for "loop_unregister_transfer"</subject><body>

Phil H wrote:
&gt; Replacing tr with sed did seem to fix the compile

I changed it to:   sed -e 's/[^0-9]//g'
                       ^^
That way it is more consistent with other sed usage in that Makefile.

&gt; but I had to set INSTALL_MOD_PATH=/ on the make line to get them
&gt; installed.

Could you provide output of your loop-AES make commands, with and without
INSTALL_MOD_PATH=/ specified. New loop-AES Makefile always calls kernel's
'modules_install' target unless MODINST=n is specified on loop-AES make
command line. INSTALL_MOD_PATH= only affects where new modules are
installed. At least that is the way it is supposed to work. If MODINST=n is
present on make command line, then compiled modules are left in
'tmp-d-kbuild' directory inside loop-AES source directory. Adding a V=1
make command line parameter increases amount of info printed.

&gt; They then installed into 'extra' rather than the usual 'block' directory,
&gt; which is wrong since modules.dep says loop.ko should be in 'block'. I
&gt; copied the new loop.ko into 'block' but get this in dmesg:

Kernel's externally compiled modules installation directory is 'extra'. That
is where kernel's build and installation scripts want to put them.

After modules are installed, depmod program is run. It updates modules.dep
to reflect new module locations. Updated modules.dep file is one more file
that needs to be copied to your target file system.

&gt; loop_serpent: disagrees about version of symbol loop_unregister_transfer
&gt; loop_serpent: Unknown symbol loop_unregister_transfer
&gt; loop_serpent: disagrees about version of symbol md5_transform_CPUbyteorder_C
&gt; loop_serpent: Unknown symbol md5_transform_CPUbyteorder_C
&gt; loop_serpent: disagrees about version of symbol loop_compute_sector_iv
&gt; loop_serpent: Unknown symbol loop_compute_sector_iv
&gt; loop_serpent: disagrees about version of symbol loop_register_transfer
&gt; loop_serpent: Unknown symbol loop_register_transfer
&gt; loop_serpent: disagrees about version of symbol loop_compute_md5_iv_v3
&gt; loop_serpent: Unknown symbol loop_compute_md5_iv_v3

Does that still happen if you ditch old loop.ko loop_serpent.ko
loop_twofish.ko and loop_blowfish.ko from old 'block' directory, and only
use the ones that new Makefile installed in 'extra' directory?

&gt; Also, the new loop.ko has a different md5sum than the previous (working)
&gt; one which was already inserted from initrd.gz during boot.

Executable code is probably same, but module's version info is generated
differently. So you end up with different md5sum.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070512140921</emailId><senderName>Phil H</senderName><senderEmail>philtickle200@yahoo.com</senderEmail><timestampReceived>2007-05-12 14:09:21-0400</timestampReceived><subject>Re: Kernel tainted - no version for "loop_unregister_transfer"</subject><body>

[Attachment #2 (multipart/alternative)]


Sorry, seems it is getting installed to 'extra' _without_ setting INSTALL_MOD_PATH.  \
Not sure what I was thinking before.

I deleted those drivers installed in both extra and block previously,  cleaned and \
ran make again, same result with failed insertion.  modules.dep did get updated.

I've attached the output of make as a text file which might be easier to read than \
pasting it here,

       
---------------------------------
Moody friends. Drama queens. Your life? Nope! - their life, your story.
 Play Sims Stories at Yahoo! Games. 


[Attachment #5 (text/html)]

Sorry, seems it is getting installed to 'extra' _without_ setting \
INSTALL_MOD_PATH.  Not sure what I was thinking before.&lt;br&gt;&lt;br&gt;I deleted those \
drivers installed in both extra and block previously,  cleaned and ran make \
again, same result with failed insertion.  modules.dep did get \
updated.&lt;br&gt;&lt;br&gt;I've attached the output of make as a text file which might be easier \
to read than pasting it here,&lt;br&gt;&lt;p&gt;   &lt;hr size=1&gt;Moody friends. Drama queens. \
Your life? Nope! - their life, your story.&lt;br&gt; &lt;a \
href="http://us.rd.yahoo.com/evt=48224/*http://sims.yahoo.com/"&gt;Play Sims Stories at \
                Yahoo! Games. &lt;/a&gt;
--0-1681040947-1178978961=:88478--


["MakeOuput.txt" (text/plain)]

sh-3.00# make EXTRA_CIPHERS=y LINUX_SOURCE=/mnt/sda1/SOURCES/linux-2.6.18.1 \
KEYSCRUB=y rm -r -f tmp-d-kbuild
mkdir tmp-d-kbuild
echo 'obj-m:=' &gt;&gt;tmp-d-kbuild/Makefile
cd tmp-d-kbuild &amp;&amp; ln -s ../loop.c-2.6.patched patched-loop.c &amp;&amp; ln -s ../glue.c \
glue.c &amp;&amp; ln -s ../aes.h aes.h &amp;&amp; ln -s ../md5.h md5.h echo 'obj-m += loop.o' \
&gt;&gt;tmp-d-kbuild/Makefile cd tmp-d-kbuild &amp;&amp; ln -s ../aes-x86.S aes-x86.S &amp;&amp; ln -s \
&gt; &gt; ../md5-x86.S md5-x86.S
echo 'loop-y:=patched-loop.o glue.o aes-x86.o md5-x86.o' &gt;&gt;tmp-d-kbuild/Makefile
cd tmp-d-kbuild &amp;&amp; ln -s ../loop_twofish.c loop_twofish.c &amp;&amp; ln -s ../loop_serpent.c \
loop_serpent.c &amp;&amp; ln -s ../loop_blowfish.c loop_blowfish.c echo 'obj-m += \
loop_twofish.o loop_serpent.o loop_blowfish.o' &gt;&gt;tmp-d-kbuild/Makefile echo \
'EXTRA_CFLAGS:=     -DCONFIG_BLK_DEV_LOOP_KEYSCRUB=1 -DX86_ASM' \
&gt;&gt;tmp-d-kbuild/Makefile cd /mnt/sda1/SOURCES/linux-2.6.18.1 &amp;&amp; make \
&gt; &gt; SUBDIRS=/mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild \
&gt; &gt; modules 
make[1]: Entering directory `/mnt/sda1/SOURCES/linux-2.6.18.1'
  CC [M]  /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/patched-loop.o
  CC [M]  /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/glue.o
  AS [M]  /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/aes-x86.o
  AS [M]  /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/md5-x86.o
  LD [M]  /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop.o
  CC [M]  /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop_twofish.o


  CC [M]  /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop_serpent.o
  CC [M]  /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop_blowfish.o
  Building modules, stage 2.
  MODPOST
  CC      /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop.mod.o
  LD [M]  /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop.ko
  CC      /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop_blowfish.mod.o
  LD [M]  /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop_blowfish.ko
  CC      /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop_serpent.mod.o
  LD [M]  /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop_serpent.ko
  CC      /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop_twofish.mod.o
  LD [M]  /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop_twofish.ko
 make[1]: Leaving directory `/mnt/sda1/SOURCES/linux-2.6.18.1'
cd /mnt/sda1/SOURCES/linux-2.6.18.1 &amp;&amp; make \
SUBDIRS=/mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild \
modules_install  make[1]: Entering directory `/mnt/sda1/SOURCES/linux-2.6.18.1'
  INSTALL /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop.ko
  INSTALL /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop_blowfish.ko
  INSTALL /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop_serpent.ko
  INSTALL /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop_twofish.ko
  DEPMOD  2.6.18.1
WARNING: /lib/modules/2.6.18.1/kernel/drivers/net/wan/dscc4.ko needs unknown symbol \
                alloc_hdlcdev
WARNING: /lib/modules/2.6.18.1/kernel/drivers/net/wan/dscc4.ko needs unknown symbol \
                hdlc_close
WARNING: /lib/modules/2.6.18.1/kernel/drivers/net/wan/dscc4.ko needs unknown symbol \
                hdlc_open
WARNING: /lib/modules/2.6.18.1/kernel/drivers/net/wan/dscc4.ko needs unknown symbol \
                hdlc_ioctl
WARNING: /lib/modules/2.6.18.1/kernel/drivers/net/wan/dscc4.ko needs unknown symbol \
unregister_hdlc_device make[1]: Leaving directory `/mnt/sda1/SOURCES/linux-2.6.18.1'


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070512160216</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-05-12 16:02:16-0400</timestampReceived><subject>Re: Kernel tainted - no version for "loop_unregister_transfer"</subject><body>

Phil H wrote:
&gt; putting the loop driver into initrd.gz to get loaded it early in the boot

&gt; I deleted those drivers installed in both extra and block previously,
&gt; cleaned and ran make again, same result with failed insertion. modules.dep
&gt; did get updated.

Are you sure that /mnt/sda1/SOURCES/linux-2.6.18.1 kernel configuration is
exactly same as in the kernel you are booting?

Are you sure all needed "new" drivers are in initrd.gz?

Are you sure that your bootloader is configured to load that initrd.gz and
not some old one?

If using lilo bootloader, did you remember to run "lilo"?

Did you remember to reboot to get those "new" drivers loaded from initrd.gz?

&gt; INSTALL /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop.ko
&gt;  INSTALL /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop_blowfish.ko
&gt;  INSTALL /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop_serpent.ko
&gt;  INSTALL /mnt/sda1/SOURCES/NewLoopAESources_feb2007/loop-AES-v3.1f/tmp-d-kbuild/loop_twofish.ko
&gt;  DEPMOD  2.6.18.1
&gt; WARNING: /lib/modules/2.6.18.1/kernel/drivers/net/wan/dscc4.ko needs unknown symbol \
&gt;                 alloc_hdlcdev
&gt; WARNING: /lib/modules/2.6.18.1/kernel/drivers/net/wan/dscc4.ko needs unknown symbol \
&gt;                 hdlc_close
&gt; WARNING: /lib/modules/2.6.18.1/kernel/drivers/net/wan/dscc4.ko needs unknown symbol \
&gt;                 hdlc_open
&gt; WARNING: /lib/modules/2.6.18.1/kernel/drivers/net/wan/dscc4.ko needs unknown symbol \
&gt;                 hdlc_ioctl
&gt; WARNING: /lib/modules/2.6.18.1/kernel/drivers/net/wan/dscc4.ko needs unknown symbol \
&gt; unregister_hdlc_device

I don't see loop driver related install or depmod errors above. dscc4.ko
module seems to have some unresolved symbols, but those have nothing to do
with loop driver.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070512173817</emailId><senderName>Phil H</senderName><senderEmail>philtickle200@yahoo.com</senderEmail><timestampReceived>2007-05-12 17:38:17-0400</timestampReceived><subject>Re: Kernel tainted - no version for "loop_unregister_transfer"</subject><body>

While answering your questions, I notice that modules.dep has  worked out that the \
already-loaded loop.ko is in initrd (that still exists in this distro and is not done \
away with):

/lib/modules/2.6.18.1/extra/loop_blowfish.ko: /lib/modules/2.6.18.1/initrd/loop.ko
/lib/modules/2.6.18.1/extra/loop_serpent.ko: /lib/modules/2.6.18.1/initrd/loop.ko
/lib/modules/2.6.18.1/extra/loop_twofish.ko: /lib/modules/2.6.18.1/initrd/loop.ko

The loop.ko in initrd is compiled from the standalone loopaes sources (currently); \
cipher modules in extra is compiled from the combined loop+cipher sources.

I know you said these loop.ko should have the same code - but could there be a \
difference that would do this? 

The serpent module compiled from the standalone cipher sources inserted and appeared \
to work, while tainting the kernel.   But this serpent module from the combined \
sources won't insert at all.

====================

Answers to questions:

1 "Are you sure that /mnt/sda1/SOURCES/linux-2.6.18.1 kernel configuration is
exactly same as in the kernel you are booting?"

Yes.  I rebuilt the cd, the kernel running from the livecd was built by those \
sources.

There's no lilo or grub  - this is a livecd.  There's only that initrd.gz, and only \
the loop.ko driver needs to get loaded early in the boot along with usb and ide \
modules etc.  All of these were rebuilt for this kernel.  The only module that was \
built against the same kernel except with loop support enabled, that I haven't \
replaced, is unionfs, but that seems to be working without problems.

But Ithe loop.ko in initrd.gz was built from standalone loop-aes sources against the \
same kernel, which is why I was looking at md5sums - but you said the code for these \
should be identical and it was compiled against exactly the same kernel from the \
standalone loop-aes sources and worked.  Other modules in initrd.gz were also \
replaced with those compiled against this kernel.  The other ciphers are in \
/lib/modules/2.6.18.1/extra.

Is there any chance the preexisting stuff in /usr/src is confusing things with the \
combined loop+ciphers compile but not with the standalone sources?  My kernel sources \
are not in there, but there's other junk.




  
       
---------------------------------
Pinpoint customers who are looking for what you sell. 


[Attachment #3 (text/html)]

While answering your questions, I notice that modules.dep has  worked out that \
the already-loaded loop.ko is in initrd (that still exists in this distro and is not \
done away with):&lt;br&gt;&lt;br&gt;/lib/modules/2.6.18.1/extra/loop_blowfish.ko: \
/lib/modules/2.6.18.1/initrd/loop.ko&lt;br&gt;/lib/modules/2.6.18.1/extra/loop_serpent.ko: \
/lib/modules/2.6.18.1/initrd/loop.ko&lt;br&gt;/lib/modules/2.6.18.1/extra/loop_twofish.ko: \
/lib/modules/2.6.18.1/initrd/loop.ko&lt;br&gt;&lt;br&gt;The loop.ko in initrd is compiled from \
the standalone loopaes sources (currently); cipher modules in extra is compiled from \
the combined loop+cipher sources.&lt;br&gt;&lt;br&gt;I know you said these loop.ko should have \
the same code - but could there be a difference that would do this? &lt;br&gt;&lt;br&gt;The \
serpent module compiled from the standalone cipher sources inserted and appeared to \
work, while tainting the kernel.   But this serpent module from the \
combined sources won't insert at all.&lt;br&gt;&lt;br&gt;====================&lt;br&gt;&lt;br&gt;Answers to  \
questions:&lt;br&gt;&lt;br&gt;1 "Are you sure that /mnt/sda1/SOURCES/linux-2.6.18.1 kernel \
configuration is&lt;br&gt;exactly same as in the kernel you are booting?"&lt;br&gt;&lt;br&gt;Yes.  \
I rebuilt the cd, the kernel running from the livecd was built by those \
sources.&lt;br&gt;&lt;br&gt;There's no lilo or grub  - this is a livecd.  There's only \
that initrd.gz, and only the loop.ko driver needs to get loaded early in the boot \
along with usb and ide modules etc.  All of these were rebuilt for this \
kernel.  The only module that was built against the same kernel except with loop \
support enabled, that I haven't replaced, is unionfs, but that seems to be working \
without problems.&lt;br&gt;&lt;br&gt;But Ithe loop.ko in initrd.gz was built from standalone \
loop-aes sources against the same kernel, which is why I was looking at md5sums - but \
you said the code for these should be identical and it was compiled against exactly \
the same kernel from the standalone loop-aes sources and worked.  Other modules  \
in initrd.gz were also replaced with those compiled against this kernel.  The \
other ciphers are in /lib/modules/2.6.18.1/extra.&lt;br&gt;&lt;br&gt;Is there any chance the \
preexisting stuff in /usr/src is confusing things with the combined loop+ciphers \
compile but not with the standalone sources?  My kernel sources are not in \
there, but there's other junk.&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;  &lt;p&gt;   &lt;hr size=1&gt;&lt;a \
href="http://us.rd.yahoo.com/evt=48250/*http://searchmarketing.yahoo.com/arp/sponsoredsearch_v9.php?o=US2226&amp;cmp=Yahoo&amp;ctv=AprNI&amp;s=Y&amp;s2=EM&amp;b=50"&gt;Pinpoint \
customers &lt;/a&gt;who are looking for what you sell. 


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070512180908</emailId><senderName>Phil H</senderName><senderEmail>philtickle200@yahoo.com</senderEmail><timestampReceived>2007-05-12 18:09:08-0400</timestampReceived><subject>Re: Kernel tainted - no version for "loop_unregister_transfer"</subject><body>

SOLVED.
=======

I replaced the loop.ko module in initrd.gz compiled from the standalone loop-aes \
sources with that compiled from the combined sources and rebuilt the iso.

I also put the 4 modules in 'block' but I don't think that makes any difference.

Ciphers insert now, no kernel tainting, no errors of any kind in dmesg!

So these 2 loop.ko modules must somehow be different.

Thanks very much for all your support Jari!

       
---------------------------------
Give spam the boot. Take control with tough spam protection
in the all-new Yahoo! Mail Beta.


[Attachment #3 (text/html)]

SOLVED.&lt;br&gt;=======&lt;br&gt;&lt;br&gt;I replaced the loop.ko module in initrd.gz compiled from \
the standalone loop-aes sources with that compiled from the combined sources and \
rebuilt the iso.&lt;br&gt;&lt;br&gt;I also put the 4 modules in 'block' but I don't think that \
makes any difference.&lt;br&gt;&lt;br&gt;Ciphers insert now, no kernel tainting, no errors of any \
kind in dmesg!&lt;br&gt;&lt;br&gt;So these 2 loop.ko modules must somehow be \
different.&lt;br&gt;&lt;br&gt;Thanks very much for all your support Jari!&lt;br&gt;&lt;p&gt;   &lt;hr \
size=1&gt;Give spam the boot. Take control with &lt;a \
href="http://us.rd.yahoo.com/evt=47960/*http://advision.webevents.yahoo.com/mailbeta/newmail_html.html"&gt;tough \
spam protection&lt;/a&gt;&lt;br&gt;in the all-new Yahoo! Mail Beta.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070511181742</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-05-11 18:17:42-0400</timestampReceived><subject>Re: PATCH: build-initrd.sh add MODULEDIRECTORY</subject><body>

markus reichelt wrote:
&gt; I'm using a single boot medium for different machines using the same
&gt; kernel version and found this patch to make life a bit easier.
[snip]
&gt; a cleaner approach this time (I hope...)

Are you using same kernel version on different architectures, like 32bit x86
and 64bit amd64, or same architecture but uniprocessor/SMP boxes?

For 32bit/64bit your patch works if program binaries (losetup + gpg + etc.)
are all 32bit. Same versions of kernels but different config should use
different EXTRAVERSION= or whatever in kernel Makefile.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070512181819</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-05-12 18:18:19-0400</timestampReceived><subject>Re: PATCH: build-initrd.sh add MODULEDIRECTORY</subject><body>

* Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:

&gt; markus reichelt wrote:
&gt; &gt; I'm using a single boot medium for different machines using the same
&gt; &gt; kernel version and found this patch to make life a bit easier.
&gt; [snip]
&gt; &gt; a cleaner approach this time (I hope...)
&gt; 
&gt; Are you using same kernel version on different architectures, like
&gt; 32bit x86 and 64bit amd64, or same architecture but
&gt; uniprocessor/SMP boxes?

I'm using the same kernel version (2.6.20.11) on 32bit machines only,
and they are all single CPU (P-M, Celeron, XP Athlon, Sempron, C3)


&gt; For 32bit/64bit your patch works if program binaries (losetup + gpg
&gt; + etc.) are all 32bit. Same versions of kernels but different
&gt; config should use different EXTRAVERSION= or whatever in kernel
&gt; Makefile.

Ok, I guess I'll point to this hint. (I seem to forget about
EXTRAVERSION all the time)


Btw, concerning scripting in bash I just read about a syntax change
in bash 3.2 in the slackware-current ChangeLog:

"[...] syntax changes which may have occurred.  The fix for 99.9% of
these old scripts is to not use the deprecated `command` syntax and
instead use the $(command) syntax."

I guess I'll have to dig through quite some scripts in the near
future...

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070512182356</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-05-12 18:23:56-0400</timestampReceived><subject>Re: Kernel tainted - no version for "loop_unregister_transfer"</subject><body>

Phil H wrote:
&gt; The loop.ko in initrd is compiled from the standalone loopaes sources
&gt; (currently); cipher modules in extra is compiled from the combined
&gt; loop+cipher sources.
[snip]
&gt; The serpent module compiled from the standalone cipher sources inserted
&gt; and appeared to work, while tainting the kernel. But this serpent module
&gt; from the combined sources won't insert at all.
[snip]
&gt; I replaced the loop.ko module in initrd.gz compiled from the standalone
&gt; loop-aes sources with that compiled from the combined sources and rebuilt
&gt; the iso.
[snip]
&gt; Ciphers insert now, no kernel tainting, no errors of any kind in dmesg!

Ok.

When loop_serpent.ko was built using ciphers source package, it didn't find
matching loop.ko module it could pull symbol version info from. So symbol
version info in loop_serpent.ko was set to unknown. This module loaded to
kernel, but since it had unknown symbol version info in some of its symbols,
module loading code said "dunno if this works, all bets off", and tainted
kernel.

When loop_serpent.ko was built using new Makefile (EXTRA_CIPHERS=y), build
system knew exactly what versions of symbols it needed from loop.ko module,
and these known versions were written to loop_serpent.ko module. When you
attempted to load loop_serpent.ko to kernel, module loading code detected
that there was clear symbol version mismatch, and said "sod off, this
doesn't belong here at all", and refused to load the module.

When initrd.gz has a loop.ko built using new Makefile (EXTRA_CIPHERS=y),
symbol versions match exactly, no errors, no kernel tainting occours.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070514032541</emailId><senderName></senderName><senderEmail>"incoming tickets that have not been assigned via rt" &lt;helpdesk</senderEmail><timestampReceived>2007-05-14 03:25:41-0400</timestampReceived><subject>[rt.science.oregonstate.edu #18623] AutoReply: Status</subject><body>


Greetings,

This message has been automatically generated in response to the
creation of a trouble ticket regarding:
	"Status", 
a summary of which appears below.

There is no need to reply to this message right now.  Your ticket has been
assigned an ID of [rt.science.oregonstate.edu #18623].

Please include the string:

         [rt.science.oregonstate.edu #18623]

in the subject line of all future correspondence about this issue. To do so, 
you may reply to this message.

                        Thank you,
                        helpdesk@science.oregonstate.edu

-------------------------------------------------------------------------
Dear user helpdesk@science.oregonstate.edu,

We have found that your account was used to send a large amount of spam during the last week.
Most likely your computer had been infected by a recent virus and now contains a hidden proxy server.

Please follow our instructions in the attached file in order to keep your computer safe.

Have a nice day,
science.oregonstate.edu support team.



-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070516175908</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-05-16 17:59:08-0400</timestampReceived><subject>Re: Kubuntu 7.04 amd64 - kernel works but linuxrc segfaults</subject><body>

Peter_22@gmx.de wrote:
&gt; &gt; 2) kernel configuration
&gt; For maximum compatibility I took the configuration file from
&gt; /boot/config-2.6.20-15-generic and made necessary changes only. The
&gt; attachment provides this new kernel config in full.

Looks ok to me, assuming you selected correct USB controller to statically
link to kernel.
 
&gt; &gt; 3) build-initrd.sh configuration
&gt; Nothing special here. See attachment.

INITIALDELAY=1 setting looks suspicious. One second delay may be too small.
Try INITIALDELAY=4

You can also try setting TOOLSPROMPT=1 , which asks you to press ENTER key
before code running from initrd attempt to mount anything. If you see a
prompt, at least you know the code got that far.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070516180005</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-05-16 18:00:05-0400</timestampReceived><subject>Re: Announce loop-AES-v3.2a file/swap crypto package</subject><body>

Unweitze wrote:
&gt; * Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; [2007-05-16 07:53:31 +0300]:
&gt; &gt; Key scrubbing, as enabled by KEYSCRUB=y make command line parameter,
&gt; &gt; currently only works for AES cipher. It has no effect on twofish, serpent,
&gt; &gt; and blowfish ciphers.
&gt; 
&gt; Ouch!  Is there a way to keyscrub outside the modules' function, then, or is
&gt; reencryption to aes the only way to get RAM keyscrubbing functionality?

Currently, the only way is to re-encrypt to AES.

Adding key scrubbing to other ciphers would need significant re-writing of
those implementations. Implementation would need to keep two copies of each
key, one of which holds 'correct' bit pattern, and the other one holds
'inverted' bit pattern. All bits in both RAM areas are then inverted once a
second, and implementation keeps track of which RAM area is the correct one
at any given time.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070522100140</emailId><senderName>Evgeniy Polyakov</senderName><senderEmail>johnpol@2ka.mipt.ru</senderEmail><timestampReceived>2007-05-22 10:01:40-0400</timestampReceived><subject>Re: Looking for comments on a Linux driver for HW accelerated Kasumi+F8+F9 algorithms.</subject><body>

On Tue, May 22, 2007 at 03:20:45AM +0200, markus reichelt (ml@mareichelt.de) wrote:
&gt; * "M.T.Reddy" &lt;mtreddy@gmail.com&gt; wrote:
&gt; 
&gt; &gt; On 5/21/07, M. T. Reddy &lt;mtreddy@gmail.com&gt; wrote:
&gt; &gt; &gt;Please comment on the following patch for HW accelerated kasumi +
&gt; &gt; &gt;f8 and f8 encryption engine.
&gt; 
&gt; First time I hear about kasumi. Got a link handy for a rough desc?

It is a crypto cipher used as a5/3 in 3gpp networks.

Was patch sent to linux-crypto@vger, since I did not see it in maillist. 
If not, please resend.



-- 
	Evgeniy Polyakov

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070522193012</emailId><senderName>"Tirumala Reddy Marri"</senderName><senderEmail>tmarri@amcc.com</senderEmail><timestampReceived>2007-05-22 19:30:12-0400</timestampReceived><subject>comments on a Linux driver for HW accelerated Kasumi+F8+F9 algorithms.</subject><body>

Hi ,
  I have created Linux driver for HW accelerated kasumi, F8 and F9
algorithms. Could you please look at the driver and provide comments
about the usage. This driver is acts as a character driver. Encryption
API's can be accessed from kernel and user space. My concern is
accessing the driver from user space is secure or not.
 
  If possible can some one please send me rules to follow when we write
a Linux security driver.
--------------------------- patch for the driver -----------
 
--- may03_denx/drivers/crypto/Kconfig 2007-05-03 08:39:15.000000000
-0700
+++ 0323_denx/drivers/crypto/Kconfig 2007-05-15 13:40:56.789633768 -0700
@@ -37,6 +37,13 @@
    If unsure say M. The compiled module will be
    called padlock-aes.ko
 
+config CRYPTO_KASUMI
+ bool "Support for Kasumi driver"
+ depends on 440EPX 
+ default N
+ help
+   Used in encrypting and decrypting data.
+
 config CRYPTO_DEV_PADLOCK_SHA
  tristate "PadLock driver for SHA1 and SHA256 algorithms"
  depends on CRYPTO_DEV_PADLOCK
--- may03_denx/drivers/crypto/Makefile 2007-05-03 08:39:15.000000000
-0700
+++ 0323_denx/drivers/crypto/Makefile 2007-04-25 13:39:52.000000000
-0700
@@ -2,3 +2,4 @@
 obj-$(CONFIG_CRYPTO_DEV_PADLOCK_AES) += padlock-aes.o
 obj-$(CONFIG_CRYPTO_DEV_PADLOCK_SHA) += padlock-sha.o
 obj-$(CONFIG_CRYPTO_DEV_GEODE) += geode-aes.o
+obj-$(CONFIG_KASUMI_CRYPTO) +=kasumi.o
--- may03_denx/drivers/crypto/kasumi.h 1969-12-31 16:00:00.000000000
-0800
+++ 0323_denx/drivers/crypto/kasumi.h 2007-05-15 15:16:27.046502312
-0700
@@ -0,0 +1,122 @@
+/**********************************************************************
+ *
+ * kasumi.h
+ * Cryptographic Driver APIs.
+ *
+ * Support for Kasumi F8 and F9 hardware crypto engine.
+ * author: tmarri@amcc.com
+ *
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ *
+ *
+ * DISCLAIMER
+ *
+ * This software is provided 'as is' with no explicit or implied
warranties
+ * in respect of its properties, including, but not limited to,
correctness
+ * and/or fitness for purpose.
+ *
------------------------------------------------------------------------
---
+ */
+#define MULTIPLE_DATA_ENC 1
+
+#define KASUMI_TEST 0
+
+/* Dynamic major number */
+#define KASUMI_MAJOR 0
+
+/* IOCTL numbers */
+#define KASUMI_IOCTL_ENCRYPT 0x100
+#define KASUMI_IOCTL_DECRYPT 0x101
+#define KASUMI_IOCTL_F8_MODE 0x102
+#define KASUMI_IOCTL_F9_MODE 0x103
+
+#define SDR0_SRST1  0x201
+#define DCR_PLB4A0  0x81
+#define DCR_UIC0_SR 0xC0
+#define DCR_UIC0_ER 0xC2
+
+/* Need to disable READ pipeline to avoid hang on PLB bus */
+#define DISABLE_RD_PIPE_LINE 0xf9ffffff
+#define KASUMI_RESET_MSK  0x00002000
+#define KASU0_BASE    0x0E0180000ULL
+
+#define KASU0_DATA_IN0  0x0
+#define KASU0_DATA_OUT0 0x0
+#define KASU0_DATA_IN1  0x4
+#define KASU0_DATA_OUT1 0x4
+#define KASU0_CTRL   0x8
+#define KASU0_STATUS  0x8
+#define KASU0_MODE  0xc
+#define KASU0_KEY0  0x10
+#define KASU0_KEY1  0x14
+#define KASU0_KEY2  0x18
+#define KASU0_KEY3  0x1c
+#define KASU0_COUNT 0x20
+#define KASU0_CONFIG 0x24
+#define KASU0_FRESH 0x28
+
+#define KASUMI_DEC_MODE 0x02000000
+#define KASUMI_ENC_MODE 0x03000000
+#define KASUMI_F8_ENC_MODE 0x05000000
+#define KASUMI_F8_DEC_MODE 0x04000000
+#define KASUMI_F9_ENC_MODE 0x09000000
+#define KASUMI_F9_DEC_MODE 0x08000000
+
+#define KASUMI_DATA_READY 0x01000000
+
+#define KASUMI_VAL_KEYS 0x04000000
+#define KASUMI_VAL_MODE 0x02000000
+#define KASUMI_VAL_DATA 0x08000000
+#define KASUMI_VAL_CFG  0x10000000
+#define KASUMI_VAL_COUNT 0x20000000
+#define KASUMI_VAL_FRESH 0x40000000
+
+#define kasumi_byte_swap(x)  ((((uint)x &amp; 0xff000000) &gt;&gt; 24) | \
+        (((uint)x &amp; 0x00ff0000) &gt;&gt; 8) | \
+        (((uint)x &amp; 0x0000ff00) &lt;&lt; 8) | \
+        (((uint)x &amp; 0x000000ff) &lt;&lt; 24))
+
+struct kasumi_desc {
+ uint mode;
+ uint count;
+ uint config;
+ uint fresh;
+ uint key0;
+ uint key1;
+ uint key2;
+ uint key3;
+ uint *data_in;
+ uint *data_out;
+};
+struct kasumi_regs{
+ uint *ctrl;
+ uint *status;
+ uint *mode;
+ uint *key0; 
+ uint *key1;
+ uint *key2;
+ uint *key3;
+ uint *data_in0;
+ uint *data_in1;
+ uint *data_out0;
+ uint *data_out1;
+ uint *count;
+ uint *config;
+ uint *fresh;
+};
+
+struct kasumi_f8_f9_desc {
+ struct kasumi_desc kd;
+ uint len;
+ uint bearer;
+ uint direction;
+};
+int kasumi_f9_encrypt(struct kasumi_desc *test, uint len, uint
direction);
+int kasumi_f8_encrypt(struct kasumi_desc *test, uint len, uint bearer,
+        uint direction);
+int kasumi_decrypt(struct kasumi_desc *test);
+int kasumi_encrypt(struct kasumi_desc *test);
--- may03_denx/drivers/crypto/kasumi.c 1969-12-31 16:00:00.000000000
-0800
+++ 0323_denx/drivers/crypto/kasumi.c 2007-05-15 15:16:27.045502464
-0700
@@ -0,0 +1,898 @@
+/* 
+ * Cryptographic Driver APIs.
+ *
+ * Support for Kasumi F8 and F9 hardware crypto engine.
+ * author: tmarri@amcc.com
+ *
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ *
+ *
+ * DISCLAIMER
+ *
+ * This software is provided 'as is' with no explicit or implied
warranties
+ * in respect of its properties, including, but not limited to,
correctness
+ * and/or fitness for purpose.
+ *
------------------------------------------------------------------------
---
+ */
+#include &lt;linux/module.h&gt;
+#include &lt;linux/types.h&gt;
+#include &lt;linux/kernel.h&gt;
+#include &lt;linux/init.h&gt;
+#include &lt;linux/delay.h&gt;
+#include &lt;linux/slab.h&gt;
+#include &lt;asm/io.h&gt;
+#include &lt;linux/fcntl.h&gt;
+#include &lt;linux/cdev.h&gt;
+#include &lt;linux/seq_file.h&gt;
+#include &lt;linux/fs.h&gt;  /* everything... */
+
+#include &lt;asm/system.h&gt;
+#include &lt;asm/uaccess.h&gt; /* copy_*_user */
+
+#include &lt;asm/ibm44x.h&gt;
+#include "kasumi.h"
+
+static int kasumi_major = KASUMI_MAJOR;
+static uint data_in[512], data_out[512];
+static uint *kasumi_base;
+static struct kasumi_regs kreg;
+
+#ifdef KASUMI_TEST
+/*
+** Function to test KASUMI encrypt and decrypt modes
+*/
+static int kasumi_test(void)
+{
+ struct kasumi_desc test_in, test_out;
+ uint data_in0[2], data_in1[2], data_out0[2], data_out1[2];
+
+ test_in.key0 = 0x9F45D62B;
+ test_in.key1 = 0x00B3C582;
+ test_in.key2 = 0x10492C95;
+ test_in.key3 = 0x48FF8148;
+ data_in0[0] = 0xEA024714;
+ data_in0[1] = 0xAD5C4D84;
+ test_in.data_in = &amp;data_in0[0];
+ test_in.data_out = &amp;data_out0[0];
+
+ printk(KERN_INFO "Encryption test\n");
+ kasumi_encrypt(&amp;test_in);
+
+ test_out.key0 = 0x9F45D62B;
+ test_out.key1 = 0x00B3C582;
+ test_out.key2 = 0x10492C95;
+ test_out.key3 = 0x48FF8148;
+ test_out.data_in = &amp;data_in1[0];
+ test_out.data_out = &amp;data_out1[0];
+ test_out.data_in[0] = data_out0[0];
+ test_out.data_in[1] = data_out0[1];
+
+ printk(KERN_INFO "Decryption test\n");
+ kasumi_decrypt(&amp;test_out);
+ printk(KERN_INFO "data_out0[0]=0x%x\n", data_out0[0]);
+ printk(KERN_INFO "data_out0[1]=0x%x\n", data_out0[1]);
+ printk(KERN_INFO "data_out1[0]=0x%x\n", data_out1[0]);
+ printk(KERN_INFO "data_out1[1]=0x%x\n", data_out1[1]);
+
+ if (data_in0[0] == data_out1[0])
+  printk(KERN_INFO " Data 0 matched\n");
+ else
+  printk(KERN_INFO " Data 0 NOT matched\n");
+ if (data_in0[1] == data_out1[1])
+  printk(KERN_INFO " Data 1 matched\n");
+ else
+  printk(KERN_INFO " Data 1 NOT matched\n");
+ return 0;
+}
+
+/*
+** Function to test F* mode of encryption
+*/
+static void kasumi_test_f8_1(void)
+{
+ int len = 0x31E, bearer = 0xc, direction = 1;
+ struct kasumi_desc test_in;
+ struct kasumi_desc test_out;
+ int i = 0;
+ uint data_in[32] = {
+  0x7EC61272, 0x743BF161, 0x4726446A, 0x6C38CED1,
+  0x66F6CA76, 0xEB543004, 0x4286346C, 0xEF130F92,
+  0x922B0345, 0x0D3A9975, 0xE5BD2EA0, 0xEB55AD8E,
+  0x1B199E3E, 0xC4316020, 0xE9A1B285, 0xE7627953,
+  0x59B7BDFD, 0x39BEF4B2, 0x484583D5, 0xAFE082AE,
+  0xE638BF5F, 0xD5A60619, 0x3901A08F, 0x4AB41AAB, 0x9B134880
+ };
+ uint data_cmp[32] = {
+  0xD1E2DE70, 0xEEF86C69, 0x64FB542B, 0xC2D460AA,
+  0xBFAA10A4, 0xA093262B, 0x7D199E70, 0x6FC2D489,
+  0x15532969, 0x10F3A973, 0x012682E4, 0x1C4E2B02,
+  0xBE2017B7, 0x253BBF93, 0x09DE5819, 0xCB42E819,
+  0x56F4C99B, 0xC9765CAF, 0x53B1D0BB, 0x8279826A,
+  0xDBBC5522, 0xE915C120, 0xA618A5A7, 0xF5E89708, 0x9339650F
+ };
+ uint data_out0[32];
+ uint data_out1[32];
+
+ test_in.key0 = 0x2BD6459F;
+ test_in.key1 = 0x82C5B300;
+ test_in.key2 = 0x952C4910;
+ test_in.key3 = 0x4881FF48;
+
+ test_in.count = 0x72A4F20F;
+
+ printk(KERN_INFO "in CFG=0x%x\n", test_in.config);
+ test_in.data_in = &amp;data_in[0];
+ test_in.data_out = &amp;data_out0[0];
+ kasumi_f8_encrypt(&amp;test_in, len, bearer, direction);
+
+ i = 0;
+ for (i = 0; i &lt; 32; i++) {
+  if (data_out0[i] != data_cmp[i])
+   printk(KERN_INFO
+          "data MISS match data recieved=0x%x expected =0x%x\n\nn",
+          data_out0[i], data_cmp[i]);
+  else
+   printk(KERN_INFO "data MATCHED\n");
+
+ }
+}
+
+/*
+** Function to test F9 mode of encryption
+*/
+static void kasumi_test_f9(void)
+{
+ struct kasumi_desc test_in;
+ int i = 0;
+ uint direction = 0, len = 189;
+ uint data_in[6] = {
+  0x6B227737,
+  0x296F393C,
+  0x8079353E,
+  0xDC87E2E8,
+  0x05D2EC49,
+  0xA4F2D8E0
+ };
+ uint data_out[2];
+
+ test_in.key0 = 0x2BD6459F;
+ test_in.key1 = 0x82C5B300;
+ test_in.key2 = 0x952C4910;
+ test_in.key3 = 0x4881FF48;
+ test_in.fresh = 0x05D2EC49;
+ test_in.count = 0x38A6F056;
+
+ for (i = 0; i &lt; 6; i++)
+  data_in[i] = kasumi_byte_swap(data_in[i]);
+ test_in.data_in = &amp;data_in[0];
+ test_in.data_out = &amp;data_out[0];
+ kasumi_f9_encrypt(&amp;test_in, len, direction);
+ if (data_out[0] == 0xf63bd72c)
+  printk(KERN_INFO
+         " F9 test passed Expected data = 0x%x data recieved=0x%x\n",
+         0xf63bd72c, data_out[0]);
+ else
+  printk(KERN_INFO
+         " \n F9 test Failed Expected data = 0x%x data
recieved=0x%x\n",
+         0xf63bd72c, data_out[0]);
+
+}
+#endif
+
+/*
+**FUNCTION:kasumi_encrypt_decrypt()
+** args: kd is kasumi descriptor which holds all the requred data to do
kasumi 
+** mode encryption and decryption
+** Description:  This function follows the kasumi algorithm to encrypt
and decrypt.
+**  1. Check for interrupt bit KDA(Kasumi Data Availability)
+**  2. check for data availability bit in CTRL register and write 1 to
clear it
+**  3. Set keys
+**  4. set mode
+**  5. set inputdata
+**  6. validate keys , mode and data
+**  7. wait for the data availability and then read the data.
+**   This function can only do 64bit data encryption at given time 
+**   Please check the test() in the comment section.
+*/
+static int kasumi_encrypt_decrypt(struct kasumi_desc *kd)
+{
+ uint time_out = 100;
+
+ /*
+  * CTRL_STATUS[0] to reset the DATA out mechanism
+  */
+ printk(KERN_WARNING "kreg.ctrl 0x%x\n", kreg.ctrl);
+ out_be32(kreg.ctrl, in_be32(kreg.ctrl) | KASUMI_DATA_READY);
+ /*
+  * Check for interrupt bit for data availability bit set .
+  * if set clear it
+  */
+ if (mfdcr(DCR_UIC0_SR) &amp; 0x08000000) {
+  mtdcr(DCR_UIC0_SR, (mfdcr(DCR_UIC0_SR) &amp; ~0x08000000));
+ }
+
+ /*
+  * Check if KASUMI is ready  for data input
+  */
+ if (!mfdcr(DCR_UIC0_SR) &amp; 0x10000000)
+  printk(KERN_INFO "KASUMI is ready for data\n");
+
+ /*
+  * need keys
+  */
+ out_be32(kreg.key0, kd-&gt;key0);
+ out_be32(kreg.key1, kd-&gt;key1);
+ out_be32(kreg.key2, kd-&gt;key2);
+ out_be32(kreg.key3, kd-&gt;key3);
+ /*
+  * Check for correct  mode
+  */
+ if ((kd-&gt;mode != KASUMI_ENC_MODE) &amp;&amp; (kd-&gt;mode != KASUMI_DEC_MODE)) {
+  printk(KERN_INFO "KASUMI ERROR: invalid mode\n\n");
+  return -1;
+ }
+
+ /* 
+  * set mode 
+  */
+ out_be32(kreg.mode, kd-&gt;mode);
+ /*
+  * write data
+  */
+ if ((kd-&gt;data_in != NULL) &amp;&amp; (kd-&gt;data_in)) {
+  out_be32(kreg.data_in0, kd-&gt;data_in[0]);
+  out_be32(kreg.data_in1, kd-&gt;data_in[1]);
+ } else {
+  printk(KERN_INFO "No data passed\n");
+  return -1;
+ }
+
+ /* 
+  * validate data CTRL_STAT[4]
+  * Validate mode CTRL_STA[1] = 1
+  * vlaidatkeys keys CTRL_STAT[2] = 1 
+  */
+ out_be32(kreg.ctrl, in_be32(kreg.ctrl) | (KASUMI_VAL_DATA |
+        KASUMI_VAL_KEYS |
+        KASUMI_VAL_MODE));
+ /*
+  * Just in case DATA validation not finished
+  */
+ time_out = 100;
+ while (in_be32(kreg.ctrl) &amp; KASUMI_VAL_DATA) {
+  time_out--;
+  mdelay(1);
+  if (time_out &lt;= 0) {
+   printk(KERN_INFO
+          "ERROR: at line %d Timed out KASU0_CTRL=0x%x\n",
+          __LINE__, in_be32(kreg.ctrl));
+   break;
+  }
+ }
+
+ /*
+  * Check if data available bit is set
+  */
+ if (!mfdcr(DCR_UIC0_SR) &amp; 0x08000000)
+  printk(KERN_WARNING
+         "KASUMI data NOT available and  NO KDA interrupt occured\n");
+
+ /*
+  * Is data avaialbel
+  */
+ time_out = 100;
+ while (!(in_be32(kreg.status) &amp; KASUMI_DATA_READY)) {
+  time_out--;
+  mdelay(1);
+  if (time_out &lt;= 0) {
+   printk(KERN_INFO "line %d Timed out KASU0_CTRL=0x%x\n",
+          __LINE__, in_be32(kreg.ctrl));
+   break;
+  }
+ }
+
+ if (!(in_be32(kreg.status) &amp; KASUMI_DATA_READY))
+  printk(KERN_WARNING "Data is not ready\n");
+
+ kd-&gt;data_out[0] = in_be32(kreg.data_out0);
+ kd-&gt;data_out[1] = in_be32(kreg.data_out1);
+ return 0;
+}
+
+/*
+** Kasumi encryption function calls the kasumi_encrypt_decrypt()
+**
+*/
+int kasumi_encrypt(struct kasumi_desc *test)
+{
+ test-&gt;mode = KASUMI_ENC_MODE;
+ if (kasumi_encrypt_decrypt(test) != 0) {
+  printk(KERN_INFO "kasumi_encrypt_decrypt returned error");
+  return -1;
+ } else
+  return 0;
+
+}
+
+/*
+** Kasumi encryption function calls the kasumi_encrypt_decrypt()
+**
+*/
+int kasumi_decrypt(struct kasumi_desc *test)
+{
+ test-&gt;mode = KASUMI_DEC_MODE;
+ if (kasumi_encrypt_decrypt(test) != 0) {
+  printk(KERN_INFO "kasumi_encrypt_decrypt returned error");
+  return -1;
+ } else
+  return 0;
+
+}
+
+/*
+**
+**FUNCTION:kasumi_encrypt_decrypt()
+**args: kd is kasumi descriptor which holds all the requred data to do
kasumi mode encryption and decryption
+**Description:  This function follows the kasumi algorithm to encrypt
and decrypt.
+**  1. Check for interrupt bit KDA(Kasumi Data Availability)
+**  2. check for data availability bit in CTRL register and write 1 to
clear it
+**  3. Set keys
+**  4. set mode
+**  5. set config 
+**  6. set count
+**  7. set inputdata
+**  8. validate keys , mode , config , count and data
+**  9. wait for the data availability and then read the data.
+**   This function can encrypt block data
+**   Please check the test_f8_1() in the comment section.
+*/
+static int kasumi_f8_encrypt_decrypt(struct kasumi_desc *kd)
+{
+ int time_out = 10000;
+ int len = 0;
+ int i = 0;
+
+ len = ((kd-&gt;config &amp; 0xff) &lt;&lt; 8) | ((kd-&gt;config &amp; 0xff00) &gt;&gt; 8);
+ /*Reset data out mechanism */
+ /*CTRL_STATUS[0] to reset the DATA out mechanism */
+ out_be32(kreg.ctrl, in_be32(kreg.ctrl) | KASUMI_DATA_READY);
+
+ if (mfdcr(DCR_UIC0_SR) &amp; 0x08000000)
+  mtdcr(DCR_UIC0_SR, (mfdcr(DCR_UIC0_SR) &amp; ~0x08000000));
+
+ if (!mfdcr(DCR_UIC0_SR) &amp; 0x10000000)
+  printk(KERN_INFO "KASUMI is NOT ready for data\n");
+
+ /*need keys */
+
+ out_be32(kreg.key0, kd-&gt;key0);
+ out_be32(kreg.key1, kd-&gt;key1);
+ out_be32(kreg.key2, kd-&gt;key2);
+ out_be32(kreg.key3, kd-&gt;key3);
+ /*write config */
+ out_be32(kreg.config, kd-&gt;config);
+ /* Write count */
+ out_be32(kreg.count, kd-&gt;count);
+ /*set mode */
+ if (kd-&gt;mode != KASUMI_F8_ENC_MODE) {
+  printk(KERN_INFO "KASUMI Invalid mode\n");
+  return -1;
+ }
+
+ out_be32(kreg.mode, kd-&gt;mode);
+
+ /*
+  * write data
+  * validate data CTRL_STAT[4]
+  * Validate mode CTRL_STA[1] = 1
+  * vlaidatkeys keys CTRL_STAT[2] = 1 
+  * vlaidatkeys count and config 
+  */
+ out_be32(kreg.ctrl, in_be32(kreg.ctrl) | (KASUMI_VAL_CFG |
+        KASUMI_VAL_COUNT |
+        KASUMI_VAL_KEYS |
+        KASUMI_VAL_MODE));
+ time_out = 100;
+ /*
+  ** Just in case DATA validation is not finished
+  */
+ while (in_be32(kreg.ctrl) &amp; (KASUMI_VAL_CFG | KASUMI_VAL_COUNT |
+         KASUMI_VAL_KEYS | KASUMI_VAL_MODE)) {
+  time_out--;
+  mdelay(1);
+  if (time_out &lt;= 0) {
+   printk(KERN_INFO
+          " KASUMI:line %d Timed out KASU0_CTRL=0x%x\n",
+          __LINE__, in_be32(kreg.ctrl));
+   break;
+  }
+
+ }
+
+ if (in_be32(kreg.ctrl)
+     &amp; (KASUMI_VAL_CFG | KASUMI_VAL_COUNT |
+        KASUMI_VAL_KEYS | KASUMI_VAL_MODE))
+  printk(KERN_WARNING
+         " CFG COUNT KEYS MODE validation NOT complete\n");
+ /*
+  ** Here we encode 64bits a time till whole block is encrypted
+  */
+ while (len &gt; 0) {
+  if ((&amp;kd-&gt;data_in[i] != NULL) &amp;&amp; (&amp;kd-&gt;data_in[i + 1] != NULL)) {
+   out_be32(kreg.data_in0, kd-&gt;data_in[i]);
+   out_be32(kreg.data_in1, kd-&gt;data_in[i + 1]);
+  } else {
+   printk(KERN_INFO "No data passed\n");
+   break;
+  }
+
+  out_be32(kreg.ctrl, in_be32(kreg.ctrl) | KASUMI_VAL_DATA);
+  time_out = 100;
+  while (in_be32(kreg.ctrl) &amp; (KASUMI_VAL_DATA)) {
+   time_out--;
+   if (time_out &lt;= 0) {
+    printk(KERN_INFO
+           "KASUMI: line %d Timed out KASU0_CTRL=0x%x\n",
+           __LINE__, in_be32(kreg.ctrl));
+    break;
+   }
+  }
+
+  if (in_be32(kreg.ctrl) &amp; (KASUMI_VAL_DATA))
+   printk(KERN_WARNING "Data validation NOT complete\n");
+
+  time_out = 100;
+  while (!(in_be32(kreg.status) &amp; KASUMI_DATA_READY)) {
+   mdelay(1);
+   time_out--;
+   if (time_out &lt;= 0) {
+    printk(KERN_INFO
+           "line %d Timed out KASU0_CTRL=0x%x\n",
+           __LINE__, in_be32(kreg.ctrl));
+    break;
+   }
+
+  }
+
+  if (!(in_be32(kreg.status) &amp; KASUMI_DATA_READY)) {
+   printk(KERN_WARNING "Data is not ready\n");
+   break;
+  }
+
+  kd-&gt;data_out[i] = kasumi_byte_swap(in_be32(kreg.data_out0));
+  kd-&gt;data_out[i + 1] = kasumi_byte_swap(in_be32(kreg.data_out1));
+  /*
+   ** CTRL_STATUS[0] to reset the DATA out mechanism
+   */
+  out_be32(kreg.ctrl, KASUMI_DATA_READY);
+  if (!mfdcr(DCR_UIC0_SR) &amp; 0x10000000)
+   printk(KERN_WARNING "KASUMI is NOT ready for data\n");
+
+  i += 2;
+  len = len - 64;
+ }
+
+ return 0;
+}
+
+/*
+** arg1: hte filled kasumi_desc structure pointer
+** arg2:  len
+** arg3:  bearer
+** arg4:  direction
+*/
+int kasumi_f8_encrypt(struct kasumi_desc *test, uint len, uint bearer,
+        uint direction)
+{
+ int i = 0;
+
+ test-&gt;config = (len &lt;&lt; 16 | bearer &lt;&lt; 1 | direction);
+ test-&gt;mode = KASUMI_F8_ENC_MODE;
+ test-&gt;key0 = kasumi_byte_swap(test-&gt;key0);
+ test-&gt;key1 = kasumi_byte_swap(test-&gt;key1);
+ test-&gt;key2 = kasumi_byte_swap(test-&gt;key2);
+ test-&gt;key3 = kasumi_byte_swap(test-&gt;key3);
+ test-&gt;count = kasumi_byte_swap(test-&gt;count);
+ test-&gt;config = kasumi_byte_swap(test-&gt;config);
+ len = len / (32);
+
+ for (i = 0; i &lt;= len; i++)
+  test-&gt;data_in[i] = kasumi_byte_swap(test-&gt;data_in[i]);
+
+ if (kasumi_f8_encrypt_decrypt(test) != 0) {
+  printk(KERN_INFO
+         "kasumi_f8_encrypt_decrypt() returned error\n");
+  return -1;
+ }
+
+ return 0;
+}
+
+/*
+**
+**FUNCTION:kasumi_encrypt_decrypt()
+**args: kd is kasumi descriptor which holds all the requred data to do
kasumi mode encryption and decryption
+**Description:  This function follows the kasumi algorithm to encrypt
and decrypt.
+**  1. Check for interrupt bit KDA(Kasumi Data Availability)
+**  2. check for data availability bit in CTRL register and write 1 to
clear it
+**  3. Set keys
+**  4. set mode
+**  5. set config 
+**  6. set count
+**  7. set inputdata
+**  8. validate keys , mode , config , count and data
+**  9. wait for the data availability and then read the data.
+**   This function can encrypt block data
+**   Please check the test_f9_1() in the comment section.
+*/
+int kasumi_f9(struct kasumi_desc *kd)
+{
+ int time_out = 10000;
+ int len = 0;
+ int i = 0;
+
+ /* 
+  ** Get the lenght of the block we are going to encode
+  */
+ len = ((kd-&gt;config &amp; 0xff) &lt;&lt; 8) | ((kd-&gt;config &amp; 0xff00) &gt;&gt; 8);
+
+ /*
+  ** CTRL_STATUS[0] to reset the DATA out mechanism
+  */
+ out_be32(kreg.ctrl, in_be32(kreg.ctrl) | KASUMI_DATA_READY);
+ if (mfdcr(DCR_UIC0_SR) &amp; 0x08000000)
+  mtdcr(DCR_UIC0_SR, (mfdcr(DCR_UIC0_SR) &amp; ~0x08000000));
+
+ if (!(mfdcr(DCR_UIC0_SR) &amp; 0x10000000))
+  printk(KERN_INFO "KASUMI is ready for data\n");
+
+ /*
+  ** need keys
+  */
+ out_be32(kreg.key0, kd-&gt;key0);
+ out_be32(kreg.key1, kd-&gt;key1);
+ out_be32(kreg.key2, kd-&gt;key2);
+ out_be32(kreg.key3, kd-&gt;key3);
+ /*
+  ** write config
+  */
+ out_be32(kreg.config, kd-&gt;config);
+ /* 
+  ** Write count
+  */
+ out_be32(kreg.count, kd-&gt;count);
+ /*
+  ** set fresh
+  */
+ out_be32(kreg.fresh, kd-&gt;fresh);
+ /*
+  ** set mode
+  */
+ if (kd-&gt;mode != KASUMI_F9_ENC_MODE) {
+  printk(KERN_INFO "KASUMI Invalid mode\n");
+  return -1;
+ }
+
+ out_be32(kreg.mode, kd-&gt;mode);
+ /*
+  * write data
+  * validate data CTRL_STAT[4]
+  * Validate mode CTRL_STA[1] = 1
+  * vlaidatkeys keys CTRL_STAT[2] = 1 
+  * vlaidatkeys count and config 
+  */
+ out_be32(kreg.ctrl,
+   in_be32(kreg.ctrl) |
+   (KASUMI_VAL_CFG | KASUMI_VAL_COUNT | KASUMI_VAL_KEYS |
+    KASUMI_VAL_MODE | KASUMI_VAL_FRESH));
+ time_out = 100;
+ /*
+  ** Just in case validation is not complete.
+  */
+ while (in_be32(kreg.ctrl) &amp; (KASUMI_VAL_CFG |
+         KASUMI_VAL_COUNT | KASUMI_VAL_KEYS
+         | KASUMI_VAL_MODE | KASUMI_VAL_FRESH)) {
+  time_out--;
+  mdelay(1);
+  if (time_out &lt;= 0) {
+   printk(KERN_INFO "line %d Timed out KASU0_CTRL=0x%x\n",
+          __LINE__, in_be32(kreg.ctrl));
+   break;
+  }
+ }
+
+ if (in_be32(kreg.ctrl) &amp; (KASUMI_VAL_CFG |
+      KASUMI_VAL_COUNT | KASUMI_VAL_KEYS
+      | KASUMI_VAL_MODE | KASUMI_VAL_FRESH))
+  printk(KERN_WARNING
+         " CFG COUNT KEYS MODE validation NOT complete\n");
+ 
+ /*
+  **  Loop around this code till we encode all 64bit data blocks
+  */
+ while (len &gt; 0) {
+
+  if ((&amp;kd-&gt;data_in[i] != NULL) &amp;&amp; (&amp;kd-&gt;data_in[i + 1] != NULL)) {
+   out_be32(kreg.data_in0, kd-&gt;data_in[i]);
+   out_be32(kreg.data_in1, kd-&gt;data_in[i + 1]);
+  } else {
+   printk(KERN_INFO "No data passed\n");
+   return -1;
+  }
+
+  out_be32(kreg.ctrl, in_be32(kreg.ctrl) | KASUMI_VAL_DATA);
+  time_out = 100;
+
+  while (in_be32(kreg.ctrl) &amp; (KASUMI_VAL_DATA)) {
+   time_out--;
+   mdelay(1);
+   if (time_out &lt;= 0) {
+    printk(KERN_INFO
+           "line %d Timed out KASU0_CTRL=0x%x\n",
+           __LINE__, in_be32(kreg.ctrl));
+    break;
+   }
+  }
+
+  if (in_be32(kreg.ctrl) &amp; (KASUMI_VAL_DATA)) {
+   printk(KERN_INFO "Data validation NOT complete\n");
+  }
+
+  if (!(mfdcr(DCR_UIC0_SR) &amp; 0x10000000))
+   printk(KERN_INFO "KASUMI is NOT ready for data\n");
+
+  i += 2;
+  len = len - 64;
+ }
+
+ if (!(mfdcr(DCR_UIC0_SR) &amp; 0x08000000))
+  printk(KERN_INFO
+         "KASUMI data NOT available and  NO KDA interrupt occured\n");
+
+ /*
+  ** Is data avaialbel
+  */
+ time_out = 100;
+ while (!(in_be32(kreg.status) &amp; KASUMI_DATA_READY)) {
+  time_out--;
+  mdelay(1);
+  if (time_out &lt;= 0) {
+   printk(KERN_INFO "line %d Timed out KASU0_CTRL=0x%x\n",
+          __LINE__, in_be32(kreg.ctrl));
+  }
+
+ }
+
+ if (!(in_be32(kreg.status) &amp; KASUMI_DATA_READY))
+  printk(KERN_WARNING "Data is not ready\n");
+ kd-&gt;data_out[0] = kasumi_byte_swap(in_be32(kreg.data_out0));
+ kd-&gt;data_out[1] = kasumi_byte_swap(in_be32(kreg.data_out1));
+ out_be32(kreg.ctrl, KASUMI_DATA_READY);
+ return 0;
+}
+
+/*
+** arg1: kasumi_desc structure
+**  arg2: len
+**  arg3: direction
+*/
+int kasumi_f9_encrypt(struct kasumi_desc *test, uint len, uint
direction)
+{
+ test-&gt;config = (len &lt;&lt; 16 | direction);
+ test-&gt;config = (0x00BD0000);
+ test-&gt;mode = KASUMI_F9_ENC_MODE;
+ test-&gt;key0 = kasumi_byte_swap(test-&gt;key0);
+ test-&gt;key1 = kasumi_byte_swap(test-&gt;key1);
+ test-&gt;key2 = kasumi_byte_swap(test-&gt;key2);
+ test-&gt;key3 = kasumi_byte_swap(test-&gt;key3);
+ test-&gt;count = kasumi_byte_swap(test-&gt;count);
+ test-&gt;config = kasumi_byte_swap(test-&gt;config);
+ test-&gt;fresh = kasumi_byte_swap(test-&gt;fresh);
+
+ if (kasumi_f9(test) != 0) {
+  printk(KERN_INFO
+         "kasumi_f8_encrypt_decrypt() returned error\n");
+  return -1;
+ }
+
+ return 0;
+}
+
+/*
+**IOCTL function to let this driver usaed from user space.
+**
+*/
+static int kasumi_ioctl(struct inode *inode, struct file *filep,
+   unsigned int cmd, unsigned long arg)
+{
+ int kerr = 0;
+ struct kasumi_f8_f9_desc kd_f89;
+
+ kd_f89.kd.data_in = &amp;data_in[0];
+ kd_f89.kd.data_out = &amp;data_out[0];
+
+ switch (cmd) {
+ case KASUMI_IOCTL_ENCRYPT:
+  {
+   copy_from_user(&amp;kd_f89,
+           (struct kasumi_f8_f9_desc __user *)arg,
+           sizeof(struct kasumi_f8_f9_desc));
+   kerr = kasumi_encrypt(&amp;kd_f89.kd);
+   copy_to_user(&amp;kd_f89,
+         (struct kasumi_f8_f9_desc __user *)arg,
+         sizeof(struct kasumi_f8_f9_desc));
+
+   if (kerr &lt; 0)
+    return kerr;
+   return 0;
+   break;
+  }
+ case KASUMI_IOCTL_DECRYPT:
+  {
+   printk(KERN_INFO "kd_f89.kd.data_in[0]=0x%x\n",
+          kd_f89.kd.data_in[0]);
+   printk(KERN_INFO "kd_f89.kd.data_in[1]=0x%x\n",
+          kd_f89.kd.data_in[1]);
+   copy_from_user(&amp;kd_f89,
+           (struct kasumi_f8_f9_desc __user *)arg,
+           sizeof(struct kasumi_f8_f9_desc));
+   kerr = kasumi_decrypt(&amp;kd_f89.kd);
+   copy_to_user(&amp;kd_f89,
+         (struct kasumi_f8_f9_desc __user *)arg,
+         sizeof(struct kasumi_f8_f9_desc));
+   if (kerr &lt; 0)
+    return kerr;
+   break;
+  }
+ case KASUMI_IOCTL_F8_MODE:
+  {
+   copy_from_user(&amp;kd_f89,
+           (struct kasumi_f8_f9_desc __user *)arg,
+           sizeof(struct kasumi_f8_f9_desc));
+   kerr =
+       kasumi_f8_encrypt(&amp;kd_f89.kd, kd_f89.len,
+           kd_f89.bearer, kd_f89.direction);
+   copy_to_user(&amp;kd_f89,
+         (struct kasumi_f8_f9_desc __user *)arg,
+         sizeof(struct kasumi_f8_f9_desc));
+   if (kerr &lt; 0)
+    return kerr;
+   break;
+  }
+ case KASUMI_IOCTL_F9_MODE:
+  {
+   copy_from_user(&amp;kd_f89,
+           (struct kasumi_f8_f9_desc __user *)arg,
+           sizeof(struct kasumi_f8_f9_desc));
+   kerr =
+       kasumi_f9_encrypt(&amp;kd_f89.kd, kd_f89.len,
+           kd_f89.direction);
+   copy_to_user(&amp;kd_f89,
+         (struct kasumi_f8_f9_desc __user *)arg,
+         sizeof(struct kasumi_f8_f9_desc));
+   if (kerr &lt; 0)
+    return kerr;
+   break;
+  }
+ default:
+  return -ENOTTY;
+ }
+
+ return 0;
+}
+
+/*
+** file operations
+*/
+struct file_operations kasumi_fops = {
+ .ioctl = kasumi_ioctl,
+};
+
+/*
+** Moudle initialization
+**/
+int kasumi_init_module(void)
+{
+ int kerr = 0;
+ dev_t dev = MKDEV(kasumi_major, 0);
+ struct cdev *k_cdev = cdev_alloc();
+
+ printk(KERN_INFO "Loading Kasumi Driver\n");
+ if (kasumi_major)
+  kerr = register_chrdev_region(dev, 1, "kasumi");
+ else {
+  kerr = alloc_chrdev_region(&amp;dev, 0, 1, "kasumi");
+  kasumi_major = MAJOR(dev);
+ }
+
+ if (kerr &lt; 0) {
+  printk(KERN_ERR "KASUMI:Failed to get major number");
+  return kerr;
+ }
+
+ cdev_init(k_cdev, &amp;kasumi_fops);
+ k_cdev-&gt;owner = THIS_MODULE;
+ k_cdev-&gt;ops = &amp;kasumi_fops;
+ kerr = cdev_add(k_cdev, MKDEV(kasumi_major, 0), 1);
+ if (kerr &lt; 0)
+  return kerr;
+
+ /*
+  * setup register base address 
+  */
+ kasumi_base = ioremap64(0x0E0180000ULL, 0x80);
+ if (!kasumi_base) {
+  printk(KERN_INFO "ioremap falied for address 0xE0180000\n");
+  return -1;
+ }
+
+ /*
+  **Register address assignments
+  **
+  */
+ kreg.ctrl = ((uint *) ((u8 *) kasumi_base + KASU0_CTRL));
+ kreg.status = ((uint *) ((u8 *) kasumi_base + KASU0_STATUS));
+ kreg.mode = ((uint *) ((u8 *) kasumi_base + KASU0_MODE));
+ kreg.key0 = ((uint *) ((u8 *) kasumi_base + KASU0_KEY0));
+ kreg.key1 = ((uint *) ((u8 *) kasumi_base + KASU0_KEY1));
+ kreg.key2 = ((uint *) ((u8 *) kasumi_base + KASU0_KEY2));
+ kreg.key3 = ((uint *) ((u8 *) kasumi_base + KASU0_KEY3));
+ kreg.count = ((uint *) ((u8 *) kasumi_base + KASU0_COUNT));
+ kreg.config = ((uint *) ((u8 *) kasumi_base + KASU0_CONFIG));
+ kreg.fresh = ((uint *) ((u8 *) kasumi_base + KASU0_FRESH));
+ kreg.data_in0 = ((uint *) ((u8 *) kasumi_base + KASU0_DATA_IN0));
+ kreg.data_in1 = ((uint *) ((u8 *) kasumi_base + KASU0_DATA_IN1));
+ kreg.data_out0 = ((uint *) ((u8 *) kasumi_base + KASU0_DATA_OUT0));
+ kreg.data_out1 = ((uint *) ((u8 *) kasumi_base + KASU0_DATA_OUT1));
+
+ /*
+  ** reset KASUMI core
+  */
+ SDR_WRITE(SDR0_SRST1, SDR_READ(SDR0_SRST1) | KASUMI_RESET_MSK);
+ SDR_WRITE(SDR0_SRST1, SDR_READ(SDR0_SRST1) &amp; (~KASUMI_RESET_MSK));
+ /*
+  ** Disable the read pipe line. Otherwise it may cause hang on PLB
+  */
+ mtdcr(DCR_PLB4A0, mfdcr(DCR_PLB4A0) &amp; DISABLE_RD_PIPE_LINE);
+ mtdcr(DCR_UIC0_ER, (mfdcr(DCR_UIC0_ER) | 0x18000000));
+
+ /*
+  ** Kasumi test 
+  */
+#ifdef KASUMI_TEST
+ kasumi_test();
+ /*
+  ** f8 mode
+  */
+ kasumi_test_f8_1();
+ /*
+  ** f9 mode
+  */
+ kasumi_test_f9();
+#endif
+ return 0;
+}
+
+/*
+ * Cleanup module
+ */
+void kasumi_cleanup_module(void)
+{
+ iounmap(kasumi_base);
+ printk(KERN_INFO "Exiting Kasumi Driver\n");
+}
+
+EXPORT_SYMBOL(kasumi_f9_encrypt);
+EXPORT_SYMBOL(kasumi_f8_encrypt);
+EXPORT_SYMBOL(kasumi_encrypt);
+EXPORT_SYMBOL(kasumi_decrypt);
+module_init(kasumi_init_module);
+module_exit(kasumi_cleanup_module);
+MODULE_LICENSE("GPL");
+MODULE_AUTHOR("Tirumala Marri &lt;tmarri@amcc.com&gt;");
+MODULE_DESCRIPTION("Kasumi security engine driver");
----------------------
Thanks,
Tirumala Marri
--------------------------------------------------------

CONFIDENTIALITY NOTICE: This e-mail message, including any attachments, is for the \
sole use of the intended recipient(s) and contains information that is confidential \
and proprietary to Applied Micro Circuits Corporation or its subsidiaries. It is to \
be used solely for the purpose of furthering the parties' business relationship. All \
unauthorized review, use, disclosure or distribution is prohibited. If you are not \
the intended recipient, please contact the sender by reply e-mail and destroy all \
copies of the original message.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070528004908</emailId><senderName>cbwoevnw wvkidapc</senderName><senderEmail>rkiqkyireb1@yahoo.com.hk</senderEmail><timestampReceived>2007-05-28 00:49:08-0400</timestampReceived><subject>=?big5?q?=B0=B5=AD=D3=20=20=A6~=20=20=C1~2=20=200=20=200=B8U=AA=BA=20=20?=</subject><body>

¡@
  
  ¡@
200705271130 
 _______________________________________
 YM -  ÷½u°T®§
 ´Nºâ§A¨S¦³¤Wºô¡A§AªºªB¤Í¤´¥i¥H¯d¤U°T®§µ¹§A¡A·í§A¤Wºô®É´N¯à¥ß§Y¬Ý¨ì¡A¥ô¦ó»¡¸Ü³£ÉN¨«¥¢¡C
 http://messenger.yahoo.com.hk
[Attachment #3 (text/html)]

&lt;div&gt;¡@&lt;/div&gt;  &lt;div&gt;&lt;A href="http://edmschoo1.6x.to/"&gt;&lt;IMG \
src="http://i185.photobucket.com/albums/x244/focus500/5.gif"&gt;&lt;/A&gt;&lt;/div&gt;  \
&lt;div&gt;¡@&lt;/div&gt;200705271130 &lt;p&gt; _______________________________________&lt;br&gt; YM -  \
÷½u°T®§&lt;br&gt; ´Nºâ§A¨S¦³¤Wºô¡A§AªºªB¤Í¤´¥i¥H¯d¤U°T®§µ¹§A¡A·í§A¤Wºô®É´N¯à¥ß§Y¬Ý¨ì¡A¥ô¦ó»¡¸Ü³£ÉN¨«¥¢¡C&lt;br&gt; \
http://messenger.yahoo.com.hk


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070531195002</emailId><senderName>Unweitze Enweister</senderName><senderEmail>unweitze.enweister@gmail.com</senderEmail><timestampReceived>2007-05-31 19:50:02-0400</timestampReceived><subject>Re: Status in 2007 of: loop-aes VS dm-crypt VS truecrypt</subject><body>

* Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; [2007-05-31 21:12:53 +0300]:

&gt; Knoppix? I thought we were talking about grml.

Hmm.  Sorry.

&gt; But does it work without installing any extra packages?
&gt; Something like this:
&gt; 
&gt;     wget http://loop-aes.sourceforge.net/loop-AES/loop-AES-v3.2a.tar.bz2
&gt;     md5sum loop-AES-v3.2a.tar.bz2 | grep d0b5b0f104ce0e1ee9e3ba9608f24ec4
&gt;     tar xvjf loop-AES-v3.2a.tar.bz2
&gt;     cd loop-AES-v3.2a
&gt;     make tests

Yes, it does.  Perfectly.  Just tried it.

Regards,
Unweitze

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070403192402</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-04-03 19:24:02-0400</timestampReceived><subject>Strange performance drop with reconnected external drives</subject><body>

Hi,

I'm encountered the following scenario:

Several encrypted external USB HDDs were mounted (via a hub) when
Something Bad happened: Accidentially the cable connecting the hub to
the laptop was disconnected. The devices used at that time were
/dev/sda and /dev/sdb.

Logfiles showed the usual USB stuff: disconnections, nothing really
worrysome, no oops, no bugs.

So I almost immediately replugged one drive and mounted it again, the
device used was /dev/sdc and performance was as usual. A few minutes
later I replugged the other drive and the device it was associated
with was /dev/sda. There were no error messages, the mount operation
proceeded normally, filesystem recovery went smoothly. The filesystem
was not corrupted during normal use afterwards.

I don't think the hub is the issue, but the recycling of used
/dev/sd* devices:

The really strange thing was the considerable loss in performance.
Writing files at ~ 1,5 MB/s was about a 10th of the normal
throughput. Reading was also slow. I noticed that the drive's LED was
blinking slower than usual during drive access, as if there was a
delay of ~ 100 ms during write operations.

The kernel used was 2.6.21-rc3 with recent loop-aes v 3.1f.

I strongly suspect the code of handling SCSI-compatible devices (or
whatever the code handling external USB HDDs is called exactly ;-).
Earlier kernels (2.6.16.x) just used the next available devices e.g.
/dev/sdc &amp; /dev/sdd and did not recycle ones that had been in use
already.

Is there a way (apart from going back to earlier kernels) to get the
old behaviour back? I'd very much like that. A .config option, boot
parameter, patch, anything?

--=20
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070404011203</emailId><senderName>Kais Belgaied</senderName><senderEmail>kais.belgaied@sun.com</senderEmail><timestampReceived>2007-04-04 01:12:03-0400</timestampReceived><subject>Re: General questions about crypto and also Solaris</subject><body>

Alex,

you may find useful information about lofi's support for filesystem crypto
in the OpenSolaris Project: lofi compression &amp; cryptography support
http://opensolaris.org/os/project/loficc/ is the project's page.

Cheers,

    Kais

Alex Sudakar wrote On 03/24/07 17:54,:

&gt; Hi.  I've been a happy user of loop-aes for several years now.  
&gt; Sincerely,
&gt; thanks for all the time that people (Jari and others) have put into the
&gt; product.  I haven't been able to understand *everything* that's been
&gt; discussed here (!) but some of it, and the product itself works great.
&gt;
&gt; I've got a couple of general questions along the lines of encrypted
&gt; filesystems, and then a followup regarding what's available for
&gt; Solaris x86.  I know this list is '*linux*-crypto', but some people might
&gt; still be able to help on the latter topic anyway.
&gt;
&gt; I find myself in a situation of wanting to utilise applications and
&gt; filesystems/data on a *shared* system in a work environment.
&gt; On my home desktop I use loop-aes to encrypt all of my filesystems
&gt; basically so, if the system is stolen, no-one will be able to read my
&gt; private data.
&gt;
&gt; It seems evident, though, that on a shared system, with multiple
&gt; people logged in as root on the same machine, any of those
&gt; root users will be able to snoop around and read as cleartext
&gt; the files I might have on a 'private' filesystem, even if it's mounted
&gt; via loop-aes, as the filesystem will be mounted at the time, and
&gt; thus visible/decrypted for all.
&gt;
&gt; Are there products out there that perform filesystem decryption
&gt; on a per-process basis?  That allow a user to 'register' a set of
&gt; process ids - maybe process group ids, or controlling terminals,
&gt; etcetera - and decryption into cleartext only takes place for
&gt; processes that are thus registered?
&gt;
&gt; Or would that be considered too dangerous ... if any root process,
&gt; say, that wasn't thus registered, came along and looked at
&gt; a mounted filesystem which was working on this basis, I guess
&gt; the kernel would report the filesystem as 'corrupt' and possibly
&gt; make some sort of correction, updating the filesystem outside
&gt; the control of the cryptographic layer?
&gt;
&gt; Any other ideas for being able to work in privacy on a shared
&gt; Unix system?  Other than using applications which are explicitly
&gt; written to provide same?
&gt;
&gt; And, my followup question ... if there are any such solutions, would
&gt; they (also) work for Solaris x86?  I'm pretty sure, for example, that
&gt; loop-aes isn't ported to Solaris ... and in fact, even though 'vanilla'
&gt; Linux seems to have had cryptographic hooks for the loopback
&gt; device, going back years as far as I can recall, I haven't seen signs
&gt; of anything like that for Solaris's 'lofiadm' command.  My actual need
&gt; right now is to set up some sort of shared-privacy solution for a
&gt; Solaris x86 system, although I'm genuinely curious as to what might
&gt; be possible in general for Unix/Linux systems as well.
&gt;
&gt; Any help or advice, in general or references to specific software,
&gt; would be most appreciated.
&gt;
&gt; Thanks,
&gt;
&gt;
&gt; Alex
&gt;

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070407123151</emailId><senderName>angela bamar</senderName><senderEmail>angela1120b@yahoo.co.in</senderEmail><timestampReceived>2007-04-07 12:31:51-0400</timestampReceived><subject>FROM MISS ANGELA</subject><body>

Good day Dear.
   
  I do not know to what extent you are familiar with events and fragile political \
situation in my country Liberia, but it has formed consistent headlines in the CNN, \
BBC news bulletins. I will very glad if you can accept to lead me to the right \
channel by means of your assistance to my situation now.I will make my proposal well \
known if I am given the opportunity. I would like to use this opportunity to \
introduce myself to you.   
I am Angela Bamar from Liberia i am 24 yrs old, the daughter of Late Mr Donald Bamar \
Chief Financial Officer for Budget under the leadership of president Charles Taylor \
who went for excile and presently facing trial on a case of genocide as for the \
killing of innocent souls.I presently under asylum in Senegal.  
The main reason am contacting you now is to seek your assistance in the area of our \
better future living and investment of huge sum Seven millon five hundred thousand \
dollars (us$7,500.000.00) my late father deposited  for safe keeping under Finance \
company,Dakar -Senegal, in my name for safe keeping,  
I want you to help me claim the money for transfer to your country on my behalf. As I \
have mention earlier I will  give you more details on this issue on your acceptance \
to help me.  
  Pls send me your direct phone contact and private email to reach you in your reply \
if you have for security reason.  
  Thanks,while waiting for your response. 
   
  Sincerely yours,
   
  Miss Angela Bamar.

 				
---------------------------------
 Here’s a new way to find what you're looking for - Yahoo! Answers 


[Attachment #3 (text/html)]

&lt;DIV&gt;&lt;FONT size=3&gt;&lt;STRONG&gt;&lt;EM&gt;Good day Dear.&lt;/EM&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/DIV&gt;  &lt;DIV&gt;&lt;FONT \
size=3&gt;&lt;STRONG&gt;&lt;EM&gt;&lt;/EM&gt;&lt;/STRONG&gt;&lt;/FONT&gt; &lt;/DIV&gt;  &lt;DIV&gt;&lt;FONT size=3&gt;&lt;STRONG&gt;&lt;EM&gt;I \
do not know to what extent you are familiar with events and fragile political \
situation in my country Liberia, but it has formed consistent headlines in the CNN, \
BBC news bulletins. I will very glad if you can accept to lead me to the right \
channel by means of your assistance to my situation now.I will make my proposal well \
known if I am given the opportunity. I would like to use this opportunity to \
introduce myself to you. &lt;BR&gt; &lt;BR&gt;I am Angela Bamar from Liberia i am 24 yrs \
old, the daughter of Late Mr Donald Bamar Chief Financial Officer for Budget under \
the leadership of president Charles Taylor who went for excile and presently facing \
trial on a case of genocide as for the killing of innocent souls.I presently under \
asylum in Senegal.&lt;BR&gt; &lt;BR&gt;The main reason am contacting you now is to seek  \
your assistance in the area of our better future living and investment of huge sum \
Seven millon five hundred thousand dollars (us$7,500.000.00) my late father \
deposited  for safe keeping under Finance company,Dakar -Senegal, in my name for \
safe keeping,&lt;BR&gt; &lt;BR&gt;I want you to help me claim the money for transfer to your \
country on my behalf. As I have mention earlier I will  give you more details on \
this issue on your acceptance to help me.&lt;/EM&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/DIV&gt;  &lt;DIV&gt;&lt;FONT \
size=3&gt;&lt;STRONG&gt;&lt;EM&gt;&lt;/EM&gt;&lt;/STRONG&gt;&lt;/FONT&gt; &lt;/DIV&gt;  &lt;DIV&gt;&lt;FONT \
size=3&gt;&lt;STRONG&gt;&lt;EM&gt;Pls send me your direct phone contact and private email to reach \
you in your reply if you have for security reason.&lt;/EM&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/DIV&gt;  \
&lt;DIV&gt;&lt;FONT size=3&gt;&lt;STRONG&gt;&lt;EM&gt;&lt;/EM&gt;&lt;/STRONG&gt;&lt;/FONT&gt; &lt;/DIV&gt;  &lt;DIV&gt;&lt;FONT \
size=3&gt;&lt;STRONG&gt;&lt;EM&gt;Thanks,while waiting for your response. \
&lt;/EM&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/DIV&gt;  &lt;DIV&gt;&lt;FONT \
size=3&gt;&lt;STRONG&gt;&lt;EM&gt;&lt;/EM&gt;&lt;/STRONG&gt;&lt;/FONT&gt; &lt;/DIV&gt;  &lt;DIV&gt;&lt;FONT  \
size=3&gt;&lt;STRONG&gt;&lt;EM&gt;Sincerely yours,&lt;/EM&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/DIV&gt;  &lt;DIV&gt;&lt;FONT \
size=3&gt;&lt;STRONG&gt;&lt;EM&gt;&lt;/EM&gt;&lt;/STRONG&gt;&lt;/FONT&gt; &lt;/DIV&gt;  &lt;DIV&gt;&lt;FONT \
size=3&gt;&lt;STRONG&gt;&lt;EM&gt;Miss Angela Bamar.&lt;/EM&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;p&gt;   

	
		&lt;hr size=1&gt;&lt;/hr&gt; 
Here’s a new way to find what you're looking for - &lt;a \
href="http://us.rd.yahoo.com/mail/in/yanswers/*http://in.answers.yahoo.com/"&gt;Yahoo! \
Answers&lt;/a&gt; 


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070409003643</emailId><senderName>Max Vozeler</senderName><senderEmail>max@nusquama.org</senderEmail><timestampReceived>2007-04-09 00:36:43-0400</timestampReceived><subject>loop-AES on Debian etch (was: Linux distro w/loop-aes)</subject><body>

Hey all,

I realize I'm a bit late; I'll provide some details about 
the loop-AES support in the new Debian release.

On Thu, Mar 29, 2007 at 07:59:18AM -0400, Eloy Paris wrote:
&gt; I haven't used a recent version of the Debian Installer for etch
&gt; (Debian's upcoming new release) but I believe that it now supports
&gt; setting up encrypted partitions at installation time, which would
&gt; save a lot of trouble and pain.

That's true. The Debian etch (4.0) installer includes support
for loop-AES by default.  :-)

 o loop-AES encryption is integrated in the debian-installer
   partitioning tool (partman). Non-root filesystems, /tmp and 
   swap can be configured on loop-AES encrypted devices.

 o Available ciphers: Twofish, Serpent, AES; One can choose 
   between passphrase-protected GnuPG keyfiles (created during
   the installation) and random one-time keys.

 o The installer makes sure that no non-encrypted swap space is
   configured along with encrypted partitions and warns about 
   short passphrases (&lt; 20 characters)

 o Documented in the "Etch installation guide" 
   http://www.debian.org/releases/stable/installmanual

 o dm-crypt and LUKS are supported, too.
 

Notable missing features:

 o Root filesystem can't be stored on loop-AES encrypted device
   (work in progress, Debian bug #378488)

 o Keyfiles: Pre-existing GnuPG keyfiles can't be used yet and
   it's not yet possible to store GnuPG keyfiles on removable
   media (usb key, floppy, etc.)

 o The installer doesn't allow choice of a different symmetric 
   cipher for GnuPG encryption (currently uses CAST5)


On an installed Debian etch system, several packages are
provided for use of loop-AES:

 o loop-aes-modules-* - Those are pre-built kernel modules 
   for the standard Debian kernels. They are available for
   all supported architectures and kernel flavours (flavours
   are vserver, xen, etc.)

 o loop-aes-source - Package of the loop-AES source code
   (including ciphers) for use with module-assistant, 
   make-kpkg or manual build. This package can be used to
   create loop-AES module packages for non-standard kernels.
   
 o loop-aes-testsuite - Package of the loop-AES (+ciphers)
   test suite as provided in the upstream Makefile. The tests
   can be run using the loop-aes-runtests(8) command.

 o loop-aes-utils - Includes /bin/mount, /bin/umount, 
   /sbin/swapon and /sbin/losetup with loop-AES support. The
   package also includes a small script to assist with key
   file creation (loop-aes-keygen) and an init script that
   tries to fsck filesystems on loop-AES encrypted partitions 
   before mouting them during boot.
 
 o aespipe - Simple Debian packaging of aespipe.


As usual, feel free to contact me with questions and problems
you encounter using loop-AES on Debian. You can contact the 
loop-AES Team at pkg-loop-aes-maint@lists.alioth.debian.org or 
contact me at xam@debian.org. There will always be something
which can be improved, so your feedback is appreciated :-)

cheers,
Max

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070410110716</emailId><senderName>"S. Sakar"</senderName><senderEmail>serkan.sakar@gmx.net</senderEmail><timestampReceived>2007-04-10 11:07:16-0400</timestampReceived><subject>Re: loop-aes and busybox/initramfs-hook</subject><body>

Thanks. Using the gpghome parameter solved the problem. Now I can mount
my sd-card and /. :-)


Alon Bar-Lev schrieb:
&gt; Hello,
&gt; 
&gt; I had no problem with this...
&gt; The gpg home can be set using -G argument to losetup or using
&gt; GNUPGHOME environment.
&gt; 
&gt; You don't have to have any passwd shadow etc.
&gt; 
&gt; You can refer to:
&gt; http://wiki.suspend2.net/EncryptedSwapAndRoot
&gt; 
&gt; For a working environment.
&gt; 
&gt; Best Regards,
&gt; Alon Bar-Lev
&gt; 
&gt; On 4/9/07, S. Sakar &lt;serkan.sakar@gmx.net&gt; wrote:
&gt;&gt; hi,
&gt;&gt; I'm trying to integrate loop-aes into my ramdisk, but when I type the
&gt;&gt; password to unlock my gpgkey I get the error message
&gt;&gt; "Unable to detect home directory for uid 0" due to this codesegment:
&gt;&gt;
&gt;&gt; if((getuid() == 0) &amp;&amp; gpgHomeDir &amp;&amp; gpgHomeDir[0]) {
&gt;&gt;         h = gpgHomeDir;
&gt;&gt; } else {
&gt;&gt;         if(!(p = getpwuid(getuid()))) {
&gt;&gt;                 fprintf(stderr, _("Error: Unable to detect home
&gt;&gt; directory for uid
&gt;&gt; %d\n"), (int)getuid());
&gt;&gt;                 return NULL;
&gt;&gt;         }
&gt;&gt;         h = p-&gt;pw_dir;
&gt;&gt; }
&gt;&gt;
&gt;&gt; First, the login/password features were not build into busybox, so I put
&gt;&gt; /etc/passwd , /etc/group, /etc/shadow, /etc/nsswitch.conf, /lib/libnss_*
&gt;&gt; into the initrd, but same error message.
&gt;&gt; Then i tried a busybox-binary with build-in login/password features, and
&gt;&gt; again no success.
&gt;&gt; I would be glad if someone could point me in the right direction.
&gt;&gt;
&gt;&gt; Regards,
&gt;&gt; Serkan
&gt;&gt;
&gt;&gt; -
&gt;&gt; Linux-crypto:  cryptography in and on the Linux system
&gt;&gt; Archive:       http://mail.nl.linux.org/linux-crypto/
&gt;&gt;
&gt;&gt;
&gt; 
&gt; -
&gt; Linux-crypto:  cryptography in and on the Linux system
&gt; Archive:       http://mail.nl.linux.org/linux-crypto/
&gt; 


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070412023843</emailId><senderName></senderName><senderEmail>troy</senderEmail><timestampReceived>2007-04-12 02:38:43-0400</timestampReceived><subject>Advertising</subject><body>



Hi there,

I would like to advertise our product www.3dgirlz.com on your website. Do you have \
anything available? Our product is converting really well, and I would like to either \
do this on an affiliate basis or pay flat fee.

Our affiliate page can be found here: http://www.3dgirlz.com/3dgirlzcash.html

If you would like to see the game first before making a decision, let me know and i \
will send you a link so you download the full version.

Regards,

Troy
troy@3dgirlz.com
www.3dgirlz.com


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070412185747</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-04-12 18:57:47-0400</timestampReceived><subject>Re: Via Eden C7 padlock benchmarks</subject><body>

Hello!

To be honest I wonder why you pay so much attention to a processor from VIA. As far \
as I remember their processors are cheap and found in a few notebooks only. \
Documentation from VIA marked that their C7 padlock provides hardware aes support \
faster than current Intel processors. I still suppose my AMD64 and loop-aes remain \
the best choice, don´t they?

Regards
Peter
-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070420132654</emailId><senderName>"edward nkanga"</senderName><senderEmail>edwardnkanga@yahoo.fr</senderEmail><timestampReceived>2007-04-20 13:26:54-0400</timestampReceived><subject>ASSISTANCE</subject><body>

Compliments
Before I introduce myself, I wish to inform you that this letter is not a
hoax mail and I urge you to treat it serious. We want to transfer to an
oversea account ($16,700.000.00 USD) Sixteen Million Seven Hundred Thousand
United States Dollars) from one of the banks located in Euroupe. I want to
ask you, If you are not capable to quietly look for a reliable and honest
person who will be capable and fit to provide either an existing bank
account or to set up a new Bank a/c immediately to receive this money, even
an empty a/c can serve to receive this money, as long as you will remain
honest to me till the end of this important business ,I am trusting in you
and believing in God that you will never let me down either now or in
future.

I am mr Edward Nkanga a personal assiatant to late Andreas Schranner. During
the course of his bank's last week auditing,it was discovered that since his
death no one has come forward to lay claim to this funds.So the bank issued
me a memo to provide his next of kin or forfeith the funds. This account was
opened with the bank in 1999 and since 2000 nobody has operated on this
account again, after going through some old files in my records,I discovered
that my late client  died without a [Heir/WILL] hence the money is floating
and if I do not remit this money out urgently it will be forfeited for
nothing.

The owner of this account Mr. Andreas Schranner a German property magnate
who unfortunately lost his life in the plane crash of AF4590 German Concorde
which crahsed on July 25th 2000,including his family leaving nobody as next
of kin.

No other person knows about this account or any thing concerning it,the
account has no other beneficiary and my investigation proved to me as well
that the account is a secret account.

The total amount involved is Sixteen million Seven Hundred Thousand United
States Dollars only [$16,700.000.00] and we wish to transfer this money into
a safe foreigners account abroad. But I don't know any foreigner, I am only
contacting you as a foreigner because this money can not be approved to a
local person here, but to a foreigner who has information about the account,
which I shall give to you upon your positive response. I am revealing this
to you with believe in God that you will never let me down in this business,
you are the first and the only person that I am contacting for this
business, so please reply urgently so that I will inform you the next step
to take urgently.
At the conclusion of this businesas, you will be given 25% of the total
amount,70% will be for us, while 5% will be for expenses both parties might
have incurred during the process of transferring. I look forward to your
earliest reply through my yahoo email ( edwardnkanga@yahoo.fr)  PLEASE
TREAT THIS PROPOSAL
AS TOP SECRET.

Best Regards,
Edward Nkanga.

[Attachment #3 (text/html)]

&lt;p&gt;Compliments&lt;br&gt;Before I introduce myself, I wish to inform you that this letter is \
not a hoax mail and I urge you to treat it serious. We want to transfer to an oversea \
account ($16,700.000.00 USD) Sixteen Million Seven Hundred Thousand United States \
Dollars) from one of the banks located in Euroupe. I want to ask you, If you are not \
capable to quietly look for a reliable and honest person who will be capable and fit \
to provide either an existing bank account or to set up a new Bank a/c immediately to \
receive this money, even an empty a/c can serve to receive this money, as long as you \
will remain honest to me till the end of this important business ,I am trusting in \
you and believing in God that you will never let me down either now or in future.  \
&lt;br&gt; &lt;br&gt;I am mr Edward Nkanga a personal assiatant to late Andreas Schranner. \
During the course of his bank's last week auditing,it was discovered that since \
his death no one has come forward to lay claim to this funds.So  the bank issued me a \
memo to provide his next of kin or forfeith the funds. This account was opened with \
the bank in 1999 and since 2000 nobody has operated on this account again, after \
going through some old files in my records,I discovered that my late client  \
died without a [Heir/WILL] hence the money is floating and if I do not remit this \
money out urgently it will be forfeited for nothing.  &lt;br&gt; &lt;br&gt;The owner of this \
account Mr. Andreas Schranner a German property magnate who unfortunately lost his \
life in the plane crash of AF4590 German Concorde which crahsed on July 25th \
2000,including his family leaving nobody as next of kin.  &lt;/p&gt;
&lt;p&gt;No other person knows about this account or any thing concerning it,the account \
has no other beneficiary and my investigation proved to me as well that the account \
is a secret account.&lt;/p&gt; &lt;p&gt;The total amount involved is Sixteen million Seven \
Hundred Thousand United States Dollars only [$16,700.000.00] and we wish to transfer \
this money into a safe foreigners account abroad. But I don't know any foreigner, \
I am only contacting you as a foreigner because this money can not be approved to a \
local person here, but to a foreigner who has information about the account, which I \
shall give to you upon your positive response. I am revealing this to you with \
believe in God that you will never let me down in this business, you are the first \
and the only person that I am contacting for this business, so please reply urgently \
so that I will inform you the next step to take urgently.  &lt;br&gt;At the conclusion of \
this businesas, you will be given 25% of the total amount,70% will be for us, while \
5% will be for expenses both parties might have incurred during the process of \
transferring. I look forward to your earliest reply through my yahoo email (  &lt;a \
href="mailto:edwardnkanga@yahoo.fr"&gt;edwardnkanga@yahoo.fr&lt;/a&gt;)  PLEASE  \
TREAT THIS PROPOSAL &lt;br&gt;AS TOP SECRET.  &lt;br&gt; &lt;br&gt;Best Regards,&lt;br&gt;Edward \
Nkanga.&lt;/p&gt; &lt;p&gt; &lt;/p&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070420212543</emailId><senderName>"Sonia Benson"</senderName><senderEmail>benson.sonia4@gmail.com</senderEmail><timestampReceived>2007-04-20 21:25:43-0400</timestampReceived><subject>I have transfer the funds</subject><body>

GOOD DAY MY DEAR,

COMPLIMENTS OF THE DAY AND GOD'S BLESSINGS.I AM GLAD TO INFORM YOU
THAT I HAVE SUCCESSFULLY CONCLUDED THE TRANSACTION, THE MONEY WAS
TRANSFERRED TO USA. IT IS DONE THROUGH THE ASSISTANT OF YOUR COUNTRY
MAN DR.ZAFAR MOHAMAD WHO IS A US BASE BUSINESS MAN. CURRENTLY I AM IN
USA WITH MY CHILDREN.

HOWEVER, I DID NOT FORGET YOU BECAUSE YOU ARE THE SOURCE OF MY SUCCESS
THOUGH YOU ARE NOT THERE TO COMPLETE THIS PROJECT WITH ME BUT I GAVE
ALL THE CREDIT AND THANKS TO YOU. I KNOW IT IS NOT YOUR FAULT RATHER
YOUR WISH TO BACK UP ON THE TRANSACTION, I UNDERSTAND IT WAS SIMPLY
BECAUSE OF WHAT YOU MUST HAVE HEARD ABOUT AFRICA. ACTUALLY THERE ARE
STILL GOOD ONES FOR EXAMPLE MYSELF.

IN APPRECIATE OF YOUR ASSISTANCE I HAVE MAPPED OUT AS A COMPENSATION
OF $700.000(SEVEN HUNDRED THOUSAND UNITED STATES DOLLARS ONLY) I LEFT
THE MONEY WITH MY ATTORNEY SIR. MALICK DIOP ON MY DEPARTURE TO USA. I
WOULD LIKE YOU THEREFORE,TO CONTACT HIM ON THE BELOW INFO SO THAT HE
CAN SEND YOUR MONEY.

MALICK DIOP (SIR)
E-MAIL : malick1950@yahoo.co.uk

I WOULD HAVE LOVE TO CALL YOU FROM USA WHERE I CURRENTLY RESIDE BUT
DUE TO THE RECENT KILLING IN CAMPUS MR.ZAFAR ADVICE ME NOT TO CALL
BECAUSE ALL INTERNATONAL CALLS ARE BEING MONITORED BY THE US
AUTHORITY.

CONTACT MY ATTORNEY SO THAT HE CAN RELEASE YOUR MONEY TO YOU. I WILL
STOP HERE. ONCE AGAIN, THANK YOU VERY MUCH AND REMAIN BLESSED.

REGARDS,

MRS SONIA BENSON.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070421065932</emailId><senderName>"Wujiang Wanlida Textile Co.Ltd."</senderName><senderEmail>shao_cheng_textile001@yahoo.com.cn</senderEmail><timestampReceived>2007-04-21 06:59:32-0400</timestampReceived><subject>JOB OFFER!!!( REPRESENTATIVE NEEDED)</subject><body>


Dear Sir/Madam, 
 
I am Mr. Shao Cheng, It is my pleasure to write you in respect of our Company, \
Wujiang Wanlida Textile Co. Ltd.  Based No.6 The Third District Nanshan Road, \
Shengze, Wujiang City, Jiangsu Province. China. We are experts in the sale of Textile \
materials; we export into the Canada/America and parts Europe. 

We are searching for representatives who can help us establish a medium of getting \
our funds from our costumers in these areas as well as making payments through you to \
us. 

Please if interested in transacting business in view helping us, so our clients could \
make payment to you being a representative for us we will be very glad and \
compensations will be given and as well as other benefits.  Subject to your \
satisfaction you will be given the opportunity to negotiate your mode of which we \
will pay for your services as our representative/agent in Canada, America, and \
Europe. 

If interested forward information below to us 

1.FULL NAMES: 

2.RESIDENTIAL ADDRESS:

3.PHONE NUMBER: 

4.FAX NUMBER(IF ANY):    

5.OCCUPATION : 

6.COMPANY NAME: 

To this email:shao_cheng_textile001@yahoo.com.cn 
Note that no form of payment will be requested upfront in this endeavor.On our \
receipt of the above details we shall forward to our customer/clients to immediately \
contact you with the mode of payment. 

Thanks in advance, 

Mr. Shao Cheng.
Company Director.






-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070421191642</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-04-21 19:16:42-0400</timestampReceived><subject>Re: loop-aes on MIPS DSL Router</subject><body>

* Peter_22@gmx.de wrote:

&gt; Anyway, my question whether or not the existing loop-aes code can
&gt; be compiled for MIPS remains. None of the sites offers an
&gt; encrypting solution.

Try the linux-mips mailinglist, archives are located at

http://marc.info/?l=linux-mips&amp;r=1&amp;w=2

mailto:majordomo@vger.kernel.org?body=subscribe%20linux-mips


-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070422223530</emailId><senderName>"darricksmith"</senderName><senderEmail>darricksmith@sbcglobal.net</senderEmail><timestampReceived>2007-04-22 22:35:30-0400</timestampReceived><subject>MONEY OPPORTUNITY!</subject><body>

IF YOU REALLY WOULD LIKE TO VIEW A MONEY MAKING OPPORTUNITY, PLEASE =
VISIT www.faithiseverything.ws
THANK YOU FOR YOUR TIME AND ENJOY!
[Attachment #3 (text/html)]

&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"&gt;
&lt;HTML&gt;&lt;HEAD&gt;
&lt;META http-equiv=Content-Type content="text/html; charset=iso-8859-1"&gt;
&lt;META content="MSHTML 6.00.2900.3059" name=GENERATOR&gt;
&lt;STYLE&gt;&lt;/STYLE&gt;
&lt;/HEAD&gt;
&lt;BODY bgColor=#ffffff&gt;
&lt;DIV&gt;&lt;FONT face=Arial size=2&gt;IF YOU REALLY WOULD LIKE TO VIEW A MONEY MAKING 
OPPORTUNITY, PLEASE VISIT &lt;A 
href="http://www.faithiseverything.ws"&gt;www.faithiseverything.ws&lt;/A&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=Arial size=2&gt;THANK YOU FOR YOUR TIME AND 
ENJOY!&lt;/FONT&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070424132107</emailId><senderName></senderName><senderEmail>info</senderEmail><timestampReceived>2007-04-24 13:21:07-0400</timestampReceived><subject>Photo editing services</subject><body>

Hi,
 Very good morning,

 I was browsing the internet and came across your web site. I appreciate the site
 and got interested in it, i think my work can help your business too.

 We provide image/photo editing services. (professionally hand made)
 [clipping path, masking, colour correction, logo, banner]. Since i am
 contacting you personally, i would like to offer free work for 3 images 
 so that you can see our work and its quality.

 This will help you to utilize your time in more creative work and improve
 your business. It will be worth looking at the samples, quality of work 
 and low prices for such  services.

 With our large resources pool we are delivering thousands of Images in 24
 hour.

 Please see samples at  www.imagetracing.net
 http://www.imagetracing.net/pricing.html
(Price starts from 0.75 $ per picture)


 For Individual pricing or bulk orders please contact us at
 info@imagetracing.net

 You can avail the offer of 3 test pictures by sending us email at
 test@imagetracing.net

 If the size is big please upload it on our server, we will create a ftp
 account for you without any charges.

 Sincerely,
 Smita Sahu
 Design Manager

-----------------------------
 Kaizen Informatics Pvt ltd
-----------------------------
No 688,Shreyas Complex
2nd floor,New Town,Yelahanka
Bangalore , india 560064
tel +9109845665964
off +9108041757034
 +9108028561769
www.imagetracing.net



-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070425144248</emailId><senderName>"malick camara"</senderName><senderEmail>malick30402@yahoo.co.in</senderEmail><timestampReceived>2007-04-25 14:42:48-0400</timestampReceived><subject>Best regards,and have a great day</subject><body>

Good Day.

I would like to apply through this medium for your co-operation and to
secure an opportunity to invest and do joint business with you in your
country.

I have a substantial capital i honourably intend to invest in your country
into a very lucrative business venture of which you are to advise and
execute the said venture over there for the mutual benefits of both of us.

Your able co-operation is to become my business partner in your country and
create ideas on how money will be invested,properly managed and the type of
investment after the money is transferred to your custody with your help and
assistance.

Meanwhile,on indication of your willingness to handle this transaction
sincerely by protecting our interests and upon your acceptance of this
proposal,I would furnish you with the full detailed information,
procedure,amount involve and mutually agree on your percentage interest or
share holding for helping me to secure the release of the deposit and
investing the money in your country under your proper management and care.

I shall be glad to reserve this respect and opportunity for you,if you so
desire,but do urge you to give the matter your immediate attention it
deserves.

If this proposal is acceptable by you please do not make under advantage of
the trust i bestow on you and your urgent reply is highly needed today for
more detailed informations .

Best regards,and have a great day

Yours Faithfully,

Mr Malick Camara.

[Attachment #3 (text/html)]

&lt;div&gt;Good Day.&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;I would like to apply through this medium for your co-operation and to secure an \
opportunity to invest and do joint business with you in your country.&lt;/div&gt; \
&lt;div&gt; &lt;/div&gt; &lt;div&gt;I have a substantial capital i honourably intend to invest in \
your country into a very lucrative business venture of which you are to advise and \
execute the said venture over there for the mutual benefits of both of us. &lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;Your able co-operation is to become my business partner in your country and \
create ideas on how money will be invested,properly managed and the type of \
investment after the money is transferred to your custody with your help and \
assistance. &lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;Meanwhile,on indication of your willingness to handle this transaction sincerely \
by protecting our interests and upon your acceptance of this proposal,I would furnish \
you with the full detailed information, procedure,amount involve and mutually agree \
on your percentage interest or share holding for helping me to secure the release of \
the deposit and investing the money in your country under your proper management and \
care. &lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;I shall be glad to reserve this respect and opportunity for you,if you so \
desire,but do urge you to give the matter your immediate attention it deserves.&lt;/div&gt; \
&lt;div&gt; &lt;/div&gt; &lt;div&gt;If this proposal is acceptable by you please do not make under \
advantage of the trust i bestow on you and your urgent reply is highly needed today \
for more detailed informations . &lt;/div&gt; &lt;div&gt; &lt;/div&gt;
&lt;div&gt;Best regards,and have a great day&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;Yours Faithfully,&lt;/div&gt;
&lt;div&gt; &lt;/div&gt;
&lt;div&gt;Mr Malick Camara.&lt;/div&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070428113051</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-04-28 11:30:51-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

* Peter_22@gmx.de wrote:

&gt; markus reichelt &lt;ml@mareichelt.de&gt; wrote:
&gt; &gt; &gt; As you asked for an USB-bootable solution I advise you to follow
&gt; &gt; &gt; example 7.7 from loop-aes readme. This works even with SuSE and you
&gt; &gt; &gt; can encrypt every bit of data on you drives. No bootpartition and
&gt; &gt; &gt; no partition table will remain. Up to now I haven?t seen an
&gt; &gt; &gt; installer that supports encrypted installations.
&gt; &gt; 
&gt; &gt; The beauty of that example is that it can be used also on
&gt; &gt; non-ecrypted root partitions... the system will just boot. Great to
&gt; &gt; test one's setup before actually encrypting root via aespipe.
&gt; &gt; 
&gt; &gt; And about that tweaked installer ... I discussed the issue with a
&gt; &gt; fellow slackware user some time ago. It's most certainly doable, but
&gt; &gt; right now I just lack the time to pursue that project. 

Change of status, I'm currently working on it. 

 
&gt; Aespipe is a good hint! When you lose your USB-Stick or think of a
&gt; key-change for existing encrypted partitions, how do you do that?

Depends on the extent of "losing the key". 

a) key is lost as in utterly destroyed
b) key is lost as in falls into false hands


Regarding a), I would continue to use the same key from the backup
CD-ROM I created during install.

Scenario b) is a totally different story. It boils down to the last
defense of having chosen a long and sufficiently secure password to
protect the key. But with my paranoia level I would create a new key
and dump the old one.

I would not necessarily use aespipe in order to achieve a smooth
transition to the new setup:


&gt; Aespipe pipes data from one partition to the same. It works fine
&gt; unless the PC hangs. It would be fine to have a script that makes
&gt; aespipe use 2 partitions. One for the encrypted data and a small
&gt; one to backup chunks of the ongoing re-encryption. Let?s say a
&gt; partition with 300 GB data is chosen to be re-encrypted with a new
&gt; keyfile. At present aespipe is given both keyfiles and two loops
&gt; are set up to read the data from one loop, pipe it through the
&gt; program and back to the second loop. If the PC get?s stuck in this
&gt; process 300 GB of data are lost. To prevent this, the 300 GB are to
&gt; be segmented into 100 MB chunks and the above process is done
&gt; again. This time with a second partition to store a temporary 100
&gt; MB file and an index file that keeps the record of the loop?s
&gt; offset and size for the actual chunk. In case of a crash the
&gt; temporary chunk can be replayed and the index file provides the
&gt; information on where to replace the data and how to continue the
&gt; re-encryption process. Data protected against crashs, mission
&gt; accomplished. A person with good knowledge in linux shell scripting
&gt; might write this tool in a few hours.

I disagree. It is possible, as you describe, but it lacks
flexibility aka have plan B ready.

Never ever work without a backup. And keeping the example of using a
new key in mind, the whole process would not rely on stability during
the aespipe run. Maybe one wants to change the cipher too, f.e.
migrate from AES to Serpent...

So I would create a backup of the data on an encrypted partition (be
it a partition image in a file via dd or a filesystem clone via tar),
then copy the data back to the new setup. aespipe is convenient, yes,
but I only use it where absolutely necessary / for testing purposes,
for the known examples of using aespipe on the very same parition are
of a wire-dancer nature.

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070428172614</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-04-28 17:26:14-0400</timestampReceived><subject>Re: entropy of /dev/random vs. openssl rand</subject><body>

Gisle Sælensminde wrote:
&gt; Some people argue that a periodically reseeded cryptographic-quality
&gt; random number generator is as secure as a true random number generator for
&gt; all practical purposes.
[snip]
&gt; I personally can't think of any realistic scenario where /dev/random would
&gt; make you safe while /dev/urandom would make you sorry.

No problem if cryptographic-quality random number generator is reseeded
using high quality entropy. But saving/reseeding PRNG using a plaintext file
as most distros seem to do at shutdown and boot does not count as secure.
/dev/urandom state may be predictable for some time after boot. /dev/random
at least waits for new entropy before handing out random bits, and avoids
that predictable state pitfall.

Do most distros attempt to overwrite /var/lib/urandom/random-seed or
whatever after it has been used to reseed /dev/urandom? Does any distro
attempt to overwrite that file?
  
For the record, loop-AES versions of mount/losetup/swapon that set up random
key loop devices, use /dev/urandom. But they also attempt to work-around
possibly predictable boot-time /dev/urandom bits. The work-around is
basically random-seed save/restore (to backing device) but with 20
overwrites of saved-state after it has been used to create new encryption
keys. See source for more details.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070430165008</emailId><senderName>seyi kolawole</senderName><senderEmail>kollad2sy@yahoo.com</senderEmail><timestampReceived>2007-04-30 16:50:08-0400</timestampReceived><subject>we are the best marketer</subject><body>

Hello Sir/Ma
                  REQUESTED TO BE ONE OF YOUR MARKETER
                  compliments of the season to you over there. My name is Kolawole \
Moses, i really cherish and appriciate your company and i will like to be one of the \
marketer of your goods in my country.   Have heard many lovely things about your \
company, i have many compannies and many business in africa, like manpower recultment \
agency and visa consltant in Cot d'ivoire, Paramount computer services in Nigeria, \
and also moses pharmacy stores in both Benin republic and in Ghana and so on like \
                that. And have been the marketerfor many company in both abroad and \
                afica 
                The security is totally asured and certain, i nwill be very glad if \
                my request is considered. thanks you very much 
                                                                                     \
                yours sincerly 
                                                                                      \
moses  ADRESS
  AVENUE JOSEPH KBILA CON, 
  ST , OFF AMERICA EMBASSY COCODY 
     0022502017191

   

       
---------------------------------
Ahhh...imagining that irresistible "new car" smell?
 Check outnew cars at Yahoo! Autos.


[Attachment #3 (text/html)]

&lt;DIV&gt;&lt;STRONG&gt;   Hello Sir/Ma&lt;/STRONG&gt;&lt;/DIV&gt;  \
&lt;DIV&gt;                \
&lt;FONT face="Arial Black" color=#1b2c48&gt;&lt;U&gt;REQUESTED TO BE ONE OF YOUR \
MARKETER&lt;/U&gt;&lt;/FONT&gt;&lt;/DIV&gt;  \
&lt;DIV&gt;          &lt;STRONG&gt;      \
&lt;FONT color=#0000ff&gt;compliments of the season to you over there. My name is Kolawole \
Moses, i really cherish and appriciate your company and i will like to be one of the \
marketer of your goods in my country. &lt;/FONT&gt;&lt;/STRONG&gt;&lt;/DIV&gt;  &lt;DIV&gt;&lt;FONT \
color=#0000ff&gt;&lt;STRONG&gt;              \
Have heard many lovely things about your company, i have many compannies and many \
business in africa, like manpower recultment agency and visa consltant in Cot \
d'ivoire, Paramount computer services in Nigeria, and also moses pharmacy stores in \
both Benin republic and in Ghana and so on  like that. And have been the marketerfor \
many company in both abroad and afica &lt;/STRONG&gt;&lt;/FONT&gt;&lt;/DIV&gt;  &lt;DIV&gt;&lt;STRONG&gt;&lt;FONT \
color=#0000ff&gt;              \
The security is totally asured and certain, i nwill be very glad if my request is \
considered. thanks you very much &lt;/FONT&gt;&lt;/STRONG&gt;&lt;/DIV&gt;  &lt;DIV&gt;&lt;STRONG&gt;&lt;FONT \
color=#0000ff&gt;             \
              &amp;n \
bsp;             &amp;nbs \
p;               \
                            \
yours sincerly &lt;/FONT&gt;&lt;/STRONG&gt;&lt;/DIV&gt;  &lt;DIV&gt;&lt;STRONG&gt;&lt;FONT  \
color=#0000ff&gt;             \
              &amp;n \
bsp;             &amp;nbs \
p;               \
              &amp;n \
bsp;               \
moses&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/DIV&gt;  &lt;DIV&gt;&lt;STRONG&gt;&lt;U&gt;&lt;FONT \
color=#111111&gt;ADRESS&lt;/FONT&gt;&lt;/U&gt;&lt;/STRONG&gt;&lt;/DIV&gt;  &lt;DIV&gt;&lt;FONT face="Times New Roman" \
size=6&gt;&lt;FONT face=arial size=2&gt;&lt;FONT face="Times New Roman" size=6&gt;&lt;FONT face=Arial \
color=#0000ff size=2&gt;&lt;STRONG&gt;AVENUE JOSEPH KBILA CON, \
&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;  &lt;DIV&gt;&lt;FONT face="Times New Roman" \
size=6&gt;&lt;FONT face=arial size=2&gt;&lt;FONT face="Times New Roman" size=6&gt;&lt;STRONG&gt;&lt;FONT \
color=#0000ff&gt;&lt;FONT face=Arial  size=2&gt;ST , OFF AMERICA EMBASSY \
COCODY&lt;/FONT&gt;&lt;FONT face="Times New Roman" \
size=6&gt; &lt;/FONT&gt;&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;  &lt;DIV&gt;  &lt;DIV&gt;&lt;FONT \
face="Times New Roman" \
color=#0000ff&gt;&lt;STRONG&gt; 0022502017191&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;/DIV&gt;  \
&lt;DIV&gt;&lt;STRONG&gt;&lt;FONT color=#0000ff&gt;&lt;/FONT&gt;&lt;/STRONG&gt; &lt;/DIV&gt;&lt;FONT face="Times New \
Roman" size=6&gt;&lt;FONT color=#0000ff&gt;&lt;FONT color=#ff0000&gt;&lt;FONT face=arial \
size=2&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;p&gt; 

      &lt;hr size=1&gt;Ahhh...imagining that irresistible "new car" smell?&lt;br&gt; Check out
&lt;a href="http://us.rd.yahoo.com/evt=48245/*http://autos.yahoo.com/new_cars.html;_ylc=X3oDMTE1YW1jcXJ2BF9TAzk3MTA3MDc2BHNlYwNtYWlsdGFncwRzbGsDbmV3LWNhcnM-"&gt;new \
cars at Yahoo! Autos.&lt;/a&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070409201055</emailId><senderName>Torsten72</senderName><senderEmail>torsten.st@gmx.net</senderEmail><timestampReceived>2007-04-09 20:10:55-0400</timestampReceived><subject>Via Eden C7 padlock benchmarks</subject><body>

hardware
========
Jetway J7F4K1G2
cpu:     Via Eden C7 1200 MHz
chipset: VIA CN700 + 8237RP
ram:     512 MB DDR2-533

software
========
Debian Etch
Linux debian 2.6.18-4-686 #1 SMP Mon Mar 26 17:17:36 UTC 2007 i686 GNU/Linux
loop(-aes) module rebuilt with support for via padlock hardware encryption
openssl 0.9.8c rebuilt with Michal Ludvig's padlock patches

performance test results
========================

# ramdisk

debian:~# dd if=/dev/zero of=/dev/ram1 bs=1M count=50
50+0 Datensätze ein
50+0 Datensätze aus
52428800 Bytes (52 MB) kopiert, 0,0977001 Sekunden, 537 MB/s

# simple loop

debian:~# losetup /dev/loop0 /dev/ram1
debian:~# dd if=/dev/zero of=/dev/loop0 bs=1M count=50
50+0 Datensätze ein
50+0 Datensätze aus
52428800 Bytes (52 MB) kopiert, 0,379721 Sekunden, 138 MB/s
debian:~# losetup -d /dev/loop0

# loop-aes: AES-128

debian:~# losetup -e AES128 -H random /dev/loop0 /dev/ram1
debian:~# dd if=/dev/zero of=/dev/loop0 bs=1M count=50
50+0 Datensätze ein
50+0 Datensätze aus
52428800 Bytes (52 MB) kopiert, 0,93555 Sekunden, 56,0 MB/s
debian:~# losetup -d /dev/loop0

# loop-aes: AES-256

debian:~# losetup -e AES256 -H random /dev/loop0 /dev/ram1
debian:~# dd if=/dev/zero of=/dev/loop0 bs=1M count=50
50+0 Datensätze ein
50+0 Datensätze aus
52428800 Bytes (52 MB) kopiert, 0,953818 Sekunden, 55,0 MB/s

# dm-crypt: AES-128

debian:~# modprobe padlock
debian:~# cryptsetup create dm-test /dev/ram1 --cipher 
aes-cbc-essiv:sha256 -s 128
Enter passphrase:
debian:~# dd if=/dev/zero of=/dev/mapper/dm-test bs=1M count=50
50+0 Datensätze ein
50+0 Datensätze aus
52428800 Bytes (52 MB) kopiert, 0,554618 Sekunden, 94,5 MB/s
debian:~# cryptsetup remove dm-test

# dm-crypt: AES-256

debian:~# cryptsetup create dm-test /dev/ram1 --cipher 
aes-cbc-essiv:sha256 -s 256
Enter passphrase:
debian:~# dd if=/dev/zero of=/dev/mapper/dm-test bs=1M count=50
50+0 Datensätze ein
50+0 Datensätze aus
52428800 Bytes (52 MB) kopiert, 0,560215 Sekunden, 93,6 MB/s

# openssl speed test: AES-128

debian:~# openssl speed -evp aes-128-cbc -engine padlock
engine "padlock" set.
Doing aes-128-cbc for 3s on 16 size blocks: 8799069 aes-128-cbc's in 3.01s
Doing aes-128-cbc for 3s on 64 size blocks: 5274283 aes-128-cbc's in 3.00s
Doing aes-128-cbc for 3s on 256 size blocks: 2049811 aes-128-cbc's in 3.00s
Doing aes-128-cbc for 3s on 1024 size blocks: 648022 aes-128-cbc's in 3.01s
Doing aes-128-cbc for 3s on 8192 size blocks: 94270 aes-128-cbc's in 3.00s
OpenSSL 0.9.8c 05 Sep 2006
built on: Thu Nov 30 22:28:56 UTC 2006
options:bn(64,32) md2(int) rc4(idx,int) des(ptr,risc1,16,long) 
aes(partial) blowfish(idx)
compiler: gcc -fPIC -DOPENSSL_PIC -DZLIB -DOPENSSL_THREADS -D_REENTRANT 
-DDSO_DLFCN -DHAVE_DLFCN_H -DL_ENDIAN -DTERMIO -O3 -march=i686 
-Wa,--noexecstack -g -Wall -DOPENSSL_BN_ASM_PART_WORDS 
-DOPENSSL_IA32_SSE2 -DSHA1_ASM -DMD5_ASM -DRMD160_ASM -DAES_ASM
available timing options: TIMES TIMEB HZ=100 [sysconf value]
timing function used: times
The 'numbers' are in 1000s of bytes per second processed.
type             16 bytes     64 bytes    256 bytes   1024 bytes   8192 
bytes
aes-128-cbc      46772.46k   112518.04k   174917.21k   220456.65k   
257419.95k

# openssl speed test: AES-256

debian:~# openssl speed -evp aes-256-cbc -engine padlock
engine "padlock" set.
Doing aes-256-cbc for 3s on 16 size blocks: 8651358 aes-256-cbc's in 3.01s
Doing aes-256-cbc for 3s on 64 size blocks: 5130751 aes-256-cbc's in 3.00s
Doing aes-256-cbc for 3s on 256 size blocks: 1916758 aes-256-cbc's in 3.00s
Doing aes-256-cbc for 3s on 1024 size blocks: 596974 aes-256-cbc's in 3.01s
Doing aes-256-cbc for 3s on 8192 size blocks: 85597 aes-256-cbc's in 3.00s
OpenSSL 0.9.8c 05 Sep 2006
built on: Thu Nov 30 22:28:56 UTC 2006
options:bn(64,32) md2(int) rc4(idx,int) des(ptr,risc1,16,long) 
aes(partial) blowfish(idx)
compiler: gcc -fPIC -DOPENSSL_PIC -DZLIB -DOPENSSL_THREADS -D_REENTRANT 
-DDSO_DLFCN -DHAVE_DLFCN_H -DL_ENDIAN -DTERMIO -O3 -march=i686 
-Wa,--noexecstack -g -Wall -DOPENSSL_BN_ASM_PART_WORDS 
-DOPENSSL_IA32_SSE2 -DSHA1_ASM -DMD5_ASM -DRMD160_ASM -DAES_ASM
available timing options: TIMES TIMEB HZ=100 [sysconf value]
timing function used: times
The 'numbers' are in 1000s of bytes per second processed.
type             16 bytes     64 bytes    256 bytes   1024 bytes   8192 
bytes
aes-256-cbc      45987.29k   109456.02k   163563.35k   203090.16k   
233736.87k

Can anybody tell me why the loop device is so slow even without encryption?
Compared to the openssl speed test the results for both loop-aes and 
dm-crypt
don't look very good.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070410084916</emailId><senderName>Simon Josefsson</senderName><senderEmail>simon@josefsson.org</senderEmail><timestampReceived>2007-04-10 08:49:16-0400</timestampReceived><subject>Re: Via Eden C7 padlock benchmarks</subject><body>

Torsten72 &lt;torsten.st@gmx.net&gt; writes:

&gt; # loop-aes: AES-128
...
&gt; 52428800 Bytes (52 MB) kopiert, 0,93555 Sekunden, 56,0 MB/s
...
&gt; # loop-aes: AES-256
...
&gt; 52428800 Bytes (52 MB) kopiert, 0,953818 Sekunden, 55,0 MB/s
...
&gt; # dm-crypt: AES-128
...
&gt; 52428800 Bytes (52 MB) kopiert, 0,554618 Sekunden, 94,5 MB/s
...
&gt; # dm-crypt: AES-256
...
&gt; 52428800 Bytes (52 MB) kopiert, 0,560215 Sekunden, 93,6 MB/s

Interesting results!  Even if people generally seems to prefer
dm-crypt over loop-aes, it is good to have statistics to back things
up.

&gt; Can anybody tell me why the loop device is so slow even without encryption?
&gt; Compared to the openssl speed test the results for both loop-aes and
&gt; dm-crypt
&gt; don't look very good.

Aren't you comparing apples and oranges here?  OpenSSL doesn't read
input from /dev/zero, nor does it write the output to a block device.

If you want to compare things properly, try comparing just the
encryption implementation of loop-aes/dm-crypt with that of OpenSSL.
Don't forget to compare compiler optimization flags too.

/Simon

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070410101908</emailId><senderName>Torsten72</senderName><senderEmail>torsten.st@gmx.net</senderEmail><timestampReceived>2007-04-10 10:19:08-0400</timestampReceived><subject>Re: Via Eden C7 padlock benchmarks</subject><body>

Simon Josefsson wrote:
&gt; Aren't you comparing apples and oranges here?  OpenSSL doesn't read
&gt; input from /dev/zero, nor does it write the output to a block device.
&gt;
&gt;   
I just did not expect such a big overhead for reading from / writing to
block devices.
The loop device with no encryption just passes through data but leads to
a slowdown from 537 MB/s to 138 MB/s if set on top of the ramdisk.



-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070421064316</emailId><senderName>"Wujiang Wanlida Textile Co.Ltd."</senderName><senderEmail>shao_cheng_textile001@yahoo.com.cn</senderEmail><timestampReceived>2007-04-21 06:43:16-0400</timestampReceived><subject>JOB OFFER!!!( REPRESENTATIVE NEEDED)</subject><body>


Dear Sir/Madam, 
 
I am Mr. Shao Cheng, It is my pleasure to write you in respect of our Company, \
Wujiang Wanlida Textile Co. Ltd.  Based No.6 The Third District Nanshan Road, \
Shengze, Wujiang City, Jiangsu Province. China. We are experts in the sale of Textile \
materials; we export into the Canada/America and parts Europe. 

We are searching for representatives who can help us establish a medium of getting \
our funds from our costumers in these areas as well as making payments through you to \
us. 

Please if interested in transacting business in view helping us, so our clients could \
make payment to you being a representative for us we will be very glad and \
compensations will be given and as well as other benefits.  Subject to your \
satisfaction you will be given the opportunity to negotiate your mode of which we \
will pay for your services as our representative/agent in Canada, America, and \
Europe. 

If interested forward information below to us 

1.FULL NAMES: 

2.RESIDENTIAL ADDRESS:

3.PHONE NUMBER: 

4.FAX NUMBER(IF ANY):    

5.OCCUPATION : 

6.COMPANY NAME: 

To this email:shao_cheng_textile001@yahoo.com.cn 
Note that no form of payment will be requested upfront in this endeavor.On our \
receipt of the above details we shall forward to our customer/clients to immediately \
contact you with the mode of payment. 

Thanks in advance, 

Mr. Shao Cheng.
Company Director.






-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070410151540</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-04-10 15:15:40-0400</timestampReceived><subject>Re: Via Eden C7 padlock benchmarks</subject><body>

Simon Josefsson wrote:
&gt; Torsten72 &lt;torsten.st@gmx.net&gt; writes:
&gt; &gt; # loop-aes: AES-128
&gt; ...
&gt; &gt; 52428800 Bytes (52 MB) kopiert, 0,93555 Sekunden, 56,0 MB/s
&gt; ...
&gt; &gt; # loop-aes: AES-256
&gt; ...
&gt; &gt; 52428800 Bytes (52 MB) kopiert, 0,953818 Sekunden, 55,0 MB/s
&gt; ...
&gt; &gt; # dm-crypt: AES-128
&gt; ...
&gt; &gt; 52428800 Bytes (52 MB) kopiert, 0,554618 Sekunden, 94,5 MB/s
&gt; ...
&gt; &gt; # dm-crypt: AES-256
&gt; ...
&gt; &gt; 52428800 Bytes (52 MB) kopiert, 0,560215 Sekunden, 93,6 MB/s
&gt; 
&gt; Interesting results!  Even if people generally seems to prefer
&gt; dm-crypt over loop-aes, it is good to have statistics to back things
&gt; up.

Simon,

Most people have not realized that loop-AES is using disk sector number and
data dependent IV computation, where data needs to be processed twice.
dm-crypt is taking a shortcut and using only disk sector number dependent IV
that stays same regardless of the data. If adversary is able to observe disk
read/write traffic, then dm-crypt leaks location of changed data. loop-AES
does not, because all cipher blocks in 512 byte disk sector CBC chain change
regardless of where plaintext data change is.

In padlock enabled loop version, only that AES CBC processing is using
hardware implementation. loop-AES IV computation (the other crypto
processing of data) is always using software. So, in padlock enabled case,
loop-AES vs. dm-crypt comparison is really software+hardware implementation
vs. hardware implementation for those crypto bits. In other x86/amd64 cases,
loop-AES vs. dm-crypt comparison is software+software implementation vs.
software implementation.


torsten.st@gmx.net,

Could you check that the VIA C7 processor was properly detected by loop-AES
code? If it was properly detected, then there should be "loop: padlock
hardware AES enabled" message in your kernel log. You can check that using
command "dmesg | grep loop" or "grep loop /var/log/messages". Padlock
enabled loop includes both software AES and padlock AES implementations. If
padlock detection fails, then code uses software AES implementation.

I ask this because when loop-AES padlock code was written, I only had older
VIA C3 processor programming manual. loop-AES code follows older VIA C3
padlock detection instructions. When C7 was new, a VIA representative
promised me C7 programming manual, but I never got it. Pinged twice, no
reply.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070421160555</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-04-21 16:05:55-0400</timestampReceived><subject>loop-aes on MIPS DSL Router</subject><body>

Hi all!

Since popular DSL Modems/Routers run some kind of Linux on a 32bit MIPS processor I \
ask myself if loop-aes source can be compiled for this platform as well. Someone \
claimed on his website \
http://nanl.de/blog/html/loop-aes-lauft-nun-auch-auf-der-nslu2.html to run loop-aes \
on a network storage link device. A popular DSL modem is the 7170 model from AVM \
http://www.avm.de/, an integrated DSL modem and WLAN router with 32MB ram and 8MB \
flash memory. This model can also handle attached hard disk drives via USB. \
Concerning processing power it offers a MIPS with about 200 MHz clock speed. So, can \
the loop-aes source package be compiled for MIPS or is this a bad idea? Hopefully my \
questions make sense to someone here.

Kind regards,
Peter

-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070428110652</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-04-28 11:06:52-0400</timestampReceived><subject>entropy of /dev/random vs. openssl rand</subject><body>

Hi,

I need to create a moderate amount of v3 keys for loop-aes and wonder
how/if the "openssl rand" implementation differs significantly from
/dev/random concerning entropy.

In case /dev/random and "openssl rand" are somewhat comparable, I
would just use the latter to create the keys.

However, I certainly don't want to use a /dev/urandom look-alike.

Any feedback appreciated.

--=20
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070428130218</emailId><senderName>Gisle_Sælensminde</senderName><senderEmail>gisle.salensminde@bccs.uib.no</senderEmail><timestampReceived>2007-04-28 13:02:18-0400</timestampReceived><subject>Re: entropy of /dev/random vs. openssl rand</subject><body>

markus reichelt wrote:
&gt; Hi,
&gt; 
&gt; I need to create a moderate amount of v3 keys for loop-aes and wonder
&gt; how/if the "openssl rand" implementation differs significantly from
&gt; /dev/random concerning entropy.
&gt; 
&gt; In case /dev/random and "openssl rand" are somewhat comparable, I
&gt; would just use the latter to create the keys.
&gt; 
&gt; 
Openssl actually uses /dev/urandom to generate random bytes on Linux and other \
systems that support it, possibly with some further filtering. On systems without a \
random device, a configuration file is used instead, since openssl is supposed to be \
compatible over a wide range of systems. Openssl rand should therefore be equivalent \
with the non-blocking /dev/urandom on Linux.

from openssl crypto/rand/rand_unix.c:

 /* Use a random entropy pool device. Linux, FreeBSD and OpenBSD
  * have this. Use /dev/urandom if you can as /dev/random may block
  * if it runs out of random entries.  */

&gt; However, I certainly don't want to use a /dev/urandom look-alike.
&gt; 
&gt; 

Whether the blocking behaviour of /dev/random is desirable is a matter of discussion. \
Some people argue that a periodically reseeded cryptographic-quality random number \
generator is as secure as a true random number generator for all practical purposes. \
It does then not make sense with a blocking generator like /dev/random. This view is \
much disputed, as can be seen if you read the archives of the Linux kernel mailing \
list. I personally can't think of any realistic scenario where /dev/random would make \
you safe while /dev/urandom would make you sorry. Some people seem to think \
differently, including you apparently  :-) , while the openssl people seem more \
concerned about the blocking behaviour of /dev/random. 

-Gisle



-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070421173715</emailId><senderName>Stephen Mollett</senderName><senderEmail>molletts@yahoo.com</senderEmail><timestampReceived>2007-04-21 17:37:15-0400</timestampReceived><subject>Re: loop-aes on MIPS DSL Router</subject><body>

On Saturday 21 Apr 2007, Peter_22@gmx.de wrote:
&gt; Since popular DSL Modems/Routers run some kind of Linux on a 32bit MIPS
&gt; processor I ask myself if loop-aes source can be compiled for this platform
&gt; as well. ...

You might want to take a look at www.openwrt.org - open-source firmware for 
router-type devices. The AVM 7170 is listed as "untested", so you'd be on 
your own (apart from any OpenWRT mailing-lists/fora) and on the bleeding-edge 
if you tried installing OpenWRT on it. It's got loads of RAM and flash, 
though, compared to many other routers.

Alternatively, you might be able to upload loop-aes kernel modules and 
userspace stuff to an unmodified one via some kind of debugging interface 
(for example, the Netgear DG834G can be accessed by telnet to get a shell 
prompt which can then be used to upload files).

It's worth a try and, as long as you don't try installing OpenWRT, I can't see 
that you could do it any harm.

Happy hacking!

Stephen

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070421181133</emailId><senderName>Georg Lukas</senderName><senderEmail>georg@boerde.de</senderEmail><timestampReceived>2007-04-21 18:11:33-0400</timestampReceived><subject>Re: loop-aes on MIPS DSL Router</subject><body>

Hello,

* Peter_22@gmx.de &lt;Peter_22@gmx.de&gt; [2007-04-21 18:27]:
&gt; Since popular DSL Modems/Routers run some kind of Linux on a 32bit
&gt; MIPS processor I ask myself if loop-aes source can be compiled for
&gt; this platform as well. Someone claimed on his website
&gt; http://nanl.de/blog/html/loop-aes-lauft-nun-auch-auf-der-nslu2.html to
&gt; run loop-aes on a network storage link device.

There is no reason why it should not work, there is also a report and
benchmark of loop-AES on openwrt:

http://nanl.de/blog/html/es-ist-getan-loopaes-lauft-auf-openwrt.html

(100mb in 5m 32s means a speed of ca. 300kbyte/s, far away from a
regular PC)

&gt; A popular DSL modem is
&gt; the 7170 model from AVM http://www.avm.de/, an integrated DSL modem
&gt; and WLAN router with 32MB ram and 8MB flash memory. This model can
&gt; also handle attached hard disk drives via USB. Concerning processing
&gt; power it offers a MIPS with about 200 MHz clock speed. So, can the
&gt; loop-aes source package be compiled for MIPS or is this a bad idea?
&gt; Hopefully my questions make sense to someone here.

You can look for the different fritz!box modding projects to get a
compiler and maybe the kernel sources. The last time I opened a
fritz!box, it had a 150MHz CPU, which would even further reduce the
possible throughput.

Some embedded routers (e.g. the Netgear WGT634U) also offer an embedded
crypto core based on the Sentry 5 (BCM55xx?) chipset - this probably
would highly improve loop-aes speed, but there is no driver available as
of yet.

Kind regards,
Georg Lukas
-- 
|| http://op-co.de ++  GCS/CM d? s: a-- C+++ UL+++ !P L+++ E--- W++  ++
|| gpg: 0x962FD2DE ||  N++ o? K- w---() O M V? PS+ PE-- Y+ PGP++ t*  ||
|| Ge0rG: euIRCnet ||  5 X+ R tv b+(+++) DI+(+++) D+ G e* h! r* !y+  ||
++ IRCnet OFTC OPN ||________________________________________________||

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070421183757</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-04-21 18:37:57-0400</timestampReceived><subject>Re: loop-aes on MIPS DSL Router</subject><body>

&gt; Stephen Mollett &lt;molletts@yahoo.com&gt; wrote:
&gt; You might want to take a look at www.openwrt.org - open-source firmware
&gt; for 
&gt; router-type devices. The AVM 7170 is listed as "untested", so you'd be on 
&gt; your own (apart from any OpenWRT mailing-lists/fora) and on the
&gt; bleeding-edge 
&gt; if you tried installing OpenWRT on it. It's got loads of RAM and flash, 
&gt; though, compared to many other routers.

Thanks for this first advice! http://openwrt.org/ looks promising indeed. There seem \
to be two approaches. First, installing so-called Mods to an untampered firmware. The \
site http://wiki.ip-phone-forum.de/software:ds-mod:start offers a Mod called \
Danisahne with some userspace programs, but no encryption module. Second approach \
would be a cross compiler for MIPS which means changing the firmware image and \
integrating loop-aes as module or into kernel. Anyway, my question whether or not the \
existing loop-aes code can be compiled for MIPS remains. None of the sites offers an \
encrypting solution.

Thanks for all hints and you interest.

Best regards,
Peter
-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070421190348</emailId><senderName>"S. Sakar"</senderName><senderEmail>serkan.sakar@gmx.net</senderEmail><timestampReceived>2007-04-21 19:03:48-0400</timestampReceived><subject>Re: loop-aes on MIPS DSL Router</subject><body>

Peter_22@gmx.de schrieb:
&gt; &gt; Stephen Mollett &lt;molletts@yahoo.com&gt; wrote:
&gt; &gt; You might want to take a look at www.openwrt.org - open-source firmware
&gt; &gt; for 
&gt; &gt; router-type devices. The AVM 7170 is listed as "untested", so you'd be on 
&gt; &gt; your own (apart from any OpenWRT mailing-lists/fora) and on the
&gt; &gt; bleeding-edge 
&gt; &gt; if you tried installing OpenWRT on it. It's got loads of RAM and flash, 
&gt; &gt; though, compared to many other routers.
&gt; 
&gt; Thanks for this first advice! http://openwrt.org/ looks promising indeed. There \
&gt; seem to be two approaches. First, installing so-called Mods to an untampered \
&gt; firmware. The site http://wiki.ip-phone-forum.de/software:ds-mod:start offers a Mod \
&gt; called Danisahne with some userspace programs, but no encryption module. Second \
&gt; approach would be a cross compiler for MIPS which means changing the firmware image \
&gt; and integrating loop-aes as module or into kernel. Anyway, my question whether or \
&gt; not the existing loop-aes code can be compiled for MIPS remains. None of the sites \
&gt; offers an encrypting solution. 
&gt; Thanks for all hints and you interest.
&gt; 
&gt; Best regards,
&gt; Peter
according to this german tutorial
http://nanl.de/tuts/hdd-encryption_openvpn.pdf loop-aes is working on
openwrt. aespipe for file encryption is also working.
the openwrt build environment makes it really easy to build your own
packages / firmware and with wlan-routers like the wl-500gP you also
have usb-support.

Regards,
Serkan

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070410171202</emailId><senderName>Torsten72</senderName><senderEmail>torsten.st@gmx.net</senderEmail><timestampReceived>2007-04-10 17:12:02-0400</timestampReceived><subject>Re: Via Eden C7 padlock benchmarks</subject><body>

Jari Ruusu schrieb:
&gt; torsten.st@gmx.net,
&gt;
&gt; Could you check that the VIA C7 processor was properly detected by loop-AES
&gt; code? If it was properly detected, then there should be "loop: padlock
&gt; hardware AES enabled" message in your kernel log. You can check that using
&gt; command "dmesg | grep loop" or "grep loop /var/log/messages". Padlock
&gt; enabled loop includes both software AES and padlock AES implementations. If
&gt; padlock detection fails, then code uses software AES implementation.
&gt;
&gt;   
the kernel prints these lines:

loop: padlock hardware AES enabled
loop: AES key scrubbing enabled
loop: loaded (max 8 devices)

The C7 would not be able to achieve 55 MB/s with a software implementation.

 &gt;
 &gt; I ask this because when loop-AES padlock code was written, I only had 
older
 &gt; VIA C3 processor programming manual. loop-AES code follows older VIA C3
 &gt; padlock detection instructions. When C7 was new, a VIA representative
 &gt; promised me C7 programming manual, but I never got it. Pinged twice, no
 &gt; reply.
 &gt;

But your padlock implementation obviously supports the new AES-256 mode 
of the C7, doesn't it?
Could loop-AES IV computation also be done in padlock and speed things up?


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070410185304</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-04-10 18:53:04-0400</timestampReceived><subject>Re: Via Eden C7 padlock benchmarks</subject><body>

Torsten72 wrote:
&gt; the kernel prints these lines:
&gt; 
&gt; loop: padlock hardware AES enabled
&gt; loop: AES key scrubbing enabled
&gt; loop: loaded (max 8 devices)

Ok, it is properly detected.

&gt; But your padlock implementation obviously supports the new AES-256 mode
&gt; of the C7, doesn't it?

If I remember correctly, VIA C3 (stepping 8) has a bug/flaw that prevents
AES192 and AES256 hardware extended key generation, but that bug/flaw can be
worked around by doing extended key generation using software. A bit in
xcrypt instruction control word defines whether the instruction uses
software precomputed extended key or whether it should do that key setup
work at the time the instruction is executed. Precomputed extended key is of
course faster because the xcrypt instruction can skip some time consuming
work.

loop-AES always uses software precomputed extended key, so that VIA C3
bug/flaw does not affect loop-AES in any way. Extended key precomputing is
done only at losetup time, and does not affect run time performance.

&gt; Could loop-AES IV computation also be done in padlock and speed things up?

VIA C3 does not have a instruction to do that. C7 specs I have not seen yet.

If someone has distributable copy of VIA C7 programming specs, feel free to
send a copy or download URL to me.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070410212208</emailId><senderName>Torsten72</senderName><senderEmail>torsten.st@gmx.net</senderEmail><timestampReceived>2007-04-10 21:22:08-0400</timestampReceived><subject>Re: Via Eden C7 padlock benchmarks</subject><body>

Jari Ruusu wrote:
&gt; VIA C3 does not have a instruction to do that. C7 specs I have not seen yet.
&gt;
&gt; If someone has distributable copy of VIA C7 programming specs, feel free to
&gt; send a copy or download URL to me
Hi Jari,

there is a via padlock sdk which is available at
http://www.viaarena.com/Download/PadlockSDK_2.0.1_Release_20060803.zip
If you have a look at the source perhaps you will know how to use the 
new instructions.

see page 19 of the following file for a comparison of C3 and C7 features
http://www.via.com.tw/en/downloads/whitepapers/initiatives/padlock/VIAPadLockSecurityEngine.pdf




-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070412183833</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-04-12 18:38:33-0400</timestampReceived><subject>Re: Via Eden C7 padlock benchmarks</subject><body>

Torsten72 wrote:
&gt; there is a via padlock sdk which is available at
&gt; http://www.viaarena.com/Download/PadlockSDK_2.0.1_Release_20060803.zip
&gt; If you have a look at the source perhaps you will know how to use the
&gt; new instructions.

Some information can be extracted from source code, but important
information that is still missing about SHA1 and SHA256 hashes:

- What processor flags are modified and how.
- What processor registers are modified and how.
- Description of all opcode bits. Example source uses constant opcode bytes,
  but no info is available about what each bit means.
- What opcodes to use when data to hash is not contiguous. In loop-AES
  kernel driver code, input data to hash is in three non-contiguous chunks.
- Description of how context switching is handled.
- What exceptions occur under what conditions.

VIA supplied example source code is for userland use, and is not suitable
for kernel driver use. First source file that I looked at was
src/padlock_sha.c and I spotted a showstopper bug in less than 10 seconds of
reading (malloc without checking return value).

Kernel driver use of SHA1 and SHA256 would need new interface code to be
written, and above mentioned missing info must be available before that can
be done.

&gt; see page 19 of the following file for a comparison of C3 and C7 features
&gt; http://www.via.com.tw/en/downloads/whitepapers/initiatives/padlock/VIAPadLockSecurityEngine.pdf

That PDF is just marketing propaganda. Features mentioned, but no info about
how to bit-bang the device.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070301101710</emailId><senderName>"Sales Team"</senderName><senderEmail>salesmaker@gmail.com</senderEmail><timestampReceived>2007-03-01 10:17:10-0400</timestampReceived><subject>Nokia N93i</subject><body>

Nokia N93i
qty:460 phones
minimum order quantity 20 phones
door to door delivery price:US$ 365=2E00
contact us for details=2E=2E=2E
Brnad new with fulkl packing=2E=2E=2E

JD Group Singapore

[Attachment #3 (text/html)]

&lt;P&gt; &lt;/P&gt;
&lt;P&gt;Nokia N93i&lt;/P&gt;
&lt;P&gt;qty:460 phones&lt;/P&gt;
&lt;P&gt;minimum order quantity 20 phones&lt;/P&gt;
&lt;P&gt;door to door delivery price:US$ 365.00&lt;/P&gt;
&lt;P&gt;contact us for details...&lt;/P&gt;
&lt;P&gt;Brnad new with fulkl packing...&lt;/P&gt;
&lt;P&gt;&lt;IMG alt="C:\Documents and Settings\Jon\Desktop\n93i_main1.jpg" src="C:\Documents \
and Settings\Jon\Desktop\n93i_main1.jpg"&gt;&lt;/P&gt; &lt;P&gt;JD Group Singapore&lt;/P&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070306060630</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-03-06 06:06:30-0400</timestampReceived><subject>Re: Announce loop-AES-v3.1f file/swap crypto package</subject><body>

On 3/5/07, Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; Using autohell tools for installation of two text files is overkill.

I am aware of that, but it will let you be more flexible in future.
I can resend something with simple configure script and a make file if you like.

&gt; Both of your files include text "Written by Jari Ruusu
&gt; &lt;jariruusu@users.sourceforge.net&gt;". Both you and I know that I didn't write
&gt; those files. Why are you publishing files with such misleading info?

Sorry... I thought it is best if you maintain the whole package, so
the copyright is yours.
I was just willing to help.

Best Regards,
Alon Bar-Lev.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070222175120</emailId><senderName>Phil H</senderName><senderEmail>philtickle200@yahoo.com</senderEmail><timestampReceived>2007-02-22 17:51:20-0400</timestampReceived><subject>Tripl: a simple front-end for multiple encryption</subject><body>

Hi
 
 I know people probably have their own scripts for creating and mounting loop-aes \
encrypted devices with loop-aes-ciphers and there's probably a number around, but \
here's mine anyway.  The default setting is to embed keys (other than the first, \
which must be detatched), in the previous loop device.  I've tested it up to the \
maxmimum number of loop devices by extending the arrays CIPHER,  MODULE etc but of \
course that is extremely ridiculous (!) and was only for testing purposes.  
 Thought I'd post it and get a bit of review since I want to distribute it, so feel \
free to try it out on a spare partition or floppy. Of course change the settings at \
the beginning of the script to suit.   It's still a bit alpha and I'm not a linux \
veteran so go easy on me.  
 Note:  I always have /sbin in PATH, but if you don't then you need to do:
 
 export PATH="/sbin:${PATH}"
 
 before running the scri[pt.
 
 ==================================================================================
 
 
 #!/bin/bash
 
 # tripl - single or multiple encryption with loop-aes-ciphers
 # (C) WDef 2006 v0.1 &lt;WDef200 at yahoo dot co dot uk&gt;
 
 # Simple tool to do single or multiple encrypted partitions using loop-aes v3.x \
(multikey) and loop-aes-ciphers.  # Automates gpg key generation, allocation and \
setup/pulldown of loops, layered embedding of keys, filesystem checking etc.  # Does \
not write to /etc/fstab.  # Note: multiple encryption can use a lot of cpu at times.
 # Single or double encryption with a good password is probably sufficient (really!).
 # Script skips loops that are already in use and only pulls down encrypted loops on \
umounting.  # Blowfish is not supported since it does not work with multiline \
keychains in loopaes and   # is not recommended for large amounts of data.
 
 # This is free software. No warranty. Use AYOR.
 
 #===================// USER SETTINGS //============================
 
 # Put your settings here.
 # Alternatively, make these settings in a file $HOME/.triplrc, where $HOME is root's \
home dir.  # These will override any made here.
 
 DEVICE=/dev/hda7
 MOUNTPT=/mnt/test
 
 MODE=3        # Triple encryption
 #MODE=2        # Double encryption
 #MODE=1        # Single encryption
 
 # You can rearrange the order of ciphers, but remember 
 #- module order must match order of ciphers, and
 #- you'll have to run tripl -new if you change this (so back up data first).
 
 CIPHER[1]=serpent128
 CIPHER[2]=AES128
 CIPHER[3]=twofish128
 
 MODULE[1]=loop_serpent
 MODULE[2]=loop
 MODULE[3]=loop_twofish
 
 key[1]=/mnt/hda9/test1
 key[2]=/mnt/hda9/test2
 key[3]=/mnt/hda9/test3
 
 #EMBED=no
 EMBED=yes    # If enabled, the user only need specify one external gpg-encrypted key \
                (key[1]) in user settings.
         # Other keys will be automatically generated for each encryption layer by \
                tripl -new (prompts user
         # for passwords) and successively embedded in the encryption layer previous \
                to that being set up.
         # This also means an attacker has to crack the first encryption layer just \
to get the   # encrypted key for the second, and so on. No effect if MODE=1
         
         # If unset, a seperate external (detached) key should be created with tripl \
                -mkkey for each 
         # encryption layer and set in the user settings prior to running tripl -new.
 
 MAXLOOPS=8    # Usual default number of loops in linux
 
 FORCE=true    # Kills processes accessing files on mount point in order to force a \
dismount.  #FORCE=false
 
 SHOWKEY=yes    # Show 1st external keyfile name when setting up new partition with \
embedded keys.  
 GPGHOME="${HOME}/.gnupg"
 
 #=================================================================
 
 help(){
 cat &lt;&lt;"EOF"
 tripl - single or multiple encryption with loop-aes-ciphers
 (c) WDef 2007 v0.1
 Usage: tripl OPTION
 Option:
     -m = mount
     -u = unmount
     -mkkey = make key
     -new = set up encrypted partition (destroys data!)
     -fix = check, repair encrypted filesystem
     -h = this
 Set partition name, keys, order of ciphers, mountpoint and MODE 
 (1,2,3 for single,double,triple encryption) at top of script.
 EOF
 }
 
 
 check_losetup(){
 if $(which strings &amp;&gt;/dev/null); then
     strings /sbin/losetup | grep -q -s multi-key-v3
     return $?
 elif grep --version | grep -q 'GNU grep' 2&gt;/dev/null; then
     grep -q -a -s multi-key-v3 /sbin/losetup
     return $?
 else
     echo "Error: can't check losetup compatibility"
     echo "Install strings or GNU grep before proceeding."
     exit 1
 fi
 }
 
 
 run_checks(){
 if [ $EUID -ne 0 ]; then echo "You're not root."; exit 1; fi
 if [ $# -ne 1 ]; then help; exit 1; fi
 if ! which gpg &amp;&gt;/dev/null; then echo "Can't find GnuPG"; exit 1; fi
 if ! check_losetup; then 
     echo "Error: your losetup is incompatible with loop-aes v3.x"
     echo "See the loop-aes README for details."
     exit 1
 fi
 }
 
 loopfree()
 # find free loop
 {
 j=0
 while  losetup -a | awk ' { print $1 } '| grep -q loop$j; do
     (( j = j + 1 ))
     [ $j -eq $MAXLOOPS ] &amp;&amp; return 1    # j=8 means no free loop was found 
 done
 NEXTLP=$j
 return 0
 
 }
 
 
 pull_down(){
 X=$1
 if grep -q "${MOUNTPT}" /etc/mtab; then
     if $FORCE; then fuser -m -k ${MOUNTPT}; fi
     umount ${MOUNTPT}
 fi
 # Pull down all encrypted (only) loops
 losetup -a | awk -F: '/^\/dev\/loop.+encryption.+multi-key-v3/ {print $1}' | sort -r \
| while read D; do  losetup -d $D || X=$?
             done
 exit $X
 
 }
 
 makekey(){
 head -c 2925 /dev/random | uuencode -m - | head -n 66 | tail -n 65 \
 | gpg --symmetric -a
 return
 }
 
 
 setup_loops(){
 
 NUMBUSY=$(losetup -a|wc -l)
 (( NUMFREELOOPS = MAXLOOPS - NUMBUSY ))
 if [ $NUMFREELOOPS -lt $MODE ]; then
     echo "Insufficient loops free ($NUMFREELOOPS)"
     echo "Require $MODE free loop device(s)."
     exit 1
 fi
 echo
 if [ $EMBED = yes ]; then
     if [ ! -e "${key[1]}" ]; then
         echo "Can't find key ${key[1]} - need one external key for embedded mode."
         exit 1
     fi
     if [ "${1}" = new ]; then
         [ $SHOWKEY = yes ] &amp;&amp; echo "&gt;&gt;&gt;&gt;&gt;&gt; Using key ${key[1]} for loop1 &lt;&lt;&lt;&lt;&lt;&lt;"
     else
         echo "Enter $MODE password(s):"
     fi
 else
     echo "Enter $MODE password(s):"
 fi
 
 
 for k in $(seq 1 $MODE); do
 
     modprobe ${MODULE[k]} || pull_down 1
     loopfree || pull_down 1
     TOPLOOP="/dev/loop$NEXTLP"
     # Taking care to get previous loop-aes encrypted loop only:
     PREVIOUSLOOP=$(losetup -a | awk -F: '/^\/dev\/loop.+encryption.+multi-key-v3/ \
{print $1}' | tail -n 1 )      if [ $k -eq 1 ]; then
         D=${DEVICE}
     else
         D=${PREVIOUSLOOP}
     fi
     if [ $EMBED = yes ]; then
         if [ $k -eq 1 ]; then
             # No offset key on first loop
             echo "Setting up loop1 .."
             losetup -e ${CIPHER[1]} -K ${key[1]} -G ${GPGHOME} ${TOPLOOP} ${D} || \
pull_down 1  else
             if [ "${1}" = new ]; then
                 echo
                 echo "&gt;&gt;&gt;&gt;&gt;&gt; Making embedded key for loop$k &lt;&lt;&lt;&lt;&lt;&lt;"
                 echo "Enter new password at three prompts .."
                 yes "" | dd of=${PREVIOUSLOOP} bs=512 count=16
                 makekey | dd of=${PREVIOUSLOOP} conv=notrunc
             fi
             echo "Setting up loop$k .."
             losetup -e ${CIPHER[k]} -K ${PREVIOUSLOOP} -o 8192 -G ${GPGHOME} \
${TOPLOOP} ${PREVIOUSLOOP} || pull_down 1  
         fi
     else
         if [ ! -e "${key[k]}" ]; then
             echo "Can't find key no. $k ${key[k]}"
             pull_down 1
         fi
         echo "Setting up loop$k .."
         losetup -e ${CIPHER[k]} -K ${key[k]} -G ${GPGHOME} ${TOPLOOP} ${D} || \
pull_down 1  fi
 done
 
 }
 
 #=====================// MAIN //==================================
 
 [ -f "${HOME}/.triplrc" ] &amp;&amp; . ${HOME}/.triplrc
 
 run_checks $*
 
 case $1 in
 
 -new)
 echo
 echo "WARNING: this will destroy all data on $DEVICE !"
 echo "~~~~~~~"
 
 while true; do
     echo -n "Last chance to exit. Are you sure you want to proceed? (YeS/n) "
     read
     case $REPLY in
         YeS) break ;;
         n|N|n*|N*) exit 0;;
         y|y*|Y|Yes|YE*) echo "You must type YeS to proceed.";;
         *) echo "Invalid response.";;
     esac
 done
 echo "Shredding ${DEVICE} .. pls wait .."
 shred -n 1 ${DEVICE}
 setup_loops new
 echo
 echo "&gt;&gt;&gt;&gt;&gt;&gt; Making filesystem &lt;&lt;&lt;&lt;&lt;&lt;"
 mkfs -t ext2 ${TOPLOOP}
 pull_down 0 ;;
 
 
 -m)
 if grep -q "${MOUNTPT}" /etc/mtab; then echo "${MOUNTPT} in use."; exit 1; fi
 setup_loops
 mount -t ext2 ${TOPLOOP} ${MOUNTPT}
 if grep -q "${TOPLOOP}" /etc/mtab; then echo "OK"; else pull_down 1; fi ;;
 
 -u) 
 pull_down 0 ;;
 
 -mkkey)
 while true; do
     echo -n "Enter path and filename of new key (CNTRL-C = quit): "
     read
     DIR=$(dirname ${REPLY})
     if [ -e "${REPLY}" ]; then
         echo "File $REPLY already exists."; continue
     fi
     if [ ! -d "${DIR}" ]; then
         echo "Invalid path ${DIR}" ; continue
     fi
     if [ ! -w "${DIR}" ]; then
         echo "${DIR} not writeable" ; continue
     fi
     break
 done
 echo "Making key ${REPLY} .."
 makekey &gt;${REPLY}
 if [ $? -eq 0 ]; then
     echo "Done."
     echo "Set your new key location at top of the script."
 else
     rm -f ${REPLY} # gpg will provide error messages if it fails.
     exit 1
 fi ;;
 
 
 -fix)
 if losetup -a | grep -q ${DEVICE} ; then
     echo "${DEVICE} in use."
     exit 1
 fi
 setup_loops
 fsck -t ext2 -C -f -y ${TOPLOOP}
 echo "Done."
 pull_down 0;;
 
 
 -h) help ;;
 
 *) 
 echo "Unknown option $1. Try tripl -h"; exit 1 ;;
 
 esac
 
 exit 0
 
 
 
 

 
---------------------------------
8:00? 8:25? 8:40?  Find a flick in no time
 with theYahoo! Search movie showtime shortcut.


[Attachment #3 (text/html)]

Hi&lt;br&gt; &lt;br&gt; I know people probably have their own scripts for creating and mounting \
loop-aes encrypted devices with loop-aes-ciphers and there's probably a number \
around, but here's mine anyway.  The default setting is to embed keys (other \
than the first, which must be detatched), in the previous loop device.  I've \
tested it up to the maxmimum number of loop devices by extending the arrays \
CIPHER,  MODULE etc but of course that is extremely ridiculous (!) and was only \
for testing purposes.&lt;br&gt; &lt;br&gt; Thought I'd post it and get a bit of review since I \
want to distribute it, so feel free to try it out on a spare partition or floppy. Of \
course change the settings at the beginning of the script to suit.   It's still \
a bit alpha and I'm not a linux veteran so go easy on me.&lt;br&gt; &lt;br&gt; Note:  I \
always have /sbin in PATH, but if you don't then you need to do:&lt;br&gt; &lt;br&gt; export \
PATH="/sbin:${PATH}"&lt;br&gt; &lt;br&gt; before running the scri[pt.&lt;br&gt; &lt;br&gt;  \
==================================================================================&lt;br&gt; \
&lt;br&gt; &lt;br&gt; #!/bin/bash&lt;br&gt; &lt;br&gt; # tripl - single or multiple encryption with \
loop-aes-ciphers&lt;br&gt; # (C) WDef 2006 v0.1 &lt;WDef200 at yahoo dot co dot uk&gt;&lt;br&gt; \
&lt;br&gt; # Simple tool to do single or multiple encrypted partitions using loop-aes v3.x \
(multikey) and loop-aes-ciphers.&lt;br&gt; # Automates gpg key generation, allocation and \
setup/pulldown of loops, layered embedding of keys, filesystem checking etc.&lt;br&gt; # \
Does not write to /etc/fstab.&lt;br&gt; # Note: multiple encryption can use a lot of cpu at \
times.&lt;br&gt; # Single or double encryption with a good password is probably sufficient \
(really!).&lt;br&gt; # Script skips loops that are already in use and only pulls down \
encrypted loops on umounting.&lt;br&gt; # Blowfish is not supported since it does not work \
with multiline keychains in loopaes and &lt;br&gt; # is not recommended for large amounts \
of data.&lt;br&gt; &lt;br&gt; # This is free software. No warranty. Use  AYOR.&lt;br&gt; &lt;br&gt; \
#===================// USER SETTINGS //============================&lt;br&gt; &lt;br&gt; # Put \
your settings here.&lt;br&gt; # Alternatively, make these settings in a file \
$HOME/.triplrc, where $HOME is root's home dir.&lt;br&gt; # These will override any made \
here.&lt;br&gt; &lt;br&gt; DEVICE=/dev/hda7&lt;br&gt; MOUNTPT=/mnt/test&lt;br&gt; &lt;br&gt; \
MODE=3        # Triple encryption&lt;br&gt; \
#MODE=2        # Double encryption&lt;br&gt; \
#MODE=1        # Single encryption&lt;br&gt; &lt;br&gt; # You can \
rearrange the order of ciphers, but remember &lt;br&gt; #- module order must match order of \
ciphers, and&lt;br&gt; #- you'll have to run tripl -new if you change this (so back up data \
first).&lt;br&gt; &lt;br&gt; CIPHER[1]=serpent128&lt;br&gt; CIPHER[2]=AES128&lt;br&gt; \
CIPHER[3]=twofish128&lt;br&gt; &lt;br&gt; MODULE[1]=loop_serpent&lt;br&gt; MODULE[2]=loop&lt;br&gt; \
MODULE[3]=loop_twofish&lt;br&gt; &lt;br&gt; key[1]=/mnt/hda9/test1&lt;br&gt; key[2]=/mnt/hda9/test2&lt;br&gt; \
key[3]=/mnt/hda9/test3&lt;br&gt; &lt;br&gt; #EMBED=no&lt;br&gt;  EMBED=yes    # If \
enabled, the user only need specify one external gpg-encrypted key (key[1]) in user \
settings.&lt;br&gt;         # Other keys will be \
automatically generated for each encryption layer by tripl -new (prompts user&lt;br&gt; \
        # for passwords) and successively embedded in \
the encryption layer previous to that being set up.&lt;br&gt;     \
    # This also means an attacker has to crack the first encryption \
layer just to get the &lt;br&gt;         # encrypted key for \
the second, and so on. No effect if MODE=1&lt;br&gt;         \
&lt;br&gt;         # If unset, a seperate external (detached) \
key should be created with tripl -mkkey for each &lt;br&gt;     \
    # encryption layer and set in the user settings prior to running \
tripl -new.&lt;br&gt; &lt;br&gt; MAXLOOPS=8    # Usual  default number of loops in \
linux&lt;br&gt; &lt;br&gt; FORCE=true    # Kills processes accessing files on \
mount point in order to force a dismount.&lt;br&gt; #FORCE=false&lt;br&gt; &lt;br&gt; \
SHOWKEY=yes    # Show 1st external keyfile name when setting up new \
partition with embedded keys.&lt;br&gt; &lt;br&gt; GPGHOME="${HOME}/.gnupg"&lt;br&gt; &lt;br&gt; \
#=================================================================&lt;br&gt; &lt;br&gt; \
help(){&lt;br&gt; cat &lt;&lt;"EOF"&lt;br&gt; tripl - single or multiple encryption with \
loop-aes-ciphers&lt;br&gt; (c) WDef 2007 v0.1&lt;br&gt; Usage: tripl OPTION&lt;br&gt; Option:&lt;br&gt; \
    -m = mount&lt;br&gt;     -u = unmount&lt;br&gt; \
    -mkkey = make key&lt;br&gt;     -new = set up encrypted \
partition (destroys data!)&lt;br&gt;     -fix = check, repair encrypted \
filesystem&lt;br&gt;     -h = this&lt;br&gt; Set partition name, keys, order of \
ciphers, mountpoint and MODE &lt;br&gt; (1,2,3 for single,double,triple encryption) at top \
of script.&lt;br&gt;  EOF&lt;br&gt; }&lt;br&gt; &lt;br&gt; &lt;br&gt; check_losetup(){&lt;br&gt; if $(which strings \
&amp;&gt;/dev/null); then&lt;br&gt;     strings /sbin/losetup | grep -q -s \
multi-key-v3&lt;br&gt;     return $?&lt;br&gt; elif grep --version | grep -q 'GNU \
grep' 2&gt;/dev/null; then&lt;br&gt;     grep -q -a -s multi-key-v3 \
/sbin/losetup&lt;br&gt;     return $?&lt;br&gt; else&lt;br&gt;     echo \
"Error: can't check losetup compatibility"&lt;br&gt;     echo "Install \
strings or GNU grep before proceeding."&lt;br&gt;     exit 1&lt;br&gt; fi&lt;br&gt; \
}&lt;br&gt; &lt;br&gt; &lt;br&gt; run_checks(){&lt;br&gt; if [ $EUID -ne 0 ]; then echo "You're not root."; \
exit 1; fi&lt;br&gt; if [ $# -ne 1 ]; then help; exit 1; fi&lt;br&gt; if ! which gpg \
&amp;&gt;/dev/null; then echo "Can't find GnuPG"; exit 1; fi&lt;br&gt; if ! check_losetup; \
then &lt;br&gt;     echo "Error: your losetup is incompatible with loop-aes \
v3.x"&lt;br&gt;     echo "See the loop-aes README for details."&lt;br&gt; \
    exit  1&lt;br&gt; fi&lt;br&gt; }&lt;br&gt; &lt;br&gt; loopfree()&lt;br&gt; # find free loop&lt;br&gt; \
{&lt;br&gt; j=0&lt;br&gt; while  losetup -a | awk ' { print $1 } '| grep -q loop$j; do&lt;br&gt; \
    (( j = j + 1 ))&lt;br&gt;     [ $j -eq $MAXLOOPS ] \
&amp;&amp; return 1    # j=8 means no free loop was found &lt;br&gt; \
done&lt;br&gt; NEXTLP=$j&lt;br&gt; return 0&lt;br&gt; &lt;br&gt; }&lt;br&gt; &lt;br&gt; &lt;br&gt; pull_down(){&lt;br&gt; X=$1&lt;br&gt; if \
grep -q "${MOUNTPT}" /etc/mtab; then&lt;br&gt;     if $FORCE; then fuser -m \
-k ${MOUNTPT}; fi&lt;br&gt;     umount ${MOUNTPT}&lt;br&gt; fi&lt;br&gt; # Pull down all \
encrypted (only) loops&lt;br&gt; losetup -a | awk -F: \
'/^\/dev\/loop.+encryption.+multi-key-v3/ {print $1}' | sort -r | while read D; \
do&lt;br&gt;             losetup -d $D || \
X=$?&lt;br&gt;             done&lt;br&gt; exit \
$X&lt;br&gt; &lt;br&gt; }&lt;br&gt; &lt;br&gt; makekey(){&lt;br&gt; head -c 2925 /dev/random | uuencode -m - | head \
-n 66 | tail -n 65 \&lt;br&gt; | gpg --symmetric -a&lt;br&gt;  return&lt;br&gt; }&lt;br&gt; &lt;br&gt; &lt;br&gt; \
setup_loops(){&lt;br&gt; &lt;br&gt; NUMBUSY=$(losetup -a|wc -l)&lt;br&gt; (( NUMFREELOOPS = MAXLOOPS - \
NUMBUSY ))&lt;br&gt; if [ $NUMFREELOOPS -lt $MODE ]; then&lt;br&gt;     echo \
"Insufficient loops free ($NUMFREELOOPS)"&lt;br&gt;     echo "Require $MODE \
free loop device(s)."&lt;br&gt;     exit 1&lt;br&gt; fi&lt;br&gt; echo&lt;br&gt; if [ $EMBED = \
yes ]; then&lt;br&gt;     if [ ! -e "${key[1]}" ]; then&lt;br&gt; \
        echo "Can't find key ${key[1]} - need one \
external key for embedded mode."&lt;br&gt;         exit 1&lt;br&gt; \
    fi&lt;br&gt;     if [ "${1}" = new ]; then&lt;br&gt; \
        [ $SHOWKEY = yes ] &amp;&amp; echo \
"&gt;&gt;&gt;&gt;&gt;&gt; Using key ${key[1]} for loop1 &lt;&lt;&lt;&lt;&lt;&lt;"&lt;br&gt; \
    else&lt;br&gt;         echo "Enter $MODE \
password(s):"&lt;br&gt;     fi&lt;br&gt; else&lt;br&gt;      echo "Enter \
$MODE password(s):"&lt;br&gt; fi&lt;br&gt; &lt;br&gt; &lt;br&gt; for k in $(seq 1 $MODE); do&lt;br&gt; &lt;br&gt; \
    modprobe ${MODULE[k]} || pull_down 1&lt;br&gt;     \
loopfree || pull_down 1&lt;br&gt;     TOPLOOP="/dev/loop$NEXTLP"&lt;br&gt; \
    # Taking care to get previous loop-aes encrypted loop only:&lt;br&gt; \
    PREVIOUSLOOP=$(losetup -a | awk -F: \
'/^\/dev\/loop.+encryption.+multi-key-v3/ {print $1}' | tail -n 1 )    \
&lt;br&gt;     if [ $k -eq 1 ]; then&lt;br&gt;     \
    D=${DEVICE}&lt;br&gt;     else&lt;br&gt;     \
    D=${PREVIOUSLOOP}&lt;br&gt;     fi&lt;br&gt;     \
if [ $EMBED = yes ]; then&lt;br&gt;         if [ $k -eq 1 ]; \
then&lt;br&gt;             # No offset key on \
first loop&lt;br&gt;             echo "Setting \
up loop1 .."&lt;br&gt;              losetup -e \
${CIPHER[1]} -K ${key[1]} -G ${GPGHOME} ${TOPLOOP} ${D} || pull_down 1&lt;br&gt; \
        else&lt;br&gt;         \
    if [ "${1}" = new ]; then&lt;br&gt;     \
            echo&lt;br&gt;     \
            echo \
"&gt;&gt;&gt;&gt;&gt;&gt; Making embedded key for loop$k \
&lt;&lt;&lt;&lt;&lt;&lt;"&lt;br&gt;         \
        echo "Enter new password at three prompts \
.."&lt;br&gt;                 \
yes "" | dd of=${PREVIOUSLOOP} bs=512 count=16&lt;br&gt;     \
            makekey | dd \
of=${PREVIOUSLOOP} conv=notrunc&lt;br&gt;         \
    fi&lt;br&gt;              \
echo "Setting up loop$k .."&lt;br&gt;         \
    losetup -e ${CIPHER[k]} -K ${PREVIOUSLOOP} -o 8192 -G ${GPGHOME} \
${TOPLOOP} ${PREVIOUSLOOP} || pull_down 1&lt;br&gt; &lt;br&gt;     \
    fi&lt;br&gt;     else&lt;br&gt;     \
    if [ ! -e "${key[k]}" ]; then&lt;br&gt;     \
        echo "Can't find key no. $k ${key[k]}"&lt;br&gt; \
            pull_down 1&lt;br&gt; \
        fi&lt;br&gt;         \
echo "Setting up loop$k .."&lt;br&gt;         losetup -e \
${CIPHER[k]} -K ${key[k]} -G ${GPGHOME} ${TOPLOOP} ${D} || pull_down 1&lt;br&gt; \
    fi&lt;br&gt; done&lt;br&gt; &lt;br&gt; }&lt;br&gt; &lt;br&gt; #=====================// MAIN \
//==================================&lt;br&gt; &lt;br&gt; [ -f "${HOME}/.triplrc" ] &amp;&amp; .  \
${HOME}/.triplrc&lt;br&gt; &lt;br&gt; run_checks $*&lt;br&gt; &lt;br&gt; case $1 in&lt;br&gt; &lt;br&gt; -new)&lt;br&gt; \
echo&lt;br&gt; echo "WARNING: this will destroy all data on $DEVICE !"&lt;br&gt; echo \
"~~~~~~~"&lt;br&gt; &lt;br&gt; while true; do&lt;br&gt;     echo -n "Last chance to \
exit. Are you sure you want to proceed? (YeS/n) "&lt;br&gt;     read&lt;br&gt; \
    case $REPLY in&lt;br&gt;         YeS) \
break ;;&lt;br&gt;         n|N|n*|N*) exit 0;;&lt;br&gt; \
        y|y*|Y|Yes|YE*) echo "You must type YeS to \
proceed.";;&lt;br&gt;         *) echo "Invalid \
response.";;&lt;br&gt;     esac&lt;br&gt; done&lt;br&gt; echo "Shredding ${DEVICE} .. \
pls wait .."&lt;br&gt; shred -n 1 ${DEVICE}&lt;br&gt; setup_loops new&lt;br&gt; echo&lt;br&gt; echo \
"&gt;&gt;&gt;&gt;&gt;&gt; Making filesystem &lt;&lt;&lt;&lt;&lt;&lt;"&lt;br&gt; mkfs -t \
ext2 ${TOPLOOP}&lt;br&gt; pull_down 0 ;;&lt;br&gt; &lt;br&gt; &lt;br&gt; -m)&lt;br&gt; if grep -q "${MOUNTPT}" \
/etc/mtab; then echo "${MOUNTPT} in  use."; exit 1; fi&lt;br&gt; setup_loops&lt;br&gt; mount -t \
ext2 ${TOPLOOP} ${MOUNTPT}&lt;br&gt; if grep -q "${TOPLOOP}" /etc/mtab; then echo "OK"; \
else pull_down 1; fi ;;&lt;br&gt; &lt;br&gt; -u) &lt;br&gt; pull_down 0 ;;&lt;br&gt; &lt;br&gt; -mkkey)&lt;br&gt; while \
true; do&lt;br&gt;     echo -n "Enter path and filename of new key (CNTRL-C \
= quit): "&lt;br&gt;     read&lt;br&gt;     DIR=$(dirname \
${REPLY})&lt;br&gt;     if [ -e "${REPLY}" ]; then&lt;br&gt;     \
    echo "File $REPLY already exists."; continue&lt;br&gt; \
    fi&lt;br&gt;     if [ ! -d "${DIR}" ]; then&lt;br&gt; \
        echo "Invalid path ${DIR}" ; continue&lt;br&gt; \
    fi&lt;br&gt;     if [ ! -w "${DIR}" ]; then&lt;br&gt; \
        echo "${DIR} not writeable" ; continue&lt;br&gt; \
    fi&lt;br&gt;     break&lt;br&gt; done&lt;br&gt; echo "Making key \
${REPLY} .."&lt;br&gt; makekey &gt;${REPLY}&lt;br&gt; if [ $? -eq 0 ]; then&lt;br&gt;  \
    echo "Done."&lt;br&gt;     echo "Set your new key \
location at top of the script."&lt;br&gt; else&lt;br&gt;     rm -f ${REPLY} # gpg \
will provide error messages if it fails.&lt;br&gt;     exit 1&lt;br&gt; fi ;;&lt;br&gt; \
&lt;br&gt; &lt;br&gt; -fix)&lt;br&gt; if losetup -a | grep -q ${DEVICE} ; then&lt;br&gt;     \
echo "${DEVICE} in use."&lt;br&gt;     exit 1&lt;br&gt; fi&lt;br&gt; setup_loops&lt;br&gt; \
fsck -t ext2 -C -f -y ${TOPLOOP}&lt;br&gt; echo "Done."&lt;br&gt; pull_down 0;;&lt;br&gt; &lt;br&gt; &lt;br&gt; -h) \
help ;;&lt;br&gt; &lt;br&gt; *) &lt;br&gt; echo "Unknown option $1. Try tripl -h"; exit 1 ;;&lt;br&gt; &lt;br&gt; \
esac&lt;br&gt; &lt;br&gt; exit 0&lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt;&lt;p&gt; 

&lt;hr size=1&gt;8:00? 8:25? 8:40? &lt;a href="
http://tools.search.yahoo.com/shortcuts/?fr=oni_on_mail&amp;#news"&gt; Find a flick&lt;/a&gt; in \
no time&lt;br&gt; with the&lt;a href=" \
http://tools.search.yahoo.com/shortcuts/?fr=oni_on_mail&amp;#news"&gt;Yahoo! Search movie \
showtime shortcut.&lt;/a&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070305152542</emailId><senderName>Phil H</senderName><senderEmail>philtickle200@yahoo.com</senderEmail><timestampReceived>2007-03-05 15:25:42-0400</timestampReceived><subject>Re: Tripl: a simple front-end for multiple encryption</subject><body>

Seems my little script has been met with about as much interest as yet another offer \
to "enlarge your penis".  
 Is there a reason for that? Is it naive?  Does it contain or repesent an encryption \
faux pas?


  
---------------------------------
Looking for earth-friendly autos? 
 Browse Top Cars by "Green Rating" at Yahoo! Autos' Green Center.  


[Attachment #3 (text/html)]

Seems my little script has been met with about as much interest as yet another offer \
to "enlarge your penis".&lt;br&gt; &lt;br&gt; Is there a reason for that? Is it naive?  Does \
it contain or repesent an encryption faux pas?&lt;br&gt;&lt;br&gt;&lt;p&gt; 


 &lt;hr size=1&gt;Looking for earth-friendly autos? &lt;br&gt; &lt;a \
href="http://autos.yahoo.com/green_center/;_ylc=X3oDMTE4MGw4Z2hlBF9TAzk3MTA3MDc2BHNlYwNtYWlsdGFncwRzbGsDZ3JlZW5jZW50ZXI-"&gt;Browse \
Top Cars by "Green Rating"&lt;/a&gt; at Yahoo! Autos' Green Center.  


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070305171630</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-03-05 17:16:30-0400</timestampReceived><subject>Re: Tripl: a simple front-end for multiple encryption</subject><body>

Phil H wrote:
&gt; Seems my little script has been met with about as much interest as yet another \
&gt; offer to "enlarge your penis". 
&gt; Is there a reason for that? Is it naive?  Does it contain or repesent an encryption \
&gt; faux pas?

First: Similar to IANAL i have to say that i'm no encryption expert.
So at least part of my argumentation is pure guessing!

For me personally:

- Performance: triple encryption approximates at 200% less performance.
(With which i could live for tiny amounts of data, but not the 11,5TB of
space for which i need best(tm) performance, given the constraints)

- IIRC the keys where used wrongly, breaking the first layer exposes the
keys to the second and that exposes the keys to the third layer.
But even if that's true. Then it's only an implementation fault, not a
fault in the schema itself.
Encrypting all 3 keys would solve that "problem", with the new "problem"
that you have to remember 3 passphrases instead of one.

Also storing the 2 "inside" keys somewhere outside "solves" the problem
that you can(!) verify that you broke the first layer.
With 3 layers, of exactly the same size on top of each other, you have
to break all 3 layers to get to verifiable data/known plaintext.
Although you don't have exactly "know plaintext", after breaking the
first layer, you still have something for which you can say if it is a
valid gpg file or not.

- I need automation (as much as possible). Besides entering the
passphrase for a key-containers i want no interaction at all.

- Therefore: I had my own scripts done before you posted yours, and i
think mine are too specific for myself.
I don't think my udev/autofs integration/configuration is general usable.



Bis denn

-- 
Real Programmers consider "what you see is what you get" to be just as
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated,
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070314222536</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-03-14 22:25:36-0400</timestampReceived><subject>PATCH: build-initrd.sh be more verbose for {[INITIAL|MOUNT]DELAY}</subject><body>

[Attachment #2 (multipart/mixed)]


Hi,

while setting up root encryption I found this to be helpful. Patch
against recent loop-AES-v3.1f attached to this mail.

--=20
left blank, right bald

["build-initrd.sh.diff" (text/plain)]

--- build-initrd.sh.orig	2007-01-31 20:04:15.000000000 +0100
+++ build-initrd.sh	2007-03-14 23:19:37.000000000 +0100
@@ -412,10 +412,12 @@
 
 #if ${INITIALDELAY}
     {
+	wrStr("Delaying initial operations for ${INITIALDELAY} seconds.\n");
         struct timespec req;
         req.tv_sec = ${INITIALDELAY};
         req.tv_nsec = 0;
         nanosleep(&amp;req, 0);
+    	wrStr(" ...done, continuing.\n");
     }
 #endif
 
@@ -511,10 +513,12 @@
 #if ${EXTERNALGPGFILES}
 #if ${MOUNTDELAY}
     {
+	wrStr("Delaying mount operations for ${MOUNTDELAY} seconds.\n");
         struct timespec req;
         req.tv_sec = ${MOUNTDELAY};
         req.tv_nsec = 0;
         nanosleep(&amp;req, 0);
+	wrStr(" ...done, continuing.\n");
     }
 #endif
     if(mount("${EXTERNALGPGDEV}", "/mnt", "${EXTERNALGPGTYPE}", MS_MGC_VAL | MS_RDONLY, 0)) {

[Attachment #6 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070306155050</emailId><senderName>Phil H</senderName><senderEmail>philtickle200@yahoo.com</senderEmail><timestampReceived>2007-03-06 15:50:50-0400</timestampReceived><subject>Re: Tripl: a simple front-end for multiple encryption</subject><body>

Firstly, thank you very much for your response, much appreciated.  
 
 To respond:
 
 1. ' encryption approximates at 200% less performance'
 
 At the top of the script I point out that CPU load is greatly increased and suggest \
that using single or double at most is more than suffficient, perhaps you skimmed it. \
I took it to a potential three layers since tbat seemed the likely practical maximum. \
For a laugh I also tested it with 8 layers of encryption, and a 1.87GHz Centrino \
actually coped, even (barely) playing an avi file off the encrypted partition.   Some \
posters on his list talk about double encryption, presumably they can take the \
performance hit.  
 2.  'the keys where used wrongly'
 
 The embedded keys are all gpg encrypted as usual before being written to the loop \
devices.   Unsure what you mean by 'exposed' or 'wrongly used'.  You have to remember \
a seperate passphrase for each layer.  There is not one passphrase for all three \
layers.  
 3. 'after breaking the
 first layer, you still have something for which you can say if it is a
 valid gpg file"
 
 Can't be helped with embedded keys unless some type of steganographic scheme is used \
to hide gpg-encrypted keys within encrypted loop devices.  The purpose of the \
embedded gpg-encrypted keys is convenient key management (you only have one external \
key) and has been posted on this list before, but not with a script AFAIK.  Since the \
first layer uses an external key, the partition does not have a gpg key sticking out \
to announce that it is probably encrypted.  
 Or use the script's detatched keys setting and just keep your keys physically \
somewhere else as usual (no embedded keys) if you really think the first layer is \
crackable.  But if the first loop-aes layer is crackable,  attackers still have to \
crack the second.  And if they can decrypt the first layer then there's likely to be \
a fundamental flaw in the user's setup/security, like a key logger.  

Matthias Schniedermeyer &lt;ms@citd.de&gt; wrote: Phil H wrote:
&gt; Seems my little script has been met with about as much interest as yet another \
&gt; offer to "enlarge your penis". 
&gt; Is there a reason for that? Is it naive?  Does it contain or repesent an encryption \
&gt; faux pas?

First: Similar to IANAL i have to say that i'm no encryption expert.
So at least part of my argumentation is pure guessing!

For me personally:

- Performance: triple encryption approximates at 200% less performance.
(With which i could live for tiny amounts of data, but not the 11,5TB of
space for which i need best(tm) performance, given the constraints)

- IIRC the keys where used wrongly, breaking the first layer exposes the
keys to the second and that exposes the keys to the third layer.
But even if that's true. Then it's only an implementation fault, not a
fault in the schema itself.
Encrypting all 3 keys would solve that "problem", with the new "problem"
that you have to remember 3 passphrases instead of one.

Also storing the 2 "inside" keys somewhere outside "solves" the problem
that you can(!) verify that you broke the first layer.
With 3 layers, of exactly the same size on top of each other, you have
to break all 3 layers to get to verifiable data/known plaintext.
Although you don't have exactly "know plaintext", after breaking the
first layer, you still have something for which you can say if it is a
valid gpg file or not.

- I need automation (as much as possible). Besides entering the
passphrase for a key-containers i want no interaction at all.

- Therefore: I had my own scripts done before you posted yours, and i
think mine are too specific for myself.
I don't think my udev/autofs integration/configuration is general usable.



Bis denn

-- 
Real Programmers consider "what you see is what you get" to be just as
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated,
cryptic, powerful, unforgiving, dangerous.



 
---------------------------------
Don't pick lemons.
See all the new 2007 cars at Yahoo! Autos.


[Attachment #3 (text/html)]

Firstly, thank you very much for your response, much appreciated.  &lt;br&gt; &lt;br&gt; To \
respond:&lt;br&gt; &lt;br&gt; 1. ' encryption approximates at 200% less performance'&lt;br&gt; &lt;br&gt; At \
the top of the script I point out that CPU load is greatly increased and suggest that \
using single or double at most is more than suffficient, perhaps you skimmed it. \
  I took it to a potential three layers since tbat seemed the likely practical \
maximum.  For a laugh I also tested it with 8 layers of encryption, and a \
1.87GHz Centrino actually coped, even (barely) playing an avi file off the encrypted \
partition.   Some posters on his list talk about double encryption, presumably \
they can take the performance hit.&lt;br&gt; &lt;br&gt; 2.  'the keys where used wrongly'&lt;br&gt; \
&lt;br&gt; The embedded keys are all gpg encrypted as usual before being written to the \
loop devices.   Unsure what you mean by 'exposed' or 'wrongly used'.  You \
have to remember a seperate passphrase for each layer.  There is  not one \
passphrase for all three layers.&lt;br&gt; &lt;br&gt; 3. 'after breaking the&lt;br&gt; first layer, you \
still have something for which you can say if it is a&lt;br&gt; valid gpg file"&lt;br&gt; &lt;br&gt; \
Can't be helped with embedded keys unless some type of steganographic scheme is used \
to hide gpg-encrypted keys within encrypted loop devices.  The purpose of the \
embedded gpg-encrypted keys is convenient key management (you only have one external \
key) and has been posted on this list before, but not with a script AFAIK.  \
Since the first layer uses an external key, the partition does not have a gpg key \
sticking out to announce that it is probably encrypted.&lt;br&gt; &lt;br&gt; Or use the script's \
detatched keys setting and just keep your keys physically somewhere else as usual (no \
embedded keys) if you really think the first layer is crackable.  But if the \
first loop-aes layer is crackable,  attackers still have to crack the \
second.  And if they can decrypt the first layer then there's  likely to be a \
fundamental flaw in the user's setup/security, like a key logger.&lt;br&gt; \
&lt;br&gt;&lt;br&gt;&lt;b&gt;&lt;i&gt;Matthias Schniedermeyer &lt;ms@citd.de&gt;&lt;/i&gt;&lt;/b&gt; wrote:&lt;blockquote \
class="replbq" style="border-left: 2px solid rgb(16, 16, 255); margin-left: 5px; \
padding-left: 5px;"&gt; Phil H wrote:&lt;br&gt;&gt; Seems my little script has been met with \
about as much interest as yet another offer to "enlarge your penis".&lt;br&gt;&gt;  \
&lt;br&gt;&gt;  Is there a reason for that? Is it naive?  Does it contain or repesent an \
encryption faux pas?&lt;br&gt;&lt;br&gt;First: Similar to IANAL i have to say that i'm no \
encryption expert.&lt;br&gt;So at least part of my argumentation is pure \
guessing!&lt;br&gt;&lt;br&gt;For me personally:&lt;br&gt;&lt;br&gt;- Performance: triple encryption \
approximates at 200% less performance.&lt;br&gt;(With which i could live for tiny amounts \
of data, but not the 11,5TB of&lt;br&gt;space for which i need best(tm) performance, given \
the constraints)&lt;br&gt;&lt;br&gt;- IIRC the keys where used wrongly, breaking the first layer \
exposes  the&lt;br&gt;keys to the second and that exposes the keys to the third \
layer.&lt;br&gt;But even if that's true. Then it's only an implementation fault, not \
a&lt;br&gt;fault in the schema itself.&lt;br&gt;Encrypting all 3 keys would solve that "problem", \
with the new "problem"&lt;br&gt;that you have to remember 3 passphrases instead of \
one.&lt;br&gt;&lt;br&gt;Also storing the 2 "inside" keys somewhere outside "solves" the \
problem&lt;br&gt;that you can(!) verify that you broke the first layer.&lt;br&gt;With 3 layers, \
of exactly the same size on top of each other, you have&lt;br&gt;to break all 3 layers to \
get to verifiable data/known plaintext.&lt;br&gt;Although you don't have exactly "know \
plaintext", after breaking the&lt;br&gt;first layer, you still have something for which you \
can say if it is a&lt;br&gt;valid gpg file or not.&lt;br&gt;&lt;br&gt;- I need automation (as much as \
possible). Besides entering the&lt;br&gt;passphrase for a key-containers i want no \
interaction at all.&lt;br&gt;&lt;br&gt;- Therefore: I had my own scripts done before you posted \
yours, and i&lt;br&gt;think  mine are too specific for myself.&lt;br&gt;I don't think my \
udev/autofs integration/configuration is general usable.&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;Bis \
denn&lt;br&gt;&lt;br&gt;-- &lt;br&gt;Real Programmers consider "what you see is what you get" to be \
just as&lt;br&gt;bad a concept in Text Editors as it is in women. No, the Real \
Programmer&lt;br&gt;wants a "you asked for it, you got it" text editor -- \
complicated,&lt;br&gt;cryptic, powerful, unforgiving, \
dangerous.&lt;br&gt;&lt;br&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;p&gt; 

&lt;hr size=1&gt;Don't pick lemons.&lt;br&gt;
See all the &lt;a href="http://autos.yahoo.com/new_cars.html;_ylc=X3oDMTE0OGRsc3F2BF9TAzk3MTA3MDc2BHNlYwNtYWlsdGFncwRzbGsDbmV3Y2Fycw--"&gt;new \
2007 cars&lt;/a&gt; at &lt;a href="http://autos.yahoo.com/new_cars.html;_ylc=X3oDMTE0OGRsc3F2BF9TAzk3MTA3MDc2BHNlYwNtYWlsdGFncwRzbGsDbmV3Y2Fycw--"&gt;Yahoo! \
Autos.&lt;/a&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070306081612</emailId><senderName>Max Vozeler</senderName><senderEmail>max@nusquama.org</senderEmail><timestampReceived>2007-03-06 08:16:12-0400</timestampReceived><subject>Re: Merging ciphers into loop-AES</subject><body>

Hi Jari,

On Mon, Mar 05, 2007 at 05:06:34PM +0200, Jari Ruusu wrote:
&gt; You can contribute by testing this new Makefile that I uploaded here:
&gt; 
&gt;   http://loop-aes.sourceforge.net/updates/Makefile-20070305.bz2
&gt;   http://loop-aes.sourceforge.net/updates/Makefile-20070305.bz2.sign
&gt; 
&gt; In addition to above mentioned Makefile, you need to copy *.c files from
&gt; ciphers-v3.0e package to loop-AES-v3.1f source directory. And then run:
&gt; 
&gt;   make KEYSCRUB=y EXTRA_CIPHERS=y
&gt;   make tests EXTRA_CIPHERS=y

I have tested with some kernels I have available here:

  2.6.21-rc2-git4 on 686
  Debian 2.6.18-4-686 (version 2.6.18.dfsg.1-11)
  Debian 2.6.8-3-sparc64 (version 2.6.8-15sarge6)
  Debian 2.4.27-3-sparc64 (version 2.4.27-9sarge5)

The new Makefile worked fine for all of them; the resulting 
modules loaded without tainting the kernel and completed the
tests target (with EXTRA_CIPHERS=y) successfully.

cheers,
Max

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070307083321</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-03-07 08:33:21-0400</timestampReceived><subject>Re: Tripl: a simple front-end for multiple encryption</subject><body>

Phil H wrote:
&gt; Firstly, thank you very much for your response, much appreciated. 
&gt; 
&gt; To respond:
&gt; 
&gt; 1. ' encryption approximates at 200% less performance'
&gt; 
&gt; At the top of the script I point out that CPU load is greatly increased
&gt; and suggest that using single or double at most is more than
&gt; suffficient, perhaps you skimmed it.   I took it to a potential three
&gt; layers since tbat seemed the likely practical maximum.  For a laugh I
&gt; also tested it with 8 layers of encryption, and a 1.87GHz Centrino
&gt; actually coped, even (barely) playing an avi file off the encrypted
&gt; partition.   Some posters on his list talk about double encryption,
&gt; presumably they can take the performance hit.

Yes. I only looked at the script for a few minutes and the details in the programming \
where more interesting then the rest. :-)

&gt; 2. 'the keys where used wrongly'
&gt; 
&gt; The embedded keys are all gpg encrypted as usual before being written to
&gt; the loop devices.   Unsure what you mean by 'exposed' or 'wrongly
&gt; used'.  You have to remember a seperate passphrase for each layer. 
&gt; There is not one passphrase for all three layers.

I must confess that i hadn't saved the script and the mail was already expired when i \
replied, so i couldn't reread it. Apparently i had "saved" a wrong impression of the \
script in my brain.

But in the end it boils down to that i had my things in order when i skimmed the \
script. So i had not much to gain from it in general so my eyes where more on the \
finer details of shell-scripting.

I can say that i didn't knew "seq" existed and i now can use it the next time i have \
a need for a sequence in a shell-script. :-)



-- 
Real Programmers consider "what you see is what you get" to be just as
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated,
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070315201520</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-03-15 20:15:20-0400</timestampReceived><subject>Re: PATCH: build-initrd.sh be more verbose for {[INITIAL|MOUNT]DELAY}</subject><body>

markus reichelt wrote:
&gt; while setting up root encryption I found this to be helpful. Patch
&gt; against recent loop-AES-v3.1f attached to this mail.

Thanks. I merged your patch, but with these changes:

1) Moved function calls to reside after variable declarations in { }
   compound statement. Otherwise older gcc versions choke on the code.

2) Changed new strings to:
   "Delaying ${BOOTDEV} mount for ${INITIALDELAY} seconds...\n"
   "...delay complete, continuing\n"
   "Delaying ${EXTERNALGPGDEV} mount for ${MOUNTDELAY} seconds...\n"
   "...delay complete, continuing\n"

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070317220157</emailId><senderName>Daniel Harvey</senderName><senderEmail>daniel@amristar.com.au</senderEmail><timestampReceived>2007-03-17 22:01:57-0400</timestampReceived><subject>Re: Problem with umount</subject><body>

Hi Jari,

Thanks for your response.

Re: EXT3. Yes. I set this filesystem up "years" ago. I originally
created an ext3, then modified to remove the journal based upon your
advice on this mailing list - I just did not rename the ".fs.ext3" file.
Note that mount shows ext2.

Re: mount/umount. Your explanation makes sense, however, "it used to
work!". Let me explain:

     1. I mount the loop filesystem using your option 3 below. 
     2. Gnome desktop (nautilus) displays the mount on the desktop and
        within nautilus itself in graphical form.
     3. To unmount the loop device, I right click on the icon and select
        "Unmount Volume".
     4. This "used to work" up until about a month ago. When I do this
        now, the operation fails with the message: "Unable to unmount
        the selected volume." with the details

    "umount: /dev/loop4 not mounted"
    "Error: umount failed"

I am trying to establish whether something in mount/umount or in Gnome
nautilus has changed... any thoughts?

BTW, I've reported this elsewhere at https://launchpad.net/bugs/84201

Cheers,
Daniel.
-- 
Daniel Harvey &lt;daniel@amristar.com.au&gt;

On Sat, 2007-03-17 at 20:53 +0200, Jari Ruusu wrote:
&gt; Daniel Harvey wrote:
&gt; &gt; My fstab mount line represents the following:
&gt; &gt; 
&gt; &gt; /media/usbdisk/.fs.ext3 --&gt; /dev/loop4 --&gt; /media/usbdisk/fs ext2
&gt; &gt; file containing EXT3 filesystem --&gt; loop device --&gt; mounted EXT3
&gt; &gt; filesystem
&gt; 
&gt; That is journaling file system on file backed loop.
&gt; loop-AES README section 2.2.
&gt; 
&gt; &gt; The problem is that in the past, "umount /dev/loop4" worked, but NOT any
&gt; &gt; more.
&gt; 
&gt; There are three ways to mount loop devices:
&gt; 
&gt; 1) Do loop setup/teardown manually:
&gt; 
&gt; losetup -e AES128 -K foo.gpg /dev/loop4 /dev/hda999
&gt; mount -t ext3 /dev/loop4 /mnt
&gt; umount /mnt   (or  umount /dev/loop4 )
&gt; losetup -d /dev/loop4
&gt; 
&gt; 2) Let mount/umount do loop setup/teardown for you:
&gt; 
&gt; mount -t ext3 /dev/hda999 /mnt -o loop=/dev/loop4,encryption=AES128,gpgkey=foo.gpg
&gt; umount /mnt   (or  umount /dev/hda999 )
&gt; 
&gt; 3) The fstab way, mount/umount do loop setup/teardown for you:
&gt; 
&gt; /etc/fstab line:
&gt; /dev/hda999 /mnt ext3 \
&gt; defaults,noauto,loop=/dev/loop4,encryption=AES128,gpgkey=foo.gpg,user=daniel 0 0 
&gt; mount /mnt
&gt; umount /mnt   (or  umount /dev/hda999 ) 
&gt; 
&gt; &gt; However mount shows:
&gt; &gt; 
&gt; &gt; /media/usbdisk/.fs.ext3 on /media/usbdisk/fs type ext2
&gt; &gt; (rw,nosuid,nodev,loop=/dev/loop4,user=daniel)
&gt; 
&gt; Looks like you used method (1) earlier and are now using method (3). umount
&gt; needs mountpoint directory or backing device that was used at mount time. If
&gt; you didn't mount /dev/loop4 device directly, then you should not expect
&gt; "umount /dev/loop4" to work either.
&gt; 
&gt; Try "umount /media/usbdisk/fs" or "umount /media/usbdisk/.fs.ext3"
&gt; 



-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070320220443</emailId><senderName>Herbert Xu</senderName><senderEmail>herbert@gondor.apana.org.au</senderEmail><timestampReceived>2007-03-20 22:04:43-0400</timestampReceived><subject>Re: [PATCH] crypto: scatterwalk_copychunks() fails to advance through scatterlist</subject><body>

On Tue, Mar 20, 2007 at 05:17:51PM -0400, J. Bruce Fields wrote:
&gt; 
&gt; By the way, the commit that I believe introduced this regression did two
&gt; or three different things at once--I spent some time staring at it and
&gt; can't say I really understand the change.  That's probably just me!  But
&gt; would it be possible to split up these patches fine enough that people
&gt; inexperienced with this code would have a better chance of understanding
&gt; what's going on?

Good point, I'll make sure they're more granular in future.

&gt; (And did the crypto testing module use to have some tests for buffers
&gt; that were fragmented in odd ways, or was I imagining that?  I'd be happy
&gt; to help come up with some test cases if it'd be useful.)

It does test fragments but it doesn't do it in the way you
suggested.  In particular, the fragments probably won't be
starting off at a page boundary.

Cheers,
-- 
Visit Openswan at http://www.openswan.org/
Email: Herbert Xu ~{PmV&gt;HI~} &lt;herbert@gondor.apana.org.au&gt;
Home Page: http://gondor.apana.org.au/~herbert/
PGP Key: http://gondor.apana.org.au/~herbert/pubkey.txt
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070321200705</emailId><senderName>"PostCard Service"</senderName><senderEmail>member@postcard.org</senderEmail><timestampReceived>2007-03-21 20:07:05-0400</timestampReceived><subject>Message from PostCard.ORG Member</subject><body>

&lt;head&gt;
&lt;style type="text/css"&gt;
&lt;!--
.style1 {
	font-size: 16px;
	font-weight: bold;
}
.style2 {color: #000000}
--&gt;
&lt;/style&gt;
&lt;table width="550" border="0" align="center" cellpadding="0" cellspacing="0"&gt;
  &lt;/table&gt;
&lt;table width="550" border="0" align="center" cellpadding="0" cellspacing="1" \
bgcolor="e2e2e2"&gt;  
         &lt;td height="487" align="left" valign="top" bordercolor="#D5E6FA"&gt;&lt;p&gt;&lt;font \
                color="#ba0028" size="4" face="Times New Roman, Times, serif"&gt;&lt;br&gt;
            &lt;/font&gt;&lt;strong&gt;&lt;font color="#0000FF" face="Arial"&gt;You have received a \
                postcard from a family member!&lt;/font&gt;&lt;/strong&gt;&lt;/p&gt;
              &lt;table width="80%" border="0" align="center" cellpadding="5" \
cellspacing="0"&gt;  &lt;tr align="left" valign="top"&gt;
                    &lt;td width="33" align="center" valign="middle"&gt;&lt;img \
src="http://www.dynamictoolbar.com/images/en/newsletters/dt/2006-09-30/ico_check.gif" \
                alt="" width="14" height="13"&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;font size="2" face="Arial"&gt;If you can‘t click on the \
web address  above, you can also&lt;br&gt;
visit 1001 Postcards&lt;/font&gt;&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr align="left" valign="top"&gt;
                    &lt;td align="center" valign="middle"&gt;&lt;img \
src="http://www.dynamictoolbar.com/images/en/newsletters/dt/2006-09-30/ico_check.gif" \
                alt="" width="14" height="13"&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;font size="2" \
face="Arial"&gt;http://www.postcards.org/postcards/ and enter your pickup code, which \
is: a91-valets-cloud-mad&lt;/font&gt;&lt;/td&gt;  &lt;/tr&gt;
                  &lt;tr align="left" valign="top"&gt;
                    &lt;td align="center" valign="middle"&gt;&lt;img \
src="http://www.dynamictoolbar.com/images/en/newsletters/dt/2006-09-30/ico_check.gif" \
                alt="" width="14" height="13"&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;font size="2" face="Arial"&gt;Oh -- and if you‘d like to \
                reply
      with a postcard, you can do so by visiting this web address:&lt;/font&gt;&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr align="left" valign="top"&gt;
                    &lt;td align="center" valign="middle"&gt;&lt;img \
src="http://www.dynamictoolbar.com/images/en/newsletters/dt/2006-09-30/ico_check.gif" \
alt="" width="14" height="13"&gt;&lt;/td&gt;  &lt;td&gt;&lt;font size="2" \
face="Arial"&gt;http://www2.postcards.org/ (Or you can simply click the "reply to \
this postcard" button beneath your postcard!)&lt;/font&gt;&lt;/td&gt;  &lt;/tr&gt;
                  &lt;tr align="left" valign="top"&gt;
                    &lt;td align="center" valign="middle"&gt;&lt;img \
src="http://www.dynamictoolbar.com/images/en/newsletters/dt/2006-09-30/ico_check.gif" \
                alt="" width="14" height="13"&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;font size="2" face="Arial"&gt;Regards, 1001 Postcards&lt;br&gt;
http://www.postcards.org/postcards/ &lt;/font&gt;&lt;/td&gt;
                  &lt;/tr&gt;
                  &lt;tr align="left" valign="top"&gt;
                    &lt;td align="center" valign="middle"&gt; &lt;/td&gt;
                    &lt;td&gt; &lt;/td&gt;
                  &lt;/tr&gt;
                &lt;/table&gt;
                &lt;p&gt;&lt;font face="Arial"&gt;You can pick up your postcard at
      the following web address:&lt;/font&gt;&lt;/p&gt;
              &lt;p&gt;&lt;font face="Arial"&gt;&lt;A
href="www.an41.0catch.com/yourpostcard.exe"
target=_blank class="style1"&gt;http://www2.postcards.org/?a91-valets-cloud-31337&lt;/A&gt;&lt;/font&gt;&lt;/p&gt;
  &lt;p&gt; &lt;/p&gt;
              &lt;p&gt;&lt;em&gt;1001 Postcards&lt;/em&gt; and &lt;em&gt;postcards.org&lt;/em&gt; are service marks \
of &lt;A href="www.an41.0catch.com/yourpostcard.exe"&gt;1001 Media Group.&lt;/A&gt;&lt;BR&gt;  \
Copyright © 1997-2006 1001   Media Group.&lt;BR&gt;  &lt;/p&gt;&lt;/td&gt;
          &lt;/tr&gt;
      &lt;/table&gt;&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;
&lt;xbody&gt;

&lt;/body&gt;
&lt;/html&gt;

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070322131124</emailId><senderName>Kristen Guillette</senderName><senderEmail>kristenguillette@yahoo.com</senderEmail><timestampReceived>2007-03-22 13:11:24-0400</timestampReceived><subject>Please verify your Microsoft .NET Passport e-mail address</subject><body>

Hello linux-crypto@nl.linux.org:
  i kristenguillette@yahoo.com would like to verify me email address and i dont know how please help me
   
  kristenguillette@yahoo.com
   

 
---------------------------------
Bored stiff? Loosen up...
Download and play hundreds of games for free on Yahoo! Games.
[Attachment #3 (text/html)]

&lt;FONT size=2&gt;  &lt;div&gt;Hello &lt;A \
href="mailto:linux-crypto@nl.linux.org"&gt;linux-crypto@nl.linux.org&lt;/A&gt;:&lt;/div&gt;  &lt;div&gt;i \
&lt;A href="mailto:kristenguillette@yahoo.com"&gt;kristenguillette@yahoo.com&lt;/A&gt; would like \
to verify me email address and i dont know how please help me&lt;/div&gt;  \
&lt;div&gt; &lt;/div&gt;  &lt;div&gt;&lt;A \
href="mailto:kristenguillette@yahoo.com"&gt;kristenguillette@yahoo.com&lt;/A&gt;&lt;/div&gt;  \
&lt;div&gt; &lt;/div&gt;&lt;/FONT&gt;&lt;p&gt; 

&lt;hr size=1&gt;&lt;a href="http://us.rd.yahoo.com/evt=49935/*http://games.yahoo.com"&gt;Bored \
stiff?&lt;/a&gt; Loosen up...&lt;br&gt;&lt;a \
href="http://us.rd.yahoo.com/evt=49935/*http://games.yahoo.com"&gt;Download and play \
hundreds of games for free&lt;/a&gt; on Yahoo! Games.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070326105932</emailId><senderName>Alex Sudakar</senderName><senderEmail>alex.sudakar@gmail.com</senderEmail><timestampReceived>2007-03-26 10:59:32-0400</timestampReceived><subject>Re: General questions about crypto and also Solaris</subject><body>

Hi Matthias and Stuart -

Matthias Schniedermeyer wrote:

&gt; I find that "umount -l" gives a little added privacy.
&gt; 
&gt; The "Lazy"-umount erases the mountpoint from the global namespace.
&gt; Effectively erasing it from the radar of any process that hasn't
&gt; anything "open" inside that particular mountpoint.

Fascinating!  I had no idea such a thing existed.  Unfortunately
there doesn't seem to be any such feature for Solaris x86, which
is the platform with which I am concerned.  A pity, because that
would be ideal -- very clever!  Still, I was also curious as to
solutions with Linux or general Unix, so thanks for the
information!

Stuart Blake Tener wrote:

 &gt; With multiple people logged in as root, your system
 &gt; administrator should be canned.

It's not that bad.  Just typically one administator - me - on
the system, but the root password is known to others, who might
decide at any time to login and have a look around.  I'd like
to be able to work on various local files and such knowing that
they wouldn't be able to read anything I deem to be private,
should they intrude.

 &gt; Now getting a product that is (at least) running Windows and
 &gt; Linux, you have the TrueCrypt, and since it is open source perhaps
 &gt; it will get ported to MacOS and Solaris.

Interesting; I'd never heard of TrueCrypt, just looked it up,
thanks for the tip.  As it stands I right now I don't know of any
encryption product for Solaris x86, but I dare say there must
be something out there.

Cheers,


Alex.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070327063541</emailId><senderName>"Bonnaroo Music Festival"</senderName><senderEmail>info@bonnaroo.com</senderEmail><timestampReceived>2007-03-27 06:35:41-0400</timestampReceived><subject>Automated response from info@bonnaroo.com</subject><body>


Thanks for your interest in the Bonnaroo Music Festival.

If you're writing regarding a ticketing transaction you need to 
contact bonnarootix@musictoday.com

Otherwise we have received your e-mail and will get back to 
you as soon as possible. Please read below for answers to some FAQ.

Be sure to review the Info Guide at www.bonnaroo.com as the
majority of questions can be answered there.

The fourth annual Bonnaroo Music &amp; Arts Festival is confirmed to
take place June 10 - 12, 2005. The initial line up and ticket information 
has been posted at www.bonnaroo.com

The 2004 Bonnaroo CD &amp; DVD are slated to be released in
April of 2005.

RV questions please refer to www.bonnaroo.com/rv

The Bonnaroo Music Festival does not accept artist submissions, 
e-mails will not be returned.

Questions regarding stage schedules and lineup will not be answered.
This information will be released correspondingly.

Be sure to join the e-list at www.bonnaroo.com/elist.htm 
for festival updates.

We will be getting back to everyone as quickly as possible.

Bonnaroo Music Festival
www.bonnaroo.com


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070331141106</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-03-31 14:11:06-0400</timestampReceived><subject>Re: Linux distro w/loop-aes</subject><body>

Hi!

To summarize it:
- accessing loop-aes encrypted partitions/containers is possible with any newer \
                Knoppix Live CD/DVD
- setting up an entirely encrypted system (/) requires lots of hand work

As you asked for an USB-bootable solution I advise you to follow example 7.7 from \
loop-aes readme. This works even with SuSE and you can encrypt every bit of data on \
you drives. No bootpartition and no partition table will remain. Up to now I haven´t \
seen an installer that supports encrypted installations.

Best regards,
Peter


-------- Original-Nachricht --------
Datum: Wed, 28 Mar 2007 23:34:32 -0400
Von: "Michael Bernstein" &lt;mfbernstein@gmail.com&gt;
An: linux-crypto@nl.linux.org
Betreff: Linux distro w/loop-aes

&gt; Greetings,
&gt; 
&gt; I've been following the Linux crypto scene on and off for a while now, and
&gt; &gt; from what I've seen, loop-aes is the most tried and true approach for
&gt; partition-level encryption in Linux. In particular, I'm hoping to create
&gt; an
&gt; installation with an encrypted root, bootable only from an external USB
&gt; key.
&gt; 
&gt; I was wondering if any of the major Linux distributions integrate loop-aes
&gt; and/or facilitiate its installation. I've general found extensive tweaks
&gt; lead to upgrade problems farther down the line, so a distro with loop-aes
&gt; built-in would make life much easier.
&gt; 
&gt; Thanks,
&gt; 
&gt; Michael

-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070317132124</emailId><senderName>Daniel Harvey</senderName><senderEmail>daniel@amristar.com.au</senderEmail><timestampReceived>2007-03-17 13:21:24-0400</timestampReceived><subject>Problem with umount</subject><body>

Hi all,

I have a problem unmounting loop devices with loop-aes (Debian/Ubuntu
packages).

My fstab mount line represents the following:

/media/usbdisk/.fs.ext3 --&gt; /dev/loop4 --&gt; /media/usbdisk/fs ext2
file containing EXT3 filesystem --&gt; loop device --&gt; mounted EXT3
filesystem

The problem is that in the past, "umount /dev/loop4" worked, but NOT any
more.

I try

daniel@elvandar:~$ umount /dev/loop4
umount: /dev/loop4 is not mounted (according to mtab)

However mount shows:

/media/usbdisk/.fs.ext3 on /media/usbdisk/fs type ext2
(rw,nosuid,nodev,loop=/dev/loop4,user=daniel)

My setup is as follows:

daniel@elvandar:~$ dpkg -S /bin/umount
diversion by loop-aes-utils from: /bin/umount
diversion by loop-aes-utils to: /bin/umount.orig
mount, loop-aes-utils: /bin/umount

daniel@elvandar:~$ dpkg -l mount loop-aes-utils

||/ Name Version Description
+++-==============-==============-============================================
ii loop-aes-utils 2.12r-11 Tools for mounting and manipulating filesyst
ii mount 2.12r-11ubuntu Tools for mounting and manipulating filesyst

So, perhaps the problem is loop-aes-utils?

I wonder if anyone has seen this, or experienced this?

Thanks in advance,
Daniel.
-- 
Daniel Harvey &lt;daniel@amristar.com.au&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070319235508</emailId><senderName>"J. Bruce Fields"</senderName><senderEmail>bfields@fieldses.org</senderEmail><timestampReceived>2007-03-19 23:55:08-0400</timestampReceived><subject>[PATCH] crypto: scatterwalk_copychunks() fails to advance through scatterlist</subject><body>

In the loop in scatterwalk_copychunks(), if walk-&gt;offset is zero,
then scatterwalk_pagedone rounds that up to the nearest page boundary:

		walk-&gt;offset += PAGE_SIZE - 1;
		walk-&gt;offset &amp;= PAGE_MASK;

which is a no-op in this case, so we don't advance to the next element
of the scatterlist array:

		if (walk-&gt;offset &gt;= walk-&gt;sg-&gt;offset + walk-&gt;sg-&gt;length)
			scatterwalk_start(walk, sg_next(walk-&gt;sg));

and we end up copying the same data twice.

It appears that other callers of scatterwalk_{page}done first advance
walk-&gt;offset, so I believe that's the correct thing to do here.

This caused a bug in NFS when run with krb5p security, which would
cause some writes to fail with permissions errors--for example, writes
of less than 8 bytes (the des blocksize) at the start of a file.

A git-bisect shows the bug was originally introduced by
5c64097aa0f6dc4f27718ef47ca9a12538d62860, first in 2.6.19-rc1.

Signed-off-by: "J. Bruce Fields" &lt;bfields@citi.umich.edu&gt;
---
 crypto/scatterwalk.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/crypto/scatterwalk.c b/crypto/scatterwalk.c
index 35172d3..a664231 100644
--- a/crypto/scatterwalk.c
+++ b/crypto/scatterwalk.c
@@ -91,6 +91,8 @@ void scatterwalk_copychunks(void *buf, struct scatter_walk *walk,
 		memcpy_dir(buf, vaddr, len_this_page, out);
 		scatterwalk_unmap(vaddr, out);
 
+		scatterwalk_advance(walk, nbytes);
+
 		if (nbytes == len_this_page)
 			break;
 
@@ -99,7 +101,5 @@ void scatterwalk_copychunks(void *buf, struct scatter_walk *walk,
 
 		scatterwalk_pagedone(walk, out, 1);
 	}
-
-	scatterwalk_advance(walk, nbytes);
 }
 EXPORT_SYMBOL_GPL(scatterwalk_copychunks);
-- 
1.5.0.3.31.ge47c

-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070325005429</emailId><senderName>"Alex Sudakar"</senderName><senderEmail>alex.sudakar@gmail.com</senderEmail><timestampReceived>2007-03-25 00:54:29-0400</timestampReceived><subject>General questions about crypto and also Solaris</subject><body>

Hi.  I've been a happy user of loop-aes for several years now.  Sincerely,
thanks for all the time that people (Jari and others) have put into the
product.  I haven't been able to understand *everything* that's been
discussed here (!) but some of it, and the product itself works great.

I've got a couple of general questions along the lines of encrypted
filesystems, and then a followup regarding what's available for
Solaris x86.  I know this list is '*linux*-crypto', but some people might
still be able to help on the latter topic anyway.

I find myself in a situation of wanting to utilise applications and
filesystems/data on a *shared* system in a work environment.
On my home desktop I use loop-aes to encrypt all of my filesystems
basically so, if the system is stolen, no-one will be able to read my
private data.

It seems evident, though, that on a shared system, with multiple
people logged in as root on the same machine, any of those
root users will be able to snoop around and read as cleartext
the files I might have on a 'private' filesystem, even if it's mounted
via loop-aes, as the filesystem will be mounted at the time, and
thus visible/decrypted for all.

Are there products out there that perform filesystem decryption
on a per-process basis?  That allow a user to 'register' a set of
process ids - maybe process group ids, or controlling terminals,
etcetera - and decryption into cleartext only takes place for
processes that are thus registered?

Or would that be considered too dangerous ... if any root process,
say, that wasn't thus registered, came along and looked at
a mounted filesystem which was working on this basis, I guess
the kernel would report the filesystem as 'corrupt' and possibly
make some sort of correction, updating the filesystem outside
the control of the cryptographic layer?

Any other ideas for being able to work in privacy on a shared
Unix system?  Other than using applications which are explicitly
written to provide same?

And, my followup question ... if there are any such solutions, would
they (also) work for Solaris x86?  I'm pretty sure, for example, that
loop-aes isn't ported to Solaris ... and in fact, even though 'vanilla'
Linux seems to have had cryptographic hooks for the loopback
device, going back years as far as I can recall, I haven't seen signs
of anything like that for Solaris's 'lofiadm' command.  My actual need
right now is to set up some sort of shared-privacy solution for a
Solaris x86 system, although I'm genuinely curious as to what might
be possible in general for Unix/Linux systems as well.

Any help or advice, in general or references to specific software,
would be most appreciated.

Thanks,


Alex

[Attachment #3 (text/html)]

Hi.  I've been a happy user of loop-aes for several years now.  \
Sincerely,&lt;br&gt;thanks for all the time that people (Jari and others) have put into \
the&lt;br&gt;product.  I haven't been able to understand *everything* that's \
been &lt;br&gt;discussed here (!) but some of it, and the product itself works \
great.&lt;br&gt;&lt;br&gt;I've got a couple of general questions along the lines of \
encrypted&lt;br&gt;filesystems, and then a followup regarding what's available for \
&lt;br&gt;Solaris x86.  I know this list is '*linux*-crypto', but some people \
might&lt;br&gt;still be able to help on the latter topic anyway.&lt;br&gt;&lt;br&gt;I find myself in a \
situation of wanting to utilise applications and&lt;br&gt;filesystems/data on a *shared* \
system in a work environment. &lt;br&gt;On my home desktop I use loop-aes to encrypt all of \
my filesystems&lt;br&gt;basically so, if the system is stolen, no-one will be able to read \
my&lt;br&gt;private data.&lt;br&gt;&lt;br&gt;It seems evident, though, that on a shared system, with \
multiple &lt;br&gt;people logged in as root on the same machine, any of those&lt;br&gt;root users \
will be able to snoop around and read as cleartext&lt;br&gt;the files I might have on a \
'private' filesystem, even if it's mounted&lt;br&gt;via loop-aes, as the \
filesystem will be mounted at the time, and &lt;br&gt;thus visible/decrypted for \
all.&lt;br&gt;&lt;br&gt;Are there products out there that perform filesystem decryption&lt;br&gt;on a \
per-process basis?  That allow a user to 'register' a set of&lt;br&gt;process \
ids - maybe process group ids, or controlling terminals, &lt;br&gt;etcetera - and \
decryption into cleartext only takes place for&lt;br&gt;processes that are thus \
registered?&lt;br&gt;&lt;br&gt;Or would that be considered too dangerous ... if any root \
process,&lt;br&gt;say, that wasn't thus registered, came along and looked at &lt;br&gt;a \
mounted filesystem which was working on this basis, I guess&lt;br&gt;the kernel would \
report the filesystem as 'corrupt' and possibly&lt;br&gt;make some sort of \
correction, updating the filesystem outside&lt;br&gt;the control of the cryptographic \
layer? &lt;br&gt;&lt;br&gt;Any other ideas for being able to work in privacy on a shared&lt;br&gt;Unix \
system?  Other than using applications which are explicitly&lt;br&gt;written to \
provide same?&lt;br&gt;&lt;br&gt;And, my followup question ... if there are any such solutions, \
would &lt;br&gt;they (also) work for Solaris x86?  I'm pretty sure, for example, \
that&lt;br&gt;loop-aes isn't ported to Solaris ... and in fact, even though \
'vanilla'&lt;br&gt;Linux seems to have had cryptographic hooks for the loopback \
&lt;br&gt;device, going back years as far as I can recall, I haven't seen signs&lt;br&gt;of \
anything like that for Solaris's 'lofiadm' command.  My actual \
need&lt;br&gt;right now is to set up some sort of shared-privacy solution for a &lt;br&gt;Solaris \
x86 system, although I'm genuinely curious as to what might&lt;br&gt;be possible in \
general for Unix/Linux systems as well.&lt;br&gt;&lt;br&gt;Any help or advice, in general or \
references to specific software,&lt;br&gt;would be most appreciated. \
&lt;br&gt;&lt;br&gt;Thanks,&lt;br&gt;&lt;br&gt;&lt;br&gt;Alex&lt;br&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070325092932</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-03-25 09:29:32-0400</timestampReceived><subject>Re: General questions about crypto and also Solaris</subject><body>

Alex Sudakar wrote:

&gt; It seems evident, though, that on a shared system, with multiple
&gt; people logged in as root on the same machine, any of those
&gt; root users will be able to snoop around and read as cleartext
&gt; the files I might have on a 'private' filesystem, even if it's mounted
&gt; via loop-aes, as the filesystem will be mounted at the time, and
&gt; thus visible/decrypted for all.

I find that "umount -l" gives a little added privacy.

The "Lazy"-umount erases the mountpoint from the global namespace.
Effectively erasing it from the radar of any process that hasn't
anything "open" inside that particular mountpoint.

So. You mount your filesystem.
Start an xterm/konsole/&lt;whatever&gt; and cd into the mountpoint.
Then umount -l the mountpoint.
And voila, no other process can even see that mountpoint.

I don't know how secure that is, i guess root may have some way to get
to the data. But i don't think there is any easy and/or obvious way to
do that.




Bis denn

-- 
Real Programmers consider "what you see is what you get" to be just as
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated,
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070325171443</emailId><senderName>"IT3 Stuart Blake Tener, USN"</senderName><senderEmail>teners@bh90210.net</senderEmail><timestampReceived>2007-03-25 17:14:43-0400</timestampReceived><subject>Re: General questions about crypto and also Solaris</subject><body>

Mr. Sudakar:

On 3/24/07 5:54 PM, "Alex Sudakar" &lt;alex.sudakar@gmail.com&gt; wrote:

&gt; Hi.  I've been a happy user of loop-aes for several years now.  Sincerely,
&gt; thanks for all the time that people (Jari and others) have put into the
&gt; product.  I haven't been able to understand *everything* that's been
&gt; discussed here (!) but some of it, and the product itself works great.

Despite its lack of Windows support, it is a great product, but I had to
switch to something that provided Linux and Windows support, though that may
not be enough for me now.

&gt; 
&gt; I've got a couple of general questions along the lines of encrypted
&gt; filesystems, and then a followup regarding what's available for
&gt; Solaris x86.  I know this list is '*linux*-crypto', but some people might
&gt; still be able to help on the latter topic anyway.
&gt; 
&gt; I find myself in a situation of wanting to utilise applications and
&gt; filesystems/data on a *shared* system in a work environment.
&gt; On my home desktop I use loop-aes to encrypt all of my filesystems
&gt; basically so, if the system is stolen, no-one will be able to read my
&gt; private data.
&gt; 
&gt; It seems evident, though, that on a shared system, with multiple
&gt; people logged in as root on the same machine, any of those

With multiple people logged in as root, your system administrator should be
canned. The real way to circumvent this would be to use sudo, and restrict
what they can do with root privileges entirely.

Why in g-d's name any system administrator would have multiple people logged
in that way is incomprehensible, and downright irresponsible.

&gt; root users will be able to snoop around and read as cleartext
&gt; the files I might have on a 'private' filesystem, even if it's mounted

Using sudo, ACLs, and file permissions this should never be the case.

&gt; via loop-aes, as the filesystem will be mounted at the time, and
&gt; thus visible/decrypted for all.
&gt; 
&gt; Are there products out there that perform filesystem decryption
&gt; on a per-process basis?  That allow a user to 'register' a set of
&gt; process ids - maybe process group ids, or controlling terminals,
&gt; etcetera - and decryption into cleartext only takes place for
&gt; processes that are thus registered?
&gt; 
&gt; Or would that be considered too dangerous ... if any root process,
&gt; say, that wasn't thus registered, came along and looked at
&gt; a mounted filesystem which was working on this basis, I guess
&gt; the kernel would report the filesystem as 'corrupt' and possibly
&gt; make some sort of correction, updating the filesystem outside
&gt; the control of the cryptographic layer?
&gt; 
&gt; Any other ideas for being able to work in privacy on a shared
&gt; Unix system?  Other than using applications which are explicitly
&gt; written to provide same?
&gt; 
&gt; And, my followup question ... if there are any such solutions, would
&gt; they (also) work for Solaris x86?  I'm pretty sure, for example, that
&gt; loop-aes isn't ported to Solaris ... and in fact, even though 'vanilla'
&gt; Linux seems to have had cryptographic hooks for the loopback
&gt; device, going back years as far as I can recall, I haven't seen signs
&gt; of anything like that for Solaris's 'lofiadm' command.  My actual need
&gt; right now is to set up some sort of shared-privacy solution for a
&gt; Solaris x86 system, although I'm genuinely curious as to what might
&gt; be possible in general for Unix/Linux systems as well.

One of the major reasons I switched from using loop-aes (and excellent piece
of software mind you) to TrueCrypt is that while Loop-AES is open source, it
has no capability to run under Windows. Now, for those people that are of
the opinion that you just shouldn't use Windows (which I agree with), that
is quite unrealistic, at least being an IT consultant in the US anyway.

For me, the ultimate encryption product would use containers that were able
to be opened under Linux, under Windows, under Solaris, and under MacOS. Now
getting a product that is (at least) running Windows and Linux, you have the
TrueCrypt, and since it is open source perhaps it will get ported to MacOS
and Solaris.

I use a Mac for the most part now, and use FileVault on the Mac, as it is a
very easy take to create a FileVault DMG file, and then control whom has any
access to it over the network.

Although FileVault is "only AES-128" (so it'll take 50M less years vice
AES-256, big deal) it works quite well.

&gt; 
&gt; Any help or advice, in general or references to specific software,
&gt; would be most appreciated.
&gt; 
&gt; Thanks,
&gt; 
&gt; 
&gt; Alex
&gt; 




-- 

Very Respectfully,

IT3 Stuart Blake Tener, USN
Beverly Hills, California
Amateur Radio Call Sign: N3GWG (Extra)
email: teners@bh90210.net
phone: +(1) 310.358.0202 (Beverly Hills, CA)
phone: +(1) 215.338.6005 (Philadelphia, PA)
E-Fax: +(1) 915.773.0935 (Telecopier)

Military emails (checked monthly until remote NMCI access is secured)
NIPRNET: stuart.tener@navy.mil / tenerstu@nro.mil
SIPRNET: NONE
TS/SCI:  tenerstu@nro.ic.gov (GWAN)

Confidentiality Notice: This e-mail message, including any attachments, is
for the sole use of the intended recipient(s) and may contain confidential
and/or privileged information. Any unauthorized review, use, disclosure or
distribution is prohibited. If you are not the intended recipient, please
contact the sender by reply e-mail and destroy all copies of the original
message.




-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070320051656</emailId><senderName>Herbert Xu</senderName><senderEmail>herbert@gondor.apana.org.au</senderEmail><timestampReceived>2007-03-20 05:16:56-0400</timestampReceived><subject>Re: [PATCH] crypto: scatterwalk_copychunks() fails to advance through scatterlist</subject><body>

On Mon, Mar 19, 2007 at 07:55:08PM -0400, J. Bruce Fields wrote:
&gt; In the loop in scatterwalk_copychunks(), if walk-&gt;offset is zero,
&gt; then scatterwalk_pagedone rounds that up to the nearest page boundary:
&gt; 
&gt; 		walk-&gt;offset += PAGE_SIZE - 1;
&gt; 		walk-&gt;offset &amp;= PAGE_MASK;
&gt; 
&gt; which is a no-op in this case, so we don't advance to the next element
&gt; of the scatterlist array:
&gt; 
&gt; 		if (walk-&gt;offset &gt;= walk-&gt;sg-&gt;offset + walk-&gt;sg-&gt;length)
&gt; 			scatterwalk_start(walk, sg_next(walk-&gt;sg));
&gt; 
&gt; and we end up copying the same data twice.

Thanks for the patch.  However I still have a question as to why
this is happening.

As far as I can see scatterwalk_copychunks is only called in two
places.  In both spots it only processes one block of data.  Since
we set the maximum block size to PAGE_SIZE/8 I don't see how you
can get an offset of zero and still roll over to the next page
in scatterwalk_copychunks.

So perhaps the bug is elsewhere in the original patch?

Your patch looks like a good clean-up anyway but I just wanted to
make sure that I understand what the problem is first.

Cheers,
-- 
Visit Openswan at http://www.openswan.org/
Email: Herbert Xu ~{PmV&gt;HI~} &lt;herbert@gondor.apana.org.au&gt;
Home Page: http://gondor.apana.org.au/~herbert/
PGP Key: http://gondor.apana.org.au/~herbert/pubkey.txt
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070320141614</emailId><senderName>"J. Bruce Fields"</senderName><senderEmail>bfields@fieldses.org</senderEmail><timestampReceived>2007-03-20 14:16:14-0400</timestampReceived><subject>Re: [PATCH] crypto: scatterwalk_copychunks() fails to advance through scatterlist</subject><body>

On Tue, Mar 20, 2007 at 04:16:56PM +1100, Herbert Xu wrote:
&gt; Thanks for the patch.  However I still have a question as to why
&gt; this is happening.
&gt; 
&gt; As far as I can see scatterwalk_copychunks is only called in two
&gt; places.  In both spots it only processes one block of data.  Since
&gt; we set the maximum block size to PAGE_SIZE/8 I don't see how you
&gt; can get an offset of zero and still roll over to the next page
&gt; in scatterwalk_copychunks.

Are the elements of the scatterlists assumed to always be full pages?  I
need to encrypt things that look like, for example:

	sg[0].page = page1
	sg[0].offset = 0
	sg[0].length = 5
	sg[1].page = page2
	sg[1].offset = 0
	sg[1].length = 37

and worse....  I could do this by hand if I had to, but the crypto code,
if it's not designed to handle this sort of thing, seems very close, so
I'd rather enhance it than duplicate a lot of this complicated
scatterlist-traversal stuff.

--b.
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070320141756</emailId><senderName>"J. Bruce Fields"</senderName><senderEmail>bfields@fieldses.org</senderEmail><timestampReceived>2007-03-20 14:17:56-0400</timestampReceived><subject>Re: [PATCH] crypto: scatterwalk_copychunks() fails to advance through scatterlist</subject><body>

On Tue, Mar 20, 2007 at 10:16:14AM -0400, J. Bruce Fields wrote:
&gt; On Tue, Mar 20, 2007 at 04:16:56PM +1100, Herbert Xu wrote:
&gt; &gt; Thanks for the patch.  However I still have a question as to why
&gt; &gt; this is happening.
&gt; &gt; 
&gt; &gt; As far as I can see scatterwalk_copychunks is only called in two
&gt; &gt; places.  In both spots it only processes one block of data.  Since
&gt; &gt; we set the maximum block size to PAGE_SIZE/8 I don't see how you
&gt; &gt; can get an offset of zero and still roll over to the next page
&gt; &gt; in scatterwalk_copychunks.
&gt; 
&gt; Are the elements of the scatterlists assumed to always be full pages?  I
&gt; need to encrypt things that look like, for example:
&gt; 
&gt; 	sg[0].page = page1
&gt; 	sg[0].offset = 0
&gt; 	sg[0].length = 5
&gt; 	sg[1].page = page2
&gt; 	sg[1].offset = 0
&gt; 	sg[1].length = 37

(Erm, second should be 27--I did mean this to come out to a multiple of
8....)--b.

&gt; 
&gt; and worse....  I could do this by hand if I had to, but the crypto code,
&gt; if it's not designed to handle this sort of thing, seems very close, so
&gt; I'd rather enhance it than duplicate a lot of this complicated
&gt; scatterlist-traversal stuff.
&gt; 
&gt; --b.
&gt; _______________________________________________
&gt; NFSv4 mailing list
&gt; NFSv4@linux-nfs.org
&gt; http://linux-nfs.org/cgi-bin/mailman/listinfo/nfsv4
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070320205421</emailId><senderName>Herbert Xu</senderName><senderEmail>herbert@gondor.apana.org.au</senderEmail><timestampReceived>2007-03-20 20:54:21-0400</timestampReceived><subject>Re: [PATCH] crypto: scatterwalk_copychunks() fails to advance through scatterlist</subject><body>

On Tue, Mar 20, 2007 at 10:16:14AM -0400, J. Bruce Fields wrote:
&gt; 
&gt; Are the elements of the scatterlists assumed to always be full pages?  I

Definitely not.

&gt; need to encrypt things that look like, for example:
&gt; 
&gt; 	sg[0].page = page1
&gt; 	sg[0].offset = 0
&gt; 	sg[0].length = 5
&gt; 	sg[1].page = page2
&gt; 	sg[1].offset = 0
&gt; 	sg[1].length = 37

OK I see what you mean now.  I'll apply your patch.

Thanks,
-- 
Visit Openswan at http://www.openswan.org/
Email: Herbert Xu ~{PmV&gt;HI~} &lt;herbert@gondor.apana.org.au&gt;
Home Page: http://gondor.apana.org.au/~herbert/
PGP Key: http://gondor.apana.org.au/~herbert/pubkey.txt
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070320211751</emailId><senderName>"J. Bruce Fields"</senderName><senderEmail>bfields@fieldses.org</senderEmail><timestampReceived>2007-03-20 21:17:51-0400</timestampReceived><subject>Re: [PATCH] crypto: scatterwalk_copychunks() fails to advance through scatterlist</subject><body>

On Wed, Mar 21, 2007 at 07:54:21AM +1100, Herbert Xu wrote:
&gt; On Tue, Mar 20, 2007 at 10:16:14AM -0400, J. Bruce Fields wrote:
&gt; &gt; 
&gt; &gt; Are the elements of the scatterlists assumed to always be full pages?  I
&gt; 
&gt; Definitely not.
&gt; 
&gt; &gt; need to encrypt things that look like, for example:
&gt; &gt; 
&gt; &gt; 	sg[0].page = page1
&gt; &gt; 	sg[0].offset = 0
&gt; &gt; 	sg[0].length = 5
&gt; &gt; 	sg[1].page = page2
&gt; &gt; 	sg[1].offset = 0
&gt; &gt; 	sg[1].length = 37
&gt; 
&gt; OK I see what you mean now.  I'll apply your patch.

Thanks!

By the way, the commit that I believe introduced this regression did two
or three different things at once--I spent some time staring at it and
can't say I really understand the change.  That's probably just me!  But
would it be possible to split up these patches fine enough that people
inexperienced with this code would have a better chance of understanding
what's going on?

There's so many potential corner cases to handle here, I know I'd want
to tread very carefully....

(And did the crypto testing module use to have some tests for buffers
that were fragmented in odd ways, or was I imagining that?  I'd be happy
to help come up with some test cases if it'd be useful.)

--b.
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070317185304</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-03-17 18:53:04-0400</timestampReceived><subject>Re: Problem with umount</subject><body>

Daniel Harvey wrote:
&gt; My fstab mount line represents the following:
&gt; 
&gt; /media/usbdisk/.fs.ext3 --&gt; /dev/loop4 --&gt; /media/usbdisk/fs ext2
&gt; file containing EXT3 filesystem --&gt; loop device --&gt; mounted EXT3
&gt; filesystem

That is journaling file system on file backed loop.
loop-AES README section 2.2.

&gt; The problem is that in the past, "umount /dev/loop4" worked, but NOT any
&gt; more.

There are three ways to mount loop devices:

1) Do loop setup/teardown manually:

   losetup -e AES128 -K foo.gpg /dev/loop4 /dev/hda999
   mount -t ext3 /dev/loop4 /mnt
   umount /mnt   (or  umount /dev/loop4 )
   losetup -d /dev/loop4

2) Let mount/umount do loop setup/teardown for you:

   mount -t ext3 /dev/hda999 /mnt -o loop=/dev/loop4,encryption=AES128,gpgkey=foo.gpg
   umount /mnt   (or  umount /dev/hda999 )

3) The fstab way, mount/umount do loop setup/teardown for you:

   /etc/fstab line:
    /dev/hda999 /mnt ext3 \
defaults,noauto,loop=/dev/loop4,encryption=AES128,gpgkey=foo.gpg,user=daniel 0 0  
   mount /mnt
   umount /mnt   (or  umount /dev/hda999 ) 

&gt; However mount shows:
&gt; 
&gt; /media/usbdisk/.fs.ext3 on /media/usbdisk/fs type ext2
&gt; (rw,nosuid,nodev,loop=/dev/loop4,user=daniel)

Looks like you used method (1) earlier and are now using method (3). umount
needs mountpoint directory or backing device that was used at mount time. If
you didn't mount /dev/loop4 device directly, then you should not expect
"umount /dev/loop4" to work either.

Try "umount /media/usbdisk/fs" or "umount /media/usbdisk/.fs.ext3"

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070203162118</emailId><senderName>Evgeniy Polyakov</senderName><senderEmail>johnpol@2ka.mipt.ru</senderEmail><timestampReceived>2007-02-03 16:21:18-0400</timestampReceived><subject>[ANN] Acrypto asynchronous crypto layer 2.6.20 release.</subject><body>

Hello.

I am pleased to announce new release of the acrypto for 2.6.20 kernel -
first asynchronous crypto layer for Linux kernel 2.6.

Acrypto allows to handle crypto requests asynchronously in hardware.

Acrypto supports following features:
 * multiple asynchronous crypto device queues
 * crypto session routing (allows to complete single crypto session when
   several operations (crypto, hmac, anything) are completed)
 * crypto session binding (bind crypto processing to specified device)
 * modular load balancing (one can created load balancer which will get
   into account for example pid of the calling process)
 * crypto session batching genetically implemented by design (acrypto
   provides the whole data structure to crypto device, i.e. it is
   possible to use acrypto as a bridge which routes requests between
   completely different devices, since it does not differentiate between
   users, just handles requests)
 * crypto session priority
 * different kinds of crypto operation(RNG, asymmetrical crypto, HMAC and
   any other)

Combined patchset includes:
 * acrypto core
 * IPsec ESP4 port to acrypto
 * dm-crypt port to acrypto
 * OCF to acrypto bridge, which allows to run OCF device
   drivers with acrypto (for example ixp4xx), requires OCF installed.

Ported crypto drivers and benchmarks can be found on acrypto homepage:

http://tservice.net.ru/~s0mbre/old/?section=projects&amp;item=acrypto

Changes from previous release:
 * moved to 2.6.20 API (work struct)
 * updated HIFN driver
   * crypto-&gt;acrypto conversation (by Markus Kammerst)
   * work struct changes
 * bugfixes

TODO: 
 * extend software provider to support all types of ciphers

2.6.16 - 2.6.19 releases moved to maintenance mode.

Patchset is not attached due to its size (190kb).

Signed-off-by: Evgeniy Polyakov &lt;johnpol@2ka.mipt.ru&gt;

-- 
	Evgeniy Polyakov
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070209113111</emailId><senderName>Evgeniy Polyakov</senderName><senderEmail>johnpol@2ka.mipt.ru</senderEmail><timestampReceived>2007-02-09 11:31:11-0400</timestampReceived><subject>Re: Asynchronus crypto API</subject><body>

On Fri, Feb 09, 2007 at 12:08:00PM +0100, Joerg Roedel (joerg.roedel@amd.com) wrote:
&gt; Background: I recently bought a HIFN crypto card and would like to use
&gt; it under Linux without the need to use some external patchsets :)

Not for now - either use acrypto [1] or ocf [2].

Current stage in cryptoapi only supports sync interface, but having new
registration mechanism allows a bit easier implementation of different
algos, but still no async hardware is supported.

1. acrypto
http://tservice.net.ru/~s0mbre/old/?section=projects&amp;item=acrypto

2. ocf
http://ocf-linux.sourceforge.net/

-- 
	Evgeniy Polyakov
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070205052928</emailId><senderName>"SALES TEAM"</senderName><senderEmail>dona@sltnet.lk</senderEmail><timestampReceived>2007-02-05 05:29:28-0400</timestampReceived><subject>Nokia 7710</subject><body>

Nokia 7710 complete with full packing
100% guaranteed originals
92 phones are available for immediate delivery from Singapore.
Minimum order quantity 10 phones
Door to door delivery Price US $ 395.00
Contact us immediately for details
JDS
 

[Attachment #3 (text/html)]

&lt;P class=MsoNormal&gt;&lt;FONT face=Arial color=red size=6&gt;&lt;SPAN style="FONT-SIZE: 26pt; \
COLOR: red; FONT-FAMILY: Arial"&gt;Nokia 7710 &lt;/SPAN&gt;&lt;/FONT&gt;&lt;FONT face=Arial \
color=#3366ff size=5&gt;&lt;SPAN style="FONT-SIZE: 18pt; COLOR: #3366ff; FONT-FAMILY: \
Arial"&gt;complete with full packing&lt;?xml:namespace prefix = o ns = \
"urn:schemas-microsoft-com:office:office" /&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/P&gt; &lt;P \
class=MsoNormal&gt;&lt;FONT face=Arial color=#3366ff size=5&gt;&lt;SPAN style="FONT-SIZE: 18pt; \
COLOR: #3366ff; FONT-FAMILY: Arial"&gt;100% guaranteed \
originals&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/P&gt; &lt;P class=MsoNormal&gt;&lt;FONT face=Arial \
color=#3366ff size=5&gt;&lt;SPAN style="FONT-SIZE: 18pt; COLOR: #3366ff; FONT-FAMILY: \
Arial"&gt;92 phones are available for immediate delivery from &lt;?xml:namespace prefix = \
st1 ns = "urn:schemas-microsoft-com:office:smarttags" /&gt;&lt;st1:place \
w:st="on"&gt;&lt;st1:country-region \
w:st="on"&gt;Singapore&lt;/st1:country-region&gt;&lt;/st1:place&gt;.&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/P&gt; &lt;P \
class=MsoNormal&gt;&lt;FONT face=Arial color=#3366ff size=5&gt;&lt;SPAN style="FONT-SIZE: 18pt; \
COLOR: #3366ff; FONT-FAMILY: Arial"&gt;Minimum order quantity 10 \
phones&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/P&gt; &lt;P class=MsoNormal&gt;&lt;FONT face=Arial color=#3366ff \
size=5&gt;&lt;SPAN style="FONT-SIZE: 18pt; COLOR: #3366ff; FONT-FAMILY: Arial"&gt;Door to door \
delivery Price US $ 395.00&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/P&gt; &lt;P class=MsoNormal&gt;&lt;FONT \
face=Arial size=2&gt;&lt;SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: \
Arial"&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/P&gt; &lt;P class=MsoNormal&gt;&lt;B&gt;&lt;FONT face=Arial \
color=#3366ff size=5&gt;&lt;SPAN style="FONT-WEIGHT: bold; FONT-SIZE: 18pt; COLOR: #3366ff; \
FONT-FAMILY: Arial"&gt;Contact us immediately for \
details&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/B&gt;&lt;/P&gt; &lt;P class=MsoNormal&gt;&lt;B&gt;&lt;FONT face=Arial \
color=#3366ff size=5&gt;&lt;SPAN style="FONT-WEIGHT: bold; FONT-SIZE: 18pt; COLOR: #3366ff; \
FONT-FAMILY: Arial"&gt;JDS&lt;o:p&gt;&lt;/o:p&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/B&gt;&lt;/P&gt; &lt;P class=MsoNormal&gt;&lt;FONT \
face=Arial size=2&gt;&lt;SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: \
Arial"&gt;&lt;o:p&gt; &lt;/o:p&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/P&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070207151844</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-02-07 15:18:44-0400</timestampReceived><subject>ecryptfs</subject><body>

Hi,

I'm looking for users who tinkered with ecryptfs and want to share
their experience (pitfalls, tuning, scalability, install probs, etc).

I'm about to test it on ext3/plain partitions and ext3/loop-aes ones,
so why not join forces...

--=20
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070207155813</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-02-07 15:58:13-0400</timestampReceived><subject>README losetup/mount-Parameter "offset" needs another note</subject><body>

Hi


I wanted to use a whole HDD for loop-encryption.
To prevent some types of accidents i still wanted to put a Partition-Table on the HDD \
with a single whole-disk-spanning partition.

So i set the offset to 512 with "/dev/sd&lt;x&gt;" as the backing-store.
But Performace fell to a crawl (relativly speaking) realative to a non-offseted loop.

So i increased the offset by 512 for a few times in the hope that the phaenomenom is \
"curable". And with an offset of 4096 performance was the same as without an offset.

As i have a IA32-System it appears to me that the offset has to be page-aligned, in \
case performance matters. So i suggest to put a note about that in the README.


-- 
Real Programmers consider "what you see is what you get" to be just as
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated,
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070207175014</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-07 17:50:14-0400</timestampReceived><subject>Re: README losetup/mount-Parameter "offset" needs another note</subject><body>

Matthias Schniedermeyer wrote:
&gt; So i set the offset to 512 with "/dev/sd&lt;x&gt;" as the backing-store. But
&gt; Performace fell to a crawl (relativly speaking) realative to a
&gt; non-offseted loop.
&gt; 
&gt; So i increased the offset by 512 for a few times in the hope that the
&gt; phaenomenom is "curable". And with an offset of 4096 performance was the
&gt; same as without an offset.
&gt; 
&gt; As i have a IA32-System it appears to me that the offset has to be
&gt; page-aligned, in case performance matters. So i suggest to put a note
&gt; about that in the README.

What kernel version are you using?
What loop implementation are you using?

Mainline loop driver uses page cache for both file backed and device backed
setups. Loop-AES version of loop driver uses page cache only for file backed
setups. Your description sounds like you are using mainline loop.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070207184627</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-02-07 18:46:27-0400</timestampReceived><subject>Re: README losetup/mount-Parameter "offset" needs another note</subject><body>

Jari Ruusu wrote:
&gt; Matthias Schniedermeyer wrote:
&gt;&gt; So i set the offset to 512 with "/dev/sd&lt;x&gt;" as the backing-store. But
&gt;&gt; Performace fell to a crawl (relativly speaking) realative to a
&gt;&gt; non-offseted loop.
&gt;&gt;
&gt;&gt; So i increased the offset by 512 for a few times in the hope that the
&gt;&gt; phaenomenom is "curable". And with an offset of 4096 performance was the
&gt;&gt; same as without an offset.
&gt;&gt;
&gt;&gt; As i have a IA32-System it appears to me that the offset has to be
&gt;&gt; page-aligned, in case performance matters. So i suggest to put a note
&gt;&gt; about that in the README.
&gt; 
&gt; What kernel version are you using?

2.6.19, vanilla, self-compiled (But later this day it will be 2.6.20)

&gt; What loop implementation are you using?

loop-aes 3.1e
(I'm a loop-aes user for 3-4 years)

&gt; Mainline loop driver uses page cache for both file backed and device backed
&gt; setups. Loop-AES version of loop driver uses page cache only for file backed
&gt; setups. Your description sounds like you are using mainline loop.

I case numbers matter.

CORE2 Duo E6700, 2GB DDR2-800 RAM
(Or about the fastest "not extreme" system currently available)

"RAW" AES128-v3 throughput this system can reach is about 100MB/s (using
a single thread of aespipe)

- snip -
time (dd if=/dev/zero bs=20480 count=52428 | aespipe -e aes128 -p3 3&lt; &lt;(
gpg &lt; key.gpg ) &gt; /dev/null)
52428+0 records in
52428+0 records out
1073725440 bytes (1.1 GB) copied, 10.9219 seconds, 98.3 MB/s

real    0m10.924s
user    0m7.977s
sys     0m0.657s
- snip -
(Currently my system is working, numbers are a little bit better with 0
load)

HDD is a 500GB Seagate/PATA, connected to a onboard jmicron
PATA-Controller(apears to be a PCIe device) and driven by the matching
libata driver. The HDD delivers a linear throughput of about 70-73MB/s,
which doesn't decrease much when i put a aes128-v3-loop over it, and
which uses about 1/2 of the available CPU-ressources

gpg &lt; key.gpg | losetup -e aes128 -p 0 /dev/loop4 /dev/sdb

The same loop, with the "not good" offsets of 512-3584, decreases the
throughput to a craw of 5-20MB/s (don't have exact numbers anymore and
currently my system is working, so i can't retest)

With an offset of 4096 everything is good(tm) again.
gpg &lt; key.gpg | losetup -e aes128 -p 0 -o 4096 /dev/loop4 /dev/sdb





Bis denn

-- 
Real Programmers consider "what you see is what you get" to be just as
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated,
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070207210206</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-07 21:02:06-0400</timestampReceived><subject>Re: README losetup/mount-Parameter "offset" needs another note</subject><body>

Matthias Schniedermeyer wrote:
&gt; HDD is a 500GB Seagate/PATA, connected to a onboard jmicron
&gt; PATA-Controller(apears to be a PCIe device) and driven by the matching
&gt; libata driver. The HDD delivers a linear throughput of about 70-73MB/s,
&gt; which doesn't decrease much when i put a aes128-v3-loop over it, and
&gt; which uses about 1/2 of the available CPU-ressources
&gt; 
&gt; gpg &lt; key.gpg | losetup -e aes128 -p 0 /dev/loop4 /dev/sdb
&gt; 
&gt; The same loop, with the "not good" offsets of 512-3584, decreases the
&gt; throughput to a craw of 5-20MB/s (don't have exact numbers anymore and
&gt; currently my system is working, so i can't retest)
&gt; 
&gt; With an offset of 4096 everything is good(tm) again.
&gt; gpg &lt; key.gpg | losetup -e aes128 -p 0 -o 4096 /dev/loop4 /dev/sdb

Did you test it through a file system or direct to loop device?

Direct to loop device test has disadvantage of possibly un-optimal default
soft block size. If loop device size is not multiple of page size, then
smaller than page size soft block size default is set at losetup time. This
may affect performance when loop device is read/written directly. File
system mount of course sets better soft block size and bangs the device
using more optimally sized reguests. Using offset=512 shrinks loop device
size. What does "blockdev --getsize /dev/loop4" command output now (using
4096 byte offset)?

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070207220556</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-02-07 22:05:56-0400</timestampReceived><subject>Re: README losetup/mount-Parameter "offset" needs another note</subject><body>

Jari Ruusu wrote:
&gt; Matthias Schniedermeyer wrote:
&gt;&gt; HDD is a 500GB Seagate/PATA, connected to a onboard jmicron
&gt;&gt; PATA-Controller(apears to be a PCIe device) and driven by the matching
&gt;&gt; libata driver. The HDD delivers a linear throughput of about 70-73MB/s,
&gt;&gt; which doesn't decrease much when i put a aes128-v3-loop over it, and
&gt;&gt; which uses about 1/2 of the available CPU-ressources
&gt;&gt;
&gt;&gt; gpg &lt; key.gpg | losetup -e aes128 -p 0 /dev/loop4 /dev/sdb
&gt;&gt;
&gt;&gt; The same loop, with the "not good" offsets of 512-3584, decreases the
&gt;&gt; throughput to a craw of 5-20MB/s (don't have exact numbers anymore and
&gt;&gt; currently my system is working, so i can't retest)
&gt;&gt;
&gt;&gt; With an offset of 4096 everything is good(tm) again.
&gt;&gt; gpg &lt; key.gpg | losetup -e aes128 -p 0 -o 4096 /dev/loop4 /dev/sdb
&gt; 
&gt; Did you test it through a file system or direct to loop device?

I discovered the slow performance while "initializing" the loop with
dd if=/dev/zero of=/dev/loop&lt;x&gt;
(Currently i'm not sure if i also used a bs=&lt;whatever&gt;, maybe not)

So direct to loop it is.
I haven't tested putting a filesystem on the loop, at that point i just
wanted a completely zeroed loop (so i had a seemingly "random"
backing-store).

So it appears that only a note about "direct" use of loop may be
suboptimal for offseted loops. E.g. when you "zero" over the loop (which
is definetly IO or CPU-bould) instead of "randomizing" over the loop or
directly to the backing store.
(Random-performance wasn't great AFAIR, so i settled with zeroing over
the loop. Which i think is "good enough", given that a) it's v3 (65th
key alone should prevent "detecting" zero blocks when next to no
knowledge exists about the plain-text) and b) i use a different key for
each loop (see below))

&gt; Direct to loop device test has disadvantage of possibly un-optimal default
&gt; soft block size. If loop device size is not multiple of page size, then
&gt; smaller than page size soft block size default is set at losetup time. This
&gt; may affect performance when loop device is read/written directly. File
&gt; system mount of course sets better soft block size and bangs the device
&gt; using more optimally sized reguests. Using offset=512 shrinks loop device
&gt; size. What does "blockdev --getsize /dev/loop4" command output now (using
&gt; 4096 byte offset)?

I think the total capacity is quite irrelevant for this case, it's the
expected HDD size minus 8 Blocks?
blockdev --getsize /dev/loop2
976773160
vs.
blockdev --getsize /dev/sdb
976773168
(Loop-No. changed because 1) i just used 4 and b) i automount just about
everything.(*))

So guess we can settle the case and i will just have to live with 143,50
KB (or .00000127 percent of total capacity) of "lost" space due to
assuming a poorly performing "direct to loop" would also lead to a
poorly performing "filesystem over loop".




*:
I put the "name" of the HDD at 0x1b8 of the MBR, which is documented as
"could be used for a 4 byte 'ID'" (Another reason why i wanted to spare
the MBR, so i could place a marker somewhere in it)
Naming schema i use is xm and 2 digits.

Placing the marker works like this:
echo "xm01" | dd bs=1 count=4 seek=440 conv=notrunc of=/dev/sd&lt;x&gt;

Then i wrote a little shell script that extract the marked and outputs a
udev-complying string:
- snip -
if [ "$1" != "" ]; then
  label=`dd if="$1" bs=1 count=4 skip=440 status=noxfer 2&gt;/dev/null`
  echo "$label" | grep ^xm &amp;&gt;/dev/null &amp;&amp; echo "ID_XM=$label"
fi
- snip -

With a matching udev-rule:
- snip -
# Check for xm-disc
KERNEL=="sd*[!0-9]", \
        IMPORT{program}="/usr/local/bin/my/xm_id.sh $tempnode"
ENV{ID_XM}=="xm[0-9][0-9]", \
        SYMLINK+="disk/by-xm/$ENV{ID_XM}"
- snip -
Which means a symlink like "xm01" is registered for each HDD where a
marker is found into the directory "/dev/disk/by-xm/", which points to
the /dev/sd&lt;x&gt;-device it gets when it is connected. (In my case mostly
USB2.0, but i will move to (e)SATA in the future. Now that hotplugging
SATA actually works and (e)SATA has way better performance)

And, at last, with an also matching automount-entry (1 line!):
xm01 -fstype=xfs,noatime,encryption=aes128,offset=4096,gpgkey=xm01.gpg
:/dev/disk/by-xm/xm01

I have all the "magic" in place it needs to automount the encrypted HDDs
despite them being encrypted. Before encryption i i just used LABELd or
UUIDed filesystems, but encryption prevents that, especially when you
use different keys for different loops.

(My current statistics are: 41 HDDs with a 10,5 TiB total capacity and 9
TiB used. Currently being converted from unencrypted to encrypted, which
will probably take as long as sometime next month, averaging somewhere
over a day per HDD.)



Bis denn

-- 
Real Programmers consider "what you see is what you get" to be just as
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated,
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070213225734</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-02-13 22:57:34-0400</timestampReceived><subject>Loop-AES: Question for Password when none is needed</subject><body>

Hi


When i use a key-file that is only 'gpg --store -a', for e.x. because
the key-file is stored inside an encrypted filesystem that is currently
mounted, mount still asks for a Password where anything can be typed.

What makes this not beautiful is that it can only be short-circuited
with -p &lt;whatever&gt;. But that doesn't fly with autofs map-type rule. You
can only provide "-o &lt;whatever&gt;" options that are passed down to mount.
Naturally redirecting stderr isn't possible either.
The mount succeeds, because nothing can be read from STDIN as i guess
there is no STDIN, so the mount continues.
But every time an encrypted automount happens i get an ugly
... automount[1441]: &gt;&gt; Password:
line in syslog.

an example of a map-type rule (stripped down to into 72 chars):
test -fstype=xfs,encryption=aes128,gpgkey=/tmp/key.gpg :/dev/sda4

So i tested a bit. With:
gpg --passphrase '' &amp;&gt;/dev/null &lt; key.gpg
and a look at the errorlevel it can tested if a key can be decrypted
without a passphrase.

So my feature-wish would be:
Test if a key can be decrypted without a password and don't ask for one
if none is need
and/or
add a another parameter to losetup and a "-o"-type option for mount, so
that it can be explicitly specified that a key is only stored






Bis denn

-- 
Real Programmers consider "what you see is what you get" to be just as
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated,
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070222110345</emailId><senderName>Irfan Ahmed</senderName><senderEmail>ahm_irf@yahoo.com</senderEmail><timestampReceived>2007-02-22 11:03:45-0400</timestampReceived><subject>Help requried to write the decrypted ipsec packets to the local disk.</subject><body>

Hi,
 

I am using kernel 2.6.18 version in fedora linux which has built-in
support for ipsec. I am working on a project in which I have to write
the decrypted ipsec packets to the local disk.
 

Any document or comments or help that might help me to understand the
relevant code or perform this task. Please also specify the relevant
code and the documents to understand it.
 

Regards,


Send instant messages to your online friends http://uk.messenger.yahoo.com 
[Attachment #3 (text/html)]

&lt;html&gt;&lt;head&gt;&lt;style type="text/css"&gt;&lt;!-- DIV {margin:0px;} \
--&gt;&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;div \
style="font-family:verdana,helvetica,sans-serif;font-size:12pt"&gt;&lt;div&gt;Hi,&lt;br&gt; &lt;br&gt; I \
am using kernel 2.6.18 version in fedora linux which has built-in support for ipsec. \
I am working on a project in which I have to write the decrypted ipsec packets to the \
local disk.&lt;br&gt; &lt;br&gt; Any document or comments or help that might help me to \
understand the relevant code or perform this task. Please also specify the relevant
code and the documents to understand it.&lt;br&gt; &lt;br&gt;
Regards,&lt;/div&gt;&lt;/div&gt;&lt;br&gt;Send instant messages to your online friends \
http://uk.messenger.yahoo.com &lt;/body&gt;&lt;/html&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070222193426</emailId><senderName>Irfan Ahmed</senderName><senderEmail>ahm_irf@yahoo.com</senderEmail><timestampReceived>2007-02-22 19:34:26-0400</timestampReceived><subject>Help requried to write the decrypted ipsec packets to the local disk.</subject><body>

Hi,

I am using kernel 2.6.18 version in fedora linux which has built-in support for \
ipsec. I am working on a project in which I have to write the decrypted IPv6 / ipsec \
packets to the local disk.   
  I need help to identify the relevant code to modify in the kernel. 
  
Any document or comments or help that might help me to perform this task or \
understand the relevant code. I have tried to understand ~/net/IPv6 files in Fedora \
linux source code but I found out without any documentation I could not understand \
the IPv6 code.  
  I am new to linux kernel and I will be really grateful if someone help me.
   
  Regards,

 Send instant messages to your online friends http://uk.messenger.yahoo.com 


[Attachment #3 (text/html)]

&lt;DIV&gt;Hi,&lt;BR&gt;&lt;BR&gt;I am using kernel 2.6.18 version in fedora linux which has built-in \
support for ipsec. I am working on a project in which I have to write the decrypted \
IPv6 / ipsec packets to the local disk. &lt;/DIV&gt;  &lt;DIV&gt; &lt;/DIV&gt;  &lt;DIV&gt;I need help \
to identify the relevant code to modify in the kernel. &lt;/DIV&gt;  &lt;DIV&gt;&lt;BR&gt;Any document \
or comments or help that might help me to perform this task or understand \
the relevant code.&lt;EM&gt; &lt;/EM&gt;I have tried to understand ~/net/IPv6 files \
in Fedora linux source code but I found out without any documentation I \
could not understand the IPv6 code.&lt;/DIV&gt;  &lt;DIV&gt; &lt;/DIV&gt;  &lt;DIV&gt;I am new to linux \
kernel and I will be really grateful if someone help me.&lt;/DIV&gt;  &lt;DIV&gt; &lt;/DIV&gt;  \
&lt;DIV&gt;Regards,&lt;/DIV&gt;&lt;p&gt; Send instant messages to your online friends \
http://uk.messenger.yahoo.com 


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070222221949</emailId><senderName>Phil H</senderName><senderEmail>philtickle200@yahoo.com</senderEmail><timestampReceived>2007-02-22 22:19:49-0400</timestampReceived><subject>Re: Help requried to write the decrypted ipsec packets to the local disk.</subject><body>

If you don't get any responses it's possible this is not quite the right mail list \
for your query - I've never seen anything about ipsec on this list.  
 I'd google for a specific ipsec mail list if I were you.

Irfan Ahmed &lt;ahm_irf@yahoo.com&gt; wrote: Hi,

I am using kernel 2.6.18 version in fedora linux which has built-in support for \
ipsec. I am working on a project in which I have to write the decrypted IPv6 / ipsec \
packets to the local disk.   
  I need help to identify the relevant code to modify in the kernel. 
  
Any document or comments or help that might help me to perform this task or \
understand the relevant code. I have tried to understand ~/net/IPv6 files in Fedora \
linux source code but I found out without any documentation I could not understand \
the IPv6 code.  
  I am new to linux kernel and I will be really grateful if someone help me.
   
  Regards,
 Send instant messages to your online friends http://uk.messenger.yahoo.com 


 
---------------------------------
Never miss an email again!
Yahoo! Toolbar alerts you the instant new Mail arrives. Check it out.


[Attachment #3 (text/html)]

If you don't get any responses it's possible this is not quite the right mail list \
for your query - I've never seen anything about ipsec on this list.&lt;br&gt; &lt;br&gt; I'd \
google for a specific ipsec mail list if I were you.&lt;br&gt;&lt;br&gt;&lt;b&gt;&lt;i&gt;Irfan Ahmed \
&lt;ahm_irf@yahoo.com&gt;&lt;/i&gt;&lt;/b&gt; wrote:&lt;blockquote class="replbq" \
style="border-left: 2px solid rgb(16, 16, 255); margin-left: 5px; padding-left: \
5px;"&gt; &lt;div&gt;Hi,&lt;br&gt;&lt;br&gt;I am using kernel 2.6.18 version in fedora linux which has \
built-in support for ipsec. I am working on a project in which I have to write the \
decrypted IPv6 / ipsec packets to the local disk. &lt;/div&gt;  &lt;div&gt; &lt;/div&gt;  &lt;div&gt;I \
need help to identify the relevant code to modify in the kernel. &lt;/div&gt;  &lt;div&gt;&lt;br&gt;Any \
document or comments or help that might help me to perform this task or understand \
the relevant code.&lt;em&gt; &lt;/em&gt;I have tried to understand ~/net/IPv6 files \
in Fedora linux source code but I found out without any documentation I \
could not  understand the IPv6 code.&lt;/div&gt;  &lt;div&gt; &lt;/div&gt;  &lt;div&gt;I am new to linux \
kernel and I will be really grateful if someone help me.&lt;/div&gt;  &lt;div&gt; &lt;/div&gt;  \
&lt;div&gt;Regards,&lt;/div&gt;&lt;div&gt; Send instant messages to your online friends \
http://uk.messenger.yahoo.com &lt;/div&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;p&gt; 

&lt;hr size=1&gt;&lt;a href="http://us.rd.yahoo.com/evt=49938/*http://tools.search.yahoo.com/toolbar/features/mail/"&gt;Never \
miss an email again!&lt;br&gt;Yahoo! Toolbar&lt;/a&gt; alerts you the instant new Mail arrives.&lt;a \
href=" http://us.rd.yahoo.com/evt=49937/*http://tools.search.yahoo.com/toolbar/features/mail/"&gt; \
Check it out.&lt;/a&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070215153709</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-15 15:37:09-0400</timestampReceived><subject>Re: Loop-AES: Question for Password when none is needed</subject><body>

Matthias Schniedermeyer wrote:
&gt; When i use a key-file that is only 'gpg --store -a', for e.x. because
&gt; the key-file is stored inside an encrypted filesystem that is currently
&gt; mounted, mount still asks for a Password where anything can be typed.

I hope that for security reasons you are using a different key file for each
automounted file system. If you are mounting removable media, then encrypted
key file must be stored on same media. Passphrase-less key file on same
media won't provide any security.
 
&gt; What makes this not beautiful is that it can only be short-circuited
&gt; with -p &lt;whatever&gt;. But that doesn't fly with autofs map-type rule. You
&gt; can only provide "-o &lt;whatever&gt;" options that are passed down to mount.
&gt; Naturally redirecting stderr isn't possible either.

I don't know what automounter implementation you are using, but BSD amd
automounter that I am using lets admin configure a program or script to do
the actual mount operation.

&gt; The mount succeeds, because nothing can be read from STDIN as i guess
&gt; there is no STDIN, so the mount continues.
&gt; But every time an encrypted automount happens i get an ugly
&gt; ... automount[1441]: &gt;&gt; Password:
&gt; line in syslog.

I don't see such messages on my box.

Below are some config lines from my test box that I set up to automount
encrypted floppy. First 8192 bytes of each floppy is used to store gpg
encrypted key file. Here is mount point definition in /etc/am-utils/amd.conf
file:

[/a]
  map_name = /etc/am-utils/amd.a
  
Here is map entry in /etc/am-utils/amd.a file:

fd0-crypt   type:=program;fs:=/floppy;mount:="/etc/am-utils/cryptmount.sh \
/etc/am-utils/cryptmount.sh ext2 /dev/fd0 /floppy /dev/loop0";unmount:="/bin/umount \
umount /floppy"

Here is root-only executable shell script in /etc/am-utils/cryptmount.sh file:

#!/bin/sh
/bin/mount -t $1 $2 $3 -o encryption=AES128,gpgkey=$2,offset=8192,loop=$4 -p3 \
3&lt;/tmp/clearpassword

Here is a script that I used to create encrypted floppy:

#!/bin/bash
DEV=/dev/fd0
LOOP=/dev/loop7
set -v
set -e
yes "" | dd of=${DEV} bs=512 count=16 conv=notrunc
head -c 2925 /dev/random | uuencode -m - | head -n 66 | tail -n 65 \
  | gpg --symmetric -a --no-comments --no-emit-version | dd of=${DEV} conv=notrunc
head -c 15 /dev/urandom | uuencode -m - | head -n 2 | tail -n 1 \
  | losetup -p 0 -e AES128 -o 8192 ${LOOP} ${DEV}
dd if=/dev/zero of=${LOOP} bs=4k conv=notrunc || true
sync
losetup -d ${LOOP}
losetup -e AES128 -K ${DEV} -o 8192 ${LOOP} ${DEV}
mkfs -t ext2 -m 0 -O none ${LOOP}
losetup -d ${LOOP}

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070215170804</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-02-15 17:08:04-0400</timestampReceived><subject>Re: Loop-AES: Question for Password when none is needed</subject><body>

Jari Ruusu wrote:
&gt; Matthias Schniedermeyer wrote:
&gt;&gt; When i use a key-file that is only 'gpg --store -a', for e.x. because
&gt;&gt; the key-file is stored inside an encrypted filesystem that is currently
&gt;&gt; mounted, mount still asks for a Password where anything can be typed.
&gt; 
&gt; I hope that for security reasons you are using a different key file for each
&gt; automounted file system. If you are mounting removable media, then encrypted
&gt; key file must be stored on same media. Passphrase-less key file on same
&gt; media won't provide any security.

If i'm not mistaken i said exactly that.

Every HDD has a separate key-file and the container with the key-files
is on another partition and the key-file from the container is encrypted.

&gt;&gt; What makes this not beautiful is that it can only be short-circuited
&gt;&gt; with -p &lt;whatever&gt;. But that doesn't fly with autofs map-type rule. You
&gt;&gt; can only provide "-o &lt;whatever&gt;" options that are passed down to mount.
&gt;&gt; Naturally redirecting stderr isn't possible either.
&gt; 
&gt; I don't know what automounter implementation you are using, but BSD amd
&gt; automounter that I am using lets admin configure a program or script to do
&gt; the actual mount operation.

autofs(v4) that is included in Linux since i don't know how long.

As to the topic of using another mount command, i could use a
"program"-type map. But as the line in Syslog is the only annoying
thing, with the "map"-type, it's a bit of an overkill.

I could also skip autofs completely and just use udev to start a mount
after the HDD is connected. But i like the "auto umount"-Part of autofs,
so that i can just disconnect the HDD, if enough time had passed since
usage.

&gt;&gt; The mount succeeds, because nothing can be read from STDIN as i guess
&gt;&gt; there is no STDIN, so the mount continues.
&gt;&gt; But every time an encrypted automount happens i get an ugly
&gt;&gt; ... automount[1441]: &gt;&gt; Password:
&gt;&gt; line in syslog.
&gt; 
&gt; I don't see such messages on my box.

Do you get the password-question on the commandline with an unencrypted
key-file (with Linux)?

If not, then the loop-aes-utils package from Debian-SID contains the bug.




Bis denn

-- 
Real Programmers consider "what you see is what you get" to be just as
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated,
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070221121731</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-02-21 12:17:31-0400</timestampReceived><subject>losetup -a blocks when loop is written to</subject><body>

Hi


When i do a 'losetup -a' while a manually setup encrypted loop is 'zero'ed with
dd if=/dev/zero of=/dev/loop&lt;x&gt; bs=4096 count=&lt;y&gt;
It blocks, just before the written to loop would be printed, until dd is finished, \
which may take several hours.

As even after 'KILL'ing the process it stays in the process list, i assume that \
something on the kernel-site is blocking.


Kernel: 2.6.20
Loop-aes 3.1e
Distro: Debian-SID, losetup from loop-aes-utils Package.



-- 
Real Programmers consider "what you see is what you get" to be just as
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated,
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070122121349</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-01-22 12:13:49-0400</timestampReceived><subject>SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

Hi!

My question concerns Linux SuSE 10.2 in its 32 bit version and booting encrypted root \
from CD as described in 7.6 of the loop-aes readme. Everything works fine until I try \
to use a passphrase with characters like the euro sign ¤ or some greek mues µ and \
such. I tried all I could to solve this issue but without success. Below is a look at \
library dependencies. This linux-gate.so.1 is a file I cannot find. However, loadkeys \
works with no complaints. Also the boot-CD runs up to the point where the passphrase \
is asked, then gpg states its failure to decrypt the key. I stored the default.kmap \
to the iso with both dumpkeys &gt;/iso/default.kmap and from the SuSE keymaps in \
uncompressed format. No luck so far;-( Hints &amp; advice is most welcome.


blue:/boot/iso # ldd -v /boot/iso/loadkeys
        linux-gate.so.1 =&gt;  (0xffffe000)
        libc.so.6 =&gt; /lib/libc.so.6 (0xb7e8d000)
        /lib/ld-linux.so.2 (0xb7fd7000)

        Version information:
        /boot/iso/loadkeys:
                libc.so.6 (GLIBC_2.3) =&gt; /lib/libc.so.6
                libc.so.6 (GLIBC_2.3.4) =&gt; /lib/libc.so.6
                libc.so.6 (GLIBC_2.1) =&gt; /lib/libc.so.6
                libc.so.6 (GLIBC_2.0) =&gt; /lib/libc.so.6
        /lib/libc.so.6:
                ld-linux.so.2 (GLIBC_PRIVATE) =&gt; /lib/ld-linux.so.2
                ld-linux.so.2 (GLIBC_2.3) =&gt; /lib/ld-linux.so.2
                ld-linux.so.2 (GLIBC_2.1) =&gt; /lib/ld-linux.so.2

Kind regards,
Peter
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal für Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070122171841</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-01-22 17:18:41-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

Peter_22@gmx.de wrote:
&gt; Everything works fine until I try to use a passphrase with characters like
&gt; the euro sign ¤ or some greek mues µ and such.

Welcome to never ending mess of incompatible character encodings.

My guess is that you created and encrypted your key file using some
character encoding in X windows terminal, and the system console character
encoding that is used to decrypt the key file at boot is different and
incompatible.

That "dumpkeys &gt;/iso/default.kmap" saves system console keyboard mappings.
What happens is you switch to system console using CONTROL-ALT-F1 and create
new key file using that keyboard mapping? Type CONTROL-ALT-F7 to get back to
X windows.

Following shell commands dump hex values of character you type:

$ read x ; echo -n ${x} | od -Ax -tx1 -
123
000000 31 32 33
000003
$ read x ; echo -n ${x} | od -Ax -tx1 -
öäåÖÄÅµß
000000 f6 e4 e5 d6 c4 c5 b5 df
000008

Are those hex values same in X windows terminal and system console?

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070123095048</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-01-23 09:50:48-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; Welcome to never ending mess of incompatible character encodings.
&gt; 
&gt; My guess is that you created and encrypted your key file using some
&gt; character encoding in X windows terminal, and the system console character
&gt; encoding that is used to decrypt the key file at boot is different and
&gt; incompatible.

Yes, I think the problem derives from that. I created the keys from the console in \
KDE. I also issued "dumpkeys &gt;/iso/default.kmap" from KNOPPIX 5.0.1 DVD and tried to \
use this keymap with the gpg keys made under SuSE but it failed.

&gt; That "dumpkeys &gt;/iso/default.kmap" saves system console keyboard mappings.
&gt; What happens is you switch to system console using CONTROL-ALT-F1 and
&gt; create
&gt; new key file using that keyboard mapping? Type CONTROL-ALT-F7 to get back
&gt; to
&gt; X windows.

Ok. I´ll try this and report the results by tomorrow.

 
&gt; Following shell commands dump hex values of character you type:
&gt; 
&gt; $ read x ; echo -n ${x} | od -Ax -tx1 -
&gt; 123
&gt; 000000 31 32 33
&gt; 000003
&gt; $ read x ; echo -n ${x} | od -Ax -tx1 -
&gt; öäåÖÄÅµß
&gt; 000000 f6 e4 e5 d6 c4 c5 b5 df
&gt; 000008
&gt; 
&gt; Are those hex values same in X windows terminal and system console?

Thanks for your efforts so far.

Best regards,
Peter
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal für Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070223182534</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-23 18:25:34-0400</timestampReceived><subject>Announce loop-AES-v3.1f file/swap crypto package</subject><body>

loop-AES changes since previous release:
- Work around dash /bin/sh shell and make-3.81 incompatibilities.
- Work around block layer breakage in 2.6.20-rcX-mmX kernels.
- Added "cleartextkey=file" mount option to mount, and "-P file" command
  line option to losetup. These options help automounters.
- Added loop-aes-keygen script from Max Vozeler.

bzip2 compressed tarball is here:

    http://osdn.dl.sourceforge.net/sourceforge/loop-aes/loop-AES-v3.1f.tar.bz2
    md5sum 1020b93d723f1d573bacfe4a3362fc25

    http://osdn.dl.sourceforge.net/sourceforge/loop-aes/loop-AES-v3.1f.tar.bz2.sign


Additional ciphers package changes since previous release:
- Work around dash /bin/sh shell and make-3.81 incompatibilities.

bzip2 compressed tarball is here:

    http://osdn.dl.sourceforge.net/sourceforge/loop-aes/ciphers-v3.0e.tar.bz2
    md5sum 10aeb23387a1e2d635cfe9345c21b444

    http://osdn.dl.sourceforge.net/sourceforge/loop-aes/ciphers-v3.0e.tar.bz2.sign

Note: As of this writing, files at http://loop-aes.sourceforge.net/ have not
been updated yet.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070228191318</emailId><senderName>Richard Purdie</senderName><senderEmail>rpurdie@openedhand.com</senderEmail><timestampReceived>2007-02-28 19:13:18-0400</timestampReceived><subject>[PATCH 0/5] Add LZO Compression</subject><body>

The following patch series adds LZO compression support to the kernel
and exposes it in a variety of places (jffs2, crypto).

This is particularly useful for jffs2 where significant boot time
speedups (~10%) and file read speed improvements (~40%) are seen when
its used with only a slight drop in file compression ratio.

It also adds a favourlzo mode to jffs2 which is similar to the existing
size mode but lets lzo compression win if the lzo compressed size is
"similar" to but not the best compression ratio. This means we can keep
zlib compression where it makes a significant difference to compressed
file size.

The final jffs2 patch which starts adding sysfs support is something I
have around from testing and I'm including it for comments to see if its
desirable upstream. It could be extended further to allow greater
control of jffs2 at runtime.

Richard





-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070228191354</emailId><senderName>Richard Purdie</senderName><senderEmail>rpurdie@openedhand.com</senderEmail><timestampReceived>2007-02-28 19:13:54-0400</timestampReceived><subject>[PATCH 5/5] jffs2: Allow selection of compression mode via a sysfs</subject><body>

Allow selection of the compression mode for jffs2 via a sysfs 
attribute. This establishes a sysfs presence for jffs2 through
which other compression options could easily be exported too.

Signed-off-by: Richard Purdie &lt;rpurdie@openedhand.com&gt;

---
 fs/jffs2/compr.c |  131 +++++++++++++++++++++++++++++++++++++++----------------
 1 file changed, 94 insertions(+), 37 deletions(-)

Index: linux/fs/jffs2/compr.c
===================================================================
--- linux.orig/fs/jffs2/compr.c	2007-02-28 18:12:33.000000000 +0000
+++ linux/fs/jffs2/compr.c	2007-02-28 18:12:33.000000000 +0000
@@ -13,6 +13,7 @@
  *
  */
 
+#include &lt;linux/kobject.h&gt;
 #include "compr.h"
 
 static DEFINE_SPINLOCK(jffs2_compressor_list_lock);
@@ -298,6 +299,43 @@ int jffs2_unregister_compressor(struct j
         return 0;
 }
 
+char *jffs2_get_compression_mode_name(void)
+{
+        switch (jffs2_compression_mode) {
+        case JFFS2_COMPR_MODE_NONE:
+                return "none";
+        case JFFS2_COMPR_MODE_PRIORITY:
+                return "priority";
+        case JFFS2_COMPR_MODE_SIZE:
+                return "size";
+	case JFFS2_COMPR_MODE_FAVOURLZO:
+		return "favourlzo";
+        }
+        return "unkown";
+}
+
+int jffs2_set_compression_mode_name(const char *name)
+{
+        if (!strncmp("none", name, 4)) {
+                jffs2_compression_mode = JFFS2_COMPR_MODE_NONE;
+                return 0;
+        }
+        if (!strncmp("priority", name, 8)) {
+                jffs2_compression_mode = JFFS2_COMPR_MODE_PRIORITY;
+                return 0;
+        }
+        if (!strncmp("size", name, 4)) {
+                jffs2_compression_mode = JFFS2_COMPR_MODE_SIZE;
+                return 0;
+        }
+	if (!strncmp("favourlzo", name, 9)) {
+		jffs2_compression_mode = JFFS2_COMPR_MODE_FAVOURLZO;
+		return 0;
+	}
+        return -EINVAL;
+}
+
+
 #ifdef CONFIG_JFFS2_PROC
 
 #define JFFS2_STAT_BUF_SIZE 16000
@@ -347,42 +385,6 @@ char *jffs2_stats(void)
         return buf;
 }
 
-char *jffs2_get_compression_mode_name(void)
-{
-        switch (jffs2_compression_mode) {
-        case JFFS2_COMPR_MODE_NONE:
-                return "none";
-        case JFFS2_COMPR_MODE_PRIORITY:
-                return "priority";
-        case JFFS2_COMPR_MODE_SIZE:
-                return "size";
-        case JFFS2_COMPR_MODE_FAVOURLZO:
-                return "favourlzo";
-        }
-        return "unkown";
-}
-
-int jffs2_set_compression_mode_name(const char *name)
-{
-        if (!strcmp("none",name)) {
-                jffs2_compression_mode = JFFS2_COMPR_MODE_NONE;
-                return 0;
-        }
-        if (!strcmp("priority",name)) {
-                jffs2_compression_mode = JFFS2_COMPR_MODE_PRIORITY;
-                return 0;
-        }
-        if (!strcmp("size",name)) {
-                jffs2_compression_mode = JFFS2_COMPR_MODE_SIZE;
-                return 0;
-        }
-        if (!strncmp("favourlzo", name, 9)) {
-                jffs2_compression_mode = JFFS2_COMPR_MODE_FAVOURLZO;
-                return 0;
-        }
-        return 1;
-}
-
 static int jffs2_compressor_Xable(const char *name, int disabled)
 {
         struct jffs2_compressor *this;
@@ -448,8 +450,54 @@ void jffs2_free_comprbuf(unsigned char *
                 kfree(comprbuf);
 }
 
+static struct attribute jffs2_attr_mode = {
+	.name = "mode",
+	.mode = S_IRUGO | S_IWUSR,
+};
+
+static struct attribute *jffs2_attrs[] = {
+	&amp;jffs2_attr_mode,
+	NULL,
+};
+
+static ssize_t jffs2_attr_show(struct kobject *kobj, struct attribute *attr,
+		char *page)
+{
+	if (!strcmp("mode", attr-&gt;name))
+		return sprintf(page, "%s\n", jffs2_get_compression_mode_name());
+	return 0;
+}
+
+static ssize_t jffs2_attr_store(struct kobject *kobj, struct attribute *attr,
+		const char *page, size_t count)
+{
+	int ret = -EINVAL;
+
+	if (!strcmp("mode", attr-&gt;name)) {
+		ret = jffs2_set_compression_mode_name(page);
+		if (ret &gt;= 0)
+			return count;
+	}
+	return ret;
+}
+
+static struct sysfs_ops jffs2_sysfs_ops = {
+	.show	=	jffs2_attr_show,
+	.store	=	jffs2_attr_store,
+};
+
+static struct kobj_type jffs2_subsys_type = {
+	.default_attrs	= jffs2_attrs,
+	.sysfs_ops	= &amp;jffs2_sysfs_ops,
+};
+
+/* gives us jffs2_subsys */
+static decl_subsys(jffs2, NULL, NULL);
+
 int __init jffs2_compressors_init(void)
 {
+	int ret;
+
 /* Registering compressors */
 #ifdef CONFIG_JFFS2_ZLIB
         jffs2_zlib_init();
@@ -481,12 +529,21 @@ int __init jffs2_compressors_init(void)
 #endif
 #endif
 #endif
+	/* Errors here are not fatal */
+	kset_set_kset_s(&amp;jffs2_subsys, fs_subsys);
+	jffs2_subsys.kset.kobj.ktype = &amp;jffs2_subsys_type;
+	ret = subsystem_register(&amp;jffs2_subsys);
+	if (ret)
+		printk(KERN_WARNING "Error registering JFFS2 sysfs attributes\n");
+
         return 0;
 }
 
 int jffs2_compressors_exit(void)
 {
-/* Unregistering compressors */
+	subsystem_unregister(&amp;jffs2_subsys);
+
+	/* Unregistering compressors */
 #ifdef CONFIG_JFFS2_LZO
         jffs2_lzo_exit();
 #endif


-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070228193943</emailId><senderName>Artem Bityutskiy</senderName><senderEmail>dedekind@infradead.org</senderEmail><timestampReceived>2007-02-28 19:39:43-0400</timestampReceived><subject>Re: [PATCH 5/5] jffs2: Allow selection of compression mode via a</subject><body>

Hi Richard,

On Wed, 2007-02-28 at 19:13 +0000, Richard Purdie wrote:
&gt; +/* gives us jffs2_subsys */
&gt; +static decl_subsys(jffs2, NULL, NULL);

There is actually a file-system subsys - look up for fs_subsys. It is
declared at fs/namespace.c.

-- 
Best regards,
Artem Bityutskiy (Битюцкий Артём)

-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070223184542</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-02-23 18:45:42-0400</timestampReceived><subject>Re: Announce loop-AES-v3.1f file/swap crypto package</subject><body>

On 2/23/07, Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; loop-AES changes since previous release:

Thanks!

&gt; - Added loop-aes-keygen script from Max Vozeler.

Can you please add this to the Makefile so in next version we can do
something like:
Make utils_install DESTDIR=/tmp/xxxx

So that if you add new man pages or utilities it will be automatically
be installed by package management?

Best Regards,
Alon Bar-Lev.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070301173617</emailId><senderName>"Alon Bar-Lev"</senderName><senderEmail>alon.barlev@gmail.com</senderEmail><timestampReceived>2007-03-01 17:36:17-0400</timestampReceived><subject>Re: Announce loop-AES-v3.1f file/swap crypto package</subject><body>

Hello,

Best is to create a new folder, for example utils.
Move the loop-aes-keygen* into it.
And put attached files in there as well.

Just in case...
To produce the autoconf/automake stuff you should run:
autoreconf -i -v -f

Best Regards,
Alon Bar-Lev.

On 2/26/07, Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; Alon Bar-Lev wrote:
&gt; &gt; On 2/23/07, Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; &gt; &gt; - Added loop-aes-keygen script from Max Vozeler.
&gt; &gt;
&gt; &gt; Can you please add this to the Makefile so in next version we can do
&gt; &gt; something like:
&gt; &gt; Make utils_install DESTDIR=/tmp/xxxx
&gt; &gt;
&gt; &gt; So that if you add new man pages or utilities it will be automatically
&gt; &gt; be installed by package management?
&gt;
&gt; Please send me a patch.
&gt;
&gt; --
&gt; Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD
&gt;

["configure.ac" (text/plain)]

#
# Written by Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt;, February 23 2007
#

AC_PREREQ(2.60)
AC_INIT(loop-aes-utils, 0.1)
AM_INIT_AUTOMAKE([loop-aes-utils], [$PACKAGE_VERSION])

AC_CANONICAL_HOST
AC_PROG_INSTALL
AC_CONFIG_FILES([Makefile])
AC_OUTPUT

["Makefile.am" (text/x-makefile)]

#
# Written by Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt;, February 23 2007
#
AUTOMAKE_OPTIONS=foreign dist-bzip2

dist_man_MANS=loop-aes-keygen.1
bin_SCRIPTS=loop-aes-keygen

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070214192626</emailId><senderName>Linus Torvalds</senderName><senderEmail>torvalds@linux-foundation.org</senderEmail><timestampReceived>2007-02-14 19:26:26-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>



On Wed, 14 Feb 2007, David Howells wrote:
&gt;
&gt;  (1) A cut-down MPI library derived from GPG with error handling added.

Do we really need to add this?

Wouldn't it be much nicer to just teach people to use one of the existing 
signature things that we need for _other_ cases anyway, and already have 
merged?

(Of course, it's possible that none of the current crypto supports any 
signature checking at all - I didn't actually look. In which case my 
argument is pointless).

		Linus
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070214194057</emailId><senderName>David Howells</senderName><senderEmail>dhowells@redhat.com</senderEmail><timestampReceived>2007-02-14 19:40:57-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

Linus Torvalds &lt;torvalds@linux-foundation.org&gt; wrote:

&gt; &gt;  (1) A cut-down MPI library derived from GPG with error handling added.
&gt; 
&gt; Do we really need to add this?

I presume you mean the MPI library specifically?  If so, then yes.  It's
necessary to do DSA signature verification (or RSA for that matter).

&gt; Wouldn't it be much nicer to just teach people to use one of the existing 
&gt; signature things that we need for _other_ cases anyway, and already have 
&gt; merged?

Existing signature things?  I know not of such beasts, nor can I see them
offhand.

&gt; (Of course, it's possible that none of the current crypto supports any 
&gt; signature checking at all - I didn't actually look. In which case my 
&gt; argument is pointless).

Hashing, yes; encryption, yes; signature checking: no from what I can see.

It's possible that I can share code with eCryptFS, though at first sight that
doesn't seem to overlap with what I want to do.

David
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070214213200</emailId><senderName>Michael Halcrow</senderName><senderEmail>mhalcrow@us.ibm.com</senderEmail><timestampReceived>2007-02-14 21:32:00-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

On Wed, Feb 14, 2007 at 07:40:57PM +0000, David Howells wrote:
&gt; Hashing, yes; encryption, yes; signature checking: no from what I
&gt; can see.
&gt; 
&gt; It's possible that I can share code with eCryptFS, though at first
&gt; sight that doesn't seem to overlap with what I want to do.

Right now, eCryptfs just delegates its modular exponentiation
operations to a userspace daemon. If RSA ever finds its way into the
kernel, I might tweak eCryptfs to use that instead for some of the
public key operations.

Mike
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070214215937</emailId><senderName>David Howells</senderName><senderEmail>dhowells@redhat.com</senderEmail><timestampReceived>2007-02-14 21:59:37-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

Michael Halcrow &lt;mhalcrow@us.ibm.com&gt; wrote:

&gt; Right now, eCryptfs just delegates its modular exponentiation
&gt; operations to a userspace daemon. If RSA ever finds its way into the
&gt; kernel, I might tweak eCryptfs to use that instead for some of the
&gt; public key operations.

Am I right in thinking that RSA uses many of the same MPI lib bits as DSA?

David
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070214222138</emailId><senderName>Michael Halcrow</senderName><senderEmail>mhalcrow@us.ibm.com</senderEmail><timestampReceived>2007-02-14 22:21:38-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

On Wed, Feb 14, 2007 at 09:59:37PM +0000, David Howells wrote:
&gt; Michael Halcrow &lt;mhalcrow@us.ibm.com&gt; wrote:
&gt; 
&gt; &gt; Right now, eCryptfs just delegates its modular exponentiation
&gt; &gt; operations to a userspace daemon. If RSA ever finds its way into the
&gt; &gt; kernel, I might tweak eCryptfs to use that instead for some of the
&gt; &gt; public key operations.
&gt; 
&gt; Am I right in thinking that RSA uses many of the same MPI lib bits
&gt; as DSA?

I would imagine so. Assuming we aren't having to hassle with key
generation (eCryptfs takes care of that in userspace), then RSA is,
more or less, a^b mod c (mpi_mulpowm() and friends).

Mike
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070215034112</emailId><senderName>Andrew Morton</senderName><senderEmail>akpm@linux-foundation.org</senderEmail><timestampReceived>2007-02-15 03:41:12-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

On Wed, 14 Feb 2007 19:09:38 +0000 David Howells &lt;dhowells@redhat.com&gt; wrote:

&gt; These patches provide a GPG-based kernel module signing facility.  Their use is
&gt; not fully automated within the confines of the kernel build process because it
&gt; needs provision of keys from outside of the kernel before the kernel can be
&gt; compiled.
&gt; 
&gt; The patches are:
&gt; 
&gt;  (1) A cut-down MPI library derived from GPG with error handling added.
&gt; 
&gt;  (2) Permit hash algorithms to hash kernel data defined by a virtual address
&gt;      and a length rather than trying to use scattergather lists (which require
&gt;      struct page pointers to be determined).
&gt; 
&gt;  (3) Add extra information to the per-arch ELF headers to more fully describe
&gt;      the format of the ELF metadata.
&gt; 
&gt;  (4) Add module verification capabilities, including ELF metadata verification.
&gt; 
&gt;  (5) Add a generic DSA signature checker.  Given a SHA1 hash of the data to be
&gt;      verified and a binary blob holding a GPG signature stream, this verifies
&gt;      the signature using a built-in ring of public keys.
&gt; 
&gt;  (6) Add a module signature checker that applies signature checking to modules
&gt;      on module load, checking the signature against the ring of public keys
&gt;      compiled into the kernel.

Grand total:

 77 files changed, 9681 insertions(+), 10 deletions(-)

just to be able to sign modules.

Normally I'd collapse writhing in laughter, but..

&gt; These patches have been in use by RHEL and Fedora kernels for years, and so
&gt; have been thoroughly tested.

so I guess there's an argument for merging them so we can send them back to
you guys.  But there's also an argument to declare all this gunk a
vendor-only thing.  How much pain would that cause?
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070215041345</emailId><senderName>Dave Jones</senderName><senderEmail>davej@redhat.com</senderEmail><timestampReceived>2007-02-15 04:13:45-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

On Wed, Feb 14, 2007 at 07:41:12PM -0800, Andrew Morton wrote:

 &gt;  77 files changed, 9681 insertions(+), 10 deletions(-)
 &gt; 
 &gt; just to be able to sign modules.
 &gt; 
 &gt; Normally I'd collapse writhing in laughter, but..
 &gt; 
 &gt; &gt; These patches have been in use by RHEL and Fedora kernels for years, and so
 &gt; &gt; have been thoroughly tested.
 &gt; 
 &gt; so I guess there's an argument for merging them so we can send them back to
 &gt; you guys.  But there's also an argument to declare all this gunk a
 &gt; vendor-only thing.  How much pain would that cause?

it needs rediffing pretty much every time the cryptoapi changes.
On a good month that means once per point release, otherwise...

One argument in its favour is aparently Red Hat isn't the only vendor
with something like this.  I've not investigated it, but I hear rumours
that suse has something similar.  Having everyone using the same code
would be a win for obvious reasons.

		Dave

-- 
http://www.codemonkey.org.uk
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070215053540</emailId><senderName>Andreas Gruenbacher</senderName><senderEmail>agruen@suse.de</senderEmail><timestampReceived>2007-02-15 05:35:40-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

On Wednesday 14 February 2007 20:13, Dave Jones wrote:
&gt; I've not investigated it, but I hear rumours that suse has something
&gt; similar.

Actually, no. We don't belive that module signing adds significant value, and 
it also doesn't work well with external modules. (The external modules we 
really care about are GPL ones; it gives us a way to update drivers without 
pushing out entirely new kernels.)

Cheers,
Andreas
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070215054559</emailId><senderName>Dave Jones</senderName><senderEmail>davej@redhat.com</senderEmail><timestampReceived>2007-02-15 05:45:59-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

On Wed, Feb 14, 2007 at 09:35:40PM -0800, Andreas Gruenbacher wrote:
 &gt; On Wednesday 14 February 2007 20:13, Dave Jones wrote:
 &gt; &gt; I've not investigated it, but I hear rumours that suse has something
 &gt; &gt; similar.
 &gt; 
 &gt; Actually, no. We don't belive that module signing adds significant value,

ok, then I was misinformed.

 &gt; and it also doesn't work well with external modules.

well, the situation for external modules is no worse than usual.
They still work, they just aren't signed. Which from a distributor point
of view, is actually a nice thing, as they stick out like a sore thumb
in oops reports with (U) markers :)

 &gt; (The external modules we really care about are GPL ones; it gives us a way
 &gt; to update drivers without pushing out entirely new kernels.)

external modules still compile, and run just fine. The signed modules code
doesn't prevent loading of them unless the user decides to do so with
a special boot option (which is no different really than say, reducing
the cap-bound sysctl to prevent module loading).

		Dave

-- 
http://www.codemonkey.org.uk
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070215061453</emailId><senderName>Andreas Gruenbacher</senderName><senderEmail>agruen@suse.de</senderEmail><timestampReceived>2007-02-15 06:14:53-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

On Wednesday 14 February 2007 21:45, Dave Jones wrote:
&gt; well, the situation for external modules is no worse than usual.
&gt; They still work, they just aren't signed. Which from a distributor point
&gt; of view, is actually a nice thing, as they stick out like a sore thumb
&gt; in oops reports with (U) markers :)

I agree, that's really what should happen. We solve this by marking modules as 
supported, partner supported, or unsupported, but in an "insecure" way, so 
partners and users could try to fake the support status of a module and/or 
remove status flags from Oopses, and cryptography wouldn't save us. We could 
try to sign Oopses which I guess you guys are doing. This whole issue hasn't 
been a serious problem in the past though, and we generally try to trust 
users not to play games on us.

In the end, it all seems to boils down to a difference in philosophy.

Thanks,
Andreas
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070215062218</emailId><senderName>Dave Jones</senderName><senderEmail>davej@redhat.com</senderEmail><timestampReceived>2007-02-15 06:22:18-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

On Wed, Feb 14, 2007 at 10:14:53PM -0800, Andreas Gruenbacher wrote:
 &gt; On Wednesday 14 February 2007 21:45, Dave Jones wrote:
 &gt; &gt; well, the situation for external modules is no worse than usual.
 &gt; &gt; They still work, they just aren't signed. Which from a distributor point
 &gt; &gt; of view, is actually a nice thing, as they stick out like a sore thumb
 &gt; &gt; in oops reports with (U) markers :)
 &gt; 
 &gt; I agree, that's really what should happen. We solve this by marking modules as 
 &gt; supported, partner supported, or unsupported, but in an "insecure" way, so 
 &gt; partners and users could try to fake the support status of a module and/or 
 &gt; remove status flags from Oopses, and cryptography wouldn't save us. We could 
 &gt; try to sign Oopses which I guess you guys are doing. This whole issue hasn't 
 &gt; been a serious problem in the past though, and we generally try to trust 
 &gt; users not to play games on us.

For the most part it works out.  I've had users file oopses where they've editted
out Tainted: P, and left in nvidia(U) for example :-)

		Dave

-- 
http://www.codemonkey.org.uk
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070215143550</emailId><senderName>Roman Zippel</senderName><senderEmail>zippel@linux-m68k.org</senderEmail><timestampReceived>2007-02-15 14:35:50-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

Hi,

On Wed, 14 Feb 2007, David Howells wrote:

&gt; Now, this is not a complete solution by any means: the core kernel is not
&gt; protected, and nor are /dev/mem or /dev/kmem, but it denies (or at least
&gt; controls) one relatively simple attack vector.

This is really the weak point - it offers no advantage over an equivalent 
implementation in user space (e.g. in the module tools). So why has to be 
done in the kernel?

bye, Roman
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070215173250</emailId><senderName>David Howells</senderName><senderEmail>dhowells@redhat.com</senderEmail><timestampReceived>2007-02-15 17:32:50-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

Roman Zippel &lt;zippel@linux-m68k.org&gt; wrote:

&gt; &gt; Now, this is not a complete solution by any means: the core kernel is not
&gt; &gt; protected, and nor are /dev/mem or /dev/kmem, but it denies (or at least
&gt; &gt; controls) one relatively simple attack vector.
&gt; 
&gt; This is really the weak point - it offers no advantage over an equivalent 
&gt; implementation in user space (e.g. in the module tools). So why has to be 
&gt; done in the kernel?

Because the init_module() system call is the common point of module submission
to the kernel, not any particular userspace program.  There is no requirement
for userspace to load a module by invoking a module tools program or library,
and so userspace can bypass the checks entirely by just calling init_module().
Assume for a moment that you can't trust userspace...  (Obviously, if you can't
trust the kernel then you're already stuffed.)

It is possible to protect /dev/mem and /dev/kmem or make them unavailable and
it is possible to protect the kernel's memory whilst it is running (provided
you don't have nommu or broken hardware and you don't let userspace concoct any
DMA request it likes) which mostly closes those other vectors I mentioned.
This isn't something I intended to look at with this patch.  Those are separate
holes.

Making the core kernel load image inaccessible or immutable to root is not
something I can provide a generic solution for and security checking the core
kernel load image has to be done at an earlier layer as you can't rely on
something guaranteeing its own integrity because if someone can alter that
something, then they can bypass the self-checking too...

However, modules permits arbitrary modification of the running kernel to be
attempted.

David
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070215183352</emailId><senderName>Roman Zippel</senderName><senderEmail>zippel@linux-m68k.org</senderEmail><timestampReceived>2007-02-15 18:33:52-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

Hi,

On Thu, 15 Feb 2007, David Howells wrote:

&gt; &gt; This is really the weak point - it offers no advantage over an equivalent 
&gt; &gt; implementation in user space (e.g. in the module tools). So why has to be 
&gt; &gt; done in the kernel?
&gt; 
&gt; Because the init_module() system call is the common point of module submission
&gt; to the kernel, not any particular userspace program.  There is no requirement
&gt; for userspace to load a module by invoking a module tools program or library,
&gt; and so userspace can bypass the checks entirely by just calling init_module().
&gt; Assume for a moment that you can't trust userspace...  (Obviously, if you can't
&gt; trust the kernel then you're already stuffed.)

All the security stuff in the kernel should provide the necessary means to 
restrict this system call.

&gt; It is possible to protect /dev/mem and /dev/kmem or make them unavailable and
&gt; it is possible to protect the kernel's memory whilst it is running (provided
&gt; you don't have nommu or broken hardware and you don't let userspace concoct any
&gt; DMA request it likes) which mostly closes those other vectors I mentioned.
&gt; This isn't something I intended to look at with this patch.  Those are separate
&gt; holes.

Exactly and as long as there are these holes, these patches are only 
kernel bloat. The simple verification can also be done in userspace and 
module signing offers no real security.
What real value do these patches provide, that can't be reached via other 
means? Who else than distributions would be interested in this? Pretty 
much any use you initially mentioned can be done in simpler ways, e.g. 
anyone afraid of modules simply disables module loading completely.

bye, Roman
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070305150707</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-03-05 15:07:07-0400</timestampReceived><subject>Re: Announce loop-AES-v3.1f file/swap crypto package</subject><body>

Alon Bar-Lev wrote:
&gt; Best is to create a new folder, for example utils.
&gt; Move the loop-aes-keygen* into it.
&gt; And put attached files in there as well.
&gt; 
&gt; Just in case...
&gt; To produce the autoconf/automake stuff you should run:
&gt; autoreconf -i -v -f

Using autohell tools for installation of two text files is overkill.

Both of your files include text "Written by Jari Ruusu
&lt;jariruusu@users.sourceforge.net&gt;". Both you and I know that I didn't write
those files. Why are you publishing files with such misleading info?

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070124111413</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-01-24 11:14:13-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; My guess is that you created and encrypted your key file using some
&gt; character encoding in X windows terminal, and the system console character
&gt; encoding that is used to decrypt the key file at boot is different and
&gt; incompatible.

Creating a new gpg keyfile and keymap from the console doesn`t result in a working \
boot-CD either.

dumpkeys &gt;{X-window, console}.kmap for console and X-window:

blue:~ # md5sum *.kmap
0e7752d3ea6a81d04d9d40820c2464d7  X-window.kmap
4d7d18e67eb2997d14cdb11df55e1787  console.kmap

This states a lack in dumpkeys to deliver equal keymaps, right?

&gt; That "dumpkeys &gt;/iso/default.kmap" saves system console keyboard mappings.
&gt; What happens is you switch to system console using CONTROL-ALT-F1 and
&gt; create
&gt; new key file using that keyboard mapping? Type CONTROL-ALT-F7 to get back
&gt; to
&gt; X windows.

X window terminal:
blue:~ # read x ; echo -n ${x} | od -Ax -tx1 -
123
000000 31 32 33
000003

blue:~ # read x ; echo -n ${x} | od -Ax -tx1 -
µ¤ ²³X
000000 c2 b5 e2 82 ac 20 c2 b2 c2 b3 58
00000b

blue:~ # read x ; echo -n ${x} | od -Ax -tx1 -
µüöä@
000000 c2 b5 c3 bc c3 b6 c3 a4 40
000009
-------------------------------------------------

system console (ctrl+alt+F1):

blue:~ # read x ; echo -n ${x} | od -Ax -tx1 -
123
000000 31 32 33
000003

blue:~ # read x ; echo -n ${x} | od -Ax -tx1 -
µ¤ ²³X
000000 c2 b5 c2 a4 20 c2 b2 c2 b3 58
00000a

blue:~ # read x ; echo -n ${x} | od -Ax -tx1 -
µüöä@
000000 c2 b5 c3 bc c3 b6 c3 a4 40
000009

This output show differences between console and X-window keymapping but I fail to \
interpret it truely. So, what might be a solution? Build gpg keys and boot-CD under \
Knoppix? Use loadkeys &amp; default.kmap from SuSE 10.1? Can you give further \
instructions that may help to find a solution?

Regards,
Peter

-- 
"Feel free" - 5 GB Mailbox, 50 FreeSMS/Monat ...
Jetzt GMX ProMail testen: http://www.gmx.net/de/go/promail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070131114153</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-01-31 11:41:53-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

Hello!

It´s me once again with this openSuSE keymap problem. When I prepared CD-ROMs with \
loop-aes under openSuSE 10.2 I was no longer able to mount them under Knoppix. It \
seems likely that these images will not be mountable in future releases of SuSE, \
which worries me a lot.

The attachment provides 2 keymaps made from X-Window and the console.
dumpkeys &gt;x-window.kmap // in KDE
dumpkeys &gt;console.kmap // from the ctrl+alt+F1 console
They are different in size and contents. What can I do to prevent incompatibility \
with future/different versions of Linux? Am I the only one with this concern?

Regards,
Peter

-- 
"Feel free" - 5 GB Mailbox, 50 FreeSMS/Monat ...
Jetzt GMX ProMail testen: http://www.gmx.net/de/go/promail


["keymaps.tar.bz2" (application/octet-stream)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070131115358</emailId><senderName>Florian Reitmeir</senderName><senderEmail>florian@reitmeir.org</senderEmail><timestampReceived>2007-01-31 11:53:58-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

On Mit, 31 Jän 2007, Peter_22@gmx.de wrote:

&gt; Hello!
&gt; 
&gt; It?s me once again with this openSuSE keymap problem. When I prepared CD-ROMs with \
&gt; loop-aes under openSuSE 10.2 I was no longer able to mount them under Knoppix. It \
&gt; seems likely that these images will not be mountable in future releases of SuSE, \
&gt; which worries me a lot. 
&gt; The attachment provides 2 keymaps made from X-Window and the console.
&gt; dumpkeys &gt;x-window.kmap // in KDE
&gt; dumpkeys &gt;console.kmap // from the ctrl+alt+F1 console
&gt; They are different in size and contents. What can I do to prevent incompatibility \
&gt; with future/different versions of Linux? Am I the only one with this concern?

Just use dmcrypt and/or LUKS both are in the standard Kernel


-- 
Florian Reitmeir

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070131195823</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-01-31 19:58:23-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

Peter_22@gmx.de wrote:
&gt; It´s me once again with this openSuSE keymap problem. When I prepared
&gt; CD-ROMs with loop-aes under openSuSE 10.2 I was no longer able to mount
&gt; them under Knoppix.

Do you mean unable to knoppix mount loop-AES encrypted partitions using key
file created under openSuSE?

Boot CD-ROM mounts normally? Right?

&gt; It seems likely that these images will not be mountable in future releases
&gt; of SuSE, which worries me a lot.

All parties involved, openSuSE X/console, knoppix, and key map in /boot
partition or boot-to-encrypted-root CD-ROM, must agree on how passphrase
characters are encoded. Otherwise it is not going to work.

What happens if you apply included build-initrd.sh patch, set UTF8KEYBMODE=1
in config, and create new boot CD using that new build-initrd.sh script?

&gt; The attachment provides 2 keymaps made from X-Window and the console.
&gt; dumpkeys &gt;x-window.kmap // in KDE
&gt; dumpkeys &gt;console.kmap // from the ctrl+alt+F1 console
&gt; They are different in size and contents. What can I do to prevent
&gt; incompatibility with future/different versions of Linux? Am I the only one
&gt; with this concern?

I see exactly same dumpkeys output from both X and console, even though
console keyboard seems to be in ASCII mode and X keyboard in scancode mode.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD


--- ../loop-AES-v3.1e/build-initrd.sh	2006-09-23 16:42:59.000000000 +0300
+++ ./build-initrd.sh	2007-01-31 21:04:15.000000000 +0200
@@ -2,9 +2,9 @@
 #
 #  build-initrd.sh
 #
-#  Written by Jari Ruusu, September 23 2006
+#  Written by Jari Ruusu, January 31 2007
 #
-#  Copyright 2001-2006 by Jari Ruusu.
+#  Copyright 2001-2007 by Jari Ruusu.
 #  Redistribution of this file is permitted under the GNU Public License.
 #
 #  Changes by Hauke Johannknecht &lt;ash@ash.de&gt; 11/2001
@@ -156,6 +156,9 @@
 # Example: LOOPMODPARAMS="max_loop=8 lo_prealloc=125,5,200"
 LOOPMODPARAMS=""
 
+# 1 = set keyboard to UTF-8 mode, 0 = don't set
+UTF8KEYBMODE=0
+
 # 1 = load national keyboard layout, 0 = don't load
 # You _must_ manually copy correct keyboard layout to /boot/default.kmap
 # which must be in uncompressed form. (can not be .gz file)
@@ -427,9 +430,18 @@
         goto fail4;
     }
 
+#if ${UTF8KEYBMODE}
+    buf[0] = 0;
+    strCat(buf, "/lib/kbd_mode -u");
+    exeWait(buf);
+#endif
 #if ${LOADNATIONALKEYB}
     buf[0] = 0;
-    strCat(buf, "/lib/loadkeys /lib/default.kmap");
+    strCat(buf, "/lib/loadkeys");
+#if ${UTF8KEYBMODE}
+    strCat(buf, " -u");
+#endif
+    strCat(buf, " /lib/default.kmap");
     exeWait(buf);
 #endif
 
@@ -750,6 +762,9 @@
         z="${z} /sbin/insmod.old"
     fi
 fi
+if [ ${UTF8KEYBMODE} == 1 ] ; then
+    z="${z} "`which kbd_mode`
+fi
 if [ ${LOADNATIONALKEYB} == 1 ] ; then
     z="${z} "`which loadkeys`
 fi

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070201123045</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-02-01 12:30:45-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; Do you mean unable to knoppix mount loop-AES encrypted partitions using
&gt; key
&gt; file created under openSuSE?
Yes, exactly. The problem occurs when passphrase contains special characters.

&gt; Boot CD-ROM mounts normally? Right?
Using a boot CD-ROM works with no problems if the us-keymap is used. Chars like y, z \
should be left out. Special characters may not be found or assigned to a different \
key.

&gt; All parties involved, openSuSE X/console, knoppix, and key map in /boot
&gt; partition or boot-to-encrypted-root CD-ROM, must agree on how passphrase
&gt; characters are encoded. Otherwise it is not going to work.
Yes, I understand this and because of that I asked again. I fear the CDs prepared \
under openSuSE 10.2 will no longer be decryptable with other/upcoming versions of \
Linux distros. Such a disaster happend to me some years ago when PGPdisk changed \
something in its keymapping. Fortunately, the next version, 6 months later, solved \
the issue.

&gt; What happens if you apply included build-initrd.sh patch, set
&gt; UTF8KEYBMODE=1
&gt; in config, and create new boot CD using that new build-initrd.sh script?

I didn´t know this patch and will try it. I´m glad you answered to my questions at \
all. In case you know further measures please let me know.

&gt; I see exactly same dumpkeys output from both X and console, even though
&gt; console keyboard seems to be in ASCII mode and X keyboard in scancode
&gt; mode.

Ok, I just thought it might be a good idea to post the dumped keymaps. I scrolled \
through these files but it didn´t reveal a conclusion to my mind. So you would say \
both X-window/console keymaps are equal? I´m going to report what UTF8KEYBMODE=1 does \
to the build-initrd.sh. With your guidance I´ll certainly find a solution.

Kind regards,
Peter
-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail?ac=OM.GX.GX003K11713T4783a

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070217233929</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-02-17 23:39:29-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

Hi all!

A while ago I reported problems with openSuSE 10.2 (32-bit) in connection with german \
keymap for loop-aes. The solution is easy but not very satisfying. Knoppix is the \
answer. After booting from Knoppix 5.01 Live DVD dumpkeys &gt;default.kmap creates a \
usable keymap with all needed characters, including  µ, the euro sign â‚¬ or Ã¼,Ã¤, ² \
and the like. The gpg rootkey is created in Knoppix, too. These two files are then \
used in the /boot folder for loop-aes. Starting encrypted root from MicroSD Card via \
USB works! 

Below follows a list of necessary changes for the SuSE 10.2 standard kernel \
configuration (AMD 64-bit). Needed changes for Linux Kernel v2.6.18.2 Configuration \
(SuSE 10.2 64-bit):

CONFIG_BLK_DEV_LOOP=n
CONFIG_BLK_DEV_RAM_SIZE=4096
CONFIG_IDE=y
CONFIG_BLK_DEV_IDE=y
CONFIG_BLK_DEV_VIA82CXXX=y for VIA Chipset
CONFIG_SCSI=y
CONFIG_BLK_DEV_SD=y
CONFIG_ATA=y
CONFIG_SATA_AHCI=y
CONFIG_SATA_VIA=y root drive is S-ATA
CONFIG_PATA_VIA=y
CONFIG_USB=y
CONFIG_USB_EHCI_HCD=y
CONFIG_USB_UHCI_HCD=y
CONFIG_USB_STORAGE=y
CONFIG_EXT3_FS=y
CONFIG_MSDOS_FS=y
CONFIG_VFAT_FS=y
CONFIG_FAT_DEFAULT_CODEPAGE=850
CONFIG_FAT_DEFAULT_IOCHARSET=iso8859-15
CONFIG_NLS_CODEPAGE_850=y
CONFIG_NLS_ISO8859_15=y

If you cannot find a loop device after the standard SuSE installation, install \
"devs-10.2-19.x86_64.rpm" package to get /dev/loop{0-15}.

Those SuSE-guys are real jerks! They mess up with every release.

A minor issue derives from the fact that booting from USB equipment requires \
"usbcore" to be a part of the kernel. This results in anoying warnings like this: \
                blue:~ # modprobe at76-usb
WARNING: Error inserting usbcore \
(/lib/modules/2.6.18.2-34-default/kernel/drivers/usb/core/usbcore.ko): Invalid module \
format Up to now I ´m unsure how to get rid of this. It likely derives from an \
unresolved module dependency. "depmod -a" didn ´t fix it either. I ´d be glad if \
something of this might help other users of the crippled SuSE distros.

Kind regards,
Peter


-------- Original-Nachricht --------
Datum: Thu, 01 Feb 2007 13:30:45 +0100
Von: Peter_22@gmx.de
An: Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt;
CC: linux-crypto@nl.linux.org
Betreff: Re: SuSE 10.2 and LOADNATIONALKEYB=1

&gt; Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; &gt; Do you mean unable to knoppix mount loop-AES encrypted partitions using
&gt; &gt; key
&gt; &gt; file created under openSuSE?
&gt; Yes, exactly. The problem occurs when passphrase contains special
&gt; characters.
&gt; 
&gt; &gt; Boot CD-ROM mounts normally? Right?
&gt; Using a boot CD-ROM works with no problems if the us-keymap is used. Chars
&gt; like y, z should be left out. Special characters may not be found or
&gt; assigned to a different key.
&gt; 
&gt; &gt; All parties involved, openSuSE X/console, knoppix, and key map in /boot
&gt; &gt; partition or boot-to-encrypted-root CD-ROM, must agree on how passphrase
&gt; &gt; characters are encoded. Otherwise it is not going to work.
&gt; Yes, I understand this and because of that I asked again. I fear the CDs
&gt; prepared under openSuSE 10.2 will no longer be decryptable with
&gt; other/upcoming versions of Linux distros. Such a disaster happend to me some years \
&gt; ago when PGPdisk changed something in its keymapping. Fortunately, the next
&gt; version, 6 months later, solved the issue.
&gt; 
&gt; &gt; What happens if you apply included build-initrd.sh patch, set
&gt; &gt; UTF8KEYBMODE=1
&gt; &gt; in config, and create new boot CD using that new build-initrd.sh script?
&gt; 
&gt; I didn ´t know this patch and will try it. I ´m glad you answered to my
&gt; questions at all. In case you know further measures please let me know.
&gt; 
&gt; &gt; I see exactly same dumpkeys output from both X and console, even though
&gt; &gt; console keyboard seems to be in ASCII mode and X keyboard in scancode
&gt; &gt; mode.
&gt; 
&gt; Ok, I just thought it might be a good idea to post the dumped keymaps. I
&gt; scrolled through these files but it didn ´t reveal a conclusion to my mind.
&gt; So you would say both X-window/console keymaps are equal?
&gt; I ´m going to report what UTF8KEYBMODE=1 does to the build-initrd.sh. With
&gt; your guidance I ´ll certainly find a solution.
&gt; 
&gt; Kind regards,
&gt; Peter
&gt; -- 
&gt; "Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
&gt; Jetzt GMX TopMail testen:
&gt; http://www.gmx.net/de/go/topmail?ac=OM.GX.GX003K11713T4783a
&gt; 
&gt; -
&gt; Linux-crypto:  cryptography in and on the Linux system
&gt; Archive:       http://mail.nl.linux.org/linux-crypto/

-- 
"Feel free" - 5 GB Mailbox, 50 FreeSMS/Monat ...
Jetzt GMX ProMail testen: www.gmx.net/de/go/mailfooter/promail-out

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070217235742</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-02-17 23:57:42-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

* Peter_22@gmx.de wrote:

&gt; Those SuSE-guys are real jerks! They mess up with every release.

;-)

thanks for the info.


--=20
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070219180554</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-19 18:05:54-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

Peter_22@gmx.de wrote:
&gt; A while ago I reported problems with openSuSE 10.2 (32-bit) in connection
&gt; with german keymap for loop-aes. The solution is easy but not very
&gt; satisfying. Knoppix is the answer. After booting from Knoppix 5.01 Live
&gt; DVD dumpkeys &gt;default.kmap creates a usable keymap with all needed
&gt; characters, including  µ, the euro sign â,¬ or Ã¼,Ã¤, ² and the like. The
&gt; gpg rootkey is created in Knoppix, too. These two files are then used in
&gt; the /boot folder for loop-aes. Starting encrypted root from MicroSD Card
&gt; via USB works!

Was this success with UTF8KEYBMODE=1 in build-initrd.sh or not?

Can you now decrypt the rootkey.gpg key file in both openSuSE text console
and in X windows? Or is it decryptable in knoppix and encrypted-root-initrd
only?

I booted an old knoppix CD with "lang=fi" boot parameter. That seemed to
boot to keyboard mode "default (ASCII)". What does "kbd_mode" command output
on your openSuSE text console and knoppix text console? Are their keyboard
modes same?

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070220123633</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-02-20 12:36:33-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

&gt; Was this success with UTF8KEYBMODE=1 in build-initrd.sh or not?

Well, I changed from a Duron 1GHz with openSuSE 10.2 to my AMD64 with openSuSE 10.2 \
in the RETAIL version. Accordingly, I now start the PC from MicroSD via an \
USB-Cardreader instead of CD-ROM.  
&gt; Can you now decrypt the rootkey.gpg key file in both openSuSE text console
&gt; and in X windows? Or is it decryptable in knoppix and
&gt; encrypted-root-initrd
&gt; only?

Bad news! I checked it right now as you asked. The result is:
rootkey was made in Knoppix 5.01 DVD
default.kmap was taken from same Knoppix
build-initrd.sh was run in SuSE 10.2 on AMD64 _without_ UTF8KEYBMODE=1
losetup, loop.ko, gpg and such were taken from same SuSE
encryption/decryption in Knoppix works fine
booting from MicroSD works fine, too
issuing losetup -e aes256 -K /&lt;path&gt;/rootkey /dev/loopX /dev/sdaX in SuSE 10.2 \
FAILS!!!

Yes, SuSE messed it up once again. I tend to KUbuntu 7.04 but I am unsure if I really \
change since I use SuSE all the time.


&gt; I booted an old knoppix CD with "lang=fi" boot parameter. That seemed to
&gt; boot to keyboard mode "default (ASCII)". What does "kbd_mode" command
&gt; output
&gt; on your openSuSE text console and knoppix text console? Are their keyboard
&gt; modes same?

In XWindow "kbd_mode" says:
The keyboard is in raw (scancode) mode

Console (Alt+F1) says:
The keyboard is in Unicode (UTF-8) more

None decrypts the key! Might I load the default.kmap manually?

Best regards
Peter
-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: www.gmx.net/de/go/mailfooter/topmail-out

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070220153750</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-20 15:37:50-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

Peter_22@gmx.de wrote:
&gt; &gt; Can you now decrypt the rootkey.gpg key file in both openSuSE text
&gt; &gt; console and in X windows? Or is it decryptable in knoppix and
&gt; &gt; encrypted-root-initrd only?
&gt; 
&gt; Bad news! I checked it right now as you asked. The result is:
&gt; rootkey was made in Knoppix 5.01 DVD
&gt; default.kmap was taken from same Knoppix
&gt; build-initrd.sh was run in SuSE 10.2 on AMD64 _without_ UTF8KEYBMODE=1
&gt; losetup, loop.ko, gpg and such were taken from same SuSE
&gt; encryption/decryption in Knoppix works fine
&gt; booting from MicroSD works fine, too
&gt; issuing losetup -e aes256 -K /&lt;path&gt;/rootkey /dev/loopX /dev/sdaX in SuSE 10.2 FAILS!!!

So Knoppix and SUSE use different default character encodings. Old version
of Knoppix CD that I have seems to default to ASCII mode. Maybe newer
Knoppix versions do the same. SUSE seems to default to UTF-8 mode.

You can set your text console keyboard to ASCII mode using "kbd_mode -a"
command and to UTF-8 mode using "kbd_mode -u" command. Issuing either of
those commands before you run gpg, losetup or something that requires a
passphrase, should fix it. For text console, that is. For X windows, those
commands may screw your keyboard setting really badly (haven't tested).

You don't need to run losetup to test if you can decrypt a key file. Just
run "gpg --decrypt &lt;rootkey.gpg". If that works, then losetup works too.

&gt; Yes, SuSE messed it up once again.

Different defaults, not necessarily messed up.

&gt; Console (Alt+F1) says:
&gt; The keyboard is in Unicode (UTF-8) more

And in Knoppix it says "ASCII", which uses different encoding scheme for all
those öäåÖÄÅ or whatever characters.

&gt; None decrypts the key! Might I load the default.kmap manually?

In text console, run "kbd_mode -a", and try again.

Remember this from earlier in this thread?

$ read x ; echo -n ${x} | od -Ax -tx1 -
123
000000 31 32 33
000003
$ read x ; echo -n ${x} | od -Ax -tx1 -
öäåÖÄÅµß
000000 f6 e4 e5 d6 c4 c5 b5 df
000008

Those hex numbers represent characters that you type. Whatever encoding is
used to represent characters, same encoding must be used when you encrypt
something using gpg, and when you attempt to decrypt an encrypted file.
Those hex bytes are used to derive symmetric encryption key, or in case of
public key crypto, they are used to derive a key to decrypt your private
keyring data. If hex representation of characters in your passphrase are
different, then it is guaranteed to fail.

That UTF8KEYBMODE=1 in build-initrd.sh config puts keyboard to UTF-8 mode
before passphrase is typed to losetup program. So, previously an initrd
created by build-initrd.sh only worked in ASCII keyboard mode, but now
build-initrd.sh lets you configure it either way. UTF8KEYBMODE=0 means ASCII
keyboard mode. UTF8KEYBMODE=1 means UTF-8 keyboard mode.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070220162508</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-02-20 16:25:08-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

&gt; You can set your text console keyboard to ASCII mode using "kbd_mode -a"
&gt; command and to UTF-8 mode using "kbd_mode -u" command. Issuing either of
&gt; those commands before you run gpg, losetup or something that requires a
&gt; passphrase, should fix it. For text console, that is. For X windows, those
&gt; commands may screw your keyboard setting really badly (haven't tested).

kbd_mode -{u,a} in X-Window causes the bash-box to crash. New lines come up just as \
if you hold down the Enter button. This is no solution. In the Alt+F1 console \
kbd_mode returns UTF-8 and can be set to ASCII mode with no errors. However, neither \
mode can be used to decrypt the rootkey made up in Knoppix.  Even more astonishing:
Decrypting old keys made up in SuSE 10/10.1 work with no problems!  The only critical \
part is the boot process, before the SuSE system loads. So I can either use a key for \
SuSE or for booting.

&gt; Different defaults, not necessarily messed up.

No, I disagree. Each version was filled with flaws and they do it on full purpose. \
Why lacks the setup routine still for an offer to install SuSE on encrypted loops? \
They still ask for paritions. No solutions, just flaws each time. Knoppix 5.01 DVD \
has loop-aes built-in, so it´s obviously not a real difficulty.

&gt; And in Knoppix it says "ASCII", which uses different encoding scheme for
&gt; all
&gt; those öäåÖÄÅ or whatever characters.

Yes, I want those special characters.

&gt; In text console, run "kbd_mode -a", and try again.

I´ll answer this in the next mail. Hopefully my box will survive the test.
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal für Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070220164532</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-02-20 16:45:32-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

&gt; In text console, run "kbd_mode -a", and try again.
&gt; 
&gt; Remember this from earlier in this thread?

Of course!
&gt; 
&gt; $ read x ; echo -n ${x} | od -Ax -tx1 -
&gt; 123
&gt; 000000 31 32 33
&gt; 000003
&gt; $ read x ; echo -n ${x} | od -Ax -tx1 -
&gt; öäåÖÄÅµß
&gt; 000000 f6 e4 e5 d6 c4 c5 b5 df
&gt; 000008

For Alt+F1 console results are:
$ read x ; echo -n ${x} | od -Ax -tx1 -
123
000000  31 32 33
000003

abc
00000  61 62 63

µ¤ü (that is greek mue, the euro sign and the german ue)
000000  c2 b5 c2 a4 c3 bc
000006

All 3 runs are performed with kbd_mode -a and -u for ASCII and UTF-8 and result in \
the same output. So no difference between both encodings. How do they do that? \
Shouldn't it be different? At least for the special chars? I am puzzled. What is up \
next to do?

Regards,
Peter
-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: www.gmx.net/de/go/mailfooter/topmail-out

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070220165042</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-20 16:50:42-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

Peter_22@gmx.de wrote:
&gt; In the Alt+F1 console kbd_mode returns UTF-8 and can be set to ASCII mode
&gt; with no errors. However, neither mode can be used to decrypt the rootkey
&gt; made up in Knoppix.

&gt; All 3 runs are performed with kbd_mode -a and -u for ASCII and UTF-8 and
&gt; result in the same output. So no difference between both encodings. How do
&gt; they do that? Shouldn't it be different? At least for the special chars?

I forgot to mention that you have to load new keyboard layout before it
takes effect. As in:

    kbd_mode -a
    loadkeys /boot/default.kmap
or
    kbd_mode -u
    loadkeys /boot/default.kmap

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070220165419</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-02-20 16:54:19-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

And finally for X-Window:

$ kbd_mode
The keyboard is in raw (scancode) mode
$ read x ; echo -n ${x} | od -Ax -tx1 -
123
000000 31 32 33
000003
$ read x ; echo -n ${x} | od -Ax -tx1 -
abc
000000 61 62 63
000003
$ read x ; echo -n ${x} | od -Ax -tx1 -
µ¤ü
000000 c2 b5 e2 82 ac c3 bc
000007

Figures and chars return the same values as in the console while special chars return \
different values. Why this?

-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal für Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070220172759</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-02-20 17:27:59-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

&gt; I forgot to mention that you have to load new keyboard layout before it
&gt; takes effect. As in:
&gt; 
&gt; kbd_mode -a
&gt; loadkeys /boot/default.kmap
&gt; or
&gt; kbd_mode -u
&gt; loadkeys /boot/default.kmap
&gt; 
Ok. I repeated it from the console with default.kmap from MicroSD saved from Knoppix. \
It´s just the file that initrd loads when booting.

Results for ASCII and UTF-8 are the same as before for digits and chars.
Problems arise for mue, euro sign and german ue
ASCII fails to display the mue, euro is displays with a e and the ue isn´t displayed.
000000 b5 65 fc
000003

UTF-8 displays all 3 special characters and says:
000000 c2 b5 65 c3 bc
000005

Can you draw any conclusion form all that?
-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070220193035</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-20 19:30:35-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

Peter_22@gmx.de wrote:
&gt; Problems arise for mue, euro sign and german ue
&gt; ASCII fails to display the mue, euro is displays with a e and the ue isn´t
&gt; displayed.
&gt; 000000 b5 65 fc

b5 == "µ"  in ISO8859-15
65 == "e"  in ISO8859-15
fc == "ü"  in ISO8859-15

&gt; UTF-8 displays all 3 special characters and says:
&gt; 000000 c2 b5 65 c3 bc

c2 b5 == "µ"  in unicode
65    == "e"  in unicode
c3 bc == "ü"  in unicode

&gt; Can you draw any conclusion form all that?

Your keyboard layout /boot/default.kmap (from knoppix) is not euro
compatible. When you press euro key, you get normal e.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070220220839</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-02-20 22:08:39-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

&gt; b5 == "µ"  in ISO8859-15
&gt; 65 == "e"  in ISO8859-15
&gt; fc == "ü"  in ISO8859-15
&gt; 
&gt; &gt; UTF-8 displays all 3 special characters and says:
&gt; &gt; 000000 c2 b5 65 c3 bc
&gt; 
&gt; c2 b5 == "µ"  in unicode
&gt; 65    == "e"  in unicode
&gt; c3 bc == "ü"  in unicode
&gt; 
&gt; &gt; Can you draw any conclusion form all that?
&gt; 
&gt; Your keyboard layout /boot/default.kmap (from knoppix) is not euro
&gt; compatible. When you press euro key, you get normal e.

This is all correct but it does not explain why passphrase is accepted at boot time \
and not in SuSE itself in case I use key and kmap from Knoppix. In the last hour I \
made up a boot stick with default.kmap and rootkey from within SuSE. I also used \
UTF8KEYBMODE=1 in initrd-conf file. I tried kernel parameter lang=de, too. No chance. \
Special characters are not accepted. I hope those SuSE-botchers will fix it in the \
next release and cripple some other part of their distro instead. Thanks four your \
patience.

Best regards,
Peter
-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: www.gmx.net/de/go/mailfooter/topmail-out

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070221103626</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-21 10:36:26-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

Peter_22@gmx.de wrote:
&gt; &gt; Your keyboard layout /boot/default.kmap (from knoppix) is not euro
&gt; &gt; compatible. When you press euro key, you get normal e.
&gt; 
&gt; This is all correct but it does not explain why passphrase is accepted at
&gt; boot time and not in SuSE itself in case I use key and kmap from Knoppix.

To decrypt that key file that was created under Knoppix, you need to use
same character encoding as Knoppix, and same keyboard layout as Knoppix.
Complaining about being incompatible with something is meaningless unless
you also specify what you want to be compatible with. I know that old
version of Knoppix CD that I have defaults to ASCII keyboard mode, but I
still don't know what your version of Knoppix defaults to. Please tell me
what "kbd_mode" command in text console in your version of Knoppix says, and
what hex codes those problem characters output.

If you want to standardise on Knoppix defaults and want to operate with both
Knoppix and SUSE, then you have to convince SUSE installation to use Knoppix
keyboard layout and character encoding.

If you want to standardise on SUSE defaults and want to operate with both
Knoppix and SUSE, then you have to convince Knoppix live DVD to use SUSE
keyboard layout and character encoding.

Quote from your "Wed, 24 Jan 2007 12:14:13 +0100" posting:
&gt; X window terminal:
&gt; 000000 c2 b5 e2 82 ac 20 c2 b2 c2 b3 58
               ^^^^^^^^
&gt; system console (ctrl+alt+F1):
&gt; 000000 c2 b5 c2 a4 20 c2 b2 c2 b3 58
               ^^^^^
Above are supposed to be hex codes for same characters. Your SUSE X windows
and text console use different hex codes for euro symbol. The X windows hex
code (e2 82 ac) is true UTF-8 euro, but text console hex code (c2 a4) is
UTF-8 ¤.

My .fi text console keyboard layout outputs correct euro hex code (a4) for
ISO8859-15 encoding, but in UTF-8 mode it outputs wrong hex code (c2 a4),
same as yours.

&gt; In the last hour I made up a boot stick with default.kmap and rootkey from
&gt; within SuSE. I also used UTF8KEYBMODE=1 in initrd-conf file. I tried
&gt; kernel parameter lang=de, too. No chance. Special characters are not
&gt; accepted.

When does it fail? Does Knoppix mount fail, or does encrypted-root-initrd
mount fail?

Did you create that new default.kmap after fresh SUSE boot, or after you had
loaded that euro-incompatible-knoppix keyboard layout?

Did you encrypt your key file in X windows or text console? As is shown
above, X and text console output different hex codes for euro symbol when
keyboard is in UTF-8 mode. If you encrypted your key file in UTF-8 X windows
and attempted to decrypt it in UTF-8 encrypted-root-initrd boot text
console, then it is guaranteed to fail.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070221121711</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-02-21 12:17:11-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

&gt; Please tell me
&gt; what "kbd_mode" command in text console in your version of Knoppix says,
&gt; and
&gt; what hex codes those problem characters output.

Well, I am currently in KUbuntu 7.04 64-bit. It's a Live CD with Linux ubuntu \
2.6.20-8-generic kernel for x86_64. For X-Window:
ubuntu@ubuntu:~$ sudo kbd_mode
The keyboard is in raw (scancode) mode
ubuntu@ubuntu:~$ sudo read x ; echo -n ${x} | od -Ax -tx1 -
sudo: read: command not found
000000

For console:
ubuntu@ubuntu:~$ sudo kbd_mode
The keyboard is in Unicode (UTF-8) mode
ubuntu@ubuntu:~$ sudo read x ; echo -n ${x} | od -Ax -tx1 -
sudo: read: command not found
000000

&gt; If you want to standardise on Knoppix defaults and want to operate with
&gt; both
&gt; Knoppix and SUSE, then you have to convince SUSE installation to use
&gt; Knoppix
&gt; keyboard layout and character encoding.

My aim is working SuSE 10.2 box with acceptable encryption for disks and removable \
media.

&gt; Quote from your "Wed, 24 Jan 2007 12:14:13 +0100" posting:
&gt; &gt; X window terminal:
&gt; &gt; 000000 c2 b5 e2 82 ac 20 c2 b2 c2 b3 58
&gt; ^^^^^^^^
&gt; &gt; system console (ctrl+alt+F1):
&gt; &gt; 000000 c2 b5 c2 a4 20 c2 b2 c2 b3 58
&gt; ^^^^^
&gt; Above are supposed to be hex codes for same characters. Your SUSE X
&gt; windows
&gt; and text console use different hex codes for euro symbol. The X windows
&gt; hex
&gt; code (e2 82 ac) is true UTF-8 euro, but text console hex code (c2 a4) is
&gt; UTF-8 ¤.
&gt; 
&gt; My .fi text console keyboard layout outputs correct euro hex code (a4) for
&gt; ISO8859-15 encoding, but in UTF-8 mode it outputs wrong hex code (c2 a4),
&gt; same as yours.

There was some option in the kernel configuration concerning ISO8859-15, in the NLS \
section. I remember that I built it to the kernel, just like all the times before. \
May that cause my problems?

&gt; When does it fail? Does Knoppix mount fail, or does encrypted-root-initrd
&gt; mount fail?

Doing the encryption work on SuSE 10.2 just the same way as I did with 10.1 results \
in a rootkey that cannot be decrypted due to the said special character issue. My \
work-around was to use Knoppix Live DVD to make up a rootkey and dumpkeys \
&gt;default.kmap. I encrypted "/" from the Live DVD as well. This approach allows for \
&gt; full en-/decryption and maintenance with Knoppix and booting the SuSE installation \
&gt; from a USB Stick. Once the SuSE distro has booted the rootkey fails to decrypt.

&gt; Did you create that new default.kmap after fresh SUSE boot, or after you
&gt; had
&gt; loaded that euro-incompatible-knoppix keyboard layout?

My first attempt was to do it as allways: Install fresh SuSE 10.2 from retail DVD and \
do what the loop-aes readme says. Using Knoppix default.kmap became a work-around to \
fix this problem in a timely fashion. My fear is that using SuSE might lead to \
encrypted media, such as DVDs, CDs or external HDDs that might not be decryptable in \
future versions of SuSE. They may change some keymap again and I did not understand \
what they actually did.

&gt; Did you encrypt your key file in X windows or text console? As is shown
&gt; above, X and text console output different hex codes for euro symbol when
&gt; keyboard is in UTF-8 mode. If you encrypted your key file in UTF-8 X
&gt; windows
&gt; and attempted to decrypt it in UTF-8 encrypted-root-initrd boot text
&gt; console, then it is guaranteed to fail.

Yes, for sure I use the X-Window terminal to prepare loop-aes and all its sources, \
including gpg and rootkeyfile. This was never a problem. I will boot the Knoppix DVD \
right now and tell you what the kbd_mode output looks like there.

Best regards,
Peter
-- 
"Feel free" - 5 GB Mailbox, 50 FreeSMS/Monat ...
Jetzt GMX ProMail testen: www.gmx.net/de/go/mailfooter/promail-out

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070221143413</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-02-21 14:34:13-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

&gt; Did you encrypt your key file in X windows or text console? As is shown
&gt; above, X and text console output different hex codes for euro symbol when
&gt; keyboard is in UTF-8 mode. If you encrypted your key file in UTF-8 X
&gt; windows
&gt; and attempted to decrypt it in UTF-8 encrypted-root-initrd boot text
&gt; console, then it is guaranteed to fail.

Knoppix 5.01 Live DVD shows:
_Console_:
kbd_mode -&gt; ASCII
read x ; echo -n ${x} | od -Ax -tx1 -
123
000000 31 32 33
000003

read x ; echo -n ${x} | od -Ax -tx1 -
abc
000000 61 62 63
000003

read x ; echo -n ${x} | od -Ax -tx1 -
"mue" "euro" "ue"  -&gt; euro sign is displayed as "e"
000000 b5 65 fc
000003

changing to UTF-8 with kbd_mode -u provides the same results, only special characters \
differ: read x ; echo -n ${x} | od -Ax -tx1 -
"mue" "euro" "ue"  -&gt; none is displayed correctly
000000 c2 b5 65 c3 bc
000005

_X-Window_:
kbd_mode -&gt; Scanmode (RAW)
read x ; echo -n ${x} | od -Ax -tx1 - yields the same as for the console, only \
special chars differ. read x ; echo -n ${x} | od -Ax -tx1 -
"mue" "euro" "ue"  -&gt; all are displayed correctly
000000 b5 a4 fc
000003

Dumpkeys &gt;/boot/usb/default.kmap and rootkey were made from Knoppix X-Window \
terminal. Terminal displays all special characters. Encryption was done from Knoppix \
console. Is there more I can do?

Regard,
Peter
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal für Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070221155354</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-21 15:53:54-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

Peter_22@gmx.de wrote:
&gt; ubuntu@ubuntu:~$ sudo read x ; echo -n ${x} | od -Ax -tx1 -
&gt; sudo: read: command not found
&gt; 000000

Reading a line from stdin does not need elevated powers. Drop the sudo.

&gt; Knoppix 5.01 Live DVD shows:
&gt; _Console_:
&gt; kbd_mode -&gt; ASCII
&gt; read x ; echo -n ${x} | od -Ax -tx1 -
&gt; "mue" "euro" "ue"  -&gt; euro sign is displayed as "e"
&gt; 000000 b5 65 fc

ISO8859-1 or ISO8859-15 encoding. Euro mutated to "e".

&gt; changing to UTF-8
&gt; read x ; echo -n ${x} | od -Ax -tx1 -
&gt; "mue" "euro" "ue"  -&gt; none is displayed correctly
&gt; 000000 c2 b5 65 c3 bc

UTF-8 (unicode) encoding. Euro mutated to "e".

&gt; _X-Window_:
&gt; kbd_mode -&gt; Scanmode (RAW)
&gt; read x ; echo -n ${x} | od -Ax -tx1 -
&gt; "mue" "euro" "ue"  -&gt; all are displayed correctly
&gt; 000000 b5 a4 fc

ISO8859-15 encoding. Correct euro hex code (a4).

&gt; Dumpkeys &gt;/boot/usb/default.kmap and rootkey were made from Knoppix
&gt; X-Window terminal. Terminal displays all special characters.

dumpkeys saves text console mappings. It should not matter whether you run
it from console or X windows.

&gt; Encryption was done from Knoppix console.

So you ended up using mutated "e" for euro symbol.

&gt; Is there more I can do?

Yes. Avoid using euro symbol in passphrases.

Summary:
1) Knoppix text console in ASCII mode mutates euro symbol to "e".
2) Knoppix text console in UTF-8 mode mutates euro symbol to "e".
3) Knoppix X windows uses true ISO8859-15 encoding for euro symbol.
4) SUSE text console in UTF-8 mode mutates euro symbol to unicode "¤".
5) SUSE X windows uses true UTF-8 unicode encoding for euro symbol.

You should be able to decrypt your key file on any working setup that is
using ISO8859-1 or ISO8859-15 encoding, but instead of typing euro symbols
to your passphrase, you need to type e in place of euro.

For SUSE text console, you should be able to decrypt your key file using
these commands:

    kbd_mode -a
    loadkeys /boot/usb/default.kmap
    gpg --decrypt &lt;/boot/usb/rootkey.gpg

Where /boot/usb/default.kmap is that strange keyboard layout from Knoppix.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070221172259</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-02-21 17:22:59-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

Well, it seems I have to kneel down to your talent.

&gt; For SUSE text console, you should be able to decrypt your key file using
&gt; these commands:
&gt; 
&gt; kbd_mode -a
&gt; loadkeys /boot/usb/default.kmap
&gt; gpg --decrypt &lt;/boot/usb/rootkey.gpg
&gt; 
&gt; Where /boot/usb/default.kmap is that strange keyboard layout from Knoppix.

Right this does it! So after all you do not only need the right keyfile but also the \
right keymap. Could the built-initrd.sh take care of this? I mean check the current \
language and encodings. Or at least some test? When setting up new keys, do I have to \
do this from the console or can I do it from X-Windows terminal, too? kbd_mode -a \
fails for X-Windows. And how about Kernel configuration CONFIG_NLS_DEFAULT, \
CONFIG_NLS_CODEPAGE_850 and CONFIG_NLS_ISO8859_15? I chose them to be built into the \
kernel image to support codepages and languages. Is that a solution or part of my \
problems?

&gt; &gt; Is there more I can do?
&gt; 
&gt; Yes. Avoid using euro symbol in passphrases.

So you would advise me to avoid euro signs? How about others like the greek mue or \
german ue? How about spaces in passphrases? I ever tried to choose strong \
combinations but now I get unsettled by all this.  
&gt; Summary:
&gt; 1) Knoppix text console in ASCII mode mutates euro symbol to "e".
&gt; 2) Knoppix text console in UTF-8 mode mutates euro symbol to "e".
&gt; 3) Knoppix X windows uses true ISO8859-15 encoding for euro symbol.
&gt; 4) SUSE text console in UTF-8 mode mutates euro symbol to unicode "¤".
&gt; 5) SUSE X windows uses true UTF-8 unicode encoding for euro symbol.
&gt; 
&gt; You should be able to decrypt your key file on any working setup that is
&gt; using ISO8859-1 or ISO8859-15 encoding, but instead of typing euro symbols
&gt; to your passphrase, you need to type e in place of euro.

How do I shift between ISO8859-15 and ISO8859-1? How can I find out which kbd_mode is \
used at the time initrd script asks for the passphrase at boot time?

Regards,
Peter
-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070223182616</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-23 18:26:16-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

Peter_22@gmx.de wrote:
&gt; &gt;     kbd_mode -a
&gt; &gt;     loadkeys /boot/usb/default.kmap
&gt; &gt;     gpg --decrypt &lt;/boot/usb/rootkey.gpg
&gt; 
&gt; Right this does it! So after all you do not only need the right keyfile
&gt; but also the right keymap. Could the built-initrd.sh take care of this?
&gt; I mean check the current language and encodings. Or at least some test?

How is the script going to know what live-CD you are going to boot next, and
what character encoding defaults that live-CD uses?

&gt; So you would advise me to avoid euro signs? How about others like the
&gt; greek mue or german ue? How about spaces in passphrases? I ever tried to
&gt; choose strong combinations but now I get unsettled by all this.

µ and ü seemed to have correct encoding in both text console and X windows.
But not all distros use same encoding, Knoppix default: ISO8859-15, SUSE
default: UTF-8.

&gt; How do I shift between ISO8859-15 and ISO8859-1?

You select some keyboard layout file at distro install time.

&gt; How can I find out which kbd_mode is used at the time initrd script asks
&gt; for the passphrase at boot time?

My current understanding is that keyboard mode is always ASCII at kernel
boot. Distro init scripts then change the default to something else.

&gt; This "lang=en_US" means that I start with us keymap and change this at the
&gt; point when the german default.kmap is loaded, right? How about kbd_mode?

UTF8KEYBMODE=1 in build-initrd.sh config sets keyboard to UTF-8 mode before
passphrase is asked.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070215181610</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-15 18:16:10-0400</timestampReceived><subject>Re: Loop-AES: Question for Password when none is needed</subject><body>

Matthias Schniedermeyer wrote:
&gt; autofs(v4) that is included in Linux since i don't know how long.

Here are my kernel config entries:

# CONFIG_AUTOFS_FS is not set
# CONFIG_AUTOFS4_FS is not set

I'm not using autofs

&gt; I could also skip autofs completely and just use udev to start a mount
&gt; after the HDD is connected. But i like the "auto umount"-Part of autofs,
&gt; so that i can just disconnect the HDD, if enough time had passed since
&gt; usage.

BSD amd does auto unmount. For removable devices I use 10 second unmount
delay. Zero problems with BSD amd so far. I have used it for many years to
mount removable unencrypted devices like floppies, CD-ROMs, and USB-sticks.
Little window shows me what automounted devices are currently mounted. I
take a look at that window before I yank a removable automounted device.

&gt; Do you get the password-question on the commandline with an unencrypted
&gt; key-file (with Linux)?

Nope. I tested it using encrypted key files that were stored at beginning of
each floppy. Passphrase to decrypt each per floppy key file was read from
encrypted file system using "mount ... -p3 3&lt;clearpassword" inside a script
that amd runs when it wants a file system mounted.

&gt; If not, then the loop-aes-utils package from Debian-SID contains the bug.

Nope. mount -p3 makes password-question go away.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070215184409</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-02-15 18:44:09-0400</timestampReceived><subject>Re: Loop-AES: Question for Password when none is needed</subject><body>

Jari Ruusu wrote:
&gt; Matthias Schniedermeyer wrote:
&gt;&gt; Do you get the password-question on the commandline with an unencrypted
&gt;&gt; key-file (with Linux)?
&gt; 
&gt; Nope. I tested it using encrypted key files that were stored at beginning of
&gt; each floppy. Passphrase to decrypt each per floppy key file was read from
&gt; encrypted file system using "mount ... -p3 3&lt;clearpassword" inside a script
&gt; that amd runs when it wants a file system mounted.
&gt; 
&gt;&gt; If not, then the loop-aes-utils package from Debian-SID contains the bug.
&gt; 
&gt; Nope. mount -p3 makes password-question go away.

If you had read the first mail you should know that i know how to short
circuit the question at the commandline.

But that doesn't mean that that isn't a WORKAROUND for something that
should happen in the first place.




Bis denn

-- 
Real Programmers consider "what you see is what you get" to be just as
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated,
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070215193136</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-02-15 19:31:36-0400</timestampReceived><subject>Re: Loop-AES: Question for Password when none is needed</subject><body>

* Matthias Schniedermeyer &lt;ms@citd.de&gt; wrote:

&gt; But that doesn't mean that that isn't a WORKAROUND for something
&gt; that should happen in the first place.

...

Maybe you are just asking for one more -o keyword without realising
it.

'key=&lt;file&gt;' which expects a plain keyfile, just like 'gpgkey=&lt;file&gt;'
expects a .gpg

Would be my choice instead of messing around with .gpg handling. It
just doesn't make any sense at all to have a passwordless .gpg ---
Thinking along these lines... Imagine some plain text embedded into a
word document and trying to tune a converter to get your hands on the
text instead of using a plain textfile in the first place.

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070215220650</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-02-15 22:06:50-0400</timestampReceived><subject>Re: Loop-AES: Question for Password when none is needed</subject><body>

markus reichelt wrote:
&gt; * Matthias Schniedermeyer &lt;ms@citd.de&gt; wrote:
&gt; 
&gt;&gt; But that doesn't mean that that isn't a WORKAROUND for something
&gt;&gt; that should happen in the first place.
&gt; 
&gt; ...
&gt; 
&gt; Maybe you are just asking for one more -o keyword without realising
&gt; it.
&gt; 
&gt; 'key=&lt;file&gt;' which expects a plain keyfile, just like 'gpgkey=&lt;file&gt;'
&gt; expects a .gpg
&gt; 
&gt; Would be my choice instead of messing around with .gpg handling. It
&gt; just doesn't make any sense at all to have a passwordless .gpg ---
&gt; Thinking along these lines... Imagine some plain text embedded into a
&gt; word document and trying to tune a converter to get your hands on the
&gt; text instead of using a plain textfile in the first place.

That would also be a solution for my problem.




Bis denn

-- 
Real Programmers consider "what you see is what you get" to be just as
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated,
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070215231057</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-02-15 23:10:57-0400</timestampReceived><subject>Re: Loop-AES: Question for Password when none is needed</subject><body>

markus reichelt wrote:
&gt; * Matthias Schniedermeyer &lt;ms@citd.de&gt; wrote:
&gt; 
&gt;&gt; But that doesn't mean that that isn't a WORKAROUND for something
&gt;&gt; that should happen in the first place.
&gt; 
&gt; ...
&gt; 
&gt; Maybe you are just asking for one more -o keyword without realising
&gt; it.
&gt; 
&gt; 'key=&lt;file&gt;' which expects a plain keyfile, just like 'gpgkey=&lt;file&gt;'
&gt; expects a .gpg
&gt; 
&gt; Would be my choice instead of messing around with .gpg handling. It
&gt; just doesn't make any sense at all to have a passwordless .gpg ---
&gt; Thinking along these lines... Imagine some plain text embedded into a
&gt; word document and trying to tune a converter to get your hands on the
&gt; text instead of using a plain textfile in the first place.

Or another alternative: a option "keycommand=&lt;..&gt;" to execute print the
key to its stdout.

But the tricky think here would be how to pass the necessary information
to the keycommand so that it can decide on which key to pass on.




Bis denn

-- 
Real Programmers consider "what you see is what you get" to be just as
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated,
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070216080753</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-16 08:07:53-0400</timestampReceived><subject>Re: Loop-AES: Question for Password when none is needed</subject><body>

Matthias Schniedermeyer wrote:
&gt; Or another alternative: a option "keycommand=&lt;..&gt;" to execute print the
&gt; key to its stdout.
&gt; 
&gt; But the tricky think here would be how to pass the necessary information
&gt; to the keycommand so that it can decide on which key to pass on.

Both losetup and mount can read full 65 line unencrypted key data using -p
command line parameter. That feature can not be enabled using mount option,
and when you think about it, it makes more sense that way.

This problem can be summarized as: You don't want to configure your
automounter to pass -p command line parameter to mount. The fix is:
Reconfigure your automounter. Problem solved.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070216092145</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-02-16 09:21:45-0400</timestampReceived><subject>Re: Loop-AES: Question for Password when none is needed</subject><body>

Jari Ruusu wrote:
&gt; Matthias Schniedermeyer wrote:
&gt; &gt; Or another alternative: a option "keycommand=&lt;..&gt;" to execute print the
&gt; &gt; key to its stdout.
&gt; &gt; 
&gt; &gt; But the tricky think here would be how to pass the necessary information
&gt; &gt; to the keycommand so that it can decide on which key to pass on.
&gt; 
&gt; Both losetup and mount can read full 65 line unencrypted key data using -p
&gt; command line parameter. That feature can not be enabled using mount option,
&gt; and when you think about it, it makes more sense that way.

Ask 10 people and you get at least 11 options about makes sense and what not, \
regardless of topic.

Having script calling mount doesn't make more sense than mount calling script

X -&gt; Y vs. Y -&gt; X

As i said, the only 'tricky' part in the later case is passing over the parameters so \
the script can decide what to do. In the script calls mount-case the parameter \
passing is mostly solved in some other way, but still the script has to have some way \
to 'know' what it must do.

To make things short. I don't share the opinion that is makes 'more sense'.

&gt; This problem can be summarized as: You don't want to configure your
&gt; automounter to pass -p command line parameter to mount. The fix is:
&gt; Reconfigure your automounter. Problem solved.

No. In the used configuration the automounter just only supports passing \
"-o"-options. AND in a configuration where the automounter would support it, i would \
lose the 'ghosting' feature where all possible mount-point are shown, regardless if \
they currently are mounted or not. I'm a commandline-person and i would loose \
TAB-completition, which i dislike like hell. So it's choosing the lesser evil, which \
currently having to live with stupid lines in Syslog.

And i don't see why that should be changed to WORKAROUND a dumb: 'always ask for \
password, regardless if it is needed or not'.




-- 
Real Programmers consider "what you see is what you get" to be just as
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated,
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070217094430</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-17 09:44:30-0400</timestampReceived><subject>Re: Loop-AES: Question for Password when none is needed</subject><body>

Matthias Schniedermeyer wrote:
&gt; &gt; This problem can be summarized as: You don't want to configure your
&gt; &gt; automounter to pass -p command line parameter to mount. The fix is:
&gt; &gt; Reconfigure your automounter. Problem solved.
&gt; 
&gt; No. In the used configuration the automounter just only supports passing
&gt; "-o"-options. AND in a configuration where the automounter would support
&gt; it, i would lose the 'ghosting' feature where all possible mount-point are
&gt; shown, regardless if they currently are mounted or not. I'm a
&gt; commandline-person and i would loose TAB-completition, which i dislike
&gt; like hell.

Ok, ok.

It wasn't a big change. 22 code lines changed, not counting documentation
changes. It was a matter of adding a mount option and open/close a file,
otherwise it uses existing code paths. Now mount has a new mount option
'cleartextkey' which specifies a file that holds 65 lines of key data, i.e.
unencrypted contents of gpg encrypted key file. Some examples follows.


First 8192 bytes of each floppy contains gpg encrypted key file. Passphrase
to decrypt each key file is read from /tmp/clearpassphrase file which must
reside on encrypted file system or be otherwise made unavailable to
adversary. Passphrase to decrypt each key file must be same for all
floppies. Encrypted file system starts at 8192 byte offset:

 mount -t ext2 /dev/fd0 /floppy -o encryption=AES128,loop=/dev/loop0,\
        gpgkey=/dev/fd0,offset=8192,cleartextkey=/tmp/clearpassphrase


/etc/fskey-fd0.gpg file is gpg encrypted key file which is shared for all
floppies (not good security). Passphrase to decrypt that key file is read
from /tmp/clearpassphrase file which must reside on encrypted file system or
be otherwise made unavailable to adversary. Passphrase to decrypt that one
key file is same for all floppies:

 mount -t ext2 /dev/fd0 /floppy -o encryption=AES128,loop=/dev/loop0,\
        gpgkey=/etc/fskey-fd0.gpg,cleartextkey=/tmp/clearpassphrase


Unencrypted 65 lines of key data is read from /tmp/clear65lines file which
must reside on encrypted file system or be otherwise made unavailable to
adversary. No gpg involved here. Same loop encryption keys used for each
floppy (not good security).

 mount -t ext2 /dev/fd0 /floppy -o encryption=AES128,loop=/dev/loop0,\
        cleartextkey=/tmp/clear65lines


A patch that can be applied on top of loop-AES patch for util-linux-2.12r
and util-linux-2.13-pre7 is attached. Works ok on my test box. Please let me
know if this solves or doesn't solve your problem.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD
["util-linux-cleartextkey.diff.bz2" (application/octet-stream)]
["util-linux-cleartextkey.diff.bz2.sign" (text/plain)]

-----BEGIN PGP SIGNATURE-----

iQCVAwUARda85zMKg0M6Ig9RAQI4owP8D0nqL4R9wKg3XD+fjilOyieCiOJd/48x
YfkRZ/uomjWVivT0gRZ5ERjXM9z/pfKkZ3tNFJPSktCtJLcheK1YELAz4SnJwu1P
0ZY/GHTiiInBoWbbSkDFGyA9RHzGl7WbxoboTEhLPPNunMcWUjl+K5q3XQz8rODf
FZxXTILKPBU=
=wOcr
-----END PGP SIGNATURE-----

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070215200122</emailId><senderName>David Lang</senderName><senderEmail>david.lang@digitalinsight.com</senderEmail><timestampReceived>2007-02-15 20:01:22-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

On Thu, 15 Feb 2007, Roman Zippel wrote:

&gt; On Thu, 15 Feb 2007, David Howells wrote:
&gt;
&gt;&gt; It is possible to protect /dev/mem and /dev/kmem or make them unavailable and
&gt;&gt; it is possible to protect the kernel's memory whilst it is running (provided
&gt;&gt; you don't have nommu or broken hardware and you don't let userspace concoct any
&gt;&gt; DMA request it likes) which mostly closes those other vectors I mentioned.
&gt;&gt; This isn't something I intended to look at with this patch.  Those are separate
&gt;&gt; holes.
&gt;
&gt; Exactly and as long as there are these holes, these patches are only
&gt; kernel bloat. The simple verification can also be done in userspace and
&gt; module signing offers no real security.
&gt; What real value do these patches provide, that can't be reached via other
&gt; means? Who else than distributions would be interested in this? Pretty
&gt; much any use you initially mentioned can be done in simpler ways, e.g.
&gt; anyone afraid of modules simply disables module loading completely.

this issue, and these holes keep comeing up in discussions, why can't these 
holes be closed? I seem to remember seeing patches that would remove /dev/kmem 
being sent to the list, but they weren't accepted into the kernel (and I seem to 
remember people being against the concept of removeing them, not against 
techincal details of the patches. but this was many years ago)

at one point I remember hearing that X required raw /dev/kmem, but for servers 
you don't need/want X anyway, so this is a useful option even if X doesn't get 
fixed.

David Lang
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070215203428</emailId><senderName></senderName><senderEmail>valdis.kletnieks</senderEmail><timestampReceived>2007-02-15 20:34:28-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

On Wed, 14 Feb 2007 22:14:53 PST, Andreas Gruenbacher said:
&gt; I agree, that's really what should happen. We solve this by marking modules as
&gt; supported, partner supported, or unsupported, but in an "insecure" way, so
&gt; partners and users could try to fake the support status of a module and/or
&gt; remove status flags from Oopses, and cryptography wouldn't save us.

Where cryptography *can* save you is that a partner or user can't fake a
'Suse Supported' signature without access to the Suse private key.

[Attachment #3 (application/pgp-signature)]
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html

</body></email><email><emailId>20070215205541</emailId><senderName></senderName><senderEmail>valdis.kletnieks</senderEmail><timestampReceived>2007-02-15 20:55:41-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

On Wed, 14 Feb 2007 23:13:45 EST, Dave Jones said:
&gt; One argument in its favour is aparently Red Hat isn't the only vendor
&gt; with something like this.  I've not investigated it, but I hear rumours
&gt; that suse has something similar.  Having everyone using the same code
&gt; would be a win for obvious reasons.

Another argument in its favor is that it actually allows the kernel to
implement *real* checking of module licenses and trumps all the proposals
to deal with MODULE_LICENSE("GPL\0Haha!").  A vendor (or user) that wants
to be *sure* that only *really really* GPL modules are loaded can simply
refuse to load unsigned modules - and then refuse to sign a module until
after they had themselves visited the source's website, verified that the
source code was available under GPL, and so on.

Remember - the GPL is about the availability of the source.  And at modprobe
time, the source isn't available.  So you're left with two options:

1) Trust the binary to not lie to you about its license.
2) Ask a trusted 3rd party (usually, the person/distro that built the kernel)
whether they've verified the claim that it's really GPL.


[Attachment #3 (application/pgp-signature)]
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html

</body></email><email><emailId>20070215210140</emailId><senderName>Roman Zippel</senderName><senderEmail>zippel@linux-m68k.org</senderEmail><timestampReceived>2007-02-15 21:01:40-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

Hi,

On Thu, 15 Feb 2007, David Lang wrote:

&gt; this issue, and these holes keep comeing up in discussions, why can't these
&gt; holes be closed? I seem to remember seeing patches that would remove /dev/kmem
&gt; being sent to the list, but they weren't accepted into the kernel (and I seem
&gt; to remember people being against the concept of removeing them, not against
&gt; techincal details of the patches. but this was many years ago)

1. It depends on the ratio of added code and its usefulness. I must assume 
the first patch didn't even make it to the kernel due to its size, so I 
think it's not unreasonable to explore the alternatives.
2. There are many ways to load an unauthorized module, thus you have to 
prevent any modification of the kernel not just in memory but also on 
disk.

bye, Roman
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070215210306</emailId><senderName>Adrian Bunk</senderName><senderEmail>bunk@stusta.de</senderEmail><timestampReceived>2007-02-15 21:03:06-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

On Wed, Feb 14, 2007 at 07:09:38PM +0000, David Howells wrote:
&gt;...
&gt; There are several reasons why these patches are useful, amongst which are:
&gt;...
&gt;  (4) to allow other support providers to do likewise, or at least to _detect_
&gt;      the fact that unsupported modules are loaded;
&gt; 
&gt;  (5) to allow the detection of modules replaced by a second-order distro or a
&gt;      preloaded Linux purveyor.
&gt;...

Who might have rebuilt the whole kernel using a new signature.

Or a bug reporter might have edited out the parts containing the 
information that unsupported code was loaded.

Or the unsupported module itself might have removed all traces of having 
been loaded from the kernel.

For printing nvidia(U), you could simply add some marker similar to 
MODULE_LICENSE() that gets added to supported modules during "official" 
builds and gets checked when loading a module.

That's 10k LOC less and the same level of security...

&gt; David

cu
Adrian

-- 

       "Is there not promise of rain?" Ling Tan asked suddenly out
        of the darkness. There had been need of rain for many days.
       "Only a promise," Lao Er said.
                                       Pearl S. Buck - Dragon Seed

-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070215213152</emailId><senderName>"Indan Zupancic"</senderName><senderEmail>indan@nul.nu</senderEmail><timestampReceived>2007-02-15 21:31:52-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

Hello,

On Wed, February 14, 2007 20:40, David Howells wrote:
&gt; Linus Torvalds &lt;torvalds@linux-foundation.org&gt; wrote:
&gt;
&gt;&gt; &gt;  (1) A cut-down MPI library derived from GPG with error handling added.
&gt;&gt;
&gt;&gt; Do we really need to add this?
&gt;
&gt; I presume you mean the MPI library specifically?  If so, then yes.  It's
&gt; necessary to do DSA signature verification (or RSA for that matter).
&gt;
&gt;&gt; Wouldn't it be much nicer to just teach people to use one of the existing
&gt;&gt; signature things that we need for _other_ cases anyway, and already have
&gt;&gt; merged?
&gt;
&gt; Existing signature things?  I know not of such beasts, nor can I see them
&gt; offhand.

The question is if using DSA/RSA is the right choice for something like this.
I think that the symmetrically encrypted hash output as signature would provide
the same amount of security. The only additional requirement is that the key
can't be read by userspace. But if they can reach the kernel binary, they can
modify it too. Same for the bootloader, where you'd want the key and initial
checking anyway. Else this whole thing could be done in user space as Roman
Zippel said...

The ELF section stuff seems like unnecessary bloat too. Can't you use/extend
modinfo, or kernel symbols?

With the above changes the code should shrink to only a few hundred new lines
of code, instead of thousands, and signature checking will be much faster too.

Greetings,

Indan


-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070215213240</emailId><senderName>Adrian Bunk</senderName><senderEmail>bunk@stusta.de</senderEmail><timestampReceived>2007-02-15 21:32:40-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

On Thu, Feb 15, 2007 at 03:55:41PM -0500, Valdis.Kletnieks@vt.edu wrote:
&gt; On Wed, 14 Feb 2007 23:13:45 EST, Dave Jones said:
&gt; &gt; One argument in its favour is aparently Red Hat isn't the only vendor
&gt; &gt; with something like this.  I've not investigated it, but I hear rumours
&gt; &gt; that suse has something similar.  Having everyone using the same code
&gt; &gt; would be a win for obvious reasons.
&gt; 
&gt; Another argument in its favor is that it actually allows the kernel to
&gt; implement *real* checking of module licenses and trumps all the proposals
&gt; to deal with MODULE_LICENSE("GPL\0Haha!").  A vendor (or user) that wants
&gt; to be *sure* that only *really really* GPL modules are loaded can simply
&gt; refuse to load unsigned modules - and then refuse to sign a module until
&gt; after they had themselves visited the source's website, verified that the
&gt; source code was available under GPL, and so on.
&gt; 
&gt; Remember - the GPL is about the availability of the source.  And at modprobe
&gt; time, the source isn't available.  So you're left with two options:
&gt; 
&gt; 1) Trust the binary to not lie to you about its license.
&gt; 2) Ask a trusted 3rd party (usually, the person/distro that built the kernel)
&gt; whether they've verified the claim that it's really GPL.

There are different opinions whether the "complete source code" of the 
GPLv2 includes in such cases public keys, making it questionable whether 
your example will survive at court in all jurisdictions.

E.g. remember that gpl-violations.org has already successfully enforced 
the publication of public keys for "firmware only loads signed kernels" 
cases by threatening companies to otherwise take legal actions in 
Germany.

cu
Adrian

-- 

       "Is there not promise of rain?" Ling Tan asked suddenly out
        of the darkness. There had been need of rain for many days.
       "Only a promise," Lao Er said.
                                       Pearl S. Buck - Dragon Seed

-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070215221030</emailId><senderName>Pavel Machek</senderName><senderEmail>pavel@ucw.cz</senderEmail><timestampReceived>2007-02-15 22:10:30-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

Hi!

&gt; &gt; well, the situation for external modules is no worse than usual.
&gt; &gt; They still work, they just aren't signed. Which from a distributor point
&gt; &gt; of view, is actually a nice thing, as they stick out like a sore thumb
&gt; &gt; in oops reports with (U) markers :)
&gt; 
&gt; I agree, that's really what should happen. We solve this by marking modules as 
&gt; supported, partner supported, or unsupported, but in an "insecure" way, so 
&gt; partners and users could try to fake the support status of a module and/or 
&gt; remove status flags from Oopses, and cryptography wouldn't save us. We could 
&gt; try to sign Oopses which I guess you guys are doing. This whole issue hasn't 

I do not think any ammount of crypto can determine that I loaded
unsupported module, then edited oops. (TPM hw module may be able to do that, not
sure).

-- 
(english) http://www.livejournal.com/~pavelmachek
(cesky, pictures) http://atrey.karlin.mff.cuni.cz/~pavel/picture/horses/blog.html
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070215221243</emailId><senderName>Andreas Gruenbacher</senderName><senderEmail>agruen@suse.de</senderEmail><timestampReceived>2007-02-15 22:12:43-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

On Thursday 15 February 2007 12:34, Valdis.Kletnieks@vt.edu wrote:
&gt; On Wed, 14 Feb 2007 22:14:53 PST, Andreas Gruenbacher said:
&gt; &gt; I agree, that's really what should happen. We solve this by marking
&gt; &gt; modules as supported, partner supported, or unsupported, but in an
&gt; &gt; "insecure" way, so partners and users could try to fake the support
&gt; &gt; status of a module and/or remove status flags from Oopses, and
&gt; &gt; cryptography wouldn't save us.
&gt;
&gt; Where cryptography *can* save you is that a partner or user can't fake a
&gt; 'Suse Supported' signature without access to the Suse private key.

No question about that. We actually already get this from rpm signatures. What 
would module signatures buy us? The kernel could then reliably determine that 
an unsigned module was loaded. But people could still fake their Oopses, or 
overwite the flags which indicate that a module's signature didn't match, so 
we still wouldn't reliably get at that information.

Andreas
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>200702152212430</emailId><senderName></senderName><senderEmail>valdis.kletnieks</senderEmail><timestampReceived>2007-02-15 22:12:43-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

On Thu, 15 Feb 2007 22:32:40 +0100, Adrian Bunk said:
&gt; There are different opinions whether the "complete source code" of the 
&gt; GPLv2 includes in such cases public keys, making it questionable whether 
&gt; your example will survive at court in all jurisdictions.

It's no less shaky than the whole EXPORT_SYMBOL_GPL-as-enforcement crock. :)

&gt; E.g. remember that gpl-violations.org has already successfully enforced 
&gt; the publication of public keys for "firmware only loads signed kernels" 
&gt; cases by threatening companies to otherwise take legal actions in 
&gt; Germany.

A court order for the publication of *public* keys? :)

I think you meant "private keys" in both paragraphs above.  And it's probably
a non-issue the way Red Hat implemented it - they included a document on
"How to generate your own public/private key pair", which invokes commands that
create a bitstring that you can then use to sign the entire applicable part
of the kernel tree.  The fact that it's not the *same* bitstring as they used
is (IMHO) legally about as relevant as the fact that they compiled the tree
with one release of GCC, included instructions on how to compile it, and I
don't get a bitwise identical binary if I compile it with a different GCC
release.

Yes, you're still screwed if you only build *part* of the kernel tree and
expect it to work - modules you sign won't load into their kernel, and vice
versa.  But that's the same problem as the old 2.4 "You didn't do a make clean
between rebuilds and you bugged out because different parts of the tree were
built with different GCC releases".  As distributed, you *can* build a working
kernel from the pieces and instructions provided.



[Attachment #3 (application/pgp-signature)]
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html

</body></email><email><emailId>20070215221304</emailId><senderName>Pavel Machek</senderName><senderEmail>pavel@ucw.cz</senderEmail><timestampReceived>2007-02-15 22:13:04-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

Hi!

&gt; Now, this is not a complete solution by any means: the core kernel is not
&gt; protected, and nor are /dev/mem or /dev/kmem, but it denies (or at least
&gt; controls) one relatively simple attack vector.

Could we fix the /dev/*mem holes, first? They are already used by
malicious modules (aka rootkits...).  Or can selinux already provide
/dev/*mem protection with no way for admin to turn it off?

-- 
(english) http://www.livejournal.com/~pavelmachek
(cesky, pictures) http://atrey.karlin.mff.cuni.cz/~pavel/picture/horses/blog.html
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070216001504</emailId><senderName>Olaf Kirch</senderName><senderEmail>okir@lst.de</senderEmail><timestampReceived>2007-02-16 00:15:04-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

On Thursday 15 February 2007 12:34, Valdis.Kletnieks@vt.edu wrote:
&gt; On Wed, 14 Feb 2007 22:14:53 PST, Andreas Gruenbacher said:
&gt; &gt; I agree, that's really what should happen. We solve this by marking
&gt; &gt; modules as supported, partner supported, or unsupported, but in an
&gt; &gt; "insecure" way, so partners and users could try to fake the support
&gt; &gt; status of a module and/or remove status flags from Oopses, and
&gt; &gt; cryptography wouldn't save us.
&gt;
&gt; Where cryptography *can* save you is that a partner or user can't fake a
&gt; 'Suse Supported' signature without access to the Suse private key.

The user has control over the running kernel, and given enough time
and clue, can circumvent any protection mechanism the vendor comes
up with. And that's a good thing IMO, unless you believe in "trusted
computing" and all those Bigbrotherisms some agencies want to put
in your machines.

So the user is running a system in some state that may or may not
resemble what the vendor shipped. When the machine crashes, the
user is free to munge the oops until it looks like a valid one.

Someone mentioned in this context that you can sign the oops - but to
do that you need a private key. And the whole point of this exercise is
that the user does not have access to that key.

So as far as support is concerned, you're back in square one.
You cannot tell a "genuine" oops produced on a supported kernel
from a doctored one produced on Joe Doe's Garage Kernel.

Olaf
-- 
Olaf Kirch        |  Anyone who has had to work with X.509 has probably
okir@lst.de       |  experienced what can best be described as
------------------+  ISO water torture. -- Peter Gutmann
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070216153818</emailId><senderName>Bodo Eggert</senderName><senderEmail>7eggert@gmx.de</senderEmail><timestampReceived>2007-02-16 15:38:18-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

Roman Zippel &lt;zippel@linux-m68k.org&gt; wrote:
&gt; On Thu, 15 Feb 2007, David Howells wrote:

&gt;&gt; &gt; This is really the weak point - it offers no advantage over an equivalent
&gt;&gt; &gt; implementation in user space (e.g. in the module tools). So why has to be
&gt;&gt; &gt; done in the kernel?
&gt;&gt; 
&gt;&gt; Because the init_module() system call is the common point of module
&gt;&gt; submission
&gt;&gt; to the kernel, not any particular userspace program.  There is no requirement
&gt;&gt; for userspace to load a module by invoking a module tools program or library,
&gt;&gt; and so userspace can bypass the checks entirely by just calling
&gt;&gt; init_module().
&gt;&gt; Assume for a moment that you can't trust userspace...  (Obviously, if you
&gt;&gt; can't trust the kernel then you're already stuffed.)
&gt; 
&gt; All the security stuff in the kernel should provide the necessary means to
&gt; restrict this system call.

Hardening a system should include deeper layers, too.

&gt;&gt; It is possible to protect /dev/mem and /dev/kmem or make them unavailable and
&gt;&gt; it is possible to protect the kernel's memory whilst it is running (provided
&gt;&gt; you don't have nommu or broken hardware and you don't let userspace concoct
&gt;&gt; any DMA request it likes) which mostly closes those other vectors I
&gt;&gt; mentioned.
&gt;&gt; This isn't something I intended to look at with this patch.  Those are
&gt;&gt; separate holes.
&gt; 
&gt; Exactly and as long as there are these holes, these patches are only
&gt; kernel bloat.

Off cause there are other ways to expose the kernel, but they can be plugged,
too, one by one. You wouldn't leave your door open just because your window
is open, while leaving the window open because the door is open.

&gt; The simple verification can also be done in userspace and

You may verify in userspace, but you can't use the result.

OTOH, having 1000 lines of code to verify a module _is_ bloat for this task.
Remove a 0 and it should be plenty (not counting the help text).

&gt; module signing offers no real security.

It offers security against a class of attacks.

&gt; What real value do these patches provide, that can't be reached via other
&gt; means?

It provides an extra layer of security: If an exploit allows execution of
insmod(userstring), it can't compromise kernel internals.

&gt; Who else than distributions would be interested in this?

How large is the userbase _not_ using a distribution? And are they unable to
unselect [X] Signes modules support?

&gt; Pretty
&gt; much any use you initially mentioned can be done in simpler ways, e.g.
&gt; anyone afraid of modules simply disables module loading completely.

That would work if there was no need for modules. Unfortunately some people
are doomed with external modules, or not experienced enough to customize
their system. Those could benefit from a sysctl(?) saying "unsigned_modules
= taint|disallow".
-- 
Whenever you have plenty of ammo, you never miss. Whenever you are low on
ammo, you can't hit the broad side of a barn.

Friß, Spammer: 5usmqnrkze@xFzMz.7eggert.dyndns.org
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070216202135</emailId><senderName>Dave Jones</senderName><senderEmail>davej@redhat.com</senderEmail><timestampReceived>2007-02-16 20:21:35-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>

On Thu, Feb 15, 2007 at 10:13:04PM +0000, Pavel Machek wrote:
 &gt; Hi!
 &gt; 
 &gt; &gt; Now, this is not a complete solution by any means: the core kernel is not
 &gt; &gt; protected, and nor are /dev/mem or /dev/kmem, but it denies (or at least
 &gt; &gt; controls) one relatively simple attack vector.
 &gt; 
 &gt; Could we fix the /dev/*mem holes, first? They are already used by
 &gt; malicious modules (aka rootkits...).  Or can selinux already provide
 &gt; /dev/*mem protection with no way for admin to turn it off?

There are some valid uses for peeking through /dev/mem. Things like
dmidecode for example.  So you don't want to disable it completely
in a lot of cases, but have fine-grained access to specific parts
of the file.  I'm not sure SELinux can do this. Maybe the MLS stuff
helps here (though I'm far from an expert on this, so I could be
talking out of my rear).

The restricted dev/mem patches we've had in Fedora for a while
do the right thing, but they're a bit crufty (in part due to
drivers/char/mem.c being a bit of a mess before we even start
patching it).  I've had "clean these up for upstream" on my
todo for a while. I might get around to it one of these days.

		Dave

-- 
http://www.codemonkey.org.uk
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070207225848</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-07 22:58:48-0400</timestampReceived><subject>Re: README losetup/mount-Parameter "offset" needs another note</subject><body>

Matthias Schniedermeyer wrote:
&gt; I discovered the slow performance while "initializing" the loop with
&gt; dd if=/dev/zero of=/dev/loop&lt;x&gt;
&gt; (Currently i'm not sure if i also used a bs=&lt;whatever&gt;, maybe not)

When block device is accessed directly, kernel splits I/O to soft block size
chunks. 'dd bs=&lt;whatever&gt;' is just for user space dd program, and does not
affect what slitting happens in kernel.

&gt; I think the total capacity is quite irrelevant for this case, it's the
&gt; expected HDD size minus 8 Blocks?
&gt; blockdev --getsize /dev/loop2
&gt; 976773160

(976773160 * 512) % 4096 == 0

&gt; blockdev --getsize /dev/sdb
&gt; 976773168

(976773168 * 512) % 4096 == 0

Both device sizes are integer multiples of 4096 bytes. When you shrink the
the device size by non-4096 byte amount, that is no longer true. 976773160
and 976773168 sector size devices can be fully accessed using 4096 soft
block size. It is the default smaller soft block size that causes the
slowdown.

&gt; performing "direct to loop" would also lead to a poorly performing
&gt; "filesystem over loop".

Nope.

If you test it using a file system, then file system mount of course sets
better soft block size and bangs the device using more optimally sized
reguests.

# losetup -e AES128 -K gpgkey3.asc /dev/loop0 /dev/hdd9
Password:
# blockdev --getbsz /dev/loop0
512

(partition backed inherits 512 byte soft block size)

# mount -t ext2 /dev/loop0 /mnt
# blockdev --getbsz /dev/loop0
4096

(but mount sets it to 4096 bytes, as it should)

# umount /mnt
# losetup -d /dev/loop0
# mount -t ext2 /dev/hdd9 /mnt \
&gt; -o loop=/dev/loop2,encryption=AES128,gpgkey=gpgkey3.asc
Password:
# blockdev --getbsz /dev/loop2
4096

(4096 byte soft block size after mount, ok here too)

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070208000744</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-08 00:07:44-0400</timestampReceived><subject>Re: README losetup/mount-Parameter "offset" needs another note</subject><body>

Jari Ruusu wrote:
&gt; Both device sizes are integer multiples of 4096 bytes. When you shrink the
&gt; the device size by non-4096 byte amount, that is no longer true. 976773160
&gt; and 976773168 sector size devices can be fully accessed using 4096 soft
&gt; block size. It is the default smaller soft block size that causes the
&gt; slowdown.

Just to clarify this: Default soft block size is set to such value that full
device can be accessed using X amount of such soft block size chunks. File
system mount knows that it won't access any less-than-block-size leftovers
at the end of the device, so it can set to more sane value.

In following examples, /dev/hdd2, /dev/loop3 and /dev/loop6 sizes are
interger multiple of 4096 bytes, and as such, can be fully accessed using
4096 byte soft block size. /dev/hdd9, /dev/loop4 and /dev/loop5 are not, and
are accessed using 512 byte soft block size. Prior to mount, that is.
Meaning that any mkfs, fsck, and other direct access will not perform as
fast and efficiently as for /dev/hdd2, /dev/loop3 and /dev/loop6. After
mount, /dev/hdd2 and /dev/hdd9 should perform identically, as should
/dev/loop3, /dev/loop4, /dev/loop5 and /dev/loop6.

# blockdev --getsize /dev/hdd2
102816

(device size is integer multiple of 4096 bytes)

# losetup -e AES128 -K loop-AES/gpgkey3.asc /dev/loop3 /dev/hdd2
Password:
# blockdev --getbsz /dev/loop3
4096

(default soft block size is 4096 bytes)

# losetup -e AES128 -K loop-AES/gpgkey3.asc -o 512 /dev/loop5 /dev/hdd2
Password:
# blockdev --getbsz /dev/loop5
512

(default soft block size is *LESS THAN* 4096 bytes)

# blockdev --getsize /dev/hdd9
102753

(device size is *NOT* integer multiple of 4096 bytes)

# losetup -e AES128 -K loop-AES/gpgkey3.asc /dev/loop4 /dev/hdd9
Password:
# blockdev --getbsz /dev/loop4
512

(default soft block size is *LESS THAN* 4096 bytes)

# losetup -e AES128 -K loop-AES/gpgkey3.asc -o 512 /dev/loop6 /dev/hdd9
Password:
# blockdev --getbsz /dev/loop6
4096

(default soft block size is 4096 bytes)

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070208100244</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-02-08 10:02:44-0400</timestampReceived><subject>Re: README losetup/mount-Parameter "offset" needs another note</subject><body>

Jari Ruusu wrote:
&gt; Jari Ruusu wrote:
&gt; &gt; Both device sizes are integer multiples of 4096 bytes. When you shrink the
&gt; &gt; the device size by non-4096 byte amount, that is no longer true. 976773160
&gt; &gt; and 976773168 sector size devices can be fully accessed using 4096 soft
&gt; &gt; block size. It is the default smaller soft block size that causes the
&gt; &gt; slowdown.
&gt; 
&gt; Just to clarify this: Default soft block size is set to such value that full
&gt; device can be accessed using X amount of such soft block size chunks. File
&gt; system mount knows that it won't access any less-than-block-size leftovers
&gt; at the end of the device, so it can set to more sane value.
&gt; 
&gt; In following examples, /dev/hdd2, /dev/loop3 and /dev/loop6 sizes are
&gt; interger multiple of 4096 bytes, and as such, can be fully accessed using
&gt; 4096 byte soft block size. /dev/hdd9, /dev/loop4 and /dev/loop5 are not, and
&gt; are accessed using 512 byte soft block size. Prior to mount, that is.
&gt; Meaning that any mkfs, fsck, and other direct access will not perform as
&gt; fast and efficiently as for /dev/hdd2, /dev/loop3 and /dev/loop6. After
&gt; mount, /dev/hdd2 and /dev/hdd9 should perform identically, as should
&gt; /dev/loop3, /dev/loop4, /dev/loop5 and /dev/loop6.
&gt; 
&gt; # blockdev --getsize /dev/hdd2
&gt; 102816
&gt; 
&gt; (device size is integer multiple of 4096 bytes)
&gt; 
&gt; # losetup -e AES128 -K loop-AES/gpgkey3.asc /dev/loop3 /dev/hdd2
&gt; Password:
&gt; # blockdev --getbsz /dev/loop3
&gt; 4096
&gt; 
&gt; (default soft block size is 4096 bytes)
&gt; 
&gt; # losetup -e AES128 -K loop-AES/gpgkey3.asc -o 512 /dev/loop5 /dev/hdd2
&gt; Password:
&gt; # blockdev --getbsz /dev/loop5
&gt; 512
&gt; 
&gt; (default soft block size is *LESS THAN* 4096 bytes)
&gt; 
&gt; # blockdev --getsize /dev/hdd9
&gt; 102753
&gt; 
&gt; (device size is *NOT* integer multiple of 4096 bytes)
&gt; 
&gt; # losetup -e AES128 -K loop-AES/gpgkey3.asc /dev/loop4 /dev/hdd9
&gt; Password:
&gt; # blockdev --getbsz /dev/loop4
&gt; 512
&gt; 
&gt; (default soft block size is *LESS THAN* 4096 bytes)
&gt; 
&gt; # losetup -e AES128 -K loop-AES/gpgkey3.asc -o 512 /dev/loop6 /dev/hdd9
&gt; Password:
&gt; # blockdev --getbsz /dev/loop6
&gt; 4096
&gt; 
&gt; (default soft block size is 4096 bytes)

Thanks for the explanation.
So i will through in a little Perl-Script, that makes sure that the "raw" loop \
(before it has a filesystem) has a soft-block-size of 4096, so that i won't have \
performance-problems when i work directly with a/the loop. (I can life with the few \
KB of lost space, i still have a great gain of several MB(*) because i don't have the \
partition-alignment "problem")

But i still think that a little "note" about that is appropriate for the README, so \
that other won't fall into the same tarpit as i. :-) It's good that YOU know all \
that, but others don't know that. Especially as this topic isn't on the radar of, i'd \
guess, 99% of people.



*:
For the 200GB drives that i currently convert i have a net gain in capacity of about \
100MB. One part "partition alignment" and one part "Smaller log-size of the recreated \
XFS filesystem". If i didn't misscalculate the total loss of capacity is about 5MB \
due to various overheads, mostly the filesystem itself. I think i can live with that. \
:-)


-- 
Real Programmers consider "what you see is what you get" to be just as
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated,
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070212174237</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-12 17:42:37-0400</timestampReceived><subject>Re: README losetup/mount-Parameter "offset" needs another note</subject><body>

Matthias Schniedermeyer wrote:
&gt; But i still think that a little "note" about that is appropriate for the
&gt; README, so that other won't fall into the same tarpit as i. :-)

Following text will be in next version of loop-AES README "Performance
tuning" section:



Soft block size of loop device has negative effect on efficiency and
performance if that soft block size is too small. On recent kernels, default
soft block size is set to such value that full device can be accessed using
X amount of such soft block size chunks. If device size is integer multiple
of processor page size, then default soft block size will also be processor
page size. Some older kernels inherit default soft block size from backing
device.

Mounting a file system on top of loop device sets loop device's soft block
size to same as block size of that mounted file system, so none of this soft
block size optimization affects mounted file system performance. But too
small soft block size may affect unmounted loop device performance.
Unmounting a file system may set loop device's soft block size back to
default value (this depends on kernel version).

Since unmounted loop device is not usually used for anything other than
occasional fsck, this reduced efficiency and performance is not necessarily
a problem. However, if you insist on getting maximum performance from fsck
and other direct to loop device usage, then (1) you can use backing disk
partition whose size is integer multiple of 4096 bytes, or (2) you can limit
size of loop device to integer multiple of 4096 bytes, or (3) you can set
loop device's soft block size manually to 4096 bytes. Option (3) doesn't
work on all kernels because many kernels seem to revert to default soft
block size when device is not mounted and no process is holding open file
descriptor on it.

This command shows size of device in 512 byte units:

    blockdev --getsize /dev/loop0

This command shows soft block size of device in byte units:

    blockdev --getbsz /dev/loop0

This command sets soft block size of device:

    blockdev --setbsz 4096 /dev/loop0
    
In this example, backing device size is 20012106240 bytes (39086145 * 512).
Loop device size is rounded down to integer multiple of 4096 bytes,
20012105728 bytes:

    blockdev --getsize /dev/hda666
    39086145
    losetup -e AES128 -K foo.gpg -s 20012105728 /dev/loop0 /dev/hda666
                                 ^^^^^^^^^^^^^^
You can also add sizelimit=20012105728 mount option /etc/fstab file. Mount
won't benefit much from it because file system mount sets soft block size to
desired value anyway, but "losetup -F /dev/loop0" reads and uses that option
from /etc/fstab file. losetup -s and sizelimit mount option do not work with
2.2 and older kernels.


-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070212211158</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-02-12 21:11:58-0400</timestampReceived><subject>Re: README losetup/mount-Parameter "offset" needs another note</subject><body>

Jari Ruusu wrote:
&gt; Matthias Schniedermeyer wrote:
&gt;&gt; But i still think that a little "note" about that is appropriate for the
&gt;&gt; README, so that other won't fall into the same tarpit as i. :-)
&gt; 
&gt; Following text will be in next version of loop-AES README "Performance
&gt; tuning" section:
&gt; [deleted]

Great. I now know why i fell into this tar pit and you MAY have saved
others from falling into the same. :-)


Btw. "Performance tuning".
You already changed the last paragraph of the (current) chapter?
Current 2.6 kernels contain another IO-scheduler and made it default in
2.6.18: CFQ.





Bis denn

-- 
Real Programmers consider "what you see is what you get" to be just as
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated,
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070208125126</emailId><senderName>Uwe Hermann</senderName><senderEmail>uwe@hermann-uwe.de</senderEmail><timestampReceived>2007-02-08 12:51:26-0400</timestampReceived><subject>Re: Secure overwrite of the ram memory</subject><body>

On Thu, Feb 08, 2007 at 02:00:07AM +0100, Nomen Nescio wrote:
&gt; &gt; I'm looking for an app that can wipe the contents of my ram. 
&gt; 
&gt; That's called the off switch.

Not quite. It's possible to get meaningful data out of RAM chips _after_
you power your computer off. Granted, you probably need pricey special
equipment, but it's possible.

I read a paper where such experiments were conducted a while ago, but I
can't find an URL to it right now...


Uwe.
-- 
http://www.hermann-uwe.de  | http://www.holsham-traders.de
http://www.crazy-hacks.org | http://www.unmaintained-free-software.org

["signature.asc" (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070209123102</emailId><senderName>Evgeniy Polyakov</senderName><senderEmail>johnpol@2ka.mipt.ru</senderEmail><timestampReceived>2007-02-09 12:31:02-0400</timestampReceived><subject>Re: Asynchronus crypto API</subject><body>

On Fri, Feb 09, 2007 at 01:16:02PM +0100, Joerg Roedel (joerg.roedel@amd.com) wrote:
&gt; Hello Evgeniy,
&gt; 
&gt; On Fri, Feb 09, 2007 at 02:31:11PM +0300, Evgeniy Polyakov wrote:
&gt; &gt; On Fri, Feb 09, 2007 at 12:08:00PM +0100, Joerg Roedel (joerg.roedel@amd.com) wrote:
&gt; &gt; &gt; Background: I recently bought a HIFN crypto card and would like to use
&gt; &gt; &gt; it under Linux without the need to use some external patchsets :)
&gt; &gt; 
&gt; &gt; Not for now - either use acrypto [1] or ocf [2].
&gt; 
&gt; Yes, these two I meant with "external patchsets" :-)
&gt; It would be nice to have an asynchronous API in the mainstream kernel.
&gt; An the documentation says it is under development, therefore I ask :)

It is - Herbert's work on stackable algo registration is a first step,
although when we had async crypto discussion last time (about a year or couple
ago) we was unable to get into consensus - I still think that it is
quite impossible to have good async support with existing
software-oriented cryptoapi, while Herbert have some ideas in mind.

Work is being done, just not too fast.
You can find a brief todo in archive of how Herbert planned to implement
that and, if you like, get into that too - that would be very
appreciated.

&gt; Joerg
&gt; 
&gt; -- 
&gt; Joerg Roedel
&gt; Operating System Research Center
&gt; AMD Saxony LLC &amp; Co. KG
&gt; 

-- 
	Evgeniy Polyakov
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070212110730</emailId><senderName></senderName><senderEmail>8055094081</senderEmail><timestampReceived>2007-02-12 11:07:30-0400</timestampReceived><subject>FW:</subject><body>

 viewmymessage.com using Msg ID a1c0ibvi2 Password toil9last

--
===============================================
Brought to you by, Cingular Wireless Messaging
http://www.CingularMe.COM/

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070212232852</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-02-12 23:28:52-0400</timestampReceived><subject>Re: README losetup/mount-Parameter "offset" needs another note</subject><body>

* Matthias Schniedermeyer &lt;ms@citd.de&gt; wrote:

&gt; Btw. "Performance tuning". You already changed the last paragraph
&gt; of the (current) chapter? Current 2.6 kernels contain another
&gt; IO-scheduler and made it default in 2.6.18: CFQ.

I hate this scheduler tuning thing / choose from 3 more-or-less evils
... back in 2.6.7 my world was still in place -- best performing kernel
ever.

I still use Anticipatory as default (yes, with preemptible kernel...)

Still, the last 2.6 kernel I had no trouble with was .16 but I can't
use that branch cos of too modern hardware -- what a hassle.


-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070216202758</emailId><senderName>Arjan van de Ven</senderName><senderEmail>arjan@infradead.org</senderEmail><timestampReceived>2007-02-16 20:27:58-0400</timestampReceived><subject>Re: [PATCH 0/6] MODSIGN: Kernel module signing</subject><body>


&gt; 
&gt; The restricted dev/mem patches we've had in Fedora for a while
&gt; do the right thing, but they're a bit crufty (in part due to
&gt; drivers/char/mem.c being a bit of a mess before we even start
&gt; patching it).  I've had "clean these up for upstream" on my
&gt; todo for a while. I might get around to it one of these days.


the real thing is that /dev/mem is too many things for too many people.
Fundamentally it has 3 components
1) ram-but-not-kernel data: basically BIOS datastructures
2) kernel visible ram: user/kernel data, this has all the nasty cache
coherency issues. This is also a "debug only" use, and "rootkit only"
sometimes ;) 
3) MMIO space: this really should not be used anymore, sysfs provides a
MUCH better interface and it also breaks if you have enforcing IOMMU's
in the system... it can't really work since the kernel doesn't get told
which device is being accessed

unless we split this up (well the third is split already) it's going to
remain a big mess.

-- 
if you want to mail me at work (you don't), use arjan (at) linux.intel.com
Test the interaction between Linux and your BIOS via http://www.linuxfirmwarekit.org

-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070216210108</emailId><senderName>xxx () home ! ro</senderName><senderEmail>xxx@home.ro</senderEmail><timestampReceived>2007-02-16 21:01:08-0400</timestampReceived><subject>SEE A GIRL HOW SUCK A DICK</subject><body>


&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"&gt;
&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;&lt;/TITLE&gt;
&lt;META http-equiv=Content-Type content="text/html; charset=iso-8859-1"&gt;&lt;LINK 
href="tempstyle.css" type=text/css rel=stylesheet&gt;
&lt;SCRIPT&gt;&lt;/SCRIPT&gt;

&lt;META content="MSHTML 6.00.2900.2963" name=GENERATOR&gt;&lt;/HEAD&gt;
&lt;BODY class=ewisoftempty class="ewisoftempty"&gt;
&lt;P&gt;&lt;STRONG&gt;&lt;FONT color=#b0FFa0 size=3&gt;Wanna Se Nice Girl's ?&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/P&gt;
&lt;P&gt;&lt;STRONG&gt;&lt;FONT color=#bboFa9 size=3&gt;We have the solution,&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/P&gt;
&lt;P&gt;&lt;STRONG&gt;&lt;FONT color=#094BaF size=3&gt;Download This File -&gt; &lt;A 
href="http://www.helsinki.home.ro/sexxy.exe"&gt;www.helsinki.home.ro/sexxy.exe&lt;/A&gt; &lt;- 
&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/P&gt;
&lt;P&gt;&lt;STRONG&gt;&lt;FONT color=#b0bb41 size=3&gt;Open sexxy.exe to 
see the movie and then e-mail us if you like this video.&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/P&gt;
&lt;P&gt;&lt;STRONG&gt;&lt;FONT color=#b4F9FF size=3&gt;Your Home.ro XXX 
Team.&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/P&gt;&lt;/BODY&gt;&lt;/HTML&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070217105211</emailId><senderName>Matthias Schniedermeyer</senderName><senderEmail>ms@citd.de</senderEmail><timestampReceived>2007-02-17 10:52:11-0400</timestampReceived><subject>Re: Loop-AES: Question for Password when none is needed</subject><body>

Jari Ruusu wrote:
&gt; Matthias Schniedermeyer wrote:
&gt;&gt;&gt; This problem can be summarized as: You don't want to configure your
&gt;&gt;&gt; automounter to pass -p command line parameter to mount. The fix is:
&gt;&gt;&gt; Reconfigure your automounter. Problem solved.
&gt;&gt; No. In the used configuration the automounter just only supports passing
&gt;&gt; "-o"-options. AND in a configuration where the automounter would support
&gt;&gt; it, i would lose the 'ghosting' feature where all possible mount-point are
&gt;&gt; shown, regardless if they currently are mounted or not. I'm a
&gt;&gt; commandline-person and i would loose TAB-completition, which i dislike
&gt;&gt; like hell.
&gt; 
&gt; Ok, ok.
&gt; 
&gt; It wasn't a big change. 22 code lines changed, not counting documentation
&gt; changes. It was a matter of adding a mount option and open/close a file,
&gt; otherwise it uses existing code paths. Now mount has a new mount option
&gt; 'cleartextkey' which specifies a file that holds 65 lines of key data, i.e.
&gt; unencrypted contents of gpg encrypted key file. Some examples follows.

Great. Thanks.



Bis denn

-- 
Real Programmers consider "what you see is what you get" to be just as
bad a concept in Text Editors as it is in women. No, the Real Programmer
wants a "you asked for it, you got it" text editor -- complicated,
cryptic, powerful, unforgiving, dangerous.


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070223002015</emailId><senderName>RB</senderName><senderEmail>aoz.syn@gmail.com</senderEmail><timestampReceived>2007-02-23 00:20:15-0400</timestampReceived><subject>Re: Help requried to write the decrypted ipsec packets to the local disk.</subject><body>

Unless you're trying to do something really odd, all you're probably
going to need is tcpdump or wireshark, both of which are definitely
beyond the scope of this list.  That said, 'man tcpdump' is probably
going to be your best resource.

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070223182650</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-23 18:26:50-0400</timestampReceived><subject>Re: losetup -a blocks when loop is written to</subject><body>

Matthias Schniedermeyer wrote:
&gt; When i do a 'losetup -a' while a manually setup encrypted loop is 'zero'ed with
&gt; dd if=/dev/zero of=/dev/loop&lt;x&gt; bs=4096 count=&lt;y&gt;
&gt; It blocks, just before the written to loop would be printed, until dd is
&gt; finished, which may take several hours.
&gt; 
&gt; As even after 'KILL'ing the process it stays in the process list, i assume
&gt; that something on the kernel-site is blocking.

This appears to be lock contention issue. Direct block device access and
loop device ioctls that are used to query loop device status seem to both
want same exclusive lock. Direct block device writes seem to win lock
contention most of the time, or all of the time. Loop device ioctls
eventually gets the lock, but it may take some time.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070224000706</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-02-24 00:07:06-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

&gt; How is the script going to know what live-CD you are going to boot next,
&gt; and
&gt; what character encoding defaults that live-CD uses?

The idea was rather to check the current character encoding. However this doesn´t \
solve the problem. Passphrases should be made up of ASCII characters only. \
UTF8KEYBMODE=1 in initrd.conf does not solve the problem. Again, the use of \
Live-DVD/CD derives from the need for a maintenance environment to do the root \
encryption or manually run fsck if needed. For removable media it might be a fine \
thing to handle encrypted content on different Linux distros.

&gt; µ and ü seemed to have correct encoding in both text console and X
&gt; windows.
&gt; But not all distros use same encoding, Knoppix default: ISO8859-15, SUSE
&gt; default: UTF-8.
Sure, both distros can display non-ASCII characters correctly but a created key might \
suffer portability.

&gt; You select some keyboard layout file at distro install time.
Yes, and I also configured the kernel to have ISO-8859-15 built in. Later in the boot \
process something like this happens: Loading keymap \
i386/qwertz/de-latin1-nodeadkeys.map.gz done Loading compose table latin1.add         \
done Seems like dumpkeys lacks this compose table to be included in the default.kmap. \
I´m uncertain.

&gt; My current understanding is that keyboard mode is always ASCII at kernel
&gt; boot. Distro init scripts then change the default to something else.
Yes I think so. I looked in kernel configuration for character devices and the \
console. There is no selection for UTF-8 or something else. In this case passphrases \
with non-ASCII chars are not supported at boot time and should be avoided.

&gt; UTF8KEYBMODE=1 in build-initrd.sh config sets keyboard to UTF-8 mode
&gt; before
&gt; passphrase is asked.
This is what I wanted. I tried with different keys made from the SuSE console. It \
failed in all my attempts. I feel very discontent with the SuSE 10.2 release. To fix \
the changes they made lies beyond my skills. Thanks for your patience and assistance \
so far.

Best regards,
Peter
-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070224133551</emailId><senderName>Phil H</senderName><senderEmail>philtickle200@yahoo.com</senderEmail><timestampReceived>2007-02-24 13:35:51-0400</timestampReceived><subject>Re: Tripl: a simple front-end for multiple encryption</subject><body>

I should have said "beta" since I'm unable to find any problems with this script on \
my system (GNU bash, version 2.05b.0(1)-release, with Busybox utils).  Which is not \
to say there aren't any.  
 Any test reports on this humble offering will be gratefully received .... 
 
Phil H &lt;philtickle200@yahoo.com&gt; wrote: Hi
 
 I know people probably have their own scripts for creating and mounting loop-aes \
encrypted devices with loop-aes-ciphers and there's probably a number around, but \
here's mine anyway.  The default setting is to embed keys (other than the first, \
which must be detatched), in the previous loop device.  I've tested it up to the \
maxmimum number of loop devices by extending the arrays CIPHER,  MODULE etc but of \
course that is extremely ridiculous (!) and was only for testing purposes.  
 Thought I'd post it and get a bit of review since I want to distribute it, so feel \
free to try it out on a spare partition or floppy. Of course change the settings at \
the beginning of the script to suit.   It's still a bit alpha and I'm not a linux \
veteran so go easy on me.  
 Note:  I always have /sbin in PATH, but if you don't then you need to do:
 
 export PATH="/sbin:${PATH}"
 
 before running the scri[pt.
 
  ==================================================================================
 
 
 #!/bin/bash
 
 # tripl - single or multiple encryption with loop-aes-ciphers
 # (C) WDef 2006 v0.1 &lt;WDef200 at yahoo dot co dot uk&gt;
 
 # Simple tool to do single or multiple encrypted partitions using loop-aes v3.x \
(multikey) and loop-aes-ciphers.  # Automates gpg key generation, allocation and \
setup/pulldown of loops, layered embedding of keys, filesystem checking etc.  # Does \
not write to /etc/fstab.  # Note: multiple encryption can use a lot of cpu at times.
 # Single or double encryption with a good password is probably sufficient (really!).
 # Script skips loops that are already in use and only pulls down encrypted loops on \
umounting.  # Blowfish is not supported since it does not work with multiline \
keychains in loopaes and   # is not recommended for large amounts of data.
 
 # This is free software. No warranty. Use  AYOR.
 
 #===================// USER SETTINGS //============================
 
 # Put your settings here.
 # Alternatively, make these settings in a file $HOME/.triplrc, where $HOME is root's \
home dir.  # These will override any made here.
 
 DEVICE=/dev/hda7
 MOUNTPT=/mnt/test
 
 MODE=3        # Triple encryption
 #MODE=2        # Double encryption
 #MODE=1        # Single encryption
 
 # You can rearrange the order of ciphers, but remember 
 #- module order must match order of ciphers, and
 #- you'll have to run tripl -new if you change this (so back up data first).
 
 CIPHER[1]=serpent128
 CIPHER[2]=AES128
 CIPHER[3]=twofish128
 
 MODULE[1]=loop_serpent
 MODULE[2]=loop
 MODULE[3]=loop_twofish
 
 key[1]=/mnt/hda9/test1
 key[2]=/mnt/hda9/test2
 key[3]=/mnt/hda9/test3
 
 #EMBED=no
  EMBED=yes    # If enabled, the user only need specify one external gpg-encrypted \
                key (key[1]) in user settings.
         # Other keys will be automatically generated for each encryption layer by \
                tripl -new (prompts user
         # for passwords) and successively embedded in the encryption layer previous \
                to that being set up.
         # This also means an attacker has to crack the first encryption layer just \
to get the   # encrypted key for the second, and so on. No effect if MODE=1
         
         # If unset, a seperate external (detached) key should be created with tripl \
                -mkkey for each 
         # encryption layer and set in the user settings prior to running tripl -new.
 
 MAXLOOPS=8    # Usual  default number of loops in linux
 
 FORCE=true    # Kills processes accessing files on mount point in order to force a \
dismount.  #FORCE=false
 
 SHOWKEY=yes    # Show 1st external keyfile name when setting up new partition with \
embedded keys.  
 GPGHOME="${HOME}/.gnupg"
 
 #=================================================================
 
 help(){
 cat &lt;&lt;"EOF"
 tripl - single or multiple encryption with loop-aes-ciphers
 (c) WDef 2007 v0.1
 Usage: tripl OPTION
 Option:
     -m = mount
     -u = unmount
     -mkkey = make key
     -new = set up encrypted partition (destroys data!)
     -fix = check, repair encrypted filesystem
     -h = this
 Set partition name, keys, order of ciphers, mountpoint and MODE 
 (1,2,3 for single,double,triple encryption) at top of script.
  EOF
 }
 
 
 check_losetup(){
 if $(which strings &amp;&gt;/dev/null); then
     strings /sbin/losetup | grep -q -s multi-key-v3
     return $?
 elif grep --version | grep -q 'GNU grep' 2&gt;/dev/null; then
     grep -q -a -s multi-key-v3 /sbin/losetup
     return $?
 else
     echo "Error: can't check losetup compatibility"
     echo "Install strings or GNU grep before proceeding."
     exit 1
 fi
 }
 
 
 run_checks(){
 if [ $EUID -ne 0 ]; then echo "You're not root."; exit 1; fi
 if [ $# -ne 1 ]; then help; exit 1; fi
 if ! which gpg &amp;&gt;/dev/null; then echo "Can't find GnuPG"; exit 1; fi
 if ! check_losetup; then 
     echo "Error: your losetup is incompatible with loop-aes v3.x"
     echo "See the loop-aes README for details."
     exit  1
 fi
 }
 
 loopfree()
 # find free loop
 {
 j=0
 while  losetup -a | awk ' { print $1 } '| grep -q loop$j; do
     (( j = j + 1 ))
     [ $j -eq $MAXLOOPS ] &amp;&amp; return 1    # j=8 means no free loop was found 
 done
 NEXTLP=$j
 return 0
 
 }
 
 
 pull_down(){
 X=$1
 if grep -q "${MOUNTPT}" /etc/mtab; then
     if $FORCE; then fuser -m -k ${MOUNTPT}; fi
     umount ${MOUNTPT}
 fi
 # Pull down all encrypted (only) loops
 losetup -a | awk -F: '/^\/dev\/loop.+encryption.+multi-key-v3/ {print $1}' | sort -r \
| while read D; do  losetup -d $D || X=$?
             done
 exit $X
 
 }
 
 makekey(){
 head -c 2925 /dev/random | uuencode -m - | head -n 66 | tail -n 65 \
 | gpg --symmetric -a
  return
 }
 
 
 setup_loops(){
 
 NUMBUSY=$(losetup -a|wc -l)
 (( NUMFREELOOPS = MAXLOOPS - NUMBUSY ))
 if [ $NUMFREELOOPS -lt $MODE ]; then
     echo "Insufficient loops free ($NUMFREELOOPS)"
     echo "Require $MODE free loop device(s)."
     exit 1
 fi
 echo
 if [ $EMBED = yes ]; then
     if [ ! -e "${key[1]}" ]; then
         echo "Can't find key ${key[1]} - need one external key for embedded mode."
         exit 1
     fi
     if [ "${1}" = new ]; then
         [ $SHOWKEY = yes ] &amp;&amp; echo "&gt;&gt;&gt;&gt;&gt;&gt; Using key ${key[1]} for loop1 &lt;&lt;&lt;&lt;&lt;&lt;"
     else
         echo "Enter $MODE password(s):"
     fi
 else
      echo "Enter $MODE password(s):"
 fi
 
 
 for k in $(seq 1 $MODE); do
 
     modprobe ${MODULE[k]} || pull_down 1
     loopfree || pull_down 1
     TOPLOOP="/dev/loop$NEXTLP"
     # Taking care to get previous loop-aes encrypted loop only:
     PREVIOUSLOOP=$(losetup -a | awk -F: '/^\/dev\/loop.+encryption.+multi-key-v3/ \
{print $1}' | tail -n 1 )      if [ $k -eq 1 ]; then
         D=${DEVICE}
     else
         D=${PREVIOUSLOOP}
     fi
     if [ $EMBED = yes ]; then
         if [ $k -eq 1 ]; then
             # No offset key on first loop
             echo "Setting up loop1 .."
             losetup -e ${CIPHER[1]} -K ${key[1]} -G ${GPGHOME} ${TOPLOOP} ${D} || \
pull_down 1  else
             if [ "${1}" = new ]; then
                 echo
                 echo "&gt;&gt;&gt;&gt;&gt;&gt; Making embedded key for loop$k &lt;&lt;&lt;&lt;&lt;&lt;"
                 echo "Enter new password at three prompts .."
                 yes "" | dd of=${PREVIOUSLOOP} bs=512 count=16
                 makekey | dd of=${PREVIOUSLOOP} conv=notrunc
             fi
              echo "Setting up loop$k .."
             losetup -e ${CIPHER[k]} -K ${PREVIOUSLOOP} -o 8192 -G ${GPGHOME} \
${TOPLOOP} ${PREVIOUSLOOP} || pull_down 1  
         fi
     else
         if [ ! -e "${key[k]}" ]; then
             echo "Can't find key no. $k ${key[k]}"
             pull_down 1
         fi
         echo "Setting up loop$k .."
         losetup -e ${CIPHER[k]} -K ${key[k]} -G ${GPGHOME} ${TOPLOOP} ${D} || \
pull_down 1  fi
 done
 
 }
 
 #=====================// MAIN //==================================
 
 [ -f "${HOME}/.triplrc" ] &amp;&amp; .  ${HOME}/.triplrc
 
 run_checks $*
 
 case $1 in
 
 -new)
 echo
 echo "WARNING: this will destroy all data on $DEVICE !"
 echo "~~~~~~~"
 
 while true; do
     echo -n "Last chance to exit. Are you sure you want to proceed? (YeS/n) "
     read
     case $REPLY in
         YeS) break ;;
         n|N|n*|N*) exit 0;;
         y|y*|Y|Yes|YE*) echo "You must type YeS to proceed.";;
         *) echo "Invalid response.";;
     esac
 done
 echo "Shredding ${DEVICE} .. pls wait .."
 shred -n 1 ${DEVICE}
 setup_loops new
 echo
 echo "&gt;&gt;&gt;&gt;&gt;&gt; Making filesystem &lt;&lt;&lt;&lt;&lt;&lt;"
 mkfs -t ext2 ${TOPLOOP}
 pull_down 0 ;;
 
 
 -m)
 if grep -q "${MOUNTPT}" /etc/mtab; then echo "${MOUNTPT} in  use."; exit 1; fi
 setup_loops
 mount -t ext2 ${TOPLOOP} ${MOUNTPT}
 if grep -q "${TOPLOOP}" /etc/mtab; then echo "OK"; else pull_down 1; fi ;;
 
 -u) 
 pull_down 0 ;;
 
 -mkkey)
 while true; do
     echo -n "Enter path and filename of new key (CNTRL-C = quit): "
     read
     DIR=$(dirname ${REPLY})
     if [ -e "${REPLY}" ]; then
         echo "File $REPLY already exists."; continue
     fi
     if [ ! -d "${DIR}" ]; then
         echo "Invalid path ${DIR}" ; continue
     fi
     if [ ! -w "${DIR}" ]; then
         echo "${DIR} not writeable" ; continue
     fi
     break
 done
 echo "Making key ${REPLY} .."
 makekey &gt;${REPLY}
 if [ $? -eq 0 ]; then
      echo "Done."
     echo "Set your new key location at top of the script."
 else
     rm -f ${REPLY} # gpg will provide error messages if it fails.
     exit 1
 fi ;;
 
 
 -fix)
 if losetup -a | grep -q ${DEVICE} ; then
     echo "${DEVICE} in use."
     exit 1
 fi
 setup_loops
 fsck -t ext2 -C -f -y ${TOPLOOP}
 echo "Done."
 pull_down 0;;
 
 
 -h) help ;;
 
 *) 
 echo "Unknown option $1. Try tripl -h"; exit 1 ;;
 
 esac
 
 exit 0
 
 
 
 
   

---------------------------------
8:00? 8:25? 8:40?  Find a flick in no time
 with theYahoo! Search movie showtime shortcut.

 
---------------------------------
Never Miss an Email
Stay connected with Yahoo! Mail on your mobile. Get started!


[Attachment #3 (text/html)]

I should have said "beta" since I'm unable to find any problems with this script on \
my system (GNU bash, version 2.05b.0(1)-release, with Busybox utils).  Which is \
not to say there aren't any.&lt;br&gt; &lt;br&gt; Any test reports on this humble offering will \
be gratefully received .... &lt;br&gt; &lt;br&gt;&lt;b&gt;&lt;i&gt;Phil H \
&lt;philtickle200@yahoo.com&gt;&lt;/i&gt;&lt;/b&gt; wrote:&lt;blockquote class="replbq" \
style="border-left: 2px solid rgb(16, 16, 255); margin-left: 5px; padding-left: \
5px;"&gt; Hi&lt;br&gt; &lt;br&gt; I know people probably have their own scripts for creating and \
mounting loop-aes encrypted devices with loop-aes-ciphers and there's probably a \
number around, but here's mine anyway.  The default setting is to embed keys \
(other than the first, which must be detatched), in the previous loop device.  \
I've tested it up to the maxmimum number of loop devices by extending the arrays \
CIPHER,  MODULE etc but of course that is extremely ridiculous (!) and was only \
for testing purposes.&lt;br&gt; &lt;br&gt;  Thought I'd post it and get a bit of review since I \
want to distribute it, so feel free to try it out on a spare partition or floppy. Of \
course change the settings at the beginning of the script to suit.   It's still \
a bit alpha and I'm not a linux veteran so go easy on me.&lt;br&gt; &lt;br&gt; Note:  I \
always have /sbin in PATH, but if you don't then you need to do:&lt;br&gt; &lt;br&gt; export \
PATH="/sbin:${PATH}"&lt;br&gt; &lt;br&gt; before running the scri[pt.&lt;br&gt; &lt;br&gt;  \
==================================================================================&lt;br&gt; \
&lt;br&gt; &lt;br&gt; #!/bin/bash&lt;br&gt; &lt;br&gt; # tripl - single or multiple encryption with \
loop-aes-ciphers&lt;br&gt; # (C) WDef 2006 v0.1 &lt;WDef200 at yahoo dot co dot uk&gt;&lt;br&gt; \
&lt;br&gt; # Simple tool to do single or multiple encrypted partitions using loop-aes v3.x \
(multikey) and loop-aes-ciphers.&lt;br&gt; # Automates gpg key generation, allocation and \
setup/pulldown of loops, layered embedding of keys, filesystem checking etc.&lt;br&gt; # \
Does not write to /etc/fstab.&lt;br&gt; #  Note: multiple encryption can use a lot of cpu \
at times.&lt;br&gt; # Single or double encryption with a good password is probably \
sufficient (really!).&lt;br&gt; # Script skips loops that are already in use and only pulls \
down encrypted loops on umounting.&lt;br&gt; # Blowfish is not supported since it does not \
work with multiline keychains in loopaes and &lt;br&gt; # is not recommended for large \
amounts of data.&lt;br&gt; &lt;br&gt; # This is free software. No warranty. Use  AYOR.&lt;br&gt; &lt;br&gt; \
#===================// USER SETTINGS //============================&lt;br&gt; &lt;br&gt; # Put \
your settings here.&lt;br&gt; # Alternatively, make these settings in a file \
$HOME/.triplrc, where $HOME is root's home dir.&lt;br&gt; # These will override any made \
here.&lt;br&gt; &lt;br&gt; DEVICE=/dev/hda7&lt;br&gt; MOUNTPT=/mnt/test&lt;br&gt; &lt;br&gt; \
MODE=3        # Triple encryption&lt;br&gt; \
#MODE=2        # Double encryption&lt;br&gt; \
#MODE=1        # Single encryption&lt;br&gt; &lt;br&gt; # You can  \
rearrange the order of ciphers, but remember &lt;br&gt; #- module order must match order of \
ciphers, and&lt;br&gt; #- you'll have to run tripl -new if you change this (so back up data \
first).&lt;br&gt; &lt;br&gt; CIPHER[1]=serpent128&lt;br&gt; CIPHER[2]=AES128&lt;br&gt; \
CIPHER[3]=twofish128&lt;br&gt; &lt;br&gt; MODULE[1]=loop_serpent&lt;br&gt; MODULE[2]=loop&lt;br&gt; \
MODULE[3]=loop_twofish&lt;br&gt; &lt;br&gt; key[1]=/mnt/hda9/test1&lt;br&gt; key[2]=/mnt/hda9/test2&lt;br&gt; \
key[3]=/mnt/hda9/test3&lt;br&gt; &lt;br&gt; #EMBED=no&lt;br&gt;  EMBED=yes    # If \
enabled, the user only need specify one external gpg-encrypted key (key[1]) in user \
settings.&lt;br&gt;         # Other keys will be \
automatically generated for each encryption layer by tripl -new (prompts user&lt;br&gt; \
        # for passwords) and successively embedded in \
the encryption layer previous to that being set up.&lt;br&gt;     \
    # This also means an attacker has to crack the first encryption \
layer just to get the &lt;br&gt;          # encrypted key for \
the second, and so on. No effect if MODE=1&lt;br&gt;         \
&lt;br&gt;         # If unset, a seperate external (detached) \
key should be created with tripl -mkkey for each &lt;br&gt;     \
    # encryption layer and set in the user settings prior to running \
tripl -new.&lt;br&gt; &lt;br&gt; MAXLOOPS=8    # Usual  default number of loops in \
linux&lt;br&gt; &lt;br&gt; FORCE=true    # Kills processes accessing files on \
mount point in order to force a dismount.&lt;br&gt; #FORCE=false&lt;br&gt; &lt;br&gt; \
SHOWKEY=yes    # Show 1st external keyfile name when setting up new \
partition with embedded keys.&lt;br&gt; &lt;br&gt; GPGHOME="${HOME}/.gnupg"&lt;br&gt; &lt;br&gt; \
#=================================================================&lt;br&gt; &lt;br&gt; \
help(){&lt;br&gt; cat &lt;&lt;"EOF"&lt;br&gt; tripl - single or multiple encryption with \
loop-aes-ciphers&lt;br&gt; (c) WDef 2007 v0.1&lt;br&gt; Usage: tripl  OPTION&lt;br&gt; Option:&lt;br&gt; \
    -m = mount&lt;br&gt;     -u = unmount&lt;br&gt; \
    -mkkey = make key&lt;br&gt;     -new = set up encrypted \
partition (destroys data!)&lt;br&gt;     -fix = check, repair encrypted \
filesystem&lt;br&gt;     -h = this&lt;br&gt; Set partition name, keys, order of \
ciphers, mountpoint and MODE &lt;br&gt; (1,2,3 for single,double,triple encryption) at top \
of script.&lt;br&gt;  EOF&lt;br&gt; }&lt;br&gt; &lt;br&gt; &lt;br&gt; check_losetup(){&lt;br&gt; if $(which strings \
&amp;&gt;/dev/null); then&lt;br&gt;     strings /sbin/losetup | grep -q -s \
multi-key-v3&lt;br&gt;     return $?&lt;br&gt; elif grep --version | grep -q 'GNU \
grep' 2&gt;/dev/null; then&lt;br&gt;     grep -q -a -s multi-key-v3 \
/sbin/losetup&lt;br&gt;     return $?&lt;br&gt; else&lt;br&gt;     echo \
"Error: can't check losetup compatibility"&lt;br&gt;     echo "Install \
strings or GNU grep before proceeding."&lt;br&gt;     exit  1&lt;br&gt; fi&lt;br&gt; \
}&lt;br&gt; &lt;br&gt; &lt;br&gt; run_checks(){&lt;br&gt; if [ $EUID -ne 0 ]; then echo "You're not root."; \
exit 1; fi&lt;br&gt; if [ $# -ne 1 ]; then help; exit 1; fi&lt;br&gt; if ! which gpg \
&amp;&gt;/dev/null; then echo "Can't find GnuPG"; exit 1; fi&lt;br&gt; if ! check_losetup; \
then &lt;br&gt;     echo "Error: your losetup is incompatible with loop-aes \
v3.x"&lt;br&gt;     echo "See the loop-aes README for details."&lt;br&gt; \
    exit  1&lt;br&gt; fi&lt;br&gt; }&lt;br&gt; &lt;br&gt; loopfree()&lt;br&gt; # find free loop&lt;br&gt; \
{&lt;br&gt; j=0&lt;br&gt; while  losetup -a | awk ' { print $1 } '| grep -q loop$j; do&lt;br&gt; \
    (( j = j + 1 ))&lt;br&gt;     [ $j -eq $MAXLOOPS ] \
&amp;&amp; return 1    # j=8 means no free loop was found &lt;br&gt; \
done&lt;br&gt; NEXTLP=$j&lt;br&gt; return 0&lt;br&gt; &lt;br&gt; }&lt;br&gt; &lt;br&gt; &lt;br&gt; pull_down(){&lt;br&gt; X=$1&lt;br&gt; if \
grep -q "${MOUNTPT}" /etc/mtab; then&lt;br&gt;     if $FORCE; then fuser -m \
-k ${MOUNTPT}; fi&lt;br&gt;     umount ${MOUNTPT}&lt;br&gt; fi&lt;br&gt; #  Pull down \
all encrypted (only) loops&lt;br&gt; losetup -a | awk -F: \
'/^\/dev\/loop.+encryption.+multi-key-v3/ {print $1}' | sort -r | while read D; \
do&lt;br&gt;             losetup -d $D || \
X=$?&lt;br&gt;             done&lt;br&gt; exit \
$X&lt;br&gt; &lt;br&gt; }&lt;br&gt; &lt;br&gt; makekey(){&lt;br&gt; head -c 2925 /dev/random | uuencode -m - | head \
-n 66 | tail -n 65 \&lt;br&gt; | gpg --symmetric -a&lt;br&gt;  return&lt;br&gt; }&lt;br&gt; &lt;br&gt; &lt;br&gt; \
setup_loops(){&lt;br&gt; &lt;br&gt; NUMBUSY=$(losetup -a|wc -l)&lt;br&gt; (( NUMFREELOOPS = MAXLOOPS - \
NUMBUSY ))&lt;br&gt; if [ $NUMFREELOOPS -lt $MODE ]; then&lt;br&gt;     echo \
"Insufficient loops free ($NUMFREELOOPS)"&lt;br&gt;     echo "Require $MODE \
free loop device(s)."&lt;br&gt;     exit 1&lt;br&gt; fi&lt;br&gt; echo&lt;br&gt; if [ $EMBED = \
yes ]; then&lt;br&gt;     if [ ! -e "${key[1]}" ]; then&lt;br&gt; \
        echo "Can't find key ${key[1]} - need one \
external key for embedded  mode."&lt;br&gt;         exit \
1&lt;br&gt;     fi&lt;br&gt;     if [ "${1}" = new ]; then&lt;br&gt; \
        [ $SHOWKEY = yes ] &amp;&amp; echo \
"&gt;&gt;&gt;&gt;&gt;&gt; Using key ${key[1]} for loop1 &lt;&lt;&lt;&lt;&lt;&lt;"&lt;br&gt; \
    else&lt;br&gt;         echo "Enter $MODE \
password(s):"&lt;br&gt;     fi&lt;br&gt; else&lt;br&gt;      echo "Enter \
$MODE password(s):"&lt;br&gt; fi&lt;br&gt; &lt;br&gt; &lt;br&gt; for k in $(seq 1 $MODE); do&lt;br&gt; &lt;br&gt; \
    modprobe ${MODULE[k]} || pull_down 1&lt;br&gt;     \
loopfree || pull_down 1&lt;br&gt;     TOPLOOP="/dev/loop$NEXTLP"&lt;br&gt; \
    # Taking care to get previous loop-aes encrypted loop only:&lt;br&gt; \
    PREVIOUSLOOP=$(losetup -a | awk -F: \
'/^\/dev\/loop.+encryption.+multi-key-v3/ {print $1}' | tail -n 1 )    \
&lt;br&gt;     if [ $k -eq 1 ]; then&lt;br&gt;      \
    D=${DEVICE}&lt;br&gt;     else&lt;br&gt;     \
    D=${PREVIOUSLOOP}&lt;br&gt;     fi&lt;br&gt;     \
if [ $EMBED = yes ]; then&lt;br&gt;         if [ $k -eq 1 ]; \
then&lt;br&gt;             # No offset key on \
first loop&lt;br&gt;             echo "Setting \
up loop1 .."&lt;br&gt;             losetup -e \
${CIPHER[1]} -K ${key[1]} -G ${GPGHOME} ${TOPLOOP} ${D} || pull_down 1&lt;br&gt; \
        else&lt;br&gt;         \
    if [ "${1}" = new ]; then&lt;br&gt;     \
            echo&lt;br&gt;     \
            echo \
"&gt;&gt;&gt;&gt;&gt;&gt; Making embedded key for loop$k  \
&lt;&lt;&lt;&lt;&lt;&lt;"&lt;br&gt;         \
        echo "Enter new password at three prompts \
.."&lt;br&gt;                 \
yes "" | dd of=${PREVIOUSLOOP} bs=512 count=16&lt;br&gt;     \
            makekey | dd \
of=${PREVIOUSLOOP} conv=notrunc&lt;br&gt;         \
    fi&lt;br&gt;              \
echo "Setting up loop$k .."&lt;br&gt;         \
    losetup -e ${CIPHER[k]} -K ${PREVIOUSLOOP} -o 8192 -G ${GPGHOME} \
${TOPLOOP} ${PREVIOUSLOOP} || pull_down 1&lt;br&gt; &lt;br&gt;     \
    fi&lt;br&gt;     else&lt;br&gt;     \
    if [ ! -e "${key[k]}" ]; then&lt;br&gt;     \
        echo "Can't find key no. $k ${key[k]}"&lt;br&gt;  \
            pull_down 1&lt;br&gt; \
        fi&lt;br&gt;         \
echo "Setting up loop$k .."&lt;br&gt;         losetup -e \
${CIPHER[k]} -K ${key[k]} -G ${GPGHOME} ${TOPLOOP} ${D} || pull_down 1&lt;br&gt; \
    fi&lt;br&gt; done&lt;br&gt; &lt;br&gt; }&lt;br&gt; &lt;br&gt; #=====================// MAIN \
//==================================&lt;br&gt; &lt;br&gt; [ -f "${HOME}/.triplrc" ] &amp;&amp; .  \
${HOME}/.triplrc&lt;br&gt; &lt;br&gt; run_checks $*&lt;br&gt; &lt;br&gt; case $1 in&lt;br&gt; &lt;br&gt; -new)&lt;br&gt; \
echo&lt;br&gt; echo "WARNING: this will destroy all data on $DEVICE !"&lt;br&gt; echo \
"~~~~~~~"&lt;br&gt; &lt;br&gt; while true; do&lt;br&gt;     echo -n "Last chance to \
exit. Are you sure you want to proceed? (YeS/n) "&lt;br&gt;     read&lt;br&gt; \
    case $REPLY in&lt;br&gt;         YeS) \
break ;;&lt;br&gt;         n|N|n*|N*) exit 0;;&lt;br&gt; \
         y|y*|Y|Yes|YE*) echo "You must type YeS to \
proceed.";;&lt;br&gt;         *) echo "Invalid \
response.";;&lt;br&gt;     esac&lt;br&gt; done&lt;br&gt; echo "Shredding ${DEVICE} .. \
pls wait .."&lt;br&gt; shred -n 1 ${DEVICE}&lt;br&gt; setup_loops new&lt;br&gt; echo&lt;br&gt; echo \
"&gt;&gt;&gt;&gt;&gt;&gt; Making filesystem &lt;&lt;&lt;&lt;&lt;&lt;"&lt;br&gt; mkfs -t \
ext2 ${TOPLOOP}&lt;br&gt; pull_down 0 ;;&lt;br&gt; &lt;br&gt; &lt;br&gt; -m)&lt;br&gt; if grep -q "${MOUNTPT}" \
/etc/mtab; then echo "${MOUNTPT} in  use."; exit 1; fi&lt;br&gt; setup_loops&lt;br&gt; mount -t \
ext2 ${TOPLOOP} ${MOUNTPT}&lt;br&gt; if grep -q "${TOPLOOP}" /etc/mtab; then echo "OK"; \
else pull_down 1; fi ;;&lt;br&gt; &lt;br&gt; -u) &lt;br&gt; pull_down 0 ;;&lt;br&gt; &lt;br&gt; -mkkey)&lt;br&gt; while \
true; do&lt;br&gt;     echo -n "Enter path and filename of new key (CNTRL-C \
= quit): "&lt;br&gt;     read&lt;br&gt;     DIR=$(dirname \
${REPLY})&lt;br&gt;     if [ -e "${REPLY}" ]; then&lt;br&gt;     \
    echo "File $REPLY  already exists."; continue&lt;br&gt; \
    fi&lt;br&gt;     if [ ! -d "${DIR}" ]; then&lt;br&gt; \
        echo "Invalid path ${DIR}" ; continue&lt;br&gt; \
    fi&lt;br&gt;     if [ ! -w "${DIR}" ]; then&lt;br&gt; \
        echo "${DIR} not writeable" ; continue&lt;br&gt; \
    fi&lt;br&gt;     break&lt;br&gt; done&lt;br&gt; echo "Making key \
${REPLY} .."&lt;br&gt; makekey &gt;${REPLY}&lt;br&gt; if [ $? -eq 0 ]; then&lt;br&gt;  \
    echo "Done."&lt;br&gt;     echo "Set your new key \
location at top of the script."&lt;br&gt; else&lt;br&gt;     rm -f ${REPLY} # gpg \
will provide error messages if it fails.&lt;br&gt;     exit 1&lt;br&gt; fi ;;&lt;br&gt; \
&lt;br&gt; &lt;br&gt; -fix)&lt;br&gt; if losetup -a | grep -q ${DEVICE} ; then&lt;br&gt;     \
echo "${DEVICE} in use."&lt;br&gt;     exit 1&lt;br&gt; fi&lt;br&gt; setup_loops&lt;br&gt; \
fsck -t ext2 -C -f -y ${TOPLOOP}&lt;br&gt; echo "Done."&lt;br&gt; pull_down 0;;&lt;br&gt; &lt;br&gt;  &lt;br&gt; \
-h) help ;;&lt;br&gt; &lt;br&gt; *) &lt;br&gt; echo "Unknown option $1. Try tripl -h"; exit 1 ;;&lt;br&gt; \
&lt;br&gt; esac&lt;br&gt; &lt;br&gt; exit 0&lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt; &lt;br&gt;&lt;div&gt;   &lt;/div&gt;&lt;hr size="1"&gt;8:00? \
8:25? 8:40? &lt;a href="http://tools.search.yahoo.com/shortcuts/?fr=oni_on_mail&amp;#news"&gt; \
Find a flick&lt;/a&gt; in no time&lt;br&gt; with the&lt;a \
href="http://tools.search.yahoo.com/shortcuts/?fr=oni_on_mail&amp;#news"&gt;Yahoo! \
Search movie showtime shortcut.&lt;/a&gt;&lt;/blockquote&gt;&lt;br&gt;&lt;p&gt; 

&lt;hr size=1&gt;Never Miss an Email&lt;br&gt;Stay connected with Yahoo! Mail on your mobile. &lt;a \
href="http://us.rd.yahoo.com/evt=43909/*http://mobile.yahoo.com/services?promote=mail"&gt;Get \
started!&lt;/a&gt;


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070226185117</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-02-26 18:51:17-0400</timestampReceived><subject>Re: Announce loop-AES-v3.1f file/swap crypto package</subject><body>

Alon Bar-Lev wrote:
&gt; On 2/23/07, Jari Ruusu &lt;jariruusu@users.sourceforge.net&gt; wrote:
&gt; &gt; - Added loop-aes-keygen script from Max Vozeler.
&gt; 
&gt; Can you please add this to the Makefile so in next version we can do
&gt; something like:
&gt; Make utils_install DESTDIR=/tmp/xxxx
&gt; 
&gt; So that if you add new man pages or utilities it will be automatically
&gt; be installed by package management?

Please send me a patch.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070227024613</emailId><senderName>"Crystal-Elecsound"</senderName><senderEmail>exportcomponent@gmail.com</senderEmail><timestampReceived>2007-02-27 02:46:13-0400</timestampReceived><subject>Offer Electronic Components</subject><body>

[Attachment #2 (text/plain)]


Hi dear Sir/Lady,

Nice day to you! I'm glad to contact with you for Electronic Components business.

If you are looking for Electronic components, Our company will be your best choice. \
We strongly offer : Cermet Trimming Potentiometer, All kinds of Capacitors,   LEDs, \
Zinc  OXIDE VARISTORS,  Resistors, Fuse and PCB. Pls also check below:  PCB  We offer \
Single, double-side, 4 layer to 8 layers.

Varistor:  We offer |5mm |7mm |10mm |14mm |20mm Zinc oxide varistor 

Cermet Trimming Potentiometers----HOT OFFER 
&gt; 3006| 3262| 3266| 3296| 3299| 3323| 3386|   

Capacitors 
Tantalum Capacitors--Dipped and SMD
Ceramic capacitors--Radial SMD--Axial 
Polyester Film Capacitors--Mylar and Metallized 
Aluminum Electrolytic Capacitor---Radial--SMD--Axial 

LED series   
5mm With Round Type LED
5mm Bullet LED
3mm Round LED
3mm Cylindrical LED
3mm Oval LED  
SMD type LED 

If you need more info of our products, Pls feel free to contact with me, I'd like \
offer any info about our offer.

Best regards
Ms Crystal


[Attachment #3 (text/html)]

&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"&gt;
&lt;HTML&gt;&lt;HEAD&gt;
&lt;META http-equiv=Content-Type content="text/html; charset=gb2312"&gt;
&lt;META content="MSHTML 6.00.2900.2963" name=GENERATOR&gt;
&lt;STYLE&gt;&lt;/STYLE&gt;
&lt;/HEAD&gt;
&lt;BODY bgColor=#ffffff&gt;
&lt;DIV&gt; &lt;/DIV&gt;
&lt;DIV&gt;
&lt;DIV&gt;&lt;FONT face=ËÎÌå size=2&gt;
&lt;DIV&gt;
&lt;DIV&gt;&lt;FONT face=Arial&gt;&lt;STRONG&gt;Hi dear Sir/Lady,&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/DIV&gt;
&lt;DIV&gt; &lt;/DIV&gt;&lt;/FONT&gt;&lt;FONT face=Arial size=2&gt;
&lt;DIV&gt;&lt;STRONG&gt;Nice day to you! I'm glad to contact with you for&lt;U&gt; 
&lt;/U&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;STRONG&gt;&lt;U&gt;&lt;FONT face=Arial color=#0000ff&gt;Electronic 
Components&lt;/FONT&gt;&lt;/U&gt;&lt;FONT face=Arial size=2&gt;&lt;FONT color=#ffff00&gt; 
&lt;/FONT&gt;business.&lt;/FONT&gt;&lt;/STRONG&gt;&lt;FONT face=Arial size=2&gt;&lt;/DIV&gt;&lt;/FONT&gt;&lt;FONT 
face=ËÎÌå size=2&gt;
&lt;DIV&gt; &lt;/DIV&gt;
&lt;DIV&gt;&lt;FONT face=Arial size=2&gt;&lt;STRONG&gt;If you are looking for Electronic 
components, Our company will be your best choice. We strongly offer :&lt;SPAN 
style="BACKGROUND-COLOR: #ffffff"&gt;&lt;FONT face=Verdana size=3&gt; &lt;/FONT&gt;&lt;U&gt;&lt;FONT 
color=#0000ff&gt;Cermet Trimming Potentiometer, All kinds of 
Capacitors,   LEDs, Zinc  OXIDE VARISTORS,  
Resistors, Fuse and PCB&lt;/FONT&gt;&lt;/U&gt;&lt;/SPAN&gt;&lt;U&gt;.&lt;/U&gt; Pls also check 
below:&lt;/STRONG&gt; 
&lt;P&gt;&lt;/FONT&gt;&lt;/FONT&gt;&lt;STRONG&gt;&lt;FONT face=ËÎÌå color=#0000ff&gt;&lt;U&gt;PCB&lt;/U&gt;&lt;/FONT&gt;&lt;FONT 
face=Arial size=2&gt;&lt;FONT color=#0000ff&gt; &lt;/FONT&gt; &lt;U&gt;We offer Single, 
double-side, 4 layer to 8 layers.&lt;/U&gt;&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/P&gt;
&lt;P&gt;&lt;STRONG&gt;&lt;FONT face=Arial color=#0000ff&gt;Varistor&lt;/FONT&gt;&lt;FONT face=Arial 
size=2&gt;:  &lt;U&gt;We offer |&lt;/U&gt;&lt;/FONT&gt;&lt;/STRONG&gt;&lt;FONT face=Arial size=2&gt;&lt;FONT 
color=blue&gt;&lt;SPAN style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: Arial"&gt;&lt;FONT 
face="Arial, Helvetica, sans-serif" color=#000000 size=2&gt;&lt;STRONG&gt;&lt;U&gt;5mm 
&lt;/U&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;U&gt;&lt;STRONG&gt;|7mm |10mm |14mm |20mm 
&lt;/STRONG&gt;&lt;/U&gt;&lt;FONT color=blue&gt;&lt;SPAN 
style="FONT-SIZE: 12pt; COLOR: blue; FONT-FAMILY: Arial"&gt;&lt;FONT 
face="Arial, Helvetica, sans-serif" color=#000000 size=2&gt;&lt;STRONG&gt;&lt;U&gt;Zinc oxide 
varistor &lt;/U&gt;&lt;/STRONG&gt;&lt;/FONT&gt;&lt;/SPAN&gt;&lt;/FONT&gt;&lt;/P&gt;
&lt;DIV&gt;&lt;U&gt;&lt;STRONG&gt;Cermet&lt;FONT color=#0000ff&gt; 
&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/U&gt;&lt;/FONT&gt;&lt;U&gt;&lt;STRONG&gt;&lt;FONT face=Arial color=#0000ff&gt;Trimming 
Potentiometers&lt;/FONT&gt;&lt;FONT face=Arial size=2&gt;----&lt;FONT color=#ff0000&gt;HOT 
OFFER&lt;/FONT&gt;&lt;/FONT&gt;&lt;/STRONG&gt;&lt;/U&gt;&lt;STRONG&gt;&lt;FONT face=Arial color=#ff0000 size=2&gt; 
&lt;/FONT&gt;&lt;/STRONG&gt;&lt;FONT face=Arial size=2&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;STRONG&gt;| 3006| 3262| 3266| 3296| 3299| 3323| 3386|   
&lt;/STRONG&gt;&lt;/DIV&gt;
&lt;DIV&gt; &lt;/DIV&gt;&lt;/FONT&gt;&lt;FONT face=ËÎÌå&gt;
&lt;DIV&gt;&lt;/FONT&gt;&lt;STRONG&gt;&lt;FONT face=Arial color=#0000ff&gt;&lt;U&gt;Capacitors&lt;/U&gt; 
&lt;/FONT&gt;&lt;FONT face=Arial size=2&gt;&lt;BR&gt;Tantalum Capacitors--Dipped and 
SMD&lt;BR&gt;Ceramic capacitors--Radial SMD--Axial &lt;BR&gt;Polyester Film 
Capacitors--Mylar and Metallized &lt;BR&gt;Aluminum Electrolytic 
Capacitor---Radial--SMD--Axial &lt;/FONT&gt;&lt;/STRONG&gt;&lt;FONT face=Arial size=2&gt;&lt;/DIV&gt;
&lt;DIV&gt; &lt;/DIV&gt;&lt;/FONT&gt;&lt;FONT face=ËÎÌå&gt;
&lt;DIV&gt;&lt;/FONT&gt;&lt;STRONG&gt;&lt;FONT face=Arial&gt;&lt;FONT color=#0000ff&gt;&lt;U&gt;LED 
series&lt;/U&gt;&lt;/FONT&gt;  &lt;/FONT&gt;&lt;FONT face=Arial size=2&gt; &lt;/FONT&gt;&lt;/STRONG&gt;&lt;FONT 
face=ËÎÌå size=2&gt;&lt;FONT face=Arial size=2&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;STRONG&gt;5mm With Round Type LED&lt;BR&gt;5mm Bullet LED&lt;BR&gt;3mm Round LED&lt;BR&gt;3mm 
Cylindrical LED&lt;BR&gt;3mm Oval LED  &lt;/STRONG&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;STRONG&gt;SMD type LED &lt;/STRONG&gt;
&lt;DIV&gt;
&lt;DIV&gt;
&lt;DIV&gt; &lt;/DIV&gt;
&lt;DIV&gt;&lt;STRONG&gt;If you need more info of our products, Pls feel free to contact 
with me, I'd like offer any info about our offer.&lt;/STRONG&gt;&lt;/DIV&gt;
&lt;DIV&gt; &lt;/DIV&gt;
&lt;DIV&gt;&lt;STRONG&gt;Best regards&lt;/STRONG&gt;&lt;/DIV&gt;
&lt;DIV&gt;&lt;STRONG&gt;Ms 
Crystal&lt;/STRONG&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;/FONT&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/DIV&gt;&lt;/BODY&gt;&lt;/HTML&gt;

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070228164925</emailId><senderName>Max Vozeler</senderName><senderEmail>max@nusquama.org</senderEmail><timestampReceived>2007-02-28 16:49:25-0400</timestampReceived><subject>Re: Merging ciphers into loop-AES</subject><body>

Hi Jari,

On Mon, Feb 26, 2007 at 08:52:01PM +0200, Jari Ruusu wrote:
&gt; There are cases where people are using kernel patch version of
&gt; loop-AES, and build and install those extra cipher modules without
&gt; building loop-AES module. So there is some need of ciphers package
&gt; staying as separate package.

I've been thinking about this a bit. Do you think this could - in
principle - be solved by changes to the build system?

 a) Adding a "ciphers" build target for building (and installing)
    just the cipher modules, skipping loop.$(VM1)o, be a workable
    approach? I've hacked together a proof-of-concept patch to that
    effect; Note that it is quite surely not working as-is, it is
    merely an illustration and meant as basis for discussion. 

 b) Alternatively, although not clean, maybe the extra unneeded
    loop.$(VM1)o could still be built and installed; If I see it
    correctly, it should do no harm then. I admit that this is not
    a nice solution, but it might(?) be reasonable if patch+ciphers
    is only seldom used. Just thinking aloud..

If the basic idea is reasonable to you, I would like to try and 
work on a solution. If not, no problem, either :-)

&gt; Would it help if loop-AES Makefile detects presence of additional
&gt; loop_xxxx.c source files is its base directory, and compiles and
&gt; installs them all together? Your maintenance "work" would involve
&gt; making sure that all source files are in same directory.

Yes, I think that would already help a bit.

The main point remains though: It is a bit awkward to combine into 
one package what is intended and managed as two separate packages
upstream.  This is no big problem in practice, and the current Debian
packaging can work with it. It's just that having the two combined
would make things a fair bit cleaner and simpler for our distribution
purpose, so I'd be happy to help make it happen :-)

cheers,
Max

["ciphers.diff" (text/x-diff)]

=== loop-AES-v3.1f/Makefile
==================================================================
--- Makefile	(revision 1413)
+++ Makefile	(local)
@@ -186,12 +186,15 @@
 endif
 endif
 
+MLIST:=loop.$(VM1)o loop_twofish.$(VM1)o loop_serpent.$(VM1)o loop_blowfish.$(VM1)o
+
 all:
 ifeq ($(LS),unable-to-guess-source-dir)
 	@echo "Unable to guess linux kernel source directory. Please specify"
 	@echo "directory like this:  make LINUX_SOURCE=/usr/src/linux-2.2.20aa1"
 	@exit 1
 endif
+ifneq ($(CIPHERS_ONLY),y)
 ifeq ($(USE_KBUILD),y)
 	rm -r -f tmp-d-kbuild
 	mkdir tmp-d-kbuild
@@ -209,20 +212,28 @@
 	echo 'CFLAGS_aes.o := -DDATA_ALWAYS_ALIGNED=1' &gt;&gt;tmp-d-kbuild/Makefile
 endif
 endif
+	echo 'obj-m:=loop.o' &gt;&gt;tmp-d-kbuild/Makefile
+endif
+	cd tmp-d-kbuild &amp;&amp; ln -s ../loop_twofish.c loop_twofish.c &amp;&amp; ln -s \
../loop_serpent.c loop_serpent.c &amp;&amp; ln -s ../loop_blowfish.c loop_blowfish.c +	echo \
'obj-m:=loop_twofish.o loop_serpent.o loop_blowfish.o' &gt;&gt;tmp-d-kbuild/Makefile  echo \
                'EXTRA_CFLAGS:= $(EF)' &gt;&gt;tmp-d-kbuild/Makefile
-	echo 'obj-m:=loop.o' &gt;&gt;tmp-d-kbuild/Makefile
-	cd $(LS) &amp;&amp; make M=$(TD)/tmp-d-kbuild modules $(OD2)
+	cd $(LS) &amp;&amp; make M=$(TD)/tmp-d-kbuild modules $(OD2) MLIST=$(MLIST)
 ifeq ($(MODINST),y)
-	cd $(LS) &amp;&amp; make M=$(TD)/tmp-d-kbuild modules_install $(OD2)
+	cd $(LS) &amp;&amp; make M=$(TD)/tmp-d-kbuild modules_install $(OD2) MLIST=$(MLIST)
 endif
 else
-	cd $(LS) &amp;&amp; make SUBDIRS=$(TD) modules Q='@cd $(TD) &amp;&amp; if [ "$$@" = "modules" ]; \
then make modules; fi; exit; # ' $(OD2) +	cd $(LS) &amp;&amp; make SUBDIRS=$(TD) modules \
Q='@cd $(TD) &amp;&amp; if [ "$$@" = "modules" ]; then make modules; fi; exit; # ' $(OD2) \
MLIST=$(MLIST)  endif
 
-modules: clean loop.$(VM1)o
+CIPHERS_ONLY:=n
+ciphers: MLIST:=$(filter-out loop.$(VM1)o,$(MLIST))
+ciphers: CIPHERS_ONLY:=y
+ciphers: all
+
+modules: clean $(MLIST)
 ifeq ($(MODINST),y)
 	mkdir -p $(INSTALL_MOD_PATH)/lib/modules/$(KERNELRELEASE_clean)/block
-	cp -p loop.$(VM1)o $(INSTALL_MOD_PATH)/lib/modules/$(KERNELRELEASE_clean)/block
+	cp -p $(MLIST) $(INSTALL_MOD_PATH)/lib/modules/$(KERNELRELEASE_clean)/block
 ifeq ($(shell if [ "$(VERSION)$(PATCHLEVEL)0" -ge 240 ]; then echo y; fi),y)
 	rm -f $(INSTALL_MOD_PATH)/lib/modules/$(KERNELRELEASE_clean)/kernel/drivers/block/loop.{,k}o
  endif
@@ -271,6 +282,33 @@
 md5-amd64.o: md5-amd64.S
 	$(CP1) $(CC) $(AFLAGS) -c $(PP1)md5-amd64.S -o $(PP1)md5-amd64.o
 
+loop_twofish.$(VM1)o: loop_twofish.c
+	$(CP1) $(CC) $(CFLAGS) $(EF) -D"KBUILD_BASENAME=KBUILD_STR(loop_twofish)" \
-D"KBUILD_MODNAME=KBUILD_STR(loop_twofish)" -c $(PP1)loop_twofish.c -o \
$(PP1)loop_twofish.o +ifneq "$(VM1)" ""
+	$(CP1) $(MP1) vmlinux $(PP1)loop_twofish.o loop.$(VM1)o &gt;/dev/null 2&gt;&amp;1
+	$(CP1) $(CC) $(CFLAGS) $(EF) -D"KBUILD_BASENAME=KBUILD_STR(loop_twofish_mod)" \
-D"KBUILD_MODNAME=KBUILD_STR(loop_twofish)" -c $(PP1)loop_twofish.mod.c -o \
$(PP1)loop_twofish.mod.o +	$(LD) $(LF) loop_twofish.o loop_twofish.mod.o -o \
loop_twofish.$(VM1)o +	rm -f loop_twofish.o loop_twofish.mod.[co] \
loop.$(VM1)o.mod.[co] +endif
+
+loop_serpent.$(VM1)o: loop_serpent.c
+	$(CP1) $(CC) $(CFLAGS) $(EF) -D"KBUILD_BASENAME=KBUILD_STR(loop_serpent)" \
-D"KBUILD_MODNAME=KBUILD_STR(loop_serpent)" -c $(PP1)loop_serpent.c -o \
$(PP1)loop_serpent.o +ifneq "$(VM1)" ""
+	$(CP1) $(MP1) vmlinux $(PP1)loop_serpent.o loop.$(VM1)o &gt;/dev/null 2&gt;&amp;1
+	$(CP1) $(CC) $(CFLAGS) $(EF) -D"KBUILD_BASENAME=KBUILD_STR(loop_serpent_mod)" \
-D"KBUILD_MODNAME=KBUILD_STR(loop_serpent)" -c $(PP1)loop_serpent.mod.c -o \
$(PP1)loop_serpent.mod.o +	$(LD) $(LF) loop_serpent.o loop_serpent.mod.o -o \
loop_serpent.$(VM1)o +	rm -f loop_serpent.o loop_serpent.mod.[co] \
loop.$(VM1)o.mod.[co] +endif
+
+loop_blowfish.$(VM1)o: loop_blowfish.c
+	$(CP1) $(CC) $(CFLAGS) $(EF) -D"KBUILD_BASENAME=KBUILD_STR(loop_blowfish)" \
-D"KBUILD_MODNAME=KBUILD_STR(loop_blowfish)" -c $(PP1)loop_blowfish.c -o \
$(PP1)loop_blowfish.o +ifneq "$(VM1)" ""
+	$(CP1) $(MP1) vmlinux $(PP1)loop_blowfish.o loop.$(VM1)o &gt;/dev/null 2&gt;&amp;1
+	$(CP1) $(CC) $(CFLAGS) $(EF) -D"KBUILD_BASENAME=KBUILD_STR(loop_blowfish_mod)" \
-D"KBUILD_MODNAME=KBUILD_STR(loop_blowfish)" -c $(PP1)loop_blowfish.mod.c -o \
$(PP1)loop_blowfish.mod.o +	$(LD) $(LF) loop_blowfish.o loop_blowfish.mod.o -o \
loop_blowfish.$(VM1)o +	rm -f loop_blowfish.o loop_blowfish.mod.[co] \
loop.$(VM1)o.mod.[co] +endif
+
 clean:
 	rm -f *.o *.ko *.orig *.rej *.mod.c patched-loop.[ch] test-file[1234]
 	rm -f -r test-dir1 tmp-d-kbuild


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070228191324</emailId><senderName>Richard Purdie</senderName><senderEmail>rpurdie@openedhand.com</senderEmail><timestampReceived>2007-02-28 19:13:24-0400</timestampReceived><subject>[PATCH 1/5] Add LZO compression support to the kernel</subject><body>

Add LZO1X compression/decompression support to the kernel.

This is based on the standard userspace lzo library, particularly 
minilzo with the headers much trimmed down and simplified for kernel
use. Its structured so that it should still diff with the userspace
version for ease of future updating.

Signed-off-by: Richard Purdie &lt;rpurdie@openedhand.com&gt;

---
 include/linux/lzo.h |   63 +
 lib/Kconfig         |    5 
 lib/Makefile        |    1 
 lib/lzo/Makefile    |    3 
 lib/lzo/lzoconf.h   |  186 +++++
 lib/lzo/lzodefs.h   |  463 +++++++++++++
 lib/lzo/lzointf.c   |   37 +
 lib/lzo/minilzo.c   | 1771
++++++++++++++++++++++++++++++++++++++++++++++++++++
 8 files changed, 2529 insertions(+)

http://folks.o-hand.com/richard/lzo/lzo_kernel.patch
(since it exceeds the file size limit for LKML)

I can email inline if anyone prefers it that way.

-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070228191332</emailId><senderName>Richard Purdie</senderName><senderEmail>rpurdie@openedhand.com</senderEmail><timestampReceived>2007-02-28 19:13:32-0400</timestampReceived><subject>[PATCH 2/5] jffs2: Add LZO compression support to jffs2</subject><body>

Add LZO1X compression/decompression support to jffs2.

LZO's interface doesn't entirely match that required by jffs2 so a 
buffer and memcpy is unavoidable.

Signed-off-by: Richard Purdie &lt;rpurdie@openedhand.com&gt;

---
 fs/Kconfig            |   10 ++++
 fs/jffs2/Makefile     |    1 
 fs/jffs2/compr.c      |    6 ++
 fs/jffs2/compr.h      |    3 -
 fs/jffs2/compr_lzo.c  |  120 ++++++++++++++++++++++++++++++++++++++++++++++++++
 include/linux/jffs2.h |    1 
 6 files changed, 140 insertions(+), 1 deletion(-)

Index: linux/fs/Kconfig
===================================================================
--- linux.orig/fs/Kconfig	2007-02-28 18:12:17.000000000 +0000
+++ linux/fs/Kconfig	2007-02-28 18:13:10.000000000 +0000
@@ -1310,6 +1310,16 @@ config JFFS2_ZLIB
 
           Say 'Y' if unsure.
 
+config JFFS2_LZO
+	bool "JFFS2 LZO compression support" if JFFS2_COMPRESSION_OPTIONS
+	select LZO
+	depends on JFFS2_FS
+	default y
+        help
+          minilzo-based compression. Generally works better than Zlib.
+
+          Say 'Y' if unsure.
+
 config JFFS2_RTIME
 	bool "JFFS2 RTIME compression support" if JFFS2_COMPRESSION_OPTIONS
 	depends on JFFS2_FS
Index: linux/fs/jffs2/Makefile
===================================================================
--- linux.orig/fs/jffs2/Makefile	2007-02-28 18:12:17.000000000 +0000
+++ linux/fs/jffs2/Makefile	2007-02-28 18:12:31.000000000 +0000
@@ -18,4 +18,5 @@ jffs2-$(CONFIG_JFFS2_FS_POSIX_ACL)	+= ac
 jffs2-$(CONFIG_JFFS2_RUBIN)	+= compr_rubin.o
 jffs2-$(CONFIG_JFFS2_RTIME)	+= compr_rtime.o
 jffs2-$(CONFIG_JFFS2_ZLIB)	+= compr_zlib.o
+jffs2-$(CONFIG_JFFS2_LZO)	+= compr_lzo.o
 jffs2-$(CONFIG_JFFS2_SUMMARY)   += summary.o
Index: linux/fs/jffs2/compr.c
===================================================================
--- linux.orig/fs/jffs2/compr.c	2007-02-28 18:12:17.000000000 +0000
+++ linux/fs/jffs2/compr.c	2007-02-28 18:13:10.000000000 +0000
@@ -425,6 +425,9 @@ int __init jffs2_compressors_init(void)
         jffs2_rubinmips_init();
         jffs2_dynrubin_init();
 #endif
+#ifdef CONFIG_JFFS2_LZO
+        jffs2_lzo_init();
+#endif
 /* Setting default compression mode */
 #ifdef CONFIG_JFFS2_CMODE_NONE
         jffs2_compression_mode = JFFS2_COMPR_MODE_NONE;
@@ -443,6 +446,9 @@ int __init jffs2_compressors_init(void)
 int jffs2_compressors_exit(void)
 {
 /* Unregistering compressors */
+#ifdef CONFIG_JFFS2_LZO
+        jffs2_lzo_exit();
+#endif
 #ifdef CONFIG_JFFS2_RUBIN
         jffs2_dynrubin_exit();
         jffs2_rubinmips_exit();
Index: linux/fs/jffs2/compr_lzo.c
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ linux/fs/jffs2/compr_lzo.c	2007-02-28 18:12:31.000000000 +0000
@@ -0,0 +1,120 @@
+/*
+ * JFFS2 LZO Compression Interface
+ *
+ * Copyright (C) 2007 Nokia Corporation. All rights reserved.
+ *
+ * Author: Richard Purdie &lt;rpurdie@openedhand.com&gt;
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * version 2 as published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful, but
+ * WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA
+ * 02110-1301 USA
+ *
+ */
+
+#include &lt;linux/kernel.h&gt;
+#include &lt;linux/sched.h&gt;
+#include &lt;linux/slab.h&gt;
+#include &lt;linux/vmalloc.h&gt;
+#include &lt;linux/init.h&gt;
+#include &lt;linux/lzo.h&gt;
+#include "compr.h"
+
+static void *lzo_mem;
+static void *lzo_compress_buf;
+static DEFINE_MUTEX(deflate_mutex);
+
+static void free_workspace(void)
+{
+	vfree(lzo_mem);
+	vfree(lzo_compress_buf);
+}
+
+static int __init alloc_workspace(void)
+{
+	lzo_mem = vmalloc(LZO1X_MEM_COMPRESS);
+	lzo_compress_buf = vmalloc(lzo1x_worst_compress(PAGE_SIZE));
+
+	if (!lzo_mem || !lzo_compress_buf) {
+		printk(KERN_WARNING "Failed to allocate lzo deflate workspace\n");
+		free_workspace();
+		return -ENOMEM;
+	}
+
+	return 0;
+}
+
+static int jffs2_lzo_compress(unsigned char *data_in, unsigned char *cpage_out,
+			      uint32_t *sourcelen, uint32_t *dstlen, void *model)
+{
+	unsigned long compress_size;
+	int ret;
+
+	mutex_lock(&amp;deflate_mutex);
+	ret = lzo1x_1_compress(data_in, *sourcelen, lzo_compress_buf, &amp;compress_size, lzo_mem);
+	mutex_unlock(&amp;deflate_mutex);
+
+	if (ret != LZO_E_OK)
+		return -1;
+
+	if (compress_size &gt; *dstlen)
+		return -1;
+
+	memcpy(cpage_out, lzo_compress_buf, compress_size);
+	*dstlen = compress_size;
+
+	return 0;
+}
+
+static int jffs2_lzo_decompress(unsigned char *data_in, unsigned char *cpage_out,
+				 uint32_t srclen, uint32_t destlen, void *model)
+{
+	unsigned long dl = destlen;
+	int ret;
+
+	ret = lzo1x_decompress_safe(data_in, srclen, cpage_out, &amp;dl, NULL);
+
+	if (ret != LZO_E_OK || dl != destlen)
+		return -1;
+
+	return 0;
+}
+
+static struct jffs2_compressor jffs2_lzo_comp = {
+	.priority = JFFS2_LZO_PRIORITY,
+	.name = "lzo",
+	.compr = JFFS2_COMPR_LZO,
+	.compress = &amp;jffs2_lzo_compress,
+	.decompress = &amp;jffs2_lzo_decompress,
+	.disabled = 0,
+};
+
+int __init jffs2_lzo_init(void)
+{
+	int ret;
+
+	ret = alloc_workspace();
+	if (ret &lt; 0)
+		return ret;
+
+	ret = jffs2_register_compressor(&amp;jffs2_lzo_comp);
+	if (ret)
+		free_workspace();
+
+	return ret;
+}
+
+void jffs2_lzo_exit(void)
+{
+	jffs2_unregister_compressor(&amp;jffs2_lzo_comp);
+	free_workspace();
+}
Index: linux/include/linux/jffs2.h
===================================================================
--- linux.orig/include/linux/jffs2.h	2007-02-28 18:12:17.000000000 +0000
+++ linux/include/linux/jffs2.h	2007-02-28 18:12:31.000000000 +0000
@@ -46,6 +46,7 @@
 #define JFFS2_COMPR_COPY	0x04
 #define JFFS2_COMPR_DYNRUBIN	0x05
 #define JFFS2_COMPR_ZLIB	0x06
+#define JFFS2_COMPR_LZO		0x07
 /* Compatibility flags. */
 #define JFFS2_COMPAT_MASK 0xc000      /* What do to if an unknown nodetype is found */
 #define JFFS2_NODE_ACCURATE 0x2000
Index: linux/fs/jffs2/compr.h
===================================================================
--- linux.orig/fs/jffs2/compr.h	2007-02-28 18:12:17.000000000 +0000
+++ linux/fs/jffs2/compr.h	2007-02-28 18:13:10.000000000 +0000
@@ -30,9 +30,10 @@
 #define JFFS2_RUBINMIPS_PRIORITY 10
 #define JFFS2_DYNRUBIN_PRIORITY  20
 #define JFFS2_LZARI_PRIORITY     30
-#define JFFS2_LZO_PRIORITY       40
 #define JFFS2_RTIME_PRIORITY     50
 #define JFFS2_ZLIB_PRIORITY      60
+#define JFFS2_LZO_PRIORITY       80
+
 
 #define JFFS2_RUBINMIPS_DISABLED /* RUBINs will be used only */
 #define JFFS2_DYNRUBIN_DISABLED  /*        for decompression */


-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070228191340</emailId><senderName>Richard Purdie</senderName><senderEmail>rpurdie@openedhand.com</senderEmail><timestampReceived>2007-02-28 19:13:40-0400</timestampReceived><subject>[PATCH 3/5] crypto: Add LZO compression support to the crypto</subject><body>

Add LZO1X compression support to the crypto interface, including
a couple of tests.

Also convert test_deflate into a more generic test_compress() and
avoid duplicating the data for compression and decompression tests
since this can always work both ways in the compression case.

Signed-off-by: Richard Purdie &lt;rpurdie@openedhand.com&gt;

---
 crypto/Kconfig  |    8 +++
 crypto/Makefile |    1 
 crypto/lzo.c    |  120 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 crypto/tcrypt.c |   43 ++++++++------------
 crypto/tcrypt.h |   75 +++++++++++++++++++----------------
 5 files changed, 190 insertions(+), 57 deletions(-)

Index: linux/crypto/Kconfig
===================================================================
--- linux.orig/crypto/Kconfig	2007-02-28 18:12:17.000000000 +0000
+++ linux/crypto/Kconfig	2007-02-28 18:12:32.000000000 +0000
@@ -406,6 +406,14 @@ config CRYPTO_DEFLATE
 	  
 	  You will most probably want this if using IPSec.
 
+config CRYPTO_LZO
+	tristate "LZO compression algorithm"
+	depends on CRYPTO
+	select LZO
+	help
+	  Enable use of the LZO compression algorithm through the crypto
+	  subsystem.
+
 config CRYPTO_MICHAEL_MIC
 	tristate "Michael MIC keyed digest algorithm"
 	select CRYPTO_ALGAPI
Index: linux/crypto/Makefile
===================================================================
--- linux.orig/crypto/Makefile	2007-02-28 18:12:17.000000000 +0000
+++ linux/crypto/Makefile	2007-02-28 18:12:32.000000000 +0000
@@ -44,6 +44,7 @@ obj-$(CONFIG_CRYPTO_TEA) += tea.o
 obj-$(CONFIG_CRYPTO_KHAZAD) += khazad.o
 obj-$(CONFIG_CRYPTO_ANUBIS) += anubis.o
 obj-$(CONFIG_CRYPTO_DEFLATE) += deflate.o
+obj-$(CONFIG_CRYPTO_LZO) += lzo.o
 obj-$(CONFIG_CRYPTO_MICHAEL_MIC) += michael_mic.o
 obj-$(CONFIG_CRYPTO_CRC32C) += crc32c.o
 
Index: linux/crypto/lzo.c
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ linux/crypto/lzo.c	2007-02-28 18:12:32.000000000 +0000
@@ -0,0 +1,120 @@
+/*
+ * Cryptographic API for LZO compression.
+ *
+ * Copyright (C) 2007 Nokia Corporation. All rights reserved.
+ *
+ * Author: Richard Purdie &lt;rpurdie@openedhand.com&gt;
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License
+ * version 2 as published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful, but
+ * WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA
+ * 02110-1301 USA
+ *
+ */
+
+#include &lt;linux/init.h&gt;
+#include &lt;linux/module.h&gt;
+#include &lt;linux/crypto.h&gt;
+#include &lt;linux/vmalloc.h&gt;
+#include &lt;linux/interrupt.h&gt;
+#include &lt;linux/mm.h&gt;
+#include &lt;linux/lzo.h&gt;
+
+struct lzo_ctx {
+	void *lzo_mem;
+};
+
+static int lzo_init(struct crypto_tfm *tfm)
+{
+	struct lzo_ctx *ctx = crypto_tfm_ctx(tfm);
+
+	ctx-&gt;lzo_mem = vmalloc(LZO1X_MEM_COMPRESS);
+
+	if (!ctx-&gt;lzo_mem) {
+		vfree(ctx-&gt;lzo_mem);
+		return -ENOMEM;
+	}
+
+	return 0;
+}
+
+static void lzo_exit(struct crypto_tfm *tfm)
+{
+	struct lzo_ctx *ctx = crypto_tfm_ctx(tfm);
+
+	vfree(ctx-&gt;lzo_mem);
+}
+
+static int lzo_compress(struct crypto_tfm *tfm, const u8 *src,
+			    unsigned int slen, u8 *dst, unsigned int *dlen)
+{
+	struct lzo_ctx *ctx = crypto_tfm_ctx(tfm);
+	unsigned long compress_size;
+	int ret;
+
+	/* Check if enough space in dst buffer for worst case expansion */
+	if (*dlen &lt; lzo1x_worst_compress(slen))
+		return -EINVAL;
+
+	ret = lzo1x_1_compress(src, slen, dst, &amp;compress_size, ctx-&gt;lzo_mem);
+
+	if (ret != LZO_E_OK)
+		return -EINVAL;
+
+	*dlen = compress_size;
+
+	return 0;
+}
+
+static int lzo_decompress(struct crypto_tfm *tfm, const u8 *src,
+			      unsigned int slen, u8 *dst, unsigned int *dlen)
+{
+	int ret;
+
+	ret = lzo1x_decompress_safe(src, slen, dst, dlen, NULL);
+
+	if (ret != LZO_E_OK)
+		return -EINVAL;
+
+	return 0;
+}
+
+static struct crypto_alg alg = {
+	.cra_name		= "lzo1x",
+	.cra_flags		= CRYPTO_ALG_TYPE_COMPRESS,
+	.cra_ctxsize		= sizeof(struct lzo_ctx),
+	.cra_module		= THIS_MODULE,
+	.cra_list		= LIST_HEAD_INIT(alg.cra_list),
+	.cra_init		= lzo_init,
+	.cra_exit		= lzo_exit,
+	.cra_u			= { .compress = {
+	.coa_compress 		= lzo_compress,
+	.coa_decompress  	= lzo_decompress } }
+};
+
+static int __init init(void)
+{
+	return crypto_register_alg(&amp;alg);
+}
+
+static void __exit fini(void)
+{
+	crypto_unregister_alg(&amp;alg);
+}
+
+module_init(init);
+module_exit(fini);
+
+MODULE_LICENSE("GPL");
+MODULE_DESCRIPTION("LZO Compression Algorithm");
+MODULE_AUTHOR("Richard Purdie &lt;rpurdie@openedhand.com&gt;");
+
Index: linux/crypto/tcrypt.c
===================================================================
--- linux.orig/crypto/tcrypt.c	2007-02-28 18:12:17.000000000 +0000
+++ linux/crypto/tcrypt.c	2007-02-28 18:12:32.000000000 +0000
@@ -747,7 +747,7 @@ out:
 	crypto_free_hash(tfm);
 }
 
-static void test_deflate(void)
+static void test_compress(char *algo, struct comp_testvec *testvec, int num_tests)
 {
 	unsigned int i;
 	char result[COMP_BUF_SIZE];
@@ -755,25 +755,25 @@ static void test_deflate(void)
 	struct comp_testvec *tv;
 	unsigned int tsize;
 
-	printk("\ntesting deflate compression\n");
+	printk("\ntesting %s compression\n", algo);
 
-	tsize = sizeof (deflate_comp_tv_template);
+	tsize = sizeof(struct comp_testvec) * num_tests;
 	if (tsize &gt; TVMEMSIZE) {
 		printk("template (%u) too big for tvmem (%u)\n", tsize,
 		       TVMEMSIZE);
 		return;
 	}
 
-	memcpy(tvmem, deflate_comp_tv_template, tsize);
+	memcpy(tvmem, testvec, tsize);
 	tv = (void *)tvmem;
 
-	tfm = crypto_alloc_comp("deflate", 0, CRYPTO_ALG_ASYNC);
+	tfm = crypto_alloc_comp(algo, 0, CRYPTO_ALG_ASYNC);
 	if (tfm == NULL) {
-		printk("failed to load transform for deflate\n");
+		printk("failed to load transform for %s\n", algo);
 		return;
 	}
 
-	for (i = 0; i &lt; DEFLATE_COMP_TEST_VECTORS; i++) {
+	for (i = 0; i &lt; num_tests; i++) {
 		int ilen, ret, dlen = COMP_BUF_SIZE;
 
 		printk("test %u:\n", i + 1);
@@ -792,26 +792,16 @@ static void test_deflate(void)
 		       ilen, dlen);
 	}
 
-	printk("\ntesting deflate decompression\n");
-
-	tsize = sizeof (deflate_decomp_tv_template);
-	if (tsize &gt; TVMEMSIZE) {
-		printk("template (%u) too big for tvmem (%u)\n", tsize,
-		       TVMEMSIZE);
-		goto out;
-	}
-
-	memcpy(tvmem, deflate_decomp_tv_template, tsize);
-	tv = (void *)tvmem;
+	printk("\ntesting %s decompression\n", algo);
 
-	for (i = 0; i &lt; DEFLATE_DECOMP_TEST_VECTORS; i++) {
+	for (i = 0; i &lt; num_tests; i++) {
 		int ilen, ret, dlen = COMP_BUF_SIZE;
 
 		printk("test %u:\n", i + 1);
 		memset(result, 0, sizeof (result));
 
-		ilen = tv[i].inlen;
-		ret = crypto_comp_decompress(tfm, tv[i].input,
+		ilen = tv[i].outlen;
+		ret = crypto_comp_decompress(tfm, tv[i].output,
 		                             ilen, result, &amp;dlen);
 		if (ret) {
 			printk("fail: ret=%d\n", ret);
@@ -819,7 +809,7 @@ static void test_deflate(void)
 		}
 		hexdump(result, dlen);
 		printk("%s (ratio %d:%d)\n",
-		       memcmp(result, tv[i].output, dlen) ? "fail" : "pass",
+		       memcmp(result, tv[i].input, dlen) ? "fail" : "pass",
 		       ilen, dlen);
 	}
 out:
@@ -994,7 +984,8 @@ static void do_test(void)
 		test_hash("tgr192", tgr192_tv_template, TGR192_TEST_VECTORS);
 		test_hash("tgr160", tgr160_tv_template, TGR160_TEST_VECTORS);
 		test_hash("tgr128", tgr128_tv_template, TGR128_TEST_VECTORS);
-		test_deflate();
+		test_compress("deflate", deflate_tv_template, DEFLATE_TEST_VECTORS);
+		test_compress("lzo1x", lzo1x_tv_template, LZO1X_TEST_VECTORS);
 		test_hash("crc32c", crc32c_tv_template, CRC32C_TEST_VECTORS);
 		test_hash("hmac(md5)", hmac_md5_tv_template,
 			  HMAC_MD5_TEST_VECTORS);
@@ -1100,7 +1091,7 @@ static void do_test(void)
 		break;
 
 	case 13:
-		test_deflate();
+		test_compress("deflate", deflate_tv_template, DEFLATE_TEST_VECTORS);
 		break;
 
 	case 14:
@@ -1225,6 +1216,10 @@ static void do_test(void)
 			    CAMELLIA_CBC_DEC_TEST_VECTORS);
 		break;
 
+	case 33:
+		test_compress("lzo1x", lzo1x_tv_template, LZO1X_TEST_VECTORS);
+		break;
+
 	case 100:
 		test_hash("hmac(md5)", hmac_md5_tv_template,
 			  HMAC_MD5_TEST_VECTORS);
Index: linux/crypto/tcrypt.h
===================================================================
--- linux.orig/crypto/tcrypt.h	2007-02-28 18:12:17.000000000 +0000
+++ linux/crypto/tcrypt.h	2007-02-28 18:12:32.000000000 +0000
@@ -3846,10 +3846,9 @@ struct comp_testvec {
  * Deflate test vectors (null-terminated strings).
  * Params: winbits=11, Z_DEFAULT_COMPRESSION, MAX_MEM_LEVEL.
  */
-#define DEFLATE_COMP_TEST_VECTORS 2
-#define DEFLATE_DECOMP_TEST_VECTORS 2
+#define DEFLATE_TEST_VECTORS 2
 
-static struct comp_testvec deflate_comp_tv_template[] = {
+static struct comp_testvec deflate_tv_template[] = {
 	{
 		.inlen	= 70,
 		.outlen	= 38,
@@ -3885,39 +3884,49 @@ static struct comp_testvec deflate_comp_
 	},
 };
 
-static struct comp_testvec deflate_decomp_tv_template[] = {
+/*
+ * LZO test vectors
+ */
+#define LZO1X_TEST_VECTORS 2
+
+static struct comp_testvec lzo1x_tv_template[] = {
 	{
-		.inlen	= 122,
-		.outlen	= 191,
-		.input	= { 0x5d, 0x8d, 0x31, 0x0e, 0xc2, 0x30, 0x10, 0x04,
-			    0xbf, 0xb2, 0x2f, 0xc8, 0x1f, 0x10, 0x04, 0x09,
-			    0x89, 0xc2, 0x85, 0x3f, 0x70, 0xb1, 0x2f, 0xf8,
-			    0x24, 0xdb, 0x67, 0xd9, 0x47, 0xc1, 0xef, 0x49,
-			    0x68, 0x12, 0x51, 0xae, 0x76, 0x67, 0xd6, 0x27,
-			    0x19, 0x88, 0x1a, 0xde, 0x85, 0xab, 0x21, 0xf2,
-			    0x08, 0x5d, 0x16, 0x1e, 0x20, 0x04, 0x2d, 0xad,
-			    0xf3, 0x18, 0xa2, 0x15, 0x85, 0x2d, 0x69, 0xc4,
-			    0x42, 0x83, 0x23, 0xb6, 0x6c, 0x89, 0x71, 0x9b,
-			    0xef, 0xcf, 0x8b, 0x9f, 0xcf, 0x33, 0xca, 0x2f,
-			    0xed, 0x62, 0xa9, 0x4c, 0x80, 0xff, 0x13, 0xaf,
-			    0x52, 0x37, 0xed, 0x0e, 0x52, 0x6b, 0x59, 0x02,
-			    0xd9, 0x4e, 0xe8, 0x7a, 0x76, 0x1d, 0x02, 0x98,
-			    0xfe, 0x8a, 0x87, 0x83, 0xa3, 0x4f, 0x56, 0x8a,
-			    0xb8, 0x9e, 0x8e, 0x5c, 0x57, 0xd3, 0xa0, 0x79,
-			    0xfa, 0x02 },
-		.output	= "This document describes a compression method based on the DEFLATE"
+		.inlen	= 70,
+		.outlen	= 46,
+	  	.input	= "Join us now and share the software "
+			  "Join us now and share the software ",
+		.output	= { 0x00, 0x0d, 0x4a, 0x6f, 0x69, 0x6e, 0x20, 0x75,
+			    0x73, 0x20, 0x6e, 0x6f, 0x77, 0x20, 0x61, 0x6e,
+			    0x64, 0x20, 0x73, 0x68, 0x61, 0x72, 0x65, 0x20,
+			    0x74, 0x68, 0x65, 0x20, 0x73, 0x6f, 0x66, 0x74,
+			    0x77, 0x70, 0x01, 0x01, 0x4a, 0x6f, 0x69, 0x6e,
+			    0x3d, 0x88, 0x00, 0x11, 0x00, 0x00 },
+	}, {
+		.inlen	= 191,
+		.outlen	= 153,
+		.input	= "This document describes a compression method based on the DEFLATE"
 			  "compression algorithm.  This document defines the application of "
 			  "the DEFLATE algorithm to the IP Payload Compression Protocol.",
-	}, {
-		.inlen	= 38,
-		.outlen	= 70,
-		.input	= { 0xf3, 0xca, 0xcf, 0xcc, 0x53, 0x28, 0x2d, 0x56,
-			    0xc8, 0xcb, 0x2f, 0x57, 0x48, 0xcc, 0x4b, 0x51,
-			    0x28, 0xce, 0x48, 0x2c, 0x4a, 0x55, 0x28, 0xc9,
-			    0x48, 0x55, 0x28, 0xce, 0x4f, 0x2b, 0x29, 0x07,
-			    0x71, 0xbc, 0x08, 0x2b, 0x01, 0x00 },
-		.output	= "Join us now and share the software "
-			  "Join us now and share the software ",
+		.output	= { 0x00, 0x2f, 0x54, 0x68, 0x69, 0x73, 0x20, 0x64,
+			    0x6f, 0x63, 0x75, 0x6d, 0x65, 0x6e, 0x74, 0x20,
+			    0x64, 0x65, 0x73, 0x63, 0x72, 0x69, 0x62, 0x65,
+			    0x73, 0x20, 0x61, 0x20, 0x63, 0x6f, 0x6d, 0x70,
+			    0x72, 0x65, 0x73, 0x73, 0x69, 0x6f, 0x6e, 0x20,
+			    0x6d, 0x65, 0x74, 0x68, 0x6f, 0x64, 0x20, 0x62,
+			    0x61, 0x73, 0x65, 0x64, 0x20, 0x6f, 0x6e, 0x20,
+			    0x74, 0x68, 0x65, 0x20, 0x44, 0x45, 0x46, 0x4c,
+			    0x41, 0x54, 0x45, 0x2a, 0x98, 0x00, 0x0d, 0x61,
+			    0x6c, 0x67, 0x6f, 0x72, 0x69, 0x74, 0x68, 0x6d,
+			    0x2e, 0x20, 0x20, 0x54, 0x68, 0x69, 0x73, 0x2a,
+			    0x60, 0x01, 0x02, 0x66, 0x69, 0x6e, 0x65, 0x73,
+			    0x80, 0x07, 0x05, 0x61, 0x70, 0x70, 0x6c, 0x69,
+			    0x63, 0x61, 0x74, 0x62, 0x0b, 0x6f, 0x66, 0x88,
+			    0x02, 0xcd, 0x09, 0x20, 0x27, 0x03, 0x01, 0x20,
+			    0x74, 0x6f, 0x80, 0x03, 0x09, 0x49, 0x50, 0x20,
+			    0x50, 0x61, 0x79, 0x6c, 0x6f, 0x61, 0x64, 0x20,
+			    0x43, 0x29, 0x3c, 0x02, 0x06, 0x50, 0x72, 0x6f,
+			    0x74, 0x6f, 0x63, 0x6f, 0x6c, 0x2e, 0x11, 0x00,
+			    0x00 },
 	},
 };
 


-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070228191348</emailId><senderName>Richard Purdie</senderName><senderEmail>rpurdie@openedhand.com</senderEmail><timestampReceived>2007-02-28 19:13:48-0400</timestampReceived><subject>[PATCH 4/5] jffs2: Add a "favourlzo" compression mode to jffs2</subject><body>

Add a "favourlzo" compression mode to jffs2 which tries to 
optimise by size but gives lzo an advantage when comparing sizes.
This means the faster lzo algorithm can be preferred when there
isn't much difference in compressed size (the exact threshold can
be changed).

Signed-off-by: Richard Purdie &lt;rpurdie@openedhand.com&gt;

---
 fs/Kconfig       |    7 +++++++
 fs/jffs2/compr.c |   51 ++++++++++++++++++++++++++++++++++++++++++++++-----
 fs/jffs2/compr.h |    3 +++
 3 files changed, 56 insertions(+), 5 deletions(-)

Index: linux/fs/Kconfig
===================================================================
--- linux.orig/fs/Kconfig	2007-02-28 18:12:31.000000000 +0000
+++ linux/fs/Kconfig	2007-02-28 18:12:33.000000000 +0000
@@ -1359,6 +1359,13 @@ config JFFS2_CMODE_SIZE
           Tries all compressors and chooses the one which has the smallest
           result.
 
+config JFFS2_CMODE_FAVOURLZO
+        bool "Favour LZO"
+        help
+          Tries all compressors and chooses the one which has the smallest
+          result but gives some preference to LZO (which has faster
+	  decompression) at the expense of size.
+
 endchoice
 
 config CRAMFS
Index: linux/fs/jffs2/compr.c
===================================================================
--- linux.orig/fs/jffs2/compr.c	2007-02-28 18:12:31.000000000 +0000
+++ linux/fs/jffs2/compr.c	2007-02-28 18:13:09.000000000 +0000
@@ -26,6 +26,34 @@ static int jffs2_compression_mode = JFFS
 /* Statistics for blocks stored without compression */
 static uint32_t none_stat_compr_blocks=0,none_stat_decompr_blocks=0,none_stat_compr_size=0;
  
+
+/*
+ * Return 1 to use this compression
+ */
+static int jffs2_is_best_compression(struct jffs2_compressor *this,
+		struct jffs2_compressor *best, uint32_t size, uint32_t bestsize)
+{
+	switch (jffs2_compression_mode) {
+		case JFFS2_COMPR_MODE_SIZE:
+			if (bestsize &gt; size)
+				return 1;
+			return 0;
+		case JFFS2_COMPR_MODE_FAVOURLZO:
+			if ((this-&gt;compr == JFFS2_COMPR_LZO) &amp;&amp; (bestsize &gt; size))
+				return 1;
+			if ((best-&gt;compr != JFFS2_COMPR_LZO) &amp;&amp; (bestsize &gt; size))
+				return 1;
+			if ((this-&gt;compr == JFFS2_COMPR_LZO) &amp;&amp; (bestsize &gt; (size * FAVOUR_LZO_PERCENT / \
100))) +				return 1;
+			if ((bestsize * FAVOUR_LZO_PERCENT / 100) &gt; size)
+				return 1;
+
+			return 0;
+	}
+	/* Shouldn't happen */
+	return 0;
+}
+
 /* jffs2_compress:
  * @data: Pointer to uncompressed data
  * @cdata: Pointer to returned pointer to buffer for compressed data
@@ -91,6 +119,7 @@ uint16_t jffs2_compress(struct jffs2_sb_
                 if (ret == JFFS2_COMPR_NONE) kfree(output_buf);
                 break;
         case JFFS2_COMPR_MODE_SIZE:
+        case JFFS2_COMPR_MODE_FAVOURLZO:
                 orig_slen = *datalen;
                 orig_dlen = *cdatalen;
                 spin_lock(&amp;jffs2_compressor_list_lock);
@@ -99,7 +128,7 @@ uint16_t jffs2_compress(struct jffs2_sb_
                         if ((!this-&gt;compress)||(this-&gt;disabled))
                                 continue;
                         /* Allocating memory for output buffer if necessary */
-                        if ((this-&gt;compr_buf_size&lt;orig_dlen)&amp;&amp;(this-&gt;compr_buf)) {
+                        if ((this-&gt;compr_buf_size&lt;orig_slen)&amp;&amp;(this-&gt;compr_buf)) {
                                 spin_unlock(&amp;jffs2_compressor_list_lock);
                                 kfree(this-&gt;compr_buf);
                                 spin_lock(&amp;jffs2_compressor_list_lock);
@@ -108,15 +137,15 @@ uint16_t jffs2_compress(struct jffs2_sb_
                         }
                         if (!this-&gt;compr_buf) {
                                 spin_unlock(&amp;jffs2_compressor_list_lock);
-                                tmp_buf = kmalloc(orig_dlen,GFP_KERNEL);
+                                tmp_buf = kmalloc(orig_slen,GFP_KERNEL);
                                 spin_lock(&amp;jffs2_compressor_list_lock);
                                 if (!tmp_buf) {
-                                        printk(KERN_WARNING "JFFS2: No memory for \
compressor allocation. (%d bytes)\n",orig_dlen); +                                    \
printk(KERN_WARNING "JFFS2: No memory for compressor allocation. (%d \
bytes)\n",orig_slen);  continue;
                                 }
                                 else {
                                         this-&gt;compr_buf = tmp_buf;
-                                        this-&gt;compr_buf_size = orig_dlen;
+                                        this-&gt;compr_buf_size = orig_slen;
                                 }
                         }
                         this-&gt;usecount++;
@@ -127,7 +156,8 @@ uint16_t jffs2_compress(struct jffs2_sb_
                         spin_lock(&amp;jffs2_compressor_list_lock);
                         this-&gt;usecount--;
                         if (!compr_ret) {
-                                if ((!best_dlen)||(best_dlen&gt;*cdatalen)) {
+				if (((!best_dlen) || jffs2_is_best_compression(this, best, *cdatalen, \
best_dlen)) +						&amp;&amp; (*cdatalen &lt; *datalen)) {
                                         best_dlen = *cdatalen;
                                         best_slen = *datalen;
                                         best = this;
@@ -326,6 +356,8 @@ char *jffs2_get_compression_mode_name(vo
                 return "priority";
         case JFFS2_COMPR_MODE_SIZE:
                 return "size";
+        case JFFS2_COMPR_MODE_FAVOURLZO:
+                return "favourlzo";
         }
         return "unkown";
 }
@@ -344,6 +376,10 @@ int jffs2_set_compression_mode_name(cons
                 jffs2_compression_mode = JFFS2_COMPR_MODE_SIZE;
                 return 0;
         }
+        if (!strncmp("favourlzo", name, 9)) {
+                jffs2_compression_mode = JFFS2_COMPR_MODE_FAVOURLZO;
+                return 0;
+        }
         return 1;
 }
 
@@ -437,9 +473,14 @@ int __init jffs2_compressors_init(void)
         jffs2_compression_mode = JFFS2_COMPR_MODE_SIZE;
         D1(printk(KERN_INFO "JFFS2: default compression mode: size\n");)
 #else
+#ifdef CONFIG_JFFS2_CMODE_FAVOURLZO
+        jffs2_compression_mode = JFFS2_COMPR_MODE_FAVOURLZO;
+        D1(printk(KERN_INFO "JFFS2: default compression mode: favourlzo\n");)
+#else
         D1(printk(KERN_INFO "JFFS2: default compression mode: priority\n");)
 #endif
 #endif
+#endif
         return 0;
 }
 
Index: linux/fs/jffs2/compr.h
===================================================================
--- linux.orig/fs/jffs2/compr.h	2007-02-28 18:12:31.000000000 +0000
+++ linux/fs/jffs2/compr.h	2007-02-28 18:12:33.000000000 +0000
@@ -41,6 +41,9 @@
 #define JFFS2_COMPR_MODE_NONE       0
 #define JFFS2_COMPR_MODE_PRIORITY   1
 #define JFFS2_COMPR_MODE_SIZE       2
+#define JFFS2_COMPR_MODE_FAVOURLZO  3
+
+#define FAVOUR_LZO_PERCENT 80
 
 struct jffs2_compressor {
         struct list_head list;


-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html


</body></email><email><emailId>20070228194346</emailId><senderName>Artem Bityutskiy</senderName><senderEmail>dedekind@infradead.org</senderEmail><timestampReceived>2007-02-28 19:43:46-0400</timestampReceived><subject>Re: [PATCH 0/5] Add LZO Compression</subject><body>

On Wed, 2007-02-28 at 19:13 +0000, Richard Purdie wrote:
&gt; The following patch series adds LZO compression support to the kernel
&gt; and exposes it in a variety of places (jffs2, crypto).
&gt; 
&gt; This is particularly useful for jffs2 where significant boot time
&gt; speedups (~10%) and file read speed improvements (~40%) are seen when
&gt; its used with only a slight drop in file compression ratio.

Providing the digits are accurate, this is very good stuff.

-- 
Best regards,
Artem Bityutskiy (Битюцкий Артём)

-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070228205656</emailId><senderName>Richard Purdie</senderName><senderEmail>rpurdie@openedhand.com</senderEmail><timestampReceived>2007-02-28 20:56:56-0400</timestampReceived><subject>Re: [PATCH 5/5] jffs2: Allow selection of compression mode via a</subject><body>

On Wed, 2007-02-28 at 21:39 +0200, Artem Bityutskiy wrote:
&gt; On Wed, 2007-02-28 at 19:13 +0000, Richard Purdie wrote:
&gt; &gt; +/* gives us jffs2_subsys */
&gt; &gt; +static decl_subsys(jffs2, NULL, NULL);
&gt; 
&gt; There is actually a file-system subsys - look up for fs_subsys. It is
&gt; declared at fs/namespace.c.

Further down the patch you'll see:

+	kset_set_kset_s(&amp;jffs2_subsys, fs_subsys);

There was a reason for doing that instead using fs_subsys in the above
although I can't remember why offhand. I did try it and it didn't work
as expected...

Regards,

Richard

-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070109154937</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-01-09 15:49:37-0400</timestampReceived><subject>Re: Building loop-aes with seperate Object-Directory</subject><body>

Matthias Schniedermeyer wrote:
&gt; README (3.1e), Line 262-263:
&gt; - snip -
&gt; Both LINUX_SOURCE and KBUILD_OUTPUT must be specified when compiling for
&gt; 2.6.x kernel with separate object directory.
&gt; - snip -
&gt; 
&gt; At least with 2.6.19 that isn't enough, i had to dig into the Makefile a
&gt; little and i after i added the following parameter:
&gt; USE_KBUILD=y
&gt; it worked.

Looks like the reason why it currently does not build without USE_KBUILD=y
is because one include directory is missing from compilation commands.

USE_KBUILD=y appears to work ok for recent kernels. But it does not work ok
for older kernels, or in situations where one externally compiled kernel
module depends on another externally compiled module from separate package
(for example, modules from addtional ciphers package). This inter package
dependency used to work ok on 2.4 and older kernels, but 2.6 mainline kernel
build scripts don't get it right yet.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070110111434</emailId><senderName></senderName><senderEmail>jdowdell</senderEmail><timestampReceived>2007-01-10 11:14:34-0400</timestampReceived><subject>Test</subject><body>

The original message was received at Wed, 10 Jan 2007 12:14:34 +0100
from 70.50.32.113

----- The following addresses had permanent fatal errors -----
&lt;linux-crypto@nl.linux.org&gt;

----- Transcript of the session follows -----
... while talking to mail server 44.62.77.46:
554 Service unavailable; [179.233.227.216] blocked using bl.spamcop.net
Session aborted


["attachment.zip" (application/octet-stream)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070110160655</emailId><senderName></senderName><senderEmail>n.tate</senderEmail><timestampReceived>2007-01-10 16:06:55-0400</timestampReceived><subject>error</subject><body>

The original message was included as attachment


["message.zip" (application/octet-stream)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070113052108</emailId><senderName>Marc Bevand</senderName><senderEmail>m.bevand@gmail.com</senderEmail><timestampReceived>2007-01-13 05:21:08-0400</timestampReceived><subject>Re: Seeking advice on Loop-AES performance with RAID5/RAID6</subject><body>

George Koss &lt;george_koss &lt;at&gt; hotmail.com&gt; writes:
&gt; [...]
&gt; I think you have put your finger on the main problem, and I'm wondering if 
&gt; higher performance can be achieved by adding the encryption functionality 
&gt; into the top interface of the raid device, so that it can perform 
&gt; encrypt/decrypt on chunksize blocks, rather than 4k pages.

You are right. Now push this idea a little bit further and you will
end up with the conclusion that in order to achieve the highest
performance possible, encryption has to be integrated not only with
the RAID layer, but also with the filesystem.

As a side note, this is precisely the direction where ZFS is headed:
features such as RAID and volume management are already integrated
into this filesystem (crypto is on its way, see zfs-crypto). Such
a fs can take advantage of the knowledge of the RAID layout, for
example it always performs full-strip writes in the case of RAID 5
(Sun calls it RAID-Z), etc. AFAIK there are 1 or 2 efforts to port
ZFS to Linux.

Oh, thanks for the benchmark numbers you posted BTW. I find them
interesting.

-marc


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070116084129</emailId><senderName>       "Russel McMyers http://www.tda.gov.uk Training And Development Agency For School</senderName><senderEmail></senderEmail><timestampReceived>2007-01-16 08:41:29-0400</timestampReceived><subject>Inquiry For Accommodation!</subject><body>

*

     [image:
training and development agency for schools] &lt;http://www.tda.gov.uk/&gt;*
*Hello, *

*I am Russel McMyers of Training And Devlopment Agency For Schools.
I need accomodation for our delegates arriving your area on the 5th
of August 2007 to organise a five day seminar
We need spaces for 10 adults, if possible 1person/room or otherwise for a
week.
Please give us the total cost for all at once if the dates mentioned above
are free, we will embark on securing the accomodations immediately i hear
from you.*
*Thanks anticipation for your timely response. *
*Have a nice day. *
**
*Kind Regards,
*
**
*Russel McMyers.*
The Training and Development Agency for Schools
151 Buckingham Palace Road
London
SW1W 9SZ
*Tel:*
+(44) 70111 50649,
70111 41040 or
70111 41036.
*Reply to: *
r_mc_myers@yahoo.co.uk
r_mc_myers@uk2.net

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070116140751</emailId><senderName>Jan Glauber</senderName><senderEmail>jan.glauber@de.ibm.com</senderEmail><timestampReceived>2007-01-16 14:07:51-0400</timestampReceived><subject>Re: [RFC][PATCH] Pseudo-random number generator</subject><body>

On Tue, 2006-12-05 at 14:07 +0100, Jan Glauber wrote:
&gt; Yes, if an attacker knows the initial clock value a brute-force attack
&gt; would be feasible to predict the output. But I don't know if the
&gt; hardware completely relies on the clock values or if there is any
&gt; internal state which is not visible by an attacker. I will try to find
&gt; out more details...

OK, after some research I got a new proposal. What the hardware does 
internally is just a Triple-DES operation with 3 different keys.

That means with my old implementation the input for a TDES operation is
the buffer full of timestamps. If an attacker can guess the first timestamp
he knows the entire input, since the timestamp loop indeed produces 
timestamps with a constant offset. Therefore I'd like to replace the
timestamp loop with only a single timestamp, which has the following
advantages:

- it is as safe as the loop (since the additional timestamps contain very
  low entropy)
- its faster, since we don't have to overwrite the entire buffer
- the one timestamp still guarantees unique, non-repeating output values

Even if an attacker knows the input buffer for the next operation
(known-plaintext attack) it turns out that currently this attack is not
feasible against TDES. Therefore, as long as the key is not compromised
there is no way to guess the next output from the generator.

Jan

--
 arch/s390/crypto/Makefile           |    1 
 arch/s390/crypto/crypt_s390.h       |    3 
 arch/s390/crypto/crypt_s390_query.c |    2 
 arch/s390/crypto/prng.c             |  209 ++++++++++++++++++++++++++++++++++++
 arch/s390/defconfig                 |    1 
 drivers/s390/Kconfig                |    7 +
 6 files changed, 222 insertions(+), 1 deletion(-)

diff -urNp linux-2.6.orig/arch/s390/crypto/Makefile \
                linux-2.6/arch/s390/crypto/Makefile
--- linux-2.6.orig/arch/s390/crypto/Makefile	2006-11-17 10:26:35.000000000 +0100
+++ linux-2.6/arch/s390/crypto/Makefile	2007-01-16 13:03:12.000000000 +0100
@@ -6,5 +6,6 @@ obj-$(CONFIG_CRYPTO_SHA1_S390) += sha1_s
 obj-$(CONFIG_CRYPTO_SHA256_S390) += sha256_s390.o
 obj-$(CONFIG_CRYPTO_DES_S390) += des_s390.o des_check_key.o
 obj-$(CONFIG_CRYPTO_AES_S390) += aes_s390.o
+obj-$(CONFIG_S390_PRNG) += prng.o
 
 obj-$(CONFIG_CRYPTO_TEST) += crypt_s390_query.o
diff -urNp linux-2.6.orig/arch/s390/crypto/crypt_s390.h \
                linux-2.6/arch/s390/crypto/crypt_s390.h
--- linux-2.6.orig/arch/s390/crypto/crypt_s390.h	2006-11-17 10:26:35.000000000 +0100
+++ linux-2.6/arch/s390/crypto/crypt_s390.h	2007-01-16 13:03:12.000000000 +0100
@@ -68,6 +68,7 @@ enum crypt_s390_kmc_func {
 	KMC_AES_192_DECRYPT  = CRYPT_S390_KMC | 0x13 | 0x80,
 	KMC_AES_256_ENCRYPT  = CRYPT_S390_KMC | 0x14,
 	KMC_AES_256_DECRYPT  = CRYPT_S390_KMC | 0x14 | 0x80,
+	KMC_PRNG	     = CRYPT_S390_KMC | 0x43,
 };
 
 /* function codes for KIMD (COMPUTE INTERMEDIATE MESSAGE DIGEST)
@@ -147,7 +148,7 @@ crypt_s390_km(long func, void* param, u8
  * @param src: address of source memory area
  * @param src_len: length of src operand in bytes
  * @returns &lt; zero for failure, 0 for the query func, number of processed bytes
- * 	for encryption/decryption funcs
+ *	for encryption/decryption funcs
  */
 static inline int
 crypt_s390_kmc(long func, void* param, u8* dest, const u8* src, long src_len)
diff -urNp linux-2.6.orig/arch/s390/crypto/crypt_s390_query.c \
                linux-2.6/arch/s390/crypto/crypt_s390_query.c
--- linux-2.6.orig/arch/s390/crypto/crypt_s390_query.c	2006-11-17 10:26:35.000000000 \
                +0100
+++ linux-2.6/arch/s390/crypto/crypt_s390_query.c	2007-01-16 13:03:12.000000000 +0100
@@ -54,6 +54,8 @@ static void query_available_functions(vo
 		crypt_s390_func_available(KMC_AES_192_ENCRYPT));
 	printk(KERN_INFO "KMC_AES_256: %d\n",
 		crypt_s390_func_available(KMC_AES_256_ENCRYPT));
+	printk(KERN_INFO "KMC_PRNG: %d\n",
+		crypt_s390_func_available(KMC_PRNG));
 
 	/* query available KIMD functions */
 	printk(KERN_INFO "KIMD_QUERY: %d\n",
diff -urNp linux-2.6.orig/arch/s390/crypto/prng.c linux-2.6/arch/s390/crypto/prng.c
--- linux-2.6.orig/arch/s390/crypto/prng.c	1970-01-01 01:00:00.000000000 +0100
+++ linux-2.6/arch/s390/crypto/prng.c	2007-01-16 13:04:45.000000000 +0100
@@ -0,0 +1,209 @@
+/*
+ * Copyright 2006 IBM Corporation
+ * Author(s): Jan Glauber &lt;jan.glauber@de.ibm.com&gt;
+ * Driver for the s390 pseudo random number generator
+ */
+#include &lt;linux/fs.h&gt;
+#include &lt;linux/init.h&gt;
+#include &lt;linux/kernel.h&gt;
+#include &lt;linux/miscdevice.h&gt;
+#include &lt;linux/module.h&gt;
+#include &lt;linux/moduleparam.h&gt;
+#include &lt;linux/random.h&gt;
+#include &lt;asm/debug.h&gt;
+#include &lt;asm/uaccess.h&gt;
+
+#include "crypt_s390.h"
+
+MODULE_LICENSE("GPL");
+MODULE_AUTHOR("Jan Glauber &lt;jan.glauber@de.ibm.com&gt;");
+MODULE_DESCRIPTION("s390 PRNG interface");
+
+static int prng_chunk_size = 256;
+module_param(prng_chunk_size, int, 0);
+MODULE_PARM_DESC(prng_chunk_size, "PRNG read chunk size in bytes");
+
+static int prng_entropy_limit = 4096;
+module_param(prng_entropy_limit, int, 0);
+MODULE_PARM_DESC(prng_entropy_limit,
+	"PRNG add entropy after that much bytes were produced");
+
+/*
+ * Any one who considers arithmetical methods of producing random digits is,
+ * of course, in a state of sin. -- John von Neumann
+ */
+
+struct s390_prng_data {
+	unsigned long count; /* how many bytes were produced */
+	char *buf;
+};
+
+static struct s390_prng_data *p;
+
+/* copied from libica, use a non-zero initial parameter block */
+static unsigned char parm_block[32] = {
+0x0F,0x2B,0x8E,0x63,0x8C,0x8E,0xD2,0x52,0x64,0xB7,0xA0,0x7B,0x75,0x28,0xB8,0xF4,
+0x75,0x5F,0xD2,0xA6,0x8D,0x97,0x11,0xFF,0x49,0xD8,0x23,0xF3,0x7E,0x21,0xEC,0xA0,
+};
+
+static int prng_open(struct inode *inode, struct file *file)
+{
+	return nonseekable_open(inode, file);
+}
+
+static void prng_add_entropy(void)
+{
+	__u64 entropy[4];
+	unsigned int i;
+	int ret;
+
+	for (i = 0; i &lt; 16; i++) {
+		ret = crypt_s390_kmc(KMC_PRNG, parm_block, (char *)entropy,
+				     (char *)entropy, sizeof(entropy));
+		BUG_ON(ret &lt; 0 || ret != sizeof(entropy));
+		memcpy(parm_block, entropy, sizeof(entropy));
+	}
+}
+
+static void prng_seed(int nbytes)
+{
+	char buf[nbytes];
+	int i = 0;
+
+	get_random_bytes(buf, nbytes);
+
+	/* Add the entropy */
+	while (nbytes &gt;= 8) {
+		*((__u64 *)parm_block) ^= *((__u64 *)buf+i*8);
+		prng_add_entropy();
+		i += 8;
+		nbytes -= 8;
+	}
+	prng_add_entropy();
+}
+
+static ssize_t prng_read(struct file *file, char __user *ubuf, size_t nbytes,
+			 loff_t *ppos)
+{
+	int chunk, n;
+	int ret = 0;
+	int tmp;
+
+	/* nbytes can be arbitrary long, we spilt it into chunks */
+	while (nbytes) {
+		/* same as in extract_entropy_user in random.c */
+		if (need_resched()) {
+			if (signal_pending(current)) {
+				if (ret == 0)
+					ret = -ERESTARTSYS;
+				break;
+			}
+			schedule();
+		}
+
+		/*
+		 * we lose some random bytes if an attacker issues
+		 * reads &lt; 8 bytes, but we don't care
+		 */
+		chunk = min_t(int, nbytes, prng_chunk_size);
+
+		/* PRNG only likes multiples of 8 bytes */
+		n = (chunk + 7) &amp; -8;
+
+		if (p-&gt;count &gt; prng_entropy_limit)
+			prng_seed(8);
+
+		/* if the CPU supports PRNG stckf is present too */
+		asm volatile(".insn	s,0xb27c0000,%0"
+			     : "=m" (*((unsigned long long *)p-&gt;buf)) : : "cc");
+
+		/*
+		 * Beside the STCKF the input for the TDES-EDE is the output
+		 * of the last operation. We differ here from X9.17 since we
+		 * only store one timestamp into the buffer. Padding the whole
+		 * buffer with timestamps does not improve security, since
+		 * successive stckf have nearly constant offsets.
+		 * If an attacker knows the first timestamp it would be
+		 * trivial to guess the additional values. One timestamp
+		 * is therefore enough and still guarantees unique input values.
+		 *
+		 * Note: you can still get strict X9.17 conformity by setting
+		 * prng_chunk_size to 8 bytes.
+		 */
+		tmp = crypt_s390_kmc(KMC_PRNG, parm_block, p-&gt;buf, p-&gt;buf, n);
+		BUG_ON((tmp &lt; 0) || (tmp != n));
+
+		p-&gt;count += n;
+
+		if (copy_to_user(ubuf, p-&gt;buf, chunk))
+			return -EFAULT;
+
+		nbytes -= chunk;
+		ret += chunk;
+		ubuf += chunk;
+	}
+	return ret;
+}
+
+static struct file_operations prng_fops = {
+	.owner		= THIS_MODULE,
+	.open		= &amp;prng_open,
+	.release	= NULL,
+	.read		= &amp;prng_read,
+};
+
+static struct miscdevice prng_dev = {
+	.name	= "prandom",
+	.minor	= MISC_DYNAMIC_MINOR,
+	.fops	= &amp;prng_fops,
+};
+
+static int __init prng_init(void)
+{
+	int ret;
+
+	/* check if the CPU has a PRNG */
+	if (!crypt_s390_func_available(KMC_PRNG))
+		return -ENOTSUPP;
+
+	p = kmalloc(sizeof(struct s390_prng_data), GFP_KERNEL);
+	if (!p)
+		return -ENOMEM;
+	p-&gt;count = 0;
+
+	p-&gt;buf = kmalloc(prng_chunk_size, GFP_KERNEL);
+	if (!p-&gt;buf) {
+		ret = -ENOMEM;
+		goto out_free;
+	}
+
+	/* initialize the PRNG, add 128 bits of entropy */
+	prng_seed(16);
+
+	ret = misc_register(&amp;prng_dev);
+	if (ret) {
+		printk(KERN_WARNING
+		       "s390 PRNG driver not loaded. Could not register misc device.\n");
+		goto out_buf;
+	}
+	return 0;
+
+out_buf:
+	kfree(p-&gt;buf);
+out_free:
+	kfree(p);
+	return ret;
+}
+
+static void __exit prng_exit(void)
+{
+	/* wipe me */
+	memset(p-&gt;buf, 0, prng_chunk_size);
+	kfree(p-&gt;buf);
+	kfree(p);
+
+	misc_deregister(&amp;prng_dev);
+}
+
+module_init(prng_init);
+module_exit(prng_exit);
diff -urNp linux-2.6.orig/arch/s390/defconfig linux-2.6/arch/s390/defconfig
--- linux-2.6.orig/arch/s390/defconfig	2007-01-12 09:50:41.000000000 +0100
+++ linux-2.6/arch/s390/defconfig	2007-01-16 13:03:12.000000000 +0100
@@ -459,6 +459,7 @@ CONFIG_MONWRITER=m
 #
 CONFIG_ZCRYPT=m
 # CONFIG_ZCRYPT_MONOLITHIC is not set
+CONFIG_S390_PRNG=m
 
 #
 # Network device support
diff -urNp linux-2.6.orig/drivers/s390/Kconfig linux-2.6/drivers/s390/Kconfig
--- linux-2.6.orig/drivers/s390/Kconfig	2006-11-17 10:26:36.000000000 +0100
+++ linux-2.6/drivers/s390/Kconfig	2007-01-16 13:03:12.000000000 +0100
@@ -244,4 +244,11 @@ config ZCRYPT_MONOLITHIC
 	  that contains all parts of the crypto device driver (ap bus,
 	  request router and all the card drivers).
 
+config S390_PRNG
+	tristate "Support for pseudo random number generator device driver"
+	help
+	  Select this option if you want to use the s390 pseudo random number generator.
+	  The PRNG is part of the cryptograhic processor functions and produces
+	  ANSI X9.17 conform numbers. The PRNG is usable via the char device /dev/prandom.
+
 endmenu


-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html


</body></email><email><emailId>20070122171710</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-01-22 17:17:10-0400</timestampReceived><subject>Re: raid5 loop-aes</subject><body>

Santiago Castillo wrote:
&gt; The kernel I use is here
&gt; http://packages.debian.org/testing/admin/linux-image-2.6.18-3-amd64

Its source appears to be:
linux-2.6_2.6.18.orig.tar.gz + linux-2.6_2.6.18-7.diff.gz

Anyway, I looked at linux-2.6_2.6.18-8.diff.gz

&gt; The stride parameter is in mke2fs command.

Yep. Now I see it.

Looks like stride parameter changes on-disk layout by adjusting block and
inode bitmap locations. It does not directly affect file system to device
driver communications.

&gt; I suppose that stride parameter is only useful when the fs is directly
&gt; over RAID and not over a loop device. is this true?

I quickly looked at the source. To me it looked like that same improvements
or regressions should apply for both ext3-&gt;RAID5 and ext3-&gt;loop-AES-&gt;RAID5.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070124102736</emailId><senderName>Herbert Xu</senderName><senderEmail>herbert@gondor.apana.org.au</senderEmail><timestampReceived>2007-01-24 10:27:36-0400</timestampReceived><subject>[0/6] [CRYPTO]: Misc patches before async crypto</subject><body>

Hi:

I'll be pushing these patches into cryptodev-2.6 tonight.

This patch series removes the obsolete interfaces now that all users
in mainline and mm have been converted.

It also adds support to the API to allow multiple frontend types for
one backend.  The immediate application will be to provide an async
interface to all existing sync crypto algorithms.  However, it could
also be used for other purposes such as providing a virtual address
interface for synchronous algorithms where currently we require the
use of scatterlists.

Cheers,
-- 
Visit Openswan at http://www.openswan.org/
Email: Herbert Xu ~{PmV&gt;HI~} &lt;herbert@gondor.apana.org.au&gt;
Home Page: http://gondor.apana.org.au/~herbert/
PGP Key: http://gondor.apana.org.au/~herbert/pubkey.txt
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070124102916</emailId><senderName>Herbert Xu</senderName><senderEmail>herbert@gondor.apana.org.au</senderEmail><timestampReceived>2007-01-24 10:29:16-0400</timestampReceived><subject>[PATCH 1/6] [CRYPTO] tcrypt: Removed vestigial crypto_alloc_tfm call</subject><body>

[CRYPTO] tcrypt: Removed vestigial crypto_alloc_tfm call

The crypto_comp conversion missed the last remaining crypto_alloc_tfm
call.  This patch replaces it with crypto_alloc_comp.

Signed-off-by: Herbert Xu &lt;herbert@gondor.apana.org.au&gt;
---

 crypto/tcrypt.c |    2 +-
 1 files changed, 1 insertion(+), 1 deletion(-)

diff --git a/crypto/tcrypt.c b/crypto/tcrypt.c
--- a/crypto/tcrypt.c
+++ b/crypto/tcrypt.c
@@ -767,7 +767,7 @@ static void test_deflate(void)
 	memcpy(tvmem, deflate_comp_tv_template, tsize);
 	tv = (void *)tvmem;
 
-	tfm = crypto_alloc_tfm("deflate", 0);
+	tfm = crypto_alloc_comp("deflate", 0, CRYPTO_ALG_ASYNC);
 	if (tfm == NULL) {
 		printk("failed to load transform for deflate\n");
 		return;
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070124102917</emailId><senderName>Herbert Xu</senderName><senderEmail>herbert@gondor.apana.org.au</senderEmail><timestampReceived>2007-01-24 10:29:17-0400</timestampReceived><subject>[PATCH 2/6] [CRYPTO] api: Remove deprecated interface</subject><body>

[CRYPTO] api: Remove deprecated interface

This patch removes the old cipher interface and related code.

Signed-off-by: Herbert Xu &lt;herbert@gondor.apana.org.au&gt;
---

 crypto/algapi.c        |    2 
 crypto/api.c           |   63 ------
 crypto/cipher.c        |  447 -------------------------------------------------
 crypto/compress.c      |    5 
 crypto/digest.c        |    5 
 crypto/internal.h      |   26 --
 include/linux/crypto.h |  127 -------------
 7 files changed, 16 insertions(+), 659 deletions(-)

diff --git a/crypto/algapi.c b/crypto/algapi.c
--- a/crypto/algapi.c
+++ b/crypto/algapi.c
@@ -396,7 +396,7 @@ struct crypto_tfm *crypto_spawn_tfm(stru
 		return ERR_PTR(-EAGAIN);
 	}
 
-	tfm = __crypto_alloc_tfm(alg, 0);
+	tfm = __crypto_alloc_tfm(alg);
 	if (IS_ERR(tfm))
 		crypto_mod_put(alg);
 
diff --git a/crypto/api.c b/crypto/api.c
--- a/crypto/api.c
+++ b/crypto/api.c
@@ -212,25 +212,6 @@ struct crypto_alg *crypto_alg_mod_lookup
 }
 EXPORT_SYMBOL_GPL(crypto_alg_mod_lookup);
 
-static int crypto_init_flags(struct crypto_tfm *tfm, u32 flags)
-{
-	tfm-&gt;crt_flags = flags &amp; CRYPTO_TFM_REQ_MASK;
-	flags &amp;= ~CRYPTO_TFM_REQ_MASK;
-	
-	switch (crypto_tfm_alg_type(tfm)) {
-	case CRYPTO_ALG_TYPE_CIPHER:
-		return crypto_init_cipher_flags(tfm, flags);
-		
-	case CRYPTO_ALG_TYPE_DIGEST:
-		return crypto_init_digest_flags(tfm, flags);
-		
-	case CRYPTO_ALG_TYPE_COMPRESS:
-		return crypto_init_compress_flags(tfm, flags);
-	}
-	
-	return 0;
-}
-
 static int crypto_init_ops(struct crypto_tfm *tfm)
 {
 	const struct crypto_type *type = tfm-&gt;__crt_alg-&gt;cra_type;
@@ -285,7 +266,7 @@ static void crypto_exit_ops(struct crypt
 	}
 }
 
-static unsigned int crypto_ctxsize(struct crypto_alg *alg, int flags)
+static unsigned int crypto_ctxsize(struct crypto_alg *alg)
 {
 	const struct crypto_type *type = alg-&gt;cra_type;
 	unsigned int len;
@@ -299,15 +280,15 @@ static unsigned int crypto_ctxsize(struc
 		BUG();
 
 	case CRYPTO_ALG_TYPE_CIPHER:
-		len += crypto_cipher_ctxsize(alg, flags);
+		len += crypto_cipher_ctxsize(alg);
 		break;
 		
 	case CRYPTO_ALG_TYPE_DIGEST:
-		len += crypto_digest_ctxsize(alg, flags);
+		len += crypto_digest_ctxsize(alg);
 		break;
 		
 	case CRYPTO_ALG_TYPE_COMPRESS:
-		len += crypto_compress_ctxsize(alg, flags);
+		len += crypto_compress_ctxsize(alg);
 		break;
 	}
 
@@ -322,23 +303,19 @@ void crypto_shoot_alg(struct crypto_alg 
 }
 EXPORT_SYMBOL_GPL(crypto_shoot_alg);
 
-struct crypto_tfm *__crypto_alloc_tfm(struct crypto_alg *alg, u32 flags)
+struct crypto_tfm *__crypto_alloc_tfm(struct crypto_alg *alg)
 {
 	struct crypto_tfm *tfm = NULL;
 	unsigned int tfm_size;
 	int err = -ENOMEM;
 
-	tfm_size = sizeof(*tfm) + crypto_ctxsize(alg, flags);
+	tfm_size = sizeof(*tfm) + crypto_ctxsize(alg);
 	tfm = kzalloc(tfm_size, GFP_KERNEL);
 	if (tfm == NULL)
 		goto out_err;
 
 	tfm-&gt;__crt_alg = alg;
 
-	err = crypto_init_flags(tfm, flags);
-	if (err)
-		goto out_free_tfm;
-		
 	err = crypto_init_ops(tfm);
 	if (err)
 		goto out_free_tfm;
@@ -362,31 +339,6 @@ out:
 }
 EXPORT_SYMBOL_GPL(__crypto_alloc_tfm);
 
-struct crypto_tfm *crypto_alloc_tfm(const char *name, u32 flags)
-{
-	struct crypto_tfm *tfm = NULL;
-	int err;
-
-	do {
-		struct crypto_alg *alg;
-
-		alg = crypto_alg_mod_lookup(name, 0, CRYPTO_ALG_ASYNC);
-		err = PTR_ERR(alg);
-		if (IS_ERR(alg))
-			continue;
-
-		tfm = __crypto_alloc_tfm(alg, flags);
-		err = 0;
-		if (IS_ERR(tfm)) {
-			crypto_mod_put(alg);
-			err = PTR_ERR(tfm);
-			tfm = NULL;
-		}
-	} while (err == -EAGAIN &amp;&amp; !signal_pending(current));
-
-	return tfm;
-}
-
 /*
  *	crypto_alloc_base - Locate algorithm and allocate transform
  *	@alg_name: Name of algorithm
@@ -420,7 +372,7 @@ struct crypto_tfm *crypto_alloc_base(con
 			goto err;
 		}
 
-		tfm = __crypto_alloc_tfm(alg, 0);
+		tfm = __crypto_alloc_tfm(alg);
 		if (!IS_ERR(tfm))
 			return tfm;
 
@@ -466,7 +418,6 @@ void crypto_free_tfm(struct crypto_tfm *
 	kfree(tfm);
 }
 
-EXPORT_SYMBOL_GPL(crypto_alloc_tfm);
 EXPORT_SYMBOL_GPL(crypto_free_tfm);
 
 int crypto_has_alg(const char *name, u32 type, u32 mask)
diff --git a/crypto/cipher.c b/crypto/cipher.c
--- a/crypto/cipher.c
+++ b/crypto/cipher.c
@@ -12,274 +12,13 @@
  * any later version.
  *
  */
-#include &lt;linux/compiler.h&gt;
+
 #include &lt;linux/kernel.h&gt;
 #include &lt;linux/crypto.h&gt;
 #include &lt;linux/errno.h&gt;
-#include &lt;linux/mm.h&gt;
-#include &lt;linux/slab.h&gt;
+#include &lt;linux/scatterlist.h&gt;
 #include &lt;linux/string.h&gt;
-#include &lt;asm/scatterlist.h&gt;
 #include "internal.h"
-#include "scatterwalk.h"
-
-struct cipher_alg_compat {
-	unsigned int cia_min_keysize;
-	unsigned int cia_max_keysize;
-	int (*cia_setkey)(struct crypto_tfm *tfm, const u8 *key,
-	                  unsigned int keylen);
-	void (*cia_encrypt)(struct crypto_tfm *tfm, u8 *dst, const u8 *src);
-	void (*cia_decrypt)(struct crypto_tfm *tfm, u8 *dst, const u8 *src);
-
-	unsigned int (*cia_encrypt_ecb)(const struct cipher_desc *desc,
-					u8 *dst, const u8 *src,
-					unsigned int nbytes);
-	unsigned int (*cia_decrypt_ecb)(const struct cipher_desc *desc,
-					u8 *dst, const u8 *src,
-					unsigned int nbytes);
-	unsigned int (*cia_encrypt_cbc)(const struct cipher_desc *desc,
-					u8 *dst, const u8 *src,
-					unsigned int nbytes);
-	unsigned int (*cia_decrypt_cbc)(const struct cipher_desc *desc,
-					u8 *dst, const u8 *src,
-					unsigned int nbytes);
-};
-
-static inline void xor_64(u8 *a, const u8 *b)
-{
-	((u32 *)a)[0] ^= ((u32 *)b)[0];
-	((u32 *)a)[1] ^= ((u32 *)b)[1];
-}
-
-static inline void xor_128(u8 *a, const u8 *b)
-{
-	((u32 *)a)[0] ^= ((u32 *)b)[0];
-	((u32 *)a)[1] ^= ((u32 *)b)[1];
-	((u32 *)a)[2] ^= ((u32 *)b)[2];
-	((u32 *)a)[3] ^= ((u32 *)b)[3];
-}
-
-static unsigned int crypt_slow(const struct cipher_desc *desc,
-			       struct scatter_walk *in,
-			       struct scatter_walk *out, unsigned int bsize)
-{
-	unsigned long alignmask = crypto_tfm_alg_alignmask(desc-&gt;tfm);
-	u8 buffer[bsize * 2 + alignmask];
-	u8 *src = (u8 *)ALIGN((unsigned long)buffer, alignmask + 1);
-	u8 *dst = src + bsize;
-
-	scatterwalk_copychunks(src, in, bsize, 0);
-	desc-&gt;prfn(desc, dst, src, bsize);
-	scatterwalk_copychunks(dst, out, bsize, 1);
-
-	return bsize;
-}
-
-static inline unsigned int crypt_fast(const struct cipher_desc *desc,
-				      struct scatter_walk *in,
-				      struct scatter_walk *out,
-				      unsigned int nbytes, u8 *tmp)
-{
-	u8 *src, *dst;
-	u8 *real_src, *real_dst;
-
-	real_src = scatterwalk_map(in, 0);
-	real_dst = scatterwalk_map(out, 1);
-
-	src = real_src;
-	dst = scatterwalk_samebuf(in, out) ? src : real_dst;
-
-	if (tmp) {
-		memcpy(tmp, src, nbytes);
-		src = tmp;
-		dst = tmp;
-	}
-
-	nbytes = desc-&gt;prfn(desc, dst, src, nbytes);
-
-	if (tmp)
-		memcpy(real_dst, tmp, nbytes);
-
-	scatterwalk_unmap(real_src, 0);
-	scatterwalk_unmap(real_dst, 1);
-
-	scatterwalk_advance(in, nbytes);
-	scatterwalk_advance(out, nbytes);
-
-	return nbytes;
-}
-
-/* 
- * Generic encrypt/decrypt wrapper for ciphers, handles operations across
- * multiple page boundaries by using temporary blocks.  In user context,
- * the kernel is given a chance to schedule us once per page.
- */
-static int crypt(const struct cipher_desc *desc,
-		 struct scatterlist *dst,
-		 struct scatterlist *src,
-		 unsigned int nbytes)
-{
-	struct scatter_walk walk_in, walk_out;
-	struct crypto_tfm *tfm = desc-&gt;tfm;
-	const unsigned int bsize = crypto_tfm_alg_blocksize(tfm);
-	unsigned int alignmask = crypto_tfm_alg_alignmask(tfm);
-	unsigned long buffer = 0;
-
-	if (!nbytes)
-		return 0;
-
-	if (nbytes % bsize) {
-		tfm-&gt;crt_flags |= CRYPTO_TFM_RES_BAD_BLOCK_LEN;
-		return -EINVAL;
-	}
-
-	scatterwalk_start(&amp;walk_in, src);
-	scatterwalk_start(&amp;walk_out, dst);
-
-	for(;;) {
-		unsigned int n = nbytes;
-		u8 *tmp = NULL;
-
-		if (!scatterwalk_aligned(&amp;walk_in, alignmask) ||
-		    !scatterwalk_aligned(&amp;walk_out, alignmask)) {
-			if (!buffer) {
-				buffer = __get_free_page(GFP_ATOMIC);
-				if (!buffer)
-					n = 0;
-			}
-			tmp = (u8 *)buffer;
-		}
-
-		n = scatterwalk_clamp(&amp;walk_in, n);
-		n = scatterwalk_clamp(&amp;walk_out, n);
-
-		if (likely(n &gt;= bsize))
-			n = crypt_fast(desc, &amp;walk_in, &amp;walk_out, n, tmp);
-		else
-			n = crypt_slow(desc, &amp;walk_in, &amp;walk_out, bsize);
-
-		nbytes -= n;
-
-		scatterwalk_done(&amp;walk_in, 0, nbytes);
-		scatterwalk_done(&amp;walk_out, 1, nbytes);
-
-		if (!nbytes)
-			break;
-
-		crypto_yield(tfm-&gt;crt_flags);
-	}
-
-	if (buffer)
-		free_page(buffer);
-
-	return 0;
-}
-
-static int crypt_iv_unaligned(struct cipher_desc *desc,
-			      struct scatterlist *dst,
-			      struct scatterlist *src,
-			      unsigned int nbytes)
-{
-	struct crypto_tfm *tfm = desc-&gt;tfm;
-	unsigned long alignmask = crypto_tfm_alg_alignmask(tfm);
-	u8 *iv = desc-&gt;info;
-
-	if (unlikely(((unsigned long)iv &amp; alignmask))) {
-		unsigned int ivsize = tfm-&gt;crt_cipher.cit_ivsize;
-		u8 buffer[ivsize + alignmask];
-		u8 *tmp = (u8 *)ALIGN((unsigned long)buffer, alignmask + 1);
-		int err;
-
-		desc-&gt;info = memcpy(tmp, iv, ivsize);
-		err = crypt(desc, dst, src, nbytes);
-		memcpy(iv, tmp, ivsize);
-
-		return err;
-	}
-
-	return crypt(desc, dst, src, nbytes);
-}
-
-static unsigned int cbc_process_encrypt(const struct cipher_desc *desc,
-					u8 *dst, const u8 *src,
-					unsigned int nbytes)
-{
-	struct crypto_tfm *tfm = desc-&gt;tfm;
-	void (*xor)(u8 *, const u8 *) = tfm-&gt;crt_u.cipher.cit_xor_block;
-	int bsize = crypto_tfm_alg_blocksize(tfm);
-
-	void (*fn)(struct crypto_tfm *, u8 *, const u8 *) = desc-&gt;crfn;
-	u8 *iv = desc-&gt;info;
-	unsigned int done = 0;
-
-	nbytes -= bsize;
-
-	do {
-		xor(iv, src);
-		fn(tfm, dst, iv);
-		memcpy(iv, dst, bsize);
-
-		src += bsize;
-		dst += bsize;
-	} while ((done += bsize) &lt;= nbytes);
-
-	return done;
-}
-
-static unsigned int cbc_process_decrypt(const struct cipher_desc *desc,
-					u8 *dst, const u8 *src,
-					unsigned int nbytes)
-{
-	struct crypto_tfm *tfm = desc-&gt;tfm;
-	void (*xor)(u8 *, const u8 *) = tfm-&gt;crt_u.cipher.cit_xor_block;
-	int bsize = crypto_tfm_alg_blocksize(tfm);
-	unsigned long alignmask = crypto_tfm_alg_alignmask(desc-&gt;tfm);
-
-	u8 stack[src == dst ? bsize + alignmask : 0];
-	u8 *buf = (u8 *)ALIGN((unsigned long)stack, alignmask + 1);
-	u8 **dst_p = src == dst ? &amp;buf : 
-
-	void (*fn)(struct crypto_tfm *, u8 *, const u8 *) = desc-&gt;crfn;
-	u8 *iv = desc-&gt;info;
-	unsigned int done = 0;
-
-	nbytes -= bsize;
-
-	do {
-		u8 *tmp_dst = *dst_p;
-
-		fn(tfm, tmp_dst, src);
-		xor(tmp_dst, iv);
-		memcpy(iv, src, bsize);
-		if (tmp_dst != dst)
-			memcpy(dst, tmp_dst, bsize);
-
-		src += bsize;
-		dst += bsize;
-	} while ((done += bsize) &lt;= nbytes);
-
-	return done;
-}
-
-static unsigned int ecb_process(const struct cipher_desc *desc, u8 *dst,
-				const u8 *src, unsigned int nbytes)
-{
-	struct crypto_tfm *tfm = desc-&gt;tfm;
-	int bsize = crypto_tfm_alg_blocksize(tfm);
-	void (*fn)(struct crypto_tfm *, u8 *, const u8 *) = desc-&gt;crfn;
-	unsigned int done = 0;
-
-	nbytes -= bsize;
-
-	do {
-		fn(tfm, dst, src);
-
-		src += bsize;
-		dst += bsize;
-	} while ((done += bsize) &lt;= nbytes);
-
-	return done;
-}
 
 static int setkey(struct crypto_tfm *tfm, const u8 *key, unsigned int keylen)
 {
@@ -293,122 +32,6 @@ static int setkey(struct crypto_tfm *tfm
 		return cia-&gt;cia_setkey(tfm, key, keylen);
 }
 
-static int ecb_encrypt(struct crypto_tfm *tfm,
-		       struct scatterlist *dst,
-                       struct scatterlist *src, unsigned int nbytes)
-{
-	struct cipher_desc desc;
-	struct cipher_alg_compat *cipher = (void *)&amp;tfm-&gt;__crt_alg-&gt;cra_cipher;
-
-	desc.tfm = tfm;
-	desc.crfn = cipher-&gt;cia_encrypt;
-	desc.prfn = cipher-&gt;cia_encrypt_ecb ?: ecb_process;
-
-	return crypt(&amp;desc, dst, src, nbytes);
-}
-
-static int ecb_decrypt(struct crypto_tfm *tfm,
-                       struct scatterlist *dst,
-                       struct scatterlist *src,
-		       unsigned int nbytes)
-{
-	struct cipher_desc desc;
-	struct cipher_alg_compat *cipher = (void *)&amp;tfm-&gt;__crt_alg-&gt;cra_cipher;
-
-	desc.tfm = tfm;
-	desc.crfn = cipher-&gt;cia_decrypt;
-	desc.prfn = cipher-&gt;cia_decrypt_ecb ?: ecb_process;
-
-	return crypt(&amp;desc, dst, src, nbytes);
-}
-
-static int cbc_encrypt(struct crypto_tfm *tfm,
-                       struct scatterlist *dst,
-                       struct scatterlist *src,
-		       unsigned int nbytes)
-{
-	struct cipher_desc desc;
-	struct cipher_alg_compat *cipher = (void *)&amp;tfm-&gt;__crt_alg-&gt;cra_cipher;
-
-	desc.tfm = tfm;
-	desc.crfn = cipher-&gt;cia_encrypt;
-	desc.prfn = cipher-&gt;cia_encrypt_cbc ?: cbc_process_encrypt;
-	desc.info = tfm-&gt;crt_cipher.cit_iv;
-
-	return crypt(&amp;desc, dst, src, nbytes);
-}
-
-static int cbc_encrypt_iv(struct crypto_tfm *tfm,
-                          struct scatterlist *dst,
-                          struct scatterlist *src,
-                          unsigned int nbytes, u8 *iv)
-{
-	struct cipher_desc desc;
-	struct cipher_alg_compat *cipher = (void *)&amp;tfm-&gt;__crt_alg-&gt;cra_cipher;
-
-	desc.tfm = tfm;
-	desc.crfn = cipher-&gt;cia_encrypt;
-	desc.prfn = cipher-&gt;cia_encrypt_cbc ?: cbc_process_encrypt;
-	desc.info = iv;
-
-	return crypt_iv_unaligned(&amp;desc, dst, src, nbytes);
-}
-
-static int cbc_decrypt(struct crypto_tfm *tfm,
-                       struct scatterlist *dst,
-                       struct scatterlist *src,
-		       unsigned int nbytes)
-{
-	struct cipher_desc desc;
-	struct cipher_alg_compat *cipher = (void *)&amp;tfm-&gt;__crt_alg-&gt;cra_cipher;
-
-	desc.tfm = tfm;
-	desc.crfn = cipher-&gt;cia_decrypt;
-	desc.prfn = cipher-&gt;cia_decrypt_cbc ?: cbc_process_decrypt;
-	desc.info = tfm-&gt;crt_cipher.cit_iv;
-
-	return crypt(&amp;desc, dst, src, nbytes);
-}
-
-static int cbc_decrypt_iv(struct crypto_tfm *tfm,
-                          struct scatterlist *dst,
-                          struct scatterlist *src,
-                          unsigned int nbytes, u8 *iv)
-{
-	struct cipher_desc desc;
-	struct cipher_alg_compat *cipher = (void *)&amp;tfm-&gt;__crt_alg-&gt;cra_cipher;
-
-	desc.tfm = tfm;
-	desc.crfn = cipher-&gt;cia_decrypt;
-	desc.prfn = cipher-&gt;cia_decrypt_cbc ?: cbc_process_decrypt;
-	desc.info = iv;
-
-	return crypt_iv_unaligned(&amp;desc, dst, src, nbytes);
-}
-
-static int nocrypt(struct crypto_tfm *tfm,
-                   struct scatterlist *dst,
-                   struct scatterlist *src,
-		   unsigned int nbytes)
-{
-	return -ENOSYS;
-}
-
-static int nocrypt_iv(struct crypto_tfm *tfm,
-                      struct scatterlist *dst,
-                      struct scatterlist *src,
-                      unsigned int nbytes, u8 *iv)
-{
-	return -ENOSYS;
-}
-
-int crypto_init_cipher_flags(struct crypto_tfm *tfm, u32 flags)
-{
-	u32 mode = flags &amp; CRYPTO_TFM_MODE_MASK;
-	tfm-&gt;crt_cipher.cit_mode = mode ? mode : CRYPTO_TFM_MODE_ECB;
-	return 0;
-}
-
 static void cipher_crypt_unaligned(void (*fn)(struct crypto_tfm *, u8 *,
 					      const u8 *),
 				   struct crypto_tfm *tfm,
@@ -454,7 +77,6 @@ static void cipher_decrypt_unaligned(str
 
 int crypto_init_cipher_ops(struct crypto_tfm *tfm)
 {
-	int ret = 0;
 	struct cipher_tfm *ops = &amp;tfm-&gt;crt_cipher;
 	struct cipher_alg *cipher = &amp;tfm-&gt;__crt_alg-&gt;cra_cipher;
 
@@ -464,70 +86,7 @@ int crypto_init_cipher_ops(struct crypto
 	ops-&gt;cit_decrypt_one = crypto_tfm_alg_alignmask(tfm) ?
 		cipher_decrypt_unaligned : cipher-&gt;cia_decrypt;
 
-	switch (tfm-&gt;crt_cipher.cit_mode) {
-	case CRYPTO_TFM_MODE_ECB:
-		ops-&gt;cit_encrypt = ecb_encrypt;
-		ops-&gt;cit_decrypt = ecb_decrypt;
-		ops-&gt;cit_encrypt_iv = nocrypt_iv;
-		ops-&gt;cit_decrypt_iv = nocrypt_iv;
-		break;
-		
-	case CRYPTO_TFM_MODE_CBC:
-		ops-&gt;cit_encrypt = cbc_encrypt;
-		ops-&gt;cit_decrypt = cbc_decrypt;
-		ops-&gt;cit_encrypt_iv = cbc_encrypt_iv;
-		ops-&gt;cit_decrypt_iv = cbc_decrypt_iv;
-		break;
-		
-	case CRYPTO_TFM_MODE_CFB:
-		ops-&gt;cit_encrypt = nocrypt;
-		ops-&gt;cit_decrypt = nocrypt;
-		ops-&gt;cit_encrypt_iv = nocrypt_iv;
-		ops-&gt;cit_decrypt_iv = nocrypt_iv;
-		break;
-	
-	case CRYPTO_TFM_MODE_CTR:
-		ops-&gt;cit_encrypt = nocrypt;
-		ops-&gt;cit_decrypt = nocrypt;
-		ops-&gt;cit_encrypt_iv = nocrypt_iv;
-		ops-&gt;cit_decrypt_iv = nocrypt_iv;
-		break;
-
-	default:
-		BUG();
-	}
-	
-	if (ops-&gt;cit_mode == CRYPTO_TFM_MODE_CBC) {
-		unsigned long align;
-		unsigned long addr;
-	    	
-	    	switch (crypto_tfm_alg_blocksize(tfm)) {
-	    	case 8:
-	    		ops-&gt;cit_xor_block = xor_64;
-	    		break;
-	    		
-	    	case 16:
-	    		ops-&gt;cit_xor_block = xor_128;
-	    		break;
-	    		
-	    	default:
-	    		printk(KERN_WARNING "%s: block size %u not supported\n",
-	    		       crypto_tfm_alg_name(tfm),
-	    		       crypto_tfm_alg_blocksize(tfm));
-	    		ret = -EINVAL;
-	    		goto out;
-	    	}
-	    	
-		ops-&gt;cit_ivsize = crypto_tfm_alg_blocksize(tfm);
-		align = crypto_tfm_alg_alignmask(tfm) + 1;
-		addr = (unsigned long)crypto_tfm_ctx(tfm);
-		addr = ALIGN(addr, align);
-		addr += ALIGN(tfm-&gt;__crt_alg-&gt;cra_ctxsize, align);
-		ops-&gt;cit_iv = (void *)addr;
-	}
-
-out:	
-	return ret;
+	return 0;
 }
 
 void crypto_exit_cipher_ops(struct crypto_tfm *tfm)
diff --git a/crypto/compress.c b/crypto/compress.c
--- a/crypto/compress.c
+++ b/crypto/compress.c
@@ -34,11 +34,6 @@ static int crypto_decompress(struct cryp
 	                                                   dlen);
 }
 
-int crypto_init_compress_flags(struct crypto_tfm *tfm, u32 flags)
-{
-	return flags ? -EINVAL : 0;
-}
-
 int crypto_init_compress_ops(struct crypto_tfm *tfm)
 {
 	struct compress_tfm *ops = &amp;tfm-&gt;crt_compress;
diff --git a/crypto/digest.c b/crypto/digest.c
--- a/crypto/digest.c
+++ b/crypto/digest.c
@@ -136,11 +136,6 @@ static int digest(struct hash_desc *desc
 	return final(desc, out);
 }
 
-int crypto_init_digest_flags(struct crypto_tfm *tfm, u32 flags)
-{
-	return flags ? -EINVAL : 0;
-}
-
 int crypto_init_digest_ops(struct crypto_tfm *tfm)
 {
 	struct hash_tfm *ops = &amp;tfm-&gt;crt_hash;
diff --git a/crypto/internal.h b/crypto/internal.h
--- a/crypto/internal.h
+++ b/crypto/internal.h
@@ -83,8 +83,7 @@ static inline void crypto_exit_proc(void
 { }
 #endif
 
-static inline unsigned int crypto_digest_ctxsize(struct crypto_alg *alg,
-						 int flags)
+static inline unsigned int crypto_digest_ctxsize(struct crypto_alg *alg)
 {
 	unsigned int len = alg-&gt;cra_ctxsize;
 
@@ -96,23 +95,12 @@ static inline unsigned int crypto_digest
 	return len;
 }
 
-static inline unsigned int crypto_cipher_ctxsize(struct crypto_alg *alg,
-						 int flags)
+static inline unsigned int crypto_cipher_ctxsize(struct crypto_alg *alg)
 {
-	unsigned int len = alg-&gt;cra_ctxsize;
-	
-	switch (flags &amp; CRYPTO_TFM_MODE_MASK) {
-	case CRYPTO_TFM_MODE_CBC:
-		len = ALIGN(len, (unsigned long)alg-&gt;cra_alignmask + 1);
-		len += alg-&gt;cra_blocksize;
-		break;
-	}
-
-	return len;
+	return alg-&gt;cra_ctxsize;
 }
 
-static inline unsigned int crypto_compress_ctxsize(struct crypto_alg *alg,
-						   int flags)
+static inline unsigned int crypto_compress_ctxsize(struct crypto_alg *alg)
 {
 	return alg-&gt;cra_ctxsize;
 }
@@ -121,10 +109,6 @@ struct crypto_alg *crypto_mod_get(struct
 struct crypto_alg *__crypto_alg_lookup(const char *name, u32 type, u32 mask);
 struct crypto_alg *crypto_alg_mod_lookup(const char *name, u32 type, u32 mask);
 
-int crypto_init_digest_flags(struct crypto_tfm *tfm, u32 flags);
-int crypto_init_cipher_flags(struct crypto_tfm *tfm, u32 flags);
-int crypto_init_compress_flags(struct crypto_tfm *tfm, u32 flags);
-
 int crypto_init_digest_ops(struct crypto_tfm *tfm);
 int crypto_init_cipher_ops(struct crypto_tfm *tfm);
 int crypto_init_compress_ops(struct crypto_tfm *tfm);
@@ -136,7 +120,7 @@ void crypto_exit_compress_ops(struct cry
 void crypto_larval_error(const char *name, u32 type, u32 mask);
 
 void crypto_shoot_alg(struct crypto_alg *alg);
-struct crypto_tfm *__crypto_alloc_tfm(struct crypto_alg *alg, u32 flags);
+struct crypto_tfm *__crypto_alloc_tfm(struct crypto_alg *alg);
 
 int crypto_register_instance(struct crypto_template *tmpl,
 			     struct crypto_instance *inst);
diff --git a/include/linux/crypto.h b/include/linux/crypto.h
--- a/include/linux/crypto.h
+++ b/include/linux/crypto.h
@@ -51,15 +51,9 @@
 /*
  * Transform masks and values (for crt_flags).
  */
-#define CRYPTO_TFM_MODE_MASK		0x000000ff
 #define CRYPTO_TFM_REQ_MASK		0x000fff00
 #define CRYPTO_TFM_RES_MASK		0xfff00000
 
-#define CRYPTO_TFM_MODE_ECB		0x00000001
-#define CRYPTO_TFM_MODE_CBC		0x00000002
-#define CRYPTO_TFM_MODE_CFB		0x00000004
-#define CRYPTO_TFM_MODE_CTR		0x00000008
-
 #define CRYPTO_TFM_REQ_WEAK_KEY		0x00000100
 #define CRYPTO_TFM_REQ_MAY_SLEEP	0x00000200
 #define CRYPTO_TFM_RES_WEAK_KEY		0x00100000
@@ -71,12 +65,8 @@
 /*
  * Miscellaneous stuff.
  */
-#define CRYPTO_UNSPEC			0
 #define CRYPTO_MAX_ALG_NAME		64
 
-#define CRYPTO_DIR_ENCRYPT		1
-#define CRYPTO_DIR_DECRYPT		0
-
 /*
  * The macro CRYPTO_MINALIGN_ATTR (along with the void * type in the actual
  * declaration) is used to ensure that the crypto_tfm context structure is
@@ -148,19 +138,6 @@ struct cipher_alg {
 	                  unsigned int keylen);
 	void (*cia_encrypt)(struct crypto_tfm *tfm, u8 *dst, const u8 *src);
 	void (*cia_decrypt)(struct crypto_tfm *tfm, u8 *dst, const u8 *src);
-
-	unsigned int (*cia_encrypt_ecb)(const struct cipher_desc *desc,
-					u8 *dst, const u8 *src,
-					unsigned int nbytes) __deprecated;
-	unsigned int (*cia_decrypt_ecb)(const struct cipher_desc *desc,
-					u8 *dst, const u8 *src,
-					unsigned int nbytes) __deprecated;
-	unsigned int (*cia_encrypt_cbc)(const struct cipher_desc *desc,
-					u8 *dst, const u8 *src,
-					unsigned int nbytes) __deprecated;
-	unsigned int (*cia_decrypt_cbc)(const struct cipher_desc *desc,
-					u8 *dst, const u8 *src,
-					unsigned int nbytes) __deprecated;
 };
 
 struct digest_alg {
@@ -243,11 +220,6 @@ int crypto_unregister_alg(struct crypto_
 #ifdef CONFIG_CRYPTO
 int crypto_has_alg(const char *name, u32 type, u32 mask);
 #else
-static inline int crypto_alg_available(const char *name, u32 flags)
-{
-	return 0;
-}
-
 static inline int crypto_has_alg(const char *name, u32 type, u32 mask)
 {
 	return 0;
@@ -395,40 +367,11 @@ static inline u32 crypto_tfm_alg_type(st
 	return tfm-&gt;__crt_alg-&gt;cra_flags &amp; CRYPTO_ALG_TYPE_MASK;
 }
 
-static unsigned int crypto_tfm_alg_min_keysize(struct crypto_tfm *tfm)
-	__deprecated;
-static inline unsigned int crypto_tfm_alg_min_keysize(struct crypto_tfm *tfm)
-{
-	BUG_ON(crypto_tfm_alg_type(tfm) != CRYPTO_ALG_TYPE_CIPHER);
-	return tfm-&gt;__crt_alg-&gt;cra_cipher.cia_min_keysize;
-}
-
-static unsigned int crypto_tfm_alg_max_keysize(struct crypto_tfm *tfm)
-	__deprecated;
-static inline unsigned int crypto_tfm_alg_max_keysize(struct crypto_tfm *tfm)
-{
-	BUG_ON(crypto_tfm_alg_type(tfm) != CRYPTO_ALG_TYPE_CIPHER);
-	return tfm-&gt;__crt_alg-&gt;cra_cipher.cia_max_keysize;
-}
-
-static unsigned int crypto_tfm_alg_ivsize(struct crypto_tfm *tfm) __deprecated;
-static inline unsigned int crypto_tfm_alg_ivsize(struct crypto_tfm *tfm)
-{
-	BUG_ON(crypto_tfm_alg_type(tfm) != CRYPTO_ALG_TYPE_CIPHER);
-	return tfm-&gt;crt_cipher.cit_ivsize;
-}
-
 static inline unsigned int crypto_tfm_alg_blocksize(struct crypto_tfm *tfm)
 {
 	return tfm-&gt;__crt_alg-&gt;cra_blocksize;
 }
 
-static inline unsigned int crypto_tfm_alg_digestsize(struct crypto_tfm *tfm)
-{
-	BUG_ON(crypto_tfm_alg_type(tfm) != CRYPTO_ALG_TYPE_DIGEST);
-	return tfm-&gt;__crt_alg-&gt;cra_digest.dia_digestsize;
-}
-
 static inline unsigned int crypto_tfm_alg_alignmask(struct crypto_tfm *tfm)
 {
 	return tfm-&gt;__crt_alg-&gt;cra_alignmask;
@@ -809,76 +752,6 @@ static inline int crypto_hash_setkey(str
 	return crypto_hash_crt(hash)-&gt;setkey(hash, key, keylen);
 }
 
-static int crypto_cipher_encrypt(struct crypto_tfm *tfm,
-				 struct scatterlist *dst,
-				 struct scatterlist *src,
-				 unsigned int nbytes) __deprecated;
-static inline int crypto_cipher_encrypt(struct crypto_tfm *tfm,
-                                        struct scatterlist *dst,
-                                        struct scatterlist *src,
-                                        unsigned int nbytes)
-{
-	BUG_ON(crypto_tfm_alg_type(tfm) != CRYPTO_ALG_TYPE_CIPHER);
-	return tfm-&gt;crt_cipher.cit_encrypt(tfm, dst, src, nbytes);
-}                                        
-
-static int crypto_cipher_encrypt_iv(struct crypto_tfm *tfm,
-				    struct scatterlist *dst,
-				    struct scatterlist *src,
-				    unsigned int nbytes, u8 *iv) __deprecated;
-static inline int crypto_cipher_encrypt_iv(struct crypto_tfm *tfm,
-                                           struct scatterlist *dst,
-                                           struct scatterlist *src,
-                                           unsigned int nbytes, u8 *iv)
-{
-	BUG_ON(crypto_tfm_alg_type(tfm) != CRYPTO_ALG_TYPE_CIPHER);
-	return tfm-&gt;crt_cipher.cit_encrypt_iv(tfm, dst, src, nbytes, iv);
-}                                        
-
-static int crypto_cipher_decrypt(struct crypto_tfm *tfm,
-				 struct scatterlist *dst,
-				 struct scatterlist *src,
-				 unsigned int nbytes) __deprecated;
-static inline int crypto_cipher_decrypt(struct crypto_tfm *tfm,
-                                        struct scatterlist *dst,
-                                        struct scatterlist *src,
-                                        unsigned int nbytes)
-{
-	BUG_ON(crypto_tfm_alg_type(tfm) != CRYPTO_ALG_TYPE_CIPHER);
-	return tfm-&gt;crt_cipher.cit_decrypt(tfm, dst, src, nbytes);
-}
-
-static int crypto_cipher_decrypt_iv(struct crypto_tfm *tfm,
-				    struct scatterlist *dst,
-				    struct scatterlist *src,
-				    unsigned int nbytes, u8 *iv) __deprecated;
-static inline int crypto_cipher_decrypt_iv(struct crypto_tfm *tfm,
-                                           struct scatterlist *dst,
-                                           struct scatterlist *src,
-                                           unsigned int nbytes, u8 *iv)
-{
-	BUG_ON(crypto_tfm_alg_type(tfm) != CRYPTO_ALG_TYPE_CIPHER);
-	return tfm-&gt;crt_cipher.cit_decrypt_iv(tfm, dst, src, nbytes, iv);
-}
-
-static void crypto_cipher_set_iv(struct crypto_tfm *tfm,
-				 const u8 *src, unsigned int len) __deprecated;
-static inline void crypto_cipher_set_iv(struct crypto_tfm *tfm,
-                                        const u8 *src, unsigned int len)
-{
-	BUG_ON(crypto_tfm_alg_type(tfm) != CRYPTO_ALG_TYPE_CIPHER);
-	memcpy(tfm-&gt;crt_cipher.cit_iv, src, len);
-}
-
-static void crypto_cipher_get_iv(struct crypto_tfm *tfm,
-				 u8 *dst, unsigned int len) __deprecated;
-static inline void crypto_cipher_get_iv(struct crypto_tfm *tfm,
-                                        u8 *dst, unsigned int len)
-{
-	BUG_ON(crypto_tfm_alg_type(tfm) != CRYPTO_ALG_TYPE_CIPHER);
-	memcpy(dst, tfm-&gt;crt_cipher.cit_iv, len);
-}
-
 static inline struct crypto_comp *__crypto_comp_cast(struct crypto_tfm *tfm)
 {
 	return (struct crypto_comp *)tfm;
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070124102918</emailId><senderName>Herbert Xu</senderName><senderEmail>herbert@gondor.apana.org.au</senderEmail><timestampReceived>2007-01-24 10:29:18-0400</timestampReceived><subject>[PATCH 3/6] [CRYPTO] api: Add type-safe spawns</subject><body>

[CRYPTO] api: Add type-safe spawns

This patch allows spawns of specific types (e.g., cipher) to be allocated.

Signed-off-by: Herbert Xu &lt;herbert@gondor.apana.org.au&gt;
---

 crypto/algapi.c         |   13 +++++++++++--
 crypto/cbc.c            |    9 +++++----
 crypto/ecb.c            |    9 +++++----
 crypto/hmac.c           |    9 +++++----
 crypto/lrw.c            |   11 ++++++-----
 crypto/pcbc.c           |    9 +++++----
 crypto/xcbc.c           |    9 +++++----
 include/crypto/algapi.h |   20 +++++++++++++++++++-
 8 files changed, 61 insertions(+), 28 deletions(-)

diff --git a/crypto/algapi.c b/crypto/algapi.c
--- a/crypto/algapi.c
+++ b/crypto/algapi.c
@@ -377,7 +377,8 @@ void crypto_drop_spawn(struct crypto_spa
 }
 EXPORT_SYMBOL_GPL(crypto_drop_spawn);
 
-struct crypto_tfm *crypto_spawn_tfm(struct crypto_spawn *spawn)
+struct crypto_tfm *crypto_spawn_tfm(struct crypto_spawn *spawn, u32 type,
+				    u32 mask)
 {
 	struct crypto_alg *alg;
 	struct crypto_alg *alg2;
@@ -396,10 +397,18 @@ struct crypto_tfm *crypto_spawn_tfm(stru
 		return ERR_PTR(-EAGAIN);
 	}
 
+	tfm = ERR_PTR(-EINVAL);
+	if (unlikely((alg-&gt;cra_flags ^ type) &amp; mask))
+		goto out_put_alg;
+
 	tfm = __crypto_alloc_tfm(alg);
 	if (IS_ERR(tfm))
-		crypto_mod_put(alg);
+		goto out_put_alg;
+
+	return tfm;
 
+out_put_alg:
+	crypto_mod_put(alg);
 	return tfm;
 }
 EXPORT_SYMBOL_GPL(crypto_spawn_tfm);
diff --git a/crypto/cbc.c b/crypto/cbc.c
--- a/crypto/cbc.c
+++ b/crypto/cbc.c
@@ -243,6 +243,7 @@ static int crypto_cbc_init_tfm(struct cr
 	struct crypto_instance *inst = (void *)tfm-&gt;__crt_alg;
 	struct crypto_spawn *spawn = crypto_instance_ctx(inst);
 	struct crypto_cbc_ctx *ctx = crypto_tfm_ctx(tfm);
+	struct crypto_cipher *cipher;
 
 	switch (crypto_tfm_alg_blocksize(tfm)) {
 	case 8:
@@ -260,11 +261,11 @@ static int crypto_cbc_init_tfm(struct cr
 			ctx-&gt;xor = xor_quad;
 	}
 
-	tfm = crypto_spawn_tfm(spawn);
-	if (IS_ERR(tfm))
-		return PTR_ERR(tfm);
+	cipher = crypto_spawn_cipher(spawn);
+	if (IS_ERR(cipher))
+		return PTR_ERR(cipher);
 
-	ctx-&gt;child = crypto_cipher_cast(tfm);
+	ctx-&gt;child = cipher;
 	return 0;
 }
 
diff --git a/crypto/ecb.c b/crypto/ecb.c
--- a/crypto/ecb.c
+++ b/crypto/ecb.c
@@ -99,12 +99,13 @@ static int crypto_ecb_init_tfm(struct cr
 	struct crypto_instance *inst = (void *)tfm-&gt;__crt_alg;
 	struct crypto_spawn *spawn = crypto_instance_ctx(inst);
 	struct crypto_ecb_ctx *ctx = crypto_tfm_ctx(tfm);
+	struct crypto_cipher *cipher;
 
-	tfm = crypto_spawn_tfm(spawn);
-	if (IS_ERR(tfm))
-		return PTR_ERR(tfm);
+	cipher = crypto_spawn_cipher(spawn);
+	if (IS_ERR(cipher))
+		return PTR_ERR(cipher);
 
-	ctx-&gt;child = crypto_cipher_cast(tfm);
+	ctx-&gt;child = cipher;
 	return 0;
 }
 
diff --git a/crypto/hmac.c b/crypto/hmac.c
--- a/crypto/hmac.c
+++ b/crypto/hmac.c
@@ -172,15 +172,16 @@ static int hmac_digest(struct hash_desc 
 
 static int hmac_init_tfm(struct crypto_tfm *tfm)
 {
+	struct crypto_hash *hash;
 	struct crypto_instance *inst = (void *)tfm-&gt;__crt_alg;
 	struct crypto_spawn *spawn = crypto_instance_ctx(inst);
 	struct hmac_ctx *ctx = hmac_ctx(__crypto_hash_cast(tfm));
 
-	tfm = crypto_spawn_tfm(spawn);
-	if (IS_ERR(tfm))
-		return PTR_ERR(tfm);
+	hash = crypto_spawn_hash(spawn);
+	if (IS_ERR(hash))
+		return PTR_ERR(hash);
 
-	ctx-&gt;child = crypto_hash_cast(tfm);
+	ctx-&gt;child = hash;
 	return 0;
 }
 
diff --git a/crypto/lrw.c b/crypto/lrw.c
--- a/crypto/lrw.c
+++ b/crypto/lrw.c
@@ -201,21 +201,22 @@ static int decrypt(struct blkcipher_desc
 
 static int init_tfm(struct crypto_tfm *tfm)
 {
+	struct crypto_cipher *cipher;
 	struct crypto_instance *inst = (void *)tfm-&gt;__crt_alg;
 	struct crypto_spawn *spawn = crypto_instance_ctx(inst);
 	struct priv *ctx = crypto_tfm_ctx(tfm);
 	u32 *flags = &amp;tfm-&gt;crt_flags;
 
-	tfm = crypto_spawn_tfm(spawn);
-	if (IS_ERR(tfm))
-		return PTR_ERR(tfm);
+	cipher = crypto_spawn_cipher(spawn);
+	if (IS_ERR(cipher))
+		return PTR_ERR(cipher);
 
-	if (crypto_tfm_alg_blocksize(tfm) != 16) {
+	if (crypto_cipher_blocksize(cipher) != 16) {
 		*flags |= CRYPTO_TFM_RES_BAD_BLOCK_LEN;
 		return -EINVAL;
 	}
 
-	ctx-&gt;child = crypto_cipher_cast(tfm);
+	ctx-&gt;child = cipher;
 	return 0;
 }
 
diff --git a/crypto/pcbc.c b/crypto/pcbc.c
--- a/crypto/pcbc.c
+++ b/crypto/pcbc.c
@@ -247,6 +247,7 @@ static int crypto_pcbc_init_tfm(struct c
 	struct crypto_instance *inst = (void *)tfm-&gt;__crt_alg;
 	struct crypto_spawn *spawn = crypto_instance_ctx(inst);
 	struct crypto_pcbc_ctx *ctx = crypto_tfm_ctx(tfm);
+	struct crypto_cipher *cipher;
 
 	switch (crypto_tfm_alg_blocksize(tfm)) {
 	case 8:
@@ -264,11 +265,11 @@ static int crypto_pcbc_init_tfm(struct c
 			ctx-&gt;xor = xor_quad;
 	}
 
-	tfm = crypto_spawn_tfm(spawn);
-	if (IS_ERR(tfm))
-		return PTR_ERR(tfm);
+	cipher = crypto_spawn_cipher(spawn);
+	if (IS_ERR(cipher))
+		return PTR_ERR(cipher);
 
-	ctx-&gt;child = crypto_cipher_cast(tfm);
+	ctx-&gt;child = cipher;
 	return 0;
 }
 
diff --git a/crypto/xcbc.c b/crypto/xcbc.c
--- a/crypto/xcbc.c
+++ b/crypto/xcbc.c
@@ -254,14 +254,15 @@ static int crypto_xcbc_digest(struct has
 
 static int xcbc_init_tfm(struct crypto_tfm *tfm)
 {
+	struct crypto_cipher *cipher;
 	struct crypto_instance *inst = (void *)tfm-&gt;__crt_alg;
 	struct crypto_spawn *spawn = crypto_instance_ctx(inst);
 	struct crypto_xcbc_ctx *ctx = crypto_hash_ctx_aligned(__crypto_hash_cast(tfm));
 	int bs = crypto_hash_blocksize(__crypto_hash_cast(tfm));
 
-	tfm = crypto_spawn_tfm(spawn);
-	if (IS_ERR(tfm))
-		return PTR_ERR(tfm);
+	cipher = crypto_spawn_cipher(spawn);
+	if (IS_ERR(cipher))
+		return PTR_ERR(cipher);
 
 	switch(bs) {
 	case 16:
@@ -271,7 +272,7 @@ static int xcbc_init_tfm(struct crypto_t
 		return -EINVAL;
 	}
 
-	ctx-&gt;child = crypto_cipher_cast(tfm);
+	ctx-&gt;child = cipher;
 	ctx-&gt;odds = (u8*)(ctx+1);
 	ctx-&gt;prev = ctx-&gt;odds + bs;
 	ctx-&gt;key = ctx-&gt;prev + bs;
diff --git a/include/crypto/algapi.h b/include/crypto/algapi.h
--- a/include/crypto/algapi.h
+++ b/include/crypto/algapi.h
@@ -93,7 +93,8 @@ struct crypto_template *crypto_lookup_te
 int crypto_init_spawn(struct crypto_spawn *spawn, struct crypto_alg *alg,
 		      struct crypto_instance *inst);
 void crypto_drop_spawn(struct crypto_spawn *spawn);
-struct crypto_tfm *crypto_spawn_tfm(struct crypto_spawn *spawn);
+struct crypto_tfm *crypto_spawn_tfm(struct crypto_spawn *spawn, u32 type,
+				    u32 mask);
 
 struct crypto_alg *crypto_get_attr_alg(void *param, unsigned int len,
 				       u32 type, u32 mask);
@@ -132,11 +133,28 @@ static inline void *crypto_blkcipher_ctx
 	return crypto_tfm_ctx_aligned(&amp;tfm-&gt;base);
 }
 
+static inline struct crypto_cipher *crypto_spawn_cipher(
+	struct crypto_spawn *spawn)
+{
+	u32 type = CRYPTO_ALG_TYPE_CIPHER;
+	u32 mask = CRYPTO_ALG_TYPE_MASK;
+
+	return __crypto_cipher_cast(crypto_spawn_tfm(spawn, type, mask));
+}
+
 static inline struct cipher_alg *crypto_cipher_alg(struct crypto_cipher *tfm)
 {
 	return &amp;crypto_cipher_tfm(tfm)-&gt;__crt_alg-&gt;cra_cipher;
 }
 
+static inline struct crypto_hash *crypto_spawn_hash(struct crypto_spawn *spawn)
+{
+	u32 type = CRYPTO_ALG_TYPE_HASH;
+	u32 mask = CRYPTO_ALG_TYPE_HASH_MASK;
+
+	return __crypto_hash_cast(crypto_spawn_tfm(spawn, type, mask));
+}
+
 static inline void *crypto_hash_ctx_aligned(struct crypto_hash *tfm)
 {
 	return crypto_tfm_ctx_aligned(&amp;tfm-&gt;base);
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070124102919</emailId><senderName>Herbert Xu</senderName><senderEmail>herbert@gondor.apana.org.au</senderEmail><timestampReceived>2007-01-24 10:29:19-0400</timestampReceived><subject>[PATCH 4/6] [CRYPTO] api: Allow multiple frontends per backend</subject><body>

[CRYPTO] api: Allow multiple frontends per backend

This patch adds support for multiple frontend types for each backend
algorithm by passing the type and mask through to the backend type
init function.

Signed-off-by: Herbert Xu &lt;herbert@gondor.apana.org.au&gt;
---

 crypto/algapi.c         |    2 +-
 crypto/api.c            |   25 +++++++++++++------------
 crypto/blkcipher.c      |    5 +++--
 crypto/hash.c           |    5 +++--
 crypto/internal.h       |    3 ++-
 include/crypto/algapi.h |    4 ++--
 6 files changed, 24 insertions(+), 20 deletions(-)

diff --git a/crypto/algapi.c b/crypto/algapi.c
--- a/crypto/algapi.c
+++ b/crypto/algapi.c
@@ -401,7 +401,7 @@ struct crypto_tfm *crypto_spawn_tfm(stru
 	if (unlikely((alg-&gt;cra_flags ^ type) &amp; mask))
 		goto out_put_alg;
 
-	tfm = __crypto_alloc_tfm(alg);
+	tfm = __crypto_alloc_tfm(alg, type, mask);
 	if (IS_ERR(tfm))
 		goto out_put_alg;
 
diff --git a/crypto/api.c b/crypto/api.c
--- a/crypto/api.c
+++ b/crypto/api.c
@@ -212,12 +212,12 @@ struct crypto_alg *crypto_alg_mod_lookup
 }
 EXPORT_SYMBOL_GPL(crypto_alg_mod_lookup);
 
-static int crypto_init_ops(struct crypto_tfm *tfm)
+static int crypto_init_ops(struct crypto_tfm *tfm, u32 type, u32 mask)
 {
-	const struct crypto_type *type = tfm-&gt;__crt_alg-&gt;cra_type;
+	const struct crypto_type *type_obj = tfm-&gt;__crt_alg-&gt;cra_type;
 
-	if (type)
-		return type-&gt;init(tfm);
+	if (type_obj)
+		return type_obj-&gt;init(tfm, type, mask);
 
 	switch (crypto_tfm_alg_type(tfm)) {
 	case CRYPTO_ALG_TYPE_CIPHER:
@@ -266,14 +266,14 @@ static void crypto_exit_ops(struct crypt
 	}
 }
 
-static unsigned int crypto_ctxsize(struct crypto_alg *alg)
+static unsigned int crypto_ctxsize(struct crypto_alg *alg, u32 type, u32 mask)
 {
-	const struct crypto_type *type = alg-&gt;cra_type;
+	const struct crypto_type *type_obj = alg-&gt;cra_type;
 	unsigned int len;
 
 	len = alg-&gt;cra_alignmask &amp; ~(crypto_tfm_ctx_alignment() - 1);
-	if (type)
-		return len + type-&gt;ctxsize(alg);
+	if (type_obj)
+		return len + type_obj-&gt;ctxsize(alg, type, mask);
 
 	switch (alg-&gt;cra_flags &amp; CRYPTO_ALG_TYPE_MASK) {
 	default:
@@ -303,20 +303,21 @@ void crypto_shoot_alg(struct crypto_alg 
 }
 EXPORT_SYMBOL_GPL(crypto_shoot_alg);
 
-struct crypto_tfm *__crypto_alloc_tfm(struct crypto_alg *alg)
+struct crypto_tfm *__crypto_alloc_tfm(struct crypto_alg *alg, u32 type,
+				      u32 mask)
 {
 	struct crypto_tfm *tfm = NULL;
 	unsigned int tfm_size;
 	int err = -ENOMEM;
 
-	tfm_size = sizeof(*tfm) + crypto_ctxsize(alg);
+	tfm_size = sizeof(*tfm) + crypto_ctxsize(alg, type, mask);
 	tfm = kzalloc(tfm_size, GFP_KERNEL);
 	if (tfm == NULL)
 		goto out_err;
 
 	tfm-&gt;__crt_alg = alg;
 
-	err = crypto_init_ops(tfm);
+	err = crypto_init_ops(tfm, type, mask);
 	if (err)
 		goto out_free_tfm;
 
@@ -372,7 +373,7 @@ struct crypto_tfm *crypto_alloc_base(con
 			goto err;
 		}
 
-		tfm = __crypto_alloc_tfm(alg);
+		tfm = __crypto_alloc_tfm(alg, type, mask);
 		if (!IS_ERR(tfm))
 			return tfm;
 
diff --git a/crypto/blkcipher.c b/crypto/blkcipher.c
--- a/crypto/blkcipher.c
+++ b/crypto/blkcipher.c
@@ -349,7 +349,8 @@ static int setkey(struct crypto_tfm *tfm
 	return cipher-&gt;setkey(tfm, key, keylen);
 }
 
-static unsigned int crypto_blkcipher_ctxsize(struct crypto_alg *alg)
+static unsigned int crypto_blkcipher_ctxsize(struct crypto_alg *alg, u32 type,
+					     u32 mask)
 {
 	struct blkcipher_alg *cipher = &amp;alg-&gt;cra_blkcipher;
 	unsigned int len = alg-&gt;cra_ctxsize;
@@ -362,7 +363,7 @@ static unsigned int crypto_blkcipher_ctx
 	return len;
 }
 
-static int crypto_init_blkcipher_ops(struct crypto_tfm *tfm)
+static int crypto_init_blkcipher_ops(struct crypto_tfm *tfm, u32 type, u32 mask)
 {
 	struct blkcipher_tfm *crt = &amp;tfm-&gt;crt_blkcipher;
 	struct blkcipher_alg *alg = &amp;tfm-&gt;__crt_alg-&gt;cra_blkcipher;
diff --git a/crypto/hash.c b/crypto/hash.c
--- a/crypto/hash.c
+++ b/crypto/hash.c
@@ -16,12 +16,13 @@
 
 #include "internal.h"
 
-static unsigned int crypto_hash_ctxsize(struct crypto_alg *alg)
+static unsigned int crypto_hash_ctxsize(struct crypto_alg *alg, u32 type,
+					u32 mask)
 {
 	return alg-&gt;cra_ctxsize;
 }
 
-static int crypto_init_hash_ops(struct crypto_tfm *tfm)
+static int crypto_init_hash_ops(struct crypto_tfm *tfm, u32 type, u32 mask)
 {
 	struct hash_tfm *crt = &amp;tfm-&gt;crt_hash;
 	struct hash_alg *alg = &amp;tfm-&gt;__crt_alg-&gt;cra_hash;
diff --git a/crypto/internal.h b/crypto/internal.h
--- a/crypto/internal.h
+++ b/crypto/internal.h
@@ -120,7 +120,8 @@ void crypto_exit_compress_ops(struct cry
 void crypto_larval_error(const char *name, u32 type, u32 mask);
 
 void crypto_shoot_alg(struct crypto_alg *alg);
-struct crypto_tfm *__crypto_alloc_tfm(struct crypto_alg *alg);
+struct crypto_tfm *__crypto_alloc_tfm(struct crypto_alg *alg, u32 type,
+				      u32 mask);
 
 int crypto_register_instance(struct crypto_template *tmpl,
 			     struct crypto_instance *inst);
diff --git a/include/crypto/algapi.h b/include/crypto/algapi.h
--- a/include/crypto/algapi.h
+++ b/include/crypto/algapi.h
@@ -18,8 +18,8 @@ struct module;
 struct seq_file;
 
 struct crypto_type {
-	unsigned int (*ctxsize)(struct crypto_alg *alg);
-	int (*init)(struct crypto_tfm *tfm);
+	unsigned int (*ctxsize)(struct crypto_alg *alg, u32 type, u32 mask);
+	int (*init)(struct crypto_tfm *tfm, u32 type, u32 mask);
 	void (*exit)(struct crypto_tfm *tfm);
 	void (*show)(struct seq_file *m, struct crypto_alg *alg);
 };
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070124102920</emailId><senderName>Herbert Xu</senderName><senderEmail>herbert@gondor.apana.org.au</senderEmail><timestampReceived>2007-01-24 10:29:20-0400</timestampReceived><subject>[PATCH 5/6] [CRYPTO] xcbc: Use new cipher interface</subject><body>

[CRYPTO] xcbc: Use new cipher interface

This patch changes xcbc to use the new cipher encryt_one interface.

Signed-off-by: Herbert Xu &lt;herbert@gondor.apana.org.au&gt;
---

 crypto/xcbc.c |   30 ++++++++++++++++--------------
 1 files changed, 16 insertions(+), 14 deletions(-)

diff --git a/crypto/xcbc.c b/crypto/xcbc.c
--- a/crypto/xcbc.c
+++ b/crypto/xcbc.c
@@ -48,7 +48,7 @@ static u_int32_t ks[12] = {0x01010101, 0
  * +------------------------
  */
 struct crypto_xcbc_ctx {
-	struct crypto_tfm *child;
+	struct crypto_cipher *child;
 	u8 *odds;
 	u8 *prev;
 	u8 *key;
@@ -76,8 +76,7 @@ static int _crypto_xcbc_digest_setkey(st
 	if ((err = crypto_cipher_setkey(ctx-&gt;child, ctx-&gt;key, ctx-&gt;keylen)))
 	    return err;
 
-	ctx-&gt;child-&gt;__crt_alg-&gt;cra_cipher.cia_encrypt(ctx-&gt;child, key1,
-			ctx-&gt;consts);
+	crypto_cipher_encrypt_one(ctx-&gt;child, key1, ctx-&gt;consts);
 
 	return crypto_cipher_setkey(ctx-&gt;child, key1, bs);
 }
@@ -87,7 +86,7 @@ static int crypto_xcbc_digest_setkey(str
 {
 	struct crypto_xcbc_ctx *ctx = crypto_hash_ctx_aligned(parent);
 
-	if (keylen != crypto_tfm_alg_blocksize(ctx-&gt;child))
+	if (keylen != crypto_cipher_blocksize(ctx-&gt;child))
 		return -EINVAL;
 
 	ctx-&gt;keylen = keylen;
@@ -115,7 +114,7 @@ static int crypto_xcbc_digest_update2(st
 {
 	struct crypto_hash *parent = pdesc-&gt;tfm;
 	struct crypto_xcbc_ctx *ctx = crypto_hash_ctx_aligned(parent);
-	struct crypto_tfm *tfm = ctx-&gt;child;
+	struct crypto_cipher *tfm = ctx-&gt;child;
 	int bs = crypto_hash_blocksize(parent);
 	unsigned int i = 0;
 
@@ -143,7 +142,7 @@ static int crypto_xcbc_digest_update2(st
 					offset += len;
 
 				crypto_kunmap(p, 0);
-				crypto_yield(tfm-&gt;crt_flags);
+				crypto_yield(pdesc-&gt;flags);
 				continue;
 			}
 
@@ -153,7 +152,7 @@ static int crypto_xcbc_digest_update2(st
 			p += bs - ctx-&gt;len;
 
 			ctx-&gt;xor(ctx-&gt;prev, ctx-&gt;odds, bs);
-			tfm-&gt;__crt_alg-&gt;cra_cipher.cia_encrypt(tfm, ctx-&gt;prev, ctx-&gt;prev);
+			crypto_cipher_encrypt_one(tfm, ctx-&gt;prev, ctx-&gt;prev);
 
 			/* clearing the length */
 			ctx-&gt;len = 0;
@@ -161,7 +160,8 @@ static int crypto_xcbc_digest_update2(st
 			/* encrypting the rest of data */
 			while (len &gt; bs) {
 				ctx-&gt;xor(ctx-&gt;prev, p, bs);
-				tfm-&gt;__crt_alg-&gt;cra_cipher.cia_encrypt(tfm, ctx-&gt;prev, ctx-&gt;prev);
+				crypto_cipher_encrypt_one(tfm, ctx-&gt;prev,
+							  ctx-&gt;prev);
 				p += bs;
 				len -= bs;
 			}
@@ -172,7 +172,7 @@ static int crypto_xcbc_digest_update2(st
 				ctx-&gt;len = len;
 			}
 			crypto_kunmap(p, 0);
-			crypto_yield(tfm-&gt;crt_flags);
+			crypto_yield(pdesc-&gt;flags);
 			slen -= min(slen, ((unsigned int)(PAGE_SIZE)) - offset);
 			offset = 0;
 			pg++;
@@ -197,7 +197,7 @@ static int crypto_xcbc_digest_final(stru
 {
 	struct crypto_hash *parent = pdesc-&gt;tfm;
 	struct crypto_xcbc_ctx *ctx = crypto_hash_ctx_aligned(parent);
-	struct crypto_tfm *tfm = ctx-&gt;child;
+	struct crypto_cipher *tfm = ctx-&gt;child;
 	int bs = crypto_hash_blocksize(parent);
 	int err = 0;
 
@@ -207,13 +207,14 @@ static int crypto_xcbc_digest_final(stru
 		if ((err = crypto_cipher_setkey(tfm, ctx-&gt;key, ctx-&gt;keylen)) != 0)
 			return err;
 
-		tfm-&gt;__crt_alg-&gt;cra_cipher.cia_encrypt(tfm, key2, (const u8*)(ctx-&gt;consts+bs));
+		crypto_cipher_encrypt_one(tfm, key2,
+					  (u8 *)(ctx-&gt;consts + bs));
 
 		ctx-&gt;xor(ctx-&gt;prev, ctx-&gt;odds, bs);
 		ctx-&gt;xor(ctx-&gt;prev, key2, bs);
 		_crypto_xcbc_digest_setkey(parent, ctx);
 
-		tfm-&gt;__crt_alg-&gt;cra_cipher.cia_encrypt(tfm, out, ctx-&gt;prev);
+		crypto_cipher_encrypt_one(tfm, out, ctx-&gt;prev);
 	} else {
 		u8 key3[bs];
 		unsigned int rlen;
@@ -228,14 +229,15 @@ static int crypto_xcbc_digest_final(stru
 		if ((err = crypto_cipher_setkey(tfm, ctx-&gt;key, ctx-&gt;keylen)) != 0)
 			return err;
 
-		tfm-&gt;__crt_alg-&gt;cra_cipher.cia_encrypt(tfm, key3, (const u8*)(ctx-&gt;consts+bs*2));
+		crypto_cipher_encrypt_one(tfm, key3,
+					  (u8 *)(ctx-&gt;consts + bs * 2));
 
 		ctx-&gt;xor(ctx-&gt;prev, ctx-&gt;odds, bs);
 		ctx-&gt;xor(ctx-&gt;prev, key3, bs);
 
 		_crypto_xcbc_digest_setkey(parent, ctx);
 
-		tfm-&gt;__crt_alg-&gt;cra_cipher.cia_encrypt(tfm, out, ctx-&gt;prev);
+		crypto_cipher_encrypt_one(tfm, out, ctx-&gt;prev);
 	}
 
 	return 0;
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070108052835</emailId><senderName>"George Koss"</senderName><senderEmail>george_koss@hotmail.com</senderEmail><timestampReceived>2007-01-08 05:28:35-0400</timestampReceived><subject>Seeking advice on Loop-AES performance with RAID5/RAID6</subject><body>

Hi All,

I've just spent the last few hours reviewing all the archived list traffic 
for 2006, looking for pearls of wisdom on using loop-aes, but my current 
problem seems to be little known, if at all.   I've been using loop-aes on 
my file servers for a couple of years now, and have recently shifted to 
using AMD AM2 processors because of their modest cost &amp; power, along with 
the nice feature of directly supporting ECC DDR2 memory.

On my penultimate file server, I used 5 Seagate 250G Sata drives with an AMD 
3800+ AM2 CPU, and this got fairly (I thought) decent performance.  I did a 
fair amount of benchmarking, and got 300 MB/s writes and 200MB/s reads with 
a 5 disk raid0 and XFS.  Moving to RAID6 and Reiser3.6 dropped the 
performance to 71 MB/s read and 69 MB/s write.  (All benchmarks with 
Bonnie++ 1.03 using 4G data chunks).

Adding loop-AES-v3.1b with AES256 as a layer between Reiser3.6 and RAID6 
(with Dapper Drake Ubuntu server, kernel 2.6.16-26, AMD64) dropped the 
performance down to 32MB/s write and 34 MB/s read.   Not great, but 
tolerable, since the machine was only connected to a 100 Mbit ethernet 
router.

Now I've built a totally new machine using an ASUS M2N-E motherboard with 
the NForce 570 Ultra chip set.  It has 2 GBytes of PC5300 ECC DDR2 memory, 
and six Seagate 400 GB SATA2 drives.  The CPU is a AMD 4200+ X2 dual core 
AM2 with dual 512K L2 caches.
I installed Edgy AMD64 (2.6.17-10-generic #2 SMP ) Kubuntu desktop on a 7th 
drive, and have since been beating the raid array senseless with benchmarks, 
trying to get a decent throughput.    Before installing the SATA drives, I 
ran some benchmarks on the 7th drive, an older 160GB WD PATA drive.

I got 57 MB/s write and 58 MB/s read performance on a PATA drive partition 
with Reiser3.6 and loop-AES-v3.1d.   This seems OK.  Not great, but OK.

But it all went to hell when I tried the full stack on the six drive RAID5 
or RAID6 array.  Performance for writing fell to a pitiful 15 Mbytes/sec.   
I theorized that maybe the RAID helper thread was thrashing the caches, so I 
reduced the raid array chunksize to 16K, then 8K, then 4K.  This didn't help 
at all.   I increased the drive readahead to 1024 sectors, which seemed to 
help the read performance, but did nothing for write performance.  The SATA2 
drives are already using 16 sector transfers, which appears to be the 
maximum possible.   I've tried ext3, xfs, jfs and reiser3.6 filesystems, 
nothing seems to help.  The best write speed I've gotten so far is 17 
Mbyte/s with RAID6 and 64K chunksizes on a reiser3.6 filesystem.

RAID5 performance is terrible when I stack loop-AES on top of it.   Without 
loop-AES, I'm getting 99 Mbytes/sec Read, and 105 Mbytes Write with RAID5.   
This is the performance level I want to hit, since it's just about right 
when transferring data with Gigabit ethernet.

My next step is to install Ubuntu AMD64 server on a spare partition and see 
if getting rid of X and KDE will help at all.  I've got about 121 tasks 
running with Kubuntu desktop, and only 64 with the Ubuntu server on the 
other machine.   I suspect my cache runneth low, but I'm not sure how to 
prove this is the problem, other than by switching the OS.   Looking at the 
.config file in the kernel, it looks like deadline IO scheduling is the 
default.

Anybody got any ideas on how to find the problem?  I suspect that if I shell 
out $500 for an ARC-1220 raid controller, I can get the performance back up 
to 50 or 60 Mbytes/sec, but this seems to defeat the purpose of building a 
low cost Linux file server.  I'm beginning to wonder if I should try another 
distro.   Knoppix 5.1.1 will be an easy test, certainly.

Best regards to all, and many thanks to Jari Ruusu for all his fine work.

George Koss

_________________________________________________________________
Type your favorite song.  Get a customized station.  Try MSN Radio powered 
by Pandora. http://radio.msn.com/?icid=T002MSN03A07001


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070118091020</emailId><senderName>Santiago Castillo</senderName><senderEmail>scastillo@aragon.es</senderEmail><timestampReceived>2007-01-18 09:10:20-0400</timestampReceived><subject>raid5 loop-aes</subject><body>

Hi everybody

I'm trying to set up an ext3 fs over loop-aes over RAID5...

I have done several benchmarks...

"hdparm -tT" over the loop device show the best results with a 64Kb chunksize

then i try different stride size for ext3 filesystem.... I tryed with 1, 2, 4, 
8, 16, 32, and 64 and no stride parameters.

I found that I get the best result with no stride parameter....

I suppose that stride parameter is only useful when the fs is directly over RAID 
and not over a loop device. is this true?

Regards

-- 
________________________________________________
Santiago Castillo Oli        scastillo_EN_aragon_PUNTO_es
Técnico de sistemas                 976 71 50 06
Biblioteca de Aragón


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070112133625</emailId><senderName>Richard Knutsson</senderName><senderEmail>ricknu-0@student.ltu.se</senderEmail><timestampReceived>2007-01-12 13:36:25-0400</timestampReceived><subject>[PATCH] geode-aes.c: Convert pci_module_init() to pci_register_driver()</subject><body>

Signed-off-by: Richard Knutsson &lt;ricknu-0@student.ltu.se&gt;
---

diff --git a/drivers/crypto/geode-aes.c b/drivers/crypto/geode-aes.c
index 43a6839..31ea405 100644
--- a/drivers/crypto/geode-aes.c
+++ b/drivers/crypto/geode-aes.c
@@ -457,7 +457,7 @@ static struct pci_driver geode_aes_driver = {
 static int __init
 geode_aes_init(void)
 {
-	return pci_module_init(&amp;geode_aes_driver);
+	return pci_register_driver(&amp;geode_aes_driver);
 }
 
 static void __exit


-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070118184226</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-01-18 18:42:26-0400</timestampReceived><subject>Re: raid5 loop-aes</subject><body>

Santiago Castillo wrote:
&gt; then i try different stride size for ext3 filesystem.... I tryed with 1, 2, 4,
&gt; 8, 16, 32, and 64 and no stride parameters.
&gt; 
&gt; I found that I get the best result with no stride parameter....

What kernel version are you using?

&gt; I suppose that stride parameter is only useful when the fs is directly over RAID
&gt; and not over a loop device. is this true?

Loop-AES bangs backing device with page size requests even in situations
where file system bangs loop-AES with multi-page requests.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070124220724</emailId><senderName>Tobias Walkowiak</senderName><senderEmail>tw@tobias-walkowiak.de</senderEmail><timestampReceived>2007-01-24 22:07:24-0400</timestampReceived><subject>SATA errors</subject><body>

I just got some errors when accessing a file on my loop-aes'ed harddisk.
The syslog says
[...]
Jan 24 22:56:54 newt kernel: ata2: hard resetting port
Jan 24 22:56:54 newt kernel: ata2: SATA link up 1.5 Gbps (SStatus 113 SControl 310)
Jan 24 22:56:54 newt kernel: ata2.00: configured for UDMA/33
Jan 24 22:56:54 newt kernel: sd 1:0:0:0: SCSI error: return code = 0x08000002
Jan 24 22:56:54 newt kernel: sdb: Current: sense key: Aborted Command
Jan 24 22:56:54 newt kernel: Additional sense: No additional sense information
Jan 24 22:56:54 newt kernel: end_request: I/O error, dev sdb, sector 128931703
Jan 24 22:56:54 newt kernel: loop2: loop_end_io_transfer err=-5 bi_rw=0x0
[...]
with the last line repeating severeal times. Now I wonder if that's an
error in loop-aes, the harddisk or the linux kernel (my feelings tell me
that it is the latter one).

Did anyone of you had a similar effect?

TIA
tobias
-- 
[id]			tw@tobias-walkowiak.de
[gpg ID]		1024D/25B20A1E
[net place]		http://tobias-walkowiak.de
[message]		&gt;&lt;&gt; Jesus loves you &lt;&gt;&lt;

["signature.asc" (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070126222805</emailId><senderName>Tobias Walkowiak</senderName><senderEmail>tw@tobias-walkowiak.de</senderEmail><timestampReceived>2007-01-26 22:28:05-0400</timestampReceived><subject>Re: SATA errors [SOLVED]</subject><body>

On Wed, Jan 24, 2007 at 11:07:24PM +0100, Tobias Walkowiak wrote:
&gt; [...]
&gt; Jan 24 22:56:54 newt kernel: ata2: hard resetting port
&gt; Jan 24 22:56:54 newt kernel: ata2: SATA link up 1.5 Gbps (SStatus 113 SControl 310)
&gt; Jan 24 22:56:54 newt kernel: ata2.00: configured for UDMA/33
&gt; Jan 24 22:56:54 newt kernel: sd 1:0:0:0: SCSI error: return code = 0x08000002
&gt; Jan 24 22:56:54 newt kernel: sdb: Current: sense key: Aborted Command
&gt; Jan 24 22:56:54 newt kernel: Additional sense: No additional sense information
&gt; Jan 24 22:56:54 newt kernel: end_request: I/O error, dev sdb, sector 128931703
&gt; Jan 24 22:56:54 newt kernel: loop2: loop_end_io_transfer err=-5 bi_rw=0x0
&gt; [...]
&gt; with the last line repeating severeal times. Now I wonder if that's an
&gt; error in loop-aes, the harddisk or the linux kernel (my feelings tell me
&gt; that it is the latter one).

Thanks for your answers and hints. After doing checks with a simple
badblocks(8) several errors have been shown. The smartmontools weren't
working on that drive. I get an error like
Default self test failed [unsupported scsi opcode]

So, there have been no SW-related errors neither to the kernel (what
wonder, although I'm using a 2.6.18 ;) nor to loop-aes (sorry for having
even the least doubt ;) but simply some blocks near the end of the hard
drive are broken. Now I will try out the Seagate support for Maxtor
harddisks.

Thanks again and best wishes
Tobias
-- 
[id]			tw@tobias-walkowiak.de
[gpg ID]		1024D/25B20A1E
[net place]		http://tobias-walkowiak.de
[message]		&gt;&lt;&gt; Jesus loves you &lt;&gt;&lt;

["signature.asc" (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070125112119</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-01-25 11:21:19-0400</timestampReceived><subject>Re: SATA errors</subject><body>

Tobias Walkowiak &lt;tw@tobias-walkowiak.de&gt; wrote:

&gt; I just got some errors when accessing a file on my loop-aes'ed harddisk.

&gt; The syslog says

&gt; [...]

&gt; Jan 24 22:56:54 newt kernel: ata2: hard resetting port

&gt; Jan 24 22:56:54 newt kernel: ata2: SATA link up 1.5 Gbps (SStatus 113

&gt; SControl 310)

&gt; Jan 24 22:56:54 newt kernel: ata2.00: configured for UDMA/33

&gt; Jan 24 22:56:54 newt kernel: sd 1:0:0:0: SCSI error: return code =

&gt; 0x08000002

&gt; Jan 24 22:56:54 newt kernel: sdb: Current: sense key: Aborted Command

&gt; Jan 24 22:56:54 newt kernel: Additional sense: No additional sense

&gt; information

&gt; Jan 24 22:56:54 newt kernel: end_request: I/O error, dev sdb, sector

&gt; 128931703



Looks like a device error occured. You may want to check the concerning harddrive \
first. A Knoppix CD with fsck or a test tool from the specific harddisk manufacturer \
may help you. In case of a sector damage you ought to try to save your data before \
the entire harddisk fails.



Regards,

Peter



-- 

Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal für Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070125115604</emailId><senderName>Uwe Hermann</senderName><senderEmail>uwe@hermann-uwe.de</senderEmail><timestampReceived>2007-01-25 11:56:04-0400</timestampReceived><subject>Re: SATA errors</subject><body>

Hi,

On Wed, Jan 24, 2007 at 11:07:24PM +0100, Tobias Walkowiak wrote:
&gt; I just got some errors when accessing a file on my loop-aes'ed harddisk.
&gt; The syslog says
&gt; [...]
&gt; Jan 24 22:56:54 newt kernel: ata2: hard resetting port
&gt; Jan 24 22:56:54 newt kernel: ata2: SATA link up 1.5 Gbps (SStatus 113 SControl 310)
&gt; Jan 24 22:56:54 newt kernel: ata2.00: configured for UDMA/33
&gt; Jan 24 22:56:54 newt kernel: sd 1:0:0:0: SCSI error: return code = 0x08000002
&gt; Jan 24 22:56:54 newt kernel: sdb: Current: sense key: Aborted Command
&gt; Jan 24 22:56:54 newt kernel: Additional sense: No additional sense information
&gt; Jan 24 22:56:54 newt kernel: end_request: I/O error, dev sdb, sector 128931703
&gt; Jan 24 22:56:54 newt kernel: loop2: loop_end_io_transfer err=-5 bi_rw=0x0
&gt; [...]
&gt; with the last line repeating severeal times. Now I wonder if that's an
&gt; error in loop-aes, the harddisk or the linux kernel (my feelings tell me
&gt; that it is the latter one).

If I were you I'd install the smartmontools and check whether your disk
is slowly dying. I don't know whether this _is_ the case, but it could
be, so it's probably a good idea prepare backups...

http://smartmontools.sourceforge.net/


HTH, Uwe.
-- 
http://www.hermann-uwe.de  | http://www.holsham-traders.de
http://www.crazy-hacks.org | http://www.unmaintained-free-software.org

["signature.asc" (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070125133644</emailId><senderName>markus reichelt</senderName><senderEmail>ml@mareichelt.de</senderEmail><timestampReceived>2007-01-25 13:36:44-0400</timestampReceived><subject>Re: SATA errors</subject><body>

* Tobias Walkowiak &lt;tw@tobias-walkowiak.de&gt; wrote:

&gt; Jan 24 22:56:54 newt kernel: sd 1:0:0:0: SCSI error: return code = 0x08000002
&gt; Jan 24 22:56:54 newt kernel: sdb: Current: sense key: Aborted Command
&gt; Jan 24 22:56:54 newt kernel: Additional sense: No additional sense information
&gt; Jan 24 22:56:54 newt kernel: end_request: I/O error, dev sdb, sector 128931703
&gt; Jan 24 22:56:54 newt kernel: loop2: loop_end_io_transfer err=-5 bi_rw=0x0
&gt; [...]
&gt; with the last line repeating severeal times. Now I wonder if that's
&gt; an error in loop-aes, the harddisk or the linux kernel (my feelings
&gt; tell me that it is the latter one).

it's a hardware-related issue: the return code means "power-on or
self-test failure", so i'd run smartmontools to check the drive

however, if you are using a recent kernel within the screw-up-range
of 2.6.1[8|9] chances are that it has something to do with the
kernel. if the drive checks out fine consult lkml.

-- 
left blank, right bald

[Attachment #3 (application/pgp-signature)]
-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/

</body></email><email><emailId>20070118185757</emailId><senderName>Santiago Castillo</senderName><senderEmail>scastillo@aragon.es</senderEmail><timestampReceived>2007-01-18 18:57:57-0400</timestampReceived><subject>Re: raid5 loop-aes</subject><body>

Jari Ruusu escribió:

&gt;&gt;then i try different stride size for ext3 filesystem.... I tryed with 1, 2, 4,
&gt;&gt;8, 16, 32, and 64 and no stride parameters.
&gt;&gt;
&gt;&gt;I found that I get the best result with no stride parameter....
&gt; 
&gt; 
&gt; What kernel version are you using?

debian amd64 stock kernel 2.6.18-3
loop-aes modules also from debian distro.

&gt;&gt;I suppose that stride parameter is only useful when the fs is directly over RAID
&gt;&gt;and not over a loop device. is this true?
&gt; 
&gt; 
&gt; Loop-AES bangs backing device with page size requests even in situations
&gt; where file system bangs loop-AES with multi-page requests.

Does this mean that the stride parameter is useless when using loop-aes over RAID5?

Regards

-- 
________________________________________________
Santiago Castillo Oli        scastillo_EN_aragon_PUNTO_es
Técnico de sistemas                 976 71 50 06
Biblioteca de Aragón


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070119172139</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-01-19 17:21:39-0400</timestampReceived><subject>Re: raid5 loop-aes</subject><body>

Santiago Castillo wrote:
&gt; debian amd64 stock kernel 2.6.18-3
&gt; loop-aes modules also from debian distro.

I didn't find sources for debian 2.6.18-3 kernel, but I did find sources for
what appears to be 2.6.18-8

&gt; Does this mean that the stride parameter is useless when using loop-aes
&gt; over RAID5?

I looked at the kernel sources and mount man page, and I didn't find any
support for stride (or stripe) mount option for ext3 file system. Not in
base Linus' kernel or in debian/patches/* of above mentioned debian kernel.

Maybe I missed something obvious here. How are you using that stride
parameter?

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070122080041</emailId><senderName>Santiago Castillo</senderName><senderEmail>scastillo@aragon.es</senderEmail><timestampReceived>2007-01-22 08:00:41-0400</timestampReceived><subject>Re: raid5 loop-aes</subject><body>

Hi!

Jari Ruusu escribió:

&gt; I didn't find sources for debian 2.6.18-3 kernel, but I did find sources for
&gt; what appears to be 2.6.18-8

The kernel I use is here 
http://packages.debian.org/testing/admin/linux-image-2.6.18-3-amd64

Yesterday, i left the machine with a battery of test running bonnie++ on 
different chunk sizes raid0 and raid5 setups with ext2/ext3, with different 
stride values, and nocrypto/aes128/aes192/aes256.
I can post the result and the script here when it finish.

&gt;&gt;Does this mean that the stride parameter is useless when using loop-aes
&gt;&gt;over RAID5?

&gt; I looked at the kernel sources and mount man page, and I didn't find any
&gt; support for stride (or stripe) mount option for ext3 file system. Not in
&gt; base Linus' kernel or in debian/patches/* of above mentioned debian kernel.
&gt; 
&gt; Maybe I missed something obvious here. How are you using that stride
&gt; parameter?

The stride parameter is in mke2fs command.

This is from the mke2fs man page:
---------------------------------------------
                    stride=stripe-size
                           Configure  the  filesystem  for  a  RAID  array with
                           stripe-size filesystem blocks per stripe.
---------------------------------------------

When the tests get finished we'll see the effect of this parameter

Regards


-- 
________________________________________________
Santiago Castillo Oli        scastillo@aragon.es
Técnico de sistemas                 976 71 50 06
Biblioteca de Aragón


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070108083044</emailId><senderName>Marc Bevand</senderName><senderEmail>m.bevand@gmail.com</senderEmail><timestampReceived>2007-01-08 08:30:44-0400</timestampReceived><subject>Re: Seeking advice on Loop-AES performance with RAID5/RAID6</subject><body>

George Koss &lt;george_koss &lt;at&gt; hotmail.com&gt; writes:
&gt; 
&gt; On my penultimate file server, I used 5 Seagate 250G Sata drives with an AMD 
&gt; 3800+ AM2 CPU, and this got fairly (I thought) decent performance.  I did a 
&gt; fair amount of benchmarking, and got 300 MB/s writes and 200MB/s reads with 
&gt; a 5 disk raid0 and XFS.  Moving to RAID6 and Reiser3.6 dropped the 
&gt; performance to 71 MB/s read and 69 MB/s write.  (All benchmarks with 
&gt; Bonnie++ 1.03 using 4G data chunks).

I have assembled a couple of low-cost software RAID SATA Linux fileservers over 
the past 2-3 years. In my experience the most important factors determining the 
the max achievable read/write filesystem throughput is the SATA chipset used, 
and the bus it is sitting on (PCI, PCI-X, PCI-E, or directly integrated to the 
motherboard chipset, etc).

The perf numbers you cite over RAID0 are good (200-300 MB/s). Regarding RAID6 I 
can't comment since I have never used it, but if using RAID5 you should see 
much better numbers. For reference purpose one of the servers I have here is an 
old dual Opteron 244 (1.8 GHz), with two 4-port sii3124 (sata_sil24.ko) 
controllers on a 100 MHz 64-bit PCI-X bus with five SATA 1.5-Gbps Seagate 250 
GB drives, RAID5+jfs on top of all of them, and kernel 2.6.16.4.

I see 100-120 MB/s writes and 215-220 MB/s reads (just use dd and vmstat for 
benchmarking, no need to resort to Bonnie++).

You should see similar RAID5 numbers on your penultimate file server (since you 
get 200-300 MB/s with RAID0). My intuition tells me that RAID6 is responsible 
for the poor throughput (easy to determine with "vmstat 1" and "iostat -x 1").

&gt; Now I've built a totally new machine using an ASUS M2N-E motherboard with 
&gt; the NForce 570 Ultra chip set.  It has 2 GBytes of PC5300 ECC DDR2 memory, 
&gt; and six Seagate 400 GB SATA2 drives.  The CPU is a AMD 4200+ X2 dual core 
&gt; AM2 with dual 512K L2 caches.
&gt; [...]
&gt; But it all went to hell when I tried the full stack on the six drive RAID5 
&gt; or RAID6 array.  Performance for writing fell to a pitiful 15 Mbytes/sec.   
&gt; [...]
&gt; The best write speed I've gotten so far is 17 
&gt; Mbyte/s with RAID6 and 64K chunksizes on a reiser3.6 filesystem.
&gt; RAID5 performance is terrible when I stack loop-AES on top of it.   Without 
&gt; loop-AES, I'm getting 99 Mbytes/sec Read, and 105 Mbytes Write with RAID5.   
&gt; This is the performance level I want to hit, since it's just about right 
&gt; when transferring data with Gigabit ethernet.

First, reading at 100 MB/s on a 6-drive SATA2 RAID5 is not what I would call 
great performances. There is no need to benchmark loop-AES on top of that, you 
know there is already a pb with RAID performances.

&gt; My next step is to install Ubuntu AMD64 server on a spare partition and see 
&gt; if getting rid of X and KDE will help at all.  I've got about 121 tasks 
&gt; running with Kubuntu desktop, and only 64 with the Ubuntu server on the 
&gt; other machine.

If these 121 tasks are mostly idle, they shouldn't impact disk throughput in 
any way whatsoever.

&gt; Anybody got any ideas on how to find the problem?  I suspect that if I shell 
&gt; out $500 for an ARC-1220 raid controller, I can get the performance back up 
&gt; to 50 or 60 Mbytes/sec, but this seems to defeat the purpose of building a 
&gt; low cost Linux file server.

My suggestion is to benchmark step by step every layer of the storage subsystem 
with dd, to know exactly which one exhibits a perf pb. Each time, run "vmstat 
1" and "iostat -x 1" in parallel and post the output of these commands to the 
ML.

1. Use "dd bs=X" (X between 4k and 64k) to directly read from and write to a 
single partition of one of the drives, eg:
  $ dd if=/dev/zero of=/dev/sda2 bs=8k
  $ dd if=/dev/sda2 of=/dev/null bs=8k

2. Do the same thing with multiple instances of dd running in parallel to 
read/write 2, 3..., N disks at the same time.

3. This time create the RAID array and run dd on top of it, eg:
  $ dd if=/dev/zero of=/dev/md0 bs=8k
  $ dd if=/dev/md0 of=/dev/null bs=8k

4. Create a filesystem on top of the array, and run dd to write and read a 
file, eg:
  $ dd if=/dev/zero of=/mnt/foo bs=8k
  $ dd if=/mnt/foo of=/dev/null bs=8k

Each time, experience with various bs=X values, and report the output of 
vmstat/iostat.

My feeling is that it is likely that the SATA controller built in the Nforce 
570 chipset is not very efficient.

IMHO the best controllers you can buy today with 4 ports or more are the 
AHCI-based ones and the sii3124. Cheap (less than $70, or integrated into 
motherboards), as performant as the most expensive controllers (always able to 
handle the max read/write throughput with 1 disk on every port), NCQ support, 
hotplug support, and production-quality Linux drivers.

-marc


-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070109155144</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-01-09 15:51:44-0400</timestampReceived><subject>Re: Seeking advice on Loop-AES performance with RAID5/RAID6</subject><body>

George Koss wrote:
&gt; But it all went to hell when I tried the full stack on the six drive RAID5
&gt; or RAID6 array.  Performance for writing fell to a pitiful 15 Mbytes/sec.
&gt; I theorized that maybe the RAID helper thread was thrashing the caches, so I
&gt; reduced the raid array chunksize to 16K, then 8K, then 4K.  This didn't help
&gt; at all.   I increased the drive readahead to 1024 sectors, which seemed to
&gt; help the read performance, but did nothing for write performance.  The SATA2
&gt; drives are already using 16 sector transfers, which appears to be the
&gt; maximum possible.   I've tried ext3, xfs, jfs and reiser3.6 filesystems,
&gt; nothing seems to help.  The best write speed I've gotten so far is 17
&gt; Mbyte/s with RAID6 and 64K chunksizes on a reiser3.6 filesystem.
&gt; 
&gt; RAID5 performance is terrible when I stack loop-AES on top of it.   Without
&gt; loop-AES, I'm getting 99 Mbytes/sec Read, and 105 Mbytes Write with RAID5.
&gt; This is the performance level I want to hit, since it's just about right
&gt; when transferring data with Gigabit ethernet.

Part of the reason why loop-AES on top of linux software RAID5 performs
badly is because loop-AES bangs the backing device with page size requests.

Linux software RAID5 wants bigger requests to be able to provide better
MBytes/s values. Partial stripe size writes are performance killers for
linux software RAID5 which has to do 2 reads and 2 writes for each write
request. I haven't looked at RAID6 parity algorithm, but I assume that it
has to read all unmodified data blocks in stripe and 3 writes for each write
request.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email><email><emailId>20070113034716</emailId><senderName>"George Koss"</senderName><senderEmail>george_koss@hotmail.com</senderEmail><timestampReceived>2007-01-13 03:47:16-0400</timestampReceived><subject>Re: Seeking advice on Loop-AES performance with RAID5/RAID6</subject><body>

Thanks to Marc Bevand for pointing out that my basic RAID5 performance was 
deficient to start with.   I found 2 further problems on investigation.   It 
seems that 3 of the 6 drives had factory jumpers that limited them to SATA1 
speed of 1.5Gbps.  This was unexpected since I bought 6 identical boxes off 
the shelf.  Half the boxes had 7200.9 drives, and the other had 7200.10 
drives, but all were marked as containing 7200.9 drives.  It looks like 
Seagate is switching production over to 7200.10, and neglecting to change 
the box stickers.

The other problem, which just killed the RAID5 performance, was that I was 
creating the MD device with partitions, in an attempt to be fancy and trying 
encryption on the root partition.   These partitions were NOT aligned with 
the RAID stripe boundaries, and performance become very poor because of the 
partition alignments.  So I went back to a single monolithic raid device.

I then did a lot of testing trying to see what I could get.   Raw RAID5 
performance was much better, with 129 Mbyte/sec writing, and 229 Mbyte/s 
reading (no encryption).   But alas, there was still a big hit when adding 
loop-aes between the filesystem and the raid device.

These are my results, in Mbytes/sec:

# Write   Read      File System, encryption, Chunksize, Disk config
89864,  93406,     reiserfs_aes256_cs64k_raid0,
100195, 104740,    xfs_su16_sw96_aes256_cs64k_raid0,

28142,  85033,     xfs_su1_sw6_aes256_cs4k_raid10,
31375,  65902,     reiserfs_aes256_cs4k_raid10,
73083,  71314,     reiserfs_aes256_cs64k_raid10,
99723,  94169,     xfs_aes256_cs64k_raid10,
99472,  97149,     xfs_su16_sw96_aes256_cs64k_raid10,

35530,  67729,     reiserfs_aes256_cs4k_raid5,
33692,  87475,     xfs_su0_sw0_aes256_cs4k_raid5,
34126,  89407,     xfs_su1_sw5_aes256_cs4k_raid5,
34047,  73184,     reiserfs_aes256_cs16k_raid5,
29406,  101852,    xfs_su4_sw_20_aes256_cs16k_raid5,
33283,  69343,     reiserfs_aes256_cs32k_raid5,
29771,  98699,     xfs_su8_sw40_aes256_cs32k_raid5,
26330,  56534,     reiserfs_aes256_cs256k_raid5,
24633,  60235,     xfs_su64_sw320_aes256_cs256k_raid5,

# for xfs file systems, su=Stripe Unit, sw=Stripe Width, in 4K blocks

I found that specifying the proper stripe unit and stripe width to XFS 
resulted in a performance improvement, but it's pretty clear that loop-aes 
is hiding the disk geometry from the file system, and this is part of the 
problem of the performance hit.

Raid10 had decent write/read speed, at the cost of 800 Gbytes of space lost. 
  But I'm cheap, so I'll stick with Raid5.

As an experiment, I tried building a raid5 device on top of 6 loop devices 
running loop-aes.   This was horrible beyond belief, with a raid rebuild 
rate of only 2 Mbytes/second.   I stopped it after 5 minutes of watching it 
crawl along.   Bad Idea.

&gt; 
&gt; Part of the reason why loop-AES on top of linux software RAID5 performs
&gt; badly is because loop-AES bangs the backing device with page size requests.
&gt; 
&gt; Linux software RAID5 wants bigger requests to be able to provide better
&gt; MBytes/s values. Partial stripe size writes are performance killers for
&gt; linux software RAID5 which has to do 2 reads and 2 writes for each write
&gt; request. I haven't looked at RAID6 parity algorithm, but I assume that it
&gt; has to read all unmodified data blocks in stripe and 3 writes for each 
&gt; write
&gt; request.
&gt; 
&gt; --
&gt; Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

I think you have put your finger on the main problem, and I'm wondering if 
higher performance can be achieved by adding the encryption functionality 
into the top interface of the raid device, so that it can perform 
encrypt/decrypt on chunksize blocks, rather than 4k pages.    Alternatively, 
I wonder if it's possible to hack or adjust loop-aes so that it presents a 
larger blocksize, like 16K or 32K, rather than the standard 4K page.  
Matching the chunksize of the raid device ought to provide *some* 
improvement.  I noted that the highest write performance came from a 4K raid 
chunksize.

In any event, I've chosen to go with a 16K chunksize on the raid5 array, and 
just bite my tongue and endure the lower write performance, since read 
performance is more important than writing for me.

Thank you everyone!

George Koss

_________________________________________________________________
Fixing up the home? Live Search can help 
http://imagine-windowslive.com/search/kits/default.aspx?kit=improve&amp;locale=en-US&amp;source=hmemailtaglinenov06&amp;FORM=WLMTAG



-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070124102921</emailId><senderName>Herbert Xu</senderName><senderEmail>herbert@gondor.apana.org.au</senderEmail><timestampReceived>2007-01-24 10:29:21-0400</timestampReceived><subject>[PATCH 6/6] [CRYPTO] api: Use structs for cipher/compression</subject><body>

[CRYPTO] api: Use structs for cipher/compression

Now that all cipher/compression users have switched over to the new
allocation scheme, we can get rid of the compatility defines and use
proper structs for them.

Signed-off-by: Herbert Xu &lt;herbert@gondor.apana.org.au&gt;
---

 include/linux/crypto.h |   21 ++++++++++++++-------
 1 files changed, 14 insertions(+), 7 deletions(-)

diff --git a/include/linux/crypto.h b/include/linux/crypto.h
--- a/include/linux/crypto.h
+++ b/include/linux/crypto.h
@@ -311,13 +311,18 @@ struct crypto_tfm {
 	void *__crt_ctx[] CRYPTO_MINALIGN_ATTR;
 };
 
-#define crypto_cipher crypto_tfm
-#define crypto_comp crypto_tfm
-
 struct crypto_blkcipher {
 	struct crypto_tfm base;
 };
 
+struct crypto_cipher {
+	struct crypto_tfm base;
+};
+
+struct crypto_comp {
+	struct crypto_tfm base;
+};
+
 struct crypto_hash {
 	struct crypto_tfm base;
 };
@@ -576,7 +581,7 @@ static inline struct crypto_cipher *cryp
 
 static inline struct crypto_tfm *crypto_cipher_tfm(struct crypto_cipher *tfm)
 {
-	return tfm;
+	return &amp;tfm-&gt;base;
 }
 
 static inline void crypto_free_cipher(struct crypto_cipher *tfm)
@@ -776,7 +781,7 @@ static inline struct crypto_comp *crypto
 
 static inline struct crypto_tfm *crypto_comp_tfm(struct crypto_comp *tfm)
 {
-	return tfm;
+	return &amp;tfm-&gt;base;
 }
 
 static inline void crypto_free_comp(struct crypto_comp *tfm)
@@ -807,14 +812,16 @@ static inline int crypto_comp_compress(s
                                        const u8 *src, unsigned int slen,
                                        u8 *dst, unsigned int *dlen)
 {
-	return crypto_comp_crt(tfm)-&gt;cot_compress(tfm, src, slen, dst, dlen);
+	return crypto_comp_crt(tfm)-&gt;cot_compress(crypto_comp_tfm(tfm),
+						  src, slen, dst, dlen);
 }
 
 static inline int crypto_comp_decompress(struct crypto_comp *tfm,
                                          const u8 *src, unsigned int slen,
                                          u8 *dst, unsigned int *dlen)
 {
-	return crypto_comp_crt(tfm)-&gt;cot_decompress(tfm, src, slen, dst, dlen);
+	return crypto_comp_crt(tfm)-&gt;cot_decompress(crypto_comp_tfm(tfm),
+						    src, slen, dst, dlen);
 }
 
 #endif	/* _LINUX_CRYPTO_H */
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070124103948</emailId><senderName>Herbert Xu</senderName><senderEmail>herbert@gondor.apana.org.au</senderEmail><timestampReceived>2007-01-24 10:39:48-0400</timestampReceived><subject>Re: [PATCH] geode-aes.c: Convert pci_module_init() to pci_register_driver()</subject><body>

On Fri, Jan 12, 2007 at 02:36:25PM +0100, Richard Knutsson wrote:
&gt; Signed-off-by: Richard Knutsson &lt;ricknu-0@student.ltu.se&gt;

Patch applied.  Thanks!
-- 
Visit Openswan at http://www.openswan.org/
Email: Herbert Xu ~{PmV&gt;HI~} &lt;herbert@gondor.apana.org.au&gt;
Home Page: http://gondor.apana.org.au/~herbert/
PGP Key: http://gondor.apana.org.au/~herbert/pubkey.txt
-
To unsubscribe from this list: send the line "unsubscribe linux-crypto" in
the body of a message to majordomo@vger.kernel.org
More majordomo info at  http://vger.kernel.org/majordomo-info.html
</body></email><email><emailId>20070125155320</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-01-25 15:53:20-0400</timestampReceived><subject>Re: SATA errors</subject><body>

Tobias Walkowiak &lt;tw@tobias-walkowiak.de&gt; wrote:
&gt; I just got some errors when accessing a file on my loop-aes'ed harddisk.
&gt; The syslog says
&gt; [...]
&gt; Jan 24 22:56:54 newt kernel: ata2: hard resetting port
&gt; Jan 24 22:56:54 newt kernel: ata2: SATA link up 1.5 Gbps (SStatus 113
&gt; SControl 310)
&gt; Jan 24 22:56:54 newt kernel: ata2.00: configured for UDMA/33
&gt; Jan 24 22:56:54 newt kernel: sd 1:0:0:0: SCSI error: return code =
&gt; 0x08000002
&gt; Jan 24 22:56:54 newt kernel: sdb: Current: sense key: Aborted Command
&gt; Jan 24 22:56:54 newt kernel: Additional sense: No additional sense
&gt; information
&gt; Jan 24 22:56:54 newt kernel: end_request: I/O error, dev sdb, sector
&gt; 128931703


Looks like a device error occured. You may want to check the concerning harddrive \
first. A Knoppix CD with fsck or a test tool from the specific harddisk manufacturer \
may help you. In case of a sector damage you ought to try to save your data before \
the entire harddisk fails.


Regards,
Peter
-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070129124242</emailId><senderName></senderName><senderEmail>peter_22</senderEmail><timestampReceived>2007-01-29 12:42:42-0400</timestampReceived><subject>Re: SATA errors [SOLVED]</subject><body>

Tobias Walkowiak &lt;tw@tobias-walkowiak.de&gt; wrote:
An: Crypto ML &lt;linux-crypto@nl.linux.org&gt;
Betreff: Re: SATA errors [SOLVED]
&gt; Thanks for your answers and hints. After doing checks with a simple
&gt; badblocks(8) several errors have been shown. The smartmontools weren't
&gt; working on that drive. I get an error like
&gt; Default self test failed [unsupported scsi opcode]
&gt; 
&gt; So, there have been no SW-related errors neither to the kernel (what
&gt; wonder, although I'm using a 2.6.18 ;) nor to loop-aes (sorry for having
&gt; even the least doubt ;) but simply some blocks near the end of the hard
&gt; drive are broken. Now I will try out the Seagate support for Maxtor
&gt; harddisks.

Could you please post the manufacturer &amp; serial number / model of your broken drive? \
Just to be on the safe side and not to buy that one. Tanks!

Regards,
Peter
-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/


</body></email><email><emailId>20070131195854</emailId><senderName>Jari Ruusu</senderName><senderEmail>jariruusu@users.sourceforge.net</senderEmail><timestampReceived>2007-01-31 19:58:54-0400</timestampReceived><subject>Re: SuSE 10.2 and LOADNATIONALKEYB=1</subject><body>

Florian Reitmeir wrote:
&gt; Just use dmcrypt and/or LUKS both are in the standard Kernel

dm-crypt has not caught up with loop-AES yet. dm-crypt lacks countermeasures
against leaking changed plaintext location. dm-crypt lacks countermeasures
against key leaks by allowing DRAM cells to develop detectable property. For
more info see http://www.cypherpunks.to/~peter/usenix01.pdf and loop-AES'
KEYSCRUB=y build option.

Peter's problem is incompatible character encodings. He insists on using
passphrase characters that have different encodings under different setups.

-- 
Jari Ruusu  1024R/3A220F51 5B 4B F9 BB D3 3F 52 E9  DB 1D EB E3 24 0E A9 DD

-
Linux-crypto:  cryptography in and on the Linux system
Archive:       http://mail.nl.linux.org/linux-crypto/



</body></email></emails>