<?xml version="1.0" encoding="utf-8"?>
<emails><email><emailId>20070130184838</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-30 18:48:38-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

&gt;&gt;&gt; * Support for Gtk+ 2.8 and 2.10
&gt;&gt;&gt; * Corrected version of GtkPlug override
&gt;&gt;
&gt;&gt; These I'm supposed to have reviewed yesterday... they're Elizabeth's, no?
&gt;
&gt; Yep. GtkPlug slightly modified though.

So because I'm one day late you re-release an unofficial version of PHP-GTK 
and announce it as an official project?!

And we don't have the modification offered for review either?

&gt;&gt; See archives. There's a modified library in there somewhere that's
&gt;&gt; wrapped as part of Gnope's distro. The code needs to be either made
&gt;&gt; public or offered back to the original author, preferably both, and it
&gt;&gt; should be made clear that it's a modification. (I wasn't 'having a go'
&gt;&gt; at edge for that.)
&gt;
&gt; Christian should really release that code then.
&gt;
&gt; Now that I understand the situation; I'll leave it to Andrei to give the
&gt; final word on what goes in and what doesn't. I'm not even asking for
&gt; libgnome; just 2.8, 2.10, GtkSpell and GtkExtras.

GtkExtra (no 's') was requested on the list last week, and it's a trivial 
extension to wrap. I even asked on the dev list if you or Elizabeth could do 
it if you had time before I did.

&gt; Also, it would be nice to know the policy that we're going to follow
&gt; from now on. If someone has something new to put into PHP-GTK does he/she:
&gt;
&gt; a) Commit directly if he/she can?
&gt; b) Post to mailing list with tarball so that it can be "discussed",
&gt; which basically means "never"?
&gt; c) Provide it to the general public by other means: gnope, edge, whatever?

Anything but C, but I'll let Andrei comment on that since he's the project 
lead. Personally I'd ask for peer review for anything intended to go into 
the core and get Andrei's approval before committing a new extension or 
generator changes, but that's just me.

- Steph 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130190947</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-01-30 19:09:47-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

&gt; So because I'm one day late you re-release an unofficial version of
&gt; PHP-GTK and announce it as an official project?!
&gt; 
&gt; And we don't have the modification offered for review either?

I never said it was an "official project". Elizabeth just posted the
modified version to the list.

&gt; GtkExtra (no 's') was requested on the list last week, and it's a
&gt; trivial extension to wrap. I even asked on the dev list if you or
&gt; Elizabeth could do it if you had time before I did.

And I said I would do it; and I did. Instead of putting it on a tarball,
I put in an SVN repository with some other extensions I had lying around
which were'nt in CVS so other people could use it. So maybe I shouldn't
have called it php-gtk-edge. My mistake; I apologize. Let's call it the
"Patches waiting for approval" repository instead.

&gt; Anything but C, but I'll let Andrei comment on that since he's the
&gt; project lead. Personally I'd ask for peer review for anything intended
&gt; to go into the core and get Andrei's approval before committing a new
&gt; extension or generator changes, but that's just me.

Trouble is, that slows down development a bit. Frankly, I don't mind it;
but it would be nice to let people try out stuff as they happen. Users
can provide useful feedback. And so what if CVS is broken for sometime,
everyone expects CVS to be broken anyway! If someone wants PHP-GTK to
just work; download the alpha release.

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130191103</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-30 19:11:03-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

&gt;&gt; And we don't have the modification offered for review either?
&gt;
&gt; I never said it was an "official project". Elizabeth just posted the
&gt; modified version to the list.

Yeah our mails crossed in the ether :) Thanks Elizabeth.

&gt;&gt; GtkExtra (no 's') was requested on the list last week, and it's a
&gt;&gt; trivial extension to wrap. I even asked on the dev list if you or
&gt;&gt; Elizabeth could do it if you had time before I did.
&gt;
&gt; And I said I would do it; and I did. Instead of putting it on a tarball,
&gt; I put in an SVN repository with some other extensions I had lying around
&gt; which were'nt in CVS so other people could use it. So maybe I shouldn't
&gt; have called it php-gtk-edge. My mistake; I apologize. Let's call it the
&gt; "Patches waiting for approval" repository instead.

I don't understand what's so hard about saying 'I have two extensions here, 
can I commit them' and marking them EXPERIMENTAL?

&gt;&gt; Anything but C, but I'll let Andrei comment on that since he's the
&gt;&gt; project lead. Personally I'd ask for peer review for anything intended
&gt;&gt; to go into the core and get Andrei's approval before committing a new
&gt;&gt; extension or generator changes, but that's just me.
&gt;
&gt; Trouble is, that slows down development a bit. Frankly, I don't mind it;
&gt; but it would be nice to let people try out stuff as they happen.

It slows down development a bit, but it's called 'discipline'. Look at what 
happens in PHP development, and you'll see that _new code_ is dealt with in 
exactly the same way. If we didn't have that there'd be chaos.... The only 
difference is there's PECL for experimental extensions, but even there 
you're expected to mention on-list that you're planning a new extension 
before you actually commit it.

Users
&gt; can provide useful feedback. And so what if CVS is broken for sometime,
&gt; everyone expects CVS to be broken anyway!

Erm, you might. I don't. PHP CVS rarely is, why should PHP-GTK CVS be so?

- Steph 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130203146</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-30 20:31:46-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

On Jan 30, 2007, at 9:17 AM, Anant Narayanan wrote:

&gt;&gt; That's been happening for over a year...
&gt;
&gt; What? Where?

Yes, Steph, where?

&gt; I re-iterate: the sole purpose of the "edge" repository was to make
&gt; available to the public some widgets that they've been wanting for a
&gt; while; especially GtkTrayIcon and GtkSheet. I could have committed 
&gt; those
&gt; to the main repository as easily; but Andrei never actually said "Go
&gt; ahead", which is why I didn't.

I didn't know you were ready to offer GtkTrayIcon and GtkSheet. If you 
sent an email about it, I must have missed it, and I'm sorry about 
that.

&gt; If you want 2.8/2.10 and all those extensions in the main CVS; just say
&gt; the word; I would be more than happy to do so! Last I heard however, 
&gt; the
&gt; attitude was "Oh no, not another extension please!" :)

Those aren't my words.. :)

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130204215</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-30 20:42:15-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

On Jan 30, 2007, at 10:57 AM, Anant Narayanan wrote:

&gt; Trouble is, that slows down development a bit. Frankly, I don't mind 
&gt; it;
&gt; but it would be nice to let people try out stuff as they happen. Users
&gt; can provide useful feedback. And so what if CVS is broken for sometime,
&gt; everyone expects CVS to be broken anyway! If someone wants PHP-GTK to
&gt; just work; download the alpha release.

CVS should never be left in a broken state, by which I mean that you 
should be able to check out CVS tree, run default configure, build 
everything without errors, and run the regression tests. Outside of 
these requirements, it's fine to commit experimental stuff into CVS as 
long as it's marked so.

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130205352</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-30 20:53:52-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

The problem with 'C' is that people don't offer patches here, they just add 
them to Gnope or whatever and then expect us to support the users.

Andrei, in answer to your earlier queries, I turned down a modified libary 
because the source wasn't made publicly available/marked as modified/offered 
back to the originator, so there's never been a Windows version of 
GtkSourceView available anywhere except via Gnope. I have no idea what other 
extensions are offered there because it doesn't tell you that on the site. I 
also don't have any access to the Gnope installer source. Users coming onto 
the php-gtk-general list with questions about Windows installations are 
invariably advised to use Gnope, and when they have problems I can't advise 
them because I've no idea what it does. Does it make a PHP-GTK registry 
entry on the target system? - no idea, and I'm not about to install it to 
find out and risk messing up all the other PHP and PHP-GTK related 
installations on my box. Does it use the same paths as the PHP-GTK 2 
binaries on the official site? Again, no idea...

Elizabeth wrote earlier to say that the GtkSourceView library now has an 
official win32 port which is distributed as a binary, so we can have a win32 
version in the distributed binary (and the appropriate files in the CVS 
tree) now without any qualms whatever, but we haven't had that until today.

- Steph

----- Original Message ----- 
From: "Andrei Zmievski" &lt;andrei@gravitonic.com&gt;
To: "Anant Narayanan" &lt;anant@kix.in&gt;
Cc: &lt;php-gtk-general@lists.php.net&gt;; "PHP-GTK dev" 
&lt;php-gtk-dev@lists.php.net&gt;; "Steph Fox" &lt;steph@zend.com&gt;
Sent: Tuesday, January 30, 2007 8:40 PM
Subject: [PHP-GTK] Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE


&gt; On Jan 30, 2007, at 10:37 AM, Anant Narayanan wrote:
&gt;&gt; Also, it would be nice to know the policy that we're going to follow
&gt;&gt; from now on. If someone has something new to put into PHP-GTK does 
&gt;&gt; he/she:
&gt;&gt;
&gt;&gt; a) Commit directly if he/she can?
&gt;&gt; b) Post to mailing list with tarball so that it can be "discussed",
&gt;&gt; which basically means "never"?
&gt;&gt; c) Provide it to the general public by other means: gnope, edge, 
&gt;&gt; whatever?
&gt;
&gt; I think b) is the option I'd prefer, even though historically you've had 
&gt; trouble with getting feedback. It's something that we have to work on and 
&gt; I promise to be more active in this area. Option c) is fine for cases 
&gt; where discussion on the list makes it clear that the extension/patch is 
&gt; not going to make it in to the main CVS tree.
&gt;
&gt; -Andrei
&gt;
&gt; -- 
&gt; PHP-GTK General Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130210610</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-01-30 21:06:10-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

Steph Fox wrote:
&gt; The problem with 'C' is that people don't offer patches here, they just 
&gt; add them to Gnope or whatever and then expect us to support the users.
&gt; 
&gt; Andrei, in answer to your earlier queries, I turned down a modified 
&gt; libary because the source wasn't made publicly available/marked as 
&gt; modified/offered back to the originator, so there's never been a Windows 
&gt; version of GtkSourceView available anywhere except via Gnope. I have no 
&gt; idea what other extensions are offered there because it doesn't tell you 
&gt; that on the site. I also don't have any access to the Gnope installer 
&gt; source. 

Actually, the installer source is available right on the gnope site - 
it's just a nsis installer (open source install builder for windows), 
and it might be a smart idea to have an official php-gtk2 installer for 
windows so we don't have to say "you don't know what you're doing, go 
use gnope" (pygtk has one - and yes I can volunteer to help support the 
thing :)

&gt; Elizabeth wrote earlier to say that the GtkSourceView library now has an 
&gt; official win32 port which is distributed as a binary, so we can have a 
&gt; win32 version in the distributed binary (and the appropriate files in 
&gt; the CVS tree) now without any qualms whatever, but we haven't had that 
&gt; until today.
&gt; 
&gt; - Steph

Gtksourceview is at 1.8.3 - windows support has been available since 
1.5.5 - which was released in January of 2006 (over a year ago) the 
caveat there is that 1.5.5 + requires Gtk 2.8+ but I've been building 
against 2.8 libs just because so many windows bugs are fixed in that 
branch, so I've been distributing the gtksourceview extension as well - 
I have a working config.w32 for it I can send.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130212002</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-30 21:20:02-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

&gt; Steph Fox wrote:
&gt;&gt; The problem with 'C' is that people don't offer patches here, they just 
&gt;&gt; add them to Gnope or whatever and then expect us to support the users.
&gt;&gt;
&gt;&gt; Andrei, in answer to your earlier queries, I turned down a modified 
&gt;&gt; libary because the source wasn't made publicly available/marked as 
&gt;&gt; modified/offered back to the originator, so there's never been a Windows 
&gt;&gt; version of GtkSourceView available anywhere except via Gnope. I have no 
&gt;&gt; idea what other extensions are offered there because it doesn't tell you 
&gt;&gt; that on the site. I also don't have any access to the Gnope installer 
&gt;&gt; source.
&gt;
&gt; Actually, the installer source is available right on the gnope site -

Ah, I found it now - okay. It's hidden from view on my laptop because I have 
to scroll down to see it :)

&gt; it's just a nsis installer (open source install builder for windows), and 
&gt; it might be a smart idea to have an official php-gtk2 installer for 
&gt; windows so we don't have to say "you don't know what you're doing, go use 
&gt; gnope" (pygtk has one - and yes I can volunteer to help support the thing 
&gt; :)

I've asked for this before and got nowhere... so 'yes please'.

&gt;&gt; Elizabeth wrote earlier to say that the GtkSourceView library now has an 
&gt;&gt; official win32 port which is distributed as a binary, so we can have a 
&gt;&gt; win32 version in the distributed binary (and the appropriate files in the 
&gt;&gt; CVS tree) now without any qualms whatever, but we haven't had that until 
&gt;&gt; today.
&gt;&gt;
&gt;&gt; - Steph
&gt;
&gt; Gtksourceview is at 1.8.3 - windows support has been available since 
&gt; 1.5.5 - which was released in January of 2006 (over a year ago) the caveat 
&gt; there is that 1.5.5 + requires Gtk 2.8+ but I've been building against 2.8 
&gt; libs just because so many windows bugs are fixed in that branch, so I've 
&gt; been distributing the gtksourceview extension as well - I have a working 
&gt; config.w32 for it I can send.

When I say 'we haven't had that (option) until today' you can read it as 'as 
far as I knew, xxoes' version was the only one available'. Because that's 
how it was presented here, and quite probably that was the case at the time.

You have CVS access, you don't need permission to add that kind of thing to 
an existing extension :)  Please feel free. The only thing is you might need 
a GTK version check in it, because it sounds like we're on dodgy ground if 
we wrap it pre-2.8.

- Steph


&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130214348</emailId><senderName>"Madeleine D."</senderName><senderEmail>mmdrake@bctonline.com</senderEmail><timestampReceived>2007-01-30 21:43:48-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing</subject><body>




&gt; Actually, the installer source is available right on the gnope site - 
&gt; it's just a nsis installer (open source install builder for windows), 
&gt; and it might be a smart idea to have an official php-gtk2 installer 
&gt; for windows so we don't have to say "you don't know what you're doing, 
&gt; go use gnope" (pygtk has one - and yes I can volunteer to help support 
&gt; the thing :)
&gt;
&gt;

If that's going to happen, and I think that would be great, please make 
sure it works on Win98.  The last I knew, Gnope did not, so the helpful 
advice about going there for PHP-Gtk2 has been useless for us.

If I can help, let me know.

Madeleine D.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130220316</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-30 22:03:16-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

&gt;&gt; Actually, the installer source is available right on the gnope site - 
&gt;&gt; it's just a nsis installer (open source install builder for windows), and 
&gt;&gt; it might be a smart idea to have an official php-gtk2 installer for 
&gt;&gt; windows so we don't have to say "you don't know what you're doing, go use 
&gt;&gt; gnope" (pygtk has one - and yes I can volunteer to help support the thing 
&gt;&gt; :)
&gt;&gt;
&gt;
&gt; If that's going to happen, and I think that would be great, please make 
&gt; sure it works on Win98.  The last I knew, Gnope did not, so the helpful 
&gt; advice about going there for PHP-Gtk2 has been useless for us.

Hi Madeleine,

Since Win98 is going to get its own distro, the installer to go with it 
would also be a separate project.

&gt; If I can help, let me know.

Be careful what you say :)

- Steph

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070614125734</emailId><senderName>Diego Feitosa</senderName><senderEmail>diego@dnfeitosa.com</senderEmail><timestampReceived>2007-06-14 12:57:34-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

    Hi Elizabeth,

    By now, it worked at Windows 2003 SP2 without any problems... Well 
done!! :)
    I'll make more intensive tests with some applications that I have here.

Elizabeth Smith escreveu:
&gt; Windows builds of the beta tarball are available from
&gt;
&gt; http://perisama.net/php-gtk2-beta
&gt;
&gt; The zip files include the entire gtk runtime, php binaries, and 
&gt; php-gtk2.  You should be able to unzip and run.  The 2.6.9 version is 
&gt; for Win 95/98 users and has no extensions.  The 2.10.12 version has 
&gt; all extensions plus dependent files (which is why it's so large, 
&gt; gtkhtml alone is very big).  Yell if it breaks.
&gt;

-- 
Diego Feitosa
www.dnfeitosa.com &lt;http://www.dnfeitosa.com&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070614125746</emailId><senderName>Diego Feitosa</senderName><senderEmail>diego@dnfeitosa.com</senderEmail><timestampReceived>2007-06-14 12:57:46-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

    Hi Elizabeth,

    By now, it worked at Windows 2003 SP2 without any problems... Well 
done!! :)
    I'll make more intensive tests with some applications that I have here.

Elizabeth Smith escreveu:
&gt; Windows builds of the beta tarball are available from
&gt;
&gt; http://perisama.net/php-gtk2-beta
&gt;
&gt; The zip files include the entire gtk runtime, php binaries, and 
&gt; php-gtk2.  You should be able to unzip and run.  The 2.6.9 version is 
&gt; for Win 95/98 users and has no extensions.  The 2.10.12 version has 
&gt; all extensions plus dependent files (which is why it's so large, 
&gt; gtkhtml alone is very big).  Yell if it breaks.
&gt;

-- 
Diego Feitosa
www.dnfeitosa.com &lt;http://www.dnfeitosa.com&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070614230220</emailId><senderName>Elizabeth Smith</senderName><senderEmail>emsmith@elizabethmariesmith.com</senderEmail><timestampReceived>2007-06-14 23:02:20-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

FOURTICQ Benjamin wrote:
&gt; Very nice job, thanks a lot, the team made a great job !
&gt; I use different versions of WinXP Pro with SP1 or SP2, seems to work.
&gt;
&gt; I have some difficulties to make gtkhtml, but I like new minors 
&gt; corrections like icon window, clean of warning message with 
&gt; urgency_hint... I'll continue my tests.
&gt;
&gt; Benjamin.
There's a trick to gtkhtml -

GtkHtml requires GConf to be running in order to work right.

You should see a file named gconfd-2.exe - That needs to be running in 
order for gtkhtml to work. There are two ways to accomplish this. You 
can call php.exe using the following syntax

gconfd-2 | php myscript.php

or you can use exec or popen or proc_open in your script, before you 
call new GtkHtml, to start gconfd-2.exe

Kind of annoying, but it's a gnome thing.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070614230913</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-06-14 23:09:13-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

There has to be a way to automate that for the end users...

no?

----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: "FOURTICQ Benjamin" &lt;benjamin.fourticq@ben-fr.com&gt;; 
&lt;php-gtk-dev@lists.php.net&gt;
Sent: Friday, June 15, 2007 12:02 AM
Subject: [PHP-GTK-DEV] Re: [PHP-GTK] Re: [PHP-GTK-DEV] Beta: Call for 
testing


&gt; FOURTICQ Benjamin wrote:
&gt;&gt; Very nice job, thanks a lot, the team made a great job !
&gt;&gt; I use different versions of WinXP Pro with SP1 or SP2, seems to work.
&gt;&gt;
&gt;&gt; I have some difficulties to make gtkhtml, but I like new minors 
&gt;&gt; corrections like icon window, clean of warning message with 
&gt;&gt; urgency_hint... I'll continue my tests.
&gt;&gt;
&gt;&gt; Benjamin.
&gt; There's a trick to gtkhtml -
&gt;
&gt; GtkHtml requires GConf to be running in order to work right.
&gt;
&gt; You should see a file named gconfd-2.exe - That needs to be running in 
&gt; order for gtkhtml to work. There are two ways to accomplish this. You can 
&gt; call php.exe using the following syntax
&gt;
&gt; gconfd-2 | php myscript.php
&gt;
&gt; or you can use exec or popen or proc_open in your script, before you call 
&gt; new GtkHtml, to start gconfd-2.exe
&gt;
&gt; Kind of annoying, but it's a gnome thing.
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070614231350</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-06-14 23:13:50-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

&gt; Steph Fox wrote:
&gt;&gt; I'm just wondering how it's quadrupled since alpha?
&gt;&gt;
&gt;&gt; I agree with you Elizabeth - with it being that size, definitely keep it 
&gt;&gt; as a separate download. The idea was never to compete with the JRE for 
&gt;&gt; bulk :)
&gt;&gt;
&gt;&gt; - Steph
&gt; I think it might be a smart idea to separate out the extensions and their 
&gt; runtime components (for example, gtkhtml has an ENORMOUS number of files 
&gt; needed - like most of bonobo and gconf - just to run).  But the alpha 
&gt; didn't have any of the php binary files, and these do (plus the alpha was 
&gt; missing some runtime files, and 2.10 is a lot bigger than 2.6.9) so take 
&gt; that into account when comparing sizes.

I was only talking about the debug pack, I'm well aware of the scary size of 
GTK+ these days.

Have you tried building in gconf as a static library? Or is that a silly 
suggestion for some reason?

- Steph



&gt;
&gt; -- 
&gt; PHP-GTK General Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070718194534</emailId><senderName>Pablo DallOglio</senderName><senderEmail>pablo@dalloglio.net</senderEmail><timestampReceived>2007-07-18 19:45:34-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk /ext/gtk+ gtk.overrides</subject><body>

ok ok. I have to confess I'm very worried about that.

I believe these types must be on Gobject, but they should be there since
the beggining. Now there are many sites out there with samples about
GtkTreeView usage and Scott and I have books publised about php-gtk2
with many samples using these types (Gtk::TYPE_BOOLEAN...).

Should we review all the sites content ? And what about the books ? A
guy buy the book, type the sample and it doesn't work... so he blames
php-gtk, because it doesn't work fine...

It has been dificult in these last years to conquer new users and these
BC breaks move them away from php-gtk2.

PS: I copied php-gtk-dev because I think this should be reconsidered.

Pablo

Em Qua, 2007-07-18 Ã s 15:28 -0400, Elizabeth Smith escreveu:
&gt; Pablo DallOglio wrote:
&gt; &gt; If I understand, it changes the current way of declaring a GtkTreeStore
&gt; &gt; object ?
&gt; &gt;
&gt; &gt; $store = new GtkTreeStore(Gtk::TYPE_STRING, Gtk::TYPE_BOOLEAN);
&gt; &gt;
&gt; &gt; Pablo
&gt; &gt;   
&gt; yes
&gt; 
&gt; $store = new GtkTreeStore(GObject::TYPE_STRING, GObject::TYPE_BOOLEAN);
&gt; 
&gt; ;)
&gt; 
&gt;  

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070718210201</emailId><senderName>bob majdak jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-07-18 21:02:01-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk /ext/gtk+ gtk.overrides</subject><body>

Pablo DallOglio wrote:
 &gt; ok ok. I have to confess I'm very worried about that.
 &gt;
 &gt; I believe these types must be on Gobject, but they should be there since
 &gt; the beggining. Now there are many sites out there with samples about
 &gt; GtkTreeView usage and Scott and I have books publised about php-gtk2
 &gt; with many samples using these types (Gtk::TYPE_BOOLEAN...).
 &gt;
 &gt; Should we review all the sites content ? And what about the books ? A
 &gt; guy buy the book, type the sample and it doesn't work... so he blames
 &gt; php-gtk, because it doesn't work fine...

It is sort of the books fault... since most of them were written before 
PHP-GTK was even ALPHA yet alone BETA or... FINAL. We should not be 
afraid to make stuff (read, crap (or stronger description)) correct just 
because everyone is used to it wrong.

But that is just my opinion.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070719232025</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-07-19 23:20:25-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk /ext/gtk+ gtk.overrides</subject><body>

I said that I was considering doing this back in March and asked for  
feedback. I only heard back from Steph who said, "Go ahead", so I  
assumed that everyone was fine with it.

-Andrei


On Jul 18, 2007, at 12:45 PM, Pablo DallOglio wrote:

&gt; ok ok. I have to confess I'm very worried about that.
&gt;
&gt; I believe these types must be on Gobject, but they should be there  
&gt; since
&gt; the beggining. Now there are many sites out there with samples about
&gt; GtkTreeView usage and Scott and I have books publised about php-gtk2
&gt; with many samples using these types (Gtk::TYPE_BOOLEAN...).
&gt;
&gt; Should we review all the sites content ? And what about the books ? A
&gt; guy buy the book, type the sample and it doesn't work... so he blames
&gt; php-gtk, because it doesn't work fine...
&gt;
&gt; It has been dificult in these last years to conquer new users and  
&gt; these
&gt; BC breaks move them away from php-gtk2.
&gt;
&gt; PS: I copied php-gtk-dev because I think this should be reconsidered.
&gt;
&gt; Pablo
&gt;
&gt; Em Qua, 2007-07-18 às 15:28 -0400, Elizabeth Smith escreveu:
&gt;&gt; Pablo DallOglio wrote:
&gt;&gt;&gt; If I understand, it changes the current way of declaring a  
&gt;&gt;&gt; GtkTreeStore
&gt;&gt;&gt; object ?
&gt;&gt;&gt;
&gt;&gt;&gt; $store = new GtkTreeStore(Gtk::TYPE_STRING, Gtk::TYPE_BOOLEAN);
&gt;&gt;&gt;
&gt;&gt;&gt; Pablo
&gt;&gt;&gt;
&gt;&gt; yes
&gt;&gt;
&gt;&gt; $store = new GtkTreeStore(GObject::TYPE_STRING,  
&gt;&gt; GObject::TYPE_BOOLEAN);
&gt;&gt;
&gt;&gt; ;)
&gt;&gt;
&gt;&gt;
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070719234935</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-07-19 23:49:35-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk /ext/gtk+ gtk.overrides</subject><body>

Well hey, it seemed the logical thing to do at the time!

I have to admit I didn't really look into its impact on existing code, 
though. I think I'd a hazy idea of it not hurting much.

How much _is_ it hurting? (As in number of functions/objects impacted I 
mean?)

- Steph

----- Original Message ----- 
From: "Andrei Zmievski" &lt;andrei@gravitonic.com&gt;
To: "Pablo DallOglio" &lt;pablo@dalloglio.net&gt;
Cc: "Elizabeth Smith" &lt;auroraeosrose@gmail.com&gt;; &lt;php-gtk-dev@lists.php.net&gt;
Sent: Friday, July 20, 2007 12:20 AM
Subject: Re: [PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk /ext/gtk+ 
gtk.overrides


I said that I was considering doing this back in March and asked for
feedback. I only heard back from Steph who said, "Go ahead", so I
assumed that everyone was fine with it.

-Andrei


On Jul 18, 2007, at 12:45 PM, Pablo DallOglio wrote:

&gt; ok ok. I have to confess I'm very worried about that.
&gt;
&gt; I believe these types must be on Gobject, but they should be there  since
&gt; the beggining. Now there are many sites out there with samples about
&gt; GtkTreeView usage and Scott and I have books publised about php-gtk2
&gt; with many samples using these types (Gtk::TYPE_BOOLEAN...).
&gt;
&gt; Should we review all the sites content ? And what about the books ? A
&gt; guy buy the book, type the sample and it doesn't work... so he blames
&gt; php-gtk, because it doesn't work fine...
&gt;
&gt; It has been dificult in these last years to conquer new users and  these
&gt; BC breaks move them away from php-gtk2.
&gt;
&gt; PS: I copied php-gtk-dev because I think this should be reconsidered.
&gt;
&gt; Pablo
&gt;
&gt; Em Qua, 2007-07-18 às 15:28 -0400, Elizabeth Smith escreveu:
&gt;&gt; Pablo DallOglio wrote:
&gt;&gt;&gt; If I understand, it changes the current way of declaring a  GtkTreeStore
&gt;&gt;&gt; object ?
&gt;&gt;&gt;
&gt;&gt;&gt; $store = new GtkTreeStore(Gtk::TYPE_STRING, Gtk::TYPE_BOOLEAN);
&gt;&gt;&gt;
&gt;&gt;&gt; Pablo
&gt;&gt;&gt;
&gt;&gt; yes
&gt;&gt;
&gt;&gt; $store = new GtkTreeStore(GObject::TYPE_STRING,  GObject::TYPE_BOOLEAN);
&gt;&gt;
&gt;&gt; ;)
&gt;&gt;
&gt;&gt;
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070720020006</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-07-20 02:00:06-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk /ext/gtk+ gtk.overrides</subject><body>

Steph Fox wrote:
&gt; Well hey, it seemed the logical thing to do at the time!
&gt; 
&gt; I have to admit I didn't really look into its impact on existing code, 
&gt; though. I think I'd a hazy idea of it not hurting much.
&gt; 
&gt; How much _is_ it hurting? (As in number of functions/objects impacted I 
&gt; mean?)
&gt; 
&gt; - Steph

It's basically a search and replace operation...shall I whip up a (php 
of course) script to do it?  Functions impacted are basically created 
list/treestores (the gobject types are used) and io_watch stuff (which 
use the  constants for what to watch for and priority)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070720052851</emailId><senderName>Pablo DallOglio</senderName><senderEmail>pablo@dalloglio.net</senderEmail><timestampReceived>2007-07-20 05:28:51-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk /ext/gtk+</subject><body>

Hi,

My apologies, I haven't realized these changes at that time.
I don't see any problem in changing things that aren't widely used like
IO stuff. But datagrids are a central part of every application, like
forms and we have many samples on the internet about its usage and
printed material also.

I know a simple "grep" or a "rpl" does the work (no need for scripts
Elizabeth), but it opens precedents. If we change these constants today,
we will be changing method names tomorrow and we'll start having
incompatible versions among the same encarnation of php-gtk2... And this
makes me really worried.

Bob told us there souldn't be books about php-gtk because there is not
even an stable release. But since the API was defined and we just needed
a major API coverage, there was no reason to delay this. I believe that
a techonogy need good developers to become a sucess but need
evangelizers also.

PS: "little things that make a big difference"
bests
Pablo Dall'Oglio

Em Qui, 2007-07-19 Ã s 16:20 -0700, Andrei Zmievski escreveu:
&gt; I said that I was considering doing this back in March and asked for  
&gt; feedback. I only heard back from Steph who said, "Go ahead", so I  
&gt; assumed that everyone was fine with it.
&gt; 
&gt; -Andrei
&gt; 
&gt; 
&gt; On Jul 18, 2007, at 12:45 PM, Pablo DallOglio wrote:
&gt; 
&gt; &gt; ok ok. I have to confess I'm very worried about that.
&gt; &gt;
&gt; &gt; I believe these types must be on Gobject, but they should be there  
&gt; &gt; since
&gt; &gt; the beggining. Now there are many sites out there with samples about
&gt; &gt; GtkTreeView usage and Scott and I have books publised about php-gtk2
&gt; &gt; with many samples using these types (Gtk::TYPE_BOOLEAN...).
&gt; &gt;
&gt; &gt; Should we review all the sites content ? And what about the books ? A
&gt; &gt; guy buy the book, type the sample and it doesn't work... so he blames
&gt; &gt; php-gtk, because it doesn't work fine...
&gt; &gt;
&gt; &gt; It has been dificult in these last years to conquer new users and  
&gt; &gt; these
&gt; &gt; BC breaks move them away from php-gtk2.
&gt; &gt;
&gt; &gt; PS: I copied php-gtk-dev because I think this should be reconsidered.
&gt; &gt;
&gt; &gt; Pablo
&gt; &gt;
&gt; &gt; Em Qua, 2007-07-18 Ã s 15:28 -0400, Elizabeth Smith escreveu:
&gt; &gt;&gt; Pablo DallOglio wrote:
&gt; &gt;&gt;&gt; If I understand, it changes the current way of declaring a  
&gt; &gt;&gt;&gt; GtkTreeStore
&gt; &gt;&gt;&gt; object ?
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; $store = new GtkTreeStore(Gtk::TYPE_STRING, Gtk::TYPE_BOOLEAN);
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; Pablo
&gt; &gt;&gt;&gt;
&gt; &gt;&gt; yes
&gt; &gt;&gt;
&gt; &gt;&gt; $store = new GtkTreeStore(GObject::TYPE_STRING,  
&gt; &gt;&gt; GObject::TYPE_BOOLEAN);
&gt; &gt;&gt;
&gt; &gt;&gt; ;)
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt; -- 
&gt; &gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; &gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 
-- 
um abraÃ§o
Pablo Dall'Oglio

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070720101108</emailId><senderName>bob majdak jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-07-20 10:11:08-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk /ext/gtk+ gtk.overrides</subject><body>

Hey. I commited the updates this morning at 5am for both KatePKG and KateLAN. You were so right
about how it is just search and replace! &gt;_&gt;

Seriously though it was long overdue and I am glad it happened :p

- bob.

Elizabeth Smith wrote:
&gt; Steph Fox wrote:
&gt;&gt; Well hey, it seemed the logical thing to do at the time!
&gt;&gt;
&gt;&gt; I have to admit I didn't really look into its impact on existing code, 
&gt;&gt; though. I think I'd a hazy idea of it not hurting much.
&gt;&gt;
&gt;&gt; How much _is_ it hurting? (As in number of functions/objects impacted 
&gt;&gt; I mean?)
&gt;&gt;
&gt;&gt; - Steph
&gt; 
&gt; It's basically a search and replace operation...shall I whip up a (php 
&gt; of course) script to do it?  Functions impacted are basically created 
&gt; list/treestores (the gobject types are used) and io_watch stuff (which 
&gt; use the  constants for what to watch for and priority)
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070720224344</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-07-20 22:43:44-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk /ext/gtk+gtk.overrides</subject><body>

Pablo DallOglio wrote:
&gt; Hi,
&gt; 
&gt; My apologies, I haven't realized these changes at that time.
&gt; I don't see any problem in changing things that aren't widely used like
&gt; IO stuff. But datagrids are a central part of every application, like
&gt; forms and we have many samples on the internet about its usage and
&gt; printed material also.
&gt; 
&gt; I know a simple "grep" or a "rpl" does the work (no need for scripts
&gt; Elizabeth), but it opens precedents. If we change these constants today,
&gt; we will be changing method names tomorrow and we'll start having
&gt; incompatible versions among the same encarnation of php-gtk2... And this
&gt; makes me really worried.
&gt; 
&gt; Bob told us there souldn't be books about php-gtk because there is not
&gt; even an stable release. But since the API was defined and we just needed
&gt; a major API coverage, there was no reason to delay this. I believe that
&gt; a techonogy need good developers to become a sucess but need
&gt; evangelizers also.
&gt;

Actually, if you look at other language wrappers, you'll see they all 
have their constants for gtypes in gobject as well - take a look at 
pygtk and perl's GTK2 and ruby's wrapper - why should PHP be the only 
ones putting constants from GLib in C into the GTK namespace?  By the 
way, this isn't the first change that has happened, and we have "changed 
method names" - there were quite a few just between the alpha and the 
beta.  The point is to have an intelligent API that people coming to 
PHP-GTK2 from other GTK implementations will understand - as well as 
creating an easy to use tool for those who come from the PHP community.

Why are we worrying about BC with alpha and beta versions?

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070721025321</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-07-21 02:53:21-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk /ext/gtk+gtk.overrides</subject><body>

Hi both,

&gt;&gt; I know a simple "grep" or a "rpl" does the work (no need for scripts
&gt;&gt; Elizabeth), but it opens precedents. If we change these constants today,
&gt;&gt; we will be changing method names tomorrow and we'll start having
&gt;&gt; incompatible versions among the same encarnation of php-gtk2... And this
&gt;&gt; makes me really worried.
&gt;&gt;
&gt;&gt; Bob told us there souldn't be books about php-gtk because there is not
&gt;&gt; even an stable release. But since the API was defined and we just needed
&gt;&gt; a major API coverage, there was no reason to delay this. I believe that
&gt;&gt; a techonogy need good developers to become a sucess but need
&gt;&gt; evangelizers also.
&gt;
&gt; Actually, if you look at other language wrappers, you'll see they all have 
&gt; their constants for gtypes in gobject as well - take a look at pygtk and 
&gt; perl's GTK2 and ruby's wrapper - why should PHP be the only ones putting 
&gt; constants from GLib in C into the GTK namespace?  By the way, this isn't 
&gt; the first change that has happened, and we have "changed method names" - 
&gt; there were quite a few just between the alpha and the beta.  The point is 
&gt; to have an intelligent API that people coming to PHP-GTK2 from other GTK 
&gt; implementations will understand - as well as creating an easy to use tool 
&gt; for those who come from the PHP community.
&gt;
&gt; Why are we worrying about BC with alpha and beta versions?

You're both right, and you're also both wrong.

Pablo, it's not the start of a revolution, don't panic :)

Elizabeth, I agree that having gobject play the role it should is a big 
deal. At the same time, there are PHP-GTK users (and books) to consider; 
we've been slow in making changes and releases (more my fault than yours as 
we're all aware) and the users have come to regard the API as more or less 
stable through that. So maybe the next time something comes up that's going 
to rattle the API it'd be a good idea to discuss it on the dev list directly 
beforehand so that everyone affected can weigh up the pros and cons? We 
aren't all on irc, and I'm so old now my memory doesn't stretch back to 
March :)

If it's any use to anybody, I don't think there's anything else left that 
smells that badly wrong in PHP-GTK 2. (Except possibly the level of 
reflection, but let's not go there.)

- Steph

&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070919034244</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-09-19 03:42:44-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk / config.m4  /demos/examples properties.php  /ext/gtk+</subject><body>

So, any comments on custom type registration? I'm working on signals  
next.

-Andrei
http://10fathoms.org/vu - daily photoblog

On Sep 16, 2007, at 2:55 PM, Andrei Zmievski wrote:

&gt; andrei		Sun Sep 16 21:55:19 2007 UTC
&gt;
&gt;   Added files:
&gt;     /php-gtk/demos/examples	properties.php
&gt;     /php-gtk/main	phpg_paramspec.c
&gt;
&gt;   Modified files:
&gt;     /php-gtk	config.m4
&gt;     /php-gtk/ext/gtk+	gtk.overrides gtktreeview.overrides
&gt;                      	php_gtk+_types.c phpg_custom_tree_model.c
&gt;     /php-gtk/main	php_gtk.c php_gtk.h php_gtk_util.c phpg_closure.c
&gt;                  	phpg_gobject.c phpg_gtype.c phpg_gvalue.c
&gt;                  	phpg_support.c
&gt;   Log:
&gt;   First step in the implementation of custom GType's in PHP userland.
&gt;   Signals and interfaces are not implemented yet. See
&gt;   demos/examples/properties.php for an example on how to register a  
&gt; custom
&gt;   type with your own properties.
&gt;
&gt; &lt;andrei-20070916215519.txt&gt;
&gt; -- 
&gt; PHP-GTK CVS Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070919111036</emailId><senderName>Elizabeth Smith</senderName><senderEmail>auroraeosrose@gmail.com</senderEmail><timestampReceived>2007-09-19 11:10:36-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk / config.m4  /demos/examples</subject><body>

Anant Narayanan wrote:
&gt; Hi Andrei,
&gt;
&gt;&gt; So, any comments on custom type registration? I'm working on signals 
&gt;&gt; next.
&gt;
&gt; Looks fine on first glance, however I'm not sure about the do_set_ and 
&gt; do_get_property method names as well as the $__gproperties property 
&gt; name. Naming nuances aside, great work!
&gt;
&gt; -- 
&gt; Anant
&gt;
Those names are similiar to the conventions in other languages, so I 
think they're fine - although I would have preferred __get_property and 
__set_property - so people understand these are "php magic methods" but 
whatever ;)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070919112404</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-09-19 11:24:04-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk / config.m4  /demos/examples properties.php  /ext/g</subject><body>

Hi Andrei,

&gt; So, any comments on custom type registration? I'm working on  
&gt; signals next.

Looks fine on first glance, however I'm not sure about the do_set_  
and do_get_property method names as well as the $__gproperties  
property name. Naming nuances aside, great work!

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070919181659</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-09-19 18:16:59-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk / config.m4  /demos/examples</subject><body>

Like I replied to Anant, my only concern is that __get_property and 
__set_property might be used by PHP itself in the future..

-Andrei
http://10fathoms.org/vu - daily photoblog

Elizabeth Smith wrote:
&gt; Anant Narayanan wrote:
&gt;&gt; Hi Andrei,
&gt;&gt;
&gt;&gt;&gt; So, any comments on custom type registration? I'm working on signals 
&gt;&gt;&gt; next.
&gt;&gt;
&gt;&gt; Looks fine on first glance, however I'm not sure about the do_set_ and 
&gt;&gt; do_get_property method names as well as the $__gproperties property 
&gt;&gt; name. Naming nuances aside, great work!
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; Anant
&gt;&gt;
&gt; Those names are similiar to the conventions in other languages, so I 
&gt; think they're fine - although I would have preferred __get_property and 
&gt; __set_property - so people understand these are "php magic methods" but 
&gt; whatever ;)
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070919184423</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-09-19 18:44:23-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk / config.m4  /demos/examples properties.php  /ext/g</subject><body>

On 19-Sep-07, at 11:46 PM, Andrei Zmievski wrote:
&gt; Like I replied to Anant, my only concern is that __get_property and  
&gt; __set_property might be used by PHP itself in the future..

Let's go in for __get_gproperty and __set_gproperty then?

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070919195800</emailId><senderName>Elizabeth Smith</senderName><senderEmail>auroraeosrose@gmail.com</senderEmail><timestampReceived>2007-09-19 19:58:00-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk / config.m4  /demos/examples</subject><body>

Anant Narayanan wrote:
&gt; On 19-Sep-07, at 11:46 PM, Andrei Zmievski wrote:
&gt;&gt; Like I replied to Anant, my only concern is that __get_property and 
&gt;&gt; __set_property might be used by PHP itself in the future..
&gt;
&gt; Let's go in for __get_gproperty and __set_gproperty then?
&gt;
&gt; -- 
&gt; Anant
Actually that sounds good to me! follows the standard of using the g as 
a prefix, and the php standard of underscores for magic ;)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070919203804</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-09-19 20:38:04-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk / config.m4  /demos/examples</subject><body>

Okay. What about signal class closures? __do_*?

Elizabeth Smith wrote:
&gt; Anant Narayanan wrote:
&gt;&gt; On 19-Sep-07, at 11:46 PM, Andrei Zmievski wrote:
&gt;&gt;&gt; Like I replied to Anant, my only concern is that __get_property and 
&gt;&gt;&gt; __set_property might be used by PHP itself in the future..
&gt;&gt;
&gt;&gt; Let's go in for __get_gproperty and __set_gproperty then?
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; Anant
&gt; Actually that sounds good to me! follows the standard of using the g as 
&gt; a prefix, and the php standard of underscores for magic ;)
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070919204851</emailId><senderName>Elizabeth Smith</senderName><senderEmail>auroraeosrose@gmail.com</senderEmail><timestampReceived>2007-09-19 20:48:51-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk / config.m4  /demos/examples</subject><body>

Andrei Zmievski wrote:
&gt; Okay. What about signal class closures? __do_*?
__do_{signal name with - changed to _} so we don't clash with anything 
else sounds good to me, and __gsignals array to define them (and a 
standard method to just throw them in as well a la pygtk)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070919205723</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-09-19 20:57:23-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [php-gtk-cvs] cvs: php-gtk / config.m4  /demos/examples</subject><body>

K. Hope to finish that tonight.

-Andrei
http://10fathoms.org/vu - daily photoblog

Elizabeth Smith wrote:
&gt; Andrei Zmievski wrote:
&gt;&gt; Okay. What about signal class closures? __do_*?
&gt; __do_{signal name with - changed to _} so we don't clash with anything 
&gt; else sounds good to me, and __gsignals array to define them (and a 
&gt; standard method to just throw them in as well a la pygtk)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070127192959</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-27 19:29:59-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] clone seg fault</subject><body>

Hmm, cloning might be problematic. I don't know if Gtk+ supports the  
concept of copying an object with all its possible hierachies and  
properties.. and doing it manually is pretty difficult too.

-Andrei


On Dec 18, 2006, at 1:15 PM, Pablo Dall'Oglio wrote:

&gt; This clone gives me a segmentation fault.
&gt; Am I missing something somewhere ?
&gt; or there's something wrong internally ?
&gt;
&gt; &lt;?php
&gt;         $janela = new GtkWindow;
&gt;         $vbox = new GtkVBox;
&gt;         $janela-&gt;add($vbox);
&gt;         $botao1 = new GtkButton('botao 1');
&gt;         $botao2 = clone $botao1;
&gt;         $botao2-&gt;set_label('botao 2');
&gt;         $vbox-&gt;pack_start($botao1);
&gt;         $vbox-&gt;pack_start($botao2);
&gt;         $janela-&gt;show_all();
&gt;         Gtk::Main();
&gt; ?&gt;
&gt;
&gt; best regards
&gt; Pablo
&gt;
&gt; -- 
&gt; :: Pablo Dall'Oglio
&gt; :: www.pablo.blog.br
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071203163558</emailId><senderName>ManarKh</senderName><senderEmail>manar_khattar@hotmail.com</senderEmail><timestampReceived>2007-12-03 16:35:58-0400</timestampReceived><subject>[PHP-GTK-DEV] PHP-GTK2 to exe</subject><body>


Hello all:) 

I am new to this forum! anyway knows a software that converts php-gtk2 to
exe? I discovered some converters for PHP 4 and not for PHP 5. 

Waiting for your replies, :)
-- 
View this message in context: http://www.nabble.com/PHP-GTK2-to-exe-tf4937614.html#a14133289
Sent from the Php - GTK - Dev mailing list archive at Nabble.com.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070112165401</emailId><senderName>Tom</senderName><senderEmail>tom@trappart.de</senderEmail><timestampReceived>2007-01-12 16:54:01-0400</timestampReceived><subject>[PHP-GTK-DEV] non-UTF-8 characters in GtkEntry</subject><body>

Hi,

If a user types "à" (Picture: www.woxnet.org/files/special_char.gif)
into a GtkTextBuffer or GtkEntry, my php-gtk app crashes after the
following warning:

Warning: GtkEntry::get_text(): could not convert return value from UTF-8

It is just the same with the dialogmessage demo.
Is there a way to disable non-UTF-8 input?

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070201081746</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-02-01 08:17:46-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] The Road Ahead</subject><body>

You STILL managed to miss out 'complete the GTK+ code coverage'!

We'll never let you forget it either ;)

----- Original Message ----- 
From: "Anant Narayanan" &lt;anant@kix.in&gt;
To: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
Sent: Thursday, February 01, 2007 8:14 AM
Subject: [PHP-GTK-DEV] The Road Ahead


&gt; Hi all,
&gt;
&gt; Now that the dust has settled a bit; here's a brief summary of what lies
&gt; ahead (roughly in order of priority)
&gt;
&gt; * API/Doc Completion for Gtk+ 2.6
&gt; * Add support for Gtk+ 2.8 and 2.10
&gt; * Make PHP-GTK compile cleanly on MSVC 2005
&gt; * Create installer for Windows (and Mac? :))
&gt; * Decide on which Scintilla version to bundle
&gt; * Add a few more extensions and override as necessary (My next target is
&gt; GtkHTML)
&gt;
&gt; I'll commit in GtkExtra and GtkSpell to CVS shortly. Elizabeth, you can
&gt; commit the GtkPlug override from the edge repository as discussed
&gt; earlier (Andrei: this is the corrected version!). I'll also be posting
&gt; consolidated patches of Elizabeth's earlier work on 2.8/2.10 along with
&gt; build support for *nix; so that we can discuss that and take it further.
&gt;
&gt; We should be ready for a beta release in about a month; I think we
&gt; should make that release once (if) we have Gtk+ 2.8/2.10 in CVS and the
&gt; API coverage is hovering around the 90% mark. After that we can make the
&gt; full release with 100% (or close to) 2.6 coverage; part-coverage of
&gt; 2.8/2.10, extensions and documentation. Subsequent releases can improve
&gt; on those aspects.
&gt;
&gt; I'll pull down the edge repository as soon as we're decided on whether
&gt; 2.8/2.10 will be going in CVS; there are still people checking out from
&gt; there and I think it is only fair to let them try 2.8/2.10 in the interim.
&gt;
&gt; About the Mac installer; I have only been toying around with that idea;
&gt; so if there's anyone lurking out there who'd be knowledgeable/interested
&gt; about the task, I'd appreciate the help :) A php-gtk Portfile for
&gt; Macports is on the cards too.
&gt;
&gt; Best Regards,
&gt;
&gt; --
&gt; Anant
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228184330</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-02-28 18:43:30-0400</timestampReceived><subject>[PHP-GTK-DEV] Extra mangles the win32 build</subject><body>

Morning,

When getting gtkextra building on windows I ran into a really weird 
problem - having the directory extra in the extensions messed up the 
makefile creation - it put extra in the spot reserved for php-gtk and 
php-gtk got put down with the other extensions... and I haven't figured 
out what the problem is or how to fix it.  Simply renaming the directory 
(gtkextra for example - none of the files or even the extension need a 
rename...just the directory) fixes the problem.  Very strange and hard 
to pin down.

Any thoughts on a solution?

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070410014024</emailId><senderName>markybob</senderName><senderEmail>markybob@gmail.com</senderEmail><timestampReceived>2007-04-10 01:40:24-0400</timestampReceived><subject>[PHP-GTK-DEV] php-gtk with gtkmozembed</subject><body>


demo of mozembed causes segfault.

http://cvs.php.net/viewvc.cgi/php-gtk/ext/mozembed/demos/browser.php?view=log   
this is with php 5.2.1 and php-gtk2 (cvs april 9th 2007).  does anyone have
a mozembed demo that actually works?  any help would be greatly appreciated. 
thanks!
-- 
View this message in context: http://www.nabble.com/php-gtk-with-gtkmozembed-tf3550630.html#a9912594
Sent from the Php - GTK - Dev mailing list archive at Nabble.com.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070525234714</emailId><senderName>Pablo DallOglio</senderName><senderEmail>pablo@dalloglio.net</senderEmail><timestampReceived>2007-05-25 23:47:14-0400</timestampReceived><subject>[PHP-GTK-DEV] website</subject><body>

Hello,

The application repository from gtk.php.net is not working fine.
How can I help ?
Andrei told me Steph was the best person to guide me through.

I could write an entirely new app repository, but how can I integrate
this to the website ? design and technology ?

bests
Pablo

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070525235113</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-05-25 23:51:13-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] website</subject><body>

Hi Pablo,

&gt; I could write an entirely new app repository, but how can I integrate
&gt; this to the website ? design and technology ?

Check out the php-gtk-web module [1] from PHP-CVS to get a feel of how
the current website is designed. The application repository code is in
the app/ directory.

Cheers,
--
Anant

[1] http://cvs.php.net/viewvc.cgi/php-gtk-web/

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070608015640</emailId><senderName>Tom Rogers</senderName><senderEmail>trogers@kwikin.com</senderEmail><timestampReceived>2007-06-08 01:56:40-0400</timestampReceived><subject>Re[2]: [PHP-GTK-DEV] GtkScintilla for Windows</subject><body>

Hi,

Friday, June 8, 2007, 11:00:01 AM, you wrote:

ES&gt; Oh hurray, does that mean everyone is waiting on me again?  Fernando -
ES&gt; you can get all the working files you need from 
ES&gt; http://perisama.net/downloads - grab the MSVC6 versions.  Libraries to
ES&gt; bundle are in http://perisama.net/libs/gtk .  If you could get a little
ES&gt; more of the installer done I'd appreciate it.  Basically it needs 
ES&gt; extensions and double click open with php-gtk2 registration.

ES&gt; At this point we need either me to get gtkscintilla building with 
ES&gt; microsoft visual studio (with the newer bundled version of scintilla) or
ES&gt; figure out how to build the bundled scintilla library and link it 
ES&gt; statically into php-gtk as part of the php-gtk build (Anant never did 
ES&gt; get it figured out).  Any linux autojunk guru's want to step up to the
ES&gt; plate?  I won't have time to attack gtkscintilla until next week 
ES&gt; probably.  I think as soon as we get the scintilla thing figured out and
ES&gt; the installer semi-functional we're go for a beta...  Anyone have some
ES&gt; overrides done?


I have the latest scintilla building as a dll and static library using
visual studio 6 if you want me to send you a zip of it all.
I haven't tested the static build as I don't use it.


-- 
regards,
Tom

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070708005706</emailId><senderName>       Fernando_Correa_da_Conceição</senderName><senderEmail></senderEmail><timestampReceived>2007-07-08 00:57:06-0400</timestampReceived><subject>[PHP-GTK-DEV] Bug and fix for GtkScintilla on Linux</subject><body>

It is me, again.
GtkScintilla do not work for me(again...) on linux, using debian 
etch(kurumin). There is an undefined reference to a cxx funcion. This 
time I have a simple fix, on the line PHP_GTK2_SHARED_LIBADD in the make 
file, add as the last item -lstdc++ . Works for me.

Fernando Correa da Conceição.

PS: I will try to build it on windows(there is some reference doc about 
howto build on windows?) and search why it dies when I use "é".

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070807133556</emailId><senderName>"Mr L. Pegg"</senderName><senderEmail>leon.pegg@gmail.com</senderEmail><timestampReceived>2007-08-07 13:35:56-0400</timestampReceived><subject>[PHP-GTK-DEV] php-gtk php6 branch</subject><body>


Hello all,

Andrei I have been working on getting php-gtk compiling against php6-dev and
wanted to know weather you thought a php6 branch or api ifdefs would be
better.
personally I think a php6 branch would be better.

Regards Leon Pegg


</body></email><email><emailId>20070921234720</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-09-21 23:47:20-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: new_from_gd patch</subject><body>

Elizabeth Smith wrote:
&gt; After some discussions with Sara, I think the following patch should 
&gt; allow new_from_gd
&gt; 
&gt; 1. To throw an error if gd isn't loaded
&gt; 2. To work with gd shared if it's loaded
&gt; 3. To work with gd static
&gt; 4. To not need gd sources or libraries to build php-gtk
&gt; 
&gt; Anyone brave enough to see if I've screwed it up on *nix?  Appears to 
&gt; work fine with windows.
&gt; 
&gt; If this works properly, I'd love to implement new_from_freeimage and 
&gt; new_from_imagemagick too ;)
&gt; 

Hmmm - take two...  Can I get someone on nix to test?

["new_from_gd.patch" (text/plain)]

Index: gdk.overrides
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/gdk.overrides,v
retrieving revision 1.76
diff -u -r1.76 gdk.overrides
--- gdk.overrides	15 Jun 2007 21:06:31 -0000	1.76
+++ gdk.overrides	21 Sep 2007 22:15:49 -0000
@@ -1851,10 +1851,58 @@
 %%
 add GdkPixbuf new_from_gd ZEND_ACC_PUBLIC|ZEND_ACC_STATIC
 
-#if HAVE_GD_BUNDLED
-#include "ext/gd/php_gd.h"
-#include "ext/gd/libgd/gd.h"
-#endif
+#define gdMaxColors 256
+#define gdTrueColorGetAlpha(c) (((c) &amp; 0x7F000000) &gt;&gt; 24)
+#define gdTrueColorGetRed(c) (((c) &amp; 0xFF0000) &gt;&gt; 16)
+#define gdTrueColorGetGreen(c) (((c) &amp; 0x00FF00) &gt;&gt; 8)
+#define gdTrueColorGetBlue(c) ((c) &amp; 0x0000FF)
+typedef struct gdImageStruct {
+	unsigned char ** pixels;
+	int sx;
+	int sy;
+	int colorsTotal;
+	int red[gdMaxColors];
+	int green[gdMaxColors];
+	int blue[gdMaxColors];
+	int open[gdMaxColors];
+	int transparent;
+	int *polyInts;
+	int polyAllocated;
+	struct gdImageStruct *brush;
+	struct gdImageStruct *tile;
+	int brushColorMap[gdMaxColors];
+	int tileColorMap[gdMaxColors];
+	int styleLength;
+	int stylePos;
+	int *style;
+	int interlace;
+	int thick;
+	int alpha[gdMaxColors];
+	int trueColor;
+	int ** tpixels;
+	int alphaBlendingFlag;
+	int antialias;
+	int saveAlphaFlag;
+	int AA;
+	int AA_color;
+	int AA_dont_blend;
+	unsigned char **AA_opacity;
+	int AA_polygon;
+	int AAL_x1;
+	int AAL_y1;
+	int AAL_x2;
+	int AAL_y2;
+	int AAL_Bx_Ax;
+	int AAL_By_Ay;
+	int AAL_LAB_2;
+	float AAL_LAB;
+	int cx1;
+	int cy1;
+	int cx2;
+	int cy2;
+} gdImage;
+
+typedef gdImage * gdImagePtr;
 
 void phpg_free_pixbuf_data(guchar *pixels, gpointer data)
 {
@@ -1863,7 +1911,6 @@
 
 PHP_METHOD
 {
-#if HAVE_GD_BUNDLED
     zval *php_gd;
     gdImagePtr gd;
     guint *data;
@@ -1871,15 +1918,26 @@
     GdkPixbuf *pixbuf;
     int x, y, c, alpha;
 
+    DL_HANDLE module = NULL;
+
+#ifdef WIN32
+int (__stdcall *phpi_get_le_gd)(void);
+#else
+int (*phpi_get_le_gd)(void);
+#endif
+
+    
+
     if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "r", &amp;php_gd)) {
         return;
     }
 
-    if (!zend_hash_exists(&amp;module_registry, "gd", sizeof("gd")) ||
-        !zend_hash_exists(EG(function_table), "imagesavealpha", sizeof("imagesavealpha"))) {
-        php_error(E_ERROR, "Extension 'gd' not available or uses GD library version below 2.0");
-        return;
-    }
+	phpi_get_le_gd = DL_FETCH_SYMBOL(module, "phpi_get_le_gd");
+	
+	if (!phpi_get_le_gd)
+	{
+		php_error(E_ERROR, "The php gd extension must be loaded to use this method");
+	}
 
     ZEND_FETCH_RESOURCE(gd, gdImagePtr, &amp;php_gd, -1, "Image", phpi_get_le_gd());
 
@@ -1940,9 +1998,6 @@
 
     phpg_gobject_new(&amp;return_value, (GObject *)pixbuf TSRMLS_CC);
     g_object_unref(pixbuf); /* phpg_gobject_new() increments reference count */
-#else
-    php_error(E_ERROR, "PHP-GTK was not compiled against PHP with bundled GD library");
-#endif
 }
 
 %%



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070925211844</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-09-25 21:18:44-0400</timestampReceived><subject>[PHP-GTK-DEV] freshmeat</subject><body>

Project admins:
 » Andrei Zmievski (Owner)

Andrei, can you add the Beta to the release list on Freshmeat? So I can update the dependencies for 
*my* app listin, pretty sure I require things that were broken in the Alpha now. FYI, A lot of my 
week is spent trolling Freshmeat anymore, if you wanted to have someone help keep that index up to 
date. I wouldn't mind, PHP-GTK is running out of things I have the ability to contribute to now 
these days (lol).

KTHX, have a nice day!

---
Bob Majdak Jr
KateOS Rofflecopter Pilot
http://www.kateos.org

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071105163424</emailId><senderName>"Pablo Dall'Oglio"</senderName><senderEmail>pablo@dalloglio.net</senderEmail><timestampReceived>2007-11-05 16:34:24-0400</timestampReceived><subject>[PHP-GTK-DEV] compiling an extension</subject><body>

Hello people,

I know this list is not the right place to post this...
But there'are people here that should know the answer.

I wrote a simple php extension and I'm trying to compile it under
windows (under linux is ok). To do that, I followed this tutorial
http://deluxe-design.at/win-php-extensions/ adapting some parts to
php5...

I'm Using Visual C++ 2005 Express and the module compiles fine, but when
I try to load through a php script using dl(), I got this error:

Warning: dl(): studio: Unable to initialize module
Module compiled with module API=20060613, debug=0, thread-safety=1
PHP    compiled with module API=20060613, debug=0, thread-safety=0
These options need to match

I compiled the project linking against php5.lib and not php5ts.lib, does
anyone know how to compile a module turning thread-safety OFF ?

bests
Pablo

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070926064333</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-09-26 06:43:33-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] freshmeat</subject><body>

Hi Bob,

&gt; Andrei, can you add the Beta to the release list on Freshmeat? So I can
&gt; update the dependencies for *my* app listin, pretty sure I require
&gt; things that were broken in the Alpha now. FYI, A lot of my week is spent
&gt; trolling Freshmeat anymore, if you wanted to have someone help keep that
&gt; index up to date. I wouldn't mind, PHP-GTK is running out of things I
&gt; have the ability to contribute to now these days (lol).

Anyone can add releases to freshmeat, and I've added 2.0.0beta to the
development branch:
http://freshmeat.net/projects/php-gtk/?branch_id=65497&amp;release_id=262499

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070927012047</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-09-27 01:20:47-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] freshmeat</subject><body>

I think we should make final release soon. Thoughts?

-Andrei

Anant Narayanan wrote:
&gt; Hi Bob,
&gt; 
&gt;&gt; Andrei, can you add the Beta to the release list on Freshmeat? So I can
&gt;&gt; update the dependencies for *my* app listin, pretty sure I require
&gt;&gt; things that were broken in the Alpha now. FYI, A lot of my week is spent
&gt;&gt; trolling Freshmeat anymore, if you wanted to have someone help keep that
&gt;&gt; index up to date. I wouldn't mind, PHP-GTK is running out of things I
&gt;&gt; have the ability to contribute to now these days (lol).
&gt; 
&gt; Anyone can add releases to freshmeat, and I've added 2.0.0beta to the
&gt; development branch:
&gt; http://freshmeat.net/projects/php-gtk/?branch_id=65497&amp;release_id=262499
&gt; 
&gt; --
&gt; Anant
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070927054035</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-09-27 05:40:35-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] freshmeat</subject><body>

&gt; I think we should make final release soon. Thoughts?

We thought it would be nice to have custom cell-renderers and cairo
support before going in for the final release. We already have custom
gtypes and signals support in, and that would make the final release
extremely usable.

Elizabeth and myself can speed up work on cairo; Elizabeth has picked up
a basic OO binding to cairo and we plan on fitting it into the
code-generator. As for custom cell-renderers, I haven't had a look at
it; perhaps you could evaluate whether it would be worth it?

Regards,
--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070927065522</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-09-27 06:55:22-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] freshmeat</subject><body>

I have looked/used the OOP Cario extention, and was even tempted for a while to try and bring it to 
PHP-GTK (mosty by Elizabeth telling "DO IT" which resulted in me ending up in a fetal position 
crying), though a lot of the PHP interface is over my head, especially on dynamic object 
manipulation, I am just not used to it. My most advanced OOP extension was a rebuild of the OpenAL 
API which did not get very far past -&gt;play() -&gt;stop(), and after the semester started back up... I 
tell you what in my next life I will listen to people when they tell me to start college right after 
high school instead of waiting.

I cannot even begin to count about the times I have wished for custom cell renderers. To be honest I 
have not the slightest idea where to start, but I could attempt. I swear I know C /and/ Gtk well but 
the PHP interface is like a foreign language... . I am good at chasing down segfaults though... honest.

---
Bob Majdak Jr
KateOS Rofflecopter Pilot
http://www.kateos.org

Anant Narayanan wrote:
&gt;&gt; I think we should make final release soon. Thoughts?
&gt; 
&gt; We thought it would be nice to have custom cell-renderers and cairo
&gt; support before going in for the final release. We already have custom
&gt; gtypes and signals support in, and that would make the final release
&gt; extremely usable.
&gt; 
&gt; Elizabeth and myself can speed up work on cairo; Elizabeth has picked up
&gt; a basic OO binding to cairo and we plan on fitting it into the
&gt; code-generator. As for custom cell-renderers, I haven't had a look at
&gt; it; perhaps you could evaluate whether it would be worth it?
&gt; 
&gt; Regards,
&gt; --
&gt; Anant
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070927115137</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-09-27 11:51:37-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] freshmeat</subject><body>

Andrei Zmievski wrote:
 &gt; I think we should make final release soon. Thoughts?
 &gt;
 &gt; -Andrei
1. The gd patch, can I stick in it? (Yes the windows static hack is 
evil, but even cygwin uses it so it appears to be a standard "windows is 
stupid" workaround)
2. I still have to fix the shared/static issue for extensions so nix 
users can build them properly (this week...just a matter of test and commit)
3. Are we going to have custom cell renderers?  That's the only thing I 
think we're missing of "cool stuff that other wrappers have"
4. Cairo - I've discovered a really nice cairo extension, all OO 
although all the features aren't implemented yet.  Thoughts for using 
this with php-gtk so the 2.10 print stuff can actually be used?  (The 
wrapper currently in PECL isn't that useful and the promised Pierre 
extension is still vaporware) Or are we pushing this back for the 2.1 
release :) code at

shlomil.blogspot.com/2006/10/my-php-cairo-extension.html (which made 
this message fail last time as "spammy" - wtf?)

5. Can we find some time before the release for a code coverage 
marathon?  (I have a few sitting around here I need to stop being lazy 
about for that matter)

Otherwise, yes a final release would be cool.  The only other thing 
(which many not be desired) is to allow php-gtk to build a base 
extension with the gobject/other glib stuff and allow the gtk portion as 
an extension (a la pygtk's split into pygtk and pygobject) - but that's 
just a thought.

Thanks,
Elizabeth Smith

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070927170753</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-09-27 17:07:53-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] freshmeat</subject><body>

Custom cell-renderers require a whole lot of infrastructure work to set 
up virtual interfaces and all that good stuff. It's probably going to 
take several full days of work which I don't have right now. I think we 
should make a release and then make 2.1 release as soon as we have 
virtual interfaces and cell-renderer stuff ready. We're already so far 
behind PyGTK that it's not funny...

And "release early, release often" is still a good motto.

-Andrei

Anant Narayanan wrote:
&gt;&gt; I think we should make final release soon. Thoughts?
&gt; 
&gt; We thought it would be nice to have custom cell-renderers and cairo
&gt; support before going in for the final release. We already have custom
&gt; gtypes and signals support in, and that would make the final release
&gt; extremely usable.
&gt; 
&gt; Elizabeth and myself can speed up work on cairo; Elizabeth has picked up
&gt; a basic OO binding to cairo and we plan on fitting it into the
&gt; code-generator. As for custom cell-renderers, I haven't had a look at
&gt; it; perhaps you could evaluate whether it would be worth it?
&gt; 
&gt; Regards,
&gt; --
&gt; Anant
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070927172337</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-09-27 17:23:37-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] freshmeat</subject><body>

Andrei Zmievski wrote:
&gt; Custom cell-renderers require a whole lot of infrastructure work to set 
&gt; up virtual interfaces and all that good stuff. It's probably going to 
&gt; take several full days of work which I don't have right now. I think we 
&gt; should make a release and then make 2.1 release as soon as we have 
&gt; virtual interfaces and cell-renderer stuff ready. We're already so far 
&gt; behind PyGTK that it's not funny...
&gt; 
&gt; And "release early, release often" is still a good motto.
&gt; 
&gt; -Andrei

I like release early and often ;)  As long as we're not "no new features 
after release" I'm happy.

My only concern then is losing our "change the API for free" card as we 
hit 2.0 real release territory.  Are there any other API changes that 
need to go in?  The grouching was loud enough for the gtype constants. 
I'm questioning some of the main loop type stuff, some is at gtk level 
and some is at glib level and some of the gtk level versions are 
deprecated and...probably just need someone to go over it.  Otherwise I 
think we're set.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070927180554</emailId><senderName>       Fernando Correa da Conceição</senderName><senderEmail></senderEmail><timestampReceived>2007-09-27 18:05:54-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] freshmeat</subject><body>

Andrei Zmievski escreveu:
&gt; Custom cell-renderers require a whole lot of infrastructure work to 
&gt; set up virtual interfaces and all that good stuff. It's probably going 
&gt; to take several full days of work which I don't have right now. I 
&gt; think we should make a release and then make 2.1 release as soon as we 
&gt; have virtual interfaces and cell-renderer stuff ready. We're already 
&gt; so far behind PyGTK that it's not funny...
&gt;
&gt; And "release early, release often" is still a good motto.
&gt;
Dumb question(and sorry to ask this). What custom cell renderers let us 
to do?

Fernando.


&gt; -Andrei
&gt;
&gt; Anant Narayanan wrote:
&gt;&gt;&gt; I think we should make final release soon. Thoughts?
&gt;&gt;
&gt;&gt; We thought it would be nice to have custom cell-renderers and cairo
&gt;&gt; support before going in for the final release. We already have custom
&gt;&gt; gtypes and signals support in, and that would make the final release
&gt;&gt; extremely usable.
&gt;&gt;
&gt;&gt; Elizabeth and myself can speed up work on cairo; Elizabeth has picked up
&gt;&gt; a basic OO binding to cairo and we plan on fitting it into the
&gt;&gt; code-generator. As for custom cell-renderers, I haven't had a look at
&gt;&gt; it; perhaps you could evaluate whether it would be worth it?
&gt;&gt;
&gt;&gt; Regards,
&gt;&gt; -- 
&gt;&gt; Anant
&gt;&gt;
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070927230357</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-09-27 23:03:57-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] freshmeat</subject><body>

&gt; 1. The gd patch, can I stick in it? (Yes the windows static hack is 
&gt; evil, but even cygwin uses it so it appears to be a standard "windows is 
&gt; stupid" workaround)

That's fine with me. I haven't had a chance to test though.

&gt; 2. I still have to fix the shared/static issue for extensions so nix 
&gt; users can build them properly (this week...just a matter of test and 
&gt; commit)

Okay.

&gt; 3. Are we going to have custom cell renderers?  That's the only thing I 
&gt; think we're missing of "cool stuff that other wrappers have"

Not in 2.0 release (see my other email).

&gt; 4. Cairo - I've discovered a really nice cairo extension, all OO 
&gt; although all the features aren't implemented yet.  Thoughts for using 
&gt; this with php-gtk so the 2.10 print stuff can actually be used?  (The 
&gt; wrapper currently in PECL isn't that useful and the promised Pierre 
&gt; extension is still vaporware) Or are we pushing this back for the 2.1 
&gt; release :) code at
&gt; 
&gt; shlomil.blogspot.com/2006/10/my-php-cairo-extension.html (which made 
&gt; this message fail last time as "spammy" - wtf?)

How would you integrate it with PHP-GTK? Similar to GD?

&gt; 5. Can we find some time before the release for a code coverage 
&gt; marathon?  (I have a few sitting around here I need to stop being lazy 
&gt; about for that matter)

Sure, but let's not take 100% as the release goal.

&gt; Otherwise, yes a final release would be cool.  The only other thing 
&gt; (which many not be desired) is to allow php-gtk to build a base 
&gt; extension with the gobject/other glib stuff and allow the gtk portion as 
&gt; an extension (a la pygtk's split into pygtk and pygobject) - but that's 
&gt; just a thought.

Nah, we don't need that. People are not going to use GObject stuff 
without Gtk.

-Andrei
http://10fathoms.org/vu - daily photoblog

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070927230451</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-09-27 23:04:51-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] freshmeat</subject><body>

Please list your API questions then so we can address them.. now's the time.

-Andrei
http://10fathoms.org/vu - daily photoblog

Elizabeth Smith wrote:
&gt; I like release early and often ;)  As long as we're not "no new features 
&gt; after release" I'm happy.
&gt; 
&gt; My only concern then is losing our "change the API for free" card as we 
&gt; hit 2.0 real release territory.  Are there any other API changes that 
&gt; need to go in?  The grouching was loud enough for the gtype constants. 
&gt; I'm questioning some of the main loop type stuff, some is at gtk level 
&gt; and some is at glib level and some of the gtk level versions are 
&gt; deprecated and...probably just need someone to go over it.  Otherwise I 
&gt; think we're set.
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070927233641</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-09-27 23:36:41-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] freshmeat</subject><body>

&gt;&gt; 2. I still have to fix the shared/static issue for extensions so nix 
&gt;&gt; users can build them properly (this week...just a matter of test and 
&gt;&gt; commit)
&gt; 
&gt; Okay.

I had a fix for this which was like a 4 byte patch to the php-gtk.m4 file, but if I recall correctly 
it was decided that it was better to take the long way around of editing the windows build system 
(or something) instead (or something). It allowed the extensions to be built right but some of them 
still had linking problems, and they all had end filename problems being 'sexy.so' instead of 
'php_gtk2_sexy.so' or whatnot.

---
Bob Majdak Jr
KateOS Rofflecopter Pilot
http://www.kateos.org

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070928140505</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-09-28 14:05:05-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] freshmeat</subject><body>

Andrei Zmievski wrote:
&gt; Please list your API questions then so we can address them.. now's the 
&gt; time.
&gt; 
&gt; -Andrei
&gt; http://10fathoms.org/vu - daily photoblog
&gt; 
&gt; Elizabeth Smith wrote:
&gt;&gt; I like release early and often ;)  As long as we're not "no new 
&gt;&gt; features after release" I'm happy.
&gt;&gt;
&gt;&gt; My only concern then is losing our "change the API for free" card as 
&gt;&gt; we hit 2.0 real release territory.  Are there any other API changes 
&gt;&gt; that need to go in?  The grouching was loud enough for the gtype 
&gt;&gt; constants. I'm questioning some of the main loop type stuff, some is 
&gt;&gt; at gtk level and some is at glib level and some of the gtk level 
&gt;&gt; versions are deprecated and...probably just need someone to go over 
&gt;&gt; it.  Otherwise I think we're set.
&gt;&gt;

The only ones I've really noticed involved the deprecation of some gtk 
stuff in favor of the (almost) identical glib versions

The gtk_timeout_* are deprecated in favor of the glib varieties - since 2.4
The gtk_idle_* are deprecated in favor of the glib varieties since 2.4
The gtk_input_* are deprecated in favor of the glib varieties since 2.4
The GTK_PRIORITY_* constants are deprecated in favor of glib versions

In addition, even though the io watch stuff is in the gtk class, it's 
really from glib...

Just might be confusing for those who know the glib/gtk api - just to 
really make things crazy we're using SOME of the g_* functions and some 
of the gtk_* functions in the C...

(There are rumors of axing deprecated stuff starting in 2.12)

Personally I think at the very least the Gtk time/idle/input should be 
marked as deprecated and gobject:: equivalents added that use the g_* 
stuff underneath.

Anyway my $.02

Thanks,
Elizabeth Smith

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070928183624</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-09-28 18:36:24-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] freshmeat</subject><body>

&gt; Just might be confusing for those who know the glib/gtk api - just to 
&gt; really make things crazy we're using SOME of the g_* functions and some 
&gt; of the gtk_* functions in the C...

It is/was. This sounds like the flame war I had with the D GTK2 people only without the flames or 
the war. They thought renaming everything was funny. Ugh. The IO watch stuff was the most confusing 
for me since nothing matched up with the C interface namewise.

 &gt; ...should be marked as deprecated and gobject:: equivalents added...
 &gt; (There are rumors of axing deprecated stuff starting in 2.12)

Sounds like a good preventative measure then. &gt;_&gt;

---
Bob Majdak Jr
KateOS Rofflecopter Pilot
http://www.kateos.org

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070929022238</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-09-29 02:22:38-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] freshmeat</subject><body>

On Sep 28, 2007, at 7:05 AM, Elizabeth Smith wrote:

&gt; The only ones I've really noticed involved the deprecation of some  
&gt; gtk stuff in favor of the (almost) identical glib versions
&gt;
&gt; The gtk_timeout_* are deprecated in favor of the glib varieties -  
&gt; since 2.4
&gt; The gtk_idle_* are deprecated in favor of the glib varieties since 2.4
&gt; The gtk_input_* are deprecated in favor of the glib varieties since  
&gt; 2.4

Yes, I know. We're using the glib versions but namespacing them in  
Gtk:: because there's no other place to stick them.

&gt; The GTK_PRIORITY_* constants are deprecated in favor of glib versions

We're using G_PRIORITY_* internally.

&gt; In addition, even though the io watch stuff is in the gtk class,  
&gt; it's really from glib...

Same as above. I don't think it fits into GObject.

-Andrei
http://10fathoms.org/vu - daily photoblog

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071003162052</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-10-03 16:20:52-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] freshmeat</subject><body>

Yeah, gtk_idle_remove() is an oversight. It should be an override,  
actually.. using g_idle_remove().

-Andrei
http://10fathoms.org/vu - daily photoblog

On Sep 28, 2007, at 7:24 PM, Elizabeth Smith wrote:

&gt; Andrei Zmievski wrote:
&gt;&gt; On Sep 28, 2007, at 7:05 AM, Elizabeth Smith wrote:
&gt;&gt;&gt; The only ones I've really noticed involved the deprecation of  
&gt;&gt;&gt; some gtk stuff in favor of the (almost) identical glib versions
&gt;&gt;&gt;
&gt;&gt;&gt; The gtk_timeout_* are deprecated in favor of the glib varieties -  
&gt;&gt;&gt; since 2.4
&gt;&gt;&gt; The gtk_idle_* are deprecated in favor of the glib varieties  
&gt;&gt;&gt; since 2.4
&gt;&gt;&gt; The gtk_input_* are deprecated in favor of the glib varieties  
&gt;&gt;&gt; since 2.4
&gt;&gt; Yes, I know. We're using the glib versions but namespacing them in  
&gt;&gt; Gtk:: because there's no other place to stick them.
&gt;
&gt; Take a second look, we're not using ALL of the glib versions in  
&gt; favor of the deprecated ones, gtk_idle_remove instead of  
&gt; g_idle_remove for example - perhaps that's just an oversight?  It's  
&gt; probably not the best thing to be mixing the two...  That was  
&gt; probably what was confusing me more than anything.
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070922031905</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-09-22 03:19:05-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: new_from_gd patch</subject><body>

Third times a charm - this one works (and doesn't segfault)

Only issue is it doesn't work with static gd on windows, only shared - 
this shouldn't be an issue because the stock php builds never build in 
gd (we can then build against stock phps again) - right now I have it 
spitting a rather odd error, but that can always be changed.

Works with gd shared and static on nix.

If I could get some people to test this, I'd appreciate it.  If gd is 
not loaded when the method is called, you'll just get a fatal error.

["new_from_gd.patch" (text/plain)]

Index: gdk.overrides
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/gdk.overrides,v
retrieving revision 1.76
diff -u -r1.76 gdk.overrides
--- gdk.overrides	15 Jun 2007 21:06:31 -0000	1.76
+++ gdk.overrides	22 Sep 2007 03:09:34 -0000
@@ -1851,10 +1851,58 @@
 %%
 add GdkPixbuf new_from_gd ZEND_ACC_PUBLIC|ZEND_ACC_STATIC
 
-#if HAVE_GD_BUNDLED
-#include "ext/gd/php_gd.h"
-#include "ext/gd/libgd/gd.h"
-#endif
+#define gdMaxColors 256
+#define gdTrueColorGetAlpha(c) (((c) &amp; 0x7F000000) &gt;&gt; 24)
+#define gdTrueColorGetRed(c) (((c) &amp; 0xFF0000) &gt;&gt; 16)
+#define gdTrueColorGetGreen(c) (((c) &amp; 0x00FF00) &gt;&gt; 8)
+#define gdTrueColorGetBlue(c) ((c) &amp; 0x0000FF)
+typedef struct gdImageStruct {
+	unsigned char ** pixels;
+	int sx;
+	int sy;
+	int colorsTotal;
+	int red[gdMaxColors];
+	int green[gdMaxColors];
+	int blue[gdMaxColors];
+	int open[gdMaxColors];
+	int transparent;
+	int *polyInts;
+	int polyAllocated;
+	struct gdImageStruct *brush;
+	struct gdImageStruct *tile;
+	int brushColorMap[gdMaxColors];
+	int tileColorMap[gdMaxColors];
+	int styleLength;
+	int stylePos;
+	int *style;
+	int interlace;
+	int thick;
+	int alpha[gdMaxColors];
+	int trueColor;
+	int ** tpixels;
+	int alphaBlendingFlag;
+	int antialias;
+	int saveAlphaFlag;
+	int AA;
+	int AA_color;
+	int AA_dont_blend;
+	unsigned char **AA_opacity;
+	int AA_polygon;
+	int AAL_x1;
+	int AAL_y1;
+	int AAL_x2;
+	int AAL_y2;
+	int AAL_Bx_Ax;
+	int AAL_By_Ay;
+	int AAL_LAB_2;
+	float AAL_LAB;
+	int cx1;
+	int cy1;
+	int cx2;
+	int cy2;
+} gdImage;
+
+typedef gdImage * gdImagePtr;
 
 void phpg_free_pixbuf_data(guchar *pixels, gpointer data)
 {
@@ -1863,24 +1911,37 @@
 
 PHP_METHOD
 {
-#if HAVE_GD_BUNDLED
     zval *php_gd;
     gdImagePtr gd;
     guint *data;
     guint pixel;
     GdkPixbuf *pixbuf;
     int x, y, c, alpha;
+    struct _zend_module_entry *module;    
 
-    if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "r", &amp;php_gd)) {
+#ifdef WIN32
+int (__stdcall *phpi_get_le_gd)(void);
+#else
+int (*phpi_get_le_gd)(void);
+#endif
+
+	if (zend_hash_find(&amp;module_registry, "gd", sizeof("gd"), (void **)&amp;module) == FAILURE) {
+        php_error(E_ERROR, "The php gd extension must be loaded to use this method");
         return;
     }
 
-    if (!zend_hash_exists(&amp;module_registry, "gd", sizeof("gd")) ||
-        !zend_hash_exists(EG(function_table), "imagesavealpha", sizeof("imagesavealpha"))) {
-        php_error(E_ERROR, "Extension 'gd' not available or uses GD library version below 2.0");
+    if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "r", &amp;php_gd)) {
         return;
     }
 
+	phpi_get_le_gd = DL_FETCH_SYMBOL(module-&gt;handle, "phpi_get_le_gd");
+	
+	if (!phpi_get_le_gd)
+	{
+		php_error(E_ERROR, "phpi_get_le_gd is dying");
+		return;
+	}
+
     ZEND_FETCH_RESOURCE(gd, gdImagePtr, &amp;php_gd, -1, "Image", phpi_get_le_gd());
 
     data = safe_emalloc(gd-&gt;sx * gd-&gt;sy, sizeof(guint), 0);
@@ -1940,9 +2001,6 @@
 
     phpg_gobject_new(&amp;return_value, (GObject *)pixbuf TSRMLS_CC);
     g_object_unref(pixbuf); /* phpg_gobject_new() increments reference count */
-#else
-    php_error(E_ERROR, "PHP-GTK was not compiled against PHP with bundled GD library");
-#endif
 }
 
 %%



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070810180225</emailId><senderName>Leon Pegg</senderName><senderEmail>leon.pegg@gmail.com</senderEmail><timestampReceived>2007-08-10 18:02:25-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] php-gtk php6 branch</subject><body>


I now have php-gtk compiling against php6 and running see
http://leonpegg.blogspot.com/2007/08/php6-gtk2-working.html 
It would be nice if we could get a php6 branch added to the cvs. I will be
fixing the last few error tonight after which I will be rewriting the
generator. I have some fixes to the generator which I will create patches
for later, the fixes make the generator work better with php6 and does not
change how it works so it will still work with php5 (currently having memory
problems with php6).

Leon Pegg wrote:
&gt; 
&gt; Hello all,
&gt; 
&gt; Andrei I have been working on getting php-gtk compiling against php6-dev
&gt; and
&gt; wanted to know weather you thought a php6 branch or api ifdefs would be
&gt; better.
&gt; personally I think a php6 branch would be better.
&gt; 
&gt; Regards Leon Pegg
&gt; 
&gt; 

-- 
View this message in context: http://www.nabble.com/php-gtk-php6-branch-tf4230179.html#a12096292
Sent from the Php - GTK - Dev mailing list archive at Nabble.com.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070811022355</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-08-11 02:23:55-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] php-gtk php6 branch</subject><body>

PHP 6 is not even in alpha yet. PHP-GTK 2 has not had a final  
official release. So I think it would be premature to spend effort on  
making a branch when we could use help on existing stuff..

-Andrei
http://10fathoms.org/vu - daily photoblog

On Aug 10, 2007, at 11:02 AM, Leon Pegg wrote:

&gt;
&gt; I now have php-gtk compiling against php6 and running see
&gt; http://leonpegg.blogspot.com/2007/08/php6-gtk2-working.html
&gt; It would be nice if we could get a php6 branch added to the cvs. I  
&gt; will be
&gt; fixing the last few error tonight after which I will be rewriting the
&gt; generator. I have some fixes to the generator which I will create  
&gt; patches
&gt; for later, the fixes make the generator work better with php6 and  
&gt; does not
&gt; change how it works so it will still work with php5 (currently  
&gt; having memory
&gt; problems with php6).
&gt;
&gt; Leon Pegg wrote:
&gt;&gt;
&gt;&gt; Hello all,
&gt;&gt;
&gt;&gt; Andrei I have been working on getting php-gtk compiling against  
&gt;&gt; php6-dev
&gt;&gt; and
&gt;&gt; wanted to know weather you thought a php6 branch or api ifdefs  
&gt;&gt; would be
&gt;&gt; better.
&gt;&gt; personally I think a php6 branch would be better.
&gt;&gt;
&gt;&gt; Regards Leon Pegg
&gt;&gt;
&gt;&gt;
&gt;
&gt; -- 
&gt; View this message in context: http://www.nabble.com/php-gtk-php6- 
&gt; branch-tf4230179.html#a12096292
&gt; Sent from the Php - GTK - Dev mailing list archive at Nabble.com.
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070811061241</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-08-11 06:12:41-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] php-gtk php6 branch</subject><body>

Oh My, Where Have We Heard This Before, Leon?

    :p

  -bob.

Andrei Zmievski wrote:
&gt; PHP 6 is not even in alpha yet. PHP-GTK 2 has not had a final official 
&gt; release. So I think it would be premature to spend effort on making a 
&gt; branch when we could use help on existing stuff..
&gt; 
&gt; -Andrei
&gt; http://10fathoms.org/vu - daily photoblog
&gt; 
&gt; On Aug 10, 2007, at 11:02 AM, Leon Pegg wrote:
&gt; 
&gt;&gt;
&gt;&gt; I now have php-gtk compiling against php6 and running see
&gt;&gt; http://leonpegg.blogspot.com/2007/08/php6-gtk2-working.html
&gt;&gt; It would be nice if we could get a php6 branch added to the cvs. I 
&gt;&gt; will be
&gt;&gt; fixing the last few error tonight after which I will be rewriting the
&gt;&gt; generator. I have some fixes to the generator which I will create patches
&gt;&gt; for later, the fixes make the generator work better with php6 and does 
&gt;&gt; not
&gt;&gt; change how it works so it will still work with php5 (currently having 
&gt;&gt; memory
&gt;&gt; problems with php6).
&gt;&gt;
&gt;&gt; Leon Pegg wrote:
&gt;&gt;&gt;
&gt;&gt;&gt; Hello all,
&gt;&gt;&gt;
&gt;&gt;&gt; Andrei I have been working on getting php-gtk compiling against php6-dev
&gt;&gt;&gt; and
&gt;&gt;&gt; wanted to know weather you thought a php6 branch or api ifdefs would be
&gt;&gt;&gt; better.
&gt;&gt;&gt; personally I think a php6 branch would be better.
&gt;&gt;&gt;
&gt;&gt;&gt; Regards Leon Pegg
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; View this message in context: 
&gt;&gt; http://www.nabble.com/php-gtk-php6-branch-tf4230179.html#a12096292
&gt;&gt; Sent from the Php - GTK - Dev mailing list archive at Nabble.com.
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070610040034</emailId><senderName>Tom Rogers</senderName><senderEmail>trogers@kwikin.com</senderEmail><timestampReceived>2007-06-10 04:00:34-0400</timestampReceived><subject>Re[2]: [PHP-GTK-DEV] GtkScintilla for Windows</subject><body>

Hi,

Friday, June 8, 2007, 11:07:05 PM, you wrote:


ES&gt; Thanks Tom, but Scintilla builds right "out of the box" as both a static
ES&gt; lib and .dll on windows, not an issue really.

ES&gt; The problem is there are two extensions here we're talking about based
ES&gt; on two different "base" libraries that do basically the same thing.

ES&gt; 1. Is gtkscintilla from 
ES&gt; http://sourceforge.net/project/showfiles.php?group_id=31426 .  Really 
ES&gt; it's a wrapper around the scintilla library that makes it act more 
ES&gt; "gtk-ish"  What makes this a good choice?  A lot of linux distros use 
ES&gt; this already, it builds as an .so "out of the box".  What makes it a bad
ES&gt; choice?  My biggest issue is it's completely unmaintained.  The last 
ES&gt; release was in 2003, and it doesn't build without some code hacking on
ES&gt; windows.  We'd basically have to support gtkscintilla in some way ourselves.

ES&gt; 2. Is straight scintilla from http://www.scintilla.org/ .  This is the
ES&gt; actual underlying library.  What makes this a good choice?  Well 
ES&gt; maintained, new releases, bugfixes on a regular basis, builds "out of 
ES&gt; the box" as both .dll and static lib on windows.  What makes it a bad 
ES&gt; choice?  The only makefile provided builds a static linux library (.a),
ES&gt; so there's no .so that's routinely distributed on *nix like 
ES&gt; gtkscintilla.  We could bundle the library with a makefile to generate
ES&gt; an .so or figure out how to use the php-gtk build system to build the 
ES&gt; static library first and then link it with the php-gtk build system, but
ES&gt; as I said before I'm not a *nix user and Anant can't figure out how to
ES&gt; do it.

ES&gt; Personally I'm not a fan of trying to upgrade and maintain gtkscintilla,
ES&gt; so I'd prefer the straight scintilla solution, besides the fact that I
ES&gt; really don't have time to be hacking up the source to get it cooperating
ES&gt; on windows with MSVC. The PyGTK extension has moved to straight 
ES&gt; scintilla as well.  Anant would prefer the gtkscintilla solution since
ES&gt; it would require no work on the *nix end.

ES&gt; Anyone else have some thoughts on which would be the "better" solution?
ES&gt;   Would someone with autotools experience willing to step up and figure
ES&gt; out how to bundle the scintilla library and get it building easily on 
ES&gt; *nix to distribute with php-gtk?  That is the main issue with option 2.

ES&gt; Or would someone be willing to take over support and maintainence of the
ES&gt; gtkscintilla wrapper (including getting it building with MSVC on 
ES&gt; windows, updating the bundled scintilla lib, and fixing bugs?)  since 
ES&gt; distributing something based on an unmaintained library is not really 
ES&gt; the best idea.

ES&gt; Anyway, just my views on this subject (we keep going around and around
ES&gt; here...)

I took the plunge and tried to compile php-gtk on linux, it builds the
basic gtk stuff and a simple script works, When it came to the
extensions it took a lot of fiddling to get it to do scintilla as a
module but it insists on doing scintilla before gtk which results in a
lot of bad symbols. What is the state of modules in linux? My
knowledge of the config.m4 system is very limited. Even libglade will
not build. What am I missing? Here is a copy of the config.m$ I made:

dnl $Id: config.m4,v 1.9 2003/06/28 02:09:06 alan_k Exp $
dnl config.m4 for scintilla module

PHP_GTK_ARG_WITH(scintilla,for GtkScintilla support,
[  --with-scintilla       Enable GtkScintilla support])

if test "$PHP_GTK_SCINTILLA" != "no"; then
  for x in /usr/src/scintilla; do
    if test -f $x/include/Scintilla.h; then
      SCINTILLA_DIR=$x
      SCINTILLA_INCDIR=$x/include
      SCINTILLA_LIBDIR=$x/bin
    fi
  done

  if test -z "$SCINTILLA_DIR"; then
    AC_MSG_ERROR(Cannot locate SCINTILLA)
  fi
  
  AC_DEFINE(HAVE_SCINTILLA,1,[scintilla support])
  PHP_ADD_INCLUDE($SCINTILLA_INCDIR)
  if test "$php_gtk_ext_shared" = "yes"; then
    PHP_ADD_LIBRARY_WITH_PATH(scintilla, $SCINTILLA_LIBDIR, SCINTILLA_SHARED_LIBADD)
    PHP_SUBST(SCINTILLA_SHARED_LIBADD)
  else
    PHP_ADD_LIBRARY_WITH_PATH(scintilla, $SCINTILLA_LIBDIR, PHP_GTK_SHARED_LIBADD)
  fi
  PHP_GTK_EXTENSION(scintilla, yes, php_scintilla.c gen_scintilla.c,,-DCOMPILE_DL_SCINTILLA2=1)
fi



-- 
regards,
Tom

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070525235457</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-05-25 23:54:57-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] website</subject><body>

Hey Pablo,

You could start by downloading the website from CVS and looking at what's
actually there. It'd make a lot more sense than designing something that
then needs to be integrated into it!

If you look at the admin page source you'll see how you can use that to make
areas of the site visible or non-visible to self/others and run sandboxed
tests on the live server. But please don't do that from scratch.

- Steph

----- Original Message ----- 
From: "Pablo DallOglio" &lt;pablo@dalloglio.net&gt;
To: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
Sent: Saturday, May 26, 2007 12:47 AM
Subject: [PHP-GTK-DEV] website


&gt; Hello,
&gt;
&gt; The application repository from gtk.php.net is not working fine.
&gt; How can I help ?
&gt; Andrei told me Steph was the best person to guide me through.
&gt;
&gt; I could write an entirely new app repository, but how can I integrate
&gt; this to the website ? design and technology ?
&gt;
&gt; bests
&gt; Pablo
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070410023900</emailId><senderName>markybob</senderName><senderEmail>markybob@gmail.com</senderEmail><timestampReceived>2007-04-10 02:39:00-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] php-gtk with gtkmozembed</subject><body>




Elizabeth Smith wrote:
&gt; 
&gt; markybob wrote:
&gt;&gt; demo of mozembed causes segfault.
&gt;&gt; 
&gt;&gt; http://cvs.php.net/viewvc.cgi/php-gtk/ext/mozembed/demos/browser.php?view=log   
&gt;&gt; this is with php 5.2.1 and php-gtk2 (cvs april 9th 2007).  does anyone
&gt;&gt; have
&gt;&gt; a mozembed demo that actually works?  any help would be greatly
&gt;&gt; appreciated. 
&gt;&gt; thanks!
&gt; 
&gt; I haven't been able to get mozembed to work on windows (or linux) at all 
&gt; without blowing up, but I'm not sure that it's a php-gtk problem at all, 
&gt; the mozembed code itself is very volatile at the moment
&gt; 
&gt; http://www.mail-archive.com/dev-embedding@lists.mozilla.org/msg00838.html 
&gt; - there's been a lead developer change and 
&gt; http://wiki.mozilla.org/Gtkmozembed according to the wiki there have 
&gt; been a great many updates just recently merged to the trunk.  Until the 
&gt; underlying code reaches a more stable state (with both api and crashing) 
&gt; it might be a smart idea to treat gtkmozembed as "experimental toy" 
&gt; until they decide what direction it's going to take... especially since 
&gt; the current discussion on the subject in the newsgroups 
&gt; http://groups.google.com/group/mozilla.dev.embedding/topics doesn't 
&gt; sound so happy...
&gt; 
&gt; If you're desperate for a html widget in php-gtk, the gtk-html extension 
&gt; works perfectly (and works in windows too)
&gt; 
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 
&gt; 
&gt; 

well, it's known that gtkmozembed doesnt work on windows, but it should work
on linux just fine.  in fact, i have a simply pygtk browser that uses
gtkmozembed without a problem on the same computer...which makes me think
it's either that demo or php-gtk
-- 
View this message in context: http://www.nabble.com/php-gtk-with-gtkmozembed-tf3550630.html#a9913048
Sent from the Php - GTK - Dev mailing list archive at Nabble.com.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070301093256</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-03-01 09:32:56-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Extra mangles the win32 build</subject><body>

Hi Elizabeth,

&gt; When getting gtkextra building on windows I ran into a really weird
&gt; problem - having the directory extra in the extensions messed up the
&gt; makefile creation - it put extra in the spot reserved for php-gtk and
&gt; php-gtk got put down with the other extensions... and I haven't figured
&gt; out what the problem is or how to fix it.  Simply renaming the directory
&gt; (gtkextra for example - none of the files or even the extension need a
&gt; rename...just the directory) fixes the problem.  Very strange and hard
&gt; to pin down.

The build system runs through the 'ext' directory in alphabetical order
by default, which means the 'extra' extension is built before 'gtk+'
which is not what we want. We need to force building 'gtk+' before any
other extension. This was done recently for *nix builds (see commit
history for /build2/config-stubs), you need to do the same for Win32.

-- 
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070301131337</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-03-01 13:13:37-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Extra mangles the win32 build</subject><body>

Anant,

Nope, I did that when I wrote the win32 build system, so basically 
something's wrong in the way this extension's set up. Will sort it out in a 
bit,

- Steph

----- Original Message ----- 
From: "Anant Narayanan" &lt;anant@kix.in&gt;
To: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
Cc: &lt;php-gtk-dev@lists.php.net&gt;
Sent: Thursday, March 01, 2007 9:20 AM
Subject: Re: [PHP-GTK-DEV] Extra mangles the win32 build


&gt; Hi Elizabeth,
&gt;
&gt;&gt; When getting gtkextra building on windows I ran into a really weird
&gt;&gt; problem - having the directory extra in the extensions messed up the
&gt;&gt; makefile creation - it put extra in the spot reserved for php-gtk and
&gt;&gt; php-gtk got put down with the other extensions... and I haven't figured
&gt;&gt; out what the problem is or how to fix it.  Simply renaming the directory
&gt;&gt; (gtkextra for example - none of the files or even the extension need a
&gt;&gt; rename...just the directory) fixes the problem.  Very strange and hard
&gt;&gt; to pin down.
&gt;
&gt; The build system runs through the 'ext' directory in alphabetical order
&gt; by default, which means the 'extra' extension is built before 'gtk+'
&gt; which is not what we want. We need to force building 'gtk+' before any
&gt; other extension. This was done recently for *nix builds (see commit
&gt; history for /build2/config-stubs), you need to do the same for Win32.
&gt;
&gt; -- 
&gt; Anant
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070301152704</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-03-01 15:27:04-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Extra mangles the win32 build</subject><body>

Steph Fox wrote:
&gt; Anant,
&gt; 
&gt; Nope, I did that when I wrote the win32 build system, so basically 
&gt; something's wrong in the way this extension's set up. Will sort it out 
&gt; in a bit,
&gt; 
&gt; - Steph
&gt; 

Well I'm not sure what the problem is - I have found a way around it - 
here's a slightly hacky patch to buildconf - just makes sure the php-gtk 
extension config.w32 comes before any other extensions in configure.js - 
but it's just a workaround, not a real fix

["buildconf.js.patch" (text/plain)]

Index: buildconf.js
===================================================================
RCS file: /repository/php-gtk/win32/buildconf.js,v
retrieving revision 1.7
diff -u -r1.7 buildconf.js
--- buildconf.js	31 Oct 2005 11:44:42 -0000	1.7
+++ buildconf.js	1 Mar 2007 15:19:28 -0000
@@ -78,7 +78,15 @@
 		mod_name = module_names[i];
 		item = MODULES.Item(mod_name);
 		MODULES.Remove(mod_name);
-		output += emit_module(item);
+		// hack - gtk+ MUST BE FIRST
+		if (mod_name == 'gtk+')
+		{
+			output = emit_module(item) + output;
+		}
+		else
+		{
+			output += emit_module(item);
+		}
 	}
 
 	return output;



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070201082517</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-02-01 08:25:17-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] The Road Ahead</subject><body>

Aha, you snuck it in :)

OK 

/me backs into her corner

----- Original Message ----- 
From: "Anant Narayanan" &lt;anant@kix.in&gt;
To: "Steph Fox" &lt;steph@zend.com&gt;
Cc: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
Sent: Thursday, February 01, 2007 8:21 AM
Subject: Re: [PHP-GTK-DEV] The Road Ahead


&gt;&gt; You STILL managed to miss out 'complete the GTK+ code coverage'!
&gt;&gt; 
&gt;&gt; We'll never let you forget it either ;)
&gt; 
&gt; No, the first point (highest priority) was:
&gt; 
&gt;&gt;&gt; * API/Doc Completion for Gtk+ 2.6
&gt; 
&gt; Notice the "API" in there ;)
&gt; 
&gt; --
&gt; Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070201082624</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-02-01 08:26:24-0400</timestampReceived><subject>[PHP-GTK-DEV] The Road Ahead</subject><body>

Hi all,

Now that the dust has settled a bit; here's a brief summary of what lies
ahead (roughly in order of priority)

* API/Doc Completion for Gtk+ 2.6
* Add support for Gtk+ 2.8 and 2.10
* Make PHP-GTK compile cleanly on MSVC 2005
* Create installer for Windows (and Mac? :))
* Decide on which Scintilla version to bundle
* Add a few more extensions and override as necessary (My next target is
GtkHTML)

I'll commit in GtkExtra and GtkSpell to CVS shortly. Elizabeth, you can
commit the GtkPlug override from the edge repository as discussed
earlier (Andrei: this is the corrected version!). I'll also be posting
consolidated patches of Elizabeth's earlier work on 2.8/2.10 along with
build support for *nix; so that we can discuss that and take it further.

We should be ready for a beta release in about a month; I think we
should make that release once (if) we have Gtk+ 2.8/2.10 in CVS and the
API coverage is hovering around the 90% mark. After that we can make the
full release with 100% (or close to) 2.6 coverage; part-coverage of
2.8/2.10, extensions and documentation. Subsequent releases can improve
on those aspects.

I'll pull down the edge repository as soon as we're decided on whether
2.8/2.10 will be going in CVS; there are still people checking out from
there and I think it is only fair to let them try 2.8/2.10 in the interim.

About the Mac installer; I have only been toying around with that idea;
so if there's anyone lurking out there who'd be knowledgeable/interested
about the task, I'd appreciate the help :) A php-gtk Portfile for
Macports is on the cards too.

Best Regards,

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070201083353</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-02-01 08:33:53-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] The Road Ahead</subject><body>

&gt; You STILL managed to miss out 'complete the GTK+ code coverage'!
&gt; 
&gt; We'll never let you forget it either ;)

No, the first point (highest priority) was:

&gt;&gt; * API/Doc Completion for Gtk+ 2.6

Notice the "API" in there ;)

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070201170336</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-02-01 17:03:36-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] The Road Ahead</subject><body>

On Feb 1, 2007, at 12:14 AM, Anant Narayanan wrote:

&gt; We should be ready for a beta release in about a month; I think we
&gt; should make that release once (if) we have Gtk+ 2.8/2.10 in CVS and the
&gt; API coverage is hovering around the 90% mark. After that we can make 
&gt; the
&gt; full release with 100% (or close to) 2.6 coverage; part-coverage of
&gt; 2.8/2.10, extensions and documentation. Subsequent releases can improve
&gt; on those aspects.

What are those percentages of? Gtk library coverage? Gdk? Pango? Or 
overall?

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070201172243</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-02-01 17:22:43-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] The Road Ahead</subject><body>

&gt;&gt; We should be ready for a beta release in about a month; I think we
&gt;&gt; should make that release once (if) we have Gtk+ 2.8/2.10 in CVS and the
&gt;&gt; API coverage is hovering around the 90% mark. After that we can make the
&gt;&gt; full release with 100% (or close to) 2.6 coverage; part-coverage of
&gt;&gt; 2.8/2.10, extensions and documentation. Subsequent releases can improve
&gt;&gt; on those aspects.
&gt; 
&gt; What are those percentages of? Gtk library coverage? Gdk? Pango? Or
&gt; overall?

Overall.

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071215234603</emailId><senderName>Jake Cobb</senderName><senderEmail>jake@lyrehc.com</senderEmail><timestampReceived>2007-12-15 23:46:03-0400</timestampReceived><subject>[PHP-GTK-DEV] GdkPixbuf::rotate_simple</subject><body>

Hello,

Added the GdkPixbuf::rotate_simple function and enum type.

jake@jake-desktop:~/php/php-gtk/ext/gtk+$ diff -u gdk-types.defs.orig
gdk-types.defs
--- gdk-types.defs.orig 2007-12-15 18:26:24.000000000 -0500
+++ gdk-types.defs      2007-12-15 18:28:43.000000000 -0500
@@ -889,6 +889,18 @@
   )
 )

+(define-enum PixbufRotation
+  (in-module "Gdk")
+  (c-name "GdkPixbufRotation")
+  (gtype-id "GDK_TYPE_PIXBUF_ROTATION")
+  (values
+    '("none" "GDK_PIXBUF_ROTATE_NONE")
+    '("counterclockwise" "GDK_PIXBUF_ROTATE_COUNTERCLOCKWISE")
+    '("upsidedown" "GDK_PIXBUF_ROTATE_UPSIDEDOWN")
+    '("clockwise" "GDK_PIXBUF_ROTATE_CLOCKWISE")
+  )
+)
+
 (define-enum PixbufError
   (in-module "Gdk")
   (c-name "GdkPixbufError")

jake@jake-desktop:~/php/php-gtk/ext/gtk+$ diff -u gdk.defs.orig gdk.defs
--- gdk.defs.orig       2007-12-15 18:26:31.000000000 -0500
+++ gdk.defs    2007-12-15 18:29:58.000000000 -0500
@@ -1983,6 +1983,16 @@
   )
 )

+(define-method rotate_simple
+  (of-object "GdkPixbuf")
+  (c-name "gdk_pixbuf_rotate_simple")
+  (caller-owns-return #t)
+  (return-type "GdkPixbuf*")
+  (parameters
+    '("GdkPixbufRotation" "pixbuf_rotation")
+  )
+)
+
 (define-method get_height
   (of-object "GdkPixbufAnimation")
   (c-name "gdk_pixbuf_animation_get_height")


jake@jake-desktop:~/php/php-gtk/ext/gtk+$ diff -u gdk.overrides.orig
gdk.overrides
--- gdk.overrides.orig  2007-12-15 18:26:54.000000000 -0500
+++ gdk.overrides       2007-12-15 18:31:38.000000000 -0500
@@ -2121,6 +2121,37 @@
 }

 %%
+add-arginfo GdkPixbuf rotate_simple
+static
+ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
+    ZEND_ARG_INFO(0, pixbuf_rotation)
+ZEND_END_ARG_INFO();
+
+%%
+override gdk_pixbuf_rotate_simple
+PHP_METHOD
+{
+   GdkPixbufRotation pixbuf_rotation;
+       zval *php_pixbuf_rotation = NULL;
+       GdkPixbuf* php_retval;
+
+    NOT_STATIC_METHOD();
+
+       if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "V", &amp;php_pixbuf_rotation))
+               return;
+
+       if (php_pixbuf_rotation &amp;&amp;
phpg_gvalue_get_enum(GDK_TYPE_PIXBUF_ROTATION, php_pixbuf_rotation,
(gint *)&amp;pixbuf_rotation) == FAILURE) {
+               return;
+       }
+
+    php_retval =
gdk_pixbuf_rotate_simple(GDK_PIXBUF(PHPG_GOBJECT(this_ptr)),
pixbuf_rotation);
+    phpg_gobject_new(&amp;return_value, (GObject *)php_retval TSRMLS_CC);
+    if (php_retval != NULL) {
+        g_object_unref(php_retval);
+    }
+}
+
+%%
 override gdk_pixbuf_get_pixels
 PHP_METHOD
 {

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071216182822</emailId><senderName>Jake Cobb</senderName><senderEmail>jake@lyrehc.com</senderEmail><timestampReceived>2007-12-16 18:28:22-0400</timestampReceived><subject>[PHP-GTK-DEV] GdkPixbuf::rotate_simple Revision</subject><body>

Hello,

My gdk.overrides change from my last email was to keep it from insisting
the enum argument be a class instance, but I think I've found the right
way to do that.  So, please discard my change to gdk.overrides and
substitute this:

jake@jake-desktop:~/php/php-gtk/generator$ diff -u generator.php.orig
generator.php
--- generator.php.orig  2007-12-16 13:18:42.000000000 -0500
+++ generator.php       2007-12-16 13:18:57.000000000 -0500
@@ -1329,6 +1329,7 @@
                                  'GdkOverlapType'       =&gt; 'int',
                                  'GdkOwnerChange'       =&gt; 'int',
                                  'GdkPixbufAlphaMode'   =&gt; 'int',
+                                 'GdkPixbufRotation'    =&gt; 'int',
                                  'GdkPropertyState'     =&gt; 'int',
                                  'GdkPropMode'          =&gt; 'int',
                                  'GdkRgbDither'         =&gt; 'int',

-Jake Cobb

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071105165210</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-11-05 16:52:10-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] compiling an extension</subject><body>

Hi Pablo,

I think the clue's in that tutorial:

&lt;quote&gt;
Enter the following in the dialog box (the second directive has to match the 
name of your extension. it still works if it doesn't, you can compile and 
load the dll in php, but the functions defined by the extension won't be 
usable)
ZEND_DEBUG=0
COMPILE_DL_BCOMPILER
ZTS=1
ZEND_WIN32
PHP_WIN32
&lt;/quote&gt;

thread-safety == ZTS

- Steph

----- Original Message ----- 
From: "Pablo Dall'Oglio" &lt;pablo@dalloglio.net&gt;
To: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
Sent: Monday, November 05, 2007 4:34 PM
Subject: [PHP-GTK-DEV] compiling an extension


&gt; Hello people,
&gt;
&gt; I know this list is not the right place to post this...
&gt; But there'are people here that should know the answer.
&gt;
&gt; I wrote a simple php extension and I'm trying to compile it under
&gt; windows (under linux is ok). To do that, I followed this tutorial
&gt; http://deluxe-design.at/win-php-extensions/ adapting some parts to
&gt; php5...
&gt;
&gt; I'm Using Visual C++ 2005 Express and the module compiles fine, but when
&gt; I try to load through a php script using dl(), I got this error:
&gt;
&gt; Warning: dl(): studio: Unable to initialize module
&gt; Module compiled with module API=20060613, debug=0, thread-safety=1
&gt; PHP    compiled with module API=20060613, debug=0, thread-safety=0
&gt; These options need to match
&gt;
&gt; I compiled the project linking against php5.lib and not php5ts.lib, does
&gt; anyone know how to compile a module turning thread-safety OFF ?
&gt;
&gt; bests
&gt; Pablo
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071106020421</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-11-06 02:04:21-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] patch: GtkRecentChoserDialog::__construct complete</subject><body>



Bob Majdak Jr wrote:
&gt;  &gt; Bob should apply for a CVS account first.
&gt; 
&gt; Applied.

You have karma now. But continue to post patches before committing them, 
please.

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071106070758</emailId><senderName>geekjob</senderName><senderEmail>paragd@cybage.com</senderEmail><timestampReceived>2007-11-06 07:07:58-0400</timestampReceived><subject>[PHP-GTK-DEV] GtkStatusBar</subject><body>


how to change the font &amp; alignment of text inside the GtkstatusBar.? 
-- 
View this message in context: http://www.nabble.com/GtkStatusBar-tf4756426.html#a13601761
Sent from the Php - GTK - Dev mailing list archive at Nabble.com.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071106205033</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-11-06 20:50:33-0400</timestampReceived><subject>[PHP-GTK-DEV] patch: GtkRecentInfo fetching methods</subject><body>

This patch contains four entries: a bugfix and three additional methods.

-- Bugfix --
Currently GtkRecentManager::get_items() is broken. Items gotten from it end up
Gtk-CRITICAL'ing if you do something like print_r(), unset(), random events that
I did not feel like frequency counting, or allow the program to terminate. This
patch fixes that.

-- Additions --
Adds GtkRecentChooser::get_items().
	PHP Example: http://p.opsat.net/t/119
	(also demonstrates GtkRecentManager's fix)

Adds GtkRecentChooser::get_uris().
	PHP Example: http://p.opsat.net/t/11f

Adds GtkRecentChooser::list_filters().
	PHP Example: http://p.opsat.net/t/11g

This patch completes the GtkRecentChooser class according to gen_gtk.log.

GtkRecentChooser
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   methods              (33 written, 0 skipped)

-- 
Bob Majdak Jr
KateOS Rofflecopter Pilot
http://www.kateos.org










["gtkrecent-multiple-additions-20071106a.diff" (text/x-patch)]

diff -ur cvs/ext/gtk+/gtk-2.10.overrides cvsbob/ext/gtk+/gtk-2.10.overrides
--- cvs/ext/gtk+/gtk-2.10.overrides	2007-11-06 14:58:54.000000000 -0500
+++ cvsbob/ext/gtk+/gtk-2.10.overrides	2007-11-06 15:22:19.000000000 -0500
@@ -151,23 +151,34 @@
 override gtk_recent_manager_get_items
 PHP_METHOD
 {
-    GtkRecentInfo *info;
-    GList *items;
-    guint count, i;
-    zval *php_info = NULL;
+    GList *list = NULL, *element = NULL;
+    zval *current = NULL;
 
     NOT_STATIC_METHOD();
 
-    items = gtk_recent_manager_get_items(GTK_RECENT_MANAGER(PHPG_GOBJECT(this_ptr)));
-    count = g_list_length(items);
+    if(!php_gtk_parse_args(ZEND_NUM_ARGS(),"")) {
+        return;
+    }
+
+    list = gtk_recent_manager_get_items(GTK_RECENT_MANAGER(PHPG_GOBJECT(this_ptr)));
+
     array_init(return_value);
-    for (i = 0; i &lt; count; i++) {
-        info = g_list_nth_data(items, i);
-        phpg_gboxed_new(&amp;php_info, GTK_TYPE_RECENT_INFO, &amp;info, TRUE, TRUE TSRMLS_CC);
-        add_next_index_zval(return_value, php_info);
+
+    for(element = list; element; element = element-&gt;next) {
+        MAKE_STD_ZVAL(current);
+        phpg_gboxed_new(
+            &amp;current,
+            GTK_TYPE_RECENT_INFO,
+            element-&gt;data,
+            TRUE,
+            TRUE TSRMLS_CC
+        );
+
+        add_next_index_zval(return_value,current);
     }
-    g_list_foreach(items, (GFunc) gtk_recent_info_unref, NULL);
-    g_list_free(items);
+
+    g_list_foreach(list,(GFunc)gtk_recent_info_unref,NULL);
+    g_list_free(list);
 }
 
 %% }}}
@@ -376,6 +387,97 @@
     );
 }
 
+%%
+override gtk_recent_chooser_get_items
+PHP_METHOD
+{
+    GList *list = NULL, *element = NULL;
+    zval *current = NULL;
+
+    NOT_STATIC_METHOD();
+
+    if(!php_gtk_parse_args(ZEND_NUM_ARGS(),"")) {
+        return;
+    }
+
+    list = gtk_recent_chooser_get_items(GTK_RECENT_CHOOSER(PHPG_GOBJECT(this_ptr)));
+
+    array_init(return_value);
+
+    for(element = list; element; element = element-&gt;next) {
+        MAKE_STD_ZVAL(current);
+        phpg_gboxed_new(
+            &amp;current,
+            GTK_TYPE_RECENT_INFO,
+            element-&gt;data,
+            TRUE,
+            TRUE TSRMLS_CC
+        );
+
+        add_next_index_zval(return_value,current);
+    }
+
+    g_list_foreach(list,(GFunc)gtk_recent_info_unref,NULL);
+    g_list_free(list);
+}
+
+%%
+override gtk_recent_chooser_get_uris
+PHP_METHOD
+{
+    gchar **list;
+    gsize size, iter;
+
+    NOT_STATIC_METHOD();
+
+    if(!php_gtk_parse_args(ZEND_NUM_ARGS(),"")) {
+        return;
+    }
+
+    list = gtk_recent_chooser_get_uris(
+        GTK_RECENT_CHOOSER(PHPG_GOBJECT(this_ptr)),
+        &amp;size
+    );
+
+    array_init(return_value);
+
+    iter = 0;
+    while(iter &lt; size) {
+        add_next_index_string(return_value,list[iter++],1);
+    }
+
+    g_strfreev(list);	
+}
+
+%%
+override gtk_recent_chooser_list_filters
+PHP_METHOD
+{
+    GSList *list, *element;
+    zval *current;
+
+    NOT_STATIC_METHOD();
+
+    if(!php_gtk_parse_args(ZEND_NUM_ARGS(),"")) {
+        return;
+    }
+
+    list = gtk_recent_chooser_list_filters(
+        GTK_RECENT_CHOOSER(PHPG_GOBJECT(this_ptr))
+    );
+
+    array_init(return_value);
+
+    for(element = list; element; element = element-&gt;next) {
+        MAKE_STD_ZVAL(current);
+        phpg_gobject_new(&amp;current,element-&gt;data);
+        add_next_index_zval(return_value,current);
+    }	
+
+    g_slist_free(list);
+}
+
+
 %% }}}
 
 %% {{{ GtkRecentChooserDialog



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071111203738</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-11-11 20:37:38-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: patch: GtkRecentInfo fetching methods</subject><body>

Sure, looks fine.

-Andrei
http://10fathoms.org/vu - daily photoblog

On Nov 11, 2007, at 11:32 AM, Elizabeth Smith wrote:

&gt; Bob Majdak Jr wrote:
&gt;&gt; This patch contains four entries: a bugfix and three additional  
&gt;&gt; methods.
&gt;&gt; -- Bugfix --
&gt;&gt; Currently GtkRecentManager::get_items() is broken. Items gotten  
&gt;&gt; from it end up
&gt;&gt; Gtk-CRITICAL'ing if you do something like print_r(), unset(),  
&gt;&gt; random events that
&gt;&gt; I did not feel like frequency counting, or allow the program to  
&gt;&gt; terminate. This
&gt;&gt; patch fixes that.
&gt;&gt; -- Additions --
&gt;&gt; Adds GtkRecentChooser::get_items().
&gt;&gt;     PHP Example: http://p.opsat.net/t/119
&gt;&gt;     (also demonstrates GtkRecentManager's fix)
&gt;&gt; Adds GtkRecentChooser::get_uris().
&gt;&gt;     PHP Example: http://p.opsat.net/t/11f
&gt;&gt; Adds GtkRecentChooser::list_filters().
&gt;&gt;     PHP Example: http://p.opsat.net/t/11g
&gt;&gt; This patch completes the GtkRecentChooser class according to  
&gt;&gt; gen_gtk.log.
&gt;&gt; GtkRecentChooser
&gt;&gt; ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
&gt;&gt;   methods              (33 written, 0 skipped)
&gt;
&gt; Andrei, anant, whoever, can we get a yeah or nay? appears to work  
&gt; fine for me.
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071112003145</emailId><senderName>Elizabeth Smith</senderName><senderEmail>auroraeosrose@gmail.com</senderEmail><timestampReceived>2007-11-12 00:31:45-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Fwd:</subject><body>

Andrei Zmievski wrote:
&gt;
&gt; -Andrei
&gt; http://10fathoms.org/vu - daily photoblog
&gt;
&gt; Begin forwarded message:
&gt;
&gt;&gt; From: martin@hunting.cz
&gt;&gt; Date: November 11, 2007 2:02:53 PM PST
&gt;&gt; To: andrei@php.net
&gt;&gt; Subject: LibSexy
&gt;&gt;
&gt;&gt; Hello,
&gt;&gt;
&gt;&gt; I spend some time with "SexyIconEntry"-&gt; set_icon() or get_icon()
&gt;&gt; but (SexyIconEntryPosition) SEXY::ICON_ENTRY_PRIMARY or 
&gt;&gt; SEXY::ICON_ENTRY_SECONDARY
&gt;&gt; don't work. A debug info say:
&gt;&gt;
&gt;&gt; Argument 1 passed to SexyIconEntry::set_icon() must be an instance of 
&gt;&gt; SexyIconEntryPosition, integer given ...
&gt;&gt;
&gt;&gt; So I would ask you if it is a bug or .....??
&gt;&gt;
&gt;&gt; I saw the source code of gen_libsexy.c but I don't see some mistake.
&gt;&gt;
&gt;&gt; Thank you,
&gt;&gt; Martin
&gt;&gt;
&gt;&gt;
&gt;&gt; ----------------------------------------------------------------
&gt;&gt; This message was sent using Hunting.cz service. http://hunting.cz/
&gt;&gt;
&gt;
This is fixed in cvs - it wasn't set in the generator as one of the 
"registered" enums so the generator was creating it wrong - we fixed a 
few for gtkextra at the same time.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071112195230</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-11-12 19:52:30-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: 5.3 Branch Patch</subject><body>

Okay, let's commit it then.

-Andrei

Bob Majdak Jr wrote:
&gt; Compiled fine here on Linux.
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071118040138</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-11-18 04:01:38-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] patch: GtkScaleButton::__construct</subject><body>

 &gt; Please don't use _marshal suffix for helper function like these. This
 &gt; suffix should be reserved only for callback marshallers.

I actually did this last night, as I was looking over it and thinking about the 
definition of a marshaller.

 &gt; While this works, it's not how the objects should be constructed.

Oh. Though it does work without any apparent problems...

 &gt; in case this code runs on a subclass of GtkScaleButton

... and was GtkVolumeButton, but sure I'll look those up, and trace though what 
source makes construction in this manner more correct.

 &gt; Do we need to duplicate the strings when adding them to the list?

String duplication? What kind of dork would waste CPU time on that?
/me covertly starts hitting the backspace key.

-- 
Bob Majdak Jr
KateOS Rofflecopter Pilot
http://www.kateos.org

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071124032146</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-11-24 03:21:46-0400</timestampReceived><subject>[PHP-GTK-DEV] patch: compiling errors from tsrmls</subject><body>

Maxdamantus from IRC was compiling CVS and receiving errors which I was able to 
recognize as forgotten TSRMLS stuff and resolve. Here are two patches which 
cause PHP-GTK to compile clean both on my system without thread saftey, and on 
his with it. If these are O.K. with you guys then I can commit them.

Also, Any problems anyone reported with losing buffer on I/O watch, that was 
fixed by making his script right... required no work to PHP-GTK ;)

-- 
Bob Majdak Jr
KateOS Rofflecopter Pilot
http://www.kateos.org


["phpg_gtype_from_class-tsrmls.diff" (text/x-patch)]

diff -ur cvs/main/phpg_gtype.c cvsbob/main/phpg_gtype.c
--- cvs/main/phpg_gtype.c	2007-11-23 21:16:57.000000000 -0500
+++ cvsbob/main/phpg_gtype.c	2007-11-23 21:17:31.000000000 -0500
@@ -132,7 +132,7 @@
 	object-&gt;type = type;
 }
 
-PHP_GTK_API GType phpg_gtype_from_class(zend_class_entry *ce)
+PHP_GTK_API GType phpg_gtype_from_class(zend_class_entry *ce TSRMLS_DC)
 {
 	zval **gtype;
 

["phpg_register_signals-tsrmls.diff" (text/x-patch)]

diff -ur cvs/main/phpg_gobject.c cvsbob/main/phpg_gobject.c
--- cvs/main/phpg_gobject.c	2007-11-14 01:17:46.000000000 -0500
+++ cvsbob/main/phpg_gobject.c	2007-11-23 21:47:24.000000000 -0500
@@ -1304,7 +1304,7 @@
     return SUCCESS;
 }
 
-static int phpg_register_signals(GType type, zval *signals)
+static int phpg_register_signals(GType type, zval *signals TSRMLS_DC)
 {
     GObjectClass *oclass;
     zval **data;
@@ -1313,8 +1313,6 @@
     ulong num_key;
     int retval = SUCCESS;
 
-	TSRMLS_FETCH();
-
     oclass = g_type_class_ref(type);
     if (!oclass) {
         php_error_docref(NULL TSRMLS_CC, E_WARNING, "couuld not get a reference to type class");



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071002102955</emailId><senderName>Adz07</senderName><senderEmail>adam@7sycamore.co.uk</senderEmail><timestampReceived>2007-10-02 10:29:55-0400</timestampReceived><subject>[PHP-GTK-DEV] GtkNotebook Tab Label background with XP Theme??</subject><body>


Is there a way to make the background of a GtkNotebook tab label transparent?

I have the XP theme so the GtkNotebook is an off white, but the tab labels
show as having a grey background?? 

Any one know away around this?

Cheers,
Adam
-- 
View this message in context: \
http://www.nabble.com/GtkNotebook-Tab-Label-background-with-XP-Theme---tf4554143.html#a12996352
 Sent from the Php - GTK - Dev mailing list archive at Nabble.com.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20071007143309</emailId><senderName>Elizabeth Smith</senderName><senderEmail>auroraeosrose@gmail.com</senderEmail><timestampReceived>2007-10-07 14:33:09-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] freshmeat</subject><body>


On Oct 3, 2007, at 12:20 PM, Andrei Zmievski wrote:

&gt; Yeah, gtk_idle_remove() is an oversight. It should be an override,  
&gt; actually.. using g_idle_remove().
&gt;
&gt; -Andrei
&gt; http://10fathoms.org/vu - daily photoblog

Guess someone should go through and make sure there are overrides for  
all the deprecated gtk_* stuff that was moved into glib then  
(preferably before the release)

Any volunteers ;)

Thanks,
Elizabeth

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071015122749</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-10-15 12:27:49-0400</timestampReceived><subject>[PHP-GTK-DEV] patch for the generator</subject><body>

Top of the morning to you all.

This is hardly anything (other than like, you know, a Fix). Right now 
GtkMenuBar::set_pack_direction() fails 'Expected instance of GtkPackDirection' because it was not 
generated right. This patches the generator and now it works.

One whole line woo but after I spent 20 minutes comparing the set_pack_direction to the 
set_shadow_types and wondering why one works and one doesn't I thought 'eh i am thirsty' and then 
remembered 'duh oh yeah the generator'.

I am going to get something to drink now.

P.S. Thunderbird says 'wooo' is spelled wrong, but 'woo' is spelled right. In all actuality I was 
more like 'wooooooooooooooooooooo' but Thunderbird says that is spelled incorrectly as well.

-- 
Bob Majdak Jr
KateOS Rofflecopter Pilot
http://www.kateos.org



-- 
Bob Majdak Jr
KateOS Rofflecopter Pilot
http://www.kateos.org


["gtkpackdirectionint-genadd-bob1.diff" (text/x-patch)]

diff -ur php-gtk/generator/generator.php php-gtk2/generator/generator.php
--- php-gtk/generator/generator.php	2007-07-21 09:31:10.000000000 -0400
+++ php-gtk2/generator/generator.php	2007-10-15 08:11:53.000000000 -0400
@@ -1233,6 +1233,7 @@
                                  'GtkMetricType'        =&gt; 'int',
                                  'GtkMovementStep'      =&gt; 'int',
                                  'GtkOrientation'       =&gt; 'int',
+                                 'GtkPackDirection'     =&gt; 'int',
                                  'GtkPackType'          =&gt; 'int',
                                  'GtkPathPriorityType'  =&gt; 'int',
                                  'GtkPathType'          =&gt; 'int',



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071105015018</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-11-05 01:50:18-0400</timestampReceived><subject>[PHP-GTK-DEV] patch: GtkRecentChoserDialog::__construct complete</subject><body>

From gen_gtk.log:
constructor GtkRecentChooserDialog::__construct: varargs methods not supported

This patch completes the GtkRecentChooserDialog::__construct(). Works the same 
way GtkDialog::new_with_buttons() works except no flags parametre.

screenshot of it: http://www.opsat.net/temp/rcdcon.jpg

gtk_recent_chooser_dialog_new(
     const gchar *title,
     GtkWindow *parent,
     const gchar *first_button_text,
     ...
);

GtkRecentChooserDialog::__construct(
	string title,
	GtkWindow parent,
	array(string label, int response, ...)
);

-- 
Bob Majdak Jr
KateOS Rofflecopter Pilot
http://www.kateos.org


["gtkrecentchooserdialog-construct-bob20071104a.diff" (text/x-patch)]

diff -urP cvs/ext/gtk+/gtk-2.10.overrides cvsbob/ext/gtk+/gtk-2.10.overrides
--- cvs/ext/gtk+/gtk-2.10.overrides	2007-10-18 10:20:23.000000000 -0400
+++ cvsbob/ext/gtk+/gtk-2.10.overrides	2007-11-04 20:34:26.000000000 -0500
@@ -378,6 +378,100 @@
 
 %% }}}
 
+%% {{{ GtkRecentChooserDialog
+
+%%
+add-arginfo GtkRecentChooserDialog __construct
+static
+ZEND_BEGIN_ARG_INFO_EX(ARGINFO_NAME, 0, 0, 0)
+    ZEND_ARG_INFO(0, title)
+    ZEND_ARG_OBJ_INFO(0, parent, GtkWindow, 1)
+    ZEND_ARG_INFO(0, buttons)
+ZEND_END_ARG_INFO();
+
+%%
+override gtk_recent_chooser_dialog_new
+PHP_METHOD
+{
+    char *title = NULL;
+    zend_bool free_title;
+    GtkWindow *parent = NULL;
+    zval *php_parent = NULL;
+    zval *buttons = NULL;
+    GObject *wrapped_obj;
+    zval **text, **response;
+
+    if(!php_gtk_parse_args(ZEND_NUM_ARGS(), "|uNa", &amp;title, &amp;free_title, \
&amp;php_parent, gtkwindow_ce, &amp;buttons)) { +        \
PHPG_THROW_CONSTRUCT_EXCEPTION(GtkRecentChooserDialog); +    }
+    
+    if (php_parent) {
+        if(Z_TYPE_P(php_parent) == IS_NULL) {
+            parent = NULL;
+        } else {
+            parent = GTK_WINDOW(PHPG_GOBJECT(php_parent));
+        }
+    }
+
+    wrapped_obj = (GObject *)g_object_new(phpg_gtype_from_zval(this_ptr), NULL);
+    if(!wrapped_obj) {
+        PHPG_THROW_CONSTRUCT_EXCEPTION(GtkRecentChooserDialog);
+    }
+
+    if(title) {
+        gtk_window_set_title(GTK_WINDOW(wrapped_obj), title);
+    }
+    
+    if(free_title) { g_free(title); }
+
+    if(parent) {
+        gtk_window_set_transient_for(GTK_WINDOW(wrapped_obj), parent);
+    }
+
+    if(buttons) {
+        if(zend_hash_num_elements(Z_ARRVAL_P(buttons)) % 2) {
+            php_error(
+                E_WARNING,
+                "%s::%s(): button list has to contain pairs of items",
+                get_active_class_name(NULL TSRMLS_CC),
+                get_active_function_name(TSRMLS_C)
+            );
+            
+            gtk_object_destroy(GTK_OBJECT(wrapped_obj));
+            PHPG_THROW_CONSTRUCT_EXCEPTION(GtkRecentChooserDialog);
+        }
+
+        zend_hash_internal_pointer_reset(Z_ARRVAL_P(buttons));
+        while(zend_hash_get_current_data(Z_ARRVAL_P(buttons),(void **)&amp;text) == \
SUCCESS) { +            zend_hash_move_forward(Z_ARRVAL_P(buttons));
+            zend_hash_get_current_data(Z_ARRVAL_P(buttons),(void **)&amp;response);
+            zend_hash_move_forward(Z_ARRVAL_P(buttons));
+
+            if(Z_TYPE_PP(text) != IS_STRING || Z_TYPE_PP(response) != IS_LONG) {
+                php_error(
+                    E_WARNING,
+                    "%s::%s(): each pair in button list has to be string/number",
+                    get_active_class_name(NULL TSRMLS_CC),
+                    get_active_function_name(TSRMLS_C)
+                );
+                
+                gtk_object_destroy(GTK_OBJECT(wrapped_obj));
+                PHPG_THROW_CONSTRUCT_EXCEPTION(GtkRecentChooserDialog);
+            }
+
+            gtk_dialog_add_button(
+                GTK_DIALOG(wrapped_obj),
+                Z_STRVAL_PP(text),
+                Z_LVAL_PP(response)
+            );
+        }
+    }
+
+    phpg_gobject_set_wrapper(this_ptr, wrapped_obj TSRMLS_CC);
+}
+
+%% }}}
+
 %% {{{ GtkAssistant
 
 %%
Only in cvs/ext/scintilla: gen_scintilla.c
Only in cvs/ext/scintilla: gen_scintilla.h



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071111193233</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-11-11 19:32:33-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: patch: GtkRecentInfo fetching methods</subject><body>

Bob Majdak Jr wrote:
&gt; This patch contains four entries: a bugfix and three additional methods.
&gt; 
&gt; -- Bugfix --
&gt; Currently GtkRecentManager::get_items() is broken. Items gotten from it 
&gt; end up
&gt; Gtk-CRITICAL'ing if you do something like print_r(), unset(), random 
&gt; events that
&gt; I did not feel like frequency counting, or allow the program to 
&gt; terminate. This
&gt; patch fixes that.
&gt; 
&gt; -- Additions --
&gt; Adds GtkRecentChooser::get_items().
&gt;     PHP Example: http://p.opsat.net/t/119
&gt;     (also demonstrates GtkRecentManager's fix)
&gt; 
&gt; Adds GtkRecentChooser::get_uris().
&gt;     PHP Example: http://p.opsat.net/t/11f
&gt; 
&gt; Adds GtkRecentChooser::list_filters().
&gt;     PHP Example: http://p.opsat.net/t/11g
&gt; 
&gt; This patch completes the GtkRecentChooser class according to gen_gtk.log.
&gt; 
&gt; GtkRecentChooser
&gt; ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
&gt;   methods              (33 written, 0 skipped)
&gt; 

Andrei, anant, whoever, can we get a yeah or nay? appears to work fine 
for me.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071111233816</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-11-11 23:38:16-0400</timestampReceived><subject>[PHP-GTK-DEV] Fwd:</subject><body>


-Andrei
http://10fathoms.org/vu - daily photoblog

Begin forwarded message:

&gt; From: martin@hunting.cz
&gt; Date: November 11, 2007 2:02:53 PM PST
&gt; To: andrei@php.net
&gt; Subject: LibSexy
&gt;
&gt; Hello,
&gt;
&gt; I spend some time with "SexyIconEntry"-&gt; set_icon() or get_icon()
&gt; but (SexyIconEntryPosition) SEXY::ICON_ENTRY_PRIMARY or  
&gt; SEXY::ICON_ENTRY_SECONDARY
&gt; don't work. A debug info say:
&gt;
&gt; Argument 1 passed to SexyIconEntry::set_icon() must be an instance  
&gt; of SexyIconEntryPosition, integer given ...
&gt;
&gt; So I would ask you if it is a bug or .....??
&gt;
&gt; I saw the source code of gen_libsexy.c but I don't see some mistake.
&gt;
&gt; Thank you,
&gt; Martin
&gt;
&gt;
&gt; ----------------------------------------------------------------
&gt; This message was sent using Hunting.cz service. http://hunting.cz/
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071111193712</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-11-11 19:37:12-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: 5.3 Branch Patch</subject><body>

Elizabeth Smith wrote:
&gt; I've been playing with the 5.3 PHP branch.  Are there any plans to do 
&gt; namespaces for Gtk?  It's really easy, you just add a colon(s) when you 
&gt; register the class name.
&gt; 
&gt; Anyway, attached is a patch which lets php-gtk2 build properly on the 
&gt; 5.2 and 5.3 branches, can some nix people give it a test?  I don't want 
&gt; to commit it until I'm sure it works.
&gt; 
&gt; Thanks,
&gt; Elizabeth Smith
&gt; 
Sooo.... I was under the impression that 5.3 IS getting/already has the 
GC stuff - but can I commit this patch?  Everything still appears to 
work fine, at least with my code, using 5.3 with php-gtk2 and the patch. 
  I'm assuming that the "use namespacing for gtk stuff" is a no at this 
point.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071115094453</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-11-15 09:44:53-0400</timestampReceived><subject>[PHP-GTK-DEV] patch: GtkScaleButton::__construct</subject><body>

This patch completes the GtkScaleButton::__construct().

Screenshot of it: http://www.opsat.net/temp/gtkscalebutton-construct.jpg
PHP code in use: http://p.opsat.net/t/12h

Zip-a-dee-doo-daa, Zip-a-dee-day, my oh my it's 4:42 am.

-- 
Bob Majdak Jr
KateOS Rofflecopter Pilot
http://www.kateos.org


["gtkscalebutton-construct-bob20071115a.diff" (text/x-patch)]

diff -ur cvs/ext/gtk+/gtk-2.12.overrides cvsbob/ext/gtk+/gtk-2.12.overrides
--- cvs/ext/gtk+/gtk-2.12.overrides	2007-11-14 09:07:40.000000000 -0500
+++ cvsbob/ext/gtk+/gtk-2.12.overrides	2007-11-15 04:37:09.000000000 -0500
@@ -0,0 +1,77 @@
+%% {{{ GtkScaleButton
+
+%%
+add-arginfo GtkScaleButton __construct
+static
+ZEND_BEGIN_ARG_INFO_EX(ARGINFO_NAME, 0, 0, 0)
+    ZEND_ARG_INFO(0, iconsize)
+    ZEND_ARG_INFO(0, min)
+    ZEND_ARG_INFO(0, max)
+    ZEND_ARG_INFO(0, step)
+    ZEND_ARG_INFO(0, iconlist)
+ZEND_END_ARG_INFO();
+
+%%
+override gtk_scale_button_new
+PHP_METHOD
+{
+    guint iconsize;
+    gdouble min, max, step;
+    GtkScaleButton *obj;
+    zval *iconlist = NULL;
+    zval **iconname = NULL;
+    GStrv list = NULL;
+    int listlen,iter;
+
+    if(!php_gtk_parse_args(ZEND_NUM_ARGS(),"iddd|a",&amp;iconsize,&amp;min,&amp;max,&amp;step,&amp;iconlist)) {
+        return;
+    }
+
+    if(iconlist) {
+        listlen = zend_hash_num_elements(Z_ARRVAL_P(iconlist));
+    } else {
+        listlen = 0;
+    }
+
+    if(listlen &gt; 0) {
+        list = g_malloc0(sizeof(GStrv) * (listlen + 1));
+        iter = 0;
+
+        //. building null terminated gchar array for the constructor.
+        zend_hash_internal_pointer_reset(Z_ARRVAL_P(iconlist));
+        while(zend_hash_get_current_data(Z_ARRVAL_P(iconlist),(void **)&amp;iconname) == SUCCESS) {
+            if(Z_TYPE_PP(iconname) == IS_STRING) {
+                list[iter++] = g_strdup(Z_STRVAL_PP(iconname));
+            } else {
+                php_error_docref(NULL TSRMLS_CC,E_WARNING,"each item in icon array is to be a string");
+            }
+
+            zend_hash_move_forward(Z_ARRVAL_P(iconlist));
+        } list[iter] = NULL;
+
+    } else {
+        list = NULL;
+    }
+
+    obj = gtk_scale_button_new(
+        iconsize,
+        min,
+        max,
+        step,
+        (const GStrv)list
+    );
+
+    if(list) {
+        g_strfreev(list);
+    }
+
+    if(!obj) { PHPG_THROW_CONSTRUCT_EXCEPTION(GtkScaleButton); }
+
+    phpg_gobject_set_wrapper(
+        this_ptr,
+        G_OBJECT(obj) TSRMLS_CC
+    );
+}
+
+%% }}}
+

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071115182132</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-11-15 18:21:32-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] patch: GtkScaleButton::__construct</subject><body>

Updated, now contains two methods:
	* GtkScaleButton::__construct()
	* GtkScaleButton::set_icons()

PHP code using constructor: http://p.opsat.net/t/12h
PHP code using set_icons: http://p.opsat.net/t/12j

-- 
Bob Majdak Jr
KateOS Rofflecopter Pilot
http://www.kateos.org


Bob Majdak Jr wrote:
&gt; This patch completes the GtkScaleButton::__construct().
&gt; 
&gt; Screenshot of it: http://www.opsat.net/temp/gtkscalebutton-construct.jpg
&gt; PHP code in use: http://p.opsat.net/t/12h
&gt; 
&gt; Zip-a-dee-doo-daa, Zip-a-dee-day, my oh my it's 4:42 am.
&gt; 


["gtkscalebutton-methods-bob20071115a.diff" (text/x-patch)]

diff -ur cvs/ext/gtk+/gtk-2.12.overrides cvsbob/ext/gtk+/gtk-2.12.overrides
--- cvs/ext/gtk+/gtk-2.12.overrides	2007-11-14 09:07:40.000000000 -0500
+++ cvsbob/ext/gtk+/gtk-2.12.overrides	2007-11-15 13:12:52.000000000 -0500
@@ -0,0 +1,107 @@
+%% {{{ GtkScaleButton
+
+%%
+headers
+static void phpg_scale_button_set_icons_marshal(GtkScaleButton *, zval *);
+
+%%
+add-arginfo GtkScaleButton __construct
+static
+ZEND_BEGIN_ARG_INFO_EX(ARGINFO_NAME, 0, 0, 0)
+    ZEND_ARG_INFO(0, iconsize)
+    ZEND_ARG_INFO(0, min)
+    ZEND_ARG_INFO(0, max)
+    ZEND_ARG_INFO(0, step)
+    ZEND_ARG_INFO(0, iconlist)
+ZEND_END_ARG_INFO();
+
+%%
+override gtk_scale_button_new
+PHP_METHOD
+{
+    gint iconsize;
+    gdouble min, max, step;
+    GtkWidget *obj;
+    zval *iconlist = NULL;
+
+    if(!php_gtk_parse_args(ZEND_NUM_ARGS(),"iddd|a",&amp;iconsize,&amp;min,&amp;max,&amp;step,&amp;iconlist)) {
+        return;
+    }
+
+    obj = gtk_scale_button_new(iconsize,min,max,step,NULL);
+    if(!obj) { PHPG_THROW_CONSTRUCT_EXCEPTION(GtkScaleButton); }
+    
+    if(iconlist) {
+        phpg_scale_button_set_icons_marshal(
+            GTK_SCALE_BUTTON(obj),
+            iconlist        
+        );
+    }
+
+    phpg_gobject_set_wrapper(
+        this_ptr,
+        G_OBJECT(obj) TSRMLS_CC
+    );
+}
+
+%%
+override gtk_scale_button_set_icons
+static void
+phpg_scale_button_set_icons_marshal(GtkScaleButton *button, zval *iconlist)
+{
+    gchar **list = NULL;
+    zval **iconname;
+    int listlen,iter;
+	
+    if(iconlist) {
+        listlen = zend_hash_num_elements(Z_ARRVAL_P(iconlist));
+    } else {
+        listlen = 0;
+    }
+
+    if(listlen &gt; 0) {
+        list = g_malloc0(sizeof(gchar **) * (listlen + 1));
+        iter = 0;
+
+        //. building null terminated gchar array for the constructor.
+        zend_hash_internal_pointer_reset(Z_ARRVAL_P(iconlist));
+        while(zend_hash_get_current_data(Z_ARRVAL_P(iconlist),(void **)&amp;iconname) == SUCCESS) {
+            if(Z_TYPE_PP(iconname) == IS_STRING) {
+                list[iter++] = g_strdup(Z_STRVAL_PP(iconname));
+            } else {
+                php_error_docref(NULL TSRMLS_CC,E_WARNING,"each item in icon array is to be a string");
+            }
+
+            zend_hash_move_forward(Z_ARRVAL_P(iconlist));
+        } list[iter] = NULL;
+
+    } else {
+        list = NULL;
+    }
+
+    gtk_scale_button_set_icons(
+        GTK_SCALE_BUTTON(button),
+        (const gchar **)list
+    );
+
+    if(list) {
+        g_strfreev(list);
+    }
+}
+
+PHP_METHOD
+{
+    zval *iconlist = NULL;
+
+    if(!php_gtk_parse_args(ZEND_NUM_ARGS(),"a",&amp;iconlist)) {
+        return;
+    }
+
+    phpg_scale_button_set_icons_marshal(
+        GTK_SCALE_BUTTON(PHPG_GOBJECT(this_ptr)),
+        iconlist
+    );
+}
+
+%% }}}
+



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071118013754</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-11-18 01:37:54-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] patch: GtkScaleButton::__construct</subject><body>

This patch has a couple of problems.

&gt; +%%
&gt; +headers
&gt; +static void phpg_scale_button_set_icons_marshal(GtkScaleButton *,  
&gt; zval *);
&gt;

Please don't use _marshal suffix for helper function like these. This  
suffix should be reserved only for callback marshallers.

&gt; +%%
&gt; +override gtk_scale_button_new
&gt; +PHP_METHOD
&gt; +{
&gt; +    gint iconsize;
&gt; +    gdouble min, max, step;
&gt; +    GtkWidget *obj;
&gt; +    zval *iconlist = NULL;
&gt; +
&gt; +    if(!php_gtk_parse_args(ZEND_NUM_ARGS(),"iddd| 
&gt; a",&amp;iconsize,&amp;min,&amp;max,&amp;step,&amp;iconlist)) {
&gt; +        return;
&gt; +    }
&gt; +
&gt; +    obj = gtk_scale_button_new(iconsize,min,max,step,NULL);
&gt;

While this works, it's not how the objects should be constructed. You  
need to use g_object_newv() along with phpg_gtype_from_zval() in  
order for the resulting object to have the correct gtype in case this  
code runs on a subclass of GtkScaleButton. See GtkButton constructor  
for example and also PyGTK implementation.

&gt; +
&gt; +    if(listlen &gt; 0) {
&gt; +        list = g_malloc0(sizeof(gchar **) * (listlen + 1));
&gt; +

This should be "sizeof(gchar*)".

&gt;    iter = 0;
&gt; +
&gt; +        //. building null terminated gchar array for the constructor.
&gt; +        zend_hash_internal_pointer_reset(Z_ARRVAL_P(iconlist));
&gt; +        while(zend_hash_get_current_data(Z_ARRVAL_P(iconlist), 
&gt; (void **)&amp;iconname) == SUCCESS) {
&gt; +            if(Z_TYPE_PP(iconname) == IS_STRING) {
&gt; +                list[iter++] = g_strdup(Z_STRVAL_PP(iconname));
&gt; +            } else {
&gt; +                php_error_docref(NULL TSRMLS_CC,E_WARNING,"each  
&gt; item in icon array is to be a string");
&gt; +            }
&gt; +
&gt; +            zend_hash_move_forward(Z_ARRVAL_P(iconlist));
&gt; +        } list[iter] = NULL;
&gt; +
&gt; +    } else {
&gt; +        list = NULL;
&gt; +    }
&gt; +
&gt; +    gtk_scale_button_set_icons(
&gt; +        GTK_SCALE_BUTTON(button),
&gt; +        (const gchar **)list
&gt; +    );
&gt; +
&gt; +    if(list) {
&gt; +        g_strfreev(list);
&gt; +    }

Do we need to duplicate the strings when adding them to the list? It  
looks like gtk_scale_button_set_icons() does its own duplication  
internally (since you free your strings with g_strfreev).

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071111203816</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-11-11 20:38:16-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: 5.3 Branch Patch</subject><body>

Can we have someone else confirm that it works fine for them?

-Andrei
http://10fathoms.org/vu - daily photoblog

On Nov 11, 2007, at 11:37 AM, Elizabeth Smith wrote:

&gt; Elizabeth Smith wrote:
&gt;&gt; I've been playing with the 5.3 PHP branch.  Are there any plans to  
&gt;&gt; do namespaces for Gtk?  It's really easy, you just add a colon(s)  
&gt;&gt; when you register the class name.
&gt;&gt; Anyway, attached is a patch which lets php-gtk2 build properly on  
&gt;&gt; the 5.2 and 5.3 branches, can some nix people give it a test?  I  
&gt;&gt; don't want to commit it until I'm sure it works.
&gt;&gt; Thanks,
&gt;&gt; Elizabeth Smith
&gt; Sooo.... I was under the impression that 5.3 IS getting/already has  
&gt; the GC stuff - but can I commit this patch?  Everything still  
&gt; appears to work fine, at least with my code, using 5.3 with php- 
&gt; gtk2 and the patch.  I'm assuming that the "use namespacing for gtk  
&gt; stuff" is a no at this point.
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071112194248</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-11-12 19:42:48-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: 5.3 Branch Patch</subject><body>

Andrei Zmievski wrote:
&gt; Can we have someone else confirm that it works fine for them?

Works for me (Mac OS X, which means it should be okay on Linux too).

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071112194418</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-11-12 19:44:18-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: 5.3 Branch Patch</subject><body>

Compiled fine here on Linux.

-- 
Bob Majdak Jr
KateOS Rofflecopter Pilot
http://www.kateos.org

Anant Narayanan wrote:
&gt; Andrei Zmievski wrote:
&gt;&gt; Can we have someone else confirm that it works fine for them?
&gt; 
&gt; Works for me (Mac OS X, which means it should be okay on Linux too).
&gt; 
&gt; --
&gt; Anant
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071105175642</emailId><senderName>Elizabeth Smith</senderName><senderEmail>auroraeosrose@gmail.com</senderEmail><timestampReceived>2007-11-05 17:56:42-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] patch: GtkRecentChoserDialog::__construct complete</subject><body>


On Nov 4, 2007, at 8:50 PM, Bob Majdak Jr wrote:

&gt; From gen_gtk.log:
&gt; constructor GtkRecentChooserDialog::__construct: varargs methods  
&gt; not supported
&gt;
&gt; This patch completes the GtkRecentChooserDialog::__construct().  
&gt; Works the same way GtkDialog::new_with_buttons() works except no  
&gt; flags parametre.

Hmmm, he's had several of these now that work - any objection to  
giving him some karma Andrei?  I'm tired of committing his stuff ;)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071017084848</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-10-17 08:48:48-0400</timestampReceived><subject>[PHP-GTK-DEV] patch: adding GtkRecentChooser::set_sort_func support.</subject><body>

This does that.

(add GtkRecentChooser::set_sort_func() to PHP-GTK)

Screenshot of it working (after patch is applied lol)
http://images.opsat.net/view/bob/screens/recentchooser-sort.png

Code demo (the app in the screenshot)
http://files.opsat.net/bob/php-gtk/recentchooser-sort-20071017a.tar.bz2

-- 
Bob Majdak Jr
KateOS Rofflecopter Pilot
http://www.kateos.org


["gtkrecentchooser-set_sort_type-bob01.diff" (text/x-patch)]

diff -ur php-gtk/ext/gtk+/gtk-2.10.overrides php-gtk2/ext/gtk+/gtk-2.10.overrides
--- php-gtk/ext/gtk+/gtk-2.10.overrides	2007-06-16 20:02:29.000000000 -0400
+++ php-gtk2/ext/gtk+/gtk-2.10.overrides	2007-10-17 03:00:09.000000000 -0400
@@ -280,3 +280,101 @@
     g_strfreev(apps);
 }
 %% }}}
+
+%% {{{ GtkRecentChooser
+
+%%
+add-arginfo GtkRecentChooser set_sort_func
+static
+ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
+    ZEND_ARG_INFO(0, callback)
+ZEND_END_ARG_INFO();
+
+%%
+override gtk_recent_chooser_set_sort_func
+
+static gint
+phpg_recent_chooser_sort_func_marshal(GtkRecentInfo *a, GtkRecentInfo *b, gpointer data)
+{
+    char *callback;
+    int argc = 0, status = 0;
+    zval ***argv = NULL, *retval = NULL; 
+    zval *zinfo_a = NULL, *zinfo_b = NULL;
+    phpg_cb_data_t *calldata = (phpg_cb_data_t *)data;
+    
+    TSRMLS_FETCH();
+
+    if (!zend_is_callable(calldata-&gt;callback, 0, &amp;callback)) {
+        php_error(
+            E_WARNING,
+            "Unable to invoke callback '%s' specified in %s on line %ld",
+            callback,
+            calldata-&gt;src_filename,
+            calldata-&gt;src_lineno
+        );
+        
+        efree(callback);
+        return 0;
+    }
+
+    phpg_gboxed_new(&amp;zinfo_a,GTK_TYPE_RECENT_INFO,a,TRUE,TRUE TSRMLS_CC);
+    phpg_gboxed_new(&amp;zinfo_b,GTK_TYPE_RECENT_INFO,b,TRUE,TRUE TSRMLS_CC);
+
+    argv = php_gtk_hash_as_array_offset(calldata-&gt;user_args,2,&amp;argc);
+    argv[0] = &amp;zinfo_a;
+    argv[1] = &amp;zinfo_b;
+
+    call_user_function_ex(
+        EG(function_table),
+        NULL,
+        calldata-&gt;callback,
+        &amp;retval,
+        argc,
+        argv,
+        0,
+        NULL TSRMLS_CC
+    );
+
+    zval_ptr_dtor(&amp;zinfo_a);
+    zval_ptr_dtor(&amp;zinfo_b);
+
+    if(retval) {
+        convert_to_long(retval);
+        status = Z_LVAL_P(retval);
+        zval_ptr_dtor(&amp;retval);
+    } else {
+        status = 0;
+    }
+
+    phpg_handle_marshaller_exception(TSRMLS_C);
+
+    efree(callback);
+    efree(argv);
+
+    return status;
+}
+
+PHP_METHOD
+{
+    zval *callback, *vararg;
+    phpg_cb_data_t *calldata;
+
+    NOT_STATIC_METHOD();
+
+    if(!php_gtk_parse_varargs(ZEND_NUM_ARGS(),1,&amp;vararg,"V",&amp;callback)) {
+        return;
+    }
+
+    zval_add_ref(&amp;callback);
+    calldata = phpg_cb_data_new(callback,vararg TSRMLS_CC);
+
+    gtk_recent_chooser_set_sort_func(
+        GTK_RECENT_CHOOSER(PHPG_GOBJECT(this_ptr)),
+        (GtkRecentSortFunc)phpg_recent_chooser_sort_func_marshal,
+        calldata,
+        phpg_cb_data_destroy
+    );
+}
+
+%% }}}
+



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071105180624</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-11-05 18:06:24-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] patch: GtkRecentChoserDialog::__construct complete</subject><body>

Bob Majdak Jr wrote:
&gt; This patch completes the GtkRecentChooserDialog::__construct(). Works
&gt; the same way GtkDialog::new_with_buttons() works except no flags parametre.

Could we have commit access for Bob, please?

Cheers,
--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071018140826</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-10-18 14:08:26-0400</timestampReceived><subject>[PHP-GTK-DEV] 5.3 Branch Patch</subject><body>

I've been playing with the 5.3 PHP branch.  Are there any plans to do 
namespaces for Gtk?  It's really easy, you just add a colon(s) when you 
register the class name.

Anyway, attached is a patch which lets php-gtk2 build properly on the 
5.2 and 5.3 branches, can some nix people give it a test?  I don't want 
to commit it until I'm sure it works.

Thanks,
Elizabeth Smith

["php-gtk.patch" (text/plain)]

Index: ext/gtk+/gdk.overrides
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/gdk.overrides,v
retrieving revision 1.77
diff -u -r1.77 gdk.overrides
--- ext/gtk+/gdk.overrides	14 Oct 2007 22:23:44 -0000	1.77
+++ ext/gtk+/gdk.overrides	18 Oct 2007 13:16:32 -0000
@@ -1127,8 +1127,8 @@
     }
 
     if (result) {
-        result-&gt;refcount = 0;
-        result-&gt;is_ref = 0;
+		Z_SET_REFCOUNT_P(result, 0);
+		Z_UNSET_ISREF_P(result);
     } else {
         result = zend_get_std_object_handlers()-&gt;read_property(object, member, type \
TSRMLS_CC);  }
Index: ext/gtk+/php_gtk+_types.c
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/php_gtk+_types.c,v
retrieving revision 1.51
diff -u -r1.51 php_gtk+_types.c
--- ext/gtk+/php_gtk+_types.c	16 Sep 2007 21:55:18 -0000	1.51
+++ ext/gtk+/php_gtk+_types.c	18 Oct 2007 13:21:19 -0000
@@ -187,8 +187,8 @@
 
 	MAKE_STD_ZVAL(result);
 	ZVAL_NULL(result);
-	result-&gt;refcount = 0;
-	result-&gt;is_ref = 0;
+    Z_SET_REFCOUNT_P(result, 0);
+	Z_UNSET_ISREF_P(result);
 
     switch (sh-&gt;type) {
         case STYLE_COLOR_ARRAY:
@@ -491,8 +491,8 @@
 
     MAKE_STD_ZVAL(result);
     ZVAL_NULL(result);
-    result-&gt;refcount = 0;
-    result-&gt;is_ref = 0;
+    Z_SET_REFCOUNT_P(result, 0);
+	Z_UNSET_ISREF_P(result);
 
     if (phpg_gboxed_check(offset, GTK_TYPE_TREE_ITER, TRUE TSRMLS_CC)) {
         phpg_modelrow_new(&amp;result, GTK_TREE_MODEL(PHPG_GOBJECT(object)), \
(GtkTreeIter *) @@ -914,8 +914,7 @@
 #endif
 
     iter_obj = (phpg_modelrowiter_t *) zend_object_store_get_object(object \
                TSRMLS_CC);
-
-    ZVAL_ADDREF(object);
+    Z_ADDREF_P(object);
 	iter_obj-&gt;ziter.data  = (void *) object;
 	iter_obj-&gt;ziter.funcs = &amp;treemodelrow_iter_funcs;
 
@@ -974,8 +973,8 @@
 
 	MAKE_STD_ZVAL(value);
 	ZVAL_NULL(value);
-	value-&gt;refcount = 0;
-	value-&gt;is_ref = 0;
+    Z_SET_REFCOUNT_P(value, 0);
+	Z_UNSET_ISREF_P(value);
 
     gtk_tree_model_get_value(row-&gt;model, &amp;row-&gt;iter, column, &amp;gvalue);
     phpg_gvalue_to_zval(&amp;gvalue, &amp;value, TRUE, TRUE TSRMLS_CC);
Index: main/php_gtk.h
===================================================================
RCS file: /repository/php-gtk/main/php_gtk.h,v
retrieving revision 1.150
diff -u -r1.150 php_gtk.h
--- main/php_gtk.h	22 Sep 2007 20:23:09 -0000	1.150
+++ main/php_gtk.h	18 Oct 2007 14:00:19 -0000
@@ -36,6 +36,24 @@
 #undef lookup
 #endif
 
+/* macro changes in 5.3 */
+#ifndef Z_ADDREF_P
+#define Z_ADDREF_P(x) (x)-&gt;refcount++
+#endif
+#ifndef Z_UNSET_ISREF_P
+#define Z_UNSET_ISREF_P(x) (x)-&gt;is_ref = 0
+#endif
+#ifndef Z_ADDREF_P
+#define Z_ADDREF_P(x) ZVAL_ADDREF(x)
+#endif
+#ifndef Z_SET_REFCOUNT_P
+#define Z_SET_REFCOUNT_P(x, y) (x)-&gt;refcount = (y)
+#endif
+#ifndef Z_REFCOUNT_P
+#define Z_REFCOUNT_P(x) (x)-&gt;refcount
+#endif
+
+
 #if HAVE_PHP_GTK
 
 #include "zend_objects_API.h"
Index: main/php_gtk_object.c
===================================================================
RCS file: /repository/php-gtk/main/php_gtk_object.c,v
retrieving revision 1.63
diff -u -r1.63 php_gtk_object.c
--- main/php_gtk_object.c	9 Feb 2006 08:46:21 -0000	1.63
+++ main/php_gtk_object.c	18 Oct 2007 13:25:39 -0000
@@ -60,7 +60,7 @@
 	if (found == SUCCESS) {
 		ALLOC_ZVAL(result_ptr);
 		*result_ptr = result;
-		result_ptr-&gt;refcount = 0;
+        Z_SET_REFCOUNT_P(result_ptr, 0);
 		//INIT_PZVAL(result_ptr);
 	}
 
Index: main/phpg_closure.c
===================================================================
RCS file: /repository/php-gtk/main/phpg_closure.c,v
retrieving revision 1.19
diff -u -r1.19 phpg_closure.c
--- main/phpg_closure.c	23 Sep 2007 01:39:28 -0000	1.19
+++ main/phpg_closure.c	18 Oct 2007 13:32:04 -0000
@@ -275,8 +275,7 @@
     for (k = 0; k &lt; i; k++) {
         item = *params[k];
         if (Z_TYPE_P(item) == IS_OBJECT &amp;&amp;
-            instanceof_function(Z_OBJCE_P(item), gboxed_ce TSRMLS_CC) &amp;&amp;
-            item-&gt;refcount &gt; 1) {
+            instanceof_function(Z_OBJCE_P(item), gboxed_ce TSRMLS_CC) &amp;&amp; \
Z_REFCOUNT_P(item) &gt; 1) {  boxed_item = phpg_gboxed_get(item TSRMLS_CC);
             if (!boxed_item-&gt;free_on_destroy) {
                 boxed_item-&gt;boxed = g_boxed_copy(boxed_item-&gt;gtype, \
                boxed_item-&gt;boxed);
Index: main/phpg_gobject.c
===================================================================
RCS file: /repository/php-gtk/main/phpg_gobject.c,v
retrieving revision 1.65
diff -u -r1.65 phpg_gobject.c
--- main/phpg_gobject.c	23 Sep 2007 01:39:28 -0000	1.65
+++ main/phpg_gobject.c	18 Oct 2007 13:29:12 -0000
@@ -124,7 +124,7 @@
     struct _store_object *stored = \
&amp;EG(objects_store).object_buckets[handle].bucket.obj;  phpg_gobject_t *pobj = \
(phpg_gobject_t *) stored-&gt;object;  
-    if (EG(objects_store).object_buckets[handle].valid &amp;&amp; stored-&gt;refcount == 1) {
+    if (EG(objects_store).object_buckets[handle].valid &amp;&amp; Z_REFCOUNT_P(stored) == 1) \
{	  if (pobj-&gt;obj &amp;&amp; pobj-&gt;obj-&gt;ref_count &gt; 1) {
             pobj-&gt;is_owned = TRUE;
             g_object_set_qdata_full(pobj-&gt;obj, gobject_wrapper_owned_key, (void \
                *)handle, phpg_unref_by_handle);
Index: main/phpg_support.c
===================================================================
RCS file: /repository/php-gtk/main/phpg_support.c,v
retrieving revision 1.18
diff -u -r1.18 phpg_support.c
--- main/phpg_support.c	16 Sep 2007 21:55:18 -0000	1.18
+++ main/phpg_support.c	18 Oct 2007 13:29:49 -0000
@@ -57,8 +57,8 @@
 			ALLOC_ZVAL(result_ptr);
 			*result_ptr = result;
             //INIT_PZVAL(result_ptr);
-            result_ptr-&gt;refcount = 0;
-            result_ptr-&gt;is_ref = 0;
+			Z_SET_REFCOUNT_P(result_ptr, 0);
+			Z_UNSET_ISREF_P(result_ptr);
         } else {
             result_ptr = EG(uninitialized_zval_ptr);
         }



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071018170442</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-10-18 17:04:42-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] 5.3 Branch Patch</subject><body>

I really hope garbage collection stuff doesn't get merged into 5.3. It's 
going to play havoc with some of the custom refcounting I've been doing..

-Andrei

Elizabeth Smith wrote:
&gt; I've been playing with the 5.3 PHP branch.  Are there any plans to do 
&gt; namespaces for Gtk?  It's really easy, you just add a colon(s) when you 
&gt; register the class name.
&gt; 
&gt; Anyway, attached is a patch which lets php-gtk2 build properly on the 
&gt; 5.2 and 5.3 branches, can some nix people give it a test?  I don't want 
&gt; to commit it until I'm sure it works.
&gt; 
&gt; Thanks,
&gt; Elizabeth Smith
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071018184857</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-10-18 18:48:57-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] 5.3 Branch Patch</subject><body>

&gt;I really hope garbage collection stuff doesn't get merged into 5.3. It's 
&gt;going to play havoc with some of the custom refcounting I've been doing..

Andrei, pretty much everybody thinks that patch is 'mostly harmless' :\ Did 
you mention this potential havoc to anyone in passing?

- Steph

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071018185541</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-10-18 18:55:41-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] 5.3 Branch Patch</subject><body>

No. Not that they would care about PHP-GTK..

Steph Fox wrote:
&gt;&gt; I really hope garbage collection stuff doesn't get merged into 5.3. 
&gt;&gt; It's going to play havoc with some of the custom refcounting I've been 
&gt;&gt; doing..
&gt; 
&gt; Andrei, pretty much everybody thinks that patch is 'mostly harmless' :\ 
&gt; Did you mention this potential havoc to anyone in passing?
&gt; 
&gt; - Steph
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071105202806</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-11-05 20:28:06-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] patch: GtkRecentChoserDialog::__construct complete</subject><body>

Bob should apply for a CVS account first.

A couple of things about the patch:

Let's start using php_error_docref() instead of php_error() since we 
automatically get class/method name that way.

php_error(
+                E_WARNING,
+                "%s::%s(): button list has to contain pairs of items",
+                get_active_class_name(NULL TSRMLS_CC),
+                get_active_function_name(TSRMLS_C)
+            );

turns into

php_error_docref(NULL TSRMLS_CC, E_WARNING, "button list has to contain 
pairs of items"));

Also, the creation of the wrapped object should be delayed until all the 
other checks are done. That way we avoid gtk_object_destroy() and all 
that stuff.

-Andrei

Bob Majdak Jr wrote:
&gt;  From gen_gtk.log:
&gt; constructor GtkRecentChooserDialog::__construct: varargs methods not 
&gt; supported
&gt; 
&gt; This patch completes the GtkRecentChooserDialog::__construct(). Works 
&gt; the same way GtkDialog::new_with_buttons() works except no flags parametre.
&gt; 
&gt; screenshot of it: http://www.opsat.net/temp/rcdcon.jpg
&gt; 
&gt; gtk_recent_chooser_dialog_new(
&gt;     const gchar *title,
&gt;     GtkWindow *parent,
&gt;     const gchar *first_button_text,
&gt;     ...
&gt; );
&gt; 
&gt; GtkRecentChooserDialog::__construct(
&gt;     string title,
&gt;     GtkWindow parent,
&gt;     array(string label, int response, ...)
&gt; );
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071105205314</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-11-05 20:53:14-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] patch: GtkRecentChoserDialog::__construct complete</subject><body>

 &gt; Bob should apply for a CVS account first.

Applied.

 &gt; A couple of things about the patch:

O.K. It was mostly copy paste from GtkDialog::add_with_buttons(). Should I fix 
that one as well?

--
Bob Majdak Jr
KateOS Rofflecopter Pilot
http://www.kateos.org



Andrei Zmievski wrote:
&gt; Bob should apply for a CVS account first.
&gt; 
&gt; A couple of things about the patch:
&gt; 
&gt; Let's start using php_error_docref() instead of php_error() since we 
&gt; automatically get class/method name that way.
&gt; 
&gt; php_error(
&gt; +                E_WARNING,
&gt; +                "%s::%s(): button list has to contain pairs of items",
&gt; +                get_active_class_name(NULL TSRMLS_CC),
&gt; +                get_active_function_name(TSRMLS_C)
&gt; +            );
&gt; 
&gt; turns into
&gt; 
&gt; php_error_docref(NULL TSRMLS_CC, E_WARNING, "button list has to contain 
&gt; pairs of items"));
&gt; 
&gt; Also, the creation of the wrapped object should be delayed until all the 
&gt; other checks are done. That way we avoid gtk_object_destroy() and all 
&gt; that stuff.
&gt; 
&gt; -Andrei
&gt; 
&gt; Bob Majdak Jr wrote:
&gt;&gt;  From gen_gtk.log:
&gt;&gt; constructor GtkRecentChooserDialog::__construct: varargs methods not 
&gt;&gt; supported
&gt;&gt;
&gt;&gt; This patch completes the GtkRecentChooserDialog::__construct(). Works 
&gt;&gt; the same way GtkDialog::new_with_buttons() works except no flags 
&gt;&gt; parametre.
&gt;&gt;
&gt;&gt; screenshot of it: http://www.opsat.net/temp/rcdcon.jpg
&gt;&gt;
&gt;&gt; gtk_recent_chooser_dialog_new(
&gt;&gt;     const gchar *title,
&gt;&gt;     GtkWindow *parent,
&gt;&gt;     const gchar *first_button_text,
&gt;&gt;     ...
&gt;&gt; );
&gt;&gt;
&gt;&gt; GtkRecentChooserDialog::__construct(
&gt;&gt;     string title,
&gt;&gt;     GtkWindow parent,
&gt;&gt;     array(string label, int response, ...)
&gt;&gt; );
&gt;&gt;
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071017103748</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-10-17 10:37:48-0400</timestampReceived><subject>[PHP-GTK-DEV] patch: adding GtkAssistant::set_forward_page_func support.</subject><body>

This also does that. But not that, that was for that. This is for this.

I bet Elizabeth wants to commit this one herself. CVS Update because Anant 
already applied the first patch I sent a bit ago. I got a bit bored with the 
OpenAL stuff I was working on because I am still at a disagreement about the 
API. This is my apology (the patch) to Elizabeth for trying to debate the OpenAL 
interface without having slept the night before. (but I still vote the same way!) :p

Screenshot of it working (not really much to see really).
http://images.opsat.net/view/bob/screens/assistant-pagefunc.png

Code demo of the application in the screenshot.
http://files.opsat.net/bob/php-gtk/assistant-pagefunc-20071017a.tar.bz2

P.S. Do not think I was good enough to not at least /consider/ abbreviating 
every "Assistant" to "Ass". I had many chuckles while thinking about doing it.

-- 
Bob Majdak Jr
KateOS Rofflecopter Pilot
http://www.kateos.org


["gtkassistant-set_forward_page_func-bob01.diff" (text/x-patch)]

diff -ur php-gtk/ext/gtk+/gtk-2.10.overrides php-gtk2/ext/gtk+/gtk-2.10.overrides
--- php-gtk/ext/gtk+/gtk-2.10.overrides	2007-10-17 05:53:24.000000000 -0400
+++ php-gtk2/ext/gtk+/gtk-2.10.overrides	2007-10-17 05:54:20.000000000 -0400
@@ -378,3 +378,93 @@
 
 %% }}}
 
+%% {{{ GtkAssistant
+
+%%
+add-arginfo GtkAssistant set_forward_page_func
+static
+ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
+    ZEND_ARG_INFO(0, callback)
+ZEND_END_ARG_INFO();
+
+%%
+override gtk_assistant_set_forward_page_func
+
+static gint
+phpg_assistant_forward_page_func_marshal(gint cur, gpointer data)
+{
+    char *callback;
+    int argc = 0, status = 0;
+    zval ***argv = NULL, *retval = NULL;
+    zval *zcur;
+    phpg_cb_data_t *calldata = (phpg_cb_data_t *)data;
+    
+    TSRMLS_FETCH();
+
+    if (!zend_is_callable(calldata-&gt;callback, 0, &amp;callback)) {
+        php_error(
+            E_WARNING,
+            "Unable to invoke callback '%s' specified in %s on line %ld",
+            callback,
+            calldata-&gt;src_filename,
+            calldata-&gt;src_lineno
+        );
+        
+        efree(callback);
+        return 0;
+    }
+
+    MAKE_STD_ZVAL(zcur);
+    ZVAL_LONG(zcur,cur);
+
+    argv = php_gtk_hash_as_array_offset(calldata-&gt;user_args,1,&amp;argc);
+    argv[0] = 
+
+    call_user_function_ex(
+        EG(function_table),
+        NULL,
+        calldata-&gt;callback,
+        &amp;retval,
+        argc,
+        argv,
+        0,
+        NULL TSRMLS_CC
+    );
+
+    convert_to_long(retval);
+    status = Z_LVAL_P(retval);
+    zval_ptr_dtor(&amp;retval);
+
+    phpg_handle_marshaller_exception(TSRMLS_C);
+
+    efree(callback);
+    efree(argv);
+
+    return status;
+}
+
+PHP_METHOD
+{
+    zval *callback, *vararg;
+    phpg_cb_data_t *calldata;
+
+    NOT_STATIC_METHOD();
+
+    if(!php_gtk_parse_varargs(ZEND_NUM_ARGS(),1,&amp;vararg,"V",&amp;callback)) {
+        return;
+    }
+
+    zval_add_ref(&amp;callback);
+    calldata = phpg_cb_data_new(callback,vararg TSRMLS_CC);
+
+    gtk_assistant_set_forward_page_func(
+        GTK_ASSISTANT(PHPG_GOBJECT(this_ptr)),
+        (GtkAssistantPageFunc)phpg_assistant_forward_page_func_marshal,
+        calldata,
+        phpg_cb_data_destroy
+    );
+}
+
+%% }}}
+
+



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071022142815</emailId><senderName>       Fernando_Correa_da_Conceição</senderName><senderEmail></senderEmail><timestampReceived>2007-10-22 14:28:15-0400</timestampReceived><subject>[PHP-GTK-DEV] Propose a change for build system.</subject><body>

Please, can we make a change for the build system o linux? What I want 
is, when you require a extension and you do not have the files 
needed(includes and libraries) the configure script stop.

Example:

./configure --with-extra

If I do not have what is necessary to build the GtkExtra  the configure 
must stop with an error, because now it continues and I only know that I 
do not have the gtkextra when I run a script that uses it, which is very 
bad!
If i try to build with extra and get a message that tell it is not 
available(and the configure stop at this point), i can choose to install 
the required package or remove it from the configure line and try again. 
And for the extensions that are enabled by default, a warning at the end 
of configure, in the same case.

Fernando Correa da Conceição.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071022164651</emailId><senderName>Elizabeth Smith</senderName><senderEmail>auroraeosrose@gmail.com</senderEmail><timestampReceived>2007-10-22 16:46:51-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Propose a change for build system.</subject><body>

Fernando Correa da Conceição wrote:
&gt; Please, can we make a change for the build system o linux? What I want 
&gt; is, when you require a extension and you do not have the files 
&gt; needed(includes and libraries) the configure script stop.
&gt;
&gt; Example:
&gt;
&gt; ./configure --with-extra
&gt;
&gt; If I do not have what is necessary to build the GtkExtra  the 
&gt; configure must stop with an error, because now it continues and I only 
&gt; know that I do not have the gtkextra when I run a script that uses it, 
&gt; which is very bad!
&gt; If i try to build with extra and get a message that tell it is not 
&gt; available(and the configure stop at this point), i can choose to 
&gt; install the required package or remove it from the configure line and 
&gt; try again. And for the extensions that are enabled by default, a 
&gt; warning at the end of configure, in the same case.
&gt;
&gt; Fernando Correa da Conceição.
&gt;
That seems incredibly counter intuitive - I know on the windows end 
it'll just give you a warning that "libraries and headers were not 
found" but you can still keep building.  If nix configure doesn't throw 
any kind of a warning then yes, it probably should at least inform you 
that you're nuts, but halting all together might drive people crazy.

Elizabeth M Smith

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071022171355</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-10-22 17:13:55-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Propose a change for build system.</subject><body>


Bob Majdak Jr
KateOS Rofflecopter Pilot
http://www.kateos.org

Summary box would be good. I would be willing to try at it if you do not have 
time Anant.

- bob

Anant Narayanan wrote:
&gt;&gt; That seems incredibly counter intuitive - I know on the windows end
&gt;&gt; it'll just give you a warning that "libraries and headers were not
&gt;&gt; found" but you can still keep building.  If nix configure doesn't throw
&gt;&gt; any kind of a warning then yes, it probably should at least inform you
&gt;&gt; that you're nuts, but halting all together might drive people crazy.
&gt; 
&gt; [theghost php-gtk]$ ./configure --with-extra
&gt; &lt;snip&gt;
&gt; checking for gtkextra support... yes
&gt; checking for gtkextra-2.0 &gt;= 2.1.1... Unable to locate gtkextra version
&gt; 2.1.1 or higher: not building
&gt; &lt;/snip&gt;
&gt; 
&gt; Although, I will agree that it's a bit strenuous for the eye to scroll
&gt; back and check which extensions haven't been built.
&gt; 
&gt; Perhaps, we could add a small "summary box" at the end of configure that
&gt; says which extensions will be built - I've come across quite a few
&gt; projects that follow this practice.
&gt; 
&gt; --
&gt; Anant
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071022172244</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-10-22 17:22:44-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Propose a change for build system.</subject><body>

&gt; That seems incredibly counter intuitive - I know on the windows end
&gt; it'll just give you a warning that "libraries and headers were not
&gt; found" but you can still keep building.  If nix configure doesn't throw
&gt; any kind of a warning then yes, it probably should at least inform you
&gt; that you're nuts, but halting all together might drive people crazy.

[theghost php-gtk]$ ./configure --with-extra
&lt;snip&gt;
checking for gtkextra support... yes
checking for gtkextra-2.0 &gt;= 2.1.1... Unable to locate gtkextra version
2.1.1 or higher: not building
&lt;/snip&gt;

Although, I will agree that it's a bit strenuous for the eye to scroll
back and check which extensions haven't been built.

Perhaps, we could add a small "summary box" at the end of configure that
says which extensions will be built - I've come across quite a few
projects that follow this practice.

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071105214322</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-11-05 21:43:22-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] patch: GtkRecentChoserDialog::__construct complete</subject><body>

Bob Majdak Jr wrote:
&gt; O.K. It was mostly copy paste from GtkDialog::add_with_buttons(). Should
&gt; I fix that one as well?

php_error is used extensively throughout the code (counting the
extensions), we might want to start replacing all of the instances where
the class name is required with php_error_docref.

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071105215100</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-11-05 21:51:00-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] patch: GtkRecentChoserDialog::__construct complete</subject><body>

Thoughts? Should invalid date be fatal too? Should the inability to count be 
non-fatal?

+ updated patch.

-------------------
//. good
$w = new GtkRecentChooserDialog(
	'The Dialog, LOL', null,
	array(
		Gtk::STOCK_CANCEL,Gtk::RESPONSE_CANCEL,
		Gtk::STOCK_OK,Gtk::RESPONSE_OK
	)
);
-------------------
// fatal because you fail at counting.
$w = new GtkRecentChooserDialog(
	'The Dialog, LOL', null,
	array(
		Gtk::STOCK_CANCEL,Gtk::RESPONSE_CANCEL,
		Gtk::STOCK_OK
	)
);

Fatal error: GtkRecentChooserDialog::__construct(): button list has to contain 
pairs of items in recentchooserdialog-construct.phpg on line 10
-------------------
// warning because you fail at listening and to get even
// the ok button shall be skipped. hah on you!
$w = new GtkRecentChooserDialog(
	'The Dialog, LOL', null,
	array(
		Gtk::STOCK_CANCEL,Gtk::RESPONSE_CANCEL,
		Gtk::STOCK_OK,'omgomgomg'
	)
);

Warning: GtkRecentChooserDialog::__construct(): each pair in button list is to 
be string/integer in recentchooserdialog-construct.phpg on line 10
-------------------

--
Bob Majdak Jr
KateOS Rofflecopter Pilot
http://www.kateos.org



Anant Narayanan wrote:
&gt; Bob Majdak Jr wrote:
&gt;&gt; O.K. It was mostly copy paste from GtkDialog::add_with_buttons(). Should
&gt;&gt; I fix that one as well?
&gt; 
&gt; php_error is used extensively throughout the code (counting the
&gt; extensions), we might want to start replacing all of the instances where
&gt; the class name is required with php_error_docref.
&gt; 
&gt; --
&gt; Anant
&gt; 

["gtkrecentchooser-construct-bob20070511a.diff" (text/x-patch)]

diff -ur cvs/ext/gtk+/gtk-2.10.overrides cvsbob/ext/gtk+/gtk-2.10.overrides
--- cvs/ext/gtk+/gtk-2.10.overrides	2007-10-18 10:20:23.000000000 -0400
+++ cvsbob/ext/gtk+/gtk-2.10.overrides	2007-11-05 16:38:15.000000000 -0500
@@ -378,6 +378,80 @@
 
 %% }}}
 
+%% {{{ GtkRecentChooserDialog
+
+%%
+add-arginfo GtkRecentChooserDialog __construct
+static
+ZEND_BEGIN_ARG_INFO_EX(ARGINFO_NAME, 0, 0, 0)
+    ZEND_ARG_INFO(0, title)
+    ZEND_ARG_OBJ_INFO(0, parent, GtkWindow, 1)
+    ZEND_ARG_INFO(0, buttons)
+ZEND_END_ARG_INFO();
+
+%%
+override gtk_recent_chooser_dialog_new
+PHP_METHOD
+{
+    char *title = NULL;
+    zend_bool free_title;
+    GtkWindow *parent = NULL;
+    zval *php_parent = NULL;
+    zval *buttons = NULL;
+    GObject *wrapped_obj;
+    zval **text, **response;
+
+    if(!php_gtk_parse_args(ZEND_NUM_ARGS(),"|uNa",&amp;title,&amp;free_title,&amp;php_parent,gtkwindow_ce,&amp;buttons)) \
{ +        return;
+    }
+    
+    if(php_parent) {
+        if(Z_TYPE_P(php_parent) == IS_NULL) {
+            parent = NULL;
+        } else {
+            parent = GTK_WINDOW(PHPG_GOBJECT(php_parent));
+        }
+    }
+
+    if(buttons) {
+        if(zend_hash_num_elements(Z_ARRVAL_P(buttons)) % 2) {
+            // not being able to count is fatal.
+            php_error_docref(NULL TSRMLS_CC,E_ERROR,"button list has to contain \
pairs of items"); +        }
+    }
+
+    wrapped_obj = (GObject *)g_object_new(phpg_gtype_from_zval(this_ptr), NULL);
+    if(!wrapped_obj) { PHPG_THROW_CONSTRUCT_EXCEPTION(GtkRecentChooserDialog); }    
+
+    if(buttons) {
+        zend_hash_internal_pointer_reset(Z_ARRVAL_P(buttons));
+        while(zend_hash_get_current_data(Z_ARRVAL_P(buttons),(void **)&amp;text) == \
SUCCESS) { +            zend_hash_move_forward(Z_ARRVAL_P(buttons));
+            zend_hash_get_current_data(Z_ARRVAL_P(buttons),(void **)&amp;response);
+            zend_hash_move_forward(Z_ARRVAL_P(buttons));
+            
+            // invalid data types cause it to skip the current pair.
+            if(Z_TYPE_PP(text) != IS_STRING || Z_TYPE_PP(response) != IS_LONG) {
+                php_error_docref(NULL TSRMLS_CC,E_WARNING,"each pair in button list \
is to be string/integer"); +            } else {
+	            gtk_dialog_add_button(
+	                GTK_DIALOG(wrapped_obj),
+	                Z_STRVAL_PP(text),
+	                Z_LVAL_PP(response)
+	            );
+            }
+        }
+    }
+    
+    if(title) { gtk_window_set_title(GTK_WINDOW(wrapped_obj), title); }
+    if(free_title) { g_free(title); }
+    if(parent) { gtk_window_set_transient_for(GTK_WINDOW(wrapped_obj), parent); }
+    
+    phpg_gobject_set_wrapper(this_ptr, wrapped_obj TSRMLS_CC);
+}
+
+%% }}}
+
 %% {{{ GtkAssistant
 
 %%
Only in cvs/ext/scintilla: gen_scintilla.c
Only in cvs/ext/scintilla: gen_scintilla.h



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071106020042</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-11-06 02:00:42-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] patch: GtkRecentChoserDialog::__construct complete</subject><body>

In cases like these I like to see what PyGTK does. So, look up the 
source code for it and see what's there.

-Andrei

Bob Majdak Jr wrote:
&gt; Thoughts? Should invalid date be fatal too? Should the inability to 
&gt; count be non-fatal?
&gt; 
&gt; + updated patch.
&gt; 
&gt; -------------------
&gt; //. good
&gt; $w = new GtkRecentChooserDialog(
&gt;     'The Dialog, LOL', null,
&gt;     array(
&gt;         Gtk::STOCK_CANCEL,Gtk::RESPONSE_CANCEL,
&gt;         Gtk::STOCK_OK,Gtk::RESPONSE_OK
&gt;     )
&gt; );
&gt; -------------------
&gt; // fatal because you fail at counting.
&gt; $w = new GtkRecentChooserDialog(
&gt;     'The Dialog, LOL', null,
&gt;     array(
&gt;         Gtk::STOCK_CANCEL,Gtk::RESPONSE_CANCEL,
&gt;         Gtk::STOCK_OK
&gt;     )
&gt; );
&gt; 
&gt; Fatal error: GtkRecentChooserDialog::__construct(): button list has to 
&gt; contain pairs of items in recentchooserdialog-construct.phpg on line 10
&gt; -------------------
&gt; // warning because you fail at listening and to get even
&gt; // the ok button shall be skipped. hah on you!
&gt; $w = new GtkRecentChooserDialog(
&gt;     'The Dialog, LOL', null,
&gt;     array(
&gt;         Gtk::STOCK_CANCEL,Gtk::RESPONSE_CANCEL,
&gt;         Gtk::STOCK_OK,'omgomgomg'
&gt;     )
&gt; );
&gt; 
&gt; Warning: GtkRecentChooserDialog::__construct(): each pair in button list 
&gt; is to be string/integer in recentchooserdialog-construct.phpg on line 10
&gt; -------------------
&gt; 
&gt; -- 
&gt; Bob Majdak Jr
&gt; KateOS Rofflecopter Pilot
&gt; http://www.kateos.org
&gt; 
&gt; 
&gt; 
&gt; Anant Narayanan wrote:
&gt;&gt; Bob Majdak Jr wrote:
&gt;&gt;&gt; O.K. It was mostly copy paste from GtkDialog::add_with_buttons(). Should
&gt;&gt;&gt; I fix that one as well?
&gt;&gt;
&gt;&gt; php_error is used extensively throughout the code (counting the
&gt;&gt; extensions), we might want to start replacing all of the instances where
&gt;&gt; the class name is required with php_error_docref.
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; Anant
&gt;&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071015125310</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-10-15 12:53:10-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: patch for the generator</subject><body>

Bob Majdak Jr wrote:
&gt; Top of the morning to you all.
&gt; 
&gt; This is hardly anything (other than like, you know, a Fix). Right now 
&gt; GtkMenuBar::set_pack_direction() fails 'Expected instance of 
&gt; GtkPackDirection' because it was not generated right. This patches the 
&gt; generator and now it works.
&gt; 
&gt; One whole line woo but after I spent 20 minutes comparing the 
&gt; set_pack_direction to the set_shadow_types and wondering why one works 
&gt; and one doesn't I thought 'eh i am thirsty' and then remembered 'duh oh 
&gt; yeah the generator'.
&gt; 
&gt; I am going to get something to drink now.
&gt; 
&gt; P.S. Thunderbird says 'wooo' is spelled wrong, but 'woo' is spelled 
&gt; right. In all actuality I was more like 'wooooooooooooooooooooo' but 
&gt; Thunderbird says that is spelled incorrectly as well.
&gt; 
Thanks, applied, you have WAAY too much time on your hands

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071017091904</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-10-17 09:19:04-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] patch: adding GtkRecentChooser::set_sort_func support.</subject><body>

&gt; (add GtkRecentChooser::set_sort_func() to PHP-GTK)

Thanks Bob, committed.

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071018185554</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-10-18 18:55:54-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] 5.3 Branch Patch</subject><body>

And please don't mention it to them.. I'll figure out how to deal with it.

Steph Fox wrote:
&gt;&gt; I really hope garbage collection stuff doesn't get merged into 5.3. 
&gt;&gt; It's going to play havoc with some of the custom refcounting I've been 
&gt;&gt; doing..
&gt; 
&gt; Andrei, pretty much everybody thinks that patch is 'mostly harmless' :\ 
&gt; Did you mention this potential havoc to anyone in passing?
&gt; 
&gt; - Steph
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071021003802</emailId><senderName>Bob Majdak Jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-10-21 00:38:02-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] patch: adding GtkAssistant::set_forward_page_func</subject><body>

All I got from the mailing list today was:
	Here is an email saying I cannot email your email address.

Untill:
	Elizabeth: ... cause your patch no checky for null
	Bob: i was napping before this.

I hope convert_* takes into account if they return a string. Wouldn't have 
thought it could not handle null as well... .

`grep`d the source and it looks like if(retval) was the perferred way.

- bob

Bob Majdak Jr wrote:
&gt; This also does that. But not that, that was for that. This is for this.
&gt; 
&gt; I bet Elizabeth wants to commit this one herself. CVS Update because 
&gt; Anant already applied the first patch I sent a bit ago. I got a bit 
&gt; bored with the OpenAL stuff I was working on because I am still at a 
&gt; disagreement about the API. This is my apology (the patch) to Elizabeth 
&gt; for trying to debate the OpenAL interface without having slept the night 
&gt; before. (but I still vote the same way!) :p
&gt; 
&gt; Screenshot of it working (not really much to see really).
&gt; http://images.opsat.net/view/bob/screens/assistant-pagefunc.png
&gt; 
&gt; Code demo of the application in the screenshot.
&gt; http://files.opsat.net/bob/php-gtk/assistant-pagefunc-20071017a.tar.bz2
&gt; 
&gt; P.S. Do not think I was good enough to not at least /consider/ 
&gt; abbreviating every "Assistant" to "Ass". I had many chuckles while 
&gt; thinking about doing it.
&gt; 

["gtkassistant-set_forward_page_func-bob20071020a.diff" (text/x-patch)]

diff -ur php-gtk/ext/gtk+/gtk-2.10.overrides php-gtk2/ext/gtk+/gtk-2.10.overrides
--- php-gtk/ext/gtk+/gtk-2.10.overrides	2007-10-18 10:20:23.000000000 -0400
+++ php-gtk2/ext/gtk+/gtk-2.10.overrides	2007-10-20 20:21:41.000000000 -0400
@@ -431,9 +431,13 @@
         NULL TSRMLS_CC
     );
 
-    convert_to_long(retval);
-    status = Z_LVAL_P(retval);
-    zval_ptr_dtor(&amp;retval);
+    if(retval) {
+       convert_to_long(retval);
+       status = Z_LVAL_P(retval);
+       zval_ptr_dtor(&amp;retval);
+    } else {
+       status = 0;
+    }
 
     phpg_handle_marshaller_exception(TSRMLS_C);
 



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071022031459</emailId><senderName>"a at a dot com"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-10-22 03:14:59-0400</timestampReceived><subject>[PHP-GTK-DEV] #43065 [NEW]: asd</subject><body>

From:             a at a dot com
Operating system: ads
PHP version:      5.3CVS-2007-10-22 (CVS)
PHP Bug Type:     PHP-GTK related
Bug description:  asd

Description:
------------
asdasd

Reproduce code:
---------------
asdasd

Expected result:
----------------
asdsa

Actual result:
--------------
zcxxz

-- 
Edit bug report at http://bugs.php.net/?id=43065&amp;edit=1
-- 
Try a CVS snapshot (PHP 4.4): http://bugs.php.net/fix.php?id=43065&amp;r=trysnapshot44
Try a CVS snapshot (PHP 5.2): http://bugs.php.net/fix.php?id=43065&amp;r=trysnapshot52
Try a CVS snapshot (PHP 5.3): http://bugs.php.net/fix.php?id=43065&amp;r=trysnapshot53
Try a CVS snapshot (PHP 6.0): http://bugs.php.net/fix.php?id=43065&amp;r=trysnapshot60
Fixed in CVS:                 http://bugs.php.net/fix.php?id=43065&amp;r=fixedcvs
Fixed in release:             http://bugs.php.net/fix.php?id=43065&amp;r=alreadyfixed
Need backtrace:               http://bugs.php.net/fix.php?id=43065&amp;r=needtrace
Need Reproduce Script:        http://bugs.php.net/fix.php?id=43065&amp;r=needscript
Try newer version:            http://bugs.php.net/fix.php?id=43065&amp;r=oldversion
Not developer issue:          http://bugs.php.net/fix.php?id=43065&amp;r=support
Expected behavior:            http://bugs.php.net/fix.php?id=43065&amp;r=notwrong
Not enough info:              http://bugs.php.net/fix.php?id=43065&amp;r=notenoughinfo
Submitted twice:              http://bugs.php.net/fix.php?id=43065&amp;r=submittedtwice
register_globals:             http://bugs.php.net/fix.php?id=43065&amp;r=globals
PHP 3 support discontinued:   http://bugs.php.net/fix.php?id=43065&amp;r=php3
Daylight Savings:             http://bugs.php.net/fix.php?id=43065&amp;r=dst
IIS Stability:                http://bugs.php.net/fix.php?id=43065&amp;r=isapi
Install GNU Sed:              http://bugs.php.net/fix.php?id=43065&amp;r=gnused
Floating point limitations:   http://bugs.php.net/fix.php?id=43065&amp;r=float
No Zend Extensions:           http://bugs.php.net/fix.php?id=43065&amp;r=nozend
MySQL Configuration Error:    http://bugs.php.net/fix.php?id=43065&amp;r=mysqlcfg

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071022080727</emailId><senderName></senderName><senderEmail>jani</senderEmail><timestampReceived>2007-10-22 08:07:27-0400</timestampReceived><subject>[PHP-GTK-DEV] #43065 [Opn-&gt;Bgs]: asd</subject><body>

 ID:               43065
 Updated by:       jani@php.net
 Reported By:      a at a dot com
-Status:           Open
+Status:           Bogus
 Bug Type:         PHP-GTK related
 Operating System: ads
 PHP Version:      5.3CVS-2007-10-22 (CVS)
 New Comment:

asd


Previous Comments:
------------------------------------------------------------------------

[2007-10-22 03:14:59] a at a dot com

Description:
------------
asdasd

Reproduce code:
---------------
asdasd

Expected result:
----------------
asdsa

Actual result:
--------------
zcxxz


------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=43065&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20071023001806</emailId><senderName>       Fernando Correa da Conceição</senderName><senderEmail></senderEmail><timestampReceived>2007-10-23 00:18:06-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Propose a change for build system.</subject><body>

Anant Narayanan escreveu:
&gt;&gt; That seems incredibly counter intuitive - I know on the windows end
&gt;&gt; it'll just give you a warning that "libraries and headers were not
&gt;&gt; found" but you can still keep building.  If nix configure doesn't throw
&gt;&gt; any kind of a warning then yes, it probably should at least inform you
&gt;&gt; that you're nuts, but halting all together might drive people crazy.
&gt;&gt;     
&gt;
&gt; [theghost php-gtk]$ ./configure --with-extra
&gt; &lt;snip&gt;
&gt; checking for gtkextra support... yes
&gt; checking for gtkextra-2.0 &gt;= 2.1.1... Unable to locate gtkextra version
&gt; 2.1.1 or higher: not building
&gt; &lt;/snip&gt;
&gt;
&gt; Although, I will agree that it's a bit strenuous for the eye to scroll
&gt; back and check which extensions haven't been built.
&gt;
&gt; Perhaps, we could add a small "summary box" at the end of configure that
&gt; says which extensions will be built - I've come across quite a few
&gt; projects that follow this practice.
&gt;
&gt; --
&gt; Anant
&gt;
&gt;   
Yes.
The default for linux is halt the configure, for example, if you do:

./configure --with-mysql

On the php source, and do not have the headers for libmysql, the 
configure stop at that point. But a sumarry box to tell what is build 
and what is missing is good for me, at last you know what is there and 
what is missing before you try to use it in a script:


Fernando.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070903153602</emailId><senderName>"Chad Furman"</senderName><senderEmail>cybarc@gmail.com</senderEmail><timestampReceived>2007-09-03 15:36:02-0400</timestampReceived><subject>[PHP-GTK-DEV] CVS 3/9/07 Make Error 1</subject><body>


ext/gtk+/gen_gtk.c:44: error: syntax error before '*' token
make: *** [ext/gtk+/gen_gtk.lo] Error 1

Slackware 10.1
Kernel 2.4


-- 

Chad Furman,  Lead Web Developer
518-895-2890 (h)
518-312-6017 (c)(w)

* Cyber Architecture
* Structuring the Internet


</body></email><email><emailId>20070904224539</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-09-04 22:45:39-0400</timestampReceived><subject>[PHP-GTK-DEV] PHP-GTK Now Available on Macports</subject><body>

Hi All,

PHP-GTK 2 (Beta) is now available in the Macports [1] tree. This  
should make it easier for Mac OS X users to install PHP-GTK. If you  
have Macports installed:

$ sudo port sync
$ sudo port install php5-gtk

Available variants are extra, html, libglade, libsexy, sourceview and  
spell.

Cheers,
--
Anant

[1] http://www.macports.org/

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070905135146</emailId><senderName></senderName><senderEmail>jani</senderEmail><timestampReceived>2007-09-05 13:51:46-0400</timestampReceived><subject>[PHP-GTK-DEV] #26679 [Opn-&gt;Fbk]: php error messages in c files</subject><body>

 ID:               26679
 Updated by:       jani@php.net
 Reported By:      steinm@php.net
-Status:           Open
+Status:           Feedback
 Bug Type:         PHP-GTK related
 Operating System: Linux
 PHP Version:      4.4.2
 New Comment:

Does it happen with PHP 5.2.4?


Previous Comments:
------------------------------------------------------------------------

[2006-04-18 14:24:43] steinm@php.net

This bug seems to be still there with php-gtk 1.0.2 and php 4.4.2-1+b1.
The line number just has changed. It's now 612.

  Uwe

------------------------------------------------------------------------

[2005-03-30 08:57:57] sniper@php.net

Does this happen still..?


------------------------------------------------------------------------

[2004-08-13 09:39:37] gbp at reddleman dot org

I have the same problem and it looks like it might be a bug in Pear's
Getopt.

The problem is with calling PHP in this fashion

php -f file.php -- -o opt_value argument

The '--' is not interpreted as the end of PHP arguments, but rather as
the first script argument. The solution is, after configure, to replace
all occurences with a line in this style:

php -q file.php -o opt_value argument

i.e., replace -f with -q and remove the --

After that, run

make clean
find -name "gen_*" -exec rm {} \;
make

That did it for me.

------------------------------------------------------------------------

[2003-12-19 23:45:24] steinm@php.net

Description:
------------
to reproduce (php-gtk-1.0.0)

$./buildconf
$./configure
...
./configure: line 3665: syntax error near unexpected token `debug,'
./configure: line 3665: `PHP_GTK_ARG_ENABLE(debug, whether to include
debugging symbols,'

$aclocal
$./buildconf
$./configure
$make

files:
/ext/gtk+/gen_gtk.c contains (it's inside the file):
br /&gt;
&lt;b&gt;Warning&lt;/b&gt;:  fopen(--): failed to open stream: No such file or
directory in &lt;b&gt;/dev/php-gtk/generator/scheme.php&lt;/b&gt; on line
&lt;b&gt;110&lt;/b&gt;&lt;br /&gt;
&lt;br /&gt;
&lt;b&gt;Warning&lt;/b&gt;:  fgets(): supplied argument is not a valid stream
resource in &lt;b&gt;/dev/php-gtk/generator/scheme.php&lt;/b&gt; on line
&lt;b&gt;34&lt;/b&gt;&lt;br /&gt;

/ext/gtk+/get_gdk.c contains:
&lt;br /&gt;
&lt;b&gt;Warning&lt;/b&gt;:  filemtime(): Stat failed for -- (errno=2 - No such
file or directory) in &lt;b&gt;/dev/php-gtk/generator/scheme.php&lt;/b&gt; on line
&lt;b&gt;101&lt;/b&gt;&lt;br /&gt;

you can remove those line from the files and do "make" (it will go a
bit farther) again, but then you receive the folliwing:

/dev/php-gtk/main/php_gtk_object.c: In function
`php_gtk_arg_from_value':
/dev/php-gtk/main/php_gtk_object.c:615: error: `gtk_object_ce'
undeclared (first use in this function)
/dev/php-gtk/main/php_gtk_object.c:615: error: (Each undeclared
identifier is reported only once
/dev/php-gtk/main/php_gtk_object.c:615: error: for each function it
appears in.)
/dev/php-gtk/main/php_gtk_object.c: In function
`php_gtk_ret_from_value':
/dev/php-gtk/main/php_gtk_object.c:892: error: `gtk_object_ce'
undeclared (first use in this function)
make: *** [main/php_gtk_object.lo] Error 1

Hope it helps. Thanks

Alexander Kabanov



------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=26679&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070921174357</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-09-21 17:43:57-0400</timestampReceived><subject>[PHP-GTK-DEV] new_from_gd patch</subject><body>

After some discussions with Sara, I think the following patch should 
allow new_from_gd

1. To throw an error if gd isn't loaded
2. To work with gd shared if it's loaded
3. To work with gd static
4. To not need gd sources or libraries to build php-gtk

Anyone brave enough to see if I've screwed it up on *nix?  Appears to 
work fine with windows.

If this works properly, I'd love to implement new_from_freeimage and 
new_from_imagemagick too ;)

["new_from_gd.patch" (text/plain)]

Index: ext/gtk+/gdk.overrides
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/gdk.overrides,v
retrieving revision 1.76
diff -u -r1.76 gdk.overrides
--- ext/gtk+/gdk.overrides	15 Jun 2007 21:06:31 -0000	1.76
+++ ext/gtk+/gdk.overrides	21 Sep 2007 17:12:33 -0000
@@ -1851,10 +1851,58 @@
 %%
 add GdkPixbuf new_from_gd ZEND_ACC_PUBLIC|ZEND_ACC_STATIC
 
-#if HAVE_GD_BUNDLED
-#include "ext/gd/php_gd.h"
-#include "ext/gd/libgd/gd.h"
-#endif
+#define gdMaxColors 256
+#define gdTrueColorGetAlpha(c) (((c) &amp; 0x7F000000) &gt;&gt; 24)
+#define gdTrueColorGetRed(c) (((c) &amp; 0xFF0000) &gt;&gt; 16)
+#define gdTrueColorGetGreen(c) (((c) &amp; 0x00FF00) &gt;&gt; 8)
+#define gdTrueColorGetBlue(c) ((c) &amp; 0x0000FF)
+typedef struct gdImageStruct {
+	unsigned char ** pixels;
+	int sx;
+	int sy;
+	int colorsTotal;
+	int red[gdMaxColors];
+	int green[gdMaxColors];
+	int blue[gdMaxColors];
+	int open[gdMaxColors];
+	int transparent;
+	int *polyInts;
+	int polyAllocated;
+	struct gdImageStruct *brush;
+	struct gdImageStruct *tile;
+	int brushColorMap[gdMaxColors];
+	int tileColorMap[gdMaxColors];
+	int styleLength;
+	int stylePos;
+	int *style;
+	int interlace;
+	int thick;
+	int alpha[gdMaxColors];
+	int trueColor;
+	int ** tpixels;
+	int alphaBlendingFlag;
+	int antialias;
+	int saveAlphaFlag;
+	int AA;
+	int AA_color;
+	int AA_dont_blend;
+	unsigned char **AA_opacity;
+	int AA_polygon;
+	int AAL_x1;
+	int AAL_y1;
+	int AAL_x2;
+	int AAL_y2;
+	int AAL_Bx_Ax;
+	int AAL_By_Ay;
+	int AAL_LAB_2;
+	float AAL_LAB;
+	int cx1;
+	int cy1;
+	int cx2;
+	int cy2;
+} gdImage;
+
+typedef gdImage * gdImagePtr;
 
 void phpg_free_pixbuf_data(guchar *pixels, gpointer data)
 {
@@ -1863,23 +1911,26 @@
 
 PHP_METHOD
 {
-#if HAVE_GD_BUNDLED
     zval *php_gd;
     gdImagePtr gd;
     guint *data;
     guint pixel;
     GdkPixbuf *pixbuf;
     int x, y, c, alpha;
+    void (_stdcall *gdImageSaveAlpha)(gdImagePtr im, int saveAlphaArg);
+    int (_stdcall *phpi_get_le_gd)(void);
 
     if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "r", &amp;php_gd)) {
         return;
     }
 
-    if (!zend_hash_exists(&amp;module_registry, "gd", sizeof("gd")) ||
-        !zend_hash_exists(EG(function_table), "imagesavealpha", sizeof("imagesavealpha"))) {
-        php_error(E_ERROR, "Extension 'gd' not available or uses GD library version below 2.0");
-        return;
-    }
+	gdImageSaveAlpha = DL_FETCH_SYMBOL(NULL, "gdImageSaveAlpha");
+	phpi_get_le_gd = DL_FETCH_SYMBOL(NULL, "phpi_get_le_gd");
+	
+	if (!gdImageSaveAlpha || !phpi_get_le_gd)
+	{
+		php_error(E_ERROR, "Extension 'gd' not available or uses GD library version below 2.0");
+	}
 
     ZEND_FETCH_RESOURCE(gd, gdImagePtr, &amp;php_gd, -1, "Image", phpi_get_le_gd());
 
@@ -1940,9 +1991,6 @@
 
     phpg_gobject_new(&amp;return_value, (GObject *)pixbuf TSRMLS_CC);
     g_object_unref(pixbuf); /* phpg_gobject_new() increments reference count */
-#else
-    php_error(E_ERROR, "PHP-GTK was not compiled against PHP with bundled GD library");
-#endif
 }
 
 %%



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070923214340</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-09-23 21:43:40-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: new_from_gd patch</subject><body>

All right, figured out the win32 error and fixed it, windows requires 
some really hacky stuff to load the code from a statically linked lib.

The code for the linux side is exactly the same as the patch before and 
I have positive tests that it works for both static gd and shared gd 
there.  Unless I get a "oh my gosh this breaks" I'd like to commit this 
patch since it fixes all the gd problems.

Just a recap -

1. You don't need gd to build php-gtk.
2. You don't have to load gd to use php-gtk, unless you want to use the 
new_from_gd method.
3. You can use new_from_gd with either gd shared or static as long as 
you load it before calling the method.

Thanks,
Elizabeth Smith

["new_from_gd.patch" (text/plain)]

Index: gdk.overrides
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/gdk.overrides,v
retrieving revision 1.76
diff -u -r1.76 gdk.overrides
--- gdk.overrides	15 Jun 2007 21:06:31 -0000	1.76
+++ gdk.overrides	23 Sep 2007 21:25:41 -0000
@@ -1851,10 +1851,58 @@
 %%
 add GdkPixbuf new_from_gd ZEND_ACC_PUBLIC|ZEND_ACC_STATIC
 
-#if HAVE_GD_BUNDLED
-#include "ext/gd/php_gd.h"
-#include "ext/gd/libgd/gd.h"
-#endif
+#define gdMaxColors 256
+#define gdTrueColorGetAlpha(c) (((c) &amp; 0x7F000000) &gt;&gt; 24)
+#define gdTrueColorGetRed(c) (((c) &amp; 0xFF0000) &gt;&gt; 16)
+#define gdTrueColorGetGreen(c) (((c) &amp; 0x00FF00) &gt;&gt; 8)
+#define gdTrueColorGetBlue(c) ((c) &amp; 0x0000FF)
+typedef struct gdImageStruct {
+	unsigned char ** pixels;
+	int sx;
+	int sy;
+	int colorsTotal;
+	int red[gdMaxColors];
+	int green[gdMaxColors];
+	int blue[gdMaxColors];
+	int open[gdMaxColors];
+	int transparent;
+	int *polyInts;
+	int polyAllocated;
+	struct gdImageStruct *brush;
+	struct gdImageStruct *tile;
+	int brushColorMap[gdMaxColors];
+	int tileColorMap[gdMaxColors];
+	int styleLength;
+	int stylePos;
+	int *style;
+	int interlace;
+	int thick;
+	int alpha[gdMaxColors];
+	int trueColor;
+	int ** tpixels;
+	int alphaBlendingFlag;
+	int antialias;
+	int saveAlphaFlag;
+	int AA;
+	int AA_color;
+	int AA_dont_blend;
+	unsigned char **AA_opacity;
+	int AA_polygon;
+	int AAL_x1;
+	int AAL_y1;
+	int AAL_x2;
+	int AAL_y2;
+	int AAL_Bx_Ax;
+	int AAL_By_Ay;
+	int AAL_LAB_2;
+	float AAL_LAB;
+	int cx1;
+	int cy1;
+	int cx2;
+	int cy2;
+} gdImage;
+
+typedef gdImage * gdImagePtr;
 
 void phpg_free_pixbuf_data(guchar *pixels, gpointer data)
 {
@@ -1863,24 +1911,63 @@
 
 PHP_METHOD
 {
-#if HAVE_GD_BUNDLED
     zval *php_gd;
     gdImagePtr gd;
     guint *data;
     guint pixel;
     GdkPixbuf *pixbuf;
     int x, y, c, alpha;
+    struct _zend_module_entry *module;
+    
+#ifdef WIN32
+int (__stdcall *phpi_get_le_gd)(void);
+BOOL (__stdcall *EnumProcessModules)(HANDLE hProcess, HMODULE* lphModule, DWORD cb, LPDWORD lpcbNeeded);
+#else
+int (*phpi_get_le_gd)(void);
+#endif
 
-    if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "r", &amp;php_gd)) {
+	if (zend_hash_find(&amp;module_registry, "gd", sizeof("gd"), (void **)&amp;module) == FAILURE) {
+        php_error(E_ERROR, "The php gd extension must be loaded to use this method");
         return;
     }
 
-    if (!zend_hash_exists(&amp;module_registry, "gd", sizeof("gd")) ||
-        !zend_hash_exists(EG(function_table), "imagesavealpha", sizeof("imagesavealpha"))) {
-        php_error(E_ERROR, "Extension 'gd' not available or uses GD library version below 2.0");
+    if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "r", &amp;php_gd)) {
         return;
     }
 
+#ifdef WIN32
+	if (module-&gt;handle == NULL)
+	{
+		HANDLE cur_proc;
+		HMODULE *modules;
+		DWORD needed, i;
+	    
+	    HMODULE psapi = LoadLibrary("psapi.dll");
+		EnumProcessModules = GetProcAddress(psapi, "EnumProcessModules");
+		cur_proc = GetCurrentProcess();
+		EnumProcessModules(cur_proc, NULL, 0, &amp;needed);
+		modules = (HMODULE*)alloca(needed);
+		EnumProcessModules(cur_proc, modules, needed, &amp;needed);
+		for (i=0; i &lt; needed/sizeof(HMODULE); i++)
+		{
+			if ((phpi_get_le_gd = (void*)GetProcAddress(modules[i], "phpi_get_le_gd")))
+			  break;
+		}
+	}
+	else
+	{
+		phpi_get_le_gd = DL_FETCH_SYMBOL(module-&gt;handle, "phpi_get_le_gd");
+	}
+#else
+	phpi_get_le_gd = DL_FETCH_SYMBOL(module-&gt;handle, "phpi_get_le_gd");
+#endif
+
+	if (!phpi_get_le_gd)
+	{
+		php_error(E_ERROR, "Could not load gd functions");
+		return;
+	}
+
     ZEND_FETCH_RESOURCE(gd, gdImagePtr, &amp;php_gd, -1, "Image", phpi_get_le_gd());
 
     data = safe_emalloc(gd-&gt;sx * gd-&gt;sy, sizeof(guint), 0);
@@ -1940,9 +2027,6 @@
 
     phpg_gobject_new(&amp;return_value, (GObject *)pixbuf TSRMLS_CC);
     g_object_unref(pixbuf); /* phpg_gobject_new() increments reference count */
-#else
-    php_error(E_ERROR, "PHP-GTK was not compiled against PHP with bundled GD library");
-#endif
 }
 
 %%



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070929022432</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-09-29 02:24:32-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] freshmeat</subject><body>

Andrei Zmievski wrote:
&gt; On Sep 28, 2007, at 7:05 AM, Elizabeth Smith wrote:
&gt; 
&gt;&gt; The only ones I've really noticed involved the deprecation of some gtk 
&gt;&gt; stuff in favor of the (almost) identical glib versions
&gt;&gt;
&gt;&gt; The gtk_timeout_* are deprecated in favor of the glib varieties - 
&gt;&gt; since 2.4
&gt;&gt; The gtk_idle_* are deprecated in favor of the glib varieties since 2.4
&gt;&gt; The gtk_input_* are deprecated in favor of the glib varieties since 2.4
&gt; 
&gt; Yes, I know. We're using the glib versions but namespacing them in Gtk:: 
&gt; because there's no other place to stick them.

Take a second look, we're not using ALL of the glib versions in favor of 
the deprecated ones, gtk_idle_remove instead of g_idle_remove for 
example - perhaps that's just an oversight?  It's probably not the best 
thing to be mixing the two...  That was probably what was confusing me 
more than anything.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070801020205</emailId><senderName></senderName><senderEmail>php</senderEmail><timestampReceived>2007-08-01 02:02:05-0400</timestampReceived><subject>[PHP-GTK-DEV] RE:</subject><body>


Once you order Penis Enlarge Patch you will never wanna try another product.

http://www.studkin.biz/?yrujdmpzgnm

After taking Penis Enlarge Patch you will be able to reach your asshole with your \
dick.














------------------------
destroys HER also; she attacks the Fishwifes Leg and destroys HER also; sheattacks \
its Body and consumes HIM; she wreathes herself about its Heart  andIT  is consumed; \
next about its Breast, and in a Moment SHE is a Cinder; nowshe reaches its Neck  -- \
He goes; now its Chin  -- IT goes;  now its Nose -- remain; may they never any more \
wave over opposing hosts, or be stained with



</body></email><email><emailId>20070807134559</emailId><senderName>"Mr L. Pegg"</senderName><senderEmail>leon.pegg@gmail.com</senderEmail><timestampReceived>2007-08-07 13:45:59-0400</timestampReceived><subject>[PHP-GTK-DEV] PHP6 &amp; php-gtk</subject><body>


Hello all,

Andrei I have been working on getting php-gtk compiling against php6-dev and
wanted to know weather you thought a php6 branch or api ifdefs would be
better.
personally I think a php6 branch would be better.

Regards Leon Pegg


</body></email><email><emailId>20070811143349</emailId><senderName>Leon Pegg</senderName><senderEmail>leon.pegg@gmail.com</senderEmail><timestampReceived>2007-08-11 14:33:49-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] php-gtk php6 branch</subject><body>


I know php6 is not even alpha yet, and the current php-gtk (php5) needs work
which I am also helping with, The way I see it getting a jump start on
things hurts no one.

Leon

Andrei Zmievski wrote:
&gt; 
&gt; PHP 6 is not even in alpha yet. PHP-GTK 2 has not had a final  
&gt; official release. So I think it would be premature to spend effort on  
&gt; making a branch when we could use help on existing stuff..
&gt; 
&gt; -Andrei
&gt; http://10fathoms.org/vu - daily photoblog
&gt; 

-- 
View this message in context: http://www.nabble.com/php-gtk-php6-branch-tf4230179.html#a12105913
Sent from the Php - GTK - Dev mailing list archive at Nabble.com.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070816190153</emailId><senderName>"Marc Quinton"</senderName><senderEmail>mquinton@gmail.com</senderEmail><timestampReceived>2007-08-16 19:01:53-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] #41843 [Opn]: Set text on cloned GtkLabel gives segmentation fault</subject><body>

On 8/16/07, vrana@php.net &lt;vrana@php.net&gt; wrote:

&gt; echo "Start\n";
&gt; $lbl = new GtkLabel('nada');
&gt; echo "Label created\n";
&gt; $lbl-&gt;set_text('Text');
&gt; echo "Text set\n";
&gt; $lbl2 = clone $lbl;

clone is not supported by actual php-gtk.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070816190324</emailId><senderName>"m dot quinton at gmail dot com"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-08-16 19:03:24-0400</timestampReceived><subject>[PHP-GTK-DEV] #41843 [Com]: Set text on cloned GtkLabel gives segmentation fault</subject><body>

 ID:               41843
 Comment by:       m dot quinton at gmail dot com
 Reported By:      john dot navratil at sbcglobal dot net
 Status:           Open
 Bug Type:         PHP-GTK related
 Operating System: Fedora 7
 PHP Version:      5.2.3
 New Comment:

clone operation is not supported by actual php-gtk.


Previous Comments:
------------------------------------------------------------------------

[2007-08-16 13:19:15] vrana@php.net

Please document this in PHP-GTK documentation.

------------------------------------------------------------------------

[2007-06-29 01:13:30] sfox@php.net

John has a point. Putting it onto the docs folk. (Sorry docs folk.)

------------------------------------------------------------------------

[2007-06-29 00:27:31] john dot navratil at sbcglobal dot net

Fair enough!  I assumed as much and will look forward to object cloning
in the future.

Meanwhile, we might wish to review the docs at
"language.oop5.cloning.php" which refers to cloning GTK (not +) windows.
 It might also be a reasonable idea to implement the clone methods to
throw an Exception("Cloning not supported") in the meantime.  A
segmentation fault is a bit of a foul, don't you think?

I know it's beta software and I'm sure there is plenty to do.  Many
thanks for what has been provided to date.

------------------------------------------------------------------------

[2007-06-28 17:54:25] anant@php.net

Thank you for taking the time to write to us, but this is not
a bug. Please double-check the documentation available at
http://www.php.net/manual/ and the instructions on how to report
a bug at http://bugs.php.net/how-to-report.php

Cloning is not supported in PHP-GTK yet. We\'re hoping to resolve this

soon.

------------------------------------------------------------------------

[2007-06-28 16:56:42] john dot navratil at sbcglobal dot net

Description:
------------
There is an apparent failure in cloning a GtkLabel (and perhaps other
objects).  I tried to clone an existing label in order to capture all
its properties but got a segmentation fault when reseting the text.

Reproduce code:
---------------
&lt;?php
if (!extension_loaded('php-gtk'))
        dl('php_gtk2.so');

echo "Start\n";
$lbl = new GtkLabel('nada');
echo "Label created\n";
$lbl-&gt;set_text('Text');
echo "Text set\n";
$lbl2 = clone $lbl;
echo "Label cloned\n";
$lbl2-&gt;set_text('New text'); // &lt;-- Fails here
echo "Text reset\n";
?&gt;


Expected result:
----------------
Start
Label created
Text set
Label cloned
Text reset


Actual result:
--------------
Start
Label created
Text set
Label cloned
Segmentation fault



------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=41843&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070702190410</emailId><senderName>"sebastianmarconi at gmail dot com"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-07-02 19:04:10-0400</timestampReceived><subject>[PHP-GTK-DEV] #41875 [NEW]: io_add_watch can't detect HUPs</subject><body>

From:             sebastianmarconi at gmail dot com
Operating system: Windows XP
PHP version:      5.2.3
PHP Bug Type:     PHP-GTK related
Bug description:  io_add_watch can't detect HUPs

Description:
------------
It seems that Gtk::io_add_watch
can't detect HUP conditions using
beta Windows binary with Gtk+ 2.10.

In some cases the only workaround that I've found is to look the process
status info [1] in the STDOUT callback (sometimes it sends IO_IN signals
constantly), but randomly losses some information.


[1]
&lt;?php

$status = proc_get_status($proc_id);
if (! $status['running']) {
	$this-&gt;io_hup($pipe);
}	

?&gt;

Reproduce code:
---------------
&lt;?php

function out($pipe) {
       echo "STDOUT\n";
       echo stream_get_contents($pipe);
}

function hup($pipe){
       echo "HUP\n";
       Gtk::main_quit();
       return false;
}


$pipes = null;
$descriptor = array(
       0 =&gt; array("pipe", "r"),  // stdin
       1 =&gt; array("pipe", "w"),  // stdout is a pipe that the child will
write to
       2 =&gt; array("pipe", "w")   // stderr
);
$cmd = 'dir';
$p = proc_open($cmd, $descriptor, $pipes);
Gtk::io_add_watch($pipes[1],Gtk::IO_IN, 'out');
Gtk::io_add_watch($pipes[1],Gtk::IO_HUP, 'hup');

Gtk::main();
echo "EXIT\n";
fclose($pipes[0]);
fclose($pipes[1]);
fclose($pipes[2]);

?&gt;

Expected result:
----------------
STDOUT
[Dir contents]
HUP
EXIT

Actual result:
--------------
STDOUT
[The script hangs]

-- 
Edit bug report at http://bugs.php.net/?id=41875&amp;edit=1
-- 
Try a CVS snapshot (PHP 4.4): http://bugs.php.net/fix.php?id=41875&amp;r=trysnapshot44
Try a CVS snapshot (PHP 5.2): http://bugs.php.net/fix.php?id=41875&amp;r=trysnapshot52
Try a CVS snapshot (PHP 6.0): http://bugs.php.net/fix.php?id=41875&amp;r=trysnapshot60
Fixed in CVS:                 http://bugs.php.net/fix.php?id=41875&amp;r=fixedcvs
Fixed in release:             http://bugs.php.net/fix.php?id=41875&amp;r=alreadyfixed
Need backtrace:               http://bugs.php.net/fix.php?id=41875&amp;r=needtrace
Need Reproduce Script:        http://bugs.php.net/fix.php?id=41875&amp;r=needscript
Try newer version:            http://bugs.php.net/fix.php?id=41875&amp;r=oldversion
Not developer issue:          http://bugs.php.net/fix.php?id=41875&amp;r=support
Expected behavior:            http://bugs.php.net/fix.php?id=41875&amp;r=notwrong
Not enough info:              http://bugs.php.net/fix.php?id=41875&amp;r=notenoughinfo
Submitted twice:              http://bugs.php.net/fix.php?id=41875&amp;r=submittedtwice
register_globals:             http://bugs.php.net/fix.php?id=41875&amp;r=globals
PHP 3 support discontinued:   http://bugs.php.net/fix.php?id=41875&amp;r=php3
Daylight Savings:             http://bugs.php.net/fix.php?id=41875&amp;r=dst
IIS Stability:                http://bugs.php.net/fix.php?id=41875&amp;r=isapi
Install GNU Sed:              http://bugs.php.net/fix.php?id=41875&amp;r=gnused
Floating point limitations:   http://bugs.php.net/fix.php?id=41875&amp;r=float
No Zend Extensions:           http://bugs.php.net/fix.php?id=41875&amp;r=nozend
MySQL Configuration Error:    http://bugs.php.net/fix.php?id=41875&amp;r=mysqlcfg

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070708021520</emailId><senderName>       Fernando_Correa_da_Conceição</senderName><senderEmail></senderEmail><timestampReceived>2007-07-08 02:15:20-0400</timestampReceived><subject>[PHP-GTK-DEV] Another bug and fix for GtkScintilla on Linux.</subject><body>

The lexers are not linked in the scintilla. So the sintax highlighting 
do not work. We must add -DSCI_LEXER on the makefile for all files  in 
gtkscintilla, I did it on CFLAGS but this add to all files.

Thanks

Fernando Correa da Conceição

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070708063451</emailId><senderName>bob majdak jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-07-08 06:34:51-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Bug and fix for GtkScintilla on Linux</subject><body>

`./configure --enable-scintilla`. it works, i've done it. its not 
debian's fault. you probably did --with-scintilla, i imagine? check it, 
it should have been in the Makefile already just commented out. though i 
did have linking problems with gxx_personality which were unrelated to 
scintilla directly. Anant could not reproduce it so it was something 
local to my setup, a missing link flag.

- bob.

� wrote:
&gt; It is me, again.
&gt; GtkScintilla do not work for me(again...) on linux, using debian 
&gt; etch(kurumin). There is an undefined reference to a cxx funcion. This 
&gt; time I have a simple fix, on the line PHP_GTK2_SHARED_LIBADD in the make 
&gt; file, add as the last item -lstdc++ . Works for me.
&gt; 
&gt; Fernando Correa da Concei��o.
&gt; 
&gt; PS: I will try to build it on windows(there is some reference doc about 
&gt; howto build on windows?) and search why it dies when I use "�".
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070710113116</emailId><senderName></senderName><senderEmail>jani</senderEmail><timestampReceived>2007-07-10 11:31:16-0400</timestampReceived><subject>[PHP-GTK-DEV] #39676 [Opn-&gt;Csd]: Solaris</subject><body>

 ID:               39676
 Updated by:       jani@php.net
 Reported By:      sunshinesun_9 at 163 dot com
-Status:           Open
+Status:           Closed
 Bug Type:         PHP-GTK related
 Operating System: Solaris
 PHP Version:      5.2.0
 New Comment:

This bug has been fixed in CVS.

Snapshots of the sources are packaged every three hours; this change
will be in the next snapshot. You can grab the snapshot at
http://snaps.php.net/.
 
Thank you for the report, and for helping us make PHP better.




Previous Comments:
------------------------------------------------------------------------

[2006-11-29 06:42:28] judas dot iscariote at gmail dot com

CVS version does not have this errors..

------------------------------------------------------------------------

[2006-11-29 03:59:24] sunshinesun_9 at 163 dot com

Description:
------------
./buildconf


PHP Api Version:         20041225
Zend Module Api No:      20060613
Zend Extension Api No:   220060519
configure.in:25: error: possibly undefined macro: AC_MSG_ERROR
      If this token and others are legitimate, please use
m4_pattern_allow.
      See the Autoconf documentation.
configure:3342: error: possibly undefined macro: AM_PATH_GLIB_2_0
configure:3472: error: possibly undefined macro: AM_PATH_GTK_2_0


Reproduce code:
---------------
PHP Api Version:         20041225
Zend Module Api No:      20060613
Zend Extension Api No:   220060519
configure.in:25: error: possibly undefined macro: AC_MSG_ERROR
      If this token and others are legitimate, please use
m4_pattern_allow.
      See the Autoconf documentation.
configure:3342: error: possibly undefined macro: AM_PATH_GLIB_2_0
configure:3472: error: possibly undefined macro: AM_PATH_GTK_2_0


Expected result:
----------------
PHP Api Version:         20041225
Zend Module Api No:      20060613
Zend Extension Api No:   220060519
configure.in:25: error: possibly undefined macro: AC_MSG_ERROR
      If this token and others are legitimate, please use
m4_pattern_allow.
      See the Autoconf documentation.
configure:3342: error: possibly undefined macro: AM_PATH_GLIB_2_0
configure:3472: error: possibly undefined macro: AM_PATH_GTK_2_0


Actual result:
--------------
PHP Api Version:         20041225
Zend Module Api No:      20060613
Zend Extension Api No:   220060519
configure.in:25: error: possibly undefined macro: AC_MSG_ERROR
      If this token and others are legitimate, please use
m4_pattern_allow.
      See the Autoconf documentation.
configure:3342: error: possibly undefined macro: AM_PATH_GLIB_2_0
configure:3472: error: possibly undefined macro: AM_PATH_GTK_2_0



------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=39676&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070710141422</emailId><senderName></senderName><senderEmail>jani</senderEmail><timestampReceived>2007-07-10 14:14:22-0400</timestampReceived><subject>[PHP-GTK-DEV] #40518 [Opn-&gt;Fbk]: php-gtk does not compile with PHP 5.2.1</subject><body>

 ID:               40518
 Updated by:       jani@php.net
 Reported By:      spam2 at rhsoft dot net
-Status:           Open
+Status:           Feedback
 Bug Type:         PHP-GTK related
 Operating System: Linux (FC 6)
 PHP Version:      5.2.1
 New Comment:

Please try using this CVS snapshot:

  http://snaps.php.net/php5.2-latest.tar.gz
 
For Windows (zip):
 
  http://snaps.php.net/win32/php5.2-win32-latest.zip

For Windows (installer):

  http://snaps.php.net/win32/php5.2-win32-installer-latest.msi




Previous Comments:
------------------------------------------------------------------------

[2007-02-17 16:21:16] spam2 at rhsoft dot net

Description:
------------
checking for PHP executable in /usr/bin... found version 5.2.1
configure: error: PHP CLI version is required,  found

Reproduce code:
---------------
Compile PHP 5.2.1 from source and then the latest php-gtk with the
following ./configure-Script, but i think the options does not matter:

./buildconf &amp;&amp; CFLAGS="-O6 -march=i686" CXX=gcc CXXFLAGS="-O6
-march=i686" ./configure &amp;&amp; make &amp;&amp; strip ./modules/php_gtk2.so &amp;&amp; sudo
make install &amp;&amp; make clean &gt; /dev/null






------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=40518&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070711171436</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-07-11 17:14:36-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] PHPGTK Development</subject><body>

Hi Joseph,

&gt; I am a PHP programmer and stumbled upon php-gtk's website today. It  
&gt; caught
&gt; me by surprise as I had not heard of it before. I was very relieved  
&gt; because
&gt; I was on the verge of learning Python just for WX Python's  
&gt; standalone gui
&gt; environments...however, I would much rather prefer to use PHP as it  
&gt; is my
&gt; programming language of choice. I am very excited about it's  
&gt; development and
&gt; want to help contribute to the project if their is any way  
&gt; possible. Are
&gt; their any openings in the PHP-GTK development team?

Glad to know you've found PHP-GTK. We just had a beta release  
recently, and there is still a lot of work to be done before the  
final release. If you're good with C, you could help out with  
improving our code coverage. If that's not your cup of tea, there's  
still a lot of documentation to be written - which requires basic  
knowledge of XML.

You could come over to #php-gtk on Freenode to discuss specifics or  
for more pointers on how you could contribute.

Cheers,
--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070718190256</emailId><senderName>"bob at kateos dot org"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-07-18 19:02:56-0400</timestampReceived><subject>[PHP-GTK-DEV] #41875 [Com]: io_add_watch can't detect HUPs</subject><body>

 ID:               41875
 Comment by:       bob at kateos dot org
 Reported By:      sebastianmarconi at gmail dot com
 Status:           Open
 Bug Type:         PHP-GTK related
 Operating System: Windows XP
 PHP Version:      5.2.3
 New Comment:

works as expected on Linux.


Previous Comments:
------------------------------------------------------------------------

[2007-07-02 19:04:10] sebastianmarconi at gmail dot com

Description:
------------
It seems that Gtk::io_add_watch
can't detect HUP conditions using
beta Windows binary with Gtk+ 2.10.

In some cases the only workaround that I've found is to look the
process status info [1] in the STDOUT callback (sometimes it sends IO_IN
signals constantly), but randomly losses some information.


[1]
&lt;?php

$status = proc_get_status($proc_id);
if (! $status['running']) {
	$this-&gt;io_hup($pipe);
}	

?&gt;

Reproduce code:
---------------
&lt;?php

function out($pipe) {
       echo "STDOUT\n";
       echo stream_get_contents($pipe);
}

function hup($pipe){
       echo "HUP\n";
       Gtk::main_quit();
       return false;
}


$pipes = null;
$descriptor = array(
       0 =&gt; array("pipe", "r"),  // stdin
       1 =&gt; array("pipe", "w"),  // stdout is a pipe that the child
will write to
       2 =&gt; array("pipe", "w")   // stderr
);
$cmd = 'dir';
$p = proc_open($cmd, $descriptor, $pipes);
Gtk::io_add_watch($pipes[1],Gtk::IO_IN, 'out');
Gtk::io_add_watch($pipes[1],Gtk::IO_HUP, 'hup');

Gtk::main();
echo "EXIT\n";
fclose($pipes[0]);
fclose($pipes[1]);
fclose($pipes[2]);

?&gt;

Expected result:
----------------
STDOUT
[Dir contents]
HUP
EXIT

Actual result:
--------------
STDOUT
[The script hangs]


------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=41875&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070718201703</emailId><senderName></senderName><senderEmail>auroraeosrose</senderEmail><timestampReceived>2007-07-18 20:17:03-0400</timestampReceived><subject>[PHP-GTK-DEV] #41875 [Opn-&gt;Bgs]: io_add_watch can't detect HUPs</subject><body>

 ID:               41875
 Updated by:       auroraeosrose@php.net
 Reported By:      sebastianmarconi at gmail dot com
-Status:           Open
+Status:           Bogus
 Bug Type:         PHP-GTK related
 Operating System: Windows XP
 PHP Version:      5.2.3
 New Comment:

You need to add code to detect HUP | IN - hup is never being called
separately so the second watch is never being fired

&lt;?php

function out($pipe) {
       echo "STDOUT\n";
       echo stream_get_contents($pipe);
}

function hupin($pipe){
       echo "STDOUT\n";
       echo stream_get_contents($pipe);
       echo "HUP\n";
       Gtk::main_quit();
       return false;
}

function hup($pipe){
       echo "HUP\n";
       Gtk::main_quit();
       return false;
}

$pipes = null;
$descriptor = array(
       0 =&gt; array("pipe", "r"),  // stdin
       1 =&gt; array("pipe", "w"),  // stdout is a pipe that the child
will write to
       2 =&gt; array("pipe", "w")   // stderr
);
$cmd = 'dir';
$p = proc_open($cmd, $descriptor, $pipes);
Gtk::io_add_watch($pipes[1],GTK::IO_IN, 'out');
Gtk::io_add_watch($pipes[1],GTK::IO_HUP, 'hup');
Gtk::io_add_watch($pipes[1],GTK::IO_HUP | GTK::IO_IN, 'hupin');

Gtk::main();
echo "EXIT\n";
fclose($pipes[0]);
fclose($pipes[1]);
fclose($pipes[2]);
?&gt;




Previous Comments:
------------------------------------------------------------------------

[2007-07-18 19:02:55] bob at kateos dot org

works as expected on Linux.

------------------------------------------------------------------------

[2007-07-02 19:04:10] sebastianmarconi at gmail dot com

Description:
------------
It seems that Gtk::io_add_watch
can't detect HUP conditions using
beta Windows binary with Gtk+ 2.10.

In some cases the only workaround that I've found is to look the
process status info [1] in the STDOUT callback (sometimes it sends IO_IN
signals constantly), but randomly losses some information.


[1]
&lt;?php

$status = proc_get_status($proc_id);
if (! $status['running']) {
	$this-&gt;io_hup($pipe);
}	

?&gt;

Reproduce code:
---------------
&lt;?php

function out($pipe) {
       echo "STDOUT\n";
       echo stream_get_contents($pipe);
}

function hup($pipe){
       echo "HUP\n";
       Gtk::main_quit();
       return false;
}


$pipes = null;
$descriptor = array(
       0 =&gt; array("pipe", "r"),  // stdin
       1 =&gt; array("pipe", "w"),  // stdout is a pipe that the child
will write to
       2 =&gt; array("pipe", "w")   // stderr
);
$cmd = 'dir';
$p = proc_open($cmd, $descriptor, $pipes);
Gtk::io_add_watch($pipes[1],Gtk::IO_IN, 'out');
Gtk::io_add_watch($pipes[1],Gtk::IO_HUP, 'hup');

Gtk::main();
echo "EXIT\n";
fclose($pipes[0]);
fclose($pipes[1]);
fclose($pipes[2]);

?&gt;

Expected result:
----------------
STDOUT
[Dir contents]
HUP
EXIT

Actual result:
--------------
STDOUT
[The script hangs]


------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=41875&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070719163941</emailId><senderName>"sebastianmarconi at gmail dot com"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-07-19 16:39:41-0400</timestampReceived><subject>[PHP-GTK-DEV] #41875 [Bgs]: io_add_watch can't detect HUPs</subject><body>

 ID:               41875
 User updated by:  sebastianmarconi at gmail dot com
 Reported By:      sebastianmarconi at gmail dot com
 Status:           Bogus
 Bug Type:         PHP-GTK related
 Operating System: Windows XP
 PHP Version:      5.2.3
 New Comment:

@auroraeosrose
Using Windows binary with Gtk+ 2.10 with GTK::IO_HUP | GTK::IO_IN the
script doesn't hang anymore but shows the content partially. For example
sometimes only the first lines, others only the last, and regularly
there's no output at all.

If you use the second argument of the watch :

function hupin($pipe, $condition)

Only IO_IN (integer 1) is fired, in few cases both IO_IN| IO_HUP
(integer 17). In previous version (2.0.0 alpha) IO_HUP worked
correctly.

This only is a toy example, but my main application uses this behavior
avoiding the 'busy-wait' effect in several long running tasks (wrapping
svn commands for example), and currently it's loosing functionality in
Windows.


Previous Comments:
------------------------------------------------------------------------

[2007-07-18 20:17:02] auroraeosrose@php.net

You need to add code to detect HUP | IN - hup is never being called
separately so the second watch is never being fired

&lt;?php

function out($pipe) {
       echo "STDOUT\n";
       echo stream_get_contents($pipe);
}

function hupin($pipe){
       echo "STDOUT\n";
       echo stream_get_contents($pipe);
       echo "HUP\n";
       Gtk::main_quit();
       return false;
}

function hup($pipe){
       echo "HUP\n";
       Gtk::main_quit();
       return false;
}

$pipes = null;
$descriptor = array(
       0 =&gt; array("pipe", "r"),  // stdin
       1 =&gt; array("pipe", "w"),  // stdout is a pipe that the child
will write to
       2 =&gt; array("pipe", "w")   // stderr
);
$cmd = 'dir';
$p = proc_open($cmd, $descriptor, $pipes);
Gtk::io_add_watch($pipes[1],GTK::IO_IN, 'out');
Gtk::io_add_watch($pipes[1],GTK::IO_HUP, 'hup');
Gtk::io_add_watch($pipes[1],GTK::IO_HUP | GTK::IO_IN, 'hupin');

Gtk::main();
echo "EXIT\n";
fclose($pipes[0]);
fclose($pipes[1]);
fclose($pipes[2]);
?&gt;



------------------------------------------------------------------------

[2007-07-18 19:02:55] bob at kateos dot org

works as expected on Linux.

------------------------------------------------------------------------

[2007-07-02 19:04:10] sebastianmarconi at gmail dot com

Description:
------------
It seems that Gtk::io_add_watch
can't detect HUP conditions using
beta Windows binary with Gtk+ 2.10.

In some cases the only workaround that I've found is to look the
process status info [1] in the STDOUT callback (sometimes it sends IO_IN
signals constantly), but randomly losses some information.


[1]
&lt;?php

$status = proc_get_status($proc_id);
if (! $status['running']) {
	$this-&gt;io_hup($pipe);
}	

?&gt;

Reproduce code:
---------------
&lt;?php

function out($pipe) {
       echo "STDOUT\n";
       echo stream_get_contents($pipe);
}

function hup($pipe){
       echo "HUP\n";
       Gtk::main_quit();
       return false;
}


$pipes = null;
$descriptor = array(
       0 =&gt; array("pipe", "r"),  // stdin
       1 =&gt; array("pipe", "w"),  // stdout is a pipe that the child
will write to
       2 =&gt; array("pipe", "w")   // stderr
);
$cmd = 'dir';
$p = proc_open($cmd, $descriptor, $pipes);
Gtk::io_add_watch($pipes[1],Gtk::IO_IN, 'out');
Gtk::io_add_watch($pipes[1],Gtk::IO_HUP, 'hup');

Gtk::main();
echo "EXIT\n";
fclose($pipes[0]);
fclose($pipes[1]);
fclose($pipes[2]);

?&gt;

Expected result:
----------------
STDOUT
[Dir contents]
HUP
EXIT

Actual result:
--------------
STDOUT
[The script hangs]


------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=41875&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070721213941</emailId><senderName>bob majdak jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-07-21 21:39:41-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] compiling with scintilla</subject><body>

Oops, sorry. Also having this problem on Solaris, same manual -lstdc++ fix.

- bob.

bob majdak jr wrote:
&gt; To further continue the conversations I was having with Anant on IRC a 
&gt; long time ago, I have been having difficulties getting PHP-GTK to work 
&gt; with Scintilla UNLESS I also add --with-mozembed. The problem was 
&gt; obvious a missing link Mozembed added, mainly a C++ one:
&gt; 
&gt;     __gxx_personality_v0 undefined symbol
&gt; 
&gt; Which Anant could not reproduce. The solution for me was to manually 
&gt; edit the Makefile to add -lstdc++ to the end of PHP_GTK2_SHARED_LIBADD. 
&gt; After that, I no longer had to use the --with-mozembed trick (which is 
&gt; good, I don't want it in this package)
&gt; 
&gt; 
&gt; Random Notes Unrelated:
&gt; * My last note about a LibSexy problem never got posted to the list (it 
&gt; usually is crap shoot and I end up resending things multiple times 
&gt; before it actually gets posted... if that note ever does show up, 
&gt; Elizabeth has fixed it.
&gt; 
&gt; * Steph Fox Wrote:
&gt;  &gt; We aren't all on irc, and I'm so old now my
&gt;  &gt; memory doesn't stretch back to March
&gt; 
&gt; So... why not be on the IRC? There has not been a flame war for Alpha 
&gt; Male status ever since I won the last one. :D
&gt; 
&gt; - bob.
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070726095151</emailId><senderName></senderName><senderEmail>php-general</senderEmail><timestampReceived>2007-07-26 09:51:51-0400</timestampReceived><subject>[PHP-GTK-DEV] RE:</subject><body>

Blister on your dick after different enlarging procedures might be possible, but \
Penis Enlarge Patch is a vague exception.

http://www.studkin.biz/?yrujdmpzgnm

For a big fantastic catch try Penis Enlarge Patch. 














------------------------
   His sister had died the year after she had given him the double text, and his \
father the year after that. He was left thus, the sole support of his ailing mother, \
who transferred to the silent, sullen boy the irresistible rule of complaining \
weakness with which she had governed his father. it was thought she could not live \
long, and the boy stood in terror of a sudden death brought on by displeasure at some \
act of his. In the end, however, she died quietly in her bed, an old woman of \
seventy-three, nursed by her daughter-in-law, the widow of Jehiels only brother. Her \
place in the house was taken by Jehiels sister-in-law, a sickly, helpless woman, \
alone in the world except for Jehiel, and all the neighbors congratulated him on \
having a housekeeper ready to his hand. He said nothing.   That was certainly winter \
temperature; the snow lay like a heavy shroud on all the dead valley, but the \
strange, blind instinct of a man who has lived close to the earth stirred within him. \
He looked at the sky and the mountains and put out his bare palm. I shouldnt be \
surprised if the spring break-up was near, he said. I guess this is about the last \
winter day well get.   This brought back to his mind the only bitter word he had \
spoken throughout the endless day. Nathaniel had said as an excuse for his haste \
(Jehiel insisted on his leaving that night), You see, mother, its really a service to \
Uncle Jehiel, since hes got nobody to keep house for him. He 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070816131916</emailId><senderName></senderName><senderEmail>vrana</senderEmail><timestampReceived>2007-08-16 13:19:16-0400</timestampReceived><subject>[PHP-GTK-DEV] #41843 [Opn]: Set text on cloned GtkLabel gives segmentation fault</subject><body>

 ID:               41843
 Updated by:       vrana@php.net
 Reported By:      john dot navratil at sbcglobal dot net
 Status:           Open
-Bug Type:         Documentation problem
+Bug Type:         PHP-GTK related
 Operating System: Fedora 7
 PHP Version:      5.2.3
 New Comment:

Please document this in PHP-GTK documentation.


Previous Comments:
------------------------------------------------------------------------

[2007-06-29 01:13:30] sfox@php.net

John has a point. Putting it onto the docs folk. (Sorry docs folk.)

------------------------------------------------------------------------

[2007-06-29 00:27:31] john dot navratil at sbcglobal dot net

Fair enough!  I assumed as much and will look forward to object cloning
in the future.

Meanwhile, we might wish to review the docs at
"language.oop5.cloning.php" which refers to cloning GTK (not +) windows.
 It might also be a reasonable idea to implement the clone methods to
throw an Exception("Cloning not supported") in the meantime.  A
segmentation fault is a bit of a foul, don't you think?

I know it's beta software and I'm sure there is plenty to do.  Many
thanks for what has been provided to date.

------------------------------------------------------------------------

[2007-06-28 17:54:25] anant@php.net

Thank you for taking the time to write to us, but this is not
a bug. Please double-check the documentation available at
http://www.php.net/manual/ and the instructions on how to report
a bug at http://bugs.php.net/how-to-report.php

Cloning is not supported in PHP-GTK yet. We\'re hoping to resolve this

soon.

------------------------------------------------------------------------

[2007-06-28 16:56:42] john dot navratil at sbcglobal dot net

Description:
------------
There is an apparent failure in cloning a GtkLabel (and perhaps other
objects).  I tried to clone an existing label in order to capture all
its properties but got a segmentation fault when reseting the text.

Reproduce code:
---------------
&lt;?php
if (!extension_loaded('php-gtk'))
        dl('php_gtk2.so');

echo "Start\n";
$lbl = new GtkLabel('nada');
echo "Label created\n";
$lbl-&gt;set_text('Text');
echo "Text set\n";
$lbl2 = clone $lbl;
echo "Label cloned\n";
$lbl2-&gt;set_text('New text'); // &lt;-- Fails here
echo "Text reset\n";
?&gt;


Expected result:
----------------
Start
Label created
Text set
Label cloned
Text reset


Actual result:
--------------
Start
Label created
Text set
Label cloned
Segmentation fault



------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=41843&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070711164035</emailId><senderName>"Joseph Lookabaugh"</senderName><senderEmail>blazedent@gmail.com</senderEmail><timestampReceived>2007-07-11 16:40:35-0400</timestampReceived><subject>[PHP-GTK-DEV] PHPGTK Development</subject><body>


To whom it may concern,

I am a PHP programmer and stumbled upon php-gtk's website today. It caught
me by surprise as I had not heard of it before. I was very relieved because
I was on the verge of learning Python just for WX Python's standalone gui
environments...however, I would much rather prefer to use PHP as it is my
programming language of choice. I am very excited about it's development and
want to help contribute to the project if their is any way possible. Are
their any openings in the PHP-GTK development team?

Sincerely,
Joseph S Lookabaugh


</body></email><email><emailId>20070721213612</emailId><senderName>bob majdak jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-07-21 21:36:12-0400</timestampReceived><subject>[PHP-GTK-DEV] compiling with scintilla</subject><body>

To further continue the conversations I was having with Anant on IRC a long time ago, I have been 
having difficulties getting PHP-GTK to work with Scintilla UNLESS I also add --with-mozembed. The 
problem was obvious a missing link Mozembed added, mainly a C++ one:

	__gxx_personality_v0 undefined symbol

Which Anant could not reproduce. The solution for me was to manually edit the Makefile to add 
-lstdc++ to the end of PHP_GTK2_SHARED_LIBADD. After that, I no longer had to use the 
--with-mozembed trick (which is good, I don't want it in this package)


Random Notes Unrelated:
* My last note about a LibSexy problem never got posted to the list (it usually is crap shoot and I 
end up resending things multiple times before it actually gets posted... if that note ever does show 
up, Elizabeth has fixed it.

* Steph Fox Wrote:
 &gt; We aren't all on irc, and I'm so old now my
 &gt; memory doesn't stretch back to March

So... why not be on the IRC? There has not been a flame war for Alpha Male status ever since I won 
the last one. :D

- bob.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070608193451</emailId><senderName>       Fernando_Correa_da_Conceição</senderName><senderEmail></senderEmail><timestampReceived>2007-06-08 19:34:51-0400</timestampReceived><subject>[PHP-GTK-DEV] New installer for php-gtk</subject><body>

http://fernando.viaserver.com.br/installer/

As I said before, I want help Elisabeth in finishing the installer for 
windows.
I installed the wix, but it simple do not work on my pc, appear that it 
need some sdk from microft to work.
Since I know how to use the nsis I started one with him, for me nsis 
better and more easy than wix...
So it current has the php5 and the php-gtk extensions, and all 
dependencies.
There is too the association for .phpw, so simple double click one after 
the install.

There is one thing missing: it do not register the modules, as i do not 
know what is this, Elizabeth/Christian can explain this to me?

To add new files is simple, because I make a php script for this.

So, some questions:

1. Can I continue working on it? Will you accept it?

2. The installer can easy be made multilingual, current there is only 
two strings to translate, so I make it in en/pt_BR, if someone else 
wants it in your language, send me a mail and I send what need to be 
translated.

3. Is right the extension .phpw?

4. About the extensions, what go in installer? An installer with nsis 
can download and install files from internet, so we can, if the user 
wants, download at install time, to make the installer smaller.

5. We must have all dlls from php, pecl available somewhere on internet 
to let the user grab it if need, as I think that the files(php.exe and 
all) are diff from the ones on php.net

6. What more to add? A release notes, license, news and stuff of this kind?


And the most important, report anything that is wrong os is missing. I 
am working on it now.

Fernando Correa da Conceição

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070610064643</emailId><senderName>Tom Rogers</senderName><senderEmail>trogers@kwikin.com</senderEmail><timestampReceived>2007-06-10 06:46:43-0400</timestampReceived><subject>Re[2]: [PHP-GTK-DEV] GtkScintilla for Windows</subject><body>

Hi Anant,

Sunday, June 10, 2007, 3:50:51 PM, you wrote:

AN&gt; Are you sure you are using the latest CVS checkout for PHP-GTK? We fixed
AN&gt; the issue of extensions building before Gtk+ sometime ago.

AN&gt; There is already a scintilla directory in ext/, you can just modify the
AN&gt; config.m4 there and you should be all set.

AN&gt; Cheers,
AN&gt; --
AN&gt; Anant

I was using a snapshot, will have a go at CVS.

-- 
regards,
Tom

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070611105648</emailId><senderName>       Fernando_Correa_da_Conceição</senderName><senderEmail></senderEmail><timestampReceived>2007-06-11 10:56:48-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: New installer for php-gtk</subject><body>

Elizabeth Smith escreveu:
&gt; 
&gt;&gt; As I said before, I want help Elisabeth in finishing the installer for 
&gt;&gt; windows.
&gt;&gt; I installed the wix, but it simple do not work on my pc, appear that 
&gt;&gt; it need some sdk from microft to work.
&gt; 
&gt; Errr... you don't "install" wix - just unzip the binaries and compile 
&gt; your xml via the command line -


When I try to use it, simple give me an error. I try to use a gui to 
edit the files, wixedit, and it need the .net sdk version v1.1.4322
and in a file inside wix there is a reference to the same version

&lt;startup&gt;
  &lt;supportedRuntime version="v2.0.50727" /&gt;
  &lt;supportedRuntime version="v1.1.4322" /&gt;
&lt;/startup&gt;

Because of this i think it may need the sdk...

  it shouldn't need any sdks at all unless
&gt; you're trying to install the "votive" software, which is just a fancy 
&gt; gui for wix and not needed...  Take a look at the windows php installer 
&gt; which is currently created with wix (the wix binaries are even in 
&gt; php-cvs...)
&gt; 
&gt;&gt; Since I know how to use the nsis I started one with him, for me nsis 
&gt;&gt; better and more easy than wix...
&gt; 
&gt; Cweiske's Gnope is already a great nsis installer if that's what you're 
&gt; looking for on windows, we really don't need to reinvent the wheel here 
&gt; - the purpose of a "new" installer is to have an .msi version that can 
&gt; be deployed using microsoft's tools and installed silently via command 
&gt; line, and all the other cool features an .msi has that nsis does not
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070613223300</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-06-13 22:33:00-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkScintilla for Windows</subject><body>

Elizabeth Smith wrote:
&gt; At this point we need either me to get gtkscintilla building with
&gt; microsoft visual studio (with the newer bundled version of scintilla) or
&gt; figure out how to build the bundled scintilla library and link it
&gt; statically into php-gtk as part of the php-gtk build (Anant never did
&gt; get it figured out).  Any linux autojunk guru's want to step up to the
&gt; plate?  I won't have time to attack gtkscintilla until next week
&gt; probably.  I think as soon as we get the scintilla thing figured out and
&gt; the installer semi-functional we're go for a beta...  Anyone have some
&gt; overrides done?

Okay, so the Scintilla-on-*nix issue is finally solved. It builds the
whole scintilla library into the .so which makes it a bit heavy, but
hey, atleast it works :)

The Win32 installer in the only pending issue now, the ball is in your
court again ;)

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070610232627</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-06-10 23:26:27-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: New installer for php-gtk</subject><body>


&gt; As I said before, I want help Elisabeth in finishing the installer for 
&gt; windows.
&gt; I installed the wix, but it simple do not work on my pc, appear that it 
&gt; need some sdk from microft to work.

Errr... you don't "install" wix - just unzip the binaries and compile 
your xml via the command line - it shouldn't need any sdks at all unless 
you're trying to install the "votive" software, which is just a fancy 
gui for wix and not needed...  Take a look at the windows php installer 
which is currently created with wix (the wix binaries are even in 
php-cvs...)

&gt; Since I know how to use the nsis I started one with him, for me nsis 
&gt; better and more easy than wix...

Cweiske's Gnope is already a great nsis installer if that's what you're 
looking for on windows, we really don't need to reinvent the wheel here 
- the purpose of a "new" installer is to have an .msi version that can 
be deployed using microsoft's tools and installed silently via command 
line, and all the other cool features an .msi has that nsis does not

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070614230604</emailId><senderName></senderName><senderEmail>php-general</senderEmail><timestampReceived>2007-06-14 23:06:04-0400</timestampReceived><subject>[PHP-GTK-DEV] With Anatrim you will like the scales.</subject><body>

Your worst enemy is your emotianal eating? You go on eating even when you are full? Than Anatrim is here to save your life – it will suppress your appetite without leaving you hungry. 


Order here
http://www.rahig.hk/?bncclw

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070605085909</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-06-05 08:59:09-0400</timestampReceived><subject>[PHP-GTK-DEV] GtkScintilla for Windows</subject><body>

Hey all,

After days of struggling with Scintilla and trying to get it talk to
PHP-GTK on Linux and Mac OS X, I finally decided to give up and try
getting GtkScintilla to build on Windows instead.

To my pleasant surprise, this wasn't so tough. After mangling with MinGW
for a while, I was able to churn out a DLL (two DLLs and one lib
actually). Er, I still can't build PHP-GTK so I can't test this as of
yet, but I'm sure Elizabeth or Steph will be able to do a proper build
of GtkScintilla.

Anyway, this means the Scintilla issue is more or less settled. Unless
someone is willing to get Scintilla to work on *nix. I still think we
should retain GtkScintilla since it has a more Gtk-ish API as compared
to pure Scintilla and clearly a lot saner.

If you want to check if the DLLs are any good, you can find them here:
http://www.kix.in/php-gtk2/win32/

This leaves us with just the Win32 installer for the beta. I'm thinking
June 7th is a good target for a release.

Cheers,
-- 
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070608003534</emailId><senderName>       Fernando Correa da ConceiÃ§Ã£o</senderName><senderEmail></senderEmail><timestampReceived>2007-06-08 00:35:34-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkScintilla for Windows</subject><body>

Anant Narayanan escreveu:
&gt; Hey all,
&gt; 
&gt; After days of struggling with Scintilla and trying to get it talk to
&gt; PHP-GTK on Linux and Mac OS X, I finally decided to give up and try
&gt; getting GtkScintilla to build on Windows instead.
&gt; 
&gt; To my pleasant surprise, this wasn't so tough. After mangling with MinGW
&gt; for a while, I was able to churn out a DLL (two DLLs and one lib
&gt; actually). Er, I still can't build PHP-GTK so I can't test this as of
&gt; yet, but I'm sure Elizabeth or Steph will be able to do a proper build
&gt; of GtkScintilla.
&gt; 
&gt; Anyway, this means the Scintilla issue is more or less settled. Unless
&gt; someone is willing to get Scintilla to work on *nix. I still think we
&gt; should retain GtkScintilla since it has a more Gtk-ish API as compared
&gt; to pure Scintilla and clearly a lot saner.
&gt; 
&gt; If you want to check if the DLLs are any good, you can find them here:
&gt; http://www.kix.in/php-gtk2/win32/
&gt; 
&gt; This leaves us with just the Win32 installer for the beta. I'm thinking
&gt; June 7th is a good target for a release.
&gt; 
&gt; Cheers,
I do not understant this. There is two versions of scintilla for 
php-gtk, one fron Tom which is build direct from the scintilla on 
windows and the other you make which is based on GtkScintilla on Linux.

The version from tom(which works on windows) is not hard to make it work 
on linux, I did this some time ago(there is a message on the mailing 
list about this). I build the scintilla which creates a .a lib and add 
this to makefile by hand(I do not know about how to make this using the 
build system). But I do not have the files now :(

The most important thing is have one of they working both on windows and 
linux. If we gonna use the version that uses the GtkScintilla we can at 
last replace the files from scintilla that it uses to the last scintilla?

About the installer. Elizabeth done some work on it, currently it only 
install the php and the php-gtk, without any extension. We need only add 
the files for extensions and it ´s dependencies.
If Elisabeth can not work on it, I can, but I can not build the files(I 
do not have MSVC), so she must send all files for me.

Important! I think that a release is a good thing to tell everyone that 
the project is under active work!

Fernando Correa da ConceiÃ§Ã£o

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615021013</emailId><senderName>Tom Rogers</senderName><senderEmail>trogers@kwikin.com</senderEmail><timestampReceived>2007-06-15 02:10:13-0400</timestampReceived><subject>Re[2]: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

Hi,

Friday, June 15, 2007, 11:41:58 AM, you wrote:

MD&gt; Steph wrote:

&gt;&gt; 23rd August would be PHP 5.1.6.
&gt;&gt;

MD&gt; Correct.

&gt;&gt; It sounds like that 5_2 relative include bug's
MD&gt; hurting you 
&gt;&gt; (http://bugs.php.net/bug.php?id=41193). Does that
MD&gt; make sense - do you 
&gt;&gt; use __autoload() or MVC alongside relative paths?
&gt;&gt;

MD&gt; As I read the bug report, this hits at any relative
MD&gt; path stmt in the 
MD&gt; code, and not just autoload.  I'm guessing (w/o really
MD&gt; knowing anything 
MD&gt; at all) that the demo loading images is where the
MD&gt; problem lies for that 
MD&gt; one, maybe?  At any rate, all of our paths are
MD&gt; relative; they have to 
MD&gt; be, based on client site preferences.

MD&gt; The __autoload appears to be a PHP5 item only; I
MD&gt; haven't stumbled across 
MD&gt; it so far.  But according to the manual page, it
MD&gt; doesn't function in 
MD&gt; CLI.  So not using that wouldn't really help, AFAICS.


MD&gt; Madeleine D.

__autoload works fine with php-5.2.2 cli on windows xp


-- 
regards,
Tom

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070613002619</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-06-13 00:26:19-0400</timestampReceived><subject>[PHP-GTK-DEV] More overrides</subject><body>

I've been back to writing php-gtk code and have found some missing 
functions that I need - first one here is GtkPixbuf::get_formats();  I 
just have it returning an array, wasn't sure if this would work or if 
you'd prefer a GtkPixbufFormat class to wrap the data in...

["gtk+.patch" (text/plain)]

Index: gdk.overrides
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/gdk.overrides,v
retrieving revision 1.75
diff -u -r1.75 gdk.overrides
--- gdk.overrides	11 Feb 2007 07:28:57 -0000	1.75
+++ gdk.overrides	13 Jun 2007 00:19:13 -0000
@@ -2198,6 +2198,58 @@
 }
 
 %%
+override gdk_pixbuf_get_formats
+PHP_METHOD
+{
+    GSList *list, *tmp;
+    zval *item, *mimes;
+    gchar *sval, **aval;
+    gint i;
+    GdkPixbufFormat *format;
+
+    list = gdk_pixbuf_get_formats();
+    array_init(return_value);
+    for (tmp = list; tmp != NULL; tmp = tmp-&gt;next) {
+        format = tmp-&gt;data;
+
+        MAKE_STD_ZVAL(item);
+        array_init(item);
+
+        sval = gdk_pixbuf_format_get_name(format);
+        add_assoc_string(item, "name", sval, 1);
+        g_free(sval);
+
+        sval = gdk_pixbuf_format_get_description(format);
+        add_assoc_string(item, "description", sval, 1);
+        g_free(sval);
+
+        aval = gdk_pixbuf_format_get_mime_types(format);
+        MAKE_STD_ZVAL(mimes);
+        array_init(mimes);
+        for (i = 0; aval[i] != NULL; i++) {
+            add_next_index_string(mimes, aval[i], 1);
+        }
+        add_assoc_zval(item, "description", mimes);
+        g_strfreev(aval);
+
+        aval = gdk_pixbuf_format_get_extensions(format);
+        MAKE_STD_ZVAL(mimes);
+        array_init(mimes);
+        for (i = 0; aval[i] != NULL; i++) {
+            add_next_index_string(mimes, aval[i], 1);
+        }
+        add_assoc_zval(item, "extensions", mimes);
+        g_strfreev(aval);
+
+        add_assoc_long(item, "is_writable", gdk_pixbuf_format_is_writable(format));
+        add_assoc_long(item, "is_scalable", gdk_pixbuf_format_is_scalable(format));
+
+        add_next_index_zval(return_value, item);
+    }
+    g_slist_free(list);
+}
+
+%%
 add-arginfo GdkPixbuf fill
 static
 ZEND_BEGIN_ARG_INFO_EX(ARGINFO_NAME, 0, 0, 1)



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070613235736</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-06-13 23:57:36-0400</timestampReceived><subject>[PHP-GTK-DEV] Beta: Call for testing</subject><body>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi All,

A beta version of PHP-GTK 2 is up for testing at:
http://www.kix.in/php-gtk2/php-gtk-2_0_0beta.tar.gz

Please do chime in with your installation reports. Once we have enough
feedback, a formal release shall be made; hopefully by this weekend.

Cheers,
- --
Anant Narayanan
http://www.kix.in/
gpg --recv-keys 0EF6914E
&lt;anant@kix.in,gentoo.org,php.net&gt;
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.7 (Darwin)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFGcIGgTon3xA72kU4RAjaPAJ4qgMTvRfthkwHkecWeNK+Vpt1lkwCfQ1kV
jfaOvFePAuJ0kmVwFkNF+rw=
=uqGx
-----END PGP SIGNATURE-----

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615061840</emailId><senderName>"Marc Quinton"</senderName><senderEmail>mquinton@gmail.com</senderEmail><timestampReceived>2007-06-15 06:18:40-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Beta: Call for testing</subject><body>


On 6/14/07, Anant Narayanan &lt;anant@kix.in&gt; wrote:
&gt;
&gt; Hi Marc,
&gt;
&gt; &gt; One problem is with GtkSpell. If confgure --with-spell I have this error
&gt; on
&gt; &gt; a GtkTextView widget ; I have this error for a long time now, so I can't
&gt; &gt; use GtkSpell widget.
&gt; &gt;
&gt; &gt; Fatal error: Call to undefined method GtkSpell::get_end_iter() in
&gt; &gt; /home/marc/.../IspMonitor.php on line 426
&gt;
&gt; I think you are trying to call the get_end_iter() method on a GtkSpell
&gt; object instead of the GtkTextBuffer:
&gt;
&gt; $x = new GtkTextBuffer();
&gt; $y = new GtkTextView($x);
&gt; $s = new GtkSpell($y);
&gt;
&gt; You would call get_end_iter() on $x, not $s:
&gt;
&gt; $x-&gt;get_end_iter();
&gt;
&gt; The GtkSpell widget does *not* extend a GtkTextView or GtkTextBuffer,
&gt; unlike GtkSourceView; it merely attaches itself to a GtkTextView.
&gt;
&gt;

yes, this is what I intend to do. I don't know how to reproduce this bug,
but when I create
a GtkTextview widget with glade in my ispMonitor projet,
GtkTextview-&gt;get_buffer()
return a GtkSpell widget. So I have created a small glade project very
similar to mine,
but I can't reproduce this.

So I have don't this to force GtkTextBuffer at initialisation :

  $this-&gt;textview_log-&gt;set_buffer(new GtkTextBuffer());


</body></email><email><emailId>20070619235601</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-06-19 23:56:01-0400</timestampReceived><subject>[PHP-GTK-DEV] Shared Extensions</subject><body>

Hi All,

Bob (Majdak Jr.) has figured out why shared extensions haven't been
working on *nix all this while, and I've traced the issue to this commit:

http://cvs.php.net/viewvc.cgi/php-gtk/ext/libglade/php_libglade.c?r1=1.7&amp;r2=1.8

That commit changes #ifdef PHP_GTK_COMPILE_DL_LIBGLADE to #ifdef
COMPILE_DL_LIBGLADE2. Apparently the windows build system defines
COMPILE_DL_&lt;extension&gt;2, but the *nix system is still defining
PHP_GTK_COMPILE_DL_&lt;extension&gt; whenever a shared extension is to be built.

This has carried on into all the other extensions too, with the result
being that none of them build as a shared .so on *nix.

Can we agree on a single #define please? :)

Cheers,
--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070620185747</emailId><senderName>       Fernando_Correa_da_Conceição</senderName><senderEmail></senderEmail><timestampReceived>2007-06-20 18:57:47-0400</timestampReceived><subject>[PHP-GTK-DEV] New version of the wix installer(again...)</subject><body>

I uploaded a new version of the installer, at 
http://fernando.viaserver.com.br/installer/
It have all files from the binary package, but I removed the folder 
"debug_pack", this reduce the size of the installer in 3 mb, as the vast 
base of user will not debug the php-gtk, I think we can provide this a 
separate download.

Please try it and report what you think.

What is missing (if is important...)

1. Split each translation. So you can install only your lang.
2. Add the PEAR.
3. A nice icon for the installer and the .phpw files
4. Split the extensions and dependencies, so you can install only the 
extensions you need.

Know problems (for me...):

1. I can not make the sourceview works correct, see this post by kksou:
http://www.kksou.com/php-gtk2/articles/use-GtkSourceView-to-display-source-code---Part-1.php

I used this but can not make it works.
Now I found the error, and it is in you package, Elizabeth. try this 
sample(from the url above) with your package and get an error like this:

Fatal error: Uncaught exception 'PhpGtkConstructException' with message 
'could not construct GtkSourceBuffer object' in
C:\teste.phpw:8
Stack trace:
#0 C:\teste.phpw(8): GtkSourceBuffer::new_with_language(NULL)
#1 {main}
  thrown in C:\teste.phpw on line 8

But using the language-specs from 1.6 as posted by kksou works fine. But 
we do not need add it to documents and settings(as kksou said), only 
change the ones that are in the package.

So after all this, please test the installer, but it do not contains the 
fix above(I found this while I am writing this email, so in the next 
version of the installer I will add it).

Fernando Correa da Conceição

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070622161308</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-06-22 16:13:08-0400</timestampReceived><subject>[PHP-GTK-DEV] GD as shared extension</subject><body>

I've been doing some work on getting GdkPixbuf::new_from_gd working with 
a shared gd as well as a static gd.  The attached patch contains the C 
portion of the fixes required for forcing gd to load before php-gtk2 - 
however, it will require some build fixes to work properly - which I am 
still messing with.

["php-gtk.patch" (text/plain)]

Index: ext/gtk+/gdk.overrides
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/gdk.overrides,v
retrieving revision 1.76
diff -u -r1.76 gdk.overrides
--- ext/gtk+/gdk.overrides	15 Jun 2007 21:06:31 -0000	1.76
+++ ext/gtk+/gdk.overrides	22 Jun 2007 13:39:57 -0000
@@ -1851,7 +1851,7 @@
 %%
 add GdkPixbuf new_from_gd ZEND_ACC_PUBLIC|ZEND_ACC_STATIC
 
-#if HAVE_GD_BUNDLED
+#if HAVE_GD
 #include "ext/gd/php_gd.h"
 #include "ext/gd/libgd/gd.h"
 #endif
@@ -1863,7 +1863,7 @@
 
 PHP_METHOD
 {
-#if HAVE_GD_BUNDLED
+#if HAVE_GD
     zval *php_gd;
     gdImagePtr gd;
     guint *data;
@@ -1941,7 +1941,7 @@
     phpg_gobject_new(&amp;return_value, (GObject *)pixbuf TSRMLS_CC);
     g_object_unref(pixbuf); /* phpg_gobject_new() increments reference count */
 #else
-    php_error(E_ERROR, "PHP-GTK was not compiled against PHP with bundled GD library");
+    php_error(E_ERROR, "PHP-GTK was not compiled with GD support");
 #endif
 }
 
Index: main/php_gtk.c
===================================================================
RCS file: /repository/php-gtk/main/php_gtk.c,v
retrieving revision 1.56
diff -u -r1.56 php_gtk.c
--- main/php_gtk.c	9 Sep 2006 17:58:57 -0000	1.56
+++ main/php_gtk.c	22 Jun 2007 13:38:26 -0000
@@ -41,6 +41,16 @@
 PHP_GTK_API GHashTable *php_gtk_class_hash = NULL;
 PHP_GTK_API zend_object_handlers php_gtk_handlers;
 
+/* {{{ php-gtk_deps
+ */
+#if ZEND_MODULE_API_NO &gt;= 20050922 &amp;&amp; HAVE_GD
+static zend_module_dep php_gtk_deps[] = {
+	ZEND_MOD_REQUIRED("gd")
+	{NULL, NULL, NULL}
+};
+#endif
+/* }}} */
+
 const gchar *phpg_class_id = "phpg_class";
 GQuark phpg_class_key = 0;
 GType G_TYPE_PHP_VALUE = 0;
@@ -48,7 +58,12 @@
 ZEND_DECLARE_MODULE_GLOBALS(gtk);
 
 zend_module_entry gtk_module_entry = {
+#if ZEND_MODULE_API_NO &gt;= 20050922 &amp;&amp; HAVE_GD
+	STANDARD_MODULE_HEADER_EX, NULL,
+	php_gtk_deps,
+#else
 	STANDARD_MODULE_HEADER,
+#endif
 	"php-gtk",
 	NULL,
 	PHP_MINIT(gtk),


-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070622162511</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-06-22 16:25:11-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GD as shared extension</subject><body>

What would be ideal is to have new_from_gd() work only if GD is  
loaded and simply output an error message if it's not. But I'm not  
sure if that is possible..

-Andrei


On Jun 22, 2007, at 9:13 AM, Elizabeth Smith wrote:

&gt; I've been doing some work on getting GdkPixbuf::new_from_gd working  
&gt; with a shared gd as well as a static gd.  The attached patch  
&gt; contains the C portion of the fixes required for forcing gd to load  
&gt; before php-gtk2 - however, it will require some build fixes to work  
&gt; properly - which I am still messing with.
&gt; Index: ext/gtk+/gdk.overrides
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/ext/gtk+/gdk.overrides,v
&gt; retrieving revision 1.76
&gt; diff -u -r1.76 gdk.overrides
&gt; --- ext/gtk+/gdk.overrides	15 Jun 2007 21:06:31 -0000	1.76
&gt; +++ ext/gtk+/gdk.overrides	22 Jun 2007 13:39:57 -0000
&gt; @@ -1851,7 +1851,7 @@
&gt;  %%
&gt;  add GdkPixbuf new_from_gd ZEND_ACC_PUBLIC|ZEND_ACC_STATIC
&gt;
&gt; -#if HAVE_GD_BUNDLED
&gt; +#if HAVE_GD
&gt;  #include "ext/gd/php_gd.h"
&gt;  #include "ext/gd/libgd/gd.h"
&gt;  #endif
&gt; @@ -1863,7 +1863,7 @@
&gt;
&gt;  PHP_METHOD
&gt;  {
&gt; -#if HAVE_GD_BUNDLED
&gt; +#if HAVE_GD
&gt;      zval *php_gd;
&gt;      gdImagePtr gd;
&gt;      guint *data;
&gt; @@ -1941,7 +1941,7 @@
&gt;      phpg_gobject_new(&amp;return_value, (GObject *)pixbuf TSRMLS_CC);
&gt;      g_object_unref(pixbuf); /* phpg_gobject_new() increments  
&gt; reference count */
&gt;  #else
&gt; -    php_error(E_ERROR, "PHP-GTK was not compiled against PHP with  
&gt; bundled GD library");
&gt; +    php_error(E_ERROR, "PHP-GTK was not compiled with GD support");
&gt;  #endif
&gt;  }
&gt;
&gt; Index: main/php_gtk.c
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/main/php_gtk.c,v
&gt; retrieving revision 1.56
&gt; diff -u -r1.56 php_gtk.c
&gt; --- main/php_gtk.c	9 Sep 2006 17:58:57 -0000	1.56
&gt; +++ main/php_gtk.c	22 Jun 2007 13:38:26 -0000
&gt; @@ -41,6 +41,16 @@
&gt;  PHP_GTK_API GHashTable *php_gtk_class_hash = NULL;
&gt;  PHP_GTK_API zend_object_handlers php_gtk_handlers;
&gt;
&gt; +/* {{{ php-gtk_deps
&gt; + */
&gt; +#if ZEND_MODULE_API_NO &gt;= 20050922 &amp;&amp; HAVE_GD
&gt; +static zend_module_dep php_gtk_deps[] = {
&gt; +	ZEND_MOD_REQUIRED("gd")
&gt; +	{NULL, NULL, NULL}
&gt; +};
&gt; +#endif
&gt; +/* }}} */
&gt; +
&gt;  const gchar *phpg_class_id = "phpg_class";
&gt;  GQuark phpg_class_key = 0;
&gt;  GType G_TYPE_PHP_VALUE = 0;
&gt; @@ -48,7 +58,12 @@
&gt;  ZEND_DECLARE_MODULE_GLOBALS(gtk);
&gt;
&gt;  zend_module_entry gtk_module_entry = {
&gt; +#if ZEND_MODULE_API_NO &gt;= 20050922 &amp;&amp; HAVE_GD
&gt; +	STANDARD_MODULE_HEADER_EX, NULL,
&gt; +	php_gtk_deps,
&gt; +#else
&gt;  	STANDARD_MODULE_HEADER,
&gt; +#endif
&gt;  	"php-gtk",
&gt;  	NULL,
&gt;  	PHP_MINIT(gtk),
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070620022617</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-06-20 02:26:17-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Shared Extensions</subject><body>

Hi Anant,

What took you guys so long anyway? ;)

COMPILE_DL_* is the PHP version of events, and PHP-GTK is a PHP extension. 
So of course, when writing my first and only extension, I copied the #define 
format I saw in php_gtk.c. After all, "It works on my box..."

Please don't commit any fixes without testing on both platforms first, in 
case that's been inadvertently used to distinguish between platforms 
somewhere deep in the source. But it's just a case of testing for 
extname=="php-gtk" in the EXTENSION() definition, where it says:

 cflags = "/D COMPILE_DL_" + EXT + "2 /D " + EXT + "_EXPORTS=1" + cflags;

and adapting accordingly.

- Steph


&gt; Hi All,
&gt;
&gt; Bob (Majdak Jr.) has figured out why shared extensions haven't been
&gt; working on *nix all this while, and I've traced the issue to this commit:
&gt;
&gt; http://cvs.php.net/viewvc.cgi/php-gtk/ext/libglade/php_libglade.c?r1=1.7&amp;r2=1.8
&gt;
&gt; That commit changes #ifdef PHP_GTK_COMPILE_DL_LIBGLADE to #ifdef
&gt; COMPILE_DL_LIBGLADE2. Apparently the windows build system defines
&gt; COMPILE_DL_&lt;extension&gt;2, but the *nix system is still defining
&gt; PHP_GTK_COMPILE_DL_&lt;extension&gt; whenever a shared extension is to be built.
&gt;
&gt; This has carried on into all the other extensions too, with the result
&gt; being that none of them build as a shared .so on *nix.
&gt;
&gt; Can we agree on a single #define please? :)
&gt;
&gt; Cheers,
&gt; --
&gt; Anant
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070620024005</emailId><senderName>bob majdak jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-06-20 02:40:05-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Shared Extensions</subject><body>

LOL.
The way I was told, it used to work fine in Linux until someone went and 
fixed it for Windows, so I went and told the group of kids behind the 
drugstore who are anti-microsoft-without-a-cause the whole story without 
thinking twice.

&lt;winky face emoticon&gt;

I have crafted a fix which, "works on my box" without touching the main 
source at all, just the m4 file so Windows would not be affected. 
However Anant had some concerns about it that were over my head since it 
works without problems here, I will let him express those. It is 
attached to this thing :p

I have only actually tested it on GtkExtra, GtkSourceView, and LibSexy. 
However as I already told Anant we also need to modify it so that the 
extensions are not "extra.so",  "sourceview.so" and "libsexy.so" as they 
need some sort of prefix. I believe windows already does this.

- bob.

Steph Fox wrote:
&gt; Hi Anant,
&gt; 
&gt; What took you guys so long anyway? ;)
&gt; 
&gt; COMPILE_DL_* is the PHP version of events, and PHP-GTK is a PHP 
&gt; extension. So of course, when writing my first and only extension, I 
&gt; copied the #define format I saw in php_gtk.c. After all, "It works on my 
&gt; box..."
&gt; 
&gt; Please don't commit any fixes without testing on both platforms first, 
&gt; in case that's been inadvertently used to distinguish between platforms 
&gt; somewhere deep in the source. But it's just a case of testing for 
&gt; extname=="php-gtk" in the EXTENSION() definition, where it says:
&gt; 
&gt; cflags = "/D COMPILE_DL_" + EXT + "2 /D " + EXT + "_EXPORTS=1" + cflags;
&gt; 
&gt; and adapting accordingly.
&gt; 
&gt; - Steph
&gt; 
&gt; 
&gt;&gt; Hi All,
&gt;&gt;
&gt;&gt; Bob (Majdak Jr.) has figured out why shared extensions haven't been
&gt;&gt; working on *nix all this while, and I've traced the issue to this commit:
&gt;&gt;
&gt;&gt; http://cvs.php.net/viewvc.cgi/php-gtk/ext/libglade/php_libglade.c?r1=1.7&amp;r2=1.8 
&gt;&gt;
&gt;&gt;
&gt;&gt; That commit changes #ifdef PHP_GTK_COMPILE_DL_LIBGLADE to #ifdef
&gt;&gt; COMPILE_DL_LIBGLADE2. Apparently the windows build system defines
&gt;&gt; COMPILE_DL_&lt;extension&gt;2, but the *nix system is still defining
&gt;&gt; PHP_GTK_COMPILE_DL_&lt;extension&gt; whenever a shared extension is to be 
&gt;&gt; built.
&gt;&gt;
&gt;&gt; This has carried on into all the other extensions too, with the result
&gt;&gt; being that none of them build as a shared .so on *nix.
&gt;&gt;
&gt;&gt; Can we agree on a single #define please? :)
&gt;&gt;
&gt;&gt; Cheers,
&gt;&gt; -- 
&gt;&gt; Anant
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;&gt;
&gt; 

["phpgtk2-linuxsharedext.diff" (text/x-patch)]

--- php-gtk-beta/php_gtk.m4	2007-05-22 12:21:24.000000000 -0400
+++ php-gtk-betabob/php_gtk.m4	2007-06-19 19:50:13.000000000 -0400
@@ -498,7 +498,7 @@
 	ifelse($3,,,PHP_ADD_SOURCES_X($php_gtk_ext_builddir,$3,$ac_extra,[shared_objects_]translit($1,a-z-+,A-Z__),yes))
  ifelse($4,,,PHP_ADD_SOURCES_X(/ext/$1,$4,$ac_extra,[shared_objects_]translit($1,a-z-+,A-Z__),yes))
  PHP_SHARED_MODULE($1,[shared_objects_]translit($1,a-z-+,A-Z__), \
                $php_gtk_ext_builddir)
-	AC_DEFINE_UNQUOTED([PHP_GTK_COMPILE_DL_]translit($1,a-z-+,A-Z__), 1, Whether to \
build $1 as dynamic module) \
+	AC_DEFINE_UNQUOTED([COMPILE_DL_]translit($1,a-z-+,A-Z__)[2], 1, Whether to build $1 \
as dynamic module)  fi
 
   for f in $4; do



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615071356</emailId><senderName>"Marc Quinton"</senderName><senderEmail>mquinton@gmail.com</senderEmail><timestampReceived>2007-06-15 07:13:56-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Beta: Call for testing</subject><body>


On 6/15/07, Marc Quinton &lt;mquinton@gmail.com&gt; wrote:
&gt;
&gt;
&gt; yes, this is what I intend to do. I don't know how to reproduce this bug,
&gt; but when I create
&gt; a GtkTextview widget with glade in my ispMonitor projet,
&gt; GtkTextview-&gt;get_buffer()
&gt; return a GtkSpell widget. So I have created a small glade project very
&gt; similar to mine,
&gt; but I can't reproduce this.
&gt;
&gt; So I have don't this to force GtkTextBuffer at initialisation :
&gt;
&gt;   $this-&gt;textview_log-&gt;set_buffer(new GtkTextBuffer());
&gt;


here is a simple  example of my problem :  http://php-gtk.pastebin.ca/568019
when you click on Info, you should have GtkTextBuffer, not GtkSpell for
the second line. If not, this is a problem on my linux desktop (ubuntu
feisty).


</body></email><email><emailId>20070621204655</emailId><senderName>bob majdak jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-06-21 20:46:55-0400</timestampReceived><subject>[PHP-GTK-DEV] patch: GtkTreeView::get_drag_dest_row</subject><body>

With current PHP-GTK (beta tarball) I can crash the application 
consistently like so:

	$tree-&gt;connect('drag-motion',array($this,'drag_motion'));

	drag_motion($widget) {
		$dest = $widget-&gt;get_drag_dest_row();
		print_r($dest);
	}

the first time you drag a row, it works. the second time, segfault. 
editing the method like so:

	drag_motion($widget) {
		$dest = $widget-&gt;get_drag_dest_row();
		print_r($dest);
		$dest = null;
	}

it crashes less frequently, but still crashes. however it should be noted:

	drag_motion($widget) {
		print_r($widget-&gt;get_drag_dest_row());
	}

that method never crashes.

So, I have rewritten that method override and now it is not crashing at 
all. Attached a patch is, mmm. Also: what do I need to do to get that 
method in the documentation, set_drag_dest_row() is but 
get_drag_dest_row() is not.

I am also interested in getting 2.10 stuff in the documentation like 
GtkStatusIcon.

Bob Majdak Jr
KateOS ROFLCOPTER Pilot

["gtktreeview-get_drag_dest_row-bob.diff" (text/x-patch)]

--- php-gtk-2.0.0beta/ext/gtk+/gtktreeview.overrides	2007-02-03 10:26:13.000000000 -0500
+++ php-gtk-2.0.0beta-omg/ext/gtk+/gtktreeview.overrides	2007-06-21 16:25:33.000000000 -0400
@@ -2703,26 +2703,23 @@
 {
     GtkTreePath *path;
     GtkTreeViewDropPosition pos;
-	zval *php_path = NULL;
+    zval *php_path = NULL;
 
     NOT_STATIC_METHOD();
-
+    
     if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "")) {
         return;
     }
 
     gtk_tree_view_get_drag_dest_row(GTK_TREE_VIEW(PHPG_GOBJECT(this_ptr)), &amp;path, &amp;pos);
 
-   array_init(return_value);
-
-    if (path) {
+    if(path) {
         phpg_tree_path_to_zval(path, &amp;php_path TSRMLS_CC);
+        gtk_tree_path_free(path);
+        php_gtk_build_value(&amp;return_value, "(Ni)", php_path, (gint)pos);
     } else {
-        MAKE_STD_ZVAL(php_path);
-    }
-    add_next_index_zval(return_value, php_path);
-
-    add_next_index_long(return_value, pos);
+        RETURN_FALSE;
+    }    
 }
 
 %%



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615121829</emailId><senderName>"=?ISO-8859-15?Q?Andr=E9_Jansen?="</senderName><senderEmail>theflyingdutchman@iol.it</senderEmail><timestampReceived>2007-06-15 12:18:29-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Beta: Call for testing</subject><body>

On 13 Jun 2007 at 23:42, Elizabeth Smith wrote:

&gt; Windows builds of the beta tarball are available from
&gt; 
&gt; http://perisama.net/php-gtk2-beta
&gt; 
&gt; The zip files include the entire gtk runtime, php binaries, and 
&gt; php-gtk2.  You should be able to unzip and run.  The 2.6.9 version is for
&gt; Win 95/98 users and has no extensions.  The 2.10.12 version has all
&gt; extensions plus dependent files (which is why it's so large, gtkhtml alone
&gt; is very big).  Yell if it breaks.

Running the 2.10.12 on Win2kSP4, alongside a customized Gnope install.

After the usual minor tweaks to php-cli.ini, I can see the new widgets in 
DevInspector, and I can instantiate most of them. A handful of simple 
apps run OK.

Some of the GtkExtra widgets (e.g. GtkFontCombo) use xpm type icons, when 
I try to instantiate these I get complaints along the lines of:

GdkPixbuf-WARNING **: Error loading XPM image loader: Image type 'xpm' is 
not supported

Which is kinda weird because libpixbufloader-xpm.dll *is* present in the 
location specified by \etc\gtk-2.0\gdk-pixbuf.loaders.

Some widgets just bomb, e.g. trying to instantiate GtkHTML does not 
return any error message but php.exe exits with a non zero return value 
(a large negative integer). May well be I'm doing something wrong 
however.

Any pointers to documentation on GtkHTML, GtkExtra and LibSexy 
("pornography ?" ;-)) would be most welcome. In particular, GtkPlot 
sounds very interesting, but I do not have the faintest idea on how to 
use it.

A big thank you to Anant &amp; Elizabeth for doing the grunt work.

Cheers,
-- 
André
===========================================================
"There are but two things infinite: the universe and human stupidity, and 
I'm not sure about the former."
	Albert Einstein

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070615132907</emailId><senderName>"Marc Quinton"</senderName><senderEmail>mquinton@gmail.com</senderEmail><timestampReceived>2007-06-15 13:29:07-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Beta: Call for testing</subject><body>


On 6/15/07, Marc Quinton &lt;mquinton@gmail.com&gt; wrote:
&gt;
&gt;
&gt; here is a simple  example of my problem :
&gt; http://php-gtk.pastebin.ca/568019
&gt; when you click on Info, you should have GtkTextBuffer, not GtkSpell for
&gt; the second line. If not, this is a problem on my linux desktop (ubuntu
&gt; feisty).
&gt;


this is not a glade problem, because, I have same problem here with this
code.
   http://php.pastebin.com/929589


you can run this test script and change $test to 1,2 or 3.
1 - is how to use GtkSpell,
2 - is how to create standard GtkTextview ; $textview-&gt;get_buffer() should
return a GtkTextbuffer
widget class, but returns an instance of GtkSpell,
3 - is a way to override this bug.

So :
 - it is a bug ; should not replace a textbuffer with a GtkSpell instance
 - it's normal way to proceed and GtkSpell should inherit from
GtkTextbuffer, not GtkTextview.


</body></email><email><emailId>20070615133125</emailId><senderName>Elizabeth Smith</senderName><senderEmail>emsmith@elizabethmariesmith.com</senderEmail><timestampReceived>2007-06-15 13:31:25-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Beta: Call for testing</subject><body>


&gt; this is not a glade problem, because, I have same problem here with this
&gt; code.
&gt;   http://php.pastebin.com/929589
&gt;
&gt;
&gt; you can run this test script and change $test to 1,2 or 3.
&gt; 1 - is how to use GtkSpell,
&gt; 2 - is how to create standard GtkTextview ; $textview-&gt;get_buffer() 
&gt; should
&gt; return a GtkTextbuffer
&gt; widget class, but returns an instance of GtkSpell,
&gt; 3 - is a way to override this bug.
&gt;
&gt; So :
&gt; - it is a bug ; should not replace a textbuffer with a GtkSpell instance
&gt; - it's normal way to proceed and GtkSpell should inherit from
&gt; GtkTextbuffer, not GtkTextview.
&gt;
That's very odd, since gtkspell is supposed to ATTACH itself to a 
gtktextview - not extend it - so gtkspell should probably not inherit 
from anything - which may be a pain because it does not have it's own gtype

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615160304</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-06-15 16:03:04-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Beta: Call for testing</subject><body>

Marc Quinton wrote:
&gt;&gt; here is a simple  example of my problem :
&gt;&gt; http://php-gtk.pastebin.ca/568019
&gt;&gt; when you click on Info, you should have GtkTextBuffer, not GtkSpell for
&gt;&gt; the second line. If not, this is a problem on my linux desktop (ubuntu
&gt;&gt; feisty).
&lt;snip&gt;
&gt; you can run this test script and change $test to 1,2 or 3.
&gt; 1 - is how to use GtkSpell,
&gt; 2 - is how to create standard GtkTextview ; $textview-&gt;get_buffer() should
&gt; return a GtkTextbuffer
&gt; widget class, but returns an instance of GtkSpell,
&gt; 3 - is a way to override this bug.

Thanks Marc for the detailed info. Take a fresh CVS checkout and confirm
that the bug is fixed now. I ran your script and $test = 1 gives me:
buffer class = GtkTextBuffer.

..amidst a few GObject assertion errors, ignore those for now  ;).
Upstream GtkSpell doesn't provide a GType for the widget, we have to
find some way to work around that.

Cheers,
-- 
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070616160422</emailId><senderName>"Marc Quinton"</senderName><senderEmail>mquinton@gmail.com</senderEmail><timestampReceived>2007-06-16 16:04:22-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Beta: Call for testing</subject><body>


On 6/14/07, Anant Narayanan &lt;anant@kix.in&gt; wrote:
&gt;
&gt;
&gt;
&gt; A beta version of PHP-GTK 2 is up for testing at:
&gt; http://www.kix.in/php-gtk2/php-gtk-2_0_0beta.tar.gz
&gt;
&gt; Please do chime in with your installation reports. Once we have enough
&gt; feedback, a formal release shall be made; hopefully by this weekend.



for your information, CVS version does not compile on old version of ubuntu
(Dapper
and Edgy). I have build minimal developpement environment using debootstrap.
Both use a little older version of Gtk+.

  dapper : Gtk+ 2.8.17-1ubuntu5
  edgy :   Gtk+ 2.10.6-0ubuntu3
  feisty :  Gtk+ 2.10.11-0ubuntu3 (current version)

You can find compilation log at this address for Edgy :
http://php-gtk.pastebin.ca/570146
It is not really important to solve this problem. We can focus on recent
linux distributions.


</body></email><email><emailId>20070616162901</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-06-16 16:29:01-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Beta: Call for testing</subject><body>

Marc Quinton wrote:
&gt; for your information, CVS version does not compile on old version of ubuntu
&gt; (Dapper
&gt; and Edgy). I have build minimal developpement environment using 
&gt; debootstrap.
&gt;  Both use a little older version of Gtk+.

Does the beta tarball compile cleanly?

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070616170607</emailId><senderName>"Marc Quinton"</senderName><senderEmail>mquinton@gmail.com</senderEmail><timestampReceived>2007-06-16 17:06:07-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Beta: Call for testing</subject><body>


On 6/16/07, Anant Narayanan &lt;anant@kix.in&gt; wrote:
&gt;
&gt;
&gt; Does the beta tarball compile cleanly?
&gt;
&gt;
there is exactly same error ; you can find log at :
http://php-gtk.pastebin.ca/570283


</body></email><email><emailId>20070616185337</emailId><senderName>"=?ISO-8859-15?Q?Andr=E9_Jansen?="</senderName><senderEmail>theflyingdutchman@iol.it</senderEmail><timestampReceived>2007-06-16 18:53:37-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Beta: Call for testing</subject><body>

On 15 Jun 2007 at 8:30, Elizabeth Smith wrote:

&gt; André Jansen wrote:
&gt; &gt; Running the 2.10.12 on Win2kSP4, alongside a customized Gnope install.

&gt; If you're running alongside gnope you'll have a gtk runtime in your PATH 
&gt; which may mess things up

Actually there were *2* gtk runtimes in my path: I also have the Gimp 
installed, which uses gtk 2.4...
Just to make sure, I temporarily removed both from my %PATH%.

&gt; &gt; After the usual minor tweaks to php-cli.ini, I can see the new widgets in 
&gt; &gt; DevInspector, and I can instantiate most of them. A handful of simple 
&gt; &gt; apps run OK.
&gt; &gt;
&gt; &gt; Some of the GtkExtra widgets (e.g. GtkFontCombo) use xpm type icons, when 
&gt; &gt; I try to instantiate these I get complaints along the lines of:
&gt; &gt;
&gt; &gt; GdkPixbuf-WARNING **: Error loading XPM image loader: Image type 'xpm' is 
&gt; &gt; not supported
&gt; &gt;   
&gt; haven't a clue on that on, I don't use xpm a lot - have you tried just a 
&gt; normal xpm image on your own? it may be a gtkextra bug

I tried loading a moz icon from nvu into a GdkPixbuf, and setting a 
GtkImage with that. This shouldn't touch GtkExtra...

$px = GdkPixbuf::new_from_file('default.xpm');
$win-&gt;add($img = new GtkImage());
$img-&gt;set_from_pixbuf($px);

Running the test script through the gnope install rendered the icon OK.
The beta install turned up the following error instead:

Fatal error: Uncaught exception 'PhpGtkGErrorException' with message 
'Failed to load image 'default.xpm': Invalid XBM file'

Note the error message says 'Invalid XBM file', which is correct because 
the icon is an *XPM* file. :-) I wonder if GdkPixbuf is mistakenly trying 
to load the XPM image with the XBM loader?

&gt; &gt; Some widgets just bomb, e.g. trying to instantiate GtkHTML does not 
&gt; &gt; return any error message but php.exe exits with a non zero return value 
&gt; &gt; (a large negative integer). May well be I'm doing something wrong 
&gt; &gt; however.
&gt; &gt;
&gt; &gt;   
&gt; Please read the whole thread - I quote
&gt; There's a trick to gtkhtml -

Missed that one... :-(

&gt; GtkHtml requires GConf to be running in order to work right.
&gt; 
&gt; You should see a file named gconfd-2.exe - That needs to be running in 
&gt; order for gtkhtml to work. There are two ways to accomplish this. You 
&gt; can call php.exe using the following syntax
&gt; 
&gt; gconfd-2 | php myscript.php
&gt; 
&gt; or you can use exec or popen or proc_open in your script, before you 
&gt; call new GtkHtml, to start gconfd-2.exe
&gt; 
&gt; Kind of annoying, but it's a gnome thing.

Tried the following:

exec("start D:\\phpgtk2b\\gconfd-2.exe");
$win-&gt;add($foo = new GtkHTML());

...and several variants including popen().

No Luck:

GConf Error: Failed to launch configuration server: Failed to execute 
helper program (No such file or directory)

(php.exe:1268): Gdk-WARNING **: gdkselection-win32.c:1068: OpenClipboard 
failed: Invalid window handle.

gconfd does run, sits there for a while then exits. Immediately after, I 
get a Windoze error dialog, on dismissal php exits with return value 3.

I put the path to the install dir in my %PATH% just in case, but still no 
luck.

Cheers,
-- 
André
===========================================================
Black Holes were created when God divided by zero.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070616195707</emailId><senderName>"Marc Quinton"</senderName><senderEmail>mquinton@gmail.com</senderEmail><timestampReceived>2007-06-16 19:57:07-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Beta: Call for testing</subject><body>


On 6/16/07, Elizabeth Smith &lt;emsmith@elizabethmariesmith.com&gt; wrote:
&gt;
&gt; Marc Quinton wrote:
&gt; &gt; On 6/16/07, Anant Narayanan &lt;anant@kix.in&gt; wrote:
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; Does the beta tarball compile cleanly?
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt; there is exactly same error ; you can find log at :
&gt; &gt; http://php-gtk.pastebin.ca/570283
&gt; &gt;
&gt; did you check to make sure the generated files were written correctly?
&gt; That would be the first place I'd look.
&gt;


this is not a generation problem, so not a problem with generator :
 - generated code from Feisty does not compile on Edgy,
 - and generated code from Edgy compile on Feisty.

So generator can't be blamed, but I can't understand where probleme is.


</body></email><email><emailId>20070616204359</emailId><senderName>"Marc Quinton"</senderName><senderEmail>mquinton@gmail.com</senderEmail><timestampReceived>2007-06-16 20:43:59-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Beta: Call for testing</subject><body>

On 6/16/07, Marc Quinton &lt;mquinton@gmail.com&gt; wrote:
&gt;
&gt;
&gt;
&gt; for your information, CVS version does not compile on old version of ubuntu (Dapper
&gt; and Edgy). I have build minimal developpement environment using debootstrap.
&gt; Both use a little older version of Gtk+.

finaly, with great help from Elisabeth, it seems that php version is
the problem. So
I will try to compile a new version of php.

see you next ;-)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070616204828</emailId><senderName>       Fernando_Correa_da_Conceição</senderName><senderEmail></senderEmail><timestampReceived>2007-06-16 20:48:28-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Beta: Call for testing</subject><body>

Marc Quinton escreveu:
&gt; On 6/16/07, Elizabeth Smith &lt;emsmith@elizabethmariesmith.com&gt; wrote:
&gt;&gt;
&gt;&gt; Marc Quinton wrote:
&gt;&gt; &gt; On 6/16/07, Anant Narayanan &lt;anant@kix.in&gt; wrote:
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; Does the beta tarball compile cleanly?
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt; there is exactly same error ; you can find log at :
&gt;&gt; &gt; http://php-gtk.pastebin.ca/570283
&gt;&gt; &gt;
&gt;&gt; did you check to make sure the generated files were written correctly?
&gt;&gt; That would be the first place I'd look.
&gt;&gt;
&gt;
&gt;
&gt; this is not a generation problem, so not a problem with generator :
&gt; - generated code from Feisty does not compile on Edgy,

Maybe feisty uses gtk 2.10 and Edgy uses 2.8?
So when you compile it tries to use something that there is on 2.10 and 
not exist on 2.8
&gt; - and generated code from Edgy compile on Feisty.
Because everything from 2.8 is inside 2.10?
&gt;
&gt; So generator can't be blamed, but I can't understand where probleme is.
&gt;
Try a fresh checkout on from cvs on both, and not use the same dir you 
build in one to build in another.

Fernando Correa da Conceição

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070617092035</emailId><senderName>"Marc Quinton"</senderName><senderEmail>mquinton@gmail.com</senderEmail><timestampReceived>2007-06-17 09:20:35-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Beta: Call for testing</subject><body>

On 6/16/07, Marc Quinton &lt;mquinton@gmail.com&gt; wrote:
&gt; finaly, with great help from Elisabeth, it seems that php version is
&gt; the problem. So
&gt; I will try to compile a new version of php.

so php-gtk can be compiled with a fresh php installation even on old
edgy. Nice work.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070614034243</emailId><senderName>Elizabeth Smith</senderName><senderEmail>emsmith@elizabethmariesmith.com</senderEmail><timestampReceived>2007-06-14 03:42:43-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

Windows builds of the beta tarball are available from

http://perisama.net/php-gtk2-beta

The zip files include the entire gtk runtime, php binaries, and 
php-gtk2.  You should be able to unzip and run.  The 2.6.9 version is 
for Win 95/98 users and has no extensions.  The 2.10.12 version has all 
extensions plus dependent files (which is why it's so large, gtkhtml 
alone is very big).  Yell if it breaks.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070614073802</emailId><senderName>"Sjoerd Linders"</senderName><senderEmail>sjoerd@funsoftware.nl</senderEmail><timestampReceived>2007-06-14 07:38:02-0400</timestampReceived><subject>RE: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

Hi all,

the download and installation works FINE on my WINDOWS XP HOME EDITION SP2 to run the 'phpgtk2-demo.php',
keep on the GOOD work!!!

For further testing watch that you enable the ride extensions in 'php-cli.ini'.

Thank u all,
Sjoerd Linders


-----Oorspronkelijk bericht-----
Van: Elizabeth Smith [mailto:emsmith@elizabethmariesmith.com]
Verzonden: Thursday, June 14, 2007 05:43
Aan: Anant Narayanan
CC: PHP-GTK dev; PHP-GTK gen
Onderwerp: Re: [PHP-GTK-DEV] Beta: Call for testing


Windows builds of the beta tarball are available from

http://perisama.net/php-gtk2-beta

The zip files include the entire gtk runtime, php binaries, and 
php-gtk2.  You should be able to unzip and run.  The 2.6.9 version is 
for Win 95/98 users and has no extensions.  The 2.10.12 version has all 
extensions plus dependent files (which is why it's so large, gtkhtml 
alone is very big).  Yell if it breaks.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070614221525</emailId><senderName>       Fernando Correa da Conceição</senderName><senderEmail></senderEmail><timestampReceived>2007-06-14 22:15:25-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

Elizabeth Smith escreveu:
&gt; Windows builds of the beta tarball are available from
&gt;
&gt; http://perisama.net/php-gtk2-beta
&gt;
&gt; The zip files include the entire gtk runtime, php binaries, and 
&gt; php-gtk2.  You should be able to unzip and run.  The 2.6.9 version is 
&gt; for Win 95/98 users and has no extensions.  The 2.10.12 version has 
&gt; all extensions plus dependent files (which is why it's so large, 
&gt; gtkhtml alone is very big).  Yell if it breaks.
&gt;
I will work on a installer using wix(I download yours and use it as a 
base), since the one using nsis was rejected :).
I make the wix runs for me now. Thank you.

Elizabeth, there is a folder called debug-pack, I think that it contain 
files used only for debug. And it takes too much space, 14,7 mb 
uncompressed, can not you remove it, or it is used in a release version? 
I do not know which kind of file is .pdb.

Fernando Correa da Conceição

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070614225233</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-06-14 22:52:33-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

Fernando Correa da Conceição wrote:

&gt; Elizabeth, there is a folder called debug-pack, I think that it contain 
&gt; files used only for debug. And it takes too much space, 14,7 mb 
&gt; uncompressed, can not you remove it, or it is used in a release version? 
&gt; I do not know which kind of file is .pdb.
&gt; 
&gt; Fernando Correa da Conceição

.pdb are debug databases for windows - you don't need them unless you 
crash php-gtk2 and we ask for a backtrace - here's a quick blog post on 
how to use them (thanks pierre)

http://blog.thepimp.net/index.php/post/2007/06/10/debug-pack-or-how-to-generate-backtrack-on-windows-without-compiling


They should really only be installed with a "full" install with the msi, 
and I'll probably put them in a separate download for the final release, 
but they're very handy to have around ;)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070614230313</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-06-14 23:03:13-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

I'm just wondering how it's quadrupled since alpha?

I agree with you Elizabeth - with it being that size, definitely keep it as 
a separate download. The idea was never to compete with the JRE for bulk :)

- Steph

----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: &lt;php-gtk-dev@lists.php.net&gt;; &lt;php-gtk-general@lists.php.net&gt;
Sent: Thursday, June 14, 2007 11:52 PM
Subject: Re: [PHP-GTK-DEV] Beta: Call for testing


&gt; Fernando Correa da Conceição wrote:
&gt; 
&gt; &gt; Elizabeth, there is a folder called debug-pack, I think that it contain 
&gt; &gt; files used only for debug. And it takes too much space, 14,7 mb 
&gt; &gt; uncompressed, can not you remove it, or it is used in a release version? 
&gt; &gt; I do not know which kind of file is .pdb.
&gt; &gt; 
&gt; &gt; Fernando Correa da Conceição
&gt; 
&gt; .pdb are debug databases for windows - you don't need them unless you 
&gt; crash php-gtk2 and we ask for a backtrace - here's a quick blog post on 
&gt; how to use them (thanks pierre)
&gt; 
&gt; http://blog.thepimp.net/index.php/post/2007/06/10/debug-pack-or-how-to-generate-backtrack-on-windows-without-compiling
&gt;  
&gt; They should really only be installed with a "full" install with the msi, 
&gt; and I'll probably put them in a separate download for the final release, 
&gt; but they're very handy to have around ;)
&gt; 
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070614230545</emailId><senderName>Elizabeth Smith</senderName><senderEmail>emsmith@elizabethmariesmith.com</senderEmail><timestampReceived>2007-06-14 23:05:45-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

Steph Fox wrote:
&gt; I'm just wondering how it's quadrupled since alpha?
&gt;
&gt; I agree with you Elizabeth - with it being that size, definitely keep 
&gt; it as a separate download. The idea was never to compete with the JRE 
&gt; for bulk :)
&gt;
&gt; - Steph
I think it might be a smart idea to separate out the extensions and 
their runtime components (for example, gtkhtml has an ENORMOUS number of 
files needed - like most of bonobo and gconf - just to run).  But the 
alpha didn't have any of the php binary files, and these do (plus the 
alpha was missing some runtime files, and 2.10 is a lot bigger than 
2.6.9) so take that into account when comparing sizes.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070614231532</emailId><senderName>"Madeleine D."</senderName><senderEmail>chezmmd@yahoo.com</senderEmail><timestampReceived>2007-06-14 23:15:32-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>



I setup and ran the 2.6.9 zip version on one of our
Win98SE's.  Went 
very smooth on the install.  Nice job.

Only thing that struck me is that the demo seemed a
little slow to 
load.  I had an earlier version from Steph that only
took about 4 secs; 
this one took 8 secs. 

No big deal.  Just a note for what it's worth.

I'll carve out some time in the next few days to test
the Gtk2 app I'm 
working on.


thanks,
Madeleine D.



Elizabeth Smith wrote:

&gt; Windows builds of the beta tarball are available
from
&gt;
&gt; http://perisama.net/php-gtk2-beta
&gt;
&gt; The zip files include the entire gtk runtime, php
binaries, and 
&gt; php-gtk2.  You should be able to unzip and run.  The
2.6.9 version is 
&gt; for Win 95/98 users and has no extensions.  The
2.10.12 version has 
&gt; all extensions plus dependent files (which is why
it's so large, 
&gt; gtkhtml alone is very big).  Yell if it breaks.
&gt;


       
____________________________________________________________________________________
Building a website is a piece of cake. Yahoo! Small Business gives you all the tools to get online.
http://smallbusiness.yahoo.com/webhosting 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070614231954</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-06-14 23:19:54-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

Hey Madeleine,

&gt; Only thing that struck me is that the demo seemed a
&gt; little slow to
&gt; load.  I had an earlier version from Steph that only
&gt; took about 4 secs;
&gt; this one took 8 secs.

Can you remember off-hand, was that a non-ZTS version I sent you that was 
faster?

(I can't remember, and my mail client had a nasty compression accident 
lately so it's a pain to check here)

- Steph 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070614231955</emailId><senderName>Elizabeth Smith</senderName><senderEmail>emsmith@elizabethmariesmith.com</senderEmail><timestampReceived>2007-06-14 23:19:55-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

Madeleine D. wrote:
&gt; I setup and ran the 2.6.9 zip version on one of our
&gt; Win98SE's.  Went 
&gt; very smooth on the install.  Nice job.
&gt;
&gt; Only thing that struck me is that the demo seemed a
&gt; little slow to 
&gt; load.  I had an earlier version from Steph that only
&gt; took about 4 secs; 
&gt; this one took 8 secs. 
&gt;
&gt; No big deal.  Just a note for what it's worth.
&gt;
&gt; I'll carve out some time in the next few days to test
&gt; the Gtk2 app I'm 
&gt; working on.
&gt;
&gt;
&gt; thanks,
&gt; Madeleine D.
&gt;   
Actually that slowdown is not limited to just the 2.6.9 libs - I've also 
noticed a gradual slowdown as well but I have no idea what's causing 
it.  The biggest slowdown happened when jumping from PHP 5.1.x to 5.2.x 
- this is built against PHP 5.2.3 right now.  I can try a build against 
the 5.1.x branch to see if the slowdown is something php-gtk2 is doing 
or if it's something PHP is doing - but probably not until this weekend.

And as Steph said (in something that just popped into my mailbox) I can 
do a non-zts build which is 30% faster or more.  (If you're really brave 
I can do a MSVC8 build as well which really speeds things up - cli 
doesn't have any of the extension loading issues with the newer compiler 
that plagued other SAPIS - however I'm not sure how nice MSVC8 plays 
with WIN95/98)  I also am doing "stock builds" atm - I can start 
chopping out stuff in PHP that php-gtk2 really doesn't use (session? 
json?) as well to save size (I have no idea if it affects speed)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070614233319</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-06-14 23:33:19-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

It doesn't play nice, it's a different MS runtime. But non-ZTS would be 
helpful.

There wasn't a noticeable slowdown in PHP 5.2.0 - well not one I noticed 
anyway - so it might be more recent than that. There have been bits and 
pieces of info that might help pick out a pattern there... if anyone has 
time for that I'm still covering internals@ at a rate of roughly one column 
inch per day (but closely) in the Zend weeklies, and that's a fairly good 
place to start tracking down relevant threads.

Sorry if that sounds like an ad, it's just that writing those summaries is 
the only reason this isn't complete news to me.

- Steph

----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: "Madeleine D." &lt;chezmmd@yahoo.com&gt;
Cc: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
Sent: Friday, June 15, 2007 12:19 AM
Subject: Re: [PHP-GTK-DEV] Beta: Call for testing


&gt; Madeleine D. wrote:
&gt;&gt; I setup and ran the 2.6.9 zip version on one of our
&gt;&gt; Win98SE's.  Went very smooth on the install.  Nice job.
&gt;&gt;
&gt;&gt; Only thing that struck me is that the demo seemed a
&gt;&gt; little slow to load.  I had an earlier version from Steph that only
&gt;&gt; took about 4 secs; this one took 8 secs.
&gt;&gt; No big deal.  Just a note for what it's worth.
&gt;&gt;
&gt;&gt; I'll carve out some time in the next few days to test
&gt;&gt; the Gtk2 app I'm working on.
&gt;&gt;
&gt;&gt;
&gt;&gt; thanks,
&gt;&gt; Madeleine D.
&gt;&gt;
&gt; Actually that slowdown is not limited to just the 2.6.9 libs - I've also 
&gt; noticed a gradual slowdown as well but I have no idea what's causing it. 
&gt; The biggest slowdown happened when jumping from PHP 5.1.x to 5.2.x - this 
&gt; is built against PHP 5.2.3 right now.  I can try a build against the 5.1.x 
&gt; branch to see if the slowdown is something php-gtk2 is doing or if it's 
&gt; something PHP is doing - but probably not until this weekend.
&gt;
&gt; And as Steph said (in something that just popped into my mailbox) I can do 
&gt; a non-zts build which is 30% faster or more.  (If you're really brave I 
&gt; can do a MSVC8 build as well which really speeds things up - cli doesn't 
&gt; have any of the extension loading issues with the newer compiler that 
&gt; plagued other SAPIS - however I'm not sure how nice MSVC8 plays with 
&gt; WIN95/98)  I also am doing "stock builds" atm - I can start chopping out 
&gt; stuff in PHP that php-gtk2 really doesn't use (session? json?) as well to 
&gt; save size (I have no idea if it affects speed)
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070614233646</emailId><senderName>"Madeleine D."</senderName><senderEmail>chezmmd@yahoo.com</senderEmail><timestampReceived>2007-06-14 23:36:46-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>


Steph -

I checked your emails on it and didn't find an
indication one way or the 
other.   I still have the directories in place.  Can I
tell from the 
contents?


thanks,
Madeleine D.


Steph Fox wrote:

&gt; Hey Madeleine,
&gt; 
&gt; &gt; Only thing that struck me is that the demo seemed a
&gt; &gt; little slow to
&gt; &gt; load.  I had an earlier version from Steph that
only
&gt; &gt; took about 4 secs;
&gt; &gt; this one took 8 secs.
&gt; 
&gt; 
&gt; Can you remember off-hand, was that a non-ZTS
version I sent you that 
&gt; was faster?
&gt; 
&gt; (I can't remember, and my mail client had a nasty
compression accident 
&gt; lately so it's a pain to check here)
&gt; 
&gt; - Steph



       
____________________________________________________________________________________Ready \
for the edge of your seat?  Check out tonight's top picks on Yahoo! TV. 
http://tv.yahoo.com/

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070614234525</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-06-14 23:45:25-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

Heya Madeleine,

&gt; other.   I still have the directories in place.  Can I
&gt; tell from the
&gt; contents?

Again, the aging memory grows dim, and there's so much *stuff* on this 
hard-drive it's scary - but php5ts.dll surely isn't called 'ts' when it 
isn't?

- Steph 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070614235220</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-06-14 23:52:20-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

Oh wait - PHP dropped support for win98 back there somewhere, that might 
have some bearing on this for Madeleine's issue. Before 5.2.3 anyway. I 
think we need to drop back to 5.2.1, but that's easily checked...

----- Original Message ----- 
From: "Steph Fox" &lt;steph@zend.com&gt;
To: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;; "Madeleine D." 
&lt;chezmmd@yahoo.com&gt;
Cc: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
Sent: Friday, June 15, 2007 12:33 AM
Subject: Re: [PHP-GTK-DEV] Beta: Call for testing


&gt; It doesn't play nice, it's a different MS runtime. But non-ZTS would be 
&gt; helpful.
&gt;
&gt; There wasn't a noticeable slowdown in PHP 5.2.0 - well not one I noticed 
&gt; anyway - so it might be more recent than that. There have been bits and 
&gt; pieces of info that might help pick out a pattern there... if anyone has 
&gt; time for that I'm still covering internals@ at a rate of roughly one 
&gt; column inch per day (but closely) in the Zend weeklies, and that's a 
&gt; fairly good place to start tracking down relevant threads.
&gt;
&gt; Sorry if that sounds like an ad, it's just that writing those summaries is 
&gt; the only reason this isn't complete news to me.
&gt;
&gt; - Steph
&gt;
&gt; ----- Original Message ----- 
&gt; From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
&gt; To: "Madeleine D." &lt;chezmmd@yahoo.com&gt;
&gt; Cc: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
&gt; Sent: Friday, June 15, 2007 12:19 AM
&gt; Subject: Re: [PHP-GTK-DEV] Beta: Call for testing
&gt;
&gt;
&gt;&gt; Madeleine D. wrote:
&gt;&gt;&gt; I setup and ran the 2.6.9 zip version on one of our
&gt;&gt;&gt; Win98SE's.  Went very smooth on the install.  Nice job.
&gt;&gt;&gt;
&gt;&gt;&gt; Only thing that struck me is that the demo seemed a
&gt;&gt;&gt; little slow to load.  I had an earlier version from Steph that only
&gt;&gt;&gt; took about 4 secs; this one took 8 secs.
&gt;&gt;&gt; No big deal.  Just a note for what it's worth.
&gt;&gt;&gt;
&gt;&gt;&gt; I'll carve out some time in the next few days to test
&gt;&gt;&gt; the Gtk2 app I'm working on.
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; thanks,
&gt;&gt;&gt; Madeleine D.
&gt;&gt;&gt;
&gt;&gt; Actually that slowdown is not limited to just the 2.6.9 libs - I've also 
&gt;&gt; noticed a gradual slowdown as well but I have no idea what's causing it. 
&gt;&gt; The biggest slowdown happened when jumping from PHP 5.1.x to 5.2.x - this 
&gt;&gt; is built against PHP 5.2.3 right now.  I can try a build against the 
&gt;&gt; 5.1.x branch to see if the slowdown is something php-gtk2 is doing or if 
&gt;&gt; it's something PHP is doing - but probably not until this weekend.
&gt;&gt;
&gt;&gt; And as Steph said (in something that just popped into my mailbox) I can 
&gt;&gt; do a non-zts build which is 30% faster or more.  (If you're really brave 
&gt;&gt; I can do a MSVC8 build as well which really speeds things up - cli 
&gt;&gt; doesn't have any of the extension loading issues with the newer compiler 
&gt;&gt; that plagued other SAPIS - however I'm not sure how nice MSVC8 plays with 
&gt;&gt; WIN95/98)  I also am doing "stock builds" atm - I can start chopping out 
&gt;&gt; stuff in PHP that php-gtk2 really doesn't use (session? json?) as well to 
&gt;&gt; save size (I have no idea if it affects speed)
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;&gt;
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070614235905</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-06-14 23:59:05-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

5.2.0. It's either that or risk the first RC for 5.2.1. There were initial 
reports of slowness (half-speed kinda slowness) in 5.2.1 under some 
conditions.

&gt; Oh wait - PHP dropped support for win98 back there somewhere, that might 
&gt; have some bearing on this for Madeleine's issue. Before 5.2.3 anyway. I 
&gt; think we need to drop back to 5.2.1, but that's easily checked...
&gt;
&gt; ----- Original Message ----- 
&gt; From: "Steph Fox" &lt;steph@zend.com&gt;
&gt; To: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;; "Madeleine D." 
&gt; &lt;chezmmd@yahoo.com&gt;
&gt; Cc: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
&gt; Sent: Friday, June 15, 2007 12:33 AM
&gt; Subject: Re: [PHP-GTK-DEV] Beta: Call for testing
&gt;
&gt;
&gt;&gt; It doesn't play nice, it's a different MS runtime. But non-ZTS would be 
&gt;&gt; helpful.
&gt;&gt;
&gt;&gt; There wasn't a noticeable slowdown in PHP 5.2.0 - well not one I noticed 
&gt;&gt; anyway - so it might be more recent than that. There have been bits and 
&gt;&gt; pieces of info that might help pick out a pattern there... if anyone has 
&gt;&gt; time for that I'm still covering internals@ at a rate of roughly one 
&gt;&gt; column inch per day (but closely) in the Zend weeklies, and that's a 
&gt;&gt; fairly good place to start tracking down relevant threads.
&gt;&gt;
&gt;&gt; Sorry if that sounds like an ad, it's just that writing those summaries 
&gt;&gt; is the only reason this isn't complete news to me.
&gt;&gt;
&gt;&gt; - Steph
&gt;&gt;
&gt;&gt; ----- Original Message ----- 
&gt;&gt; From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
&gt;&gt; To: "Madeleine D." &lt;chezmmd@yahoo.com&gt;
&gt;&gt; Cc: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
&gt;&gt; Sent: Friday, June 15, 2007 12:19 AM
&gt;&gt; Subject: Re: [PHP-GTK-DEV] Beta: Call for testing
&gt;&gt;
&gt;&gt;
&gt;&gt;&gt; Madeleine D. wrote:
&gt;&gt;&gt;&gt; I setup and ran the 2.6.9 zip version on one of our
&gt;&gt;&gt;&gt; Win98SE's.  Went very smooth on the install.  Nice job.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Only thing that struck me is that the demo seemed a
&gt;&gt;&gt;&gt; little slow to load.  I had an earlier version from Steph that only
&gt;&gt;&gt;&gt; took about 4 secs; this one took 8 secs.
&gt;&gt;&gt;&gt; No big deal.  Just a note for what it's worth.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I'll carve out some time in the next few days to test
&gt;&gt;&gt;&gt; the Gtk2 app I'm working on.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; thanks,
&gt;&gt;&gt;&gt; Madeleine D.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt; Actually that slowdown is not limited to just the 2.6.9 libs - I've also 
&gt;&gt;&gt; noticed a gradual slowdown as well but I have no idea what's causing it. 
&gt;&gt;&gt; The biggest slowdown happened when jumping from PHP 5.1.x to 5.2.x - 
&gt;&gt;&gt; this is built against PHP 5.2.3 right now.  I can try a build against 
&gt;&gt;&gt; the 5.1.x branch to see if the slowdown is something php-gtk2 is doing 
&gt;&gt;&gt; or if it's something PHP is doing - but probably not until this weekend.
&gt;&gt;&gt;
&gt;&gt;&gt; And as Steph said (in something that just popped into my mailbox) I can 
&gt;&gt;&gt; do a non-zts build which is 30% faster or more.  (If you're really brave 
&gt;&gt;&gt; I can do a MSVC8 build as well which really speeds things up - cli 
&gt;&gt;&gt; doesn't have any of the extension loading issues with the newer compiler 
&gt;&gt;&gt; that plagued other SAPIS - however I'm not sure how nice MSVC8 plays 
&gt;&gt;&gt; with WIN95/98)  I also am doing "stock builds" atm - I can start 
&gt;&gt;&gt; chopping out stuff in PHP that php-gtk2 really doesn't use (session? 
&gt;&gt;&gt; json?) as well to save size (I have no idea if it affects speed)
&gt;&gt;&gt;
&gt;&gt;&gt; -- 
&gt;&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;&gt;&gt;
&gt;&gt;
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615001307</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-06-15 00:13:07-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

- and now I looked again due to a nagging feeling I'd missed something, 
there's a still-open bug report on relative paths under doze.

http://bugs.php.net/bug.php?id=41193

The relevant summary's here: 
http://devzone.zend.com/article/2018-Zend-Weekly-Summaries-Issue-338#Heading5

Ring any bells for you, Madeleine?

- Steph

----- Original Message ----- 
From: "Steph Fox" &lt;steph@zend.com&gt;
To: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;; "Madeleine D." 
&lt;chezmmd@yahoo.com&gt;
Cc: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
Sent: Friday, June 15, 2007 12:59 AM
Subject: Re: [PHP-GTK-DEV] Beta: Call for testing


&gt; 5.2.0. It's either that or risk the first RC for 5.2.1. There were initial 
&gt; reports of slowness (half-speed kinda slowness) in 5.2.1 under some 
&gt; conditions.
&gt;
&gt;&gt; Oh wait - PHP dropped support for win98 back there somewhere, that might 
&gt;&gt; have some bearing on this for Madeleine's issue. Before 5.2.3 anyway. I 
&gt;&gt; think we need to drop back to 5.2.1, but that's easily checked...
&gt;&gt;
&gt;&gt; ----- Original Message ----- 
&gt;&gt; From: "Steph Fox" &lt;steph@zend.com&gt;
&gt;&gt; To: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;; "Madeleine D." 
&gt;&gt; &lt;chezmmd@yahoo.com&gt;
&gt;&gt; Cc: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
&gt;&gt; Sent: Friday, June 15, 2007 12:33 AM
&gt;&gt; Subject: Re: [PHP-GTK-DEV] Beta: Call for testing
&gt;&gt;
&gt;&gt;
&gt;&gt;&gt; It doesn't play nice, it's a different MS runtime. But non-ZTS would be 
&gt;&gt;&gt; helpful.
&gt;&gt;&gt;
&gt;&gt;&gt; There wasn't a noticeable slowdown in PHP 5.2.0 - well not one I noticed 
&gt;&gt;&gt; anyway - so it might be more recent than that. There have been bits and 
&gt;&gt;&gt; pieces of info that might help pick out a pattern there... if anyone has 
&gt;&gt;&gt; time for that I'm still covering internals@ at a rate of roughly one 
&gt;&gt;&gt; column inch per day (but closely) in the Zend weeklies, and that's a 
&gt;&gt;&gt; fairly good place to start tracking down relevant threads.
&gt;&gt;&gt;
&gt;&gt;&gt; Sorry if that sounds like an ad, it's just that writing those summaries 
&gt;&gt;&gt; is the only reason this isn't complete news to me.
&gt;&gt;&gt;
&gt;&gt;&gt; - Steph
&gt;&gt;&gt;
&gt;&gt;&gt; ----- Original Message ----- 
&gt;&gt;&gt; From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
&gt;&gt;&gt; To: "Madeleine D." &lt;chezmmd@yahoo.com&gt;
&gt;&gt;&gt; Cc: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
&gt;&gt;&gt; Sent: Friday, June 15, 2007 12:19 AM
&gt;&gt;&gt; Subject: Re: [PHP-GTK-DEV] Beta: Call for testing
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Madeleine D. wrote:
&gt;&gt;&gt;&gt;&gt; I setup and ran the 2.6.9 zip version on one of our
&gt;&gt;&gt;&gt;&gt; Win98SE's.  Went very smooth on the install.  Nice job.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Only thing that struck me is that the demo seemed a
&gt;&gt;&gt;&gt;&gt; little slow to load.  I had an earlier version from Steph that only
&gt;&gt;&gt;&gt;&gt; took about 4 secs; this one took 8 secs.
&gt;&gt;&gt;&gt;&gt; No big deal.  Just a note for what it's worth.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; I'll carve out some time in the next few days to test
&gt;&gt;&gt;&gt;&gt; the Gtk2 app I'm working on.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; thanks,
&gt;&gt;&gt;&gt;&gt; Madeleine D.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Actually that slowdown is not limited to just the 2.6.9 libs - I've 
&gt;&gt;&gt;&gt; also noticed a gradual slowdown as well but I have no idea what's 
&gt;&gt;&gt;&gt; causing it. The biggest slowdown happened when jumping from PHP 5.1.x 
&gt;&gt;&gt;&gt; to 5.2.x - this is built against PHP 5.2.3 right now.  I can try a 
&gt;&gt;&gt;&gt; build against the 5.1.x branch to see if the slowdown is something 
&gt;&gt;&gt;&gt; php-gtk2 is doing or if it's something PHP is doing - but probably not 
&gt;&gt;&gt;&gt; until this weekend.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; And as Steph said (in something that just popped into my mailbox) I can 
&gt;&gt;&gt;&gt; do a non-zts build which is 30% faster or more.  (If you're really 
&gt;&gt;&gt;&gt; brave I can do a MSVC8 build as well which really speeds things up - 
&gt;&gt;&gt;&gt; cli doesn't have any of the extension loading issues with the newer 
&gt;&gt;&gt;&gt; compiler that plagued other SAPIS - however I'm not sure how nice MSVC8 
&gt;&gt;&gt;&gt; plays with WIN95/98)  I also am doing "stock builds" atm - I can start 
&gt;&gt;&gt;&gt; chopping out stuff in PHP that php-gtk2 really doesn't use (session? 
&gt;&gt;&gt;&gt; json?) as well to save size (I have no idea if it affects speed)
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; -- 
&gt;&gt;&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt;&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;&gt;
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615002534</emailId><senderName>"Madeleine D."</senderName><senderEmail>chezmmd@yahoo.com</senderEmail><timestampReceived>2007-06-15 00:25:34-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>


Steph -

The old directory has a php5ts.dll dated 8/23/06.  I
double-checked the 
times against the new install, and the old one is
definitely faster - 
with or without firewall, etc. running.


Hope that helps.


Madeleine D.



Steph Fox wrote:

&gt; Heya Madeleine,
&gt; 
&gt; &gt; other.   I still have the directories in place. 
Can I
&gt; &gt; tell from the
&gt; &gt; contents?
&gt; 
&gt; 
&gt; Again, the aging memory grows dim, and there's so
much *stuff* on this 
&gt; hard-drive it's scary - but php5ts.dll surely isn't
called 'ts' when 
&gt; it isn't?
&gt; 
&gt; - Steph
&gt; 
&gt; 


       
____________________________________________________________________________________
Be a better Globetrotter. Get better travel answers from someone who knows. Yahoo! \
Answers - Check it out. http://answers.yahoo.com/dir/?link=list&amp;sid=396545469

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070615004041</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-06-15 00:40:41-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

Mmkay. So we're down to the relative path includes bug and the fact that 
win98 isn't officially supported now. The latter may or may not impact 5.2.3 
given that this is CLI only. The former definitely hits Windows users from 
5.2.1 onwards (don't know about 5.2.0 because it wasn't diagnosed then.)

----- Original Message ----- 
From: "Madeleine D." &lt;chezmmd@yahoo.com&gt;
To: "Steph Fox" &lt;steph@zend.com&gt;
Cc: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
Sent: Friday, June 15, 2007 1:25 AM
Subject: Re: [PHP-GTK-DEV] Beta: Call for testing


&gt;
&gt; Steph -
&gt;
&gt; The old directory has a php5ts.dll dated 8/23/06.  I
&gt; double-checked the
&gt; times against the new install, and the old one is
&gt; definitely faster -
&gt; with or without firewall, etc. running.
&gt;
&gt;
&gt; Hope that helps.
&gt;
&gt;
&gt; Madeleine D.
&gt;
&gt;
&gt;
&gt; Steph Fox wrote:
&gt;
&gt;&gt; Heya Madeleine,
&gt;&gt;
&gt;&gt;&gt; other.   I still have the directories in place.
&gt; Can I
&gt;&gt;&gt; tell from the
&gt;&gt;&gt; contents?
&gt;&gt;
&gt;&gt;
&gt;&gt; Again, the aging memory grows dim, and there's so
&gt; much *stuff* on this
&gt;&gt; hard-drive it's scary - but php5ts.dll surely isn't
&gt; called 'ts' when
&gt;&gt; it isn't?
&gt;&gt;
&gt;&gt; - Steph
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt;
&gt; ____________________________________________________________________________________
&gt; Be a better Globetrotter. Get better travel answers from someone who 
&gt; knows. Yahoo! Answers - Check it out.
&gt; http://answers.yahoo.com/dir/?link=list&amp;sid=396545469 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615005520</emailId><senderName>"Steph"</senderName><senderEmail>steph.fox@virgin.net</senderEmail><timestampReceived>2007-06-15 00:55:20-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

23rd August would be PHP 5.1.6.

It sounds like that 5_2 relative include bug's hurting you 
(http://bugs.php.net/bug.php?id=41193). Does that make sense - do you use 
__autoload() or MVC alongside relative paths?

(If so would you care to add your voice to that report?)

That means 5.1.6 is actually the last version we can be 100% confident about 
for win98 users. The bug's not fixed in 5.2.3 and YMMV with PHP CLI after 
5.2.1 anyway.

Unfortunately the 5.1.6 binary is also missing from the vaults: 
http://devzone.zend.com/article/2163-Zend-Weekly-Summaries-Issue-340#Heading6

although the source is available there.

Not sure what to advise you at this point :-(


----- Original Message ----- 
From: "Madeleine D." &lt;chezmmd@yahoo.com&gt;
To: "Steph Fox" &lt;steph@zend.com&gt;
Cc: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
Sent: Friday, June 15, 2007 1:25 AM
Subject: Re: [PHP-GTK-DEV] Beta: Call for testing


&gt;
&gt; Steph -
&gt;
&gt; The old directory has a php5ts.dll dated 8/23/06.  I
&gt; double-checked the
&gt; times against the new install, and the old one is
&gt; definitely faster -
&gt; with or without firewall, etc. running.
&gt;
&gt;
&gt; Hope that helps.
&gt;
&gt;
&gt; Madeleine D.
&gt;
&gt;
&gt;
&gt; Steph Fox wrote:
&gt;
&gt;&gt; Heya Madeleine,
&gt;&gt;
&gt;&gt;&gt; other.   I still have the directories in place.
&gt; Can I
&gt;&gt;&gt; tell from the
&gt;&gt;&gt; contents?
&gt;&gt;
&gt;&gt;
&gt;&gt; Again, the aging memory grows dim, and there's so
&gt; much *stuff* on this
&gt;&gt; hard-drive it's scary - but php5ts.dll surely isn't
&gt; called 'ts' when
&gt;&gt; it isn't?
&gt;&gt;
&gt;&gt; - Steph
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt;
&gt; ____________________________________________________________________________________
&gt; Be a better Globetrotter. Get better travel answers from someone who 
&gt; knows. Yahoo! Answers - Check it out.
&gt; http://answers.yahoo.com/dir/?link=list&amp;sid=396545469 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615010020</emailId><senderName>Elizabeth Smith</senderName><senderEmail>emsmith@elizabethmariesmith.com</senderEmail><timestampReceived>2007-06-15 01:00:20-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

Steph wrote:
&gt; 23rd August would be PHP 5.1.6.
&gt;
&gt; It sounds like that 5_2 relative include bug's hurting you 
&gt; (http://bugs.php.net/bug.php?id=41193). Does that make sense - do you 
&gt; use __autoload() or MVC alongside relative paths?
&gt;
&gt; (If so would you care to add your voice to that report?)
&gt;
&gt; That means 5.1.6 is actually the last version we can be 100% confident 
&gt; about for win98 users. The bug's not fixed in 5.2.3 and YMMV with PHP 
&gt; CLI after 5.2.1 anyway.
&gt;
&gt; Unfortunately the 5.1.6 binary is also missing from the vaults: 
&gt; http://devzone.zend.com/article/2163-Zend-Weekly-Summaries-Issue-340#Heading6 
&gt;
&gt;
&gt; although the source is available there.
&gt;
&gt; Not sure what to advise you at this point :-(

I can roll a new win95/98 non-zts 5.1.6 and build php-gtk2 against it - 
I'm building php specially for php-gtk2 anyway because we need a static 
gd until someone figures out how to get it loading right so 
gdkpixbuf::new_from_gd works with shared gd

man that path bug is nasty, adding absolute paths does make a 
difference, I just compared the demo against my own code that uses 
absolute paths - ouch... (must blog about that sometime...)

Caveat - you'll have to tell me the extensions you need since you can't 
get it in the vault, including any pecl ones (that still build against 
5.1.6 and aren't available on pecl4win)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615011725</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-06-15 01:17:25-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

&gt; man that path bug is nasty, adding absolute paths does make a difference, 
&gt; I just compared the demo against my own code that uses absolute paths - 
&gt; ouch... (must blog about that sometime...)

Please do. And add your voice to the report, it's only two people so far!

&gt; Caveat - you'll have to tell me the extensions you need since you can't 
&gt; get it in the vault, including any pecl ones (that still build against 
&gt; 5.1.6 and aren't available on pecl4win)

None of them will be available on pecl4win if you're doing a NTS build. Best 
bet would be to make a NTS PECL available separately.

The question is really what Madeleine (particularly) wants, because that 
include path bug will hit _everybody_. It's just that for win98 users the 
only 'safe' option this side of it would be 5.2.0 anyway. I know the release 
process had started for 5.2.1 before win9x support was dropped, but there 
were a lot of RC's before that release - 5 in all - and I think it actually 
got chucked out during that cycle. What impact it had, I know less. Might be 
perfectly safe in CLI, might not. We can't really know without a bunch of 
testing.

There's also that strcat() bug in 5.2.1 to consider (fixed before 5.2.2)...

- Steph

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615012535</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-06-15 01:25:35-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

&gt; The question is really what Madeleine (particularly) wants, because that 
&gt; include path bug will hit _everybody_. It's just that for win98 users 
&gt; the only 'safe' option this side of it would be 5.2.0 anyway. I know the 
&gt; release process had started for 5.2.1 before win9x support was dropped, 
&gt; but there were a lot of RC's before that release - 5 in all - and I 
&gt; think it actually got chucked out during that cycle. What impact it had, 
&gt; I know less. Might be perfectly safe in CLI, might not. We can't really 
&gt; know without a bunch of testing.
&gt; 
&gt; There's also that strcat() bug in 5.2.1 to consider (fixed before 5.2.2)...
&gt; 
&gt; - Steph

http://bugs.php.net/bug.php?id=21927 - after some digging on 
bugs.php.net it appears that the cli is still 95/98 safe (cgi is not)

are we sure the slowness is relative includes?  I didn't do any hard 
benchmarking, just counting seconds to start up between my php-gtk2 apps 
and the demo.  I probably should do a non zts build because it will be 
faster and the cli doesn't have thread issues anyway...

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615014158</emailId><senderName>"Madeleine D."</senderName><senderEmail>chezmmd@yahoo.com</senderEmail><timestampReceived>2007-06-15 01:41:58-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>



Steph wrote:

&gt; 23rd August would be PHP 5.1.6.
&gt;

Correct.

&gt; It sounds like that 5_2 relative include bug's
hurting you 
&gt; (http://bugs.php.net/bug.php?id=41193). Does that
make sense - do you 
&gt; use __autoload() or MVC alongside relative paths?
&gt;

As I read the bug report, this hits at any relative
path stmt in the 
code, and not just autoload.  I'm guessing (w/o really
knowing anything 
at all) that the demo loading images is where the
problem lies for that 
one, maybe?  At any rate, all of our paths are
relative; they have to 
be, based on client site preferences.

The __autoload appears to be a PHP5 item only; I
haven't stumbled across 
it so far.  But according to the manual page, it
doesn't function in 
CLI.  So not using that wouldn't really help, AFAICS.


Madeleine D.




&gt; (If so would you care to add your voice to that
report?)
&gt;
&gt; That means 5.1.6 is actually the last version we can
be 100% confident 
&gt; about for win98 users. The bug's not fixed in 5.2.3
and YMMV with PHP 
&gt; CLI after 5.2.1 anyway.
&gt;
&gt; Unfortunately the 5.1.6 binary is also missing from
the vaults: 
&gt;
http://devzone.zend.com/article/2163-Zend-Weekly-Summaries-Issue-340#Heading6

&gt;
&gt;
&gt; although the source is available there.
&gt;
&gt; Not sure what to advise you at this point :-(
&gt;
&gt;
&gt; ----- Original Message ----- From: "Madeleine D."
&lt;chezmmd@yahoo.com&gt;
&gt; To: "Steph Fox" &lt;steph@zend.com&gt;
&gt; Cc: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
&gt; Sent: Friday, June 15, 2007 1:25 AM
&gt; Subject: Re: [PHP-GTK-DEV] Beta: Call for testing
&gt;
&gt;
&gt;&gt;
&gt;&gt; Steph -
&gt;&gt;
&gt;&gt; The old directory has a php5ts.dll dated 8/23/06. 
I
&gt;&gt; double-checked the
&gt;&gt; times against the new install, and the old one is
&gt;&gt; definitely faster -
&gt;&gt; with or without firewall, etc. running.
&gt;&gt;
&gt;&gt;
&gt;&gt; Hope that helps.
&gt;&gt;
&gt;&gt;
&gt;&gt; Madeleine D.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Steph Fox wrote:
&gt;&gt;
&gt;&gt;&gt; Heya Madeleine,
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; other.   I still have the directories in place.
&gt;&gt;&gt;
&gt;&gt; Can I
&gt;&gt;
&gt;&gt;&gt;&gt; tell from the
&gt;&gt;&gt;&gt; contents?
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Again, the aging memory grows dim, and there's so
&gt;&gt;
&gt;&gt; much *stuff* on this
&gt;&gt;
&gt;&gt;&gt; hard-drive it's scary - but php5ts.dll surely
isn't
&gt;&gt;
&gt;&gt; called 'ts' when
&gt;&gt;
&gt;&gt;&gt; it isn't?
&gt;&gt;&gt;
&gt;&gt;&gt; - Steph
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
____________________________________________________________________________________

&gt;&gt;
&gt;&gt; Be a better Globetrotter. Get better travel answers
from someone who 
&gt;&gt; knows. Yahoo! Answers - Check it out.
&gt;&gt;
http://answers.yahoo.com/dir/?link=list&amp;sid=396545469 
&gt;
&gt;


       
____________________________________________________________________________________
Get the Yahoo! toolbar and be alerted to new email wherever you're surfing.
http://new.toolbar.yahoo.com/toolbar/features/mail/index.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615015300</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-06-15 01:53:00-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

&gt; http://bugs.php.net/bug.php?id=21927 - after some digging on bugs.php.net 
&gt; it appears that the cli is still 95/98 safe (cgi is not)

You dug a bit too far - support for win98 was dropped in January 2007, that 
report dates from 2004 (when win95 support was dropped). I don't know what 
the impact is on CLI now. It needs testing.

&gt; are we sure the slowness is relative includes?  I didn't do any hard 
&gt; benchmarking, just counting seconds to start up between my php-gtk2 apps 
&gt; and the demo.

That bug report and explanation earlier includes proper benchmarking, 
including a simple script to run with xdebug. Yes we're sure.

I probably should do a non zts build because it will be
&gt; faster and the cli doesn't have thread issues anyway...

Non-ZTS would definitely be better, and NTS PECL binaries are available 
since 5.2.1 (although missing from the museum). Once they're gone from the 
download page it seems you're stuck with 
http://www.php.net/get/pecl-5.2.1-nts-Win32.zip/from/a/mirror - we need to 
poke Edin :)

I just found 5.1.6 binaries in there by the way, I'm sure I'm losing it. 
Either that or someone's playing mind-games with me! That's the third time 
I've checked for those..!

- Steph

ps I still don't know what to advise Madeleine. All things being equal I'd 
say 5.2.0 but it's actually more problematic than 5.1.6. And we _might_ find 
out next week that 5.2.4 works perfectly for her anyway!

&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615020522</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-06-15 02:05:22-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

&gt; As I read the bug report, this hits at any relative
&gt; path stmt in the
&gt; code, and not just autoload.  I'm guessing (w/o really
&gt; knowing anything
&gt; at all) that the demo loading images is where the
&gt; problem lies for that
&gt; one, maybe?  At any rate, all of our paths are
&gt; relative; they have to
&gt; be, based on client site preferences.
&gt;
&gt; The __autoload appears to be a PHP5 item only; I
&gt; haven't stumbled across
&gt; it so far.  But according to the manual page, it
&gt; doesn't function in
&gt; CLI.  So not using that wouldn't really help, AFAICS.

We live and learn :)

So it _could_ still be an issue with the support-dropping changes. Or it 
could be you just spread some light on the relative path bug.

- Steph

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615164324</emailId><senderName>"Madeleine D."</senderName><senderEmail>chezmmd@yahoo.com</senderEmail><timestampReceived>2007-06-15 16:43:24-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>


I think the general list came up with a list of
extensions needed about
a year ago, but I can rehash the make or break ones
for us:

php_printer
php_pdf


And now, with PHP5, we need the mysql ones as well.

Madeleine D.






Elizabeth Smith wrote:

&gt; Steph wrote:
&gt; 
&gt; &gt; 23rd August would be PHP 5.1.6.
&gt; &gt; 
&gt; &gt; It sounds like that 5_2 relative include bug's
hurting you 
&gt; &gt; (http://bugs.php.net/bug.php?id=41193). Does that
make sense - do you 
&gt; &gt; use __autoload() or MVC alongside relative paths?
&gt; &gt; 
&gt; &gt; (If so would you care to add your voice to that
report?)
&gt; &gt; 
&gt; &gt; That means 5.1.6 is actually the last version we
can be 100% 
&gt; &gt; confident about for win98 users. The bug's not
fixed in 5.2.3 and 
&gt; &gt; YMMV with PHP CLI after 5.2.1 anyway.
&gt; &gt; 
&gt; &gt; Unfortunately the 5.1.6 binary is also missing from
the vaults: 
&gt; &gt; 
http://devzone.zend.com/article/2163-Zend-Weekly-Summaries-Issue-340#Heading6

&gt; &gt; 
&gt; &gt; 
&gt; &gt; although the source is available there.
&gt; &gt; 
&gt; &gt; Not sure what to advise you at this point :-(
&gt; 
&gt; 
&gt; I can roll a new win95/98 non-zts 5.1.6 and build
php-gtk2 against it 
&gt; - I'm building php specially for php-gtk2 anyway
because we need a 
&gt; static gd until someone figures out how to get it
loading right so 
&gt; gdkpixbuf::new_from_gd works with shared gd
&gt; 
&gt; man that path bug is nasty, adding absolute paths
does make a 
&gt; difference, I just compared the demo against my own
code that uses 
&gt; absolute paths - ouch... (must blog about that
sometime...)
&gt; 
&gt; Caveat - you'll have to tell me the extensions you
need since you 
&gt; can't get it in the vault, including any pecl ones
(that still build 
&gt; against 5.1.6 and aren't available on pecl4win)
&gt; 
&gt; 



       
____________________________________________________________________________________
Moody friends. Drama queens. Your life? Nope! - their life, your story. Play Sims \
Stories at Yahoo! Games. http://sims.yahoo.com/  

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070615165446</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-06-15 16:54:46-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

Which particular 'mysql ones'? Do you need ext/mysql, ext/mysqli or 
ext/pdo_mysql?

----- Original Message ----- 
From: "Madeleine D." &lt;chezmmd@yahoo.com&gt;
To: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
Cc: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
Sent: Friday, June 15, 2007 5:43 PM
Subject: Re: [PHP-GTK-DEV] Beta: Call for testing


&gt;
&gt; I think the general list came up with a list of
&gt; extensions needed about
&gt; a year ago, but I can rehash the make or break ones
&gt; for us:
&gt;
&gt; php_printer
&gt; php_pdf
&gt;
&gt;
&gt; And now, with PHP5, we need the mysql ones as well.
&gt;
&gt; Madeleine D.
&gt;
&gt;
&gt;
&gt;
&gt;
&gt;
&gt; Elizabeth Smith wrote:
&gt;
&gt;&gt; Steph wrote:
&gt;&gt;
&gt;&gt;&gt; 23rd August would be PHP 5.1.6.
&gt;&gt;&gt;
&gt;&gt;&gt; It sounds like that 5_2 relative include bug's
&gt; hurting you
&gt;&gt;&gt; (http://bugs.php.net/bug.php?id=41193). Does that
&gt; make sense - do you
&gt;&gt;&gt; use __autoload() or MVC alongside relative paths?
&gt;&gt;&gt;
&gt;&gt;&gt; (If so would you care to add your voice to that
&gt; report?)
&gt;&gt;&gt;
&gt;&gt;&gt; That means 5.1.6 is actually the last version we
&gt; can be 100%
&gt;&gt;&gt; confident about for win98 users. The bug's not
&gt; fixed in 5.2.3 and
&gt;&gt;&gt; YMMV with PHP CLI after 5.2.1 anyway.
&gt;&gt;&gt;
&gt;&gt;&gt; Unfortunately the 5.1.6 binary is also missing from
&gt; the vaults:
&gt;&gt;&gt;
&gt; http://devzone.zend.com/article/2163-Zend-Weekly-Summaries-Issue-340#Heading6
&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; although the source is available there.
&gt;&gt;&gt;
&gt;&gt;&gt; Not sure what to advise you at this point :-(
&gt;&gt;
&gt;&gt;
&gt;&gt; I can roll a new win95/98 non-zts 5.1.6 and build
&gt; php-gtk2 against it
&gt;&gt; - I'm building php specially for php-gtk2 anyway
&gt; because we need a
&gt;&gt; static gd until someone figures out how to get it
&gt; loading right so
&gt;&gt; gdkpixbuf::new_from_gd works with shared gd
&gt;&gt;
&gt;&gt; man that path bug is nasty, adding absolute paths
&gt; does make a
&gt;&gt; difference, I just compared the demo against my own
&gt; code that uses
&gt;&gt; absolute paths - ouch... (must blog about that
&gt; sometime...)
&gt;&gt;
&gt;&gt; Caveat - you'll have to tell me the extensions you
&gt; need since you
&gt;&gt; can't get it in the vault, including any pecl ones
&gt; (that still build
&gt;&gt; against 5.1.6 and aren't available on pecl4win)
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt;
&gt;
&gt; ____________________________________________________________________________________
&gt; Moody friends. Drama queens. Your life? Nope! - their life, your story. 
&gt; Play Sims Stories at Yahoo! Games.
&gt; http://sims.yahoo.com/
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615172329</emailId><senderName>"Madeleine D."</senderName><senderEmail>chezmmd@yahoo.com</senderEmail><timestampReceived>2007-06-15 17:23:29-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>


I'd actually like all 3.  We're having major grief
with MySQL as a 
company, so I need to start considering alternatives,
possibly via the 
PDO interface.  At the same time, we need to
maintain/enhance the 
existing stuff, using the std and the improved
extensions.  This would 
give me a change to see how all three would behave on
Win98...


thanks,
Madeleine D.



Steph Fox wrote:

&gt; Which particular 'mysql ones'? Do you need
ext/mysql, ext/mysqli or 
&gt; ext/pdo_mysql?
&gt;
&gt; ----- Original Message ----- From: "Madeleine D."
&lt;chezmmd@yahoo.com&gt;
&gt; To: "Elizabeth Smith"
&lt;emsmith@elizabethmariesmith.com&gt;
&gt; Cc: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
&gt; Sent: Friday, June 15, 2007 5:43 PM
&gt; Subject: Re: [PHP-GTK-DEV] Beta: Call for testing
&gt;
&gt;
&gt;&gt;
&gt;&gt; I think the general list came up with a list of
&gt;&gt; extensions needed about
&gt;&gt; a year ago, but I can rehash the make or break ones
&gt;&gt; for us:
&gt;&gt;
&gt;&gt; php_printer
&gt;&gt; php_pdf
&gt;&gt;
&gt;&gt;
&gt;&gt; And now, with PHP5, we need the mysql ones as well.
&gt;&gt;
&gt;&gt; Madeleine D.
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; Elizabeth Smith wrote:
&gt;&gt;
&gt;&gt;&gt; Steph wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; 23rd August would be PHP 5.1.6.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; It sounds like that 5_2 relative include bug's
&gt;&gt;&gt;
&gt;&gt; hurting you
&gt;&gt;
&gt;&gt;&gt;&gt; (http://bugs.php.net/bug.php?id=41193). Does that
&gt;&gt;&gt;
&gt;&gt; make sense - do you
&gt;&gt;
&gt;&gt;&gt;&gt; use __autoload() or MVC alongside relative paths?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; (If so would you care to add your voice to that
&gt;&gt;&gt;
&gt;&gt; report?)
&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; That means 5.1.6 is actually the last version we
&gt;&gt;&gt;
&gt;&gt; can be 100%
&gt;&gt;
&gt;&gt;&gt;&gt; confident about for win98 users. The bug's not
&gt;&gt;&gt;
&gt;&gt; fixed in 5.2.3 and
&gt;&gt;
&gt;&gt;&gt;&gt; YMMV with PHP CLI after 5.2.1 anyway.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Unfortunately the 5.1.6 binary is also missing
from
&gt;&gt;&gt;
&gt;&gt; the vaults:
&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;
http://devzone.zend.com/article/2163-Zend-Weekly-Summaries-Issue-340#Heading6

&gt;&gt;
&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; although the source is available there.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Not sure what to advise you at this point :-(
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; I can roll a new win95/98 non-zts 5.1.6 and build
&gt;&gt;
&gt;&gt; php-gtk2 against it
&gt;&gt;
&gt;&gt;&gt; - I'm building php specially for php-gtk2 anyway
&gt;&gt;
&gt;&gt; because we need a
&gt;&gt;
&gt;&gt;&gt; static gd until someone figures out how to get it
&gt;&gt;
&gt;&gt; loading right so
&gt;&gt;
&gt;&gt;&gt; gdkpixbuf::new_from_gd works with shared gd
&gt;&gt;&gt;
&gt;&gt;&gt; man that path bug is nasty, adding absolute paths
&gt;&gt;
&gt;&gt; does make a
&gt;&gt;
&gt;&gt;&gt; difference, I just compared the demo against my
own
&gt;&gt;
&gt;&gt; code that uses
&gt;&gt;
&gt;&gt;&gt; absolute paths - ouch... (must blog about that
&gt;&gt;
&gt;&gt; sometime...)
&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Caveat - you'll have to tell me the extensions you
&gt;&gt;
&gt;&gt; need since you
&gt;&gt;
&gt;&gt;&gt; can't get it in the vault, including any pecl ones
&gt;&gt;
&gt;&gt; (that still build
&gt;&gt;
&gt;&gt;&gt; against 5.1.6 and aren't available on pecl4win)
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt;
____________________________________________________________________________________

&gt;&gt;
&gt;&gt; Moody friends. Drama queens. Your life? Nope! -
their life, your 
&gt;&gt; story. Play Sims Stories at Yahoo! Games.
&gt;&gt; http://sims.yahoo.com/
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; PHP-GTK Development Mailing List
(http://gtk.php.net/)
&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;&gt;
&gt;


      ____________________________________________________________________________________
Luggage? GPS? Comic books? 
Check out fitting gifts for grads at Yahoo! Search
http://search.yahoo.com/search?fr=oni_on_mail&amp;p=graduation+gifts&amp;cs=bz

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070608010001</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-06-08 01:00:01-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkScintilla for Windows</subject><body>

Fernando Correa da ConceiÃ§Ã£o wrote:

&gt;&gt; Cheers,
&gt; I do not understant this. There is two versions of scintilla for 
&gt; php-gtk, one fron Tom which is build direct from the scintilla on 
&gt; windows and the other you make which is based on GtkScintilla on Linux.
&gt; 
&gt; The version from tom(which works on windows) is not hard to make it work 
&gt; on linux, I did this some time ago(there is a message on the mailing 
&gt; list about this). I build the scintilla which creates a .a lib and add 
&gt; this to makefile by hand(I do not know about how to make this using the 
&gt; build system). But I do not have the files now :(
&gt; 
&gt; The most important thing is have one of they working both on windows and 
&gt; linux. If we gonna use the version that uses the GtkScintilla we can at 
&gt; last replace the files from scintilla that it uses to the last scintilla?
&gt; 
&gt; About the installer. Elizabeth done some work on it, currently it only 
&gt; install the php and the php-gtk, without any extension. We need only add 
&gt; the files for extensions and it ´s dependencies.
&gt; If Elisabeth can not work on it, I can, but I can not build the files(I 
&gt; do not have MSVC), so she must send all files for me.
&gt; 

Oh hurray, does that mean everyone is waiting on me again?  Fernando - 
you can get all the working files you need from 
http://perisama.net/downloads - grab the MSVC6 versions.  Libraries to 
bundle are in http://perisama.net/libs/gtk .  If you could get a little 
more of the installer done I'd appreciate it.  Basically it needs 
extensions and double click open with php-gtk2 registration.

At this point we need either me to get gtkscintilla building with 
microsoft visual studio (with the newer bundled version of scintilla) or 
figure out how to build the bundled scintilla library and link it 
statically into php-gtk as part of the php-gtk build (Anant never did 
get it figured out).  Any linux autojunk guru's want to step up to the 
plate?  I won't have time to attack gtkscintilla until next week 
probably.  I think as soon as we get the scintilla thing figured out and 
the installer semi-functional we're go for a beta...  Anyone have some 
overrides done?

&gt; Important! I think that a release is a good thing to tell everyone that 
&gt; the project is under active work!
&gt; 
&gt; Fernando Correa da ConceiÃ§Ã£o

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070608035215</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-06-08 03:52:15-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkScintilla for Windows</subject><body>

Hi Fernando,

&gt; The version from tom(which works on windows) is not hard to make it work
&gt; on linux, I did this some time ago(there is a message on the mailing
&gt; list about this). I build the scintilla which creates a .a lib and add
&gt; this to makefile by hand(I do not know about how to make this using the
&gt; build system). But I do not have the files now :(

Building a .a lib for Scintilla is one thing, bundling it in with
PHP-GTK is another, since you cannot guarantee that the .a will linger
around after the installation. I tried another strategy of using the
PHP_REQUIRE_CXX() macro and compiling the C++ files into the extension
itself, and with some extern "C" {} blocks - this mostly works - until I
hit a "_g_thread_init: symbol not found" error. This means we must also
link with Glib's threading library (scintilla states that it is
required). A third approach worth trying is to try and get Scintilla to
act nice and build a .so instead, so we no longer need to bundle the
Scintilla sources along and we simply do what we do in all other extensions.

&gt; The most important thing is have one of they working both on windows and
&gt; linux. If we gonna use the version that uses the GtkScintilla we can at
&gt; last replace the files from scintilla that it uses to the last scintilla?

Yes, the API must be stable across all platforms. However it is evident
that Scintilla on Linux is more of a hassle than GtkScintilla on
Windows; I was able to get a DLL for GtkScintilla on Windows with no
prior windows experience, while I have been trying to get Scintilla to
work on Linux for days.

&gt; About the installer. Elizabeth done some work on it, currently it only
&gt; install the php and the php-gtk, without any extension. We need only add
&gt; the files for extensions and it ´s dependencies.
&gt; If Elisabeth can not work on it, I can, but I can not build the files(I
&gt; do not have MSVC), so she must send all files for me.

Elizabeth has posted the link(s), your work on the installer will be
most appreciated!

&gt; Important! I think that a release is a good thing to tell everyone that
&gt; the project is under active work!

I agree too, in fact I think it may be wise to make a release ASAP even
if it means we don't bundle Scintilla/GtkScintilla along with it...
Thoughts?

Steph, Where are you? :)

Cheers,
-- 
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070608130705</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-06-08 13:07:05-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkScintilla for Windows</subject><body>

&gt; I have the latest scintilla building as a dll and static library using
&gt; visual studio 6 if you want me to send you a zip of it all.
&gt; I haven't tested the static build as I don't use it.

Thanks Tom, but Scintilla builds right "out of the box" as both a static 
lib and .dll on windows, not an issue really.

The problem is there are two extensions here we're talking about based 
on two different "base" libraries that do basically the same thing.

1. Is gtkscintilla from 
http://sourceforge.net/project/showfiles.php?group_id=31426 .  Really 
it's a wrapper around the scintilla library that makes it act more 
"gtk-ish"  What makes this a good choice?  A lot of linux distros use 
this already, it builds as an .so "out of the box".  What makes it a bad 
choice?  My biggest issue is it's completely unmaintained.  The last 
release was in 2003, and it doesn't build without some code hacking on 
windows.  We'd basically have to support gtkscintilla in some way ourselves.

2. Is straight scintilla from http://www.scintilla.org/ .  This is the 
actual underlying library.  What makes this a good choice?  Well 
maintained, new releases, bugfixes on a regular basis, builds "out of 
the box" as both .dll and static lib on windows.  What makes it a bad 
choice?  The only makefile provided builds a static linux library (.a), 
so there's no .so that's routinely distributed on *nix like 
gtkscintilla.  We could bundle the library with a makefile to generate 
an .so or figure out how to use the php-gtk build system to build the 
static library first and then link it with the php-gtk build system, but 
as I said before I'm not a *nix user and Anant can't figure out how to 
do it.

Personally I'm not a fan of trying to upgrade and maintain gtkscintilla, 
so I'd prefer the straight scintilla solution, besides the fact that I 
really don't have time to be hacking up the source to get it cooperating 
on windows with MSVC. The PyGTK extension has moved to straight 
scintilla as well.  Anant would prefer the gtkscintilla solution since 
it would require no work on the *nix end.

Anyone else have some thoughts on which would be the "better" solution? 
  Would someone with autotools experience willing to step up and figure 
out how to bundle the scintilla library and get it building easily on 
*nix to distribute with php-gtk?  That is the main issue with option 2.

Or would someone be willing to take over support and maintainence of the 
gtkscintilla wrapper (including getting it building with MSVC on 
windows, updating the bundled scintilla lib, and fixing bugs?)  since 
distributing something based on an unmaintained library is not really 
the best idea.

Anyway, just my views on this subject (we keep going around and around 
here...)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070610055240</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-06-10 05:52:40-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkScintilla for Windows</subject><body>

Hi Tom,

&gt; I took the plunge and tried to compile php-gtk on linux, it builds the
&gt; basic gtk stuff and a simple script works, When it came to the
&gt; extensions it took a lot of fiddling to get it to do scintilla as a
&gt; module but it insists on doing scintilla before gtk which results in a
&gt; lot of bad symbols. What is the state of modules in linux? My
&gt; knowledge of the config.m4 system is very limited. Even libglade will
&gt; not build. What am I missing? Here is a copy of the config.m$ I made:

Are you sure you are using the latest CVS checkout for PHP-GTK? We fixed
the issue of extensions building before Gtk+ sometime ago.

There is already a scintilla directory in ext/, you can just modify the
config.m4 there and you should be all set.

Cheers,
--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615021423</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-06-15 02:14:23-0400</timestampReceived><subject>Re: Re[2]: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

&gt; __autoload works fine with php-5.2.2 cli on windows xp
&gt;

Thank goodness for that.

The manual actually says 'CLI interactive mode' rather than CLI - makes a 
bit more sense :)

- Steph 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615205102</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-06-15 20:51:02-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] More overrides</subject><body>

Looks fine.

-Andrei


On Jun 12, 2007, at 5:26 PM, Elizabeth Smith wrote:

&gt; I've been back to writing php-gtk code and have found some missing  
&gt; functions that I need - first one here is GtkPixbuf::get_formats 
&gt; ();  I just have it returning an array, wasn't sure if this would  
&gt; work or if you'd prefer a GtkPixbufFormat class to wrap the data in...
&gt; Index: gdk.overrides
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/ext/gtk+/gdk.overrides,v
&gt; retrieving revision 1.75
&gt; diff -u -r1.75 gdk.overrides
&gt; --- gdk.overrides	11 Feb 2007 07:28:57 -0000	1.75
&gt; +++ gdk.overrides	13 Jun 2007 00:19:13 -0000
&gt; @@ -2198,6 +2198,58 @@
&gt;  }
&gt;
&gt;  %%
&gt; +override gdk_pixbuf_get_formats
&gt; +PHP_METHOD
&gt; +{
&gt; +    GSList *list, *tmp;
&gt; +    zval *item, *mimes;
&gt; +    gchar *sval, **aval;
&gt; +    gint i;
&gt; +    GdkPixbufFormat *format;
&gt; +
&gt; +    list = gdk_pixbuf_get_formats();
&gt; +    array_init(return_value);
&gt; +    for (tmp = list; tmp != NULL; tmp = tmp-&gt;next) {
&gt; +        format = tmp-&gt;data;
&gt; +
&gt; +        MAKE_STD_ZVAL(item);
&gt; +        array_init(item);
&gt; +
&gt; +        sval = gdk_pixbuf_format_get_name(format);
&gt; +        add_assoc_string(item, "name", sval, 1);
&gt; +        g_free(sval);
&gt; +
&gt; +        sval = gdk_pixbuf_format_get_description(format);
&gt; +        add_assoc_string(item, "description", sval, 1);
&gt; +        g_free(sval);
&gt; +
&gt; +        aval = gdk_pixbuf_format_get_mime_types(format);
&gt; +        MAKE_STD_ZVAL(mimes);
&gt; +        array_init(mimes);
&gt; +        for (i = 0; aval[i] != NULL; i++) {
&gt; +            add_next_index_string(mimes, aval[i], 1);
&gt; +        }
&gt; +        add_assoc_zval(item, "description", mimes);
&gt; +        g_strfreev(aval);
&gt; +
&gt; +        aval = gdk_pixbuf_format_get_extensions(format);
&gt; +        MAKE_STD_ZVAL(mimes);
&gt; +        array_init(mimes);
&gt; +        for (i = 0; aval[i] != NULL; i++) {
&gt; +            add_next_index_string(mimes, aval[i], 1);
&gt; +        }
&gt; +        add_assoc_zval(item, "extensions", mimes);
&gt; +        g_strfreev(aval);
&gt; +
&gt; +        add_assoc_long(item, "is_writable",  
&gt; gdk_pixbuf_format_is_writable(format));
&gt; +        add_assoc_long(item, "is_scalable",  
&gt; gdk_pixbuf_format_is_scalable(format));
&gt; +
&gt; +        add_next_index_zval(return_value, item);
&gt; +    }
&gt; +    g_slist_free(list);
&gt; +}
&gt; +
&gt; +%%
&gt;  add-arginfo GdkPixbuf fill
&gt;  static
&gt;  ZEND_BEGIN_ARG_INFO_EX(ARGINFO_NAME, 0, 0, 1)
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615205406</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-06-15 20:54:06-0400</timestampReceived><subject>[PHP-GTK-DEV] Kudos</subject><body>

Just wanted to say that it's great to see all this activity happening  
even in my absence. :)

Cheers,

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070615223218</emailId><senderName>bob majdak jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-06-15 22:32:18-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta: Call for testing</subject><body>

attached is a override patch for fixing GtkStatusIcon::position_menu, 
built against the beta tarball. it currently segfaults.

- bob.

["gtkstatusicon-position_menu-20070615bobA.diff" (text/x-patch)]

--- php-gtk-beta/ext/gtk+/gtk-2.10.overrides	2007-05-14 09:08:40.000000000 -0400
+++ php-gtk-betabob/ext/gtk+/gtk-2.10.overrides	2007-06-15 18:29:38.000000000 -0400
@@ -104,7 +104,7 @@
 override gtk_status_icon_position_menu
 PHP_METHOD
 {
-    zval *menu, *statusicon;
+    zval *menu = NULL, *statusicon = NULL;
     gint x, y;
     gboolean push_in;
 
@@ -112,8 +112,8 @@
         return;
 
     gtk_status_icon_position_menu(GTK_MENU(PHPG_GOBJECT(menu)), &amp;x, &amp;y, &amp;push_in,
-                PHPG_GPOINTER(statusicon));
-
+                PHPG_GOBJECT(statusicon));
+    
     php_gtk_build_value(&amp;return_value, "(iii)", x, y, push_in);
 }
 



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070616021049</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-06-16 02:10:49-0400</timestampReceived><subject>[PHP-GTK-DEV] php-gtk-web access</subject><body>

Anant and Elizabeth,

You have access to commit to php-gtk-web module now.

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070616210034</emailId><senderName>       Fernando_Correa_da_Conceição</senderName><senderEmail></senderEmail><timestampReceived>2007-06-16 21:00:34-0400</timestampReceived><subject>[PHP-GTK-DEV] Wix Installer</subject><body>

This time like Elizabeth said, I build a installer using wix. I used the 
sources from one build(but not finished) by Elizabeth.

Please try it at http://fernando.viaserver.com.br/installer/ (the 
sources are here too) and tell me your options.

Current it install, uninstall and associates the .phpw to php-gtk. You 
can open the files in demos using a double click.

It is not finished, there is some files missing, but the php, php-gtk 
and all extensions and dependecies are working. The missing parts are on 
/lib and /share, but this is easy to do and will add all the files today.

There is one important thing missing: Icon. We need a nice icon (a file 
.ico) for the installer and the phpw files.

Thanks,

Fernando Correa da Conceição

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070617013258</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-06-17 01:32:58-0400</timestampReceived><subject>[PHP-GTK-DEV] PHP-GTK 2.0.0 Beta</subject><body>

Hi All,

The Beta release of PHP-GTK 2 will be up on the PHP-GTK website 
(http://gtk.php.net/) shortly. The source tarball will be immediately 
available, while the Win32 builds will be uploaded soon.

Thanks to the entire PHP-GTK team for making this release possible. Enjoy!

-- 
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070617183049</emailId><senderName>"adamg () php ! net"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-06-17 18:30:49-0400</timestampReceived><subject>[PHP-GTK-DEV] #41720 [NEW]: Compile failure on gtk-2.8</subject><body>

From:             adamg@php.net
Operating system: Linux
PHP version:      5.2.3
PHP Bug Type:     PHP-GTK related
Bug description:  Compile failure on gtk-2.8

Description:
------------
php-gtk2 is said to support gtk+2 &gt;= 2.6.9, however when trying to compile
it against gtk+-2.8.20 it fails with:

ext/gtk+/gen_gtk.c:44: error: syntax error before '*' token

where 44th line of ext/gtk+/gen_gtk.c is:
static void phpg_link_button_set_uri_hook_func_marshal(GtkLinkButton
*button, const gchar *link, gpointer data);

I found a thread started by Eddie Hixson where he complains about similar
error:
http://aspn.activestate.com/ASPN/Mail/Message/php-gtk-general/3486264

yet the thread ended without any resolution to the problem other then (I
used gtk+ 2.10).


-- 
Edit bug report at http://bugs.php.net/?id=41720&amp;edit=1
-- 
Try a CVS snapshot (PHP 4.4): http://bugs.php.net/fix.php?id=41720&amp;r=trysnapshot44
Try a CVS snapshot (PHP 5.2): http://bugs.php.net/fix.php?id=41720&amp;r=trysnapshot52
Try a CVS snapshot (PHP 6.0): http://bugs.php.net/fix.php?id=41720&amp;r=trysnapshot60
Fixed in CVS:                 http://bugs.php.net/fix.php?id=41720&amp;r=fixedcvs
Fixed in release:             http://bugs.php.net/fix.php?id=41720&amp;r=alreadyfixed
Need backtrace:               http://bugs.php.net/fix.php?id=41720&amp;r=needtrace
Need Reproduce Script:        http://bugs.php.net/fix.php?id=41720&amp;r=needscript
Try newer version:            http://bugs.php.net/fix.php?id=41720&amp;r=oldversion
Not developer issue:          http://bugs.php.net/fix.php?id=41720&amp;r=support
Expected behavior:            http://bugs.php.net/fix.php?id=41720&amp;r=notwrong
Not enough info:              http://bugs.php.net/fix.php?id=41720&amp;r=notenoughinfo
Submitted twice:              http://bugs.php.net/fix.php?id=41720&amp;r=submittedtwice
register_globals:             http://bugs.php.net/fix.php?id=41720&amp;r=globals
PHP 3 support discontinued:   http://bugs.php.net/fix.php?id=41720&amp;r=php3
Daylight Savings:             http://bugs.php.net/fix.php?id=41720&amp;r=dst
IIS Stability:                http://bugs.php.net/fix.php?id=41720&amp;r=isapi
Install GNU Sed:              http://bugs.php.net/fix.php?id=41720&amp;r=gnused
Floating point limitations:   http://bugs.php.net/fix.php?id=41720&amp;r=float
No Zend Extensions:           http://bugs.php.net/fix.php?id=41720&amp;r=nozend
MySQL Configuration Error:    http://bugs.php.net/fix.php?id=41720&amp;r=mysqlcfg

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070617184010</emailId><senderName></senderName><senderEmail>anant</senderEmail><timestampReceived>2007-06-17 18:40:10-0400</timestampReceived><subject>[PHP-GTK-DEV] #41720 [Opn-&gt;Csd]: Compile failure on gtk-2.8</subject><body>

 ID:               41720
 Updated by:       anant@php.net
 Reported By:      adamg@php.net
-Status:           Open
+Status:           Closed
 Bug Type:         PHP-GTK related
 Operating System: Linux
 PHP Version:      5.2.3
 New Comment:

Thank you for your bug report. This issue has already been fixed
in the latest released version of PHP, which you can download at 
http://www.php.net/downloads.php

A tarball for the beta release that works with Gtk+ 2.8 will be up on
http://gtk.php.net/download.php in a few moments.


Previous Comments:
------------------------------------------------------------------------

[2007-06-17 18:30:48] adamg@php.net

Description:
------------
php-gtk2 is said to support gtk+2 &gt;= 2.6.9, however when trying to
compile it against gtk+-2.8.20 it fails with:

ext/gtk+/gen_gtk.c:44: error: syntax error before '*' token

where 44th line of ext/gtk+/gen_gtk.c is:
static void phpg_link_button_set_uri_hook_func_marshal(GtkLinkButton
*button, const gchar *link, gpointer data);

I found a thread started by Eddie Hixson where he complains about
similar error:
http://aspn.activestate.com/ASPN/Mail/Message/php-gtk-general/3486264

yet the thread ended without any resolution to the problem other then
(I used gtk+ 2.10).



------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=41720&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070617205214</emailId><senderName>"=?ISO-8859-15?Q?Andr=E9_Jansen?="</senderName><senderEmail>theflyingdutchman@iol.it</senderEmail><timestampReceived>2007-06-17 20:52:14-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Beta: Call for testing</subject><body>

On 16 Jun 2007 at 16:50, Elizabeth Smith wrote:

&gt; André Jansen wrote:
&gt; &gt; Actually there were *2* gtk runtimes in my path: I also have the Gimp 
&gt; &gt; installed, which uses gtk 2.4...
&gt; &gt; Just to make sure, I temporarily removed both from my %PATH%.
&gt; &gt;   
&gt; You did restart after this change, right?
'course I did... I've been using Windoze for long enough to know that 
just about anything you do to system settings requires a reboot...

&gt; I found the error (bangs head on wall) - add an additional line feed to 
&gt; the end of the file pixbuf.loaders file and it works again (no I'm not 
&gt; kidding - stupid query-pixbuf-loaders.exe )

One down. Works perfectly now.

&gt; &gt; Tried the following:
&gt; &gt;
&gt; &gt; exec("start D:\\phpgtk2b\\gconfd-2.exe");
&gt; &gt; $win-&gt;add($foo = new GtkHTML());
&gt; &gt;
&gt; &gt; ...and several variants including popen().
&gt; &gt;   
&gt; exec doesn't work because php waits for the process to end before going 
&gt; back to work - you need to fake a fork basically - this code works
&gt; 
&gt; $pipe = popen('start C:\php-gtk2\gconfd-2.exe', 'r'); // we use start so 
&gt; it can carry on after we close this
&gt; pclose($pipe); // noticed I close this so we can get back to work
&gt; $foo = new GtkHTML();
&gt; var_dump($foo);

Still no luck (pulling hair out in despair).
Used the exact code specified above, and same install path, I'm still 
getting the same error message:

GConf Error: Failed to launch configuration server: Failed to execute 
helper program (No such file or directory)

Might it be that I'm missing some file that gconfd-2 needs and for some 
reason is not included in the beta distribution?


BTW, I noticed another few little bugs. Having cleared the xpm problem, 
GtkIconFileSelection now works, but it cannot handle extended chars in 
paths - and my 'home' path just happens to have an eacute in it ;-&gt;
The error message is the classic:

Pango-WARNING **: Invalid UTF-8 string passed to pango_layout_set_text()

Which usually means you've forgotten to set the php-gtk.codepage in the 
ini file, but this was not the problem, and extended chars in other 
widgets e.g. GtkTextView are handled OK.

Also, it doesnt know what to do with a drive root folder e.g. 'C:\'. It 
takes off the trailing backslash and produces the following:

WARNING **: Can not stat folder: C:

However, type 'C:/' (notice trailing *slash*) in the 'Go to' field and it 
will work. But 'C:\WINNT' now becomes 'C:/\WINNT', etc. etc.

And finally, it doesn't know about the scroll wheel. Grrr. I guess that, 
for the foreseeable future, I will have to continue annoying my Windoze 
users with the Gtk file selector widgets :-)

&gt; have fun ;)
I sure am ;-)

Cheers,
-- 
André
===========================================================
Black Holes were created when God divided by zero.

Now playing:
Patti Smith - Twelve - White Rabbit

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070620031324</emailId><senderName>"Steph"</senderName><senderEmail>steph.fox@virgin.net</senderEmail><timestampReceived>2007-06-20 03:13:24-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Shared Extensions</subject><body>

Hi Bob,

Yeah 'Windows already does this' because the build system forces it. I think 
it does the same in the PHP build system though, it's not automatically 
linked. (I _think_ - it's been well over a year since I looked into this.)

It's probably better to go with fixing doze than *nix, assuming I'm right 
about it not being related under doze. Then (assuming it works and that 
wasn't why I did what I did in the first place) we need to change all the 
main source files apart from php_gtk.c, which is actually the only correct 
one.

If it doesn't work, there's another option that doesn't touch on either 
build system. But I think it'd be cleaner to fix doze.

- Steph


&gt; LOL.
&gt; The way I was told, it used to work fine in Linux until someone went and
&gt; fixed it for Windows, so I went and told the group of kids behind the
&gt; drugstore who are anti-microsoft-without-a-cause the whole story without
&gt; thinking twice.
&gt;
&gt; &lt;winky face emoticon&gt;
&gt;
&gt; I have crafted a fix which, "works on my box" without touching the main
&gt; source at all, just the m4 file so Windows would not be affected.
&gt; However Anant had some concerns about it that were over my head since it
&gt; works without problems here, I will let him express those. It is
&gt; attached to this thing :p
&gt;
&gt; I have only actually tested it on GtkExtra, GtkSourceView, and LibSexy.
&gt; However as I already told Anant we also need to modify it so that the
&gt; extensions are not "extra.so",  "sourceview.so" and "libsexy.so" as they
&gt; need some sort of prefix. I believe windows already does this.
&gt;
&gt; - bob.
&gt;
&gt; Steph Fox wrote:
&gt;&gt; Hi Anant,
&gt;&gt;
&gt;&gt; What took you guys so long anyway? ;)
&gt;&gt;
&gt;&gt; COMPILE_DL_* is the PHP version of events, and PHP-GTK is a PHP
&gt;&gt; extension. So of course, when writing my first and only extension, I
&gt;&gt; copied the #define format I saw in php_gtk.c. After all, "It works on my
&gt;&gt; box..."
&gt;&gt;
&gt;&gt; Please don't commit any fixes without testing on both platforms first,
&gt;&gt; in case that's been inadvertently used to distinguish between platforms
&gt;&gt; somewhere deep in the source. But it's just a case of testing for
&gt;&gt; extname=="php-gtk" in the EXTENSION() definition, where it says:
&gt;&gt;
&gt;&gt; cflags = "/D COMPILE_DL_" + EXT + "2 /D " + EXT + "_EXPORTS=1" + cflags;
&gt;&gt;
&gt;&gt; and adapting accordingly.
&gt;&gt;
&gt;&gt; - Steph
&gt;&gt;
&gt;&gt;
&gt;&gt;&gt; Hi All,
&gt;&gt;&gt;
&gt;&gt;&gt; Bob (Majdak Jr.) has figured out why shared extensions haven't been
&gt;&gt;&gt; working on *nix all this while, and I've traced the issue to this 
&gt;&gt;&gt; commit:
&gt;&gt;&gt;
&gt;&gt;&gt; http://cvs.php.net/viewvc.cgi/php-gtk/ext/libglade/php_libglade.c?r1=1.7&amp;r2=1.8
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; That commit changes #ifdef PHP_GTK_COMPILE_DL_LIBGLADE to #ifdef
&gt;&gt;&gt; COMPILE_DL_LIBGLADE2. Apparently the windows build system defines
&gt;&gt;&gt; COMPILE_DL_&lt;extension&gt;2, but the *nix system is still defining
&gt;&gt;&gt; PHP_GTK_COMPILE_DL_&lt;extension&gt; whenever a shared extension is to be
&gt;&gt;&gt; built.
&gt;&gt;&gt;
&gt;&gt;&gt; This has carried on into all the other extensions too, with the result
&gt;&gt;&gt; being that none of them build as a shared .so on *nix.
&gt;&gt;&gt;
&gt;&gt;&gt; Can we agree on a single #define please? :)
&gt;&gt;&gt;
&gt;&gt;&gt; Cheers,
&gt;&gt;&gt; -- 
&gt;&gt;&gt; Anant
&gt;&gt;&gt;
&gt;&gt;&gt; -- 
&gt;&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;&gt;&gt;
&gt;&gt;
&gt;


--------------------------------------------------------------------------------


&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070620070532</emailId><senderName>Tom Rogers</senderName><senderEmail>trogers@kwikin.com</senderEmail><timestampReceived>2007-06-20 07:05:32-0400</timestampReceived><subject>Re[2]: [PHP-GTK-DEV] Shared Extensions</subject><body>

Hi Steph,

Wednesday, June 20, 2007, 1:13:24 PM, you wrote:


S&gt; If it doesn't work, there's another option that doesn't touch on either
S&gt; build system. But I think it'd be cleaner to fix doze.

Now there's a challenge :)

-- 
regards,
Tom

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070620123757</emailId><senderName>"frederic dot maziere1 at neuf dot fr"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-06-20 12:37:57-0400</timestampReceived><subject>[PHP-GTK-DEV] #41748 [NEW]: exif_read_data returns corrupted GPS data</subject><body>

From:             frederic dot maziere1 at neuf dot fr
Operating system: W2000 and WXP
PHP version:      4.4.7
PHP Bug Type:     PHP-GTK related
Bug description:  exif_read_data returns corrupted GPS data

Description:
------------
While it works on many files exif_read_data returns corrupted GPS data on
others.

exif_read_data returns bad latitude and longitude values for the following
file : http://trekmaniac3.free.fr/Canaries2006/images/thumb/IMG_3801.jpg

FYI, xnview, robogeo (and others) are able to read and return correct GPS
data from that file. The expected values are :
latitude=27°38'26.39"
longitude=17°58'49.93"

When analyzing the data returns by exif_read_data, it looks like there's a
3 value shift in the array of the rational values returned.

This problem occurs in every php version I tried : 4.3.10 or 5.2.0







Reproduce code:
---------------
$exif=exif_read_data('IMG_3801.jpg');
foreach ($exif as $key =&gt; $section) {
		print_r($section);
    foreach ($section as $name =&gt; $val) {
        echo "$key.$name: $val&lt;br /&gt;\n"; 
        
      }
}

Expected result:
----------------
GPSLatitude.0: 452984832/16777216
GPSLatitude.1: 637534208/16777216
GPSLatitude.2: 442812995/16777216

GPSLongitude.0:285212672/16777216
GPSLongitude.1:973078528/16777216
GPSLongitude.2:837753660/16777216

...

Actual result:
--------------
GPS tags returned :

GPSLatitude.0: 542065991/808334710
GPSLatitude.1: 3224110/452984832
GPSLatitude.2: 16777216/637534208
GPSLongitude.0: 16777216/442812995
GPSLongitude.1: 16777216/285212672
GPSLongitude.2: 16777216/973078528
GPSTimeStamp.0: 16777216/837753660
GPSTimeStamp.1: 16777216/9
GPSTimeStamp.2: 1/49


-- 
Edit bug report at http://bugs.php.net/?id=41748&amp;edit=1
-- 
Try a CVS snapshot (PHP 4.4): http://bugs.php.net/fix.php?id=41748&amp;r=trysnapshot44
Try a CVS snapshot (PHP 5.2): http://bugs.php.net/fix.php?id=41748&amp;r=trysnapshot52
Try a CVS snapshot (PHP 6.0): http://bugs.php.net/fix.php?id=41748&amp;r=trysnapshot60
Fixed in CVS:                 http://bugs.php.net/fix.php?id=41748&amp;r=fixedcvs
Fixed in release:             http://bugs.php.net/fix.php?id=41748&amp;r=alreadyfixed
Need backtrace:               http://bugs.php.net/fix.php?id=41748&amp;r=needtrace
Need Reproduce Script:        http://bugs.php.net/fix.php?id=41748&amp;r=needscript
Try newer version:            http://bugs.php.net/fix.php?id=41748&amp;r=oldversion
Not developer issue:          http://bugs.php.net/fix.php?id=41748&amp;r=support
Expected behavior:            http://bugs.php.net/fix.php?id=41748&amp;r=notwrong
Not enough info:              http://bugs.php.net/fix.php?id=41748&amp;r=notenoughinfo
Submitted twice:              http://bugs.php.net/fix.php?id=41748&amp;r=submittedtwice
register_globals:             http://bugs.php.net/fix.php?id=41748&amp;r=globals
PHP 3 support discontinued:   http://bugs.php.net/fix.php?id=41748&amp;r=php3
Daylight Savings:             http://bugs.php.net/fix.php?id=41748&amp;r=dst
IIS Stability:                http://bugs.php.net/fix.php?id=41748&amp;r=isapi
Install GNU Sed:              http://bugs.php.net/fix.php?id=41748&amp;r=gnused
Floating point limitations:   http://bugs.php.net/fix.php?id=41748&amp;r=float
No Zend Extensions:           http://bugs.php.net/fix.php?id=41748&amp;r=nozend
MySQL Configuration Error:    http://bugs.php.net/fix.php?id=41748&amp;r=mysqlcfg

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070620211438</emailId><senderName>Elizabeth Smith</senderName><senderEmail>emsmith@elizabethmariesmith.com</senderEmail><timestampReceived>2007-06-20 21:14:38-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] New version of the wix installer(again...)</subject><body>

Fernando Correa da Conceição wrote:
&gt; I uploaded a new version of the installer, at 
&gt; http://fernando.viaserver.com.br/installer/
&gt; It have all files from the binary package, but I removed the folder 
&gt; "debug_pack", this reduce the size of the installer in 3 mb, as the 
&gt; vast base of user will not debug the php-gtk, I think we can provide 
&gt; this a separate download.
That's fine
&gt; Please try it and report what you think.
&gt;
&gt; What is missing (if is important...)
&gt;
&gt; 1. Split each translation. So you can install only your lang.
We probably shouldn't be shipping or installing locale files 
(translations) After all, the locales just for glib are bigger than all 
the glib dlls! The msi should ship with only english (perhaps later we 
can create different versions of the msi for different locales, using a 
different language xml file during the build, and installing all the 
needed locale files so the whole thing is in a native language)
&gt; 2. Add the PEAR.
go-pear.bat and pear.phar should be all you need
&gt; 3. A nice icon for the installer and the .phpw files
When I have time - I also have some new background pixmaps to use
&gt; 4. Split the extensions and dependencies, so you can install only the 
&gt; extensions you need.
This is the big issue, your feature tree is set up funny - it should 
look like this - typical should install gtk, php, and php-gtk2 without 
extensions,
full should install everything except the stuff in 'additional features'

--gtk2.10 runtime
--php 5.2.3 runtime
----php 5.2.3 extensions
------mysqli
------pdo
------(and so on)
--php-gtk2
----php-gtk2 extensions
------souceview
------glade
------(and so on)
--additional features
----demos
----pear
----register .phpw
&gt; Know problems (for me...):
&gt;
&gt; 1. I can not make the sourceview works correct, see this post by kksou:
&gt; http://www.kksou.com/php-gtk2/articles/use-GtkSourceView-to-display-source-code---Part-1.php 
&gt;
&gt;
&gt; I used this but can not make it works.
&gt; Now I found the error, and it is in you package, Elizabeth. try this 
&gt; sample(from the url above) with your package and get an error like this:
&gt;
&gt; Fatal error: Uncaught exception 'PhpGtkConstructException' with 
&gt; message 'could not construct GtkSourceBuffer object' in
&gt; C:\teste.phpw:8
&gt; Stack trace:
&gt; #0 C:\teste.phpw(8): GtkSourceBuffer::new_with_language(NULL)
&gt; #1 {main}
&gt;  thrown in C:\teste.phpw on line 8
&gt;
&gt; But using the language-specs from 1.6 as posted by kksou works fine. 
&gt; But we do not need add it to documents and settings(as kksou said), 
&gt; only change the ones that are in the package.
&gt;
&gt; So after all this, please test the installer, but it do not contains 
&gt; the fix above(I found this while I am writing this email, so in the 
&gt; next version of the installer I will add it).
&gt;
&gt; Fernando Correa da Conceição
&gt;
The issue is not my release, it's that tutorial - you're getting the 
error because the mimetype for php is incorrect -try it with 
"application/x-php" - you want to use the newer spec files I included - 
for example the newer php language spec file has php5 features such as 
try/catch, ect that the older 1.6 specs do not

PS, the language spec files are just xml, you can open them up and the 
second line shows the mime types to use ;)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070622172742</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-06-22 17:27:42-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GD as shared extension</subject><body>

Andrei Zmievski wrote:
&gt; What would be ideal is to have new_from_gd() work only if GD is loaded 
&gt; and simply output an error message if it's not. But I'm not sure if that 
&gt; is possible..
&gt; 
&gt; -Andrei

As far as I can tell, it is impossible (unless you want to find a way to 
do it) - this is just a fix to let GD work with either static or shared...

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070622215113</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-06-22 21:51:13-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] patch: GtkTreeView::get_drag_dest_row</subject><body>

Hi Bob,

&gt; So, I have rewritten that method override and now it is not crashing at
&gt; all. Attached a patch is, mmm. Also: what do I need to do to get that
&gt; method in the documentation, set_drag_dest_row() is but
&gt; get_drag_dest_row() is not.

Thanks for the patch. Committed to CVS. As for the docs, I just updated
them. The documentation tutorial is at:
http://gtk.php.net/manual/en/tutorials.doccing.php.

Patches welcome (send them to the php-gtk-doc list) :)

&gt; I am also interested in getting 2.10 stuff in the documentation like
&gt; GtkStatusIcon.

Sure, that would be great! We're working on getting the new classes into
the documentation, it should happen soon. Keep an eye on the php-gtk-doc
list.

Cheers,
-- 
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070623074924</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-06-23 07:49:24-0400</timestampReceived><subject>[PHP-GTK-DEV] docs updates broken?</subject><body>

I'm thinking the docs updates are broken again.. anyone?

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070628003009</emailId><senderName>       Fernando_Correa_da_Conceição</senderName><senderEmail></senderEmail><timestampReceived>2007-06-28 00:30:09-0400</timestampReceived><subject>[PHP-GTK-DEV] Bug on GtkScintilla on Widows using =?ISO-8859-1?Q?=E9?=</subject><body>

Hi.
I try to use the scintilla on windows but I can not. It simple dies. 
When I type common chars(like the ones used in en) there is no problem, 
and it works well, but when I try to use some chars that exists in pt_BR 
like áé the application die, there is no one message in the command 
prompt, and apears a message from windows that ask me if I want report 
this error to microsoft(this box is common when there is an error in 
windows).

Thanks

Fernando Correa da Conceição

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070628165642</emailId><senderName>"john dot navratil at sbcglobal dot net"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-06-28 16:56:42-0400</timestampReceived><subject>[PHP-GTK-DEV] #41843 [NEW]: Set text on cloned GtkLabel gives segmentation fault</subject><body>

From:             john dot navratil at sbcglobal dot net
Operating system: Fedora 7
PHP version:      5.2.3
PHP Bug Type:     PHP-GTK related
Bug description:  Set text on cloned GtkLabel gives segmentation fault

Description:
------------
There is an apparent failure in cloning a GtkLabel (and perhaps other
objects).  I tried to clone an existing label in order to capture all its
properties but got a segmentation fault when reseting the text.

Reproduce code:
---------------
&lt;?php
if (!extension_loaded('php-gtk'))
        dl('php_gtk2.so');

echo "Start\n";
$lbl = new GtkLabel('nada');
echo "Label created\n";
$lbl-&gt;set_text('Text');
echo "Text set\n";
$lbl2 = clone $lbl;
echo "Label cloned\n";
$lbl2-&gt;set_text('New text'); // &lt;-- Fails here
echo "Text reset\n";
?&gt;


Expected result:
----------------
Start
Label created
Text set
Label cloned
Text reset


Actual result:
--------------
Start
Label created
Text set
Label cloned
Segmentation fault


-- 
Edit bug report at http://bugs.php.net/?id=41843&amp;edit=1
-- 
Try a CVS snapshot (PHP 4.4): http://bugs.php.net/fix.php?id=41843&amp;r=trysnapshot44
Try a CVS snapshot (PHP 5.2): http://bugs.php.net/fix.php?id=41843&amp;r=trysnapshot52
Try a CVS snapshot (PHP 6.0): http://bugs.php.net/fix.php?id=41843&amp;r=trysnapshot60
Fixed in CVS:                 http://bugs.php.net/fix.php?id=41843&amp;r=fixedcvs
Fixed in release:             http://bugs.php.net/fix.php?id=41843&amp;r=alreadyfixed
Need backtrace:               http://bugs.php.net/fix.php?id=41843&amp;r=needtrace
Need Reproduce Script:        http://bugs.php.net/fix.php?id=41843&amp;r=needscript
Try newer version:            http://bugs.php.net/fix.php?id=41843&amp;r=oldversion
Not developer issue:          http://bugs.php.net/fix.php?id=41843&amp;r=support
Expected behavior:            http://bugs.php.net/fix.php?id=41843&amp;r=notwrong
Not enough info:              http://bugs.php.net/fix.php?id=41843&amp;r=notenoughinfo
Submitted twice:              http://bugs.php.net/fix.php?id=41843&amp;r=submittedtwice
register_globals:             http://bugs.php.net/fix.php?id=41843&amp;r=globals
PHP 3 support discontinued:   http://bugs.php.net/fix.php?id=41843&amp;r=php3
Daylight Savings:             http://bugs.php.net/fix.php?id=41843&amp;r=dst
IIS Stability:                http://bugs.php.net/fix.php?id=41843&amp;r=isapi
Install GNU Sed:              http://bugs.php.net/fix.php?id=41843&amp;r=gnused
Floating point limitations:   http://bugs.php.net/fix.php?id=41843&amp;r=float
No Zend Extensions:           http://bugs.php.net/fix.php?id=41843&amp;r=nozend
MySQL Configuration Error:    http://bugs.php.net/fix.php?id=41843&amp;r=mysqlcfg

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070628175425</emailId><senderName></senderName><senderEmail>anant</senderEmail><timestampReceived>2007-06-28 17:54:25-0400</timestampReceived><subject>[PHP-GTK-DEV] #41843 [Opn-&gt;Bgs]: Set text on cloned GtkLabel gives segmentation fault</subject><body>

 ID:               41843
 Updated by:       anant@php.net
 Reported By:      john dot navratil at sbcglobal dot net
-Status:           Open
+Status:           Bogus
 Bug Type:         PHP-GTK related
 Operating System: Fedora 7
 PHP Version:      5.2.3
 New Comment:

Thank you for taking the time to write to us, but this is not
a bug. Please double-check the documentation available at
http://www.php.net/manual/ and the instructions on how to report
a bug at http://bugs.php.net/how-to-report.php

Cloning is not supported in PHP-GTK yet. We're hoping to resolve this 
soon.


Previous Comments:
------------------------------------------------------------------------

[2007-06-28 16:56:42] john dot navratil at sbcglobal dot net

Description:
------------
There is an apparent failure in cloning a GtkLabel (and perhaps other
objects).  I tried to clone an existing label in order to capture all
its properties but got a segmentation fault when reseting the text.

Reproduce code:
---------------
&lt;?php
if (!extension_loaded('php-gtk'))
        dl('php_gtk2.so');

echo "Start\n";
$lbl = new GtkLabel('nada');
echo "Label created\n";
$lbl-&gt;set_text('Text');
echo "Text set\n";
$lbl2 = clone $lbl;
echo "Label cloned\n";
$lbl2-&gt;set_text('New text'); // &lt;-- Fails here
echo "Text reset\n";
?&gt;


Expected result:
----------------
Start
Label created
Text set
Label cloned
Text reset


Actual result:
--------------
Start
Label created
Text set
Label cloned
Segmentation fault



------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=41843&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070629002736</emailId><senderName>"john dot navratil at sbcglobal dot net"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-06-29 00:27:36-0400</timestampReceived><subject>[PHP-GTK-DEV] #41843 [Bgs]: Set text on cloned GtkLabel gives segmentation fault</subject><body>

 ID:               41843
 User updated by:  john dot navratil at sbcglobal dot net
 Reported By:      john dot navratil at sbcglobal dot net
 Status:           Bogus
 Bug Type:         PHP-GTK related
 Operating System: Fedora 7
 PHP Version:      5.2.3
 New Comment:

Fair enough!  I assumed as much and will look forward to object cloning
in the future.

Meanwhile, we might wish to review the docs at
"language.oop5.cloning.php" which refers to cloning GTK (not +) windows.
 It might also be a reasonable idea to implement the clone methods to
throw an Exception("Cloning not supported") in the meantime.  A
segmentation fault is a bit of a foul, don't you think?

I know it's beta software and I'm sure there is plenty to do.  Many
thanks for what has been provided to date.


Previous Comments:
------------------------------------------------------------------------

[2007-06-28 17:54:25] anant@php.net

Thank you for taking the time to write to us, but this is not
a bug. Please double-check the documentation available at
http://www.php.net/manual/ and the instructions on how to report
a bug at http://bugs.php.net/how-to-report.php

Cloning is not supported in PHP-GTK yet. We\'re hoping to resolve this

soon.

------------------------------------------------------------------------

[2007-06-28 16:56:42] john dot navratil at sbcglobal dot net

Description:
------------
There is an apparent failure in cloning a GtkLabel (and perhaps other
objects).  I tried to clone an existing label in order to capture all
its properties but got a segmentation fault when reseting the text.

Reproduce code:
---------------
&lt;?php
if (!extension_loaded('php-gtk'))
        dl('php_gtk2.so');

echo "Start\n";
$lbl = new GtkLabel('nada');
echo "Label created\n";
$lbl-&gt;set_text('Text');
echo "Text set\n";
$lbl2 = clone $lbl;
echo "Label cloned\n";
$lbl2-&gt;set_text('New text'); // &lt;-- Fails here
echo "Text reset\n";
?&gt;


Expected result:
----------------
Start
Label created
Text set
Label cloned
Text reset


Actual result:
--------------
Start
Label created
Text set
Label cloned
Segmentation fault



------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=41843&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070629072532</emailId><senderName>"Sjoerd Linders"</senderName><senderEmail>sjoerd@funsoftware.nl</senderEmail><timestampReceived>2007-06-29 07:25:32-0400</timestampReceived><subject>=?iso-8859-1?Q?RE:_=5BPHP-GTK-DEV=5D_Bug_on_GtkScintilla_on_Widows_usin?=</subject><body>

Hello Fernando,

keep in mind that GtkScintilla only accepts UTF8 encoding,
see that specification to see how this works.

mvg,
Sjoerd


-----Oorspronkelijk bericht-----
Van: Fernando Correa da Conceição [mailto:conceicao.fernando@gmail.com]
Verzonden: Thursday, June 28, 2007 02:30
Aan: PHP-GTK dev
Onderwerp: [PHP-GTK-DEV] Bug on GtkScintilla on Widows using é


Hi.
I try to use the scintilla on windows but I can not. It simple dies.
When I type common chars(like the ones used in en) there is no problem,
and it works well, but when I try to use some chars that exists in pt_BR
like áé the application die, there is no one message in the command
prompt, and apears a message from windows that ask me if I want report
this error to microsoft(this box is common when there is an error in
windows).

Thanks

Fernando Correa da Conceição

--
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070510181749</emailId><senderName>"n dot escuder at intra-links dot com"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-05-10 18:17:49-0400</timestampReceived><subject>[PHP-GTK-DEV] #39539 [Opn]: new GtkEventBox crash</subject><body>

 ID:               39539
 User updated by:  n dot escuder at intra-links dot com
 Reported By:      n dot escuder at intra-links dot com
 Status:           Open
 Bug Type:         PHP-GTK related
 Operating System: Linux
 PHP Version:      5.2.0
 New Comment:

If i build on the first machine and try on it or another = crash.

But if i build on another and try on another = no crash.

So it's a dependancy problem.

Sorry.


Previous Comments:
------------------------------------------------------------------------

[2007-01-26 19:38:28] n dot escuder at intra-links dot com

Sorry for the long time of the answer.

So i try with php 5.2.0 and i checkout the lastest version of php_gtk
and it always crash... i don't known why...

gdb backtrace :
#178 0xbeeff400 in ?? ()
#179 0x001000b7 in ?? ()
#180 0xb76a3600 in zim_GtkWidget_show_now () from
/usr/lib/php/extensions/php_gtk2.so
Previous frame inner to this frame (corrupt stack?)

X11R7 Version 7.1
GTK+ Version 2.10.6

For information i actually use and old php_gtk2 checkout version that
work fine.

If you want i can give you an ssh access.

See You

------------------------------------------------------------------------

[2006-12-15 01:00:00] php-gtk-dev at lists dot php dot net

No feedback was provided for this bug for over a week, so it is
being suspended automatically. If you are able to provide the
information that was originally requested, please do so and change
the status of the bug back to "Open".

------------------------------------------------------------------------

[2006-12-07 05:02:09] andrei@php.net

Please try using this CVS snapshot:

  http://snaps.php.net/php4-STABLE-latest.tar.gz
 
For Windows:
 
  http://snaps.php.net/win32/php4-win32-STABLE-latest.zip

I cannot reproduce this with PHP-GTK CVS and PHP 5.2.0RC4-dev.

------------------------------------------------------------------------

[2006-11-16 21:57:27] n dot escuder at intra-links dot com

Description:
------------
php gtk 2 from CVS crash when creating an object of type GtkEventBox()

Reproduce code:
---------------
new GtkEventBox();

Expected result:
----------------
None

Actual result:
--------------
Crash the program


------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=39539&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070510181818</emailId><senderName>"n dot escuder at intra-links dot com"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-05-10 18:18:18-0400</timestampReceived><subject>[PHP-GTK-DEV] #39539 [Opn-&gt;Csd]: new GtkEventBox crash</subject><body>

 ID:               39539
 User updated by:  n dot escuder at intra-links dot com
 Reported By:      n dot escuder at intra-links dot com
-Status:           Open
+Status:           Closed
 Bug Type:         PHP-GTK related
 Operating System: Linux
 PHP Version:      5.2.0
 New Comment:

If i build on the first machine and try on it or another = crash.

But if i build on another and try on another = no crash.

So it's a dependancy problem.

Sorry.


Previous Comments:
------------------------------------------------------------------------

[2007-05-10 18:17:49] n dot escuder at intra-links dot com

If i build on the first machine and try on it or another = crash.

But if i build on another and try on another = no crash.

So it's a dependancy problem.

Sorry.

------------------------------------------------------------------------

[2007-01-26 19:38:28] n dot escuder at intra-links dot com

Sorry for the long time of the answer.

So i try with php 5.2.0 and i checkout the lastest version of php_gtk
and it always crash... i don't known why...

gdb backtrace :
#178 0xbeeff400 in ?? ()
#179 0x001000b7 in ?? ()
#180 0xb76a3600 in zim_GtkWidget_show_now () from
/usr/lib/php/extensions/php_gtk2.so
Previous frame inner to this frame (corrupt stack?)

X11R7 Version 7.1
GTK+ Version 2.10.6

For information i actually use and old php_gtk2 checkout version that
work fine.

If you want i can give you an ssh access.

See You

------------------------------------------------------------------------

[2006-12-15 01:00:00] php-gtk-dev at lists dot php dot net

No feedback was provided for this bug for over a week, so it is
being suspended automatically. If you are able to provide the
information that was originally requested, please do so and change
the status of the bug back to "Open".

------------------------------------------------------------------------

[2006-12-07 05:02:09] andrei@php.net

Please try using this CVS snapshot:

  http://snaps.php.net/php4-STABLE-latest.tar.gz
 
For Windows:
 
  http://snaps.php.net/win32/php4-win32-STABLE-latest.zip

I cannot reproduce this with PHP-GTK CVS and PHP 5.2.0RC4-dev.

------------------------------------------------------------------------

[2006-11-16 21:57:27] n dot escuder at intra-links dot com

Description:
------------
php gtk 2 from CVS crash when creating an object of type GtkEventBox()

Reproduce code:
---------------
new GtkEventBox();

Expected result:
----------------
None

Actual result:
--------------
Crash the program


------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=39539&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070510181852</emailId><senderName>"Escuder Nicolas"</senderName><senderEmail>n.escuder@intra-links.com</senderEmail><timestampReceived>2007-05-10 18:18:52-0400</timestampReceived><subject>[PHP-GTK-DEV] GdkScreen::get_monitor_geometry</subject><body>


Hello,

 

It's seem to be a problems with this :

 

 

$screen = $object-&gt;get_screen();

$rect = new GdkRectangle( 0, 0, 0, 0 );

$screen-&gt;get_monitor_geometry( 1, $rect );

 

$rect is always egals to { 0, 0, 0, 0 }

 

 

Escuder Nicolas



 



</body></email><email><emailId>20070514125308</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-05-14 12:53:08-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Re: new php-gtk2 build!</subject><body>

Hi Elizabeth,

Would you please talk with Andrei about the possibility of putting your wix 
installer into CVS, since you're writing it anyway? It's not very useful to 
have bits of project scattered around the WWW - not for users, and not for 
devs either. It might also make sense to keep in line with John's installer, 
since that is the one most people will use if they only really wanted PHP in 
the first place - no?

http://cvs.php.net/viewvc.cgi/win-installer/

Or are you intending to offer a bundle, pure and simple?

There's some manifest issue causing the errors kksou was seeing earlier. 
(Try googling on the error message itself.) I think you'll also find that's 
why Edin struggled when it came to getting PHP distros up and running with 
the newer MS compilers.

- Steph

----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: &lt;php-gtk-general@lists.php.net&gt;
Sent: Monday, May 14, 2007 1:32 PM
Subject: [PHP-GTK] Re: new php-gtk2 build!


&gt; kksou wrote:
&gt;&gt; Hi,
&gt;&gt;
&gt;&gt; In case you're not aware, Elizabeth Smith has just released the latest
&gt;&gt; php-gtk2 build on http://perisama.net
&gt;&gt;
&gt;&gt; These are windows builds for PHP and PHP-GTK2, both latest releases and
&gt;&gt; eventually snapshost as well.
&gt;&gt; More details here:
&gt;&gt; http://elizabethmariesmith.com/2007/05/13/introducing-perisamanet/
&gt;&gt;
&gt;&gt; I'll start a series of examples to demo some of the new features of the
&gt;&gt; latest php-gtk2 build. The first one shows the use of GD2 right insdie
&gt;&gt; php-gtk2:
&gt;&gt;
&gt;&gt; http://www.kksou.com/php-gtk2/articles/draw-a-simple-bar-graph-using-GD2.php
&gt;&gt;
&gt;&gt; Regards,
&gt;&gt; /kksou
&gt;&gt;
&gt;&gt; p.s. I do encounter some errors and warning messages, though.
&gt;&gt;
&gt;&gt; I've asked Elizabeth. It seems the installer runs ok on her machine. I'm
&gt;&gt; using a standard winxp. The php-gtk.msi runs fine, but when I try running
&gt;&gt; the "php.exe", it always tells me "The system cannot execulte the 
&gt;&gt; specified
&gt;&gt; program."  If you have any clues, please kindly let me know.
&gt;&gt;
&gt;&gt; Also, for the other build "php-gtk2.8.zip", it runs ok. But there's 
&gt;&gt; always a
&gt;&gt; warning message, "PHP Warning:  PHP Startup: Unable to load dynamic 
&gt;&gt; library './ext\php_pdo_sqlite.dll' - This application has failed to start 
&gt;&gt; because the application configuration is incorrect. Reinstalling the 
&gt;&gt; application may fix this problem.
&gt;&gt; in Unknown on line 0"
&gt;&gt; Any idea what's this?
&gt;
&gt; A few explanations - first of all the builds should be working fine if you 
&gt; download the files from the perisama downloads area - there are msvc6 and 
&gt; msvc8 versions and they work fine ;)  If you don't want to mess with 
&gt; installing the new windows runtime, get the msvc6 versions! However, 
&gt; you'll need to download the gtk libraries separately and set stuff up 
&gt; because the complete packages and installer builds are not finished yet.
&gt;
&gt; The installer source code is up at http://persiama.net/installer - it 
&gt; currently uses wix 2 and I need to upgrade it to wix3.  I have NOT built 
&gt; an installer with the new files yet!  I'll remove the old msi I built to 
&gt; keep people from getting confused I guess. (I'm getting ready for php|tek 
&gt; and it's keeping me kind of busy but I wanted to get the basic builds 
&gt; running at least)  The php-gtk2.8.zip is a really old build that was done 
&gt; for someone else and is just up to play with.  If you want a build you 
&gt; know will work get one from the downloads area.
&gt;
&gt; -- 
&gt; PHP-GTK General Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070524044540</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-05-24 04:45:40-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Bug in build for GtkExtra</subject><body>

Hi Fernando,

&gt; PHP Warning:  PHP Startup: Unable to load dynamic library
&gt; '/opt/php5/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so' -
&gt; /opt/php5/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so:
&gt; undefined symbol: gtkextra_ext_entry in Unknown on line 0
&gt; 
&gt; So the app is build with GtkExtra! But as it is the wrong version there
&gt; is some functions missing.

This issue has been fixed in CVS. Thanks!

Cheers,
-- 
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070526001013</emailId><senderName>Pablo DallOglio</senderName><senderEmail>pablo@dalloglio.net</senderEmail><timestampReceived>2007-05-26 00:10:13-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] website</subject><body>

Thanks Steph and Anant, I'll digg into.

Pablo

Em SÃ¡b, 2007-05-26 Ã s 00:51 +0100, Steph Fox escreveu:
&gt; You could start by downloading the website from CVS and looking at what's 
&gt; actually there. It'd make a lot more sense than designing something that 
&gt; then needs to be integrated into it!
&gt; 
&gt; If you look at the admin page source you'll see how you can use that to make 
&gt; areas of the site visible or non-visible to self/others and run sandboxed 
&gt; tests on the live server. But please don't do that from scratch.
&gt; 
&gt; ----- Original Message ----- 
&gt; From: "Pablo DallOglio" &lt;pablo@dalloglio.net&gt;
&gt; To: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
&gt; Sent: Saturday, May 26, 2007 12:47 AM
&gt; Subject: [PHP-GTK-DEV] website
&gt; 
&gt; 
&gt; &gt; Hello,
&gt; &gt;
&gt; &gt; The application repository from gtk.php.net is not working fine.
&gt; &gt; How can I help ?
&gt; &gt; Andrei told me Steph was the best person to guide me through.
&gt; &gt;
&gt; &gt; I could write an entirely new app repository, but how can I integrate
&gt; &gt; this to the website ? design and technology ?
&gt; &gt;
&gt; &gt; bests
&gt; &gt; Pablo
&gt; &gt;
&gt; &gt; -- 
&gt; &gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; &gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; &gt; 
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070528184428</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-05-28 18:44:28-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta?</subject><body>

&gt; I certainly don't want us to be the sole cause of a
&gt; holdup on the beta,
&gt; or a complication in the overall development process.

Hey Madeleine!

No, it's not just you - it's more that you're the only PHP-GTK developer 
that I know has a large number of win98 end users. You weren't the only one 
to mention their existence when talk of withdrawing support first came up in 
PHP circles though, and although PHP itself has since gone ahead and 
withdrawn that support, I think it's probably better to have PHP-GTK 2 
beta/PHP 5.2.0/GTK+ 2.6.10 available in back-compatible mode than to drop 
everyone in it without warning. 'Specially as it's been a loooooooooong 
while since the alpha; there are a lot of fixes between alpha and beta.

We can put a big fat warning on this release (as if it isn't enough that 
there are two options.... again...!) and on the downloads page, saying that 
support for win98 will be dropped before the next PHP-GTK release. But 
unlike PHP, we don't have a 'last good release' for win98 users at present, 
just a very frustrating one. It's not a good advert for the project :-\

There are also plenty of things we could put on the downloads page that will 
give devs ammunition when it comes to pushing for upgrades at work...

- Steph

&gt;
&gt; Madeleine D.
&gt;
&gt;
&gt;
&gt; Steph Fox wrote:
&gt;
&gt;&gt; Hey Andrei,
&gt;&gt;
&gt;&gt; Elizabeth has stuff to go in I still need to check,
&gt; otherwise we risk
&gt;&gt; it not working under Win98 (all Madeleine's clients
&gt; down at one
&gt;&gt; stroke). She also is working on an installer, but I
&gt; don't know how far
&gt;&gt; she's got with that.
&gt;&gt;
&gt;&gt; We also want to have two win32 releases for much the
&gt; same reason - one
&gt;&gt; Elizabeth can roll using the faster non-ZTS stuff
&gt; Edin makes available
&gt;&gt; these days, and one I can roll using MSVC6/ZTS that
&gt; will work on older
&gt;&gt; machines.
&gt;&gt;
&gt;&gt; I'm heading out to Norway at the end of the first
&gt; week in June for a
&gt;&gt; few days, but otherwise around - just busy (when
&gt; not?)
&gt;&gt;
&gt;&gt; - Steph
&gt;&gt;
&gt;&gt; ----- Original Message ----- From: "Andrei Zmievski"
&gt;
&gt;&gt; &lt;andrei@gravitonic.com&gt;
&gt;&gt; To: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
&gt;&gt; Sent: Saturday, May 26, 2007 12:10 AM
&gt;&gt; Subject: [PHP-GTK-DEV] Beta?
&gt;&gt;
&gt;&gt;
&gt;&gt;&gt; I think it's time to release the beta, since we're
&gt; doing pretty well
&gt;&gt;&gt; on API coverage and people are clamoring for a new
&gt; release.
&gt;&gt;&gt; Unfortunately, I won't be able to do this until at
&gt; least June 14th,
&gt;&gt;&gt; since I will be far away without any Internet
&gt; access. Anyone up for
&gt;&gt;&gt; making a beta release?
&gt;&gt;&gt;
&gt;&gt;&gt; -Andrei
&gt;&gt;&gt;
&gt;&gt;&gt; -- 
&gt;&gt;&gt; PHP-GTK Development Mailing List
&gt; (http://gtk.php.net/)
&gt;&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt;
&gt; ____________________________________________________________________________________You 
&gt; snooze, you lose. Get messages ASAP with AutoCheck
&gt; in the all-new Yahoo! Mail Beta.
&gt; http://advision.webevents.yahoo.com/mailbeta/newmail_html.html
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070404035325</emailId><senderName>       Fernando_Correa_da_Conceição</senderName><senderEmail></senderEmail><timestampReceived>2007-04-04 03:53:25-0400</timestampReceived><subject>[PHP-GTK-DEV] Bug in build for GtkExtra</subject><body>

Hi! I found a bug in build system for GtkExtra. I have the version 1 but 
not the 2. But I do not know this when I try to build it, I think that I 
have 2.

./configure --enable-html --enable-gtkextra --enable-sourceview 
--enable-spell

In configure it tell checking for gtkextra support... no
It build and install without error.
When I try to run an app(it do not use GtkExtra)

PHP Warning:  PHP Startup: Unable to load dynamic library 
'/opt/php5/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so' - 
/opt/php5/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so: 
undefined symbol: gtkextra_ext_entry in Unknown on line 0

So the app is build with GtkExtra! But as it is the wrong version there 
is some functions missing.

Fernando Correa da Conceição

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070405164353</emailId><senderName>"james dot smith at cybertill dot co dot uk"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-04-05 16:43:53-0400</timestampReceived><subject>[PHP-GTK-DEV] #41007 [NEW]: PHP GTK2 GtkListStore invoke signal callback problem</subject><body>

From:             james dot smith at cybertill dot co dot uk
Operating system: WinXP
PHP version:      5.2.1
PHP Bug Type:     PHP-GTK related
Bug description:  PHP GTK2 GtkListStore invoke signal callback problem

Description:
------------
While designing a Till system using php gtk2 and grabbing code from
several examples. I encountered the following problem.
When clicking on an item in a GtkListStore object, the callback function
is either renamed/ stored incorrectly.

Despite me renaming it several times the function name is not handled
properly and causes characters to be misinterpreted.


$sectionBasketView = GtkListStore( Gtk::TYPE_STRING, Gtk::TYPE_LONG,
Gtk::TYPE_DOUBLE);
.
.
    $selection = $sectionBasketView-&gt;get_selection();
    $selection-&gt;connect('changed', "on_selection");
.
.
function on_selection()
{
.
.



Expected result:
----------------
on_selection function execution


Actual result:
--------------
The error log shows that the 9th character is pushed up by 1 character
code.
Here is a report from the error.txt it produced.
The first instance the letter "t" being replaced with a "s" character.
The second instance "i" renamed the function call with a "j" at the start
this in turn affected the next character "c" changing to a "b".
As far as i can tell the on_selection is not used anywhere else.
Is this an inbuilt command/event/property?

[05-Apr-2007 17:06:32] PHP Warning:  Unable to invoke signal callback
'on_selecsion' specified in C:\PHP-Gtk2\examples\EtTill\Till.phpw on line
218 in C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331

[05-Apr-2007 17:07:37] PHP Warning:  Unable to invoke signal callback
'on_jselebtion' specified in C:\PHP-Gtk2\examples\EtTill\Till.phpw on line
218 in C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331

[05-Apr-2007 17:07:37] PHP Warning:  Unable to invoke signal callback
'on_jselebtion' specified in C:\PHP-Gtk2\examples\EtTill\Till.phpw on line
218 in C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331

[05-Apr-2007 17:09:24] PHP Warning:  Unable to invoke signal callback
'aaaaaaaa' specified in C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 218
in C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331

[05-Apr-2007 17:10:11] PHP Warning:  Unable to invoke signal callback
'abcdefghijklmnopqrstuvwxyz' specified in
C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 218 in
C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331

[05-Apr-2007 17:10:12] PHP Warning:  Unable to invoke signal callback
'abcdefghijklmnopqrstuvwxyz' specified in
C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 218 in
C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331
[05-Apr-2007 17:10:12] PHP Warning:  Unable to invoke signal callback
'abcdefghijklmnopqrstuvwxyz' specified in
C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 218 in
C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331
[05-Apr-2007 17:10:47] PHP Warning:  Unable to invoke signal callback
'on_abcdefghijklmnopqrstuvwxyz' specified in
C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 218 in
C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331
[05-Apr-2007 17:10:47] PHP Warning:  Unable to invoke signal callback
'on_abcdefghijklmnopqrstuvwxyz' specified in
C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 218 in
C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331
[05-Apr-2007 17:11:15] PHP Warning:  Unable to invoke signal callback
'on_selabcdefghijklmnopqrstuvwxyz' specified in
C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 218 in
C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331
[05-Apr-2007 17:11:16] PHP Warning:  Unable to invoke signal callback
'on_selabcdefghijklmnopqrstuvwxyz' specified in
C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 218 in
C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331
[05-Apr-2007 17:11:52] PHP Warning:  Unable to invoke signal callback
'on_selectionabcdefghijklmnopqrstuvwxyz' specified in
C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 218 in
C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331
[05-Apr-2007 17:11:53] PHP Warning:  Unable to invoke signal callback
'on_selectionabcdefghijklmnopqrstuvwxyz' specified in
C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 218 in
C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331
[05-Apr-2007 17:12:20] PHP Warning:  Unable to invoke signal callback
'on_selecsionabc' specified in C:\PHP-Gtk2\examples\EtTill\Till.phpw on
line 218 in C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331
[05-Apr-2007 17:12:20] PHP Warning:  Unable to invoke signal callback
'on_selecsionabc' specified in C:\PHP-Gtk2\examples\EtTill\Till.phpw on
line 218 in C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331
[05-Apr-2007 17:12:53] PHP Warning:  Unable to invoke signal callback
'on_selectionabcd' specified in C:\PHP-Gtk2\examples\EtTill\Till.phpw on
line 218 in C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331
[05-Apr-2007 17:12:53] PHP Warning:  Unable to invoke signal callback
'on_selectionabcd' specified in C:\PHP-Gtk2\examples\EtTill\Till.phpw on
line 218 in C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331
[05-Apr-2007 17:12:53] PHP Warning:  Unable to invoke signal callback
'on_selectionabcd' specified in C:\PHP-Gtk2\examples\EtTill\Till.phpw on
line 218 in C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331
[05-Apr-2007 17:12:54] PHP Warning:  Unable to invoke signal callback
'on_selectionabcd' specified in C:\PHP-Gtk2\examples\EtTill\Till.phpw on
line 218 in C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331
[05-Apr-2007 17:12:55] PHP Warning:  Unable to invoke signal callback
'on_selectionabcd' specified in C:\PHP-Gtk2\examples\EtTill\Till.phpw on
line 218 in C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331
[05-Apr-2007 17:12:55] PHP Warning:  Unable to invoke signal callback
'on_selectionabcd' specified in C:\PHP-Gtk2\examples\EtTill\Till.phpw on
line 218 in C:\PHP-Gtk2\examples\EtTill\Till.phpw on line 331


-- 
Edit bug report at http://bugs.php.net/?id=41007&amp;edit=1
-- 
Try a CVS snapshot (PHP 4.4): http://bugs.php.net/fix.php?id=41007&amp;r=trysnapshot44
Try a CVS snapshot (PHP 5.2): http://bugs.php.net/fix.php?id=41007&amp;r=trysnapshot52
Try a CVS snapshot (PHP 6.0): http://bugs.php.net/fix.php?id=41007&amp;r=trysnapshot60
Fixed in CVS:                 http://bugs.php.net/fix.php?id=41007&amp;r=fixedcvs
Fixed in release:             http://bugs.php.net/fix.php?id=41007&amp;r=alreadyfixed
Need backtrace:               http://bugs.php.net/fix.php?id=41007&amp;r=needtrace
Need Reproduce Script:        http://bugs.php.net/fix.php?id=41007&amp;r=needscript
Try newer version:            http://bugs.php.net/fix.php?id=41007&amp;r=oldversion
Not developer issue:          http://bugs.php.net/fix.php?id=41007&amp;r=support
Expected behavior:            http://bugs.php.net/fix.php?id=41007&amp;r=notwrong
Not enough info:              http://bugs.php.net/fix.php?id=41007&amp;r=notenoughinfo
Submitted twice:              http://bugs.php.net/fix.php?id=41007&amp;r=submittedtwice
register_globals:             http://bugs.php.net/fix.php?id=41007&amp;r=globals
PHP 3 support discontinued:   http://bugs.php.net/fix.php?id=41007&amp;r=php3
Daylight Savings:             http://bugs.php.net/fix.php?id=41007&amp;r=dst
IIS Stability:                http://bugs.php.net/fix.php?id=41007&amp;r=isapi
Install GNU Sed:              http://bugs.php.net/fix.php?id=41007&amp;r=gnused
Floating point limitations:   http://bugs.php.net/fix.php?id=41007&amp;r=float
No Zend Extensions:           http://bugs.php.net/fix.php?id=41007&amp;r=nozend
MySQL Configuration Error:    http://bugs.php.net/fix.php?id=41007&amp;r=mysqlcfg

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070410025154</emailId><senderName>       24.247.219.180</senderName><senderEmail></senderEmail><timestampReceived>2007-04-10 02:51:54-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: php-gtk with gtkmozembed</subject><body>

markybob wrote:
&gt; demo of mozembed causes segfault.
&gt; 
&gt; http://cvs.php.net/viewvc.cgi/php-gtk/ext/mozembed/demos/browser.php?view=log   
&gt; this is with php 5.2.1 and php-gtk2 (cvs april 9th 2007).  does anyone have
&gt; a mozembed demo that actually works?  any help would be greatly appreciated. 
&gt; thanks!

I haven't been able to get mozembed to work on windows (or linux) at all 
without blowing up, but I'm not sure that it's a php-gtk problem at all, 
the mozembed code itself is very volatile at the moment

http://www.mail-archive.com/dev-embedding@lists.mozilla.org/msg00838.html 
- there's been a lead developer change and 
http://wiki.mozilla.org/Gtkmozembed according to the wiki there have 
been a great many updates just recently merged to the trunk.  Until the 
underlying code reaches a more stable state (with both api and crashing) 
it might be a smart idea to treat gtkmozembed as "experimental toy" 
until they decide what direction it's going to take... especially since 
the current discussion on the subject in the newsgroups 
http://groups.google.com/group/mozilla.dev.embedding/topics doesn't 
sound so happy...

If you're desperate for a html widget in php-gtk, the gtk-html extension 
works perfectly (and works in windows too)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070410092948</emailId><senderName>Anant</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-04-10 09:29:48-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] php-gtk with gtkmozembed</subject><body>

Hi,
 
&gt; well, it's known that gtkmozembed doesnt work on windows, but it
&gt; should work on linux just fine.  in fact, i have a simply pygtk
&gt; browser that uses gtkmozembed without a problem on the same
&gt; computer...which makes me think it's either that demo or php-gtk

I cannot reproduce the segfault. When does the segfault occur, and is
it possible for you to produce a stack trace?

Cheers,
--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070419014018</emailId><senderName></senderName><senderEmail>jake</senderEmail><timestampReceived>2007-04-19 01:40:18-0400</timestampReceived><subject>[PHP-GTK-DEV] GdkBitmap Missing</subject><body>

Hello,

GdkBitmap seems to have been overlooked.  Its not even listed in the
coverage list.  The GdkPixbuf::render_pixmap_and_mask should return a
GdkPixbuf and
a GdkBitmap, but if I call the method in PHP with a GdkPixbuf that has an
alpha channel (i.e. one that should be returning a GdkBitmap object) both
returned objects are of type GdkPixmap.  You can verify this with the
instanceof operator or by var_dump().

-Jake Cobb

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070419175733</emailId><senderName>Jake Cobb</senderName><senderEmail>jake@lyrehc.com</senderEmail><timestampReceived>2007-04-19 17:57:33-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] cannot create gtksourcestylesheme interface</subject><body>

Sure did, I must have checked out just short of that update.  Sorry for 
the inconvenience.

-Jake Cobb

Andrei Zmievski wrote:
&gt; I thought I fixed this in this check-in:
&gt;
&gt;     http://cvs.php.net/viewvc.cgi/php-gtk/main/phpg_support.c?revision=1.17&amp;view=markup 
&gt;
&gt;
&gt; Can you try rebuilding from PHP-GTK CVS again?
&gt;
&gt; -Andrei
&gt;
&gt; On Apr 19, 2007, at 8:17 AM, Jake Cobb wrote:
&gt;
&gt;&gt; Hello,
&gt;&gt;
&gt;&gt; I'm running into the same problem.  I have a GtkTreeView that I was
&gt;&gt; using a GtkListStore model with.  However, for quick searching in the
&gt;&gt; list I wrapped the GtkListStore in a GtkTreeModelFilter.  The problem,
&gt;&gt; of course, is that GtkTreeModelFilter implements GtkTreeModel but
&gt;&gt; not GtkTreeSortable, effectively hiding the sorting capability of the
&gt;&gt; GtkListStore.  So I tried a simple class to tie them together and pass
&gt;&gt; the sortable methods through to the underlying model.
&gt;&gt;
&gt;&gt; ----------
&gt;&gt; &lt;?php
&gt;&gt; class LyrGtkTreeModelFilterSortable extends GtkTreeModelFilter 
&gt;&gt; implements GtkTreeSortable
&gt;&gt; {
&gt;&gt;    public function get_sort_column_id() { return 
&gt;&gt; $this-&gt;get_model()-&gt;get_sort_column_id(); }
&gt;&gt;    public function has_default_sort_func() { return 
&gt;&gt; $this-&gt;get_model()-&gt;has_default_sort_func(); }
&gt;&gt;    public function set_default_sort_func($callback) { 
&gt;&gt; $this-&gt;get_model()-&gt;set_default_sort_func($callback); }
&gt;&gt;    public function set_sort_column_id($column_id,$order) { 
&gt;&gt; $this-&gt;get_model()-&gt;set_sort_column_id($column_id,$order); }
&gt;&gt;    public function set_sort_func($column,$callback) { 
&gt;&gt; $this-&gt;get_model()-&gt;set_sort_func($column, $callback); }
&gt;&gt;    public function sort_column_changed() { 
&gt;&gt; $this-&gt;get_model()-&gt;sort_column_changed(); }
&gt;&gt; }
&gt;&gt; ?&gt;
&gt;&gt; ----------
&gt;&gt;
&gt;&gt; This dies with the same error mentioned by Christian.
&gt;&gt;
&gt;&gt; ----------
&gt;&gt; Fatal error: Cannot inherit previously-inherited constant gtype from 
&gt;&gt; interface GtkTreeSortable
&gt;&gt; ----------
&gt;&gt;
&gt;&gt; Although it says fixed in 5.1, the main PHP bug list had a very 
&gt;&gt; similar issue:
&gt;&gt; http://bugs.php.net/bug.php?id=33732
&gt;&gt;
&gt;&gt; My build is PHP 5.2 and PHP-GTK from CVS, checked out roughly a month 
&gt;&gt; ago.
&gt;&gt;
&gt;&gt; Thanks.
&gt;&gt;
&gt;&gt; -Jake Cobb
&gt;&gt; *
&gt;&gt; *&gt;Christian, you find the best (obscure) bugs. This one was rather non-
&gt;&gt; &gt;trivial. I committed a fix, but I do need you and others to test  
&gt;&gt; &gt;areas in PHP-GTK related to interfaces, including tree models. 
&gt;&gt; Also,  &gt;test GdkGC stuff (creating and getting them).
&gt;&gt;
&gt;&gt; &gt;If you're curious about what the problem was.. readon. When  
&gt;&gt; &gt;get_style_scheme() is called, it dynamically creates a class called  
&gt;&gt; &gt;GtkSourceDefaultStyleScheme that implements the 
&gt;&gt; GtkSourceStyleScheme  &gt;interface. Since both the class and the 
&gt;&gt; interface had 'gtype'  &gt;constant registered, there was a conflict. So 
&gt;&gt; now, we don't register  &gt;'gtype' for interfaces. However, that 
&gt;&gt; uncovered another problem. If  &gt;you implement an interface, the 
&gt;&gt; method in the class is marked as  &gt;abstract (since there's no 
&gt;&gt; implementation for this dynamic class).  &gt;But the interface supplies 
&gt;&gt; default implementation, so we need to get  &gt;to that somehow. This 
&gt;&gt; necessitated changing how we register interface  &gt;methods and also 
&gt;&gt; required unsetting the abstract flag on inherited  &gt;methods and class 
&gt;&gt; itself. So that's why I'm asking for more testing  &gt;in these areas.
&gt;&gt;
&gt;&gt; &gt;-Andrei
&gt;&gt;
&gt;&gt;
&gt;&gt; &gt;On Feb 3, 2007, at 6:46 AM, Christian Weiske wrote:
&gt;&gt;
&gt;&gt; &gt;&gt; Hi all,
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; trying this:
&gt;&gt; &gt;&gt; &lt;?php
&gt;&gt; &gt;&gt; $gslm = new GtkSourceLanguagesManager();
&gt;&gt; &gt;&gt; $gsl = $gslm-&gt;get_language_from_mime_type('application/x-php');
&gt;&gt; &gt;&gt; $schema = $gsl-&gt;get_style_scheme();
&gt;&gt; &gt;&gt; ?&gt;
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; I get
&gt;&gt; &gt;&gt; --------------
&gt;&gt; &gt;&gt; Fatal error: Cannot inherit previously-inherited constant gtype from
&gt;&gt; &gt;&gt; interface GtkSourceStyleScheme
&gt;&gt; &gt;&gt; --------------
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; I don't know what to do with it nor how to fix it..
&gt;&gt; &gt;&gt;
&gt;&gt; &gt;&gt; --
&gt;&gt; &gt;&gt; Regards/Mit freundlichen Grüßen
&gt;&gt; &gt;&gt; Christian Weiske
&gt;&gt; &gt;&gt;
&gt;&gt;
&gt;&gt; --PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;
&gt;
&gt;
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070420052807</emailId><senderName>Christian Weiske</senderName><senderEmail>cweiske@cweiske.de</senderEmail><timestampReceived>2007-04-20 05:28:07-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Creating a Sortable Filter</subject><body>


Jake,


&gt; I was using a GtkTreeView with a GtkListStore data model.  I wrapped the
&gt; GtkListStore in
&gt; a GtkTreeModelFilter to use the filtering capabilities but this lost the
&gt; sorting ability because
&gt; GtkTreeModelFilter does not implement the GtkTreeSortable interface.  I
&gt; wrote a simple class
&gt; that extends GtkTreeModelFilter and implements GtkTreeSortable and
&gt; simply calls the underlying
&gt; model's (in my case GtkListStore) GtkTreeSortable methods.

Just wrap your filter in a sortable.

Sortable
+- Filter
   +- Store

-- 
Regards/Mit freundlichen Grüßen
Christian Weiske


["signature.asc" (application/pgp-signature)]

</body></email><email><emailId>20070301153207</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-03-01 15:32:07-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Extra mangles the win32 build</subject><body>

That really shouldn't be needed. Can you stick it into CVS for now but 
clearly label it as a temp hack, i.e. stick some comment before/after it?

I'll get to it as soon as I can, but unlikely today.

Cheers,

- Steph

----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: &lt;php-gtk-dev@lists.php.net&gt;
Sent: Thursday, March 01, 2007 3:27 PM
Subject: Re: [PHP-GTK-DEV] Extra mangles the win32 build


&gt; Steph Fox wrote:
&gt;&gt; Anant,
&gt;&gt;
&gt;&gt; Nope, I did that when I wrote the win32 build system, so basically
&gt;&gt; something's wrong in the way this extension's set up. Will sort it out
&gt;&gt; in a bit,
&gt;&gt;
&gt;&gt; - Steph
&gt;&gt;
&gt;
&gt; Well I'm not sure what the problem is - I have found a way around it -
&gt; here's a slightly hacky patch to buildconf - just makes sure the php-gtk
&gt; extension config.w32 comes before any other extensions in configure.js -
&gt; but it's just a workaround, not a real fix
&gt;


--------------------------------------------------------------------------------


&gt; Index: buildconf.js
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/buildconf.js,v
&gt; retrieving revision 1.7
&gt; diff -u -r1.7 buildconf.js
&gt; --- buildconf.js 31 Oct 2005 11:44:42 -0000 1.7
&gt; +++ buildconf.js 1 Mar 2007 15:19:28 -0000
&gt; @@ -78,7 +78,15 @@
&gt;  mod_name = module_names[i];
&gt;  item = MODULES.Item(mod_name);
&gt;  MODULES.Remove(mod_name);
&gt; - output += emit_module(item);
&gt; + // hack - gtk+ MUST BE FIRST
&gt; + if (mod_name == 'gtk+')
&gt; + {
&gt; + output = emit_module(item) + output;
&gt; + }
&gt; + else
&gt; + {
&gt; + output += emit_module(item);
&gt; + }
&gt;  }
&gt;
&gt;  return output;
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070301172955</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-03-01 17:29:55-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: libs3xy for PHP-GTK</subject><body>

Anant Narayanan wrote:
&gt; Hi all,
&gt; 
&gt; libs3xy is now available for PHP-GTK. According to its website, libs3xy
&gt; "Does naughty things to good widgets" :)
&gt; 
&gt; Anyway, check out the extension from
&gt; svn://svn.cweiske.de/php-gtk-edge/ext/libs3xy. If you don't have libs3xy
&gt; installed get it from http://releases.chipx86.com/libs3xy/libs3xy/
&gt; 
&gt; I didn't make any demo scripts, but usage is fairly trivial.
&gt; 
&gt; I'll commit both this and GtkHTML to the main php-gtk-cvs tree as soon
&gt; as I get some feedback from the rest of the team :)
&gt; 
&gt; Cheers,
&gt; --
&gt; Anant
&gt; 
&gt; P.S. I had to replace 'e' with '3' because php.net wouldn't accept the
&gt; mail with "restricted" words.

I have both building for win32 - windows library builds are available at 
http://callicore.net/php-gtk2/libs/gtk - actual windows snaps for the 
extensions are at http://callicore.net/php-gtk2 - look in the downloads 
locations

the changed files are in svn - thanks anant ;)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070525231041</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-05-25 23:10:41-0400</timestampReceived><subject>[PHP-GTK-DEV] Beta?</subject><body>

I think it's time to release the beta, since we're doing pretty well  
on API coverage and people are clamoring for a new release.  
Unfortunately, I won't be able to do this until at least June 14th,  
since I will be far away without any Internet access. Anyone up for  
making a beta release?

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070525231819</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-05-25 23:18:19-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta?</subject><body>

Hey Andrei,

Elizabeth has stuff to go in I still need to check, otherwise we risk it not 
working under Win98 (all Madeleine's clients down at one stroke). She also 
is working on an installer, but I don't know how far she's got with that.

We also want to have two win32 releases for much the same reason - one 
Elizabeth can roll using the faster non-ZTS stuff Edin makes available these 
days, and one I can roll using MSVC6/ZTS that will work on older machines.

I'm heading out to Norway at the end of the first week in June for a few 
days, but otherwise around - just busy (when not?)

- Steph

----- Original Message ----- 
From: "Andrei Zmievski" &lt;andrei@gravitonic.com&gt;
To: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
Sent: Saturday, May 26, 2007 12:10 AM
Subject: [PHP-GTK-DEV] Beta?


&gt;I think it's time to release the beta, since we're doing pretty well  on 
&gt;API coverage and people are clamoring for a new release.  Unfortunately, I 
&gt;won't be able to do this until at least June 14th,  since I will be far 
&gt;away without any Internet access. Anyone up for  making a beta release?
&gt;
&gt; -Andrei
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070419010748</emailId><senderName>bob majdak jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-04-19 01:07:48-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GdkBitmap Missing</subject><body>

I am unsure about the technical reasons behind this, however if you are 
trying to do something like a shaped window, it does not matter in that 
case:

"An opaque structure representing an offscreen drawable of depth 1. 
Pointers to structures of type GdkPixmap, GdkBitmap, and GdkWindow, can 
often be used interchangeably. The type GdkDrawable refers generically 
to any of these types."
(http://developer.gnome.org/doc/API/2.0/gdk/gdk-Bitmaps-and-Pixmaps.html)

$pixbuf = GdkPixbuf::new_from_file();
$pixmap = $pixbuf-&gt;render_pixmap_and_mask();
$window-&gt;shape_combine_mask($pixmap[1],0,0);

jake@lyrehc.com wrote:
&gt; Hello,
&gt; 
&gt; GdkBitmap seems to have been overlooked.  Its not even listed in the
&gt; coverage list.  The GdkPixbuf::render_pixmap_and_mask should return a
&gt; GdkPixbuf and
&gt; a GdkBitmap, but if I call the method in PHP with a GdkPixbuf that has an
&gt; alpha channel (i.e. one that should be returning a GdkBitmap object) both
&gt; returned objects are of type GdkPixmap.  You can verify this with the
&gt; instanceof operator or by var_dump().
&gt; 
&gt; -Jake Cobb
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070419151705</emailId><senderName>Jake Cobb</senderName><senderEmail>jake@lyrehc.com</senderEmail><timestampReceived>2007-04-19 15:17:05-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] cannot create gtksourcestylesheme interface</subject><body>

Hello,

I'm running into the same problem.  I have a GtkTreeView that I was
using a GtkListStore model with.  However, for quick searching in the
list I wrapped the GtkListStore in a GtkTreeModelFilter.  The problem,
of course, is that GtkTreeModelFilter implements GtkTreeModel but
not GtkTreeSortable, effectively hiding the sorting capability of the
GtkListStore.  So I tried a simple class to tie them together and pass
the sortable methods through to the underlying model.

----------
&lt;?php
class LyrGtkTreeModelFilterSortable extends GtkTreeModelFilter 
implements GtkTreeSortable
{
    public function get_sort_column_id() { return 
$this-&gt;get_model()-&gt;get_sort_column_id(); }
    public function has_default_sort_func() { return 
$this-&gt;get_model()-&gt;has_default_sort_func(); }
    public function set_default_sort_func($callback) { 
$this-&gt;get_model()-&gt;set_default_sort_func($callback); }
    public function set_sort_column_id($column_id,$order) { 
$this-&gt;get_model()-&gt;set_sort_column_id($column_id,$order); }
    public function set_sort_func($column,$callback) { 
$this-&gt;get_model()-&gt;set_sort_func($column, $callback); }
    public function sort_column_changed() { 
$this-&gt;get_model()-&gt;sort_column_changed(); }
}
?&gt;
----------

This dies with the same error mentioned by Christian.

----------
Fatal error: Cannot inherit previously-inherited constant gtype from 
interface GtkTreeSortable
----------

Although it says fixed in 5.1, the main PHP bug list had a very similar 
issue:
http://bugs.php.net/bug.php?id=33732

My build is PHP 5.2 and PHP-GTK from CVS, checked out roughly a month ago.

Thanks.

-Jake Cobb
*
*&gt;Christian, you find the best (obscure) bugs. This one was rather non-
 &gt;trivial. I committed a fix, but I do need you and others to test  
 &gt;areas in PHP-GTK related to interfaces, including tree models. Also,  
 &gt;test GdkGC stuff (creating and getting them).

 &gt;If you're curious about what the problem was.. readon. When  
 &gt;get_style_scheme() is called, it dynamically creates a class called  
 &gt;GtkSourceDefaultStyleScheme that implements the GtkSourceStyleScheme  
 &gt;interface. Since both the class and the interface had 'gtype'  
 &gt;constant registered, there was a conflict. So now, we don't register  
 &gt;'gtype' for interfaces. However, that uncovered another problem. If  
 &gt;you implement an interface, the method in the class is marked as  
 &gt;abstract (since there's no implementation for this dynamic class).  
 &gt;But the interface supplies default implementation, so we need to get  
 &gt;to that somehow. This necessitated changing how we register interface  
 &gt;methods and also required unsetting the abstract flag on inherited  
 &gt;methods and class itself. So that's why I'm asking for more testing  
 &gt;in these areas.

 &gt;-Andrei


 &gt;On Feb 3, 2007, at 6:46 AM, Christian Weiske wrote:

 &gt;&gt; Hi all,
 &gt;&gt;
 &gt;&gt;
 &gt;&gt; trying this:
 &gt;&gt; &lt;?php
 &gt;&gt; $gslm = new GtkSourceLanguagesManager();
 &gt;&gt; $gsl = $gslm-&gt;get_language_from_mime_type('application/x-php');
 &gt;&gt; $schema = $gsl-&gt;get_style_scheme();
 &gt;&gt; ?&gt;
 &gt;&gt;
 &gt;&gt; I get
 &gt;&gt; --------------
 &gt;&gt; Fatal error: Cannot inherit previously-inherited constant gtype from
 &gt;&gt; interface GtkSourceStyleScheme
 &gt;&gt; --------------
 &gt;&gt;
 &gt;&gt; I don't know what to do with it nor how to fix it..
 &gt;&gt;
 &gt;&gt; --
 &gt;&gt; Regards/Mit freundlichen Grüßen
 &gt;&gt; Christian Weiske
 &gt;&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070419155749</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-04-19 15:57:49-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] cannot create gtksourcestylesheme interface</subject><body>

I thought I fixed this in this check-in:

	http://cvs.php.net/viewvc.cgi/php-gtk/main/phpg_support.c? 
revision=1.17&amp;view=markup

Can you try rebuilding from PHP-GTK CVS again?

-Andrei

On Apr 19, 2007, at 8:17 AM, Jake Cobb wrote:

&gt; Hello,
&gt;
&gt; I'm running into the same problem.  I have a GtkTreeView that I was
&gt; using a GtkListStore model with.  However, for quick searching in the
&gt; list I wrapped the GtkListStore in a GtkTreeModelFilter.  The problem,
&gt; of course, is that GtkTreeModelFilter implements GtkTreeModel but
&gt; not GtkTreeSortable, effectively hiding the sorting capability of the
&gt; GtkListStore.  So I tried a simple class to tie them together and pass
&gt; the sortable methods through to the underlying model.
&gt;
&gt; ----------
&gt; &lt;?php
&gt; class LyrGtkTreeModelFilterSortable extends GtkTreeModelFilter  
&gt; implements GtkTreeSortable
&gt; {
&gt;    public function get_sort_column_id() { return $this-&gt;get_model()- 
&gt; &gt;get_sort_column_id(); }
&gt;    public function has_default_sort_func() { return $this-&gt;get_model 
&gt; ()-&gt;has_default_sort_func(); }
&gt;    public function set_default_sort_func($callback) { $this- 
&gt; &gt;get_model()-&gt;set_default_sort_func($callback); }
&gt;    public function set_sort_column_id($column_id,$order) { $this- 
&gt; &gt;get_model()-&gt;set_sort_column_id($column_id,$order); }
&gt;    public function set_sort_func($column,$callback) { $this- 
&gt; &gt;get_model()-&gt;set_sort_func($column, $callback); }
&gt;    public function sort_column_changed() { $this-&gt;get_model()- 
&gt; &gt;sort_column_changed(); }
&gt; }
&gt; ?&gt;
&gt; ----------
&gt;
&gt; This dies with the same error mentioned by Christian.
&gt;
&gt; ----------
&gt; Fatal error: Cannot inherit previously-inherited constant gtype  
&gt; from interface GtkTreeSortable
&gt; ----------
&gt;
&gt; Although it says fixed in 5.1, the main PHP bug list had a very  
&gt; similar issue:
&gt; http://bugs.php.net/bug.php?id=33732
&gt;
&gt; My build is PHP 5.2 and PHP-GTK from CVS, checked out roughly a  
&gt; month ago.
&gt;
&gt; Thanks.
&gt;
&gt; -Jake Cobb
&gt; *
&gt; *&gt;Christian, you find the best (obscure) bugs. This one was rather  
&gt; non-
&gt; &gt;trivial. I committed a fix, but I do need you and others to test   
&gt; &gt;areas in PHP-GTK related to interfaces, including tree models.  
&gt; Also,  &gt;test GdkGC stuff (creating and getting them).
&gt;
&gt; &gt;If you're curious about what the problem was.. readon. When   
&gt; &gt;get_style_scheme() is called, it dynamically creates a class  
&gt; called  &gt;GtkSourceDefaultStyleScheme that implements the  
&gt; GtkSourceStyleScheme  &gt;interface. Since both the class and the  
&gt; interface had 'gtype'  &gt;constant registered, there was a conflict.  
&gt; So now, we don't register  &gt;'gtype' for interfaces. However, that  
&gt; uncovered another problem. If  &gt;you implement an interface, the  
&gt; method in the class is marked as  &gt;abstract (since there's no  
&gt; implementation for this dynamic class).  &gt;But the interface  
&gt; supplies default implementation, so we need to get  &gt;to that  
&gt; somehow. This necessitated changing how we register interface   
&gt; &gt;methods and also required unsetting the abstract flag on  
&gt; inherited  &gt;methods and class itself. So that's why I'm asking for  
&gt; more testing  &gt;in these areas.
&gt;
&gt; &gt;-Andrei
&gt;
&gt;
&gt; &gt;On Feb 3, 2007, at 6:46 AM, Christian Weiske wrote:
&gt;
&gt; &gt;&gt; Hi all,
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; trying this:
&gt; &gt;&gt; &lt;?php
&gt; &gt;&gt; $gslm = new GtkSourceLanguagesManager();
&gt; &gt;&gt; $gsl = $gslm-&gt;get_language_from_mime_type('application/x-php');
&gt; &gt;&gt; $schema = $gsl-&gt;get_style_scheme();
&gt; &gt;&gt; ?&gt;
&gt; &gt;&gt;
&gt; &gt;&gt; I get
&gt; &gt;&gt; --------------
&gt; &gt;&gt; Fatal error: Cannot inherit previously-inherited constant gtype  
&gt; from
&gt; &gt;&gt; interface GtkSourceStyleScheme
&gt; &gt;&gt; --------------
&gt; &gt;&gt;
&gt; &gt;&gt; I don't know what to do with it nor how to fix it..
&gt; &gt;&gt;
&gt; &gt;&gt; --
&gt; &gt;&gt; Regards/Mit freundlichen Grüßen
&gt; &gt;&gt; Christian Weiske
&gt; &gt;&gt;
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070419183451</emailId><senderName>Jake Cobb</senderName><senderEmail>jake@lyrehc.com</senderEmail><timestampReceived>2007-04-19 18:34:51-0400</timestampReceived><subject>[PHP-GTK-DEV] Creating a Sortable Filter</subject><body>

Hello,

This picks up where I left off in the thread "cannot create 
gtksourcestylesheme interface".
I'll briefly restate:

I was using a GtkTreeView with a GtkListStore data model.  I wrapped the 
GtkListStore in
a GtkTreeModelFilter to use the filtering capabilities but this lost the 
sorting ability because
GtkTreeModelFilter does not implement the GtkTreeSortable interface.  I 
wrote a simple class
that extends GtkTreeModelFilter and implements GtkTreeSortable and 
simply calls the underlying
model's (in my case GtkListStore) GtkTreeSortable methods.

Gtk+ does not recognize my new class as sortable although I implement 
GtkTreeSortable and
implement all of its methods.  I get the following errors when an 
attempt at sorting is initiated:

----------
Gtk-CRITICAL **: gtk_tree_sortable_get_sort_column_id: assertion 
`GTK_IS_TREE_SORTABLE (sortable)' failed

Gtk-CRITICAL **: gtk_tree_sortable_has_default_sort_func: assertion 
`GTK_IS_TREE_SORTABLE (sortable)' failed

Gtk-CRITICAL **: gtk_tree_sortable_set_sort_column_id: assertion 
`GTK_IS_TREE_SORTABLE (sortable)' failed
----------

These are the same errors I get if my model is a GtkTreeModelFilter 
object (or I imagine any model
that does not implement GtkTreeSortable).

The filtering behavior is unchanged and Gtk+ does not balk at the new 
object for purposes
of GtkTreeModel behavior.  So, it appears to extend GtkTreeModelFilter 
in the manner I
would expect but does not gain the GtkTreeSortable properties.

So, are there any requirements for passing the GTK_IS_TREE_SORTABLE 
assertion besides
implementing the GtkTreeSortable interface?  Maybe more to the point, 
can I truly implement
the interface in PHP in a way that C will recognize?

Is the successful recognition of my new class as a GtkTreeModel because 
that interface was
already implemented by it (equivalently, I realize C is not 
object-oriented) in C?

Thanks for your time.

-Jake Cobb

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070525234405</emailId><senderName>Pablo DallOglio</senderName><senderEmail>pablo@dalloglio.net</senderEmail><timestampReceived>2007-05-25 23:44:05-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta?</subject><body>

Hello All

I can help too.

Pablo

Em SÃ¡b, 2007-05-26 Ã s 05:08 +0530, Anant Narayanan escreveu:
&gt; Andrei Zmievski wrote:
&gt; &gt; I think it's time to release the beta, since we're doing pretty well on
&gt; &gt; API coverage and people are clamoring for a new release. Unfortunately,
&gt; &gt; I won't be able to do this until at least June 14th, since I will be far
&gt; &gt; away without any Internet access. Anyone up for making a beta release?
&gt; 
&gt; I'll volunteer :)
&gt; 
&gt; The *nix build system is all done. I have a nice RPM and a Universal
&gt; Binary installer for OS X also ready. Once Elizabeth and Steph work out
&gt; the left-overs for Windows, I can finalize a release.
&gt; 
&gt; -- 
&gt; Anant
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070525234907</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-05-25 23:49:07-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta?</subject><body>

How long will it take to review Elizabeth's stuff? I'd rather not  
delay it any more than necessary, since there's perception out there  
that the project is not doing that well. I trust you and Elizabeth  
can work out a plan and coordinate with Anant.

-Andrei


On May 25, 2007, at 4:18 PM, Steph Fox wrote:

&gt; Hey Andrei,
&gt;
&gt; Elizabeth has stuff to go in I still need to check, otherwise we  
&gt; risk it not working under Win98 (all Madeleine's clients down at  
&gt; one stroke). She also is working on an installer, but I don't know  
&gt; how far she's got with that.
&gt;
&gt; We also want to have two win32 releases for much the same reason -  
&gt; one Elizabeth can roll using the faster non-ZTS stuff Edin makes  
&gt; available these days, and one I can roll using MSVC6/ZTS that will  
&gt; work on older machines.
&gt;
&gt; I'm heading out to Norway at the end of the first week in June for  
&gt; a few days, but otherwise around - just busy (when not?)
&gt;
&gt; - Steph
&gt;
&gt; ----- Original Message ----- From: "Andrei Zmievski"  
&gt; &lt;andrei@gravitonic.com&gt;
&gt; To: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
&gt; Sent: Saturday, May 26, 2007 12:10 AM
&gt; Subject: [PHP-GTK-DEV] Beta?
&gt;
&gt;
&gt;&gt; I think it's time to release the beta, since we're doing pretty  
&gt;&gt; well  on API coverage and people are clamoring for a new release.   
&gt;&gt; Unfortunately, I won't be able to do this until at least June  
&gt;&gt; 14th,  since I will be far away without any Internet access.  
&gt;&gt; Anyone up for  making a beta release?
&gt;&gt;
&gt;&gt; -Andrei
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070525235047</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-05-25 23:50:47-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta?</subject><body>

Andrei Zmievski wrote:
&gt; I think it's time to release the beta, since we're doing pretty well on
&gt; API coverage and people are clamoring for a new release. Unfortunately,
&gt; I won't be able to do this until at least June 14th, since I will be far
&gt; away without any Internet access. Anyone up for making a beta release?

I'll volunteer :)

The *nix build system is all done. I have a nice RPM and a Universal
Binary installer for OS X also ready. Once Elizabeth and Steph work out
the left-overs for Windows, I can finalize a release.

-- 
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070525235402</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-05-25 23:54:02-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta?</subject><body>

As long as it takes for me to upgrade everything I need to upgrade and test 
clean builds without/with the changes.

We're in touch, don't worry.

----- Original Message ----- 
From: "Andrei Zmievski" &lt;andrei@gravitonic.com&gt;
To: "Steph Fox" &lt;steph@zend.com&gt;
Cc: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
Sent: Saturday, May 26, 2007 12:49 AM
Subject: Re: [PHP-GTK-DEV] Beta?


&gt; How long will it take to review Elizabeth's stuff? I'd rather not  delay 
&gt; it any more than necessary, since there's perception out there  that the 
&gt; project is not doing that well. I trust you and Elizabeth  can work out a 
&gt; plan and coordinate with Anant.
&gt;
&gt; -Andrei
&gt;
&gt;
&gt; On May 25, 2007, at 4:18 PM, Steph Fox wrote:
&gt;
&gt;&gt; Hey Andrei,
&gt;&gt;
&gt;&gt; Elizabeth has stuff to go in I still need to check, otherwise we  risk it 
&gt;&gt; not working under Win98 (all Madeleine's clients down at  one stroke). 
&gt;&gt; She also is working on an installer, but I don't know  how far she's got 
&gt;&gt; with that.
&gt;&gt;
&gt;&gt; We also want to have two win32 releases for much the same reason -  one 
&gt;&gt; Elizabeth can roll using the faster non-ZTS stuff Edin makes  available 
&gt;&gt; these days, and one I can roll using MSVC6/ZTS that will  work on older 
&gt;&gt; machines.
&gt;&gt;
&gt;&gt; I'm heading out to Norway at the end of the first week in June for  a few 
&gt;&gt; days, but otherwise around - just busy (when not?)
&gt;&gt;
&gt;&gt; - Steph
&gt;&gt;
&gt;&gt; ----- Original Message ----- From: "Andrei Zmievski" 
&gt;&gt; &lt;andrei@gravitonic.com&gt;
&gt;&gt; To: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
&gt;&gt; Sent: Saturday, May 26, 2007 12:10 AM
&gt;&gt; Subject: [PHP-GTK-DEV] Beta?
&gt;&gt;
&gt;&gt;
&gt;&gt;&gt; I think it's time to release the beta, since we're doing pretty  well 
&gt;&gt;&gt; on API coverage and people are clamoring for a new release. 
&gt;&gt;&gt; Unfortunately, I won't be able to do this until at least June  14th, 
&gt;&gt;&gt; since I will be far away without any Internet access.  Anyone up for 
&gt;&gt;&gt; making a beta release?
&gt;&gt;&gt;
&gt;&gt;&gt; -Andrei
&gt;&gt;&gt;
&gt;&gt;&gt; -- 
&gt;&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070528175742</emailId><senderName>"Madeleine D."</senderName><senderEmail>chezmmd@yahoo.com</senderEmail><timestampReceived>2007-05-28 17:57:42-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta?</subject><body>


Steph -

Not to do a 180 change on you... but if we're the only
site insisting on 
Win98, I think we can back down on that.  Enough time
has passed now - 
where I've been doing some serious leaning on my
management.  They're 
beginning to see the death of 98, and much more
willing to consider a 
change than they were last fall.  I think I can push
it still farther - 
along the lines of one of your original arguments;
i.e., Win98's using 
the older, Gtk1 version and the spiffy Gtk2 for our
newer sites. 

I certainly don't want us to be the sole cause of a
holdup on the beta, 
or a complication in the overall development process. 

Madeleine D.



Steph Fox wrote:

&gt; Hey Andrei,
&gt; 
&gt; Elizabeth has stuff to go in I still need to check,
otherwise we risk 
&gt; it not working under Win98 (all Madeleine's clients
down at one 
&gt; stroke). She also is working on an installer, but I
don't know how far 
&gt; she's got with that.
&gt; 
&gt; We also want to have two win32 releases for much the
same reason - one 
&gt; Elizabeth can roll using the faster non-ZTS stuff
Edin makes available 
&gt; these days, and one I can roll using MSVC6/ZTS that
will work on older 
&gt; machines.
&gt; 
&gt; I'm heading out to Norway at the end of the first
week in June for a 
&gt; few days, but otherwise around - just busy (when
not?)
&gt; 
&gt; - Steph
&gt; 
&gt; ----- Original Message ----- From: "Andrei Zmievski"

&gt; &lt;andrei@gravitonic.com&gt;
&gt; To: "PHP-GTK dev" &lt;php-gtk-dev@lists.php.net&gt;
&gt; Sent: Saturday, May 26, 2007 12:10 AM
&gt; Subject: [PHP-GTK-DEV] Beta?
&gt; 
&gt; 
&gt; &gt; I think it's time to release the beta, since we're
doing pretty well  
&gt; &gt; on API coverage and people are clamoring for a new
release.  
&gt; &gt; Unfortunately, I won't be able to do this until at
least June 14th,  
&gt; &gt; since I will be far away without any Internet
access. Anyone up for  
&gt; &gt; making a beta release?
&gt; &gt; 
&gt; &gt; -Andrei
&gt; &gt; 
&gt; &gt; -- 
&gt; &gt; PHP-GTK Development Mailing List
(http://gtk.php.net/)
&gt; &gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; &gt; 
&gt; 


       
____________________________________________________________________________________You \
snooze, you lose. Get messages ASAP with AutoCheck in the all-new Yahoo! Mail Beta.
http://advision.webevents.yahoo.com/mailbeta/newmail_html.html

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070303192702</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-03-03 19:27:02-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] cannot create gtksourcestylesheme interface</subject><body>

Christian, you find the best (obscure) bugs. This one was rather non- 
trivial. I committed a fix, but I do need you and others to test  
areas in PHP-GTK related to interfaces, including tree models. Also,  
test GdkGC stuff (creating and getting them).

If you're curious about what the problem was.. readon. When  
get_style_scheme() is called, it dynamically creates a class called  
GtkSourceDefaultStyleScheme that implements the GtkSourceStyleScheme  
interface. Since both the class and the interface had 'gtype'  
constant registered, there was a conflict. So now, we don't register  
'gtype' for interfaces. However, that uncovered another problem. If  
you implement an interface, the method in the class is marked as  
abstract (since there's no implementation for this dynamic class).  
But the interface supplies default implementation, so we need to get  
to that somehow. This necessitated changing how we register interface  
methods and also required unsetting the abstract flag on inherited  
methods and class itself. So that's why I'm asking for more testing  
in these areas.

-Andrei


On Feb 3, 2007, at 6:46 AM, Christian Weiske wrote:

&gt; Hi all,
&gt;
&gt;
&gt; trying this:
&gt; &lt;?php
&gt; $gslm = new GtkSourceLanguagesManager();
&gt; $gsl = $gslm-&gt;get_language_from_mime_type('application/x-php');
&gt; $schema = $gsl-&gt;get_style_scheme();
&gt; ?&gt;
&gt;
&gt; I get
&gt; --------------
&gt; Fatal error: Cannot inherit previously-inherited constant gtype from
&gt; interface GtkSourceStyleScheme
&gt; --------------
&gt;
&gt; I don't know what to do with it nor how to fix it..
&gt;
&gt; -- 
&gt; Regards/Mit freundlichen Grüßen
&gt; Christian Weiske
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070303194345</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-03-03 19:43:45-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] PHP-GTK2 book</subject><body>

&gt; I've been rewriting my first book of PHP-GTK published in 2004 for more
&gt; than one year to cover PHP-GTK2. Now it's done. The book was published
&gt; this week.

Congratulations Pablo!

The cover of the book certainly looks most impressive :)

-- 
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070303191253</emailId><senderName>"Pablo Dall'Oglio"</senderName><senderEmail>pablo@dalloglio.net</senderEmail><timestampReceived>2007-03-03 19:12:53-0400</timestampReceived><subject>[PHP-GTK-DEV] PHP-GTK2 book</subject><body>

Hello,

I would like to share my happiness with all of you.

I've been rewriting my first book of PHP-GTK published in 2004 for more
than one year to cover PHP-GTK2. Now it's done. The book was published
this week.

This second edition was totally rewritten to offer a solid background
about object orientation (50 pages chapter) and explain in details
almost every Gtk widget (80 pages chapter). The book have also an
exclusive chapter about the use of php-gtk2 with sqlite (20 pages),
another chapter explaining how to extend the native classes to build
your own components (43 pages), a chapter about using glade (30 pages)
an exclusive chapter about MVC and treeview/textview components, and a
long introductory chapter about PHP conpects and the basis of the
language (50 pages).

Well, I know the portuguese isn't your primary language but I thought
you would like to know about this publication that highlights the
php-gtk success :-)

www.php-gtk.com.br/book

best regards
Pablo Dall'Oglio

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070302154158</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-03-02 15:41:58-0400</timestampReceived><subject>[PHP-GTK-DEV] Beta Release?</subject><body>

Hi all,

I think it's time we had a beta release. We're at 94.01% overall
coverage (including the Scintilla and SourceView extensions) [1]; and
have a significant number of new features/extensions since the alpha
release; most importantly custom Tree models.

However, before we go about it, we'll have to decide on whether to
include the following:

1) 2.8/2.10 Support. Elizabeth has provided patches for this, and the
build system will automatically build the latest version found on the
system. I've extended this to work on Linux and OSX.

2) The GtkHTML3 and libsexy extensions.

3) Installers for Win32 and OSX. I have one ready for OSX. If
Elizabeth/Steph can get around to making one for Windows in a reasonable
time-frame, we can include that in Beta.

4) Move to native Scintilla (Tom's Scintilla) instead of GtkScintilla.
This one's on me and I'll get around to it soon enough.

Please pitch in with your comments. The quicker we come to a consensus
on the 4 points, the better :)

Best Regards,
-- 
Anant

[1] http://php-gtk2.de/manual/classcoverage.htm

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070303191555</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-03-03 19:15:55-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] PHP-GTK2 book</subject><body>

Whoa!

Congratulations on your bouncing baby book, Pablo!

- Steph


----- Original Message ----- 
From: "Pablo Dall'Oglio" &lt;pablo@dalloglio.net&gt;
To: &lt;php-gtk-general@lists.php.net&gt;; &lt;php-gtk-dev@lists.php.net&gt;
Sent: Saturday, March 03, 2007 7:12 PM
Subject: [PHP-GTK] PHP-GTK2 book


&gt; Hello,
&gt; 
&gt; I would like to share my happiness with all of you.
&gt; 
&gt; I've been rewriting my first book of PHP-GTK published in 2004 for more
&gt; than one year to cover PHP-GTK2. Now it's done. The book was published
&gt; this week.
&gt; 
&gt; This second edition was totally rewritten to offer a solid background
&gt; about object orientation (50 pages chapter) and explain in details
&gt; almost every Gtk widget (80 pages chapter). The book have also an
&gt; exclusive chapter about the use of php-gtk2 with sqlite (20 pages),
&gt; another chapter explaining how to extend the native classes to build
&gt; your own components (43 pages), a chapter about using glade (30 pages)
&gt; an exclusive chapter about MVC and treeview/textview components, and a
&gt; long introductory chapter about PHP conpects and the basis of the
&gt; language (50 pages).
&gt; 
&gt; Well, I know the portuguese isn't your primary language but I thought
&gt; you would like to know about this publication that highlights the
&gt; php-gtk success :-)
&gt; 
&gt; www.php-gtk.com.br/book
&gt; 
&gt; best regards
&gt; Pablo Dall'Oglio
&gt; 
&gt; -- 
&gt; PHP-GTK General Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070307171323</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-03-07 17:13:23-0400</timestampReceived><subject>[PHP-GTK-DEV] Custom Signals Support</subject><body>

I've been working on getting custom signal support written because I'd 
really like to use it in some work I'm doing.

I have Gobject::signal_new implemented and working (also registered the 
signal run type constants).  I've attached the patch for it as well as a 
test script.  However, I've run into a few limitations with the 
implementation.

First of all, signals are assigned globally for a gtype.  Right now php 
classes that extend a php-gtk gtype aren't creating their own gtype but 
just using their parents.  Why is this bad? Well if you extend gtkwindow 
and add a custom signal...the signal is added to gtkwindow (and by 
default also to your extended class) which may not be the intended 
behavior.  Now, it is possible to create new gtypes that extend a parent 
gtype so I know HOW to fix the problem, however I don't know WHERE that 
code needs to go.  Any suggestions?

The second problem is I'd like to allow custom signals to be created 
using just a class name and not an object instance.  I can grab the 
zend_class_entry but right now the gtype is NOT stored in it.  You can 
get the class entry from the gtype...but not the other way around.  Any 
suggestions for fixing that problem?

Otherwise the patch allows custom signals.


["phpg_gobject.c.patch" (text/plain)]

Index: phpg_gobject.c
===================================================================
RCS file: /repository/php-gtk/main/phpg_gobject.c,v
retrieving revision 1.60
diff -u -r1.60 phpg_gobject.c
--- phpg_gobject.c	7 Dec 2006 07:14:20 -0000	1.60
+++ phpg_gobject.c	7 Mar 2007 16:12:36 -0000
@@ -886,6 +886,67 @@
 }
 /* }}} */
 
+/* {{{ GObject::signal_new */
+static PHP_METHOD(GObject, signal_new)
+{
+	gchar *signal_name;
+	GType instance_type, *param_types = NULL, return_type = G_TYPE_NONE;
+    GSignalFlags signal_flags;
+	zval *callback, *extra, *instance, **item;
+	guint signal_id;
+	zend_class_entry *ce = NULL;
+	int n_params = 0, i;
+
+	if (!php_gtk_parse_varargs(ZEND_NUM_ARGS(), 5, &amp;extra, "sViVi", &amp;signal_name, \
&amp;instance, &amp;signal_flags, &amp;callback, &amp;return_type)) +        return;
+
+	if (Z_TYPE_P(instance) == IS_OBJECT) {
+		instance_type = phpg_gtype_from_zval(instance);
+	} else if (Z_TYPE_P(instance) == IS_STRING) {
+		zend_class_entry **pce;
+		if (zend_lookup_class(Z_STRVAL_P(instance), Z_STRLEN_P(instance), &amp;pce TSRMLS_CC) \
== SUCCESS) { +			ce = *pce;
+		}
+		php_printf("TODO: use zend_class_entry to grab ce-&gt;gtype?");
+		
+	}
+	if (!instance_type)
+		return;
+
+	if(extra)
+	{
+		n_params = zend_hash_num_elements(Z_ARRVAL_P(extra));
+
+		if (n_params &gt; 0) {
+			param_types = safe_emalloc(n_params, sizeof(GType), 0);
+			for (i = 0, zend_hash_internal_pointer_reset(Z_ARRVAL_P(extra));
+				 zend_hash_get_current_data(Z_ARRVAL_P(extra), (void**)&amp;item) == SUCCESS;
+				 zend_hash_move_forward(Z_ARRVAL_P(extra)), i++) {
+
+				param_types[i] = phpg_gtype_from_zval(*item);
+				if (param_types[i] == 0) {
+					efree(param_types);
+					php_error(E_WARNING, "could not set types for signal callback");
+					return;
+				}
+			}
+		}
+	}
+
+	signal_id = g_signal_newv(signal_name, instance_type, signal_flags,
+			      phpg_closure_new(callback, extra, PHPG_CONNECT_SIMPLE, NULL TSRMLS_CC),
+			      (GSignalAccumulator)0, NULL,
+			      (GSignalCMarshaller)0,
+			      return_type, n_params, param_types);
+
+	efree(param_types);
+	if (signal_id != 0)
+	RETURN_LONG(signal_id);
+	php_error(E_WARNING, "Unable to create signal");
+    return;
+	
+}
+/* }}} */
 
 /* {{{ GObject reflection info */
 static
@@ -989,6 +1050,17 @@
 ZEND_END_ARG_INFO();
 
 static
+ZEND_BEGIN_ARG_INFO_EX(arginfo_gobject_signal_new, 0, 0, 5)
+    ZEND_ARG_INFO(0, signal)
+    ZEND_ARG_INFO(0, instance)
+    ZEND_ARG_INFO(0, flags)
+    ZEND_ARG_INFO(0, callback)
+    ZEND_ARG_INFO(0, return_gtype)
+    ZEND_ARG_INFO(0, user_data)
+    ZEND_ARG_INFO(0, ...)
+ZEND_END_ARG_INFO();
+
+static
 ZEND_BEGIN_ARG_INFO(arginfo_gobject_unblock, 0)
     ZEND_ARG_INFO(0, handler_id)
 ZEND_END_ARG_INFO();
@@ -1023,6 +1095,7 @@
     PHP_ME(GObject, is_connected,         arginfo_gobject_is_connected          , \
                ZEND_ACC_PUBLIC)
     PHP_ME(GObject, signal_query,         arginfo_gobject_signal_query          , \
                ZEND_ACC_PUBLIC|ZEND_ACC_STATIC)
     PHP_ME(GObject, stop_emission,        arginfo_gobject_stop_emission         , \
ZEND_ACC_PUBLIC) +	PHP_ME(GObject, signal_new,			  arginfo_gobject_signal_new         \
                , ZEND_ACC_PUBLIC|ZEND_ACC_STATIC)
     PHP_ME(GObject, signal_list_ids,      arginfo_gobject_signal_list_ids       , \
                ZEND_ACC_PUBLIC|ZEND_ACC_STATIC)
     PHP_ME(GObject, signal_list_names,    arginfo_gobject_signal_list_names     , \
                ZEND_ACC_PUBLIC|ZEND_ACC_STATIC)
     PHP_MALIAS(GObject, emit_stop_by_name, stop_emission, \
arginfo_gobject_stop_emission, ZEND_ACC_PUBLIC) @@ -1055,8 +1128,15 @@
 
     gobject_ce = phpg_register_class("GObject", gobject_methods, NULL, 0, \
                gobject_props_info, NULL, G_TYPE_OBJECT TSRMLS_CC);
     phpg_register_int_constant(gobject_ce, "gtype", sizeof("gtype")-1, \
G_TYPE_OBJECT); +	phpg_register_int_constant(gobject_ce, "SIGNAL_RUN_FIRST", \
sizeof("SIGNAL_RUN_FIRST")-1, G_SIGNAL_RUN_FIRST); +    \
phpg_register_int_constant(gobject_ce, "SIGNAL_RUN_LAST", \
sizeof("SIGNAL_RUN_LAST")-1, G_SIGNAL_RUN_LAST); +    \
phpg_register_int_constant(gobject_ce, "SIGNAL_RUN_CLEANUP", \
sizeof("SIGNAL_RUN_CLEANUP")-1, G_SIGNAL_RUN_CLEANUP); +    \
phpg_register_int_constant(gobject_ce, "SIGNAL_NO_RECURSE", \
sizeof("SIGNAL_NO_RECURSE")-1, G_SIGNAL_NO_RECURSE); +    \
phpg_register_int_constant(gobject_ce, "SIGNAL_DETAILED", \
sizeof("SIGNAL_DETAILED")-1, G_SIGNAL_DETAILED); +    \
phpg_register_int_constant(gobject_ce, "SIGNAL_ACTION", sizeof("SIGNAL_ACTION")-1, \
G_SIGNAL_ACTION); +    phpg_register_int_constant(gobject_ce, "SIGNAL_NO_HOOKS", \
sizeof("SIGNAL_NO_HOOKS")-1, G_SIGNAL_NO_HOOKS);  }
 
 #endif /* HAVE_PHP_GTK */
 
-/* vim: set fdm=marker et sts=4: */
+/* vim: set fdm=marker et sts=4: */
\ No newline at end of file


["uimanager.php.txt" (text/plain)]

&lt;?php
function dome()
{
	echo "custom signal ahoy\n";
	return TRUE;
}
function do_mysignal()
{
	echo "this is always called on my-signal\n";
}
function do_goosignal($widget, $arg)
{
	echo "$widget\n$arg\n";
	return TRUE;
}

class Mywindow extends GtkWindow{}
$widget = new Mywindow();
$arg1 = 'cat';
GObject::signal_new('my-signal', $widget, GObject::SIGNAL_RUN_LAST, 'do_mysignal', \
Gtk::TYPE_NONE); GObject::signal_new('goo-signal', $widget, GObject::SIGNAL_RUN_LAST, \
'do_goosignal_full', Gtk::TYPE_BOOLEAN, $widget, $arg1); \
print_r(GObject::signal_list_names(GtkWindow::gtype)); \
$widget-&gt;connect_simple('destroy', array('Gtk', 'main_quit')); \
$widget-&gt;connect_simple('my-signal', 'dome'); $widget-&gt;connect_simple('goo-signal', \
'dome'); $widget-&gt;show_all();
$widget-&gt;emit('my-signal');
$widget-&gt;emit('goo-signal');
Gtk::main();
?&gt;



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070316193526</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-03-16 19:35:26-0400</timestampReceived><subject>[PHP-GTK-DEV] Msi Installer Status</subject><body>

Afternoon,

First of all, an observation -  the standard naming for php extensions 
is php_&lt;extension name&gt;.dll, however php-gtk2.dll uses a hyphen.  And 
all the php gtk extensions use underscores.  Was this done purposely or 
just kind of missed in the confusion?  I think it might be a smart idea 
to rename it to php_gtk2.dll

I'm about halfway finished with the windows msi installer for php-gtk. 
Currently it installs the gtk runtime, a basic php runtime, the 
php-gtk2.dll, and registers a .phpg type so double clicking runs the 
file with php-gtk (the reasoning for choosing phpg is it's short, sweet, 
and won't conflict with winbinder which uses .phpw)

It's been lots of fun (hear the sarcasm?)  The current source is located 
at http://callicore.net/php-gtk2/installer  The installer is written 
with wix (I'm also using wixedit - which is a decent gui for wix files)
wix is open source (yes, ms really open sourced it) and the files 
currently use the stable version 2 - the new php windows installer was a 
great help for creating this installer

The installer is getting pretty large merely from the fact that it's 
three installers in one...I'm aiming for the following

1. A complete gtk+ runtime (plus widget extensions, theme engines, 
localization files, pixbuf loaders, immodules, gtk extension 
dependencies such as aspell and enchant and all the other assorted gtk fun)

2. A complete php runtime - with only the cli sapis (php extensions, 
pecl extensions, registering php mimetypes)

3. Php-gtk itself (the main dll, php-gtk extensions, phpg double click &amp; 
mimetype registration, php-cli.ini creation/update with proper 
extensions enabled)

Now - so far the installer doesn't mess with environment variables or 
currently installed php versions.  This is so the php-gtk install is 
"self-contained" and can be put on a computer with a webserver running 
or gaim installed, for example, without mucking anything up.  A self 
contained gtk install seems to be the rule on windows.  Also because 
it's an msi it has repair and change capabilities - so you can install 
it one way and add locale files and/or additional extensions very easily.

I'd appreciate some feedback on what people would like the installer to 
do (and someone to make some nicer bitmaps and .ico files)

Steph, I know we talked about bootstrapping a php ini file editor (and 
adding a start menu link to it as well) so windows users wouldn't be 
digging into the files and get lost when trying to edit their ini file. 
  This is very easily accomplished, but someone would have to write the 
editor - ideally a one file app that only needs basic php and the 
php-gtk2.dll extension. (Theoretically we can just go the apache route 
and add a shortcut to the ini file in the start menu instead of bundling 
an application)

Also, should I add in the ability to install the demos?  What about php 
or php-gtk documentation .chm files?  (Do the php-gtk docs do chm?)

I'll keep you updated on the progress of this monster, I'll try to get 
it done before the beta release.

The last point is the msi currently only works on NT+ systems (it's 
installing the 2.10 dlls and it does check and throws an error if your 
OS is 95/98 or ME) - we'll probably want a specialized separate version 
with only 2.6 items and the last win95/98/ME supported php5 but I'm not 
certain if an .msi will be the way to go in that situation.

Any thoughts?  Opinions? I'll be needing some guinea pigs to test the 
installer, give me a mail if you're interested.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070316201538</emailId><senderName>Christian Weiske</senderName><senderEmail>cweiske@cweiske.de</senderEmail><timestampReceived>2007-03-16 20:15:38-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Msi Installer Status</subject><body>


Elizabeth,

&gt; php-gtk2.dll, and registers a .phpg type so double clicking runs the
&gt; file with php-gtk (the reasoning for choosing phpg is it's short, sweet,
&gt; and won't conflict with winbinder which uses .phpw)
I chose .phpw since it does not matter at all if a (w)indowed php app
uses tk, gtk or win32 api
to create a gui - .exe files also don't have .exec, .exed (delphi),
.exev (visual basic) and such.

The gnope installer also sets up a pear environment so people can use
the gtk2 packages in there or distribute their apps as pear compatible
packages. For this I ship PEAR_Frontend_Gtk2, to make application
installation as easy as possible.

It also ships the demos, some dev programs (dev_inspector and such), and
the wimp theme engine - if the user checks the items.



-- 
Regards/Mit freundlichen Grüßen
Christian Weiske


["signature.asc" (application/pgp-signature)]

</body></email><email><emailId>20070316204332</emailId><senderName>Elizabeth Smith</senderName><senderEmail>emsmith@elizabethmariesmith.com</senderEmail><timestampReceived>2007-03-16 20:43:32-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Msi Installer Status</subject><body>


&gt; I chose .phpw since it does not matter at all if a (w)indowed php app
&gt; uses tk, gtk or win32 api
&gt; to create a gui - .exe files also don't have .exec, .exed (delphi),
&gt; .exev (visual basic) and such.

Windows is not *nix.  A php-gtk script is not an executable.  Although
in linux you can simply toggle an executable file attribute and give it
a hashbang, windows has ONE WAY to show what to do with a file, the
extension.  Comparing a scripting file extension to windows executable
extension is apples to oranges.  You do have .js scripting files and
.wsh scripting files and .vb scripting files (unless you compile that
visual basic script to an .exe you better have a .vb extension on it).
The extension tells windows how to execute it.  The problem is the way
windows registers file types - to get the "double click" magical
functionality windows needs to be told the proper action to take.  If
you register .phpw with php-gtk and overwrite the windbinder
registration your computer will have problems if you use a script meant
for winbinder to run on the executable meant for gtk. - ask leon ;)  It
would be like registering .zip or .tar - suddenly other programs don't
work because you took an extension another program uses.  A file
extension on windows functions much the way a hashbang functions on
linux - windows just isn't as cool ;)

As of 2.8 wimp is enabled by default in Gtk+ on windows - I've added a
bunch of additional optional themes and theme engines and a theme
switcher as well, but I'm not sure how useful that will be to the
average user.

I can add an option to install PEAR (since I'm basically duplicating the
php installer functionality - why microsoft didn't make dependencies
easier is beyond me - and merge modules suck) and the demos - but
probably not in the typical clickthrough install.  Multiple pear
installs can really do weird stuff on a computer.  Any other opinions?

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070316212117</emailId><senderName>Christian Weiske</senderName><senderEmail>cweiske@cweiske.de</senderEmail><timestampReceived>2007-03-16 21:21:17-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Msi Installer Status</subject><body>


Elizabeth,


&gt; functionality windows needs to be told the proper action to take.  If
&gt; you register .phpw with php-gtk and overwrite the windbinder
&gt; registration your computer will have problems if you use a script meant
&gt; for winbinder to run on the executable meant for gtk. - ask leon ;)  It
Both at php files and are executed with php. If the user chooses
to want to have different php installations for both types, that's
their problem. PHP allows you to have multiple extensions in one
installation, and this should be used.


-- 
Regards/Mit freundlichen Grüßen
Christian Weiske


["signature.asc" (application/pgp-signature)]

</body></email><email><emailId>20070308173856</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-03-08 17:38:56-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Custom Signals Support</subject><body>

Elizabeth,

Supporting custom signals will be quite a bit more involved than this. 
It'll probably be based on created a new class which will contain its 
signal descriptions and then registering it with GType system. If I 
have time this weekend I might work on that.. Unless we want to do beta 
release first.

-Andrei

On Mar 7, 2007, at 9:13 AM, Elizabeth Smith wrote:

&gt; I've been working on getting custom signal support written because I'd 
&gt; really like to use it in some work I'm doing.
&gt;
&gt; I have Gobject::signal_new implemented and working (also registered 
&gt; the signal run type constants).  I've attached the patch for it as 
&gt; well as a test script.  However, I've run into a few limitations with 
&gt; the implementation.
&gt;
&gt; First of all, signals are assigned globally for a gtype.  Right now 
&gt; php classes that extend a php-gtk gtype aren't creating their own 
&gt; gtype but just using their parents.  Why is this bad? Well if you 
&gt; extend gtkwindow and add a custom signal...the signal is added to 
&gt; gtkwindow (and by default also to your extended class) which may not 
&gt; be the intended behavior.  Now, it is possible to create new gtypes 
&gt; that extend a parent gtype so I know HOW to fix the problem, however I 
&gt; don't know WHERE that code needs to go.  Any suggestions?
&gt;
&gt; The second problem is I'd like to allow custom signals to be created 
&gt; using just a class name and not an object instance.  I can grab the 
&gt; zend_class_entry but right now the gtype is NOT stored in it.  You can 
&gt; get the class entry from the gtype...but not the other way around.  
&gt; Any suggestions for fixing that problem?
&gt;
&gt; Otherwise the patch allows custom signals.
&gt;
&gt; Index: phpg_gobject.c
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/main/phpg_gobject.c,v
&gt; retrieving revision 1.60
&gt; diff -u -r1.60 phpg_gobject.c
&gt; --- phpg_gobject.c	7 Dec 2006 07:14:20 -0000	1.60
&gt; +++ phpg_gobject.c	7 Mar 2007 16:12:36 -0000
&gt; @@ -886,6 +886,67 @@
&gt;  }
&gt;  /* }}} */
&gt;
&gt; +/* {{{ GObject::signal_new */
&gt; +static PHP_METHOD(GObject, signal_new)
&gt; +{
&gt; +	gchar *signal_name;
&gt; +	GType instance_type, *param_types = NULL, return_type = G_TYPE_NONE;
&gt; +    GSignalFlags signal_flags;
&gt; +	zval *callback, *extra, *instance, **item;
&gt; +	guint signal_id;
&gt; +	zend_class_entry *ce = NULL;
&gt; +	int n_params = 0, i;
&gt; +
&gt; +	if (!php_gtk_parse_varargs(ZEND_NUM_ARGS(), 5, &amp;extra, "sViVi", 
&gt; &amp;signal_name, &amp;instance, &amp;signal_flags, &amp;callback, &amp;return_type))
&gt; +        return;
&gt; +
&gt; +	if (Z_TYPE_P(instance) == IS_OBJECT) {
&gt; +		instance_type = phpg_gtype_from_zval(instance);
&gt; +	} else if (Z_TYPE_P(instance) == IS_STRING) {
&gt; +		zend_class_entry **pce;
&gt; +		if (zend_lookup_class(Z_STRVAL_P(instance), Z_STRLEN_P(instance), 
&gt; &amp;pce TSRMLS_CC) == SUCCESS) {
&gt; +			ce = *pce;
&gt; +		}
&gt; +		php_printf("TODO: use zend_class_entry to grab ce-&gt;gtype?");
&gt; +		
&gt; +	}
&gt; +	if (!instance_type)
&gt; +		return;
&gt; +
&gt; +	if(extra)
&gt; +	{
&gt; +		n_params = zend_hash_num_elements(Z_ARRVAL_P(extra));
&gt; +
&gt; +		if (n_params &gt; 0) {
&gt; +			param_types = safe_emalloc(n_params, sizeof(GType), 0);
&gt; +			for (i = 0, zend_hash_internal_pointer_reset(Z_ARRVAL_P(extra));
&gt; +				 zend_hash_get_current_data(Z_ARRVAL_P(extra), (void**)&amp;item) == 
&gt; SUCCESS;
&gt; +				 zend_hash_move_forward(Z_ARRVAL_P(extra)), i++) {
&gt; +
&gt; +				param_types[i] = phpg_gtype_from_zval(*item);
&gt; +				if (param_types[i] == 0) {
&gt; +					efree(param_types);
&gt; +					php_error(E_WARNING, "could not set types for signal callback");
&gt; +					return;
&gt; +				}
&gt; +			}
&gt; +		}
&gt; +	}
&gt; +
&gt; +	signal_id = g_signal_newv(signal_name, instance_type, signal_flags,
&gt; +			      phpg_closure_new(callback, extra, PHPG_CONNECT_SIMPLE, NULL 
&gt; TSRMLS_CC),
&gt; +			      (GSignalAccumulator)0, NULL,
&gt; +			      (GSignalCMarshaller)0,
&gt; +			      return_type, n_params, param_types);
&gt; +
&gt; +	efree(param_types);
&gt; +	if (signal_id != 0)
&gt; +	RETURN_LONG(signal_id);
&gt; +	php_error(E_WARNING, "Unable to create signal");
&gt; +    return;
&gt; +	
&gt; +}
&gt; +/* }}} */
&gt;
&gt;  /* {{{ GObject reflection info */
&gt;  static
&gt; @@ -989,6 +1050,17 @@
&gt;  ZEND_END_ARG_INFO();
&gt;
&gt;  static
&gt; +ZEND_BEGIN_ARG_INFO_EX(arginfo_gobject_signal_new, 0, 0, 5)
&gt; +    ZEND_ARG_INFO(0, signal)
&gt; +    ZEND_ARG_INFO(0, instance)
&gt; +    ZEND_ARG_INFO(0, flags)
&gt; +    ZEND_ARG_INFO(0, callback)
&gt; +    ZEND_ARG_INFO(0, return_gtype)
&gt; +    ZEND_ARG_INFO(0, user_data)
&gt; +    ZEND_ARG_INFO(0, ...)
&gt; +ZEND_END_ARG_INFO();
&gt; +
&gt; +static
&gt;  ZEND_BEGIN_ARG_INFO(arginfo_gobject_unblock, 0)
&gt;      ZEND_ARG_INFO(0, handler_id)
&gt;  ZEND_END_ARG_INFO();
&gt; @@ -1023,6 +1095,7 @@
&gt;      PHP_ME(GObject, is_connected,         
&gt; arginfo_gobject_is_connected          , ZEND_ACC_PUBLIC)
&gt;      PHP_ME(GObject, signal_query,         
&gt; arginfo_gobject_signal_query          , 
&gt; ZEND_ACC_PUBLIC|ZEND_ACC_STATIC)
&gt;      PHP_ME(GObject, stop_emission,        
&gt; arginfo_gobject_stop_emission         , ZEND_ACC_PUBLIC)
&gt; +	PHP_ME(GObject, signal_new,			  arginfo_gobject_signal_new           
&gt;  , ZEND_ACC_PUBLIC|ZEND_ACC_STATIC)
&gt;      PHP_ME(GObject, signal_list_ids,      
&gt; arginfo_gobject_signal_list_ids       , 
&gt; ZEND_ACC_PUBLIC|ZEND_ACC_STATIC)
&gt;      PHP_ME(GObject, signal_list_names,    
&gt; arginfo_gobject_signal_list_names     , 
&gt; ZEND_ACC_PUBLIC|ZEND_ACC_STATIC)
&gt;      PHP_MALIAS(GObject, emit_stop_by_name, stop_emission, 
&gt; arginfo_gobject_stop_emission, ZEND_ACC_PUBLIC)
&gt; @@ -1055,8 +1128,15 @@
&gt;
&gt;      gobject_ce = phpg_register_class("GObject", gobject_methods, 
&gt; NULL, 0, gobject_props_info, NULL, G_TYPE_OBJECT TSRMLS_CC);
&gt;      phpg_register_int_constant(gobject_ce, "gtype", 
&gt; sizeof("gtype")-1, G_TYPE_OBJECT);
&gt; +	phpg_register_int_constant(gobject_ce, "SIGNAL_RUN_FIRST", 
&gt; sizeof("SIGNAL_RUN_FIRST")-1, G_SIGNAL_RUN_FIRST);
&gt; +    phpg_register_int_constant(gobject_ce, "SIGNAL_RUN_LAST", 
&gt; sizeof("SIGNAL_RUN_LAST")-1, G_SIGNAL_RUN_LAST);
&gt; +    phpg_register_int_constant(gobject_ce, "SIGNAL_RUN_CLEANUP", 
&gt; sizeof("SIGNAL_RUN_CLEANUP")-1, G_SIGNAL_RUN_CLEANUP);
&gt; +    phpg_register_int_constant(gobject_ce, "SIGNAL_NO_RECURSE", 
&gt; sizeof("SIGNAL_NO_RECURSE")-1, G_SIGNAL_NO_RECURSE);
&gt; +    phpg_register_int_constant(gobject_ce, "SIGNAL_DETAILED", 
&gt; sizeof("SIGNAL_DETAILED")-1, G_SIGNAL_DETAILED);
&gt; +    phpg_register_int_constant(gobject_ce, "SIGNAL_ACTION", 
&gt; sizeof("SIGNAL_ACTION")-1, G_SIGNAL_ACTION);
&gt; +    phpg_register_int_constant(gobject_ce, "SIGNAL_NO_HOOKS", 
&gt; sizeof("SIGNAL_NO_HOOKS")-1, G_SIGNAL_NO_HOOKS);
&gt;  }
&gt;
&gt;  #endif /* HAVE_PHP_GTK */
&gt;
&gt; -/* vim: set fdm=marker et sts=4: */
&gt; +/* vim: set fdm=marker et sts=4: */
&gt; \ No newline at end of file
&gt; &lt;?php
&gt; function dome()
&gt; {
&gt; 	echo "custom signal ahoy\n";
&gt; 	return TRUE;
&gt; }
&gt; function do_mysignal()
&gt; {
&gt; 	echo "this is always called on my-signal\n";
&gt; }
&gt; function do_goosignal($widget, $arg)
&gt; {
&gt; 	echo "$widget\n$arg\n";
&gt; 	return TRUE;
&gt; }
&gt;
&gt; class Mywindow extends GtkWindow{}
&gt; $widget = new Mywindow();
&gt; $arg1 = 'cat';
&gt; GObject::signal_new('my-signal', $widget, GObject::SIGNAL_RUN_LAST, 
&gt; 'do_mysignal', Gtk::TYPE_NONE);
&gt; GObject::signal_new('goo-signal', $widget, GObject::SIGNAL_RUN_LAST, 
&gt; 'do_goosignal_full', Gtk::TYPE_BOOLEAN, $widget, $arg1);
&gt; print_r(GObject::signal_list_names(GtkWindow::gtype));
&gt; $widget-&gt;connect_simple('destroy', array('Gtk', 'main_quit'));
&gt; $widget-&gt;connect_simple('my-signal', 'dome');
&gt; $widget-&gt;connect_simple('goo-signal', 'dome');
&gt; $widget-&gt;show_all();
&gt; $widget-&gt;emit('my-signal');
&gt; $widget-&gt;emit('goo-signal');
&gt; Gtk::main();
&gt; ?&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070308223404</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-03-08 22:34:04-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Custom Signals Support</subject><body>

Andrei Zmievski wrote:
&gt; Elizabeth,
&gt; 
&gt; Supporting custom signals will be quite a bit more involved than this. 
&gt; It'll probably be based on created a new class which will contain its 
&gt; signal descriptions and then registering it with GType system. If I have 
&gt; time this weekend I might work on that.. Unless we want to do beta 
&gt; release first.
&gt; 
&gt; -Andrei

Evening Andrei,

I didn't mean to imply that the patch did all of custom signal support, 
just that I had the first part of it working. (you can register new 
signals with it and they do work)

As far as I'm aware pygtk allows two ways of registering new signals.

The gobject::signal_new method implementation I sent in the patch was 
just a php version of 
http://www.pygtk.org/docs/pygobject/gobject-functions.html#function-gobject--signal-new

The difference there is the signal_new I wrote is more flexible in it's 
callback implementation.  Python requires you to have a do_{signalname} 
method in your class for the callback - I'm not sure if we really want 
to be adding a ton of magic for a signal callback... and would also 
force you to extend a base class like gtkwindow in order to be able to 
add a new signal to it. (python has more flexibility in "adding in" 
methods to an existing class)

Pygtk also has the support as you mentioned for extending a class by 
using "magic properties" __gtype__ and a __signals__ so you can give 
your class a custom gtype and auto register signal.  (If you required 
this for extended classes to have their own signals that would fix the 
first gtype issue I asked about)  I didn't write that support (yet) 
because I wasn't sure if you wanted to head the pygtk route, or had a 
different implementation approach in mind.

Second issue still stands - how do you grab the gtype from the 
zend_class_entry?

And just a random question - why are basic gtype constants defined in 
gtk and not in gtype or gobject .... just curious

Thanks,
Elizabeth

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070316184731</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-03-16 18:47:31-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Custom Signals Support</subject><body>

I had a closer look at this.

&gt; First of all, signals are assigned globally for a gtype.  Right now  
&gt; php classes that extend a php-gtk gtype aren't creating their own  
&gt; gtype but just using their parents.  Why is this bad? Well if you  
&gt; extend gtkwindow and add a custom signal...the signal is added to  
&gt; gtkwindow (and by default also to your extended class) which may  
&gt; not be the intended behavior.  Now, it is possible to create new  
&gt; gtypes that extend a parent gtype so I know HOW to fix the problem,  
&gt; however I don't know WHERE that code needs to go.  Any suggestions?

I've started work on registering custom gtypes (from PHP classes).  
It's quite involved and I'll probably commit a big chunk once it's  
working.

&gt; The second problem is I'd like to allow custom signals to be  
&gt; created using just a class name and not an object instance.  I can  
&gt; grab the zend_class_entry but right now the gtype is NOT stored in  
&gt; it.  You can get the class entry from the gtype...but not the other  
&gt; way around.  Any suggestions for fixing that problem?

There is phpg_gtype_from_class(), but if you think it's useful to  
specify gtype via class name, then we should just add that to  
phpg_gtype_from_zval().

As for the patch.. Why do you think it's better to specify the class  
closure explicitly rather than rely on a standard, like  
"do_&lt;signal_name&gt;" or something similar?

Also, I'm thinking about moving all signal/type related methods and  
constants to GObject. Currently we have a few in Gtk:: class, but on  
reflection, I don't think it's the right place for it. I'd rather  
move it before the beta release. Any disagreements?

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070303192032</emailId><senderName>"Pablo Dall'Oglio"</senderName><senderEmail>pablo@dalloglio.net</senderEmail><timestampReceived>2007-03-03 19:20:32-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] PHP-GTK2 book</subject><body>

Thanks Steph !

You're the person that helped me when I was starting with PHP-GTK in
2001. So you're responsible for all these consequences too ;-)

Pablo

Em SÃ¡b, 2007-03-03 Ã s 19:15 +0000, Steph Fox escreveu:
&gt; Whoa!
&gt; 
&gt; Congratulations on your bouncing baby book, Pablo!
&gt; 
&gt; - Steph
&gt; 
&gt; 
&gt; ----- Original Message ----- 
&gt; From: "Pablo Dall'Oglio" &lt;pablo@dalloglio.net&gt;
&gt; To: &lt;php-gtk-general@lists.php.net&gt;; &lt;php-gtk-dev@lists.php.net&gt;
&gt; Sent: Saturday, March 03, 2007 7:12 PM
&gt; Subject: [PHP-GTK] PHP-GTK2 book
&gt; 
&gt; 
&gt; &gt; Hello,
&gt; &gt; 
&gt; &gt; I would like to share my happiness with all of you.
&gt; &gt; 
&gt; &gt; I've been rewriting my first book of PHP-GTK published in 2004 for more
&gt; &gt; than one year to cover PHP-GTK2. Now it's done. The book was published
&gt; &gt; this week.
&gt; &gt; 
&gt; &gt; This second edition was totally rewritten to offer a solid background
&gt; &gt; about object orientation (50 pages chapter) and explain in details
&gt; &gt; almost every Gtk widget (80 pages chapter). The book have also an
&gt; &gt; exclusive chapter about the use of php-gtk2 with sqlite (20 pages),
&gt; &gt; another chapter explaining how to extend the native classes to build
&gt; &gt; your own components (43 pages), a chapter about using glade (30 pages)
&gt; &gt; an exclusive chapter about MVC and treeview/textview components, and a
&gt; &gt; long introductory chapter about PHP conpects and the basis of the
&gt; &gt; language (50 pages).
&gt; &gt; 
&gt; &gt; Well, I know the portuguese isn't your primary language but I thought
&gt; &gt; you would like to know about this publication that highlights the
&gt; &gt; php-gtk success :-)
&gt; &gt; 
&gt; &gt; www.php-gtk.com.br/book
&gt; &gt; 
&gt; &gt; best regards
&gt; &gt; Pablo Dall'Oglio
&gt; &gt; 
&gt; &gt; -- 
&gt; &gt; PHP-GTK General Mailing List (http://gtk.php.net/)
&gt; &gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; &gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070302161816</emailId><senderName>Cory Christison</senderName><senderEmail>cory.christison@gmail.com</senderEmail><timestampReceived>2007-03-02 16:18:16-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta Release?</subject><body>

Anant Narayanan wrote:
&gt; Hi all,
&gt;
&gt; I think it's time we had a beta release. We're at 94.01% overall
&gt; coverage (including the Scintilla and SourceView extensions) [1]; and
&gt; have a significant number of new features/extensions since the alpha
&gt; release; most importantly custom Tree models.
&gt;
&gt; However, before we go about it, we'll have to decide on whether to
&gt; include the following:
&gt;
&gt; 1) 2.8/2.10 Support. Elizabeth has provided patches for this, and the
&gt; build system will automatically build the latest version found on the
&gt; system. I've extended this to work on Linux and OSX.
&gt;   
2.8/2.10 would nice. Since it will automatically detect it, it will make 
it more seamless... however, won't it make developing around a bit more 
difficult? Eg: program needs X functionality from 2.10 and it doesn't 
have it. Thus it will not work.
&gt; 2) The GtkHTML3 and libsexy extensions.
&gt;   
My current project depends on GtkHTML3, it would be great to see it in 
the full release instead of having to apply it myself. Same goes for 
anyone who wishes to use my program [still in heavy development, but 
it's coming ;-)] As well libsexy would be really useful.
&gt; 3) Installers for Win32 and OSX. I have one ready for OSX. If
&gt; Elizabeth/Steph can get around to making one for Windows in a reasonable
&gt; time-frame, we can include that in Beta.
&gt;   
Not too huge of a deal to me. Although it will make life a lot easier 
for testing across multiple platforms. Especially since just got my 
first Mac last week, and am still tinkering with it trying to figure it out.
&gt; 4) Move to native Scintilla (Tom's Scintilla) instead of GtkScintilla.
&gt; This one's on me and I'll get around to it soon enough.
No comment here, not sure of the differences between Scintilla and 
GtkScintilla. :-P
&gt; Please pitch in with your comments. The quicker we come to a consensus
&gt; on the 4 points, the better :)
&gt;
&gt; Best Regards,
&gt;   

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070302185545</emailId><senderName>Elizabeth Smith</senderName><senderEmail>emsmith@elizabethmariesmith.com</senderEmail><timestampReceived>2007-03-02 18:55:45-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta Release?</subject><body>


&gt; 2.8/2.10 would nice. Since it will automatically detect it, it will 
&gt; make it more seamless... however, won't it make developing around a 
&gt; bit more difficult? Eg: program needs X functionality from 2.10 and it 
&gt; doesn't have it. Thus it will not work.
The biggest reason to keep the old versions available is because of 
windows 95/98/ME - they'll be forever stuck at gtk 2.6 and people 
writing stuff for them probably have very specific requirements, they 
won't be creating things to be used everywhere.  Every Linux distro I've 
checked has at least 2.8, and most are on 2.10 already.  Those on 
Windows 2000, XP, and Vista should REALLY be running 2.10 simply from 
the improvements in stability and features.  And there's always the 
Gtk::get_version() to check if your app requires  the newer features.  
Bail and give the user an error message that they really need to upgrade.
&gt;&gt; 2) The GtkHTML3 and libsexy extensions 
&gt; My current project depends on GtkHTML3, it would be great to see it in 
&gt; the full release instead of having to apply it myself. Same goes for 
&gt; anyone who wishes to use my program [still in heavy development, but 
&gt; it's coming ;-)] As well libsexy would be really useful.
I vote yes, I have them compiling on windows...gtkhtml3 even works and 
has fewer requirements than mozembed (believe it or not) ...we'll see 
what bugs pop up.
&gt;&gt; 3) Installers for Win32 and OSX. I have one ready for OSX. If
&gt;&gt; Elizabeth/Steph can get around to making one for Windows in a reasonable
&gt;&gt; time-frame, we can include that in Beta.
I'm working on the installer, not sure how long it will take me to get 
it finished
&gt;&gt; 4) Move to native Scintilla (Tom's Scintilla) instead of GtkScintilla.
&gt;&gt; This one's on me and I'll get around to it soon enough.
Works just fine on the windows end, it's all yours ;)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070303171920</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-03-03 17:19:20-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta Release?</subject><body>

On Mar 2, 2007, at 7:29 AM, Anant Narayanan wrote:

&gt; I think it's time we had a beta release. We're at 94.01% overall
&gt; coverage (including the Scintilla and SourceView extensions) [1]; and
&gt; have a significant number of new features/extensions since the alpha
&gt; release; most importantly custom Tree models.

Before we make another release, I think we should make sure there  
aren't any extant bugs. For example, there's still the cloning crash  
that Pablo described. I replied saying that we may not be able to  
support cloning due to complicated structure of internal Gtk+  
objects, but I haven't heard anything back. Are there other bugs we  
are aware of?

&gt; However, before we go about it, we'll have to decide on whether to
&gt; include the following:
&gt;
&gt; 1) 2.8/2.10 Support. Elizabeth has provided patches for this, and the
&gt; build system will automatically build the latest version found on the
&gt; system. I've extended this to work on Linux and OSX.

I'm fine with this as long as we make it clear in our builds which  
version they support. We should also encourage developers to  
explicitly check for the Gtk+ version in their applications.

&gt; 2) The GtkHTML3 and libsexy extensions.

Sure, these can be included (just the bindings, right?).

&gt; 4) Move to native Scintilla (Tom's Scintilla) instead of GtkScintilla.
&gt; This one's on me and I'll get around to it soon enough.

I would appreciate it.

It seems that our TODO2 list is somewhat out of date. Could people  
please look at the Classes and Functions section and remove the items  
that have been implemented?

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070303190001</emailId><senderName>"Pablo Dall'Oglio"</senderName><senderEmail>pablo@dalloglio.net</senderEmail><timestampReceived>2007-03-03 19:00:01-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta Release?</subject><body>

Em SÃ¡b, 2007-03-03 Ã s 09:19 -0800, Andrei Zmievski escreveu:
&gt; On Mar 2, 2007, at 7:29 AM, Anant Narayanan wrote:
&gt; 
&gt; &gt; I think it's time we had a beta release. We're at 94.01% overall
&gt; &gt; coverage (including the Scintilla and SourceView extensions) [1]; and
&gt; &gt; have a significant number of new features/extensions since the alpha
&gt; &gt; release; most importantly custom Tree models.
&gt; 
&gt; Before we make another release, I think we should make sure there  
&gt; aren't any extant bugs. For example, there's still the cloning crash  
&gt; that Pablo described. I replied saying that we may not be able to  
&gt; support cloning due to complicated structure of internal Gtk+  
&gt; objects, but I haven't heard anything back. Are there other bugs we  
&gt; are aware of?

I'm activelly using php-gtk2 since its first release.
I don't remember of any other bug like the clone support.

Just when using php-gtk2 on windows the set_cursor() method from
GdkWindow has a weird behavior, but I'm not sure it's a Gtk problem or
the underling environment... I'm not sure but I guess it gives me a
warning when I use pair numbers... in a loop from 1 to 255...

$gdkwindow-&gt;set_cursor(new GdkCursor(68));

Pablo

&gt; 
&gt; &gt; However, before we go about it, we'll have to decide on whether to
&gt; &gt; include the following:
&gt; &gt;
&gt; &gt; 1) 2.8/2.10 Support. Elizabeth has provided patches for this, and the
&gt; &gt; build system will automatically build the latest version found on the
&gt; &gt; system. I've extended this to work on Linux and OSX.
&gt; 
&gt; I'm fine with this as long as we make it clear in our builds which  
&gt; version they support. We should also encourage developers to  
&gt; explicitly check for the Gtk+ version in their applications.
&gt; 
&gt; &gt; 2) The GtkHTML3 and libsexy extensions.
&gt; 
&gt; Sure, these can be included (just the bindings, right?).
&gt; 
&gt; &gt; 4) Move to native Scintilla (Tom's Scintilla) instead of GtkScintilla.
&gt; &gt; This one's on me and I'll get around to it soon enough.
&gt; 
&gt; I would appreciate it.
&gt; 
&gt; It seems that our TODO2 list is somewhat out of date. Could people  
&gt; please look at the Classes and Functions section and remove the items  
&gt; that have been implemented?
&gt; 
&gt; -Andrei
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070303192117</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-03-03 19:21:17-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta Release?</subject><body>

Hey Anant, Andrei -

&gt; Before we make another release, I think we should make sure there  aren't 
&gt; any extant bugs. For example, there's still the cloning crash  that Pablo 
&gt; described. I replied saying that we may not be able to  support cloning 
&gt; due to complicated structure of internal Gtk+  objects, but I haven't 
&gt; heard anything back. Are there other bugs we  are aware of?

We used to have test scripts in CVS for bugs as they arose - we don't have 
anything equivalent now, and it makes it a bit harder to keep an eye on 
them. Perhaps we should start doing that again, because I know prior to 
alpha there were a few that were still broken under win32 but worked 
everywhere else.

&gt;&gt; However, before we go about it, we'll have to decide on whether to
&gt;&gt; include the following:
&gt;&gt;
&gt;&gt; 1) 2.8/2.10 Support. Elizabeth has provided patches for this, and the
&gt;&gt; build system will automatically build the latest version found on the
&gt;&gt; system. I've extended this to work on Linux and OSX.
&gt;
&gt; I'm fine with this as long as we make it clear in our builds which 
&gt; version they support. We should also encourage developers to  explicitly 
&gt; check for the Gtk+ version in their applications.
&gt;
&gt;&gt; 2) The GtkHTML3 and libsexy extensions.
&gt;
&gt; Sure, these can be included (just the bindings, right?).
&gt;
&gt;&gt; 4) Move to native Scintilla (Tom's Scintilla) instead of GtkScintilla.
&gt;&gt; This one's on me and I'll get around to it soon enough.

Yay!!! I still have a working copy of that somewhere here, but whether it 
was the final version is a different matter. It's good though!

- Steph 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070303192834</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-03-03 19:28:34-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta Release?</subject><body>

Pablo,

This is the email you sent me on December 18.

&gt; This clone gives me a segmentation fault.
&gt; Am I missing something somewhere ?
&gt; or there's something wrong internally ?
&gt;
&gt; &lt;?php
&gt;         $janela = new GtkWindow;
&gt;         $vbox = new GtkVBox;
&gt;         $janela-&gt;add($vbox);
&gt;         $botao1 = new GtkButton('botao 1');
&gt;         $botao2 = clone $botao1;
&gt;         $botao2-&gt;set_label('botao 2');
&gt;         $vbox-&gt;pack_start($botao1);
&gt;         $vbox-&gt;pack_start($botao2);
&gt;         $janela-&gt;show_all();
&gt;         Gtk::Main();
&gt; ?&gt;
&gt;
&gt; best regards
&gt; Pablo

Did you see my reply?

&gt; Hmm, cloning might be problematic. I don't know if Gtk+ supports  
&gt; the concept of copying an object with all its possible hierachies  
&gt; and properties.. and doing it manually is pretty difficult too.

-Andrei


On Mar 3, 2007, at 11:00 AM, Pablo Dall'Oglio wrote:

&gt; Em Sáb, 2007-03-03 às 09:19 -0800, Andrei Zmievski escreveu:
&gt;&gt; On Mar 2, 2007, at 7:29 AM, Anant Narayanan wrote:
&gt;&gt;
&gt;&gt;&gt; I think it's time we had a beta release. We're at 94.01% overall
&gt;&gt;&gt; coverage (including the Scintilla and SourceView extensions) [1];  
&gt;&gt;&gt; and
&gt;&gt;&gt; have a significant number of new features/extensions since the alpha
&gt;&gt;&gt; release; most importantly custom Tree models.
&gt;&gt;
&gt;&gt; Before we make another release, I think we should make sure there
&gt;&gt; aren't any extant bugs. For example, there's still the cloning crash
&gt;&gt; that Pablo described. I replied saying that we may not be able to
&gt;&gt; support cloning due to complicated structure of internal Gtk+
&gt;&gt; objects, but I haven't heard anything back. Are there other bugs we
&gt;&gt; are aware of?
&gt;
&gt; I'm activelly using php-gtk2 since its first release.
&gt; I don't remember of any other bug like the clone support.
&gt;
&gt; Just when using php-gtk2 on windows the set_cursor() method from
&gt; GdkWindow has a weird behavior, but I'm not sure it's a Gtk problem or
&gt; the underling environment... I'm not sure but I guess it gives me a
&gt; warning when I use pair numbers... in a loop from 1 to 255...
&gt;
&gt; $gdkwindow-&gt;set_cursor(new GdkCursor(68));
&gt;
&gt; Pablo
&gt;
&gt;&gt;
&gt;&gt;&gt; However, before we go about it, we'll have to decide on whether to
&gt;&gt;&gt; include the following:
&gt;&gt;&gt;
&gt;&gt;&gt; 1) 2.8/2.10 Support. Elizabeth has provided patches for this, and  
&gt;&gt;&gt; the
&gt;&gt;&gt; build system will automatically build the latest version found on  
&gt;&gt;&gt; the
&gt;&gt;&gt; system. I've extended this to work on Linux and OSX.
&gt;&gt;
&gt;&gt; I'm fine with this as long as we make it clear in our builds which
&gt;&gt; version they support. We should also encourage developers to
&gt;&gt; explicitly check for the Gtk+ version in their applications.
&gt;&gt;
&gt;&gt;&gt; 2) The GtkHTML3 and libsexy extensions.
&gt;&gt;
&gt;&gt; Sure, these can be included (just the bindings, right?).
&gt;&gt;
&gt;&gt;&gt; 4) Move to native Scintilla (Tom's Scintilla) instead of  
&gt;&gt;&gt; GtkScintilla.
&gt;&gt;&gt; This one's on me and I'll get around to it soon enough.
&gt;&gt;
&gt;&gt; I would appreciate it.
&gt;&gt;
&gt;&gt; It seems that our TODO2 list is somewhat out of date. Could people
&gt;&gt; please look at the Classes and Functions section and remove the items
&gt;&gt; that have been implemented?
&gt;&gt;
&gt;&gt; -Andrei
&gt;&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070303194122</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-03-03 19:41:22-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta Release?</subject><body>

&gt;&gt; Hmm, cloning might be problematic. I don't know if Gtk+ supports the 
&gt;&gt; concept of copying an object with all its possible hierachies and 
&gt;&gt; properties.. and doing it manually is pretty difficult too.
&gt; 
&gt; -Andrei

It might be easiest and best to just throw an error when someone tries 
to call clone from a gtk object - at least for now...  (yes clone 
segfaults everytime I've tried it as well)

A big fat error would be a lot nicer than having php blow up.

I haven't run into any other php-gtk errors or bugs...

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070303195342</emailId><senderName>"Pablo Dall'Oglio"</senderName><senderEmail>pablo@dalloglio.net</senderEmail><timestampReceived>2007-03-03 19:53:42-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Beta Release?</subject><body>

Em SÃ¡b, 2007-03-03 Ã s 11:28 -0800, Andrei Zmievski escreveu:
&gt; Pablo,
&gt; 
&gt; This is the email you sent me on December 18.
&gt; 
&gt; &gt; This clone gives me a segmentation fault.
&gt; &gt; Am I missing something somewhere ?
&gt; &gt; or there's something wrong internally ?
&gt; &gt;
&gt; &gt; &lt;?php
&gt; &gt;         $janela = new GtkWindow;
&gt; &gt;         $vbox = new GtkVBox;
&gt; &gt;         $janela-&gt;add($vbox);
&gt; &gt;         $botao1 = new GtkButton('botao 1');
&gt; &gt;         $botao2 = clone $botao1;
&gt; &gt;         $botao2-&gt;set_label('botao 2');
&gt; &gt;         $vbox-&gt;pack_start($botao1);
&gt; &gt;         $vbox-&gt;pack_start($botao2);
&gt; &gt;         $janela-&gt;show_all();
&gt; &gt;         Gtk::Main();
&gt; &gt; ?&gt;
&gt; &gt;
&gt; &gt; best regards
&gt; &gt; Pablo
&gt; 
&gt; Did you see my reply?
&gt; 
&gt; &gt; Hmm, cloning might be problematic. I don't know if Gtk+ supports  
&gt; &gt; the concept of copying an object with all its possible hierachies  
&gt; &gt; and properties.. and doing it manually is pretty difficult too.

Yes. It sounded to me like "we came to the edge". There's nothing else
to do... I didn't know what to answer so I stayed quiet.

Googling I found out that there are too few threads discussing about
Object Cloning with Gtk. Nothing that helps...

Pablo

&gt; 
&gt; -Andrei
&gt; 
&gt; 
&gt; On Mar 3, 2007, at 11:00 AM, Pablo Dall'Oglio wrote:
&gt; 
&gt; &gt; Em SÃ¡b, 2007-03-03 Ã s 09:19 -0800, Andrei Zmievski escreveu:
&gt; &gt;&gt; On Mar 2, 2007, at 7:29 AM, Anant Narayanan wrote:
&gt; &gt;&gt;
&gt; &gt;&gt;&gt; I think it's time we had a beta release. We're at 94.01% overall
&gt; &gt;&gt;&gt; coverage (including the Scintilla and SourceView extensions) [1];  
&gt; &gt;&gt;&gt; and
&gt; &gt;&gt;&gt; have a significant number of new features/extensions since the alpha
&gt; &gt;&gt;&gt; release; most importantly custom Tree models.
&gt; &gt;&gt;
&gt; &gt;&gt; Before we make another release, I think we should make sure there
&gt; &gt;&gt; aren't any extant bugs. For example, there's still the cloning crash
&gt; &gt;&gt; that Pablo described. I replied saying that we may not be able to
&gt; &gt;&gt; support cloning due to complicated structure of internal Gtk+
&gt; &gt;&gt; objects, but I haven't heard anything back. Are there other bugs we
&gt; &gt;&gt; are aware of?
&gt; &gt;
&gt; &gt; I'm activelly using php-gtk2 since its first release.
&gt; &gt; I don't remember of any other bug like the clone support.
&gt; &gt;
&gt; &gt; Just when using php-gtk2 on windows the set_cursor() method from
&gt; &gt; GdkWindow has a weird behavior, but I'm not sure it's a Gtk problem or
&gt; &gt; the underling environment... I'm not sure but I guess it gives me a
&gt; &gt; warning when I use pair numbers... in a loop from 1 to 255...
&gt; &gt;
&gt; &gt; $gdkwindow-&gt;set_cursor(new GdkCursor(68));
&gt; &gt;
&gt; &gt; Pablo
&gt; &gt;
&gt; &gt;&gt;
&gt; &gt;&gt;&gt; However, before we go about it, we'll have to decide on whether to
&gt; &gt;&gt;&gt; include the following:
&gt; &gt;&gt;&gt;
&gt; &gt;&gt;&gt; 1) 2.8/2.10 Support. Elizabeth has provided patches for this, and  
&gt; &gt;&gt;&gt; the
&gt; &gt;&gt;&gt; build system will automatically build the latest version found on  
&gt; &gt;&gt;&gt; the
&gt; &gt;&gt;&gt; system. I've extended this to work on Linux and OSX.
&gt; &gt;&gt;
&gt; &gt;&gt; I'm fine with this as long as we make it clear in our builds which
&gt; &gt;&gt; version they support. We should also encourage developers to
&gt; &gt;&gt; explicitly check for the Gtk+ version in their applications.
&gt; &gt;&gt;
&gt; &gt;&gt;&gt; 2) The GtkHTML3 and libsexy extensions.
&gt; &gt;&gt;
&gt; &gt;&gt; Sure, these can be included (just the bindings, right?).
&gt; &gt;&gt;
&gt; &gt;&gt;&gt; 4) Move to native Scintilla (Tom's Scintilla) instead of  
&gt; &gt;&gt;&gt; GtkScintilla.
&gt; &gt;&gt;&gt; This one's on me and I'll get around to it soon enough.
&gt; &gt;&gt;
&gt; &gt;&gt; I would appreciate it.
&gt; &gt;&gt;
&gt; &gt;&gt; It seems that our TODO2 list is somewhat out of date. Could people
&gt; &gt;&gt; please look at the Classes and Functions section and remove the items
&gt; &gt;&gt; that have been implemented?
&gt; &gt;&gt;
&gt; &gt;&gt; -Andrei
&gt; &gt;&gt;
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070303215557</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-03-03 21:55:57-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] PHP-GTK2 book</subject><body>

Congrats, Pablo!

-Andrei


On Mar 3, 2007, at 11:12 AM, Pablo Dall'Oglio wrote:

&gt; Hello,
&gt;
&gt; I would like to share my happiness with all of you.
&gt;
&gt; I've been rewriting my first book of PHP-GTK published in 2004 for  
&gt; more
&gt; than one year to cover PHP-GTK2. Now it's done. The book was published
&gt; this week.
&gt;
&gt; This second edition was totally rewritten to offer a solid background
&gt; about object orientation (50 pages chapter) and explain in details
&gt; almost every Gtk widget (80 pages chapter). The book have also an
&gt; exclusive chapter about the use of php-gtk2 with sqlite (20 pages),
&gt; another chapter explaining how to extend the native classes to build
&gt; your own components (43 pages), a chapter about using glade (30 pages)
&gt; an exclusive chapter about MVC and treeview/textview components, and a
&gt; long introductory chapter about PHP conpects and the basis of the
&gt; language (50 pages).
&gt;
&gt; Well, I know the portuguese isn't your primary language but I thought
&gt; you would like to know about this publication that highlights the
&gt; php-gtk success :-)
&gt;
&gt; www.php-gtk.com.br/book
&gt;
&gt; best regards
&gt; Pablo Dall'Oglio
&gt;
&gt; -- 
&gt; PHP-GTK General Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070307151806</emailId><senderName>"Lucky Luke"</senderName><senderEmail>luckyluke56@gmail.com</senderEmail><timestampReceived>2007-03-07 15:18:06-0400</timestampReceived><subject>[PHP-GTK-DEV] Resizable and Scrollable TreeView</subject><body>


Hi,

I'm trying to create a tree view which is resizable, but when the contents
are larger than the TreeView, there must come a scroll bar too. But the
width of the TreeView is fixed, and I can't resize it.

Here is the code to reproduce it:

&lt;?php
/**
* Example Tree view GTK application
*/
class TreeExample extends GtkWindow
{
    /**
     * An large array containig all menu items
     *
     * @var array
     */
    private $menus;

    /**
     * Constructor, Initializes the window
     */
    public function __construct()
    {
        parent::__construct();

        $this -&gt; add($this -&gt; build_gui());
        $this -&gt; connect_simple('destroy', array($this, 'quit'));
        $this -&gt; set_title('RSS Reader');
        $this -&gt; set_default_size(800, 600);
        $this -&gt; set_position(Gtk::WIN_POS_CENTER);
        $this -&gt; show_all();
    }

    /**
     * Sets up the main GUI
     * @return GtkVbox Container with menu, toolbar and the rest
     */
    protected function build_gui()
    {
        $vbox = new GtkVBox();

        $vbox -&gt; pack_start($this -&gt; build_content(), true, true, 2);

        //
        // TODO: Add toolbar, and main content
        //

        return $vbox;
    }

    /**
     * Sets up the RSS content
     * @return GtkHBox Container with the RSS content
     */
    protected function build_content()
    {
        $hbox = new GtkHBox();
        $hbox -&gt; pack_start($this -&gt; build_feed_tree(), false, false);
        $hbox -&gt; pack_start(new GtkVSeparator(), false, false, 2);

        return $hbox;
    }

    /**
     * Loads all feeds, and puts it in a GtkTreeStore object
     * @return GtkScrolledWindow
     */
    protected function build_feed_tree()
    {
        $tree_store = new GtkTreeStore(Gtk::TYPE_STRING, Gtk::TYPE_STRING);

        // Items to add into the tree view
        $feeds = array(
            'Feed Folder 1' =&gt; array(
                'Feed1' =&gt; 'url',
                'Feed2' =&gt; 'url',
            ),
            'Feed Folder 2' =&gt; array(
                'Sub Folder' =&gt; array(
                    'Feed 3' =&gt; 'url',
                    'Feed 4' =&gt; 'url'
                ),
                'Feed 5' =&gt; 'url'
            )
        );

        $this -&gt; add_feeds_to_tree($tree_store, $feeds);

        // Building the TreeView
        $tree_view = new GtkTreeView($tree_store);
        $tree_column = new GtkTreeViewColumn('RSS Feeds', new
GtkCellRendererText(), 'text', 0);
        $tree_column -&gt; set_resizable(true);
        $tree_column -&gt; set_min_width(150);
        $tree_view -&gt; append_column($tree_column);

        // Put it in a scrolled window
        $scroll = new GtkScrolledWindow();
        $scroll -&gt; set_policy(Gtk::POLICY_AUTOMATIC, Gtk::POLICY_AUTOMATIC);

        $scroll -&gt; add($tree_view);

        return $scroll;
    }

    /**
     * Adds the feeds recursive to the tree
     * @param GtkTreeStore $tree_store The GtkTreeStoreO Object to add the
feeds to
     * @param array $feeds An array with feeds to add
     * @param GtkTreeIter $parent The parent of the feed
     */
    protected function add_feeds_to_tree(GtkTreeStore &amp;$tree_store, array
$feeds, $parent = null)
    {
        $pos = 0;
        foreach($feeds as $name =&gt; $contents)
        {
            $row = $tree_store -&gt; insert($pos++, $parent);
            $tree_store -&gt; set($row, 0, $name);
            if(is_array($contents))
            {
                $this -&gt; add_feeds_to_tree($tree_store, $contents, $row);
            }
            else
            {
                $tree_store -&gt; set($row, 1, $contents);
            }
        }
    }

    /**
     * Event triggered when a menu item is clicked
     * @param string $name Name of the menu item
     */
    public function OnMenuActivated($name)
    {
        if(method_exists($this, $name))
        {
            $this -&gt; $name();
        }
    }

    /**
     * Quits the application
     */
    public function quit()
    {
        Gtk::main_quit();
    }
}

new TreeExample();
Gtk::main();

?&gt;

Does anybody know why I can't resize it, and how I can fix this?

Thanks in advance.
-- 
Lucas


</body></email><email><emailId>20070307175228</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-03-07 17:52:28-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: Resizable and Scrollable TreeView</subject><body>

Lucky Luke wrote:
&gt; Hi,
&gt; 
&gt; I'm trying to create a tree view which is resizable, but when the contents
&gt; are larger than the TreeView, there must come a scroll bar too. But the
&gt; width of the TreeView is fixed, and I can't resize it.

Yes, a treeview is not "resizeable" - a window can be resizable, you can 
use GtkVPaned and put the treeview on one side and the rest on the other 
side that way you can split the width of the window between the two... 
but you can't make just the treeview resizeable.  As I said in irc - 
this kind of situation is best suited to a GtkVPaned, please read the 
documentation.

In addition, this should be sent to the php.gtk general list since this 
question is about using php-gtk not developing it.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070309015054</emailId><senderName>Galid</senderName><senderEmail>isa@unsw.edu.au</senderEmail><timestampReceived>2007-03-09 01:50:54-0400</timestampReceived><subject>[PHP-GTK-DEV] =?windows-1251?B?z/Dg5+Tt6Pft4P8g/evl6vLw7u3t4P8g8OXq6+Ds4A==?=</subject><body>


      ÏÐÅÄËÎÆÅÍÈß Ê ÏÐÀÇÄÍÈÊÓ
ðåêëàìà ïî e-mail  ( 4  9  5 )  7  ×  I    1  7  8  7   Ìîñêâà - Þðèäè÷åñêèå
Ëèöà - 1,5 ìëí.àäð.
îäíîðàçîâàÿ - òðè òûñÿ÷è ðóá.
äâóõðàçîâàÿ - ÷åòûðå òûñÿ÷è ðóá.
òðåõðàçîâàÿ - ïÿòü òûñÿ÷ ðóá.

Ìîñêâà - Þðèäè÷åñêèå è Ôèçè÷åñêèå Ëèöà - 3,5 ìëí.àäð.
îäíîðàçîâàÿ - ÷åòûðå òûñÿ÷è ðóá.
äâóõðàçîâàÿ - ïÿòü òûñÿ÷ ïÿòüñîò ðóá.
òðåõðàçîâàÿ - ñåìü òûñÿ÷ ðóá.

Ìîñêâà è Ðîññèÿ - Þðèäè÷åñêèå Ëèöà - 3,2 ìëí.àäð.
îäíîðàçîâàÿ - ÷åòûðå òûñÿ÷è ðóá.
äâóõðàçîâàÿ - ïÿòü òûñÿ÷ ïÿòüñîò ðóá.
òðåõðàçîâàÿ - ñåìü òûñÿ÷ ðóá.

Ìîñêâà è Ðîññèÿ - Þðèäè÷åñêèå è Ôèçè÷åñêèå Ëèöà - 10 ìëí.àäð.
îäíîðàçîâàÿ - âîñåìü òûñÿ÷ ðóá.
äâóõðàçîâàÿ - äâåíàäöàòü òûñÿ÷ ðóá.
òðåõðàçîâàÿ - ïÿòíàäöàòü òûñÿ÷ ðóá.   Êà÷åñòâåííàÿ è ñâîåâðåìåííàÿ äîñòàâêà
 êîìïëåêñ ïðîãðàìì,
íå îáðàùàþùèé âíèìàíèÿ íà ôèëüòðûïîäãîòîâêà ìàêåòîâóäîáíûé ñïîñîá îïëàòû
- 
áåçíàëè÷íûìè,íàëè÷íûìè, ýëåêòðîííûìè äåíüãàìè ÏÐÈ ÌÈÍÈÌÀËÜÍÛÕ ÇÀÒÐÀÒÀÕ
ÑÈË È ÑÐÅÄÑÒ  -
Ì À Ê Ñ È Ì À Ë Ü Í Û É     Ý Ô Ô Å Ê Ò     

</body></email><email><emailId>20070315084820</emailId><senderName>"Faye Wang"</senderName><senderEmail>transpacjob@yahoo.com.cn</senderEmail><timestampReceived>2007-03-15 08:48:20-0400</timestampReceived><subject>[PHP-GTK-DEV] =?GB2312?B?sbG+qbOsxrfI8dbHvLzK9dPQz97U8MjOuavLvtXQxrjG9Mq+?= [AD]</subject><body>

±±¾©³¬Æ·ÈñÖÇ¼¼ÊõÓÐÏÞÔðÈÎ¹«Ë¾ÕÐÆ¸ÆôÊ¾

¹«Ë¾¼ò½é£º

¹úÄÚ×¨Òµ±¾µØ»¯¹«Ë¾

Transpac Technology Inc., which was established on 1996, specializes in Chinese \
software localization as well as Website and other technical documentation \
translation. Our working system is consist of popular Wintel and MAC machines. 

Transpac began its localization career since it was established and it has \
accomplished more than 600 projects for many companies so far. It has enough \
capabilities to handle at least 3-4 projects simultaneously and the maximum amount of \
delivery is 150,000 words per week. 

¹«Ë¾ÍøÕ¾£ºhttp://www.transpac.com.cn
µØ    Ö·£º±±¾©ÊÐº£µíÇøÑ§Çå · 16 ºÅÑ§ÖªÐù 607 ÊÒ
ÓÊÕþ±à ë£º100083
Áª Ïµ ÈË£ºÕÅ´óÀ×
µç    »°£º(10)82755645
µç×ÓÓÊÏä£ºTranspacInfo@yahoo.com.cn

   ÕÐ Æ¸ Ö° Î»

** º£ÍâÊÐ³¡ÍÆ¹ã×¨Ô± **

¹¤×÷µØµã£º±±¾©ÊÐ
ÕÐÆ¸ÈËÊý£ºÈô¸É
Ñ§    Àú£º±¾¿Æ
¹¤×÷ÄêÏÞ£º¶þÄêÒÔÉÏ
Ð½Ë®·¶Î§£ºÃæÒé
ÍâÓïÒªÇó£ºÓ¢Óï
½ÓÊÜ¼òÀúÓïÑÔ£ºÖÐÎÄ»òÓ¢ÎÄ
 
Ö°Î»ÃèÊö£º
1. ÊìÏ¤·­ÒëÐÐÒµ±¾µØ»¯µÄÏúÊÛÁ÷³Ì£¬¾ßÓÐ±¾ÐÐÒµµÄÏà¹ØÏúÊÛ¾­Ñé£¬ÓµÓÐÔÚ´ËÐÐÒµÖÐ·á¸»µÄ¸öÈËÏúÊÛÒµ¼¨£¬¼°Ê±Íê³ÉÏúÊÛÄ¿±ê£»
 2. ¾ßÓÐ·­ÒëÐÐÒµµÄÏà¹Ø±³¾°£¬ÄÜ¹»Ñ°Çó¶àÖÖÇþµÀÍÚ¾ò¿Í»§£¬¶ÀÁ¢¿ªÍØ·­ÒëÒµÎñ£¬²¢ÇÒËÑ¼¯´óÁ¿µÄ¾ßÓÐ·­ÒëÐèÇóµÄÓÐÐ§¿Í»§ÐÅÏ¢£»
 3. ½ÏÇ¿µØÉÌÎñÌ¸ÅÐ¡¢ÈË¼Ê¹µÍ¨ÄÜÁ¦£¬½¨Á¢²¢Î¬»¤Á¼ºÃµÄ¿Í»§¹ØÏµ£»
4. ÊìÁ·Ê¹ÓÃ OFFICE µÈ°ì¹«Èí¼þ£¬ÓÅÐãµÄÓ¢ÓïÌýËµ¶ÁÐ´ÄÜÁ¦£¬ÌØ±ðÊÇÎÄ±ÊºÍ¿ÚÓïÄÜÁ¦£»
5. ¾ßÓÐÍÅ¶Ó¾«Éñ¡¢³ÏÐÅ£¬¶Ô¹¤×÷ÈÏÕæ¸ºÔð£»
6. ¼ÆËã»ú»òÓ¢Óï×¨Òµ±¾¿ÆÒÔÉÏÑ§Àú£»
7. ÓÐÁ¼ºÃµÄÉç»á×ÊÔ´Óë¿Í»§×ÊÔ´ÕßÓÅÏÈ£»
8. ×îºÃÓÐÕÕÆ¬¡£



** ¸ß¼¶±¾µØ»¯ÏîÄ¿¾­Àí **
   
¹¤×÷µØµã£º±±¾©ÊÐ
ÕÐÆ¸ÈËÊý£º 2 Ãû
Ñ§    Àú£º±¾¿Æ
¹¤×÷ÄêÏÞ£ºÈýÄêÒÔÉÏ
Ð½Ë®·¶Î§£ºÃæÒé
ÍâÓïÒªÇó£ºÓ¢Óï
½ÓÊÜ¼òÀúÓïÑÔ£ºÖÐÎÄ»òÓ¢ÎÄ

Ö°Î»ÃèÊö£º
1. ¹ÜÀíÍê³ÉÏîÄ¿»ñµÃ¿Í»§ úÒâ£»
2. À©Õ¹¿Í»§¹ØÏµºÍÒµÎñ£»
3. ½øÐÐÈ«·½Î»µÄÏîÄ¿¹ÜÀí£¬°üÀ¨ÏîÄ¿·¶Î§¹ÜÀí¡¢Ê±¼ä¹ÜÀí¡¢ÖÊÁ¿¹ÜÀí¡¢³É±¾¹ÜÀí¡¢¹µÍ¨¹ÜÀíµÈ£»

Ö°Î»ÒªÇó£º
1. ÓÐÊµ¼ÊµÄ±¾µØ»¯ÏîÄ¿¹ÜÀí¾­Ñé£¬¹ÜÀíµÄÏîÄ¿³¬¹ý 50 Íò×Ö£»
2. ÓÐ IT ÐÐÒµµÄ¹¤×÷±³¾°£¬ÓÐÈí¼þÍâ°üÏîÄ¿Ö´ÐÐ»ò¹ÜÀí¾­Ñé£»
3. ¾ßÓÐÏîÄ¿¹ÜÀíÒâÊ¶»òÁ¢Ö¾ÏîÄ¿¹ÜÀí·½Ïò£»
4. ÓÅÐãµÄÑ§Ï°ÄÜÁ¦£¬ÈÈÇéÏòÉÏ£»
5. ÔðÈÎÐÄÇ¿£¬¾ßÓÐÁ¼ºÃµÄÖ°ÒµËØÑø¼°ÍÅ¶ÓºÏ×÷ÒâÊ¶£»
6. º£Íâ¹¤×÷¾­Ñé»òÕßÓ¢ÓïË®Æ½ÓÅÒìÕßÓÅÏÈ¡£
 
 
ÇëÍ¨¹ýµç×ÓÓÊ¼þÍ¶µÝ¼òÀú¡£

Have a nice day!

Dalei Zhang

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070315163640</emailId><senderName>"Arx Cruz"</senderName><senderEmail>arxcruz@gmail.com</senderEmail><timestampReceived>2007-03-15 16:36:40-0400</timestampReceived><subject>[PHP-GTK-DEV] vte binding</subject><body>

Hey all, i've some problems to make vte.overrides works, here is the
vte binding i'm trying to do www.ul-jb.org/~arxcruz/vte.tar.gz

theres some tutorial or readme saying when and how use the overrides?

Wish someone could help me

Cheers!

-- 
"A fé remove montanhas, mas eu prefiro a dinamite"

</body></email><email><emailId>20070316185707</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-03-16 18:57:07-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Custom Signals Support</subject><body>

&gt; Also, I'm thinking about moving all signal/type related methods and  
&gt; constants to GObject. Currently we have a few in Gtk:: class, but on  
&gt; reflection, I don't think it's the right place for it. I'd rather  
&gt; move it before the beta release. Any disagreements?

Not *at all*!  It makes it easier to document, too.

- Steph
&gt; 
&gt; -Andrei
&gt; 
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070317041631</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-03-17 04:16:31-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Msi Installer Status</subject><body>

Hey Elizabeth,

I asked Andrei before to make it an underscore (for completely different but 
compelling reasons).

Good luck :)


&gt; Afternoon,
&gt;
&gt; First of all, an observation -  the standard naming for php extensions is 
&gt; php_&lt;extension name&gt;.dll, however php-gtk2.dll uses a hyphen.  And all the 
&gt; php gtk extensions use underscores.  Was this done purposely or just kind 
&gt; of missed in the confusion?  I think it might be a smart idea to rename it 
&gt; to php_gtk2.dll
&gt;
&gt; I'm about halfway finished with the windows msi installer for php-gtk. 
&gt; Currently it installs the gtk runtime, a basic php runtime, the 
&gt; php-gtk2.dll, and registers a .phpg type so double clicking runs the file 
&gt; with php-gtk (the reasoning for choosing phpg is it's short, sweet, and 
&gt; won't conflict with winbinder which uses .phpw)
&gt;
&gt; It's been lots of fun (hear the sarcasm?)  The current source is located 
&gt; at http://callicore.net/php-gtk2/installer  The installer is written with 
&gt; wix (I'm also using wixedit - which is a decent gui for wix files)
&gt; wix is open source (yes, ms really open sourced it) and the files 
&gt; currently use the stable version 2 - the new php windows installer was a 
&gt; great help for creating this installer
&gt;
&gt; The installer is getting pretty large merely from the fact that it's three 
&gt; installers in one...I'm aiming for the following
&gt;
&gt; 1. A complete gtk+ runtime (plus widget extensions, theme engines, 
&gt; localization files, pixbuf loaders, immodules, gtk extension dependencies 
&gt; such as aspell and enchant and all the other assorted gtk fun)
&gt;
&gt; 2. A complete php runtime - with only the cli sapis (php extensions, pecl 
&gt; extensions, registering php mimetypes)
&gt;
&gt; 3. Php-gtk itself (the main dll, php-gtk extensions, phpg double click &amp; 
&gt; mimetype registration, php-cli.ini creation/update with proper extensions 
&gt; enabled)
&gt;
&gt; Now - so far the installer doesn't mess with environment variables or 
&gt; currently installed php versions.  This is so the php-gtk install is 
&gt; "self-contained" and can be put on a computer with a webserver running or 
&gt; gaim installed, for example, without mucking anything up.  A self 
&gt; contained gtk install seems to be the rule on windows.  Also because it's 
&gt; an msi it has repair and change capabilities - so you can install it one 
&gt; way and add locale files and/or additional extensions very easily.
&gt;
&gt; I'd appreciate some feedback on what people would like the installer to do 
&gt; (and someone to make some nicer bitmaps and .ico files)
&gt;
&gt; Steph, I know we talked about bootstrapping a php ini file editor (and 
&gt; adding a start menu link to it as well) so windows users wouldn't be 
&gt; digging into the files and get lost when trying to edit their ini file. 
&gt; This is very easily accomplished, but someone would have to write the 
&gt; editor - ideally a one file app that only needs basic php and the 
&gt; php-gtk2.dll extension. (Theoretically we can just go the apache route and 
&gt; add a shortcut to the ini file in the start menu instead of bundling an 
&gt; application)
&gt;
&gt; Also, should I add in the ability to install the demos?  What about php or 
&gt; php-gtk documentation .chm files?  (Do the php-gtk docs do chm?)
&gt;
&gt; I'll keep you updated on the progress of this monster, I'll try to get it 
&gt; done before the beta release.
&gt;
&gt; The last point is the msi currently only works on NT+ systems (it's 
&gt; installing the 2.10 dlls and it does check and throws an error if your OS 
&gt; is 95/98 or ME) - we'll probably want a specialized separate version with 
&gt; only 2.6 items and the last win95/98/ME supported php5 but I'm not certain 
&gt; if an .msi will be the way to go in that situation.
&gt;
&gt; Any thoughts?  Opinions? I'll be needing some guinea pigs to test the 
&gt; installer, give me a mail if you're interested.
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070318061118</emailId><senderName>Rasmus Lerdorf</senderName><senderEmail>rasmus@lerdorf.com</senderEmail><timestampReceived>2007-03-18 06:11:18-0400</timestampReceived><subject>[PHP-GTK-DEV] special_chars filter enabled on y1</subject><body>

y1 hosts gtk.php.net along with smarty, qa, bugs and master.  I looked
through the php-gtk-web code and there was absolutely no XSS protection
in there.  Instead of trying to fix it I enabled the filter.  If that
site needs raw user input for something, please add the appropriate
filter_input() calls.  If any of these other sites need raw input, we
can either turn off the filter for these, or add filter_input() calls.
Offhand I don't see where these other sites need it, but I could easily
have missed something.

-Rasmus

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070130231608</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-01-30 23:16:08-0400</timestampReceived><subject>[PHP-GTK-DEV] Allow out-of-box-build for MSVC 2005</subject><body>

Evening,

I started a new thread here because I think everyone was getting 
confused with all the generator patch stuff, and this is really 
something completely different.

I know you're not looking to move the official builds off of MSVC6 for a 
while, Steph, (or at least until Edin moves PHP itself) but it's really 
annoying to have to alter a bunch of php-gtk2 files just to build 
development versions here with MSVC 2005 - any chance I can get an ok to 
apply the attached patch?

It allows for three things - it folds in support for --enable-debug-pack 
(something the regular php build system already provides, in fact I 
copied the support from there, and it is very useful for tracking 
annoying windows crashes with release builds), allows --disable-zts to 
do non-thread-safe builds, and allows MSVC 2005 to compile php-gtk "out 
of the box"  (fixes compiler flags and adds manifest packing) All the 
changes are transparent, meaning you won't even see them on MSVC6 (well, 
unless you want to use one of the new configure flags) because they're 
only applied when the right compiler is detected so it should not affect 
current builds at all.

The only potentially problematic change is in php_gtk.h - the 
config.w32.h must be included before php.h - there are 2005 specific 
pragmas in there that tell the stupid compiler which types to use - 
without the change the compiler bombs miserably however I don't believe 
this should change anything.

Thanks,
Elizabeth Smith


["php-gtk.patch" (text/plain)]

Index: main/php_gtk.h
===================================================================
RCS file: /repository/php-gtk/main/php_gtk.h,v
retrieving revision 1.138
diff -u -r1.138 php_gtk.h
--- main/php_gtk.h	15 Oct 2006 00:48:48 -0000	1.138
+++ main/php_gtk.h	30 Jan 2007 20:38:50 -0000
@@ -23,13 +23,13 @@
 #ifndef _PHP_GTK_H
 #define _PHP_GTK_H
 
-#include "php.h"
-#include "php_ini.h"
 #ifdef PHP_WIN32
 #include "config.w32.h"
 #else
 #include "config.h"
 #endif
+#include "php.h"
+#include "php_ini.h"
 
 /* workaround for expat-related declaration in PHP compat file */
 #ifdef lookup
Index: win32/config.w32.in
===================================================================
RCS file: /repository/php-gtk/win32/config.w32.in,v
retrieving revision 1.12
diff -u -r1.12 config.w32.in
--- win32/config.w32.in	17 Jun 2006 14:47:08 -0000	1.12
+++ win32/config.w32.in	30 Jan 2007 21:14:37 -0000
@@ -14,6 +14,9 @@
 PATH_PROG('link', WshShell.Environment("Process").Item("PATH"), "LD");
 PATH_PROG('nmake');
 
+// Try locating manifest tool
+PATH_PROG('mt', WshShell.Environment("Process").Item("PATH"), "MT");
+
 // we don't want to define LIB, as that will override the default library path set \
in that env var  PATH_PROG('lib', null, 'MAKE_LIB');
 PATH_PROG('php');
@@ -45,6 +48,7 @@
 
 ARG_WITH('php-build', 'Path to where you extracted \
http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of this source \
dir (..\\php_build) if not specified', 'no');  ARG_WITH('cygwin', 'Path to cygwin \
utilities on your system', '\\cygwin'); +ARG_ENABLE('zts', 'Thread safety', 'yes');
 
 // stick objects somewhere outside of the source tree
 ARG_ENABLE('object-out-dir', 'Alternative location for binary objects during build', \
''); @@ -56,6 +60,10 @@
 }
 
 ARG_ENABLE('debug', 'Compile with debugging symbols', "no");
+ARG_ENABLE('debug-pack', 'Release binaries with external debug symbols \
(--enable-debug must not be specified)', 'no'); +if (PHP_GTK_DEBUG == "yes" &amp;&amp; \
PHP_GTK_DEBUG_PACK == "yes") { +	ERROR("Use of both --enable-debug and \
--enable-debug-pack not allowed."); +}
 
 // Set some debug-specific options
 if (PHP_GTK_DEBUG == "yes") {
@@ -81,22 +89,36 @@
 DEFINE("LIBS", "kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib \
advapi32.lib shell32.lib ole32.lib");  
 if (PHP_GTK_DEBUG == "yes") {
-	DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. /I main /I \
..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I ..\\php5\\TSRM /D \
ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 /D _DEBUG /D _WINDOWS /D \
_MBCS /D _USRDLL"); +	DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I \
..\\.. /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I \
..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 /D _DEBUG /D \
_WINDOWS /D _MBCS /D _USRDLL");  ADD_FLAG("LDFLAGS", "/debug");
 
 } else {
-	DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main /I \
..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I ..\\php5\\TSRM /D \
ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D NDEBUG /D _WINDOWS /D \
_MBCS /D _USRDLL"); +	DEFINE("CFLAGS", "/nologo /MD /W3 /O2 /I . /I ..\\ /I ..\\.. /I \
main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I \
..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D NDEBUG /D \
_WINDOWS /D _MBCS /D _USRDLL"); +	// Generate external debug files when \
--enable-debug-pack is specified +	if (PHP_GTK_DEBUG_PACK == "yes") {
+		ADD_FLAG("CFLAGS", "/Zi");
+		ADD_FLAG("LDFLAGS", "/incremental:no /debug /opt:ref,icf");
+	}
 }
 
 if (VCVERS &lt; 14) {
 	// Enable automatic precompiled headers
-	ADD_FLAG('CFLAGS', '/YX /c');
+	ADD_FLAG('CFLAGS', '/YX /c /GX');
 }
 
 if (VCVERS &gt;= 14) {
 	// fun stuff: MS deprecated ANSI stdio and similar functions - disable warnings
 	// GS hardens the binary against buffer overruns
-	ADD_FLAG('CFLAGS', '/GS /wd4996 ');
+	ADD_FLAG('CFLAGS', '/EHsc /GS /wd4996 ');
+	if (PHP_GTK_DEBUG == "yes")
+	{
+		// Set some debug/release specific options
+		ADD_FLAG('CFLAGS', ' /RTC1 ');
+	}
+}
+
+if (PHP_GTK_ZTS == "yes") {
+	ADD_FLAG("CFLAGS", "/D ZTS=1");
 }
 
 if (PHP_GTK_PHP_BUILD == 'no') {
Index: win32/confutils.js
===================================================================
RCS file: /repository/php-gtk/win32/confutils.js,v
retrieving revision 1.19
diff -u -r1.19 confutils.js
--- win32/confutils.js	17 Jul 2006 17:00:09 -0000	1.19
+++ win32/confutils.js	30 Jan 2007 21:18:50 -0000
@@ -668,6 +668,7 @@
 
 	MFO.WriteLine("$(BUILD_DIR)\\" + dllname + ": $(" + EXT + "_GLOBAL_OBJS)" + \
res_var);  MFO.WriteLine("\t" + ld + " /out:$(BUILD_DIR)\\" + dllname + " $(" + EXT + \
"_LDFLAGS)" + dllflags + " $(LDFLAGS) $(" + EXT + "_GLOBAL_OBJS) $(LIBS_" + EXT + ")" \
+ dep_libs + " $(LIBS)" + res_var); +	MFO.WriteLine("\t-@$(_VC_MANIFEST_EMBED_DLL)");
 
 	MFO.WriteBlankLines(1);
 	MFO.WriteLine(dllname + ": $(BUILD_DIR)\\" + dllname);
@@ -968,6 +969,16 @@
 		MF.WriteLine(keys[i] + "=" + configure_subst.Item(keys[i]) + " ");
 	}
 
+	MF.WriteLine("!if $(MT) == \"\"");
+	MF.WriteBlankLines(1);
+	MF.WriteLine("_VC_MANIFEST_EMBED_DLL=");
+	MF.WriteBlankLines(1);
+	MF.WriteLine("!else");
+	MF.WriteBlankLines(1);
+	MF.WriteLine("_VC_MANIFEST_EMBED_DLL= $(MT) -nologo -manifest $@.manifest \
-outputresource:$@;2"); +	MF.WriteBlankLines(1);
+	MF.WriteLine("!endif");
+
 	MF.WriteBlankLines(1);
 	MF.WriteLine("all: $(EXT_TARGETS)");
 



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070125155117</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-01-25 15:51:17-0400</timestampReceived><subject>[PHP-GTK-DEV] GtkPlug for Windows</subject><body>

Morning,

As of Gtk+ 2.8 gtkplug and gtksocket work on windows.  I don't know if 
anyone has tested the current gtkplug constructor override but I found 
it didn't work (at least on windows).

The attached diff adds the construct method (which is different from new 
and doesn't create and object).  The diff also changes the original 
override to call gtk_plug_new.  If you send new GtkPlug a socket_id of 0 
you can later call GtkPlug-&gt;construct with a new socket_id.

It would be nice if there was a way to mark something in the generator 
relevant for a specific library version - then php-gtk2 could build 
against 2.6, 2.8 and 2.10.

Anyway, the attachment replaces the current gtkplug constructor override 
and adds the construct method, it also removes the win32 ignores - that 
part may need to be omitted until there's a way to mark items by gtk lib 
version or the requirement for php-gtk2 is raised from 2.6.

Also I'm sending a couple demos to use with the new functions. (Thanks 
to Leon Pegg for writing them :)

Thanks,
Elizabeth Smith

["gtk.overrides.patch" (text/plain)]

Index: gtk.overrides
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/gtk.overrides,v
retrieving revision 1.235
diff -u -r1.235 gtk.overrides
--- gtk.overrides	23 Jan 2007 18:26:08 -0000	1.235
+++ gtk.overrides	25 Jan 2007 15:47:05 -0000
@@ -234,10 +234,6 @@
 ignore
     GtkArgFlags
     GtkPrivateFlags
-%%
-ignore-win32
-    GtkPlug
-    GtkSocket
 %% }}}
 
 %% {{{ constants
@@ -4119,6 +4115,38 @@
 {
     gulong socket_id;
     zval *display = NULL;
+    GtkWidget *wrapped_obj = NULL;
+
+    if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "i|O", &amp;socket_id, &amp;display))
+        PHPG_THROW_CONSTRUCT_EXCEPTION(GtkPlug);
+
+    if (display) {
+        wrapped_obj = gtk_plug_new_for_display(GDK_DISPLAY(PHPG_GOBJECT(display)), socket_id);
+    } else {
+        wrapped_obj = gtk_plug_new(socket_id);
+    }
+
+    if (!wrapped_obj) {
+        PHPG_THROW_CONSTRUCT_EXCEPTION(GtkPlug);
+    }
+
+    phpg_gobject_new(&amp;this_ptr, (GObject *) wrapped_obj TSRMLS_CC);
+}
+
+%%
+add-arginfo GtkPlug construct
+static
+ZEND_BEGIN_ARG_INFO_EX(ARGINFO_NAME, 0, 0, 1)
+    ZEND_ARG_INFO(0, socket_id)
+    ZEND_ARG_OBJ_INFO(0, display, GdkDisplay, 1)
+ZEND_END_ARG_INFO();
+
+%%
+add GtkPlug construct
+PHP_METHOD
+{
+    gulong socket_id;
+    zval *display = NULL;
     GObject *wrapped_obj = NULL;
 
     if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "i|O", &amp;socket_id, &amp;display))
@@ -4136,8 +4164,9 @@
     if (!wrapped_obj) {
         PHPG_THROW_CONSTRUCT_EXCEPTION(GtkPlug);
     }
-}
 
+    phpg_gobject_new(&amp;this_ptr, (GObject *) wrapped_obj TSRMLS_CC);
+}
 %% }}}
 
 %% {{{ GtkPixmap



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070203143402</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-02-03 14:34:02-0400</timestampReceived><subject>[PHP-GTK-DEV] PHP-GTK Installer for OS X</subject><body>

Hi all,

We now have an installer for PHP-GTK on OS X. I couldn't figure out how
to cross-compile yet; so the installer will work only for the new Intel
Macs. (No PPC)

It's a pretty straightforward install; and assumes nothing other than X
to be present (it can be the one by Apple, Fink, MacPorts, whatever).
It'll put in all the required dylibs/includes in /usr/local/php-gtk so
that it's completely isolated from the rest of the system and doesn't
mess with anything.

Add /usr/local/php-gtk/bin to your $PATH once the installation is
completed. You can then run any PHP-GTK app via the `php-gtk'
executable; which is basically a symbolic link to /usr/local/php-gtk/bin/php

Both PHP and PHP-GTK don't have any fancy extensions yet. Glade is
available though. Gtk+ is patched up to run with the GlossyP theme; to
give it a more Aquaish look. gtk-chtheme is bundled if you want to
change the theme.

Get it while it's hot: http://www.kix.in/php-gtk2/PHP-GTK.dmg (23.3M)

Those of you with Intel Macs; please do give it a try. Feedback is
appreciated :)

Andrei: I guess it won't make sense to put this in CVS, since it's
binary and it's huge. Let me know what you think.

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070204222848</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-02-04 22:28:48-0400</timestampReceived><subject>[PHP-GTK-DEV] win32 Build Problem</subject><body>

Evening all,

I've found another problem with the win32 build stuff and I'm not sure 
exactly how to fix it.  The issue is this, currently the gdk/gd 
interaction stuff relies on HAVE_GD_BUNDLED being defined.  Since this 
is never checked/added with the current windows build stuff, users are 
getting spurious Fatal error: PHP-GTK was not compiled aganst PHP with 
bundled GD library (which is marlarky, since if GD is built on windows 
it bundles the library...but I digress)

The problem is this - how do I check to see if php_gd2.lib exists (and 
thus add it in to the build and add the /D HAVE_GD_BUNDLED) OR how do I 
check if the gd stuff exists in the php5[ts][_debug].lib?  It seems like 
this should be transparent and not have to have a configure switch...but 
I really can't figure out a good way to do it.  With the right lib 
(either adding php_gd2.lib to the link libs or building it into php) 
along with the compiler flag it builds and works great.

I do have an almost fix for the php_gd2.lib - I can manually search for 
the lib and then use CHECK_LIB and add the appropriate CFLAG if it does 
exist.  However, a built in GD is a lot harder to deal with.  I've tried 
cheating by finding and reading the appropriate php lib into a string 
and doing a regex match on it...however this fails miserably (I don't 
think jscript likes all the nutty characters)  I have yet to find a way 
in the build system to do this kind of check.

So, do I make enabling gd a configure switch?  Does someone else have a 
better way of detecting if gd was built (shared or not) with the 
existing php lib?  This really should be fixed for windows users!

Thanks,
Elizabeth Smith

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070205142604</emailId><senderName>Christian Weiske</senderName><senderEmail>cweiske@cweiske.de</senderEmail><timestampReceived>2007-02-05 14:26:04-0400</timestampReceived><subject>[PHP-GTK-DEV] ignoring widechar methods</subject><body>


Hello all,

Would it be ok to put all _wc (wide char) methods on the ignore list?
They are deprecated anyway, and since we use utf-8, we don't need them.

GdkDrawable::draw_text_wc
GdkFont::char_width_wc
GdkFont::text_extents_wc
GdkFont::text_width_wc

-- 
Regards/Mit freundlichen Grüßen
Christian Weiske


["signature.asc" (application/pgp-signature)]

</body></email><email><emailId>20070202044827</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-02-02 04:48:27-0400</timestampReceived><subject>[PHP-GTK-DEV] More Coverage</subject><body>

Patch for GtkToolbar::append_item() - added the private_tooltip 
parameter in (append/prepend widget also allow it, seems like the api 
should match the C version), added GtkToolbar::prepend_item(), added 
deprecation messages for both methods

["gtk.overrides.patch" (text/plain)]

Index: gtk.overrides
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/gtk.overrides,v
retrieving revision 1.237
diff -u -r1.237 gtk.overrides
--- gtk.overrides	2 Feb 2007 02:15:26 -0000	1.237
+++ gtk.overrides	2 Feb 2007 04:36:52 -0000
@@ -4932,6 +4932,7 @@
 ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
     ZEND_ARG_INFO(0, text)
     ZEND_ARG_INFO(0, tooltip_text)
+    ZEND_ARG_INFO(0, tooltip_private_text)
     ZEND_ARG_OBJ_INFO(0, icon, GtkWidget, 1)
     ZEND_ARG_INFO(0, callback)
 ZEND_END_ARG_INFO();
@@ -4986,12 +4987,11 @@
     zval *php_callback, *extra, *icon = NULL;
     phpg_cb_data_t *cb_data;
     GtkSignalFunc callback;
-    char *text = NULL;
-    char *tooltip = NULL;
+    char *text = NULL, *tooltip = NULL, *private_tooltip = NULL;
 
     NOT_STATIC_METHOD();
 
-    if (!php_gtk_parse_varargs(ZEND_NUM_ARGS(), 4, &amp;extra, "ssNV", &amp;text, &amp;tooltip, \
&amp;icon, gtkwidget_ce, &amp;php_callback)) +    if (!php_gtk_parse_varargs(ZEND_NUM_ARGS(), \
5, &amp;extra, "sssNV", &amp;text, &amp;tooltip, &amp;private_tooltip, &amp;icon, gtkwidget_ce, \
&amp;php_callback))  return;
 
     if (php_callback) {
@@ -5005,12 +5005,61 @@
         }
     }
 
+    phpg_warn_deprecated("use GtkToolbar::insert" TSRMLS_CC);
+
     if (Z_TYPE_P(icon) != IS_NULL)
         gtk_toolbar_append_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
-                                    text, tooltip, NULL, \
GTK_WIDGET(PHPG_GOBJECT(icon)), callback, cb_data); +                                 \
text, tooltip, private_tooltip, GTK_WIDGET(PHPG_GOBJECT(icon)), callback, cb_data);  \
else   gtk_toolbar_append_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
-                                    text, tooltip, NULL, NULL, callback, cb_data);
+                                    text, tooltip, private_tooltip, NULL, callback, \
cb_data); +}
+
+%%
+add-arginfo GtkToolbar prepend_item
+static
+ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
+    ZEND_ARG_INFO(0, text)
+    ZEND_ARG_INFO(0, tooltip_text)
+    ZEND_ARG_INFO(0, tooltip_private_text)
+    ZEND_ARG_OBJ_INFO(0, icon, GtkWidget, 1)
+    ZEND_ARG_INFO(0, callback)
+ZEND_END_ARG_INFO();
+
+%%
+override gtk_toolbar_prepend_item
+
+PHP_METHOD
+{
+    zval *php_callback, *extra, *icon = NULL;
+    phpg_cb_data_t *cb_data;
+    GtkSignalFunc callback;
+    char *text = NULL, *tooltip = NULL, *private_tooltip = NULL;
+
+    NOT_STATIC_METHOD();
+
+    if (!php_gtk_parse_varargs(ZEND_NUM_ARGS(), 5, &amp;extra, "sssNV", &amp;text, &amp;tooltip, \
&amp;private_tooltip, &amp;icon, gtkwidget_ce, &amp;php_callback)) +        return;
+
+    if (php_callback) {
+        if (Z_TYPE_P(php_callback) == IS_NULL) {
+            cb_data  = NULL;
+            callback = NULL;
+        } else {
+            zval_add_ref(&amp;php_callback);
+            cb_data  = phpg_cb_data_new(php_callback, extra TSRMLS_CC);
+            callback = (GtkSignalFunc)phpg_toolbar_signal_func_marshal;
+        }
+    }
+
+    phpg_warn_deprecated("use GtkToolbar::insert" TSRMLS_CC);
+
+    if (Z_TYPE_P(icon) != IS_NULL)
+        gtk_toolbar_prepend_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
+                                    text, tooltip, private_tooltip, \
GTK_WIDGET(PHPG_GOBJECT(icon)), callback, cb_data); +    else 
+        gtk_toolbar_prepend_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
+                                    text, tooltip, private_tooltip, NULL, callback, \
cb_data);  }
 
 %%



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070205161200</emailId><senderName>Christian Weiske</senderName><senderEmail>cweiske@cweiske.de</senderEmail><timestampReceived>2007-02-05 16:12:00-0400</timestampReceived><subject>[PHP-GTK-DEV] PangoRectangle</subject><body>


Hello,


Many of the missing Pango methods use PangoRectangle. The struct is
basically the same as GtkAllocation and GdkRectangle, but just aliasing
it in arg_types.php as rectangle does not really work - at least it
gives warnings.

Andrei, did you do more to support GtkAllocation than registering the
GdkRectangle matcher for it?
The second option I thought could be used is just copying the
GdkRectangle code and replace Gdk with Pango. Problem there is that
PangoRectangle has no PANGO_TYPE_RECTANGLE Gtype.

-- 
Regards/Mit freundlichen Grüßen
Christian Weiske


["signature.asc" (application/pgp-signature)]

</body></email><email><emailId>20070206134528</emailId><senderName>Christian Weiske</senderName><senderEmail>cweiske@cweiske.de</senderEmail><timestampReceived>2007-02-06 13:45:28-0400</timestampReceived><subject>[PHP-GTK-DEV] method to convert zval to utf-8 char?</subject><body>


Hi all,


Do we have a method to convert a single zval to a gchar in utf-8?

-- 
Regards/Mit freundlichen Grüßen
Christian Weiske


["signature.asc" (application/pgp-signature)]

</body></email><email><emailId>20070206170125</emailId><senderName>Christian Weiske</senderName><senderEmail>cweiske@cweiske.de</senderEmail><timestampReceived>2007-02-06 17:01:25-0400</timestampReceived><subject>[PHP-GTK-DEV] GtkFileFilter patch</subject><body>

[Attachment #2 (multipart/mixed)]


Hi all,


Could someone review the patch?
It works, but I'm not happy with all the duplicated code for utf8
conversion.

-- 
Regards/Mit freundlichen Grüßen
Christian Weiske

["gtkfilefilter.diff" (text/x-patch)]

Index: ext/gtk+/gtk.overrides
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/gtk.overrides,v
retrieving revision 1.242
diff -u -r1.242 gtk.overrides
--- ext/gtk+/gtk.overrides	5 Feb 2007 16:53:53 -0000	1.242
+++ ext/gtk+/gtk.overrides	6 Feb 2007 17:00:28 -0000
@@ -7,6 +7,7 @@
 
 static void phpg_about_dialog_activate_link_func_marshal (GtkAboutDialog *about, \
const gchar *link, gpointer data);  static gboolean \
phpg_entry_completion_match_func_marshal (GtkEntryCompletion *completion, const gchar \
*key, GtkTreeIter *iter, gpointer data); +static gboolean \
phpg_file_filter_add_custom_marshal(GtkFileFilterInfo *filter_info, gpointer data);  \
static gboolean phpg_tree_view_row_separator_func_marshal (GtkTreeModel *model, \
GtkTreeIter *iter, gpointer data);  static void phpg_icon_view_foreach_func_marshal \
(GtkIconView *icon_view, GtkTreePath *path, gpointer data);  static gboolean \
phpg_toolbar_signal_func_marshal(GtkWidget *widget, gpointer data); @@ -2769,6 \
+2770,253 @@  
 %% }}}
 
+%% {{{ GtkFileFilter
+
+%%
+add-arginfo GtkFileFilter add_custom
+static
+ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
+    ZEND_ARG_INFO(0, flags_needed)
+    ZEND_ARG_INFO(0, callback)
+ZEND_END_ARG_INFO();
+
+%%
+override gtk_file_filter_add_custom
+static gboolean phpg_file_filter_add_custom_marshal(GtkFileFilterInfo *filter_info, \
gpointer data) +{
+    phpg_cb_data_t *cbd = (phpg_cb_data_t *) data;
+    zval *retval = NULL;
+    zval ***args = NULL;
+    int n_args = 0;
+    char *callback_name;
+    zval *php_filter_info = NULL;
+    gboolean show = TRUE;
+    gchar *cp = NULL;
+    gchar *fn = NULL;
+    gsize cp_len = 0;
+    zend_bool free_cp = FALSE;
+
+    TSRMLS_FETCH();
+printf("marshal\n");
+
+    if (!zend_is_callable(cbd-&gt;callback, 0, &amp;callback_name)) {
+        php_error(E_WARNING, "Unable to invoke callback '%s' specified in %s on line \
%ld", callback_name, cbd-&gt;src_filename, cbd-&gt;src_lineno); +        \
efree(callback_name); +        return 0;
+    }
+
+    MAKE_STD_ZVAL(php_filter_info);
+    array_init(php_filter_info);
+
+    //filename
+    if (filter_info-&gt;filename
+        &amp;&amp; (filter_info-&gt;contains &amp; GTK_FILE_FILTER_FILENAME)
+    ) {
+        fn = g_filename_to_utf8(filter_info-&gt;filename, \
strlen(filter_info-&gt;filename), NULL, NULL, NULL); +        cp = phpg_from_utf8(fn, \
strlen(fn), &amp;cp_len, &amp;free_cp TSRMLS_CC); +        if (cp) {
+            add_next_index_string(php_filter_info, (char *)cp, 1);
+        } else {
+            php_error(E_WARNING, "%s::%s(): could not convert return value from \
UTF-8", get_active_class_name(NULL TSRMLS_CC), get_active_function_name(TSRMLS_C)); + \
} +        if (free_cp)
+            g_free(cp);
+    } else {
+        add_next_index_null(php_filter_info);
+    }
+
+    //uri
+    *cp = NULL; *fn = NULL; cp_len = 0; free_cp = FALSE;
+    if (filter_info-&gt;uri
+        &amp;&amp; (filter_info-&gt;contains &amp; GTK_FILE_FILTER_URI)
+    ) {
+        fn = g_filename_to_utf8(filter_info-&gt;uri, strlen(filter_info-&gt;uri), NULL, \
NULL, NULL); +        cp = phpg_from_utf8(fn, strlen(fn), &amp;cp_len, &amp;free_cp \
TSRMLS_CC); +        if (cp) {
+            add_next_index_string(php_filter_info, (char *)cp, 1);
+        } else {
+            php_error(E_WARNING, "%s::%s(): could not convert return value from \
UTF-8", get_active_class_name(NULL TSRMLS_CC), get_active_function_name(TSRMLS_C)); + \
} +        if (free_cp)
+            g_free(cp);
+    } else {
+        add_next_index_null(php_filter_info);
+    }
+
+    //display_name
+    *cp = NULL; *fn = NULL; cp_len = 0; free_cp = FALSE;
+    if (filter_info-&gt;display_name
+        &amp;&amp; (filter_info-&gt;contains &amp; GTK_FILE_FILTER_DISPLAY_NAME)
+    ) {
+        fn = g_filename_to_utf8(filter_info-&gt;display_name, \
strlen(filter_info-&gt;display_name), NULL, NULL, NULL); +        cp = \
phpg_from_utf8(fn, strlen(fn), &amp;cp_len, &amp;free_cp TSRMLS_CC); +        if (cp) {
+            add_next_index_string(php_filter_info, (char *)cp, 1);
+        } else {
+            php_error(E_WARNING, "%s::%s(): could not convert return value from \
UTF-8", get_active_class_name(NULL TSRMLS_CC), get_active_function_name(TSRMLS_C)); + \
} +        if (free_cp)
+            g_free(cp);
+    } else {
+        add_next_index_null(php_filter_info);
+    }
+
+    //mime_type
+    *cp = NULL; *fn = NULL; cp_len = 0; free_cp = FALSE;
+    if (filter_info-&gt;mime_type
+        &amp;&amp; (filter_info-&gt;contains &amp; GTK_FILE_FILTER_MIME_TYPE)
+    ) {
+        cp = phpg_from_utf8(filter_info-&gt;mime_type, strlen(filter_info-&gt;mime_type), \
&amp;cp_len, &amp;free_cp TSRMLS_CC); +        if (cp) {
+            add_next_index_string(php_filter_info, (char *)cp, 1);
+        } else {
+            php_error(E_WARNING, "%s::%s(): could not convert return value from \
UTF-8", get_active_class_name(NULL TSRMLS_CC), get_active_function_name(TSRMLS_C)); + \
} +        if (free_cp)
+            g_free(cp);
+    } else {
+        add_next_index_null(php_filter_info);
+    }
+
+    args = php_gtk_hash_as_array_offset(cbd-&gt;user_args, 1, &amp;n_args);
+    args[0] = &amp;php_filter_info;
+
+    call_user_function_ex(EG(function_table), NULL, cbd-&gt;callback, &amp;retval, n_args, \
args, 0, NULL TSRMLS_CC); +
+    zval_ptr_dtor(&amp;php_filter_info);
+
+    if (retval) {
+        show = zend_is_true(retval);
+        zval_ptr_dtor(&amp;retval);
+    } else {
+        show = TRUE;
+    }
+
+    phpg_handle_marshaller_exception(TSRMLS_C);
+
+    efree(callback_name);
+    efree(args);
+
+    return show;
+}
+
+PHP_METHOD
+{
+    zval *callback, *extra;
+    phpg_cb_data_t *cb_data;
+    GtkFileFilterFlags flags = 0;
+    zval *php_flags = NULL;
+
+
+    NOT_STATIC_METHOD();
+
+    if (!php_gtk_parse_varargs(ZEND_NUM_ARGS(), 2, &amp;extra, "VV", &amp;php_flags, \
&amp;callback)) +        return;
+
+    if (php_flags &amp;&amp; phpg_gvalue_get_flags(GTK_TYPE_FILE_FILTER_FLAGS, php_flags, \
(gint *)&amp;flags) == FAILURE) { +        return;
+    }
+
+    zval_add_ref(&amp;callback);
+    cb_data = phpg_cb_data_new(callback, extra TSRMLS_CC);
+
+    gtk_file_filter_add_custom(
+            GTK_FILE_FILTER(PHPG_GOBJECT(this_ptr)),
+            flags,
+            (GtkFileFilterFunc)phpg_file_filter_add_custom_marshal,
+            cb_data, phpg_cb_data_destroy
+    );
+}
+
+
+%%
+add-arginfo GtkFileFilter filter
+static
+ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
+    ZEND_ARG_INFO(0, filterinfo)
+ZEND_END_ARG_INFO();
+
+%%
+override gtk_file_filter_filter
+PHP_METHOD
+{
+    GtkFileFilterInfo filter_info = { 0, NULL, NULL, NULL, NULL };
+    zval *php_filter_info = NULL, **temp_value;
+    gchar **values;
+    gboolean result;
+    int i = 0;
+
+    NOT_STATIC_METHOD();
+
+    if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "a", &amp;php_filter_info)) {
+        return;
+    }
+
+    if (zend_hash_num_elements(Z_ARRVAL_P(php_filter_info)) != 4) {
+        php_error(E_WARNING, "%s::%s() file info array requires 4 values of type \
string or NULL", +                  get_active_class_name(NULL TSRMLS_CC),
+                  get_active_function_name(TSRMLS_C));
+        return;
+    }
+
+    zend_hash_internal_pointer_reset(Z_ARRVAL_P(php_filter_info));
+    values = safe_emalloc(4, sizeof(gchar *), 0);
+
+    while (zend_hash_get_current_data(Z_ARRVAL_P(php_filter_info), (void \
**)&amp;temp_value) == SUCCESS) { +        gchar *utf8 = NULL;
+        gsize utf8_len = 0;
+        zend_bool free_utf8 = 0;
+
+        if (Z_TYPE_P(*temp_value) == IS_NULL) {
+            values[i++] = NULL;
+        } else {
+            convert_to_string_ex(temp_value);
+            utf8 = phpg_to_utf8(Z_STRVAL_PP(temp_value), Z_STRLEN_PP(temp_value), \
&amp;utf8_len, &amp;free_utf8 TSRMLS_CC); +
+            if (!utf8) {
+                efree(values);
+                php_error(E_WARNING, "%s::%s() Could not convert filter info string \
to UTF-8", +                        get_active_class_name(NULL TSRMLS_CC),
+                        get_active_function_name(TSRMLS_C));
+                return;
+            }
+
+            if (free_utf8) {
+                values[i++] = utf8;
+            } else {
+                /* Use GTK+ memory function here since utf8 may also allocated by it \
*/ +                values[i++] = g_strdup(utf8);
+            }
+        }
+
+        zend_hash_move_forward(Z_ARRVAL_P(php_filter_info));
+    }
+
+    if (values[0] != NULL) {
+        filter_info.filename     = values[0];
+        filter_info.contains     |= GTK_FILE_FILTER_FILENAME;
+    }
+    if (values[1] != NULL) {
+        filter_info.uri          = values[1];
+        filter_info.contains     |= GTK_FILE_FILTER_URI;
+    }
+    if (values[2] != NULL) {
+        filter_info.display_name = values[2];
+        filter_info.contains     |= GTK_FILE_FILTER_DISPLAY_NAME;
+    }
+    if (values[3] != NULL) {
+        filter_info.mime_type    = values[3];
+        filter_info.contains     |= GTK_FILE_FILTER_MIME_TYPE;
+    }
+
+    efree(values);
+
+    result = gtk_file_filter_filter(GTK_FILE_FILTER(PHPG_GOBJECT(this_ptr)), \
&amp;filter_info); +    RETURN_BOOL(result);
+}
+
+%% }}}
+
 %% {{{ GtkFileSelection
 
 %%


["signature.asc" (application/pgp-signature)]

</body></email><email><emailId>20070130163353</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-30 16:33:53-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

So we're splitting the development now?

-Andrei

On Jan 30, 2007, at 4:38 AM, Anant Narayanan wrote:

&gt; Hi all,
&gt;
&gt; If you're one of the impatient; and can't wait to try out the
&gt; bleeding-edge widgets that are now available for PHP-GTK; the
&gt; PHP-GTK-EDGE repository is for you.
&gt;
&gt; You can check out a copy from:
&gt;
&gt; svn://svn.cweiske.de/php-gtk-edge
&gt;
&gt; (WebSVN:
&gt; http://svn.cweiske.de/listing.php?repname=php-gtk- 
&gt; edge&amp;path=%2Ftrunk%2F)
&gt;
&gt; This version of PHP-GTK includes:
&gt;
&gt;  * Gtk+ 2.8 and 2.10 support (thanks to Elizabeth); which means you can
&gt; build against these versions of Gtk+ and use widgets like GtkAssistant
&gt; and the much wanted GtkTrayIcon.
&gt;
&gt;  * GtkSpell: spell checking extension for GtkTextView (and  
&gt; GtkSourceView)
&gt;
&gt;  * GtkExtras: Specialized widgets like GtkSheet and GtkPlot.
&gt;
&gt; in addition to everything that's already in php-gtk-proper (mozembed,
&gt; sourceview and scintilla; of course)
&gt;
&gt; I wanted to include libgnome in the repository too; but unfortunately I
&gt; can't find a backup of my files yet and the tarball on kix.in doesn't
&gt; seem to work.
&gt;
&gt; This version of PHP-GTK should probably be helpful to all of you who've
&gt; been asking for GtkExtras and GtkTrayIcon. All feedback is appreciated;
&gt; and the more positive feedback we get; the sooner all of this will be
&gt; migrated to the official php-gtk release.
&gt;
&gt; All of the code in the repository currently works only on *nix systems
&gt; and a simple `./buildconf &amp;&amp; ./configure &amp;&amp; make install' should do.  
&gt; All
&gt; extensions are enabled by default; so it will simply pick what you
&gt; libraries you have your system and build support for it. If you need to
&gt; explicitly disable an extension; pass the --disable-whatever flag to  
&gt; the
&gt; configure statement.
&gt;
&gt; For windows users; Elizabeth is providing builds on
&gt; http://www.callicore.net/php-gtk2/ I'll work with her to get those
&gt; builds into php-gtk-edge soon.
&gt;
&gt; DISCLAIMER:
&gt; I am not responsible if your computer explodes while compiling
&gt; php-gtk-edge ;) Basically, this version of php-gtk is very experimental
&gt; and is expected to be broken from time to time. Use with care!
&gt;
&gt; There are some screenshots for a few of the widgets at
&gt; http://www.kix.in/php-gtk2/
&gt;
&gt; Cheers,
&gt;
&gt; --
&gt; Anant
&gt;
&gt; -- 
&gt; PHP-GTK General Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070210015949</emailId><senderName>Charles Esson</senderName><senderEmail>charlesess@cvs.com.au</senderEmail><timestampReceived>2007-02-10 01:59:49-0400</timestampReceived><subject>[PHP-GTK-DEV] Installing GTK on Ununti</subject><body>

Your making it pretty hard to help with the documentation. Heres some 
wiki text on how to install on ubuntu. There are errors in your linux 
install tutorial.

Regards

----------------------------------------------------------------------------------------------------------------
 This is based on a fresh install of ubuntu 6.10 that came with the 
magazine [http://www.linuxuser.co.uk/ linuxuser and developer] issue 68. 
The aim is to get the install to a point where you can run the 
[http://gtk.php.net/docs.php PHP-GTK tutorials].

=Introduction=
Installing PHP-GTK is a four step process.

#Bringing the C/C++ development environment up to a standard that will 
compile PHP.
#Installing the needed libraries.
#Downloading and compiling PHP as required for PHP-GTK
#Compiling PHP-GTK


=Installing standard C++ development environment=

==Download and install the packages==

Use Synaptic to download and install the following packages to bring the 
development environment up to scratch.

 cvs
 autoconf
 g++
 bison
 re2c

==Compiling flex==
The packaged version of flex is 2.5.33 you need 2.5.4a ( an older 
version). This you have to compile from source. The source is available 
from 
[http://prdownloads.sourceforge.net/flex/flex-2.5.4a.tar.gz?download 
flex version 2.5.4a in tar.gz format].

Download, unzip and place in home folder using your preferred method.

 $ cd flex-2.5.4
 $ ./configure
 $ make
 $ sudo -i
 # cd ..
 # cd /home/your_user_name/flex-2.5.4
 # make install
 # cd ~
 # exit
 $ cd ..

=Getting the needed libraries=

As a general rule you need the libraries that end in -dev. Use Synaptic 
to download the following development libaries.

 libxml2-dev
 libglade2-dev

==Getting lemon==
Lemon is not required for the tutorial but if you do require options 
that use lemon; in the synaptic application click the menu item 
'''Setting-&gt;repositories''', select '''Community maintained Open source 
software'''. Use Synaptic to download
 
 lemon

= compiling PHP=

This is based on the PHP-GTK tutorial with additions and corrections.

==logon to the repository==

 $ cvs -d :pserver:cvsread@cvs.php.net:/repository login

When the password is requested push return.

==Get the code==

 $ cvs -d :pserver:cvsread@cvs.php.net:/repository co -r PHP_5_2 php-src

==compile and install==

 $ cd php-src
 $ ./buildconf
 $ ./configure --prefix=/opt/php5_2 --disable-cgi
 $ make
 $ sudo -i
 # cd ..
 # cd /home/your_user_name/php-src
 # make install
 # echo extension=php_gtk2.so &gt;&gt; /opt/php5_2/lib/php.ini
 # /opt/php5_2/bin/php-config --extension-dir | xargs echo 
'extension_dir=' &gt;&gt; /opt/php5_2/lib/php.ini
 # cd  ~
 # exit
 $

=compiling PHP-GTK 2=

 $ cd ..
 $ cvs -d :pserver:cvsread@cvs.php.net:/repository co php-gtk
 $ cd php-gtk
 $ ./buildconf --with-phpize=/opt/php5_2/bin/phpize
 $ ./configure --with-php-config=/opt/php5_2/bin/php-config
 $ make
 $ sudo -i
 # cd ..
 # cd /home/your_user_name/php-gtk
 # make install
 # ln -s /opt/php5_2/bin/php /usr/bin/php
 # cd  ~
 # exit
 $


Testing the install

 $ php -m | grep php-gtk

You should get the output php-gtk.

=Running tutorial code=


==Simple hello==
Cut example 2.1 and save in a file name hello1.phpw

 $ php hello1.phpw &amp;

If you get a new window that works

==Advanced Hello==
Cut the code in example 3.1 and save in a file hello2.phpw

 $ php hello2.phpw &amp;

If you get a new window that works

==Glade hello==
Cut the text in 4.1 and save in a file helloglade.glade
Cut the code in Example 4.2 and past in hello3.phpw

 $ php hello3.phpw &amp;

If you get a tiny little window then you have the glade module 
installed. Happy tutorial.
 

=Using Nautilus in root=

If you make a mess and your not into using the command line to tidy up 
the root file system the following works.
 
 $ sudo -i
 # nautilus
 # exit
 $

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070217162116</emailId><senderName>"spam2 at rhsoft dot net"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-02-17 16:21:16-0400</timestampReceived><subject>[PHP-GTK-DEV] #40518 [NEW]: php-gtk does not compile with PHP 5.2.1</subject><body>

From:             spam2 at rhsoft dot net
Operating system: Linux (FC 6)
PHP version:      5.2.1
PHP Bug Type:     PHP-GTK related
Bug description:  php-gtk does not compile with PHP 5.2.1

Description:
------------
checking for PHP executable in /usr/bin... found version 5.2.1
configure: error: PHP CLI version is required,  found

Reproduce code:
---------------
Compile PHP 5.2.1 from source and then the latest php-gtk with the
following ./configure-Script, but i think the options does not matter:

./buildconf &amp;&amp; CFLAGS="-O6 -march=i686" CXX=gcc CXXFLAGS="-O6 -march=i686"
./configure &amp;&amp; make &amp;&amp; strip ./modules/php_gtk2.so &amp;&amp; sudo make install &amp;&amp;
make clean &gt; /dev/null





-- 
Edit bug report at http://bugs.php.net/?id=40518&amp;edit=1
-- 
Try a CVS snapshot (PHP 4.4): http://bugs.php.net/fix.php?id=40518&amp;r=trysnapshot44
Try a CVS snapshot (PHP 5.2): http://bugs.php.net/fix.php?id=40518&amp;r=trysnapshot52
Try a CVS snapshot (PHP 6.0): http://bugs.php.net/fix.php?id=40518&amp;r=trysnapshot60
Fixed in CVS:                 http://bugs.php.net/fix.php?id=40518&amp;r=fixedcvs
Fixed in release:             http://bugs.php.net/fix.php?id=40518&amp;r=alreadyfixed
Need backtrace:               http://bugs.php.net/fix.php?id=40518&amp;r=needtrace
Need Reproduce Script:        http://bugs.php.net/fix.php?id=40518&amp;r=needscript
Try newer version:            http://bugs.php.net/fix.php?id=40518&amp;r=oldversion
Not developer issue:          http://bugs.php.net/fix.php?id=40518&amp;r=support
Expected behavior:            http://bugs.php.net/fix.php?id=40518&amp;r=notwrong
Not enough info:              http://bugs.php.net/fix.php?id=40518&amp;r=notenoughinfo
Submitted twice:              http://bugs.php.net/fix.php?id=40518&amp;r=submittedtwice
register_globals:             http://bugs.php.net/fix.php?id=40518&amp;r=globals
PHP 3 support discontinued:   http://bugs.php.net/fix.php?id=40518&amp;r=php3
Daylight Savings:             http://bugs.php.net/fix.php?id=40518&amp;r=dst
IIS Stability:                http://bugs.php.net/fix.php?id=40518&amp;r=isapi
Install GNU Sed:              http://bugs.php.net/fix.php?id=40518&amp;r=gnused
Floating point limitations:   http://bugs.php.net/fix.php?id=40518&amp;r=float
No Zend Extensions:           http://bugs.php.net/fix.php?id=40518&amp;r=nozend
MySQL Configuration Error:    http://bugs.php.net/fix.php?id=40518&amp;r=mysqlcfg

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070126193828</emailId><senderName>"n dot escuder at intra-links dot com"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-01-26 19:38:28-0400</timestampReceived><subject>[PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash</subject><body>

 ID:               39539
 User updated by:  n dot escuder at intra-links dot com
 Reported By:      n dot escuder at intra-links dot com
-Status:           No Feedback
+Status:           Open
 Bug Type:         PHP-GTK related
 Operating System: Linux
 PHP Version:      5.2.0
 New Comment:

Sorry for the long time of the answer.

So i try with php 5.2.0 and i checkout the lastest version of php_gtk
and it always crash... i don't known why...

gdb backtrace :
#178 0xbeeff400 in ?? ()
#179 0x001000b7 in ?? ()
#180 0xb76a3600 in zim_GtkWidget_show_now () from
/usr/lib/php/extensions/php_gtk2.so
Previous frame inner to this frame (corrupt stack?)

X11R7 Version 7.1
GTK+ Version 2.10.6

For information i actually use and old php_gtk2 checkout version that
work fine.

If you want i can give you an ssh access.

See You


Previous Comments:
------------------------------------------------------------------------

[2006-12-15 01:00:00] php-gtk-dev at lists dot php dot net

No feedback was provided for this bug for over a week, so it is
being suspended automatically. If you are able to provide the
information that was originally requested, please do so and change
the status of the bug back to "Open".

------------------------------------------------------------------------

[2006-12-07 05:02:09] andrei@php.net

Please try using this CVS snapshot:

  http://snaps.php.net/php4-STABLE-latest.tar.gz
 
For Windows:
 
  http://snaps.php.net/win32/php4-win32-STABLE-latest.zip

I cannot reproduce this with PHP-GTK CVS and PHP 5.2.0RC4-dev.

------------------------------------------------------------------------

[2006-11-16 21:57:27] n dot escuder at intra-links dot com

Description:
------------
php gtk 2 from CVS crash when creating an object of type GtkEventBox()

Reproduce code:
---------------
new GtkEventBox();

Expected result:
----------------
None

Actual result:
--------------
Crash the program


------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=39539&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070224151716</emailId><senderName>"Marc Quinton"</senderName><senderEmail>mquinton@gmail.com</senderEmail><timestampReceived>2007-02-24 15:17:16-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] GtkHTML3 for PHP-GTK</subject><body>

On 2/23/07, Anant Narayanan &lt;anant@kix.in&gt; wrote:
&gt; Hi all,
&gt;
&gt; GtkHTML3 is now available for PHP-GTK. To use the extension, cd to your
&gt; '/ext' directory in the PHP-GTK sources and then:
&gt;
&gt; $ svn co svn://svn.cweiske.de/php-gtk-edge/trunk/ext/html
&gt;
&gt; Run ./buildconf, ./configure, make, make install and you should be ready
&gt; to go. (Assuming you already have GtkHTML installed, if you don't get it
&gt; here: http://ftp.gnome.org/pub/GNOME/sources/gtkhtml/3.0/). There's a
&gt; sample script: /ext/html/demos/gtkhtml.php
&gt;
&gt; GtkHTML3 offers some nice features and is a wonderful widget to use. If
&gt; Elizabeth or Steph ever get around to compiling GtkHTML3 on Windows,
&gt; this widget should be a great replacement for GtkMozembed which isn't
&gt; available on that platform. But the main attraction of GtkHTML3 is the
&gt; ability to _edit_ HTML, and so when coupled with GtkSourceView, is quite
&gt; powerful.

- here follow in attachment with GtkHTML::export() method ; This
method accept a mime type (text/plain or text/html) and return widget
content as expected.

- for interested users, there is an example of HTML editor at this
location ; it implement nearly all neaded and simple features :

   http://quinton.free.fr/php/gtk/html/

thanks Anant.



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070221125137</emailId><senderName>"auroraeosrose at gmail dot com"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-02-21 12:51:37-0400</timestampReceived><subject>[PHP-GTK-DEV] #40570 [Com]: GtkCellLayout inherition</subject><body>

 ID:               40570
 Comment by:       auroraeosrose at gmail dot com
 Reported By:      theredtitan at hotmail dot com
 Status:           Open
 Bug Type:         PHP-GTK related
 Operating System: Windows XP SP2
 PHP Version:      5.2.1
 New Comment:

First of all, make sure you use the cli version of php (php.exe or
php-win32.exe on windows..) with php-gtk2 - it is NOT meant to be used
with a webserver or a webserver SAPI (isapi, apache2_2 module,
cgi...etc)!

If you're running both a webserver AND php-gtk on the same machine
you're going to need to use different php.ini files, your webserver ini
file should NOT be loading the php-gtk2.dll  You can do this easily by
setting the PHPINIDIR directive in your apache conf file or by renaming
your php-gtk specific ini file php-cli.ini (a little known feature on
windows is that php looks for sapi specific ini files - I have a
php.ini, a php-isapi.ini, and a php-cli.ini all in the same
directory...and IIS, apache, and the php cli always find the right file
;)


Previous Comments:
------------------------------------------------------------------------

[2007-02-21 01:36:12] theredtitan at hotmail dot com

Description:
------------
First of all, sorry for my bad english!!

I use PHP5 in both server side (With Apache 2.2), and client side
(Using PHP-GTK)

After I installed the PHP-GTK v2.0 on my PHP 5.2.1, accedently the
logos of both PHP and Zend that appears on the page of "phpinfo.php"
has disappeared!!

I found that error occured when I added the "php.ini" setting:

extension=php-gtk2.dll

My error logs has repoted the following error:

[21-Feb-2007 04:18:43] PHP Fatal error:  Cannot inherit
previously-inherited constant gtype from interface GtkCellLayout in
Unknown on line 0



Reproduce code:
---------------
&lt;?php
phpinfo();
?&gt;

Expected result:
----------------
I expected to see the PHP and Zend logo with this codes:

phpinfo.php?=PHPE9568F34-D428-11d2-A769-00AA001ACF42
phpinfo.php?=PHPE9568F35-D428-11d2-A769-00AA001ACF42

Actual result:
--------------
What I saw when I query the "phpinfo.php" page was a blank page (As I
configured the error logger to hide errors and log in to a file on my
machine)


------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=40570&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070225071228</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-02-25 07:12:28-0400</timestampReceived><subject>[PHP-GTK-DEV] libs3xy for PHP-GTK</subject><body>

Hi all,

libs3xy is now available for PHP-GTK. According to its website, libs3xy
"Does naughty things to good widgets" :)

Anyway, check out the extension from
svn://svn.cweiske.de/php-gtk-edge/ext/libs3xy. If you don't have libs3xy
installed get it from http://releases.chipx86.com/libs3xy/libs3xy/

I didn't make any demo scripts, but usage is fairly trivial.

I'll commit both this and GtkHTML to the main php-gtk-cvs tree as soon
as I get some feedback from the rest of the team :)

Cheers,
--
Anant

P.S. I had to replace 'e' with '3' because php.net wouldn't accept the
mail with "restricted" words.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070225164241</emailId><senderName>"Marc Quinton"</senderName><senderEmail>mquinton@gmail.com</senderEmail><timestampReceived>2007-02-25 16:42:41-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] libs3xy for PHP-GTK</subject><body>

On 2/25/07, Anant Narayanan &lt;anant@kix.in&gt; wrote:
&gt; I didn't make any demo scripts, but usage is fairly trivial.

for your information, a pre-documentation extracted from specs is
available at this adresse ; this is an auto-generated documentation :

 http://php.classes.free.fr/wiki/index.php5?title=PhpGtk#Gtk_doc_and_Patterns

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070225215845</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-02-25 21:58:45-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] libs3xy for PHP-GTK</subject><body>

That URL doesn't work..

-Andrei


On Feb 24, 2007, at 11:00 PM, Anant Narayanan wrote:

&gt; Hi all,
&gt;
&gt; libs3xy is now available for PHP-GTK. According to its website,  
&gt; libs3xy
&gt; "Does naughty things to good widgets" :)
&gt;
&gt; Anyway, check out the extension from
&gt; svn://svn.cweiske.de/php-gtk-edge/ext/libs3xy. If you don't have  
&gt; libs3xy
&gt; installed get it from http://releases.chipx86.com/libs3xy/libs3xy/
&gt;
&gt; I didn't make any demo scripts, but usage is fairly trivial.
&gt;
&gt; I'll commit both this and GtkHTML to the main php-gtk-cvs tree as soon
&gt; as I get some feedback from the rest of the team :)
&gt;
&gt; Cheers,
&gt; --
&gt; Anant
&gt;
&gt; P.S. I had to replace 'e' with '3' because php.net wouldn't accept the
&gt; mail with "restricted" words.
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070225223711</emailId><senderName>Lupine</senderName><senderEmail>thelupine@gmail.com</senderEmail><timestampReceived>2007-02-25 22:37:11-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] libs3xy for PHP-GTK</subject><body>

On Sun, 2007-02-25 at 13:58 -0800, Andrei Zmievski wrote:
&gt; That URL doesn't work..

On 2/25/07, Anant Narayanan &lt;anant@kix.in&gt; wrote:
&gt; &gt; P.S. I had to replace 'e' with '3' because php.net wouldn't accept the
&gt; &gt; mail with "restricted" words.


He said that he had to replace the "e"'s with "3"'s.  Do that, and it
does work.

Or just go to: http://releases.chipx86.com and I'm sure you can find the
package.

-Lup

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070225124407</emailId><senderName>"yehac at hotmail dot com"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-02-25 12:44:07-0400</timestampReceived><subject>[PHP-GTK-DEV] #40570 [Com]: GtkCellLayout inherition</subject><body>

 ID:               40570
 Comment by:       yehac at hotmail dot com
 Reported By:      theredtitan at hotmail dot com
 Status:           Open
 Bug Type:         PHP-GTK related
 Operating System: Windows XP SP2
 PHP Version:      5.2.1
 New Comment:

This is a nice work around, but this does not fix the bug that we need
to!!!


Previous Comments:
------------------------------------------------------------------------

[2007-02-21 12:51:36] auroraeosrose at gmail dot com

First of all, make sure you use the cli version of php (php.exe or
php-win32.exe on windows..) with php-gtk2 - it is NOT meant to be used
with a webserver or a webserver SAPI (isapi, apache2_2 module,
cgi...etc)!

If you're running both a webserver AND php-gtk on the same machine
you're going to need to use different php.ini files, your webserver ini
file should NOT be loading the php-gtk2.dll  You can do this easily by
setting the PHPINIDIR directive in your apache conf file or by renaming
your php-gtk specific ini file php-cli.ini (a little known feature on
windows is that php looks for sapi specific ini files - I have a
php.ini, a php-isapi.ini, and a php-cli.ini all in the same
directory...and IIS, apache, and the php cli always find the right file
;)

------------------------------------------------------------------------

[2007-02-21 01:36:12] theredtitan at hotmail dot com

Description:
------------
First of all, sorry for my bad english!!

I use PHP5 in both server side (With Apache 2.2), and client side
(Using PHP-GTK)

After I installed the PHP-GTK v2.0 on my PHP 5.2.1, accedently the
logos of both PHP and Zend that appears on the page of "phpinfo.php"
has disappeared!!

I found that error occured when I added the "php.ini" setting:

extension=php-gtk2.dll

My error logs has repoted the following error:

[21-Feb-2007 04:18:43] PHP Fatal error:  Cannot inherit
previously-inherited constant gtype from interface GtkCellLayout in
Unknown on line 0



Reproduce code:
---------------
&lt;?php
phpinfo();
?&gt;

Expected result:
----------------
I expected to see the PHP and Zend logo with this codes:

phpinfo.php?=PHPE9568F34-D428-11d2-A769-00AA001ACF42
phpinfo.php?=PHPE9568F35-D428-11d2-A769-00AA001ACF42

Actual result:
--------------
What I saw when I query the "phpinfo.php" page was a blank page (As I
configured the error logger to hide errors and log in to a file on my
machine)


------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=40570&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070221160957</emailId><senderName>"Escuder Nicolas"</senderName><senderEmail>n.escuder@intra-links.com</senderEmail><timestampReceived>2007-02-21 16:09:57-0400</timestampReceived><subject>RE: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash</subject><body>


Hello,

More informations :

GTK+ 2.10.9 build with : 
./configure --prefix=/usr \
	--sysconfdir=/etc \
	--with-jpeg \
	--with-tiff \
	--enable-xinerama \
	--with-libpng \
	--with-gdktarget=x11 \
	--with-xinput

PHP 5.2.1 build with :
./configure --prefix=/usr \
      --sysconfdir=/etc \
      --with-config-file-path=/etc \
      --with-zlib-dir=/usr/lib \
      --with-pear \
      --enable-dom \
      --enable-overload \
      --enable-pcntl \
      --enable-pdo \
      --enable-simplexml \
      --enable-zip \
      --enable-json \
      --with-bz2=shared \
      --with-curl=shared \
      --with-fam=shared \
      --with-gettext=shared \
      --with-iconv=shared \
      --with-imap=shared \
      --with-imap-ssl=shared \
      --with-mysql=shared \
      --with-openssl=shared \
      --with-pdo-mysql=shared \
      --with-pdo-sqlite=/usr \
      --with-xml=shared \
      --with-simplexml=shared \
      --with-xmlreader=shared \
      --with-xmlwriter=shared \
      --enable-bcmath=shared \
      --enable-calendar=shared \
      --enable-ctype=shared \
      --enable-exif=shared \
      --enable-ftp=shared \
      --enable-hash=shared \
      --enable-mbstring=shared \
      --enable-sockets=shared \
      --enable-tokenizer=shared \
      --enable-xmlreader=shared \
      --enable-xmlwriter=shared \
      --without-sqlite \
      --disable-cgi

PHP-GTK CVS 21/02/2007 build with :
./configure

And with this config the new GtkEventBox crash

With PHP-GTK CVS 05/11/2005 All works fine.


I build GTK+ with debug but in stack trace i only get : 

Starting program: /bin/php -n test.php
[Thread debugging using libthread_db enabled]
[New Thread -1213572928 (LWP 6808)]

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread -1213572928 (LWP 6808)]
0xb76b8004 in ?? ()
(gdb) bt
#0  0xb76b8004 in ?? ()
#1  0x218145bf in ?? ()
#2  0xa6fbf008 in ?? ()
...........
#3471 0x6e69622f in ?? ()
#3472 0x7068702f in ?? ()
#3473 0x00000000 in ?? ()

Cannot access memory at address 0xbfd35fff


See you soon i hope ;o)
 
Escuder Nicolas

-----Message d'origine-----
De : Andrei Zmievski [mailto:andrei@gravitonic.com] 
Envoyé : samedi 27 janvier 2007 19:53
À : PHP-GTK Dev list
Objet : Re: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash

Can anyone else reproduce this?	

-Andrei


On Jan 26, 2007, at 7:38 PM, n dot escuder at intra-links dot com wrote:

&gt;  ID:               39539
&gt;  User updated by:  n dot escuder at intra-links dot com
&gt;  Reported By:      n dot escuder at intra-links dot com
&gt; -Status:           No Feedback
&gt; +Status:           Open
&gt;  Bug Type:         PHP-GTK related
&gt;  Operating System: Linux
&gt;  PHP Version:      5.2.0
&gt;  New Comment:
&gt;
&gt; Sorry for the long time of the answer.
&gt;
&gt; So i try with php 5.2.0 and i checkout the lastest version of php_gtk
&gt; and it always crash... i don't known why...
&gt;
&gt; gdb backtrace :
&gt; #178 0xbeeff400 in ?? ()
&gt; #179 0x001000b7 in ?? ()
&gt; #180 0xb76a3600 in zim_GtkWidget_show_now () from
&gt; /usr/lib/php/extensions/php_gtk2.so
&gt; Previous frame inner to this frame (corrupt stack?)
&gt;
&gt; X11R7 Version 7.1
&gt; GTK+ Version 2.10.6
&gt;
&gt; For information i actually use and old php_gtk2 checkout version that
&gt; work fine.
&gt;
&gt; If you want i can give you an ssh access.
&gt;
&gt; See You
&gt;
&gt;
&gt; Previous Comments:
&gt; ---------------------------------------------------------------------- 
&gt; --
&gt;
&gt; [2006-12-15 01:00:00] php-gtk-dev at lists dot php dot net
&gt;
&gt; No feedback was provided for this bug for over a week, so it is
&gt; being suspended automatically. If you are able to provide the
&gt; information that was originally requested, please do so and change
&gt; the status of the bug back to "Open".
&gt;
&gt; ---------------------------------------------------------------------- 
&gt; --
&gt;
&gt; [2006-12-07 05:02:09] andrei@php.net
&gt;
&gt; Please try using this CVS snapshot:
&gt;
&gt;   http://snaps.php.net/php4-STABLE-latest.tar.gz
&gt;
&gt; For Windows:
&gt;
&gt;   http://snaps.php.net/win32/php4-win32-STABLE-latest.zip
&gt;
&gt; I cannot reproduce this with PHP-GTK CVS and PHP 5.2.0RC4-dev.
&gt;
&gt; ---------------------------------------------------------------------- 
&gt; --
&gt;
&gt; [2006-11-16 21:57:27] n dot escuder at intra-links dot com
&gt;
&gt; Description:
&gt; ------------
&gt; php gtk 2 from CVS crash when creating an object of type GtkEventBox()
&gt;
&gt; Reproduce code:
&gt; ---------------
&gt; new GtkEventBox();
&gt;
&gt; Expected result:
&gt; ----------------
&gt; None
&gt;
&gt; Actual result:
&gt; --------------
&gt; Crash the program
&gt;
&gt;
&gt; ---------------------------------------------------------------------- 
&gt; --
&gt;
&gt;
&gt; -- 
&gt; Edit this bug report at http://bugs.php.net/?id=39539&amp;edit=1
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070221171343</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-02-21 17:13:43-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash</subject><body>

You don't have any debug info in your binaries. Can you recompile with 
CFLAGS=-g -O0 ? Just insert them before ./configure in both cases.

-Andrei

On Feb 21, 2007, at 8:09 AM, Escuder Nicolas wrote:

&gt;
&gt; Hello,
&gt;
&gt; More informations :
&gt;
&gt; GTK+ 2.10.9 build with :
&gt; ./configure --prefix=/usr \
&gt; 	--sysconfdir=/etc \
&gt; 	--with-jpeg \
&gt; 	--with-tiff \
&gt; 	--enable-xinerama \
&gt; 	--with-libpng \
&gt; 	--with-gdktarget=x11 \
&gt; 	--with-xinput
&gt;
&gt; PHP 5.2.1 build with :
&gt; ./configure --prefix=/usr \
&gt;       --sysconfdir=/etc \
&gt;       --with-config-file-path=/etc \
&gt;       --with-zlib-dir=/usr/lib \
&gt;       --with-pear \
&gt;       --enable-dom \
&gt;       --enable-overload \
&gt;       --enable-pcntl \
&gt;       --enable-pdo \
&gt;       --enable-simplexml \
&gt;       --enable-zip \
&gt;       --enable-json \
&gt;       --with-bz2=shared \
&gt;       --with-curl=shared \
&gt;       --with-fam=shared \
&gt;       --with-gettext=shared \
&gt;       --with-iconv=shared \
&gt;       --with-imap=shared \
&gt;       --with-imap-ssl=shared \
&gt;       --with-mysql=shared \
&gt;       --with-openssl=shared \
&gt;       --with-pdo-mysql=shared \
&gt;       --with-pdo-sqlite=/usr \
&gt;       --with-xml=shared \
&gt;       --with-simplexml=shared \
&gt;       --with-xmlreader=shared \
&gt;       --with-xmlwriter=shared \
&gt;       --enable-bcmath=shared \
&gt;       --enable-calendar=shared \
&gt;       --enable-ctype=shared \
&gt;       --enable-exif=shared \
&gt;       --enable-ftp=shared \
&gt;       --enable-hash=shared \
&gt;       --enable-mbstring=shared \
&gt;       --enable-sockets=shared \
&gt;       --enable-tokenizer=shared \
&gt;       --enable-xmlreader=shared \
&gt;       --enable-xmlwriter=shared \
&gt;       --without-sqlite \
&gt;       --disable-cgi
&gt;
&gt; PHP-GTK CVS 21/02/2007 build with :
&gt; ./configure
&gt;
&gt; And with this config the new GtkEventBox crash
&gt;
&gt; With PHP-GTK CVS 05/11/2005 All works fine.
&gt;
&gt;
&gt; I build GTK+ with debug but in stack trace i only get :
&gt;
&gt; Starting program: /bin/php -n test.php
&gt; [Thread debugging using libthread_db enabled]
&gt; [New Thread -1213572928 (LWP 6808)]
&gt;
&gt; Program received signal SIGSEGV, Segmentation fault.
&gt; [Switching to Thread -1213572928 (LWP 6808)]
&gt; 0xb76b8004 in ?? ()
&gt; (gdb) bt
&gt; #0  0xb76b8004 in ?? ()
&gt; #1  0x218145bf in ?? ()
&gt; #2  0xa6fbf008 in ?? ()
&gt; ...........
&gt; #3471 0x6e69622f in ?? ()
&gt; #3472 0x7068702f in ?? ()
&gt; #3473 0x00000000 in ?? ()
&gt;
&gt; Cannot access memory at address 0xbfd35fff
&gt;
&gt;
&gt; See you soon i hope ;o)
&gt;
&gt; Escuder Nicolas
&gt;
&gt; -----Message d'origine-----
&gt; De : Andrei Zmievski [mailto:andrei@gravitonic.com]
&gt; Envoyé : samedi 27 janvier 2007 19:53
&gt; À : PHP-GTK Dev list
&gt; Objet : Re: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash
&gt;
&gt; Can anyone else reproduce this?	
&gt;
&gt; -Andrei
&gt;
&gt;
&gt; On Jan 26, 2007, at 7:38 PM, n dot escuder at intra-links dot com 
&gt; wrote:
&gt;
&gt;&gt;  ID:               39539
&gt;&gt;  User updated by:  n dot escuder at intra-links dot com
&gt;&gt;  Reported By:      n dot escuder at intra-links dot com
&gt;&gt; -Status:           No Feedback
&gt;&gt; +Status:           Open
&gt;&gt;  Bug Type:         PHP-GTK related
&gt;&gt;  Operating System: Linux
&gt;&gt;  PHP Version:      5.2.0
&gt;&gt;  New Comment:
&gt;&gt;
&gt;&gt; Sorry for the long time of the answer.
&gt;&gt;
&gt;&gt; So i try with php 5.2.0 and i checkout the lastest version of php_gtk
&gt;&gt; and it always crash... i don't known why...
&gt;&gt;
&gt;&gt; gdb backtrace :
&gt;&gt; #178 0xbeeff400 in ?? ()
&gt;&gt; #179 0x001000b7 in ?? ()
&gt;&gt; #180 0xb76a3600 in zim_GtkWidget_show_now () from
&gt;&gt; /usr/lib/php/extensions/php_gtk2.so
&gt;&gt; Previous frame inner to this frame (corrupt stack?)
&gt;&gt;
&gt;&gt; X11R7 Version 7.1
&gt;&gt; GTK+ Version 2.10.6
&gt;&gt;
&gt;&gt; For information i actually use and old php_gtk2 checkout version that
&gt;&gt; work fine.
&gt;&gt;
&gt;&gt; If you want i can give you an ssh access.
&gt;&gt;
&gt;&gt; See You
&gt;&gt;
&gt;&gt;
&gt;&gt; Previous Comments:
&gt;&gt; ----------------------------------------------------------------------
&gt;&gt; --
&gt;&gt;
&gt;&gt; [2006-12-15 01:00:00] php-gtk-dev at lists dot php dot net
&gt;&gt;
&gt;&gt; No feedback was provided for this bug for over a week, so it is
&gt;&gt; being suspended automatically. If you are able to provide the
&gt;&gt; information that was originally requested, please do so and change
&gt;&gt; the status of the bug back to "Open".
&gt;&gt;
&gt;&gt; ----------------------------------------------------------------------
&gt;&gt; --
&gt;&gt;
&gt;&gt; [2006-12-07 05:02:09] andrei@php.net
&gt;&gt;
&gt;&gt; Please try using this CVS snapshot:
&gt;&gt;
&gt;&gt;   http://snaps.php.net/php4-STABLE-latest.tar.gz
&gt;&gt;
&gt;&gt; For Windows:
&gt;&gt;
&gt;&gt;   http://snaps.php.net/win32/php4-win32-STABLE-latest.zip
&gt;&gt;
&gt;&gt; I cannot reproduce this with PHP-GTK CVS and PHP 5.2.0RC4-dev.
&gt;&gt;
&gt;&gt; ----------------------------------------------------------------------
&gt;&gt; --
&gt;&gt;
&gt;&gt; [2006-11-16 21:57:27] n dot escuder at intra-links dot com
&gt;&gt;
&gt;&gt; Description:
&gt;&gt; ------------
&gt;&gt; php gtk 2 from CVS crash when creating an object of type GtkEventBox()
&gt;&gt;
&gt;&gt; Reproduce code:
&gt;&gt; ---------------
&gt;&gt; new GtkEventBox();
&gt;&gt;
&gt;&gt; Expected result:
&gt;&gt; ----------------
&gt;&gt; None
&gt;&gt;
&gt;&gt; Actual result:
&gt;&gt; --------------
&gt;&gt; Crash the program
&gt;&gt;
&gt;&gt;
&gt;&gt; ----------------------------------------------------------------------
&gt;&gt; --
&gt;&gt;
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; Edit this bug report at http://bugs.php.net/?id=39539&amp;edit=1
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070221173842</emailId><senderName>"Escuder Nicolas"</senderName><senderEmail>n.escuder@intra-links.com</senderEmail><timestampReceived>2007-02-21 17:38:42-0400</timestampReceived><subject>RE: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash</subject><body>

Here you can find the backtrace :

0xb7b2bfb8 in strcmp () from /lib/libc.so.6
(gdb) bt
#0  0xb7b2bfb8 in strcmp () from /lib/libc.so.6
#1  0x081e641e in zend_do_perform_implementation_check ()
#2  0x081e6a48 in do_inherit_method_check ()
#3  0x0820546b in zend_hash_replace_checker_wrapper ()
#4  0x082054b0 in zend_hash_merge_ex ()
#5  0x081e7a49 in zend_do_implement_interface ()
#6  0x08200c9d in zend_class_implements ()
#7  0xb77b1402 in phpg_gtk_register_classes ()
   from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
#8  0xb770a356 in php_gtk_xinit_gtk_plus ()
   from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
#9  0xb77cbaed in php_gtk_startup_extension ()
   from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
#10 0xb77cbbca in php_gtk_startup_extensions ()
   from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
#11 0xb77d6407 in php_gtk_startup_all_extensions ()
   from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
#12 0xb77cb907 in zm_activate_gtk ()
   from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
#13 0x0813b132 in php_dl ()
#14 0x0813ad3a in zif_dl ()
#15 0x0821ac4f in zend_do_fcall_common_helper_SPEC ()
#16 0x0821fc3a in ZEND_DO_FCALL_SPEC_CONST_HANDLER ()
#17 0x0821a7f2 in execute ()
#18 0x081fb0e2 in zend_execute_scripts ()
#19 0x081b3fbe in php_execute_script ()
#20 0x082676e6 in main ()
 
Escuder Nicolas

-----Message d'origine-----
De : Andrei Zmievski [mailto:andrei@gravitonic.com] 
Envoyé : mercredi 21 février 2007 18:14
À : Escuder Nicolas
Cc : php-gtk-dev@lists.php.net
Objet : Re: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash

You don't have any debug info in your binaries. Can you recompile with 
CFLAGS=-g -O0 ? Just insert them before ./configure in both cases.

-Andrei

On Feb 21, 2007, at 8:09 AM, Escuder Nicolas wrote:

&gt;
&gt; Hello,
&gt;
&gt; More informations :
&gt;
&gt; GTK+ 2.10.9 build with :
&gt; ./configure --prefix=/usr \
&gt; 	--sysconfdir=/etc \
&gt; 	--with-jpeg \
&gt; 	--with-tiff \
&gt; 	--enable-xinerama \
&gt; 	--with-libpng \
&gt; 	--with-gdktarget=x11 \
&gt; 	--with-xinput
&gt;
&gt; PHP 5.2.1 build with :
&gt; ./configure --prefix=/usr \
&gt;       --sysconfdir=/etc \
&gt;       --with-config-file-path=/etc \
&gt;       --with-zlib-dir=/usr/lib \
&gt;       --with-pear \
&gt;       --enable-dom \
&gt;       --enable-overload \
&gt;       --enable-pcntl \
&gt;       --enable-pdo \
&gt;       --enable-simplexml \
&gt;       --enable-zip \
&gt;       --enable-json \
&gt;       --with-bz2=shared \
&gt;       --with-curl=shared \
&gt;       --with-fam=shared \
&gt;       --with-gettext=shared \
&gt;       --with-iconv=shared \
&gt;       --with-imap=shared \
&gt;       --with-imap-ssl=shared \
&gt;       --with-mysql=shared \
&gt;       --with-openssl=shared \
&gt;       --with-pdo-mysql=shared \
&gt;       --with-pdo-sqlite=/usr \
&gt;       --with-xml=shared \
&gt;       --with-simplexml=shared \
&gt;       --with-xmlreader=shared \
&gt;       --with-xmlwriter=shared \
&gt;       --enable-bcmath=shared \
&gt;       --enable-calendar=shared \
&gt;       --enable-ctype=shared \
&gt;       --enable-exif=shared \
&gt;       --enable-ftp=shared \
&gt;       --enable-hash=shared \
&gt;       --enable-mbstring=shared \
&gt;       --enable-sockets=shared \
&gt;       --enable-tokenizer=shared \
&gt;       --enable-xmlreader=shared \
&gt;       --enable-xmlwriter=shared \
&gt;       --without-sqlite \
&gt;       --disable-cgi
&gt;
&gt; PHP-GTK CVS 21/02/2007 build with :
&gt; ./configure
&gt;
&gt; And with this config the new GtkEventBox crash
&gt;
&gt; With PHP-GTK CVS 05/11/2005 All works fine.
&gt;
&gt;
&gt; I build GTK+ with debug but in stack trace i only get :
&gt;
&gt; Starting program: /bin/php -n test.php
&gt; [Thread debugging using libthread_db enabled]
&gt; [New Thread -1213572928 (LWP 6808)]
&gt;
&gt; Program received signal SIGSEGV, Segmentation fault.
&gt; [Switching to Thread -1213572928 (LWP 6808)]
&gt; 0xb76b8004 in ?? ()
&gt; (gdb) bt
&gt; #0  0xb76b8004 in ?? ()
&gt; #1  0x218145bf in ?? ()
&gt; #2  0xa6fbf008 in ?? ()
&gt; ...........
&gt; #3471 0x6e69622f in ?? ()
&gt; #3472 0x7068702f in ?? ()
&gt; #3473 0x00000000 in ?? ()
&gt;
&gt; Cannot access memory at address 0xbfd35fff
&gt;
&gt;
&gt; See you soon i hope ;o)
&gt;
&gt; Escuder Nicolas
&gt;
&gt; -----Message d'origine-----
&gt; De : Andrei Zmievski [mailto:andrei@gravitonic.com]
&gt; Envoyé : samedi 27 janvier 2007 19:53
&gt; À : PHP-GTK Dev list
&gt; Objet : Re: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash
&gt;
&gt; Can anyone else reproduce this?	
&gt;
&gt; -Andrei
&gt;
&gt;
&gt; On Jan 26, 2007, at 7:38 PM, n dot escuder at intra-links dot com 
&gt; wrote:
&gt;
&gt;&gt;  ID:               39539
&gt;&gt;  User updated by:  n dot escuder at intra-links dot com
&gt;&gt;  Reported By:      n dot escuder at intra-links dot com
&gt;&gt; -Status:           No Feedback
&gt;&gt; +Status:           Open
&gt;&gt;  Bug Type:         PHP-GTK related
&gt;&gt;  Operating System: Linux
&gt;&gt;  PHP Version:      5.2.0
&gt;&gt;  New Comment:
&gt;&gt;
&gt;&gt; Sorry for the long time of the answer.
&gt;&gt;
&gt;&gt; So i try with php 5.2.0 and i checkout the lastest version of php_gtk
&gt;&gt; and it always crash... i don't known why...
&gt;&gt;
&gt;&gt; gdb backtrace :
&gt;&gt; #178 0xbeeff400 in ?? ()
&gt;&gt; #179 0x001000b7 in ?? ()
&gt;&gt; #180 0xb76a3600 in zim_GtkWidget_show_now () from
&gt;&gt; /usr/lib/php/extensions/php_gtk2.so
&gt;&gt; Previous frame inner to this frame (corrupt stack?)
&gt;&gt;
&gt;&gt; X11R7 Version 7.1
&gt;&gt; GTK+ Version 2.10.6
&gt;&gt;
&gt;&gt; For information i actually use and old php_gtk2 checkout version that
&gt;&gt; work fine.
&gt;&gt;
&gt;&gt; If you want i can give you an ssh access.
&gt;&gt;
&gt;&gt; See You
&gt;&gt;
&gt;&gt;
&gt;&gt; Previous Comments:
&gt;&gt; ----------------------------------------------------------------------
&gt;&gt; --
&gt;&gt;
&gt;&gt; [2006-12-15 01:00:00] php-gtk-dev at lists dot php dot net
&gt;&gt;
&gt;&gt; No feedback was provided for this bug for over a week, so it is
&gt;&gt; being suspended automatically. If you are able to provide the
&gt;&gt; information that was originally requested, please do so and change
&gt;&gt; the status of the bug back to "Open".
&gt;&gt;
&gt;&gt; ----------------------------------------------------------------------
&gt;&gt; --
&gt;&gt;
&gt;&gt; [2006-12-07 05:02:09] andrei@php.net
&gt;&gt;
&gt;&gt; Please try using this CVS snapshot:
&gt;&gt;
&gt;&gt;   http://snaps.php.net/php4-STABLE-latest.tar.gz
&gt;&gt;
&gt;&gt; For Windows:
&gt;&gt;
&gt;&gt;   http://snaps.php.net/win32/php4-win32-STABLE-latest.zip
&gt;&gt;
&gt;&gt; I cannot reproduce this with PHP-GTK CVS and PHP 5.2.0RC4-dev.
&gt;&gt;
&gt;&gt; ----------------------------------------------------------------------
&gt;&gt; --
&gt;&gt;
&gt;&gt; [2006-11-16 21:57:27] n dot escuder at intra-links dot com
&gt;&gt;
&gt;&gt; Description:
&gt;&gt; ------------
&gt;&gt; php gtk 2 from CVS crash when creating an object of type GtkEventBox()
&gt;&gt;
&gt;&gt; Reproduce code:
&gt;&gt; ---------------
&gt;&gt; new GtkEventBox();
&gt;&gt;
&gt;&gt; Expected result:
&gt;&gt; ----------------
&gt;&gt; None
&gt;&gt;
&gt;&gt; Actual result:
&gt;&gt; --------------
&gt;&gt; Crash the program
&gt;&gt;
&gt;&gt;
&gt;&gt; ----------------------------------------------------------------------
&gt;&gt; --
&gt;&gt;
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; Edit this bug report at http://bugs.php.net/?id=39539&amp;edit=1
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070221190803</emailId><senderName>"Escuder Nicolas"</senderName><senderEmail>n.escuder@intra-links.com</senderEmail><timestampReceived>2007-02-21 19:08:03-0400</timestampReceived><subject>RE: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash</subject><body>


The backtrace of my last message was false...

This was not the backtrace of the crash.

I retry but i always get backtrace with "??" as function name...

So i was build PHP / GTK / PHP-GTK with -g -O0 so the crash do not append in
them i think.


 
Escuder Nicolas

-----Message d'origine-----
De : Escuder Nicolas [mailto:n.escuder@intra-links.com] 
Envoyé : mercredi 21 février 2007 18:39
À : php-gtk-dev@lists.php.net
Objet : RE: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash

Here you can find the backtrace :

0xb7b2bfb8 in strcmp () from /lib/libc.so.6
(gdb) bt
#0  0xb7b2bfb8 in strcmp () from /lib/libc.so.6
#1  0x081e641e in zend_do_perform_implementation_check ()
#2  0x081e6a48 in do_inherit_method_check ()
#3  0x0820546b in zend_hash_replace_checker_wrapper ()
#4  0x082054b0 in zend_hash_merge_ex ()
#5  0x081e7a49 in zend_do_implement_interface ()
#6  0x08200c9d in zend_class_implements ()
#7  0xb77b1402 in phpg_gtk_register_classes ()
   from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
#8  0xb770a356 in php_gtk_xinit_gtk_plus ()
   from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
#9  0xb77cbaed in php_gtk_startup_extension ()
   from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
#10 0xb77cbbca in php_gtk_startup_extensions ()
   from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
#11 0xb77d6407 in php_gtk_startup_all_extensions ()
   from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
#12 0xb77cb907 in zm_activate_gtk ()
   from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
#13 0x0813b132 in php_dl ()
#14 0x0813ad3a in zif_dl ()
#15 0x0821ac4f in zend_do_fcall_common_helper_SPEC ()
#16 0x0821fc3a in ZEND_DO_FCALL_SPEC_CONST_HANDLER ()
#17 0x0821a7f2 in execute ()
#18 0x081fb0e2 in zend_execute_scripts ()
#19 0x081b3fbe in php_execute_script ()
#20 0x082676e6 in main ()
 
Escuder Nicolas

-----Message d'origine-----
De : Andrei Zmievski [mailto:andrei@gravitonic.com] 
Envoyé : mercredi 21 février 2007 18:14
À : Escuder Nicolas
Cc : php-gtk-dev@lists.php.net
Objet : Re: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash

You don't have any debug info in your binaries. Can you recompile with 
CFLAGS=-g -O0 ? Just insert them before ./configure in both cases.

-Andrei

On Feb 21, 2007, at 8:09 AM, Escuder Nicolas wrote:

&gt;
&gt; Hello,
&gt;
&gt; More informations :
&gt;
&gt; GTK+ 2.10.9 build with :
&gt; ./configure --prefix=/usr \
&gt; 	--sysconfdir=/etc \
&gt; 	--with-jpeg \
&gt; 	--with-tiff \
&gt; 	--enable-xinerama \
&gt; 	--with-libpng \
&gt; 	--with-gdktarget=x11 \
&gt; 	--with-xinput
&gt;
&gt; PHP 5.2.1 build with :
&gt; ./configure --prefix=/usr \
&gt;       --sysconfdir=/etc \
&gt;       --with-config-file-path=/etc \
&gt;       --with-zlib-dir=/usr/lib \
&gt;       --with-pear \
&gt;       --enable-dom \
&gt;       --enable-overload \
&gt;       --enable-pcntl \
&gt;       --enable-pdo \
&gt;       --enable-simplexml \
&gt;       --enable-zip \
&gt;       --enable-json \
&gt;       --with-bz2=shared \
&gt;       --with-curl=shared \
&gt;       --with-fam=shared \
&gt;       --with-gettext=shared \
&gt;       --with-iconv=shared \
&gt;       --with-imap=shared \
&gt;       --with-imap-ssl=shared \
&gt;       --with-mysql=shared \
&gt;       --with-openssl=shared \
&gt;       --with-pdo-mysql=shared \
&gt;       --with-pdo-sqlite=/usr \
&gt;       --with-xml=shared \
&gt;       --with-simplexml=shared \
&gt;       --with-xmlreader=shared \
&gt;       --with-xmlwriter=shared \
&gt;       --enable-bcmath=shared \
&gt;       --enable-calendar=shared \
&gt;       --enable-ctype=shared \
&gt;       --enable-exif=shared \
&gt;       --enable-ftp=shared \
&gt;       --enable-hash=shared \
&gt;       --enable-mbstring=shared \
&gt;       --enable-sockets=shared \
&gt;       --enable-tokenizer=shared \
&gt;       --enable-xmlreader=shared \
&gt;       --enable-xmlwriter=shared \
&gt;       --without-sqlite \
&gt;       --disable-cgi
&gt;
&gt; PHP-GTK CVS 21/02/2007 build with :
&gt; ./configure
&gt;
&gt; And with this config the new GtkEventBox crash
&gt;
&gt; With PHP-GTK CVS 05/11/2005 All works fine.
&gt;
&gt;
&gt; I build GTK+ with debug but in stack trace i only get :
&gt;
&gt; Starting program: /bin/php -n test.php
&gt; [Thread debugging using libthread_db enabled]
&gt; [New Thread -1213572928 (LWP 6808)]
&gt;
&gt; Program received signal SIGSEGV, Segmentation fault.
&gt; [Switching to Thread -1213572928 (LWP 6808)]
&gt; 0xb76b8004 in ?? ()
&gt; (gdb) bt
&gt; #0  0xb76b8004 in ?? ()
&gt; #1  0x218145bf in ?? ()
&gt; #2  0xa6fbf008 in ?? ()
&gt; ...........
&gt; #3471 0x6e69622f in ?? ()
&gt; #3472 0x7068702f in ?? ()
&gt; #3473 0x00000000 in ?? ()
&gt;
&gt; Cannot access memory at address 0xbfd35fff
&gt;
&gt;
&gt; See you soon i hope ;o)
&gt;
&gt; Escuder Nicolas
&gt;
&gt; -----Message d'origine-----
&gt; De : Andrei Zmievski [mailto:andrei@gravitonic.com]
&gt; Envoyé : samedi 27 janvier 2007 19:53
&gt; À : PHP-GTK Dev list
&gt; Objet : Re: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash
&gt;
&gt; Can anyone else reproduce this?	
&gt;
&gt; -Andrei
&gt;
&gt;
&gt; On Jan 26, 2007, at 7:38 PM, n dot escuder at intra-links dot com 
&gt; wrote:
&gt;
&gt;&gt;  ID:               39539
&gt;&gt;  User updated by:  n dot escuder at intra-links dot com
&gt;&gt;  Reported By:      n dot escuder at intra-links dot com
&gt;&gt; -Status:           No Feedback
&gt;&gt; +Status:           Open
&gt;&gt;  Bug Type:         PHP-GTK related
&gt;&gt;  Operating System: Linux
&gt;&gt;  PHP Version:      5.2.0
&gt;&gt;  New Comment:
&gt;&gt;
&gt;&gt; Sorry for the long time of the answer.
&gt;&gt;
&gt;&gt; So i try with php 5.2.0 and i checkout the lastest version of php_gtk
&gt;&gt; and it always crash... i don't known why...
&gt;&gt;
&gt;&gt; gdb backtrace :
&gt;&gt; #178 0xbeeff400 in ?? ()
&gt;&gt; #179 0x001000b7 in ?? ()
&gt;&gt; #180 0xb76a3600 in zim_GtkWidget_show_now () from
&gt;&gt; /usr/lib/php/extensions/php_gtk2.so
&gt;&gt; Previous frame inner to this frame (corrupt stack?)
&gt;&gt;
&gt;&gt; X11R7 Version 7.1
&gt;&gt; GTK+ Version 2.10.6
&gt;&gt;
&gt;&gt; For information i actually use and old php_gtk2 checkout version that
&gt;&gt; work fine.
&gt;&gt;
&gt;&gt; If you want i can give you an ssh access.
&gt;&gt;
&gt;&gt; See You
&gt;&gt;
&gt;&gt;
&gt;&gt; Previous Comments:
&gt;&gt; ----------------------------------------------------------------------
&gt;&gt; --
&gt;&gt;
&gt;&gt; [2006-12-15 01:00:00] php-gtk-dev at lists dot php dot net
&gt;&gt;
&gt;&gt; No feedback was provided for this bug for over a week, so it is
&gt;&gt; being suspended automatically. If you are able to provide the
&gt;&gt; information that was originally requested, please do so and change
&gt;&gt; the status of the bug back to "Open".
&gt;&gt;
&gt;&gt; ----------------------------------------------------------------------
&gt;&gt; --
&gt;&gt;
&gt;&gt; [2006-12-07 05:02:09] andrei@php.net
&gt;&gt;
&gt;&gt; Please try using this CVS snapshot:
&gt;&gt;
&gt;&gt;   http://snaps.php.net/php4-STABLE-latest.tar.gz
&gt;&gt;
&gt;&gt; For Windows:
&gt;&gt;
&gt;&gt;   http://snaps.php.net/win32/php4-win32-STABLE-latest.zip
&gt;&gt;
&gt;&gt; I cannot reproduce this with PHP-GTK CVS and PHP 5.2.0RC4-dev.
&gt;&gt;
&gt;&gt; ----------------------------------------------------------------------
&gt;&gt; --
&gt;&gt;
&gt;&gt; [2006-11-16 21:57:27] n dot escuder at intra-links dot com
&gt;&gt;
&gt;&gt; Description:
&gt;&gt; ------------
&gt;&gt; php gtk 2 from CVS crash when creating an object of type GtkEventBox()
&gt;&gt;
&gt;&gt; Reproduce code:
&gt;&gt; ---------------
&gt;&gt; new GtkEventBox();
&gt;&gt;
&gt;&gt; Expected result:
&gt;&gt; ----------------
&gt;&gt; None
&gt;&gt;
&gt;&gt; Actual result:
&gt;&gt; --------------
&gt;&gt; Crash the program
&gt;&gt;
&gt;&gt;
&gt;&gt; ----------------------------------------------------------------------
&gt;&gt; --
&gt;&gt;
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; Edit this bug report at http://bugs.php.net/?id=39539&amp;edit=1
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070222171952</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-02-22 17:19:52-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash</subject><body>

Did you also rebuild Gtk+ with -g -O0?

-Andrei

On Feb 21, 2007, at 11:08 AM, Escuder Nicolas wrote:

&gt;
&gt; The backtrace of my last message was false...
&gt;
&gt; This was not the backtrace of the crash.
&gt;
&gt; I retry but i always get backtrace with "??" as function name...
&gt;
&gt; So i was build PHP / GTK / PHP-GTK with -g -O0 so the crash do not  
&gt; append in
&gt; them i think.
&gt;
&gt;
&gt;
&gt; Escuder Nicolas
&gt;
&gt; -----Message d'origine-----
&gt; De : Escuder Nicolas [mailto:n.escuder@intra-links.com]
&gt; Envoyé : mercredi 21 février 2007 18:39
&gt; À : php-gtk-dev@lists.php.net
&gt; Objet : RE: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash
&gt;
&gt; Here you can find the backtrace :
&gt;
&gt; 0xb7b2bfb8 in strcmp () from /lib/libc.so.6
&gt; (gdb) bt
&gt; #0  0xb7b2bfb8 in strcmp () from /lib/libc.so.6
&gt; #1  0x081e641e in zend_do_perform_implementation_check ()
&gt; #2  0x081e6a48 in do_inherit_method_check ()
&gt; #3  0x0820546b in zend_hash_replace_checker_wrapper ()
&gt; #4  0x082054b0 in zend_hash_merge_ex ()
&gt; #5  0x081e7a49 in zend_do_implement_interface ()
&gt; #6  0x08200c9d in zend_class_implements ()
&gt; #7  0xb77b1402 in phpg_gtk_register_classes ()
&gt;    from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
&gt; #8  0xb770a356 in php_gtk_xinit_gtk_plus ()
&gt;    from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
&gt; #9  0xb77cbaed in php_gtk_startup_extension ()
&gt;    from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
&gt; #10 0xb77cbbca in php_gtk_startup_extensions ()
&gt;    from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
&gt; #11 0xb77d6407 in php_gtk_startup_all_extensions ()
&gt;    from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
&gt; #12 0xb77cb907 in zm_activate_gtk ()
&gt;    from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
&gt; #13 0x0813b132 in php_dl ()
&gt; #14 0x0813ad3a in zif_dl ()
&gt; #15 0x0821ac4f in zend_do_fcall_common_helper_SPEC ()
&gt; #16 0x0821fc3a in ZEND_DO_FCALL_SPEC_CONST_HANDLER ()
&gt; #17 0x0821a7f2 in execute ()
&gt; #18 0x081fb0e2 in zend_execute_scripts ()
&gt; #19 0x081b3fbe in php_execute_script ()
&gt; #20 0x082676e6 in main ()
&gt;
&gt; Escuder Nicolas
&gt;
&gt; -----Message d'origine-----
&gt; De : Andrei Zmievski [mailto:andrei@gravitonic.com]
&gt; Envoyé : mercredi 21 février 2007 18:14
&gt; À : Escuder Nicolas
&gt; Cc : php-gtk-dev@lists.php.net
&gt; Objet : Re: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash
&gt;
&gt; You don't have any debug info in your binaries. Can you recompile with
&gt; CFLAGS=-g -O0 ? Just insert them before ./configure in both cases.
&gt;
&gt; -Andrei
&gt;
&gt; On Feb 21, 2007, at 8:09 AM, Escuder Nicolas wrote:
&gt;
&gt;&gt;
&gt;&gt; Hello,
&gt;&gt;
&gt;&gt; More informations :
&gt;&gt;
&gt;&gt; GTK+ 2.10.9 build with :
&gt;&gt; ./configure --prefix=/usr \
&gt;&gt; 	--sysconfdir=/etc \
&gt;&gt; 	--with-jpeg \
&gt;&gt; 	--with-tiff \
&gt;&gt; 	--enable-xinerama \
&gt;&gt; 	--with-libpng \
&gt;&gt; 	--with-gdktarget=x11 \
&gt;&gt; 	--with-xinput
&gt;&gt;
&gt;&gt; PHP 5.2.1 build with :
&gt;&gt; ./configure --prefix=/usr \
&gt;&gt;       --sysconfdir=/etc \
&gt;&gt;       --with-config-file-path=/etc \
&gt;&gt;       --with-zlib-dir=/usr/lib \
&gt;&gt;       --with-pear \
&gt;&gt;       --enable-dom \
&gt;&gt;       --enable-overload \
&gt;&gt;       --enable-pcntl \
&gt;&gt;       --enable-pdo \
&gt;&gt;       --enable-simplexml \
&gt;&gt;       --enable-zip \
&gt;&gt;       --enable-json \
&gt;&gt;       --with-bz2=shared \
&gt;&gt;       --with-curl=shared \
&gt;&gt;       --with-fam=shared \
&gt;&gt;       --with-gettext=shared \
&gt;&gt;       --with-iconv=shared \
&gt;&gt;       --with-imap=shared \
&gt;&gt;       --with-imap-ssl=shared \
&gt;&gt;       --with-mysql=shared \
&gt;&gt;       --with-openssl=shared \
&gt;&gt;       --with-pdo-mysql=shared \
&gt;&gt;       --with-pdo-sqlite=/usr \
&gt;&gt;       --with-xml=shared \
&gt;&gt;       --with-simplexml=shared \
&gt;&gt;       --with-xmlreader=shared \
&gt;&gt;       --with-xmlwriter=shared \
&gt;&gt;       --enable-bcmath=shared \
&gt;&gt;       --enable-calendar=shared \
&gt;&gt;       --enable-ctype=shared \
&gt;&gt;       --enable-exif=shared \
&gt;&gt;       --enable-ftp=shared \
&gt;&gt;       --enable-hash=shared \
&gt;&gt;       --enable-mbstring=shared \
&gt;&gt;       --enable-sockets=shared \
&gt;&gt;       --enable-tokenizer=shared \
&gt;&gt;       --enable-xmlreader=shared \
&gt;&gt;       --enable-xmlwriter=shared \
&gt;&gt;       --without-sqlite \
&gt;&gt;       --disable-cgi
&gt;&gt;
&gt;&gt; PHP-GTK CVS 21/02/2007 build with :
&gt;&gt; ./configure
&gt;&gt;
&gt;&gt; And with this config the new GtkEventBox crash
&gt;&gt;
&gt;&gt; With PHP-GTK CVS 05/11/2005 All works fine.
&gt;&gt;
&gt;&gt;
&gt;&gt; I build GTK+ with debug but in stack trace i only get :
&gt;&gt;
&gt;&gt; Starting program: /bin/php -n test.php
&gt;&gt; [Thread debugging using libthread_db enabled]
&gt;&gt; [New Thread -1213572928 (LWP 6808)]
&gt;&gt;
&gt;&gt; Program received signal SIGSEGV, Segmentation fault.
&gt;&gt; [Switching to Thread -1213572928 (LWP 6808)]
&gt;&gt; 0xb76b8004 in ?? ()
&gt;&gt; (gdb) bt
&gt;&gt; #0  0xb76b8004 in ?? ()
&gt;&gt; #1  0x218145bf in ?? ()
&gt;&gt; #2  0xa6fbf008 in ?? ()
&gt;&gt; ...........
&gt;&gt; #3471 0x6e69622f in ?? ()
&gt;&gt; #3472 0x7068702f in ?? ()
&gt;&gt; #3473 0x00000000 in ?? ()
&gt;&gt;
&gt;&gt; Cannot access memory at address 0xbfd35fff
&gt;&gt;
&gt;&gt;
&gt;&gt; See you soon i hope ;o)
&gt;&gt;
&gt;&gt; Escuder Nicolas
&gt;&gt;
&gt;&gt; -----Message d'origine-----
&gt;&gt; De : Andrei Zmievski [mailto:andrei@gravitonic.com]
&gt;&gt; Envoyé : samedi 27 janvier 2007 19:53
&gt;&gt; À : PHP-GTK Dev list
&gt;&gt; Objet : Re: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash
&gt;&gt;
&gt;&gt; Can anyone else reproduce this?	
&gt;&gt;
&gt;&gt; -Andrei
&gt;&gt;
&gt;&gt;
&gt;&gt; On Jan 26, 2007, at 7:38 PM, n dot escuder at intra-links dot com
&gt;&gt; wrote:
&gt;&gt;
&gt;&gt;&gt;  ID:               39539
&gt;&gt;&gt;  User updated by:  n dot escuder at intra-links dot com
&gt;&gt;&gt;  Reported By:      n dot escuder at intra-links dot com
&gt;&gt;&gt; -Status:           No Feedback
&gt;&gt;&gt; +Status:           Open
&gt;&gt;&gt;  Bug Type:         PHP-GTK related
&gt;&gt;&gt;  Operating System: Linux
&gt;&gt;&gt;  PHP Version:      5.2.0
&gt;&gt;&gt;  New Comment:
&gt;&gt;&gt;
&gt;&gt;&gt; Sorry for the long time of the answer.
&gt;&gt;&gt;
&gt;&gt;&gt; So i try with php 5.2.0 and i checkout the lastest version of php_gtk
&gt;&gt;&gt; and it always crash... i don't known why...
&gt;&gt;&gt;
&gt;&gt;&gt; gdb backtrace :
&gt;&gt;&gt; #178 0xbeeff400 in ?? ()
&gt;&gt;&gt; #179 0x001000b7 in ?? ()
&gt;&gt;&gt; #180 0xb76a3600 in zim_GtkWidget_show_now () from
&gt;&gt;&gt; /usr/lib/php/extensions/php_gtk2.so
&gt;&gt;&gt; Previous frame inner to this frame (corrupt stack?)
&gt;&gt;&gt;
&gt;&gt;&gt; X11R7 Version 7.1
&gt;&gt;&gt; GTK+ Version 2.10.6
&gt;&gt;&gt;
&gt;&gt;&gt; For information i actually use and old php_gtk2 checkout version that
&gt;&gt;&gt; work fine.
&gt;&gt;&gt;
&gt;&gt;&gt; If you want i can give you an ssh access.
&gt;&gt;&gt;
&gt;&gt;&gt; See You
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Previous Comments:
&gt;&gt;&gt; --------------------------------------------------------------------- 
&gt;&gt;&gt; -
&gt;&gt;&gt; --
&gt;&gt;&gt;
&gt;&gt;&gt; [2006-12-15 01:00:00] php-gtk-dev at lists dot php dot net
&gt;&gt;&gt;
&gt;&gt;&gt; No feedback was provided for this bug for over a week, so it is
&gt;&gt;&gt; being suspended automatically. If you are able to provide the
&gt;&gt;&gt; information that was originally requested, please do so and change
&gt;&gt;&gt; the status of the bug back to "Open".
&gt;&gt;&gt;
&gt;&gt;&gt; --------------------------------------------------------------------- 
&gt;&gt;&gt; -
&gt;&gt;&gt; --
&gt;&gt;&gt;
&gt;&gt;&gt; [2006-12-07 05:02:09] andrei@php.net
&gt;&gt;&gt;
&gt;&gt;&gt; Please try using this CVS snapshot:
&gt;&gt;&gt;
&gt;&gt;&gt;   http://snaps.php.net/php4-STABLE-latest.tar.gz
&gt;&gt;&gt;
&gt;&gt;&gt; For Windows:
&gt;&gt;&gt;
&gt;&gt;&gt;   http://snaps.php.net/win32/php4-win32-STABLE-latest.zip
&gt;&gt;&gt;
&gt;&gt;&gt; I cannot reproduce this with PHP-GTK CVS and PHP 5.2.0RC4-dev.
&gt;&gt;&gt;
&gt;&gt;&gt; --------------------------------------------------------------------- 
&gt;&gt;&gt; -
&gt;&gt;&gt; --
&gt;&gt;&gt;
&gt;&gt;&gt; [2006-11-16 21:57:27] n dot escuder at intra-links dot com
&gt;&gt;&gt;
&gt;&gt;&gt; Description:
&gt;&gt;&gt; ------------
&gt;&gt;&gt; php gtk 2 from CVS crash when creating an object of type  
&gt;&gt;&gt; GtkEventBox()
&gt;&gt;&gt;
&gt;&gt;&gt; Reproduce code:
&gt;&gt;&gt; ---------------
&gt;&gt;&gt; new GtkEventBox();
&gt;&gt;&gt;
&gt;&gt;&gt; Expected result:
&gt;&gt;&gt; ----------------
&gt;&gt;&gt; None
&gt;&gt;&gt;
&gt;&gt;&gt; Actual result:
&gt;&gt;&gt; --------------
&gt;&gt;&gt; Crash the program
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; --------------------------------------------------------------------- 
&gt;&gt;&gt; -
&gt;&gt;&gt; --
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; -- 
&gt;&gt;&gt; Edit this bug report at http://bugs.php.net/?id=39539&amp;edit=1
&gt;&gt;&gt;
&gt;&gt;&gt; -- 
&gt;&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;&gt;
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070210074811</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-02-10 07:48:11-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Installing GTK on Ununti</subject><body>

Hi Charles,

&gt; Your making it pretty hard to help with the documentation. Heres some
&gt; wiki text on how to install on ubuntu. There are errors in your linux
&gt; install tutorial.

Rather than sharing such objective evaluation; please point out
_specifically_ what errors are there in the installation tutorial and
_why_ you are finding it hard to help with the documentation. We will be
glad to help you out.

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070130165430</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-01-30 16:54:30-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

&gt; So we're splitting the development now?

Uh no, what gives you that idea? I didn't want to put those patches in
the real CVS (once bitten, twice shy); so I put them somewhere else.
When these patches are considered stable enough to be in the main tree;
it'll go in.

I remember asking in a mail sometime ago (I quote):

&gt; Andrei, I've looked through this and can commit a set of patches that
&gt; would allow us to build against the latest detected version of Gtk+ on
&gt; the user's system (which can also be overridden with the ./configure
&gt; switch).

I received no green signal from you on this, so I assumed you didn't
want 2.10 support to go in yet.

If you'd prefer we develop in the main CVS; I don't mind at all; it's
what I've been wanting all this while ;)

And please, don't jump to conclusions; you should know to judge who's
loyalties lay where :)

Cheers,

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130165658</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-30 16:56:58-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

That's been happening for over a year...

----- Original Message ----- 
From: "Andrei Zmievski" &lt;andrei@gravitonic.com&gt;
To: "Anant Narayanan" &lt;anant@kix.in&gt;
Cc: &lt;php-gtk-general@lists.php.net&gt;; "PHP-GTK dev" 
&lt;php-gtk-dev@lists.php.net&gt;
Sent: Tuesday, January 30, 2007 4:33 PM
Subject: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE


&gt; So we're splitting the development now?
&gt;
&gt; -Andrei
&gt;
&gt; On Jan 30, 2007, at 4:38 AM, Anant Narayanan wrote:
&gt;
&gt;&gt; Hi all,
&gt;&gt;
&gt;&gt; If you're one of the impatient; and can't wait to try out the
&gt;&gt; bleeding-edge widgets that are now available for PHP-GTK; the
&gt;&gt; PHP-GTK-EDGE repository is for you.
&gt;&gt;
&gt;&gt; You can check out a copy from:
&gt;&gt;
&gt;&gt; svn://svn.cweiske.de/php-gtk-edge
&gt;&gt;
&gt;&gt; (WebSVN:
&gt;&gt; http://svn.cweiske.de/listing.php?repname=php-gtk- edge&amp;path=%2Ftrunk%2F)
&gt;&gt;
&gt;&gt; This version of PHP-GTK includes:
&gt;&gt;
&gt;&gt;  * Gtk+ 2.8 and 2.10 support (thanks to Elizabeth); which means you can
&gt;&gt; build against these versions of Gtk+ and use widgets like GtkAssistant
&gt;&gt; and the much wanted GtkTrayIcon.
&gt;&gt;
&gt;&gt;  * GtkSpell: spell checking extension for GtkTextView (and 
&gt;&gt; GtkSourceView)
&gt;&gt;
&gt;&gt;  * GtkExtras: Specialized widgets like GtkSheet and GtkPlot.
&gt;&gt;
&gt;&gt; in addition to everything that's already in php-gtk-proper (mozembed,
&gt;&gt; sourceview and scintilla; of course)
&gt;&gt;
&gt;&gt; I wanted to include libgnome in the repository too; but unfortunately I
&gt;&gt; can't find a backup of my files yet and the tarball on kix.in doesn't
&gt;&gt; seem to work.
&gt;&gt;
&gt;&gt; This version of PHP-GTK should probably be helpful to all of you who've
&gt;&gt; been asking for GtkExtras and GtkTrayIcon. All feedback is appreciated;
&gt;&gt; and the more positive feedback we get; the sooner all of this will be
&gt;&gt; migrated to the official php-gtk release.
&gt;&gt;
&gt;&gt; All of the code in the repository currently works only on *nix systems
&gt;&gt; and a simple `./buildconf &amp;&amp; ./configure &amp;&amp; make install' should do.  All
&gt;&gt; extensions are enabled by default; so it will simply pick what you
&gt;&gt; libraries you have your system and build support for it. If you need to
&gt;&gt; explicitly disable an extension; pass the --disable-whatever flag to  the
&gt;&gt; configure statement.
&gt;&gt;
&gt;&gt; For windows users; Elizabeth is providing builds on
&gt;&gt; http://www.callicore.net/php-gtk2/ I'll work with her to get those
&gt;&gt; builds into php-gtk-edge soon.
&gt;&gt;
&gt;&gt; DISCLAIMER:
&gt;&gt; I am not responsible if your computer explodes while compiling
&gt;&gt; php-gtk-edge ;) Basically, this version of php-gtk is very experimental
&gt;&gt; and is expected to be broken from time to time. Use with care!
&gt;&gt;
&gt;&gt; There are some screenshots for a few of the widgets at
&gt;&gt; http://www.kix.in/php-gtk2/
&gt;&gt;
&gt;&gt; Cheers,
&gt;&gt;
&gt;&gt; --
&gt;&gt; Anant
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; PHP-GTK General Mailing List (http://gtk.php.net/)
&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070210171201</emailId><senderName>xxoes</senderName><senderEmail>xxoes@nw7.de</senderEmail><timestampReceived>2007-02-10 17:12:01-0400</timestampReceived><subject>[PHP-GTK-DEV] win32 compiling problems</subject><body>

1. static void phpg_file_filter_add_custom_marshal_add_file(const gchar 
*filename, int flags, int flag, zval *php_filter_info)

missing TSRMLS_FETCH();
required for "cp = phpg_from_utf8(fn, strlen(fn), &amp;cp_len, &amp;free_cp 
TSRMLS_CC);"


2. static PHP_METHOD(GdkWindow, set_icon_list)
GList *pixbufs;
replace:
GList *pixbufs = 0;

required for "pixbufs = g_list_prepend(pixbufs, pixbuf);"

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070214091302</emailId><senderName>xxoes</senderName><senderEmail>xxoes@nw7.de</senderEmail><timestampReceived>2007-02-14 09:13:02-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] win32 compiling problems</subject><body>

missing TSRMLS_FETCH();  i can not call phpg_from_utf8 without "TSRMLS_CC".

%%
override gtk_file_filter_add_custom
static void phpg_file_filter_add_custom_marshal_add_file(const gchar 
*filename, int flags, int flag, zval *php_filter_info)
{
    gchar *cp = NULL;
    gchar *fn = NULL;
    gsize cp_len = 0;
    zend_bool free_cp = FALSE;
    *TSRMLS_FETCH(); *

    if (filename &amp;&amp; (flags &amp; flag)
    ) {
        fn = g_filename_to_utf8(filename, strlen(filename), NULL, NULL, 
NULL);
        cp = phpg_from_utf8(fn, strlen(fn), &amp;cp_len, &amp;free_cp TSRMLS_CC);
        if (cp) {
            add_next_index_string(php_filter_info, (char *)cp, 1);
        } else {
            php_error(E_WARNING, "%s::%s(): could not convert return 
value from UTF-8", get_active_class_name(NULL TSRMLS_CC), 
get_active_function_name(TSRMLS_C));
        }
        if (free_cp)
            g_free(cp);
    } else {
        add_next_index_null(php_filter_info);
    }
}

mfg xxoes

xxoes schrieb:
&gt; 1. static void phpg_file_filter_add_custom_marshal_add_file(const 
&gt; gchar *filename, int flags, int flag, zval *php_filter_info)
&gt;
&gt; missing TSRMLS_FETCH();
&gt; required for "cp = phpg_from_utf8(fn, strlen(fn), &amp;cp_len, &amp;free_cp 
&gt; TSRMLS_CC);"
&gt;
&gt;
&gt; 2. static PHP_METHOD(GdkWindow, set_icon_list)
&gt; GList *pixbufs;
&gt; replace:
&gt; GList *pixbufs = 0;
&gt;
&gt; required for "pixbufs = g_list_prepend(pixbufs, pixbuf);"
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228011428</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-02-28 01:14:28-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] win32 compiling problems</subject><body>

xxoes wrote:
&gt; missing TSRMLS_FETCH();  i can not call phpg_from_utf8 without "TSRMLS_CC".

Nobody's fixed this yet...here's a "patch" for it - can I get an ok to 
put it in cvs (so the ts version will build again..)

["gtk.overrides.patch" (text/plain)]

Index: gtk.overrides
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/gtk.overrides,v
retrieving revision 1.243
diff -u -r1.243 gtk.overrides
--- gtk.overrides	6 Feb 2007 18:18:11 -0000	1.243
+++ gtk.overrides	28 Feb 2007 01:11:36 -0000
@@ -2789,6 +2789,7 @@
     gchar *fn = NULL;
     gsize cp_len = 0;
     zend_bool free_cp = FALSE;
+    TSRMLS_FETCH();
 
     if (filename &amp;&amp; (flags &amp; flag)
     ) {



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070130172958</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-01-30 17:29:58-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

&gt; That's been happening for over a year...

What? Where?

I re-iterate: the sole purpose of the "edge" repository was to make
available to the public some widgets that they've been wanting for a
while; especially GtkTrayIcon and GtkSheet. I could have committed those
to the main repository as easily; but Andrei never actually said "Go
ahead", which is why I didn't.

If you want 2.8/2.10 and all those extensions in the main CVS; just say
the word; I would be more than happy to do so! Last I heard however, the
attitude was "Oh no, not another extension please!" :)

Are we all happy now or is there more explanation to be done?

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130174453</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-30 17:44:53-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

&gt;&gt; That's been happening for over a year...
&gt;
&gt; What? Where?

Well, there's this 'edge' site, and there's the Gnope site (which as far as 
I'm aware is still distributing software we can't legally distribute), and 
there's Elizabeth's site (which is needed currently) and Frank's upcoming 
site (which will end the need for Elizabeth's). The only reason we need the 
last two is there's no good way to run PHP-GTK snaps as part of the main 
php.net snaps site.

&gt; I re-iterate: the sole purpose of the "edge" repository was to make
&gt; available to the public some widgets that they've been wanting for a
&gt; while; especially GtkTrayIcon and GtkSheet. I could have committed those
&gt; to the main repository as easily; but Andrei never actually said "Go
&gt; ahead", which is why I didn't.

I don't even remember GtkExtra being mentioned until last week...

&gt; If you want 2.8/2.10 and all those extensions in the main CVS; just say
&gt; the word; I would be more than happy to do so! Last I heard however, the
&gt; attitude was "Oh no, not another extension please!" :)

That was because the push is supposed to be towards completing the GTK+ 
wrapper, so that we can release a new version. People normally wait for the 
new version to come out, unless they're developers, and then they normally 
work with CVS directly.

There are real problems with having a lot of separate distributions around. 
For example, we had someone last week who can't make PHP-GTK run under x64, 
but I don't know if there's actually a PHP-GTK bug there that needs 
resolving or not, because he was using the Gnope installer. If you want to 
make extensions available, it'd be best to put them into the project CVS so 
we all know what the code looks like. And if it's illegal one way or 
another, you really shouldn't be distributing it anyway.

- Steph

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130181730</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-30 18:17:30-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

&gt;&gt; Well, there's this 'edge' site, and there's the Gnope site (which as far
&gt;&gt; as I'm aware is still distributing software we can't legally
&gt;&gt; distribute), and there's Elizabeth's site (which is needed currently)
&gt;&gt; and Frank's upcoming site (which will end the need for Elizabeth's). The
&gt;&gt; only reason we need the last two is there's no good way to run PHP-GTK
&gt;&gt; snaps as part of the main php.net snaps site.
&gt;
&gt; All of them are present for a reason: it makes up for some deficiency or
&gt; the other in the main PHP-GTK. PHP-GTK wouldn't even be half as popular
&gt; as it is now if it weren't for Gnope. You have to admit; getting PHP-GTK
&gt; to run on Windows wasn't that easy before Gnope.

My objection to Gnope is purely because it's on a separate site and there's 
no transparency there. I lie; the other objection is that the Gnope site 
makes things available that are not part of the PHP-GTK project and calls 
them PHP-GTK.

&gt;&gt; I don't even remember GtkExtra being mentioned until last week...
&gt;
&gt; Not on the public list; but I've received requests for these extensions
&gt; off-list for ages now.

So talk with Andrei about putting them into CVS?

&gt;&gt; That was because the push is supposed to be towards completing the GTK+
&gt;&gt; wrapper, so that we can release a new version. People normally wait for
&gt;&gt; the new version to come out, unless they're developers, and then they
&gt;&gt; normally work with CVS directly.
&gt;
&gt; I understand that we're all supposed to be working on API completion at
&gt; this time; but I can very frankly say that I'm doing the best I can.
&gt; Sometimes you need motivation to work; and writing an override for a
&gt; deprecated widget like GtkList (which probably isn't going to be used
&gt; anyway) isn't as exciting as wrapping GtkSpell. "Work on API completion
&gt; or else don't work at all" is a pretty hard-line approach IMHO. Let the
&gt; extensions be in CVS; it couldn't hurt anyone.

Who's stopping them? That whole conversation was ages ago...

&gt;&gt; There are real problems with having a lot of separate distributions
&gt;&gt; around. For example, we had someone last week who can't make PHP-GTK run
&gt;&gt; under x64, but I don't know if there's actually a PHP-GTK bug there that
&gt;&gt; needs resolving or not, because he was using the Gnope installer. If you
&gt;&gt; want to make extensions available, it'd be best to put them into the
&gt;&gt; project CVS so we all know what the code looks like. And if it's illegal
&gt;&gt; one way or another, you really shouldn't be distributing it anyway.
&gt;
&gt; Like I said, I would love to put those extensions into CVS. I just
&gt; feared another, I'll be frank here: "discuss before you commit else I'll
&gt; revoke your CVS" message. The "discussion" never even happens. Last time
&gt; I asked for libgnome to be put into CVS: no reply; and consequently no
&gt; commit. It doesn't take long to say "yes", unless of course you really
&gt; don't want it to go in.

I'm not in charge of what does or doesn't go into CVS. I do know I'd be wary 
of libgnome, personally... but that's an OS issue, is all.

&gt; I'll withdraw php-gtk-edge as soon as I have the go-ahead for syncing
&gt; php-gtk-cvs with edge. The following patches are in it:
&gt;
&gt; * Support for Gtk+ 2.8 and 2.10
&gt; * Corrected version of GtkPlug override

These I'm supposed to have reviewed yesterday... they're Elizabeth's, no?

&gt; * The GtkSpell and GtkExtras extensions
&gt;
&gt; I've tested them all personally; and they work. If you trust me, you'll
&gt; let me commit them. I've never made a commit to php-gtk-cvs without
&gt; testing that the change works on my computer first (both on OS X and 
&gt; Linux).
&gt;
&gt; I said before, the full release can still be based on 2.6; but people
&gt; out there need to be able to atleast compile with 2.8 or 2.10 if they
&gt; wish to.
&gt;
&gt; Oh, and there's nothing "illegal" about php-gtk-edge; and I'm not aware
&gt; of what's illegal about gnope either. Care to share what's that about?

See archives. There's a modified library in there somewhere that's wrapped 
as part of Gnope's distro. The code needs to be either made public or 
offered back to the original author, preferably both, and it should be made 
clear that it's a modification. (I wasn't 'having a go' at edge for that.)

- Steph 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130182008</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-01-30 18:20:08-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

&gt; Well, there's this 'edge' site, and there's the Gnope site (which as far
&gt; as I'm aware is still distributing software we can't legally
&gt; distribute), and there's Elizabeth's site (which is needed currently)
&gt; and Frank's upcoming site (which will end the need for Elizabeth's). The
&gt; only reason we need the last two is there's no good way to run PHP-GTK
&gt; snaps as part of the main php.net snaps site.

All of them are present for a reason: it makes up for some deficiency or
the other in the main PHP-GTK. PHP-GTK wouldn't even be half as popular
as it is now if it weren't for Gnope. You have to admit; getting PHP-GTK
to run on Windows wasn't that easy before Gnope.


&gt; I don't even remember GtkExtra being mentioned until last week...

Not on the public list; but I've received requests for these extensions
off-list for ages now.

&gt; That was because the push is supposed to be towards completing the GTK+
&gt; wrapper, so that we can release a new version. People normally wait for
&gt; the new version to come out, unless they're developers, and then they
&gt; normally work with CVS directly.

I understand that we're all supposed to be working on API completion at
this time; but I can very frankly say that I'm doing the best I can.
Sometimes you need motivation to work; and writing an override for a
deprecated widget like GtkList (which probably isn't going to be used
anyway) isn't as exciting as wrapping GtkSpell. "Work on API completion
or else don't work at all" is a pretty hard-line approach IMHO. Let the
extensions be in CVS; it couldn't hurt anyone.

&gt; There are real problems with having a lot of separate distributions
&gt; around. For example, we had someone last week who can't make PHP-GTK run
&gt; under x64, but I don't know if there's actually a PHP-GTK bug there that
&gt; needs resolving or not, because he was using the Gnope installer. If you
&gt; want to make extensions available, it'd be best to put them into the
&gt; project CVS so we all know what the code looks like. And if it's illegal
&gt; one way or another, you really shouldn't be distributing it anyway.

Like I said, I would love to put those extensions into CVS. I just
feared another, I'll be frank here: "discuss before you commit else I'll
revoke your CVS" message. The "discussion" never even happens. Last time
I asked for libgnome to be put into CVS: no reply; and consequently no
commit. It doesn't take long to say "yes", unless of course you really
don't want it to go in.

I'll withdraw php-gtk-edge as soon as I have the go-ahead for syncing
php-gtk-cvs with edge. The following patches are in it:

* Support for Gtk+ 2.8 and 2.10
* Corrected version of GtkPlug override
* The GtkSpell and GtkExtras extensions

I've tested them all personally; and they work. If you trust me, you'll
let me commit them. I've never made a commit to php-gtk-cvs without
testing that the change works on my computer first (both on OS X and Linux).

I said before, the full release can still be based on 2.6; but people
out there need to be able to atleast compile with 2.8 or 2.10 if they
wish to.

Oh, and there's nothing "illegal" about php-gtk-edge; and I'm not aware
of what's illegal about gnope either. Care to share what's that about?

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130184927</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-01-30 18:49:27-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

&gt;&gt; * Support for Gtk+ 2.8 and 2.10
&gt;&gt; * Corrected version of GtkPlug override
&gt; 
&gt; These I'm supposed to have reviewed yesterday... they're Elizabeth's, no?

Yep. GtkPlug slightly modified though.

&gt; See archives. There's a modified library in there somewhere that's
&gt; wrapped as part of Gnope's distro. The code needs to be either made
&gt; public or offered back to the original author, preferably both, and it
&gt; should be made clear that it's a modification. (I wasn't 'having a go'
&gt; at edge for that.)

Christian should really release that code then.

Now that I understand the situation; I'll leave it to Andrei to give the
final word on what goes in and what doesn't. I'm not even asking for
libgnome; just 2.8, 2.10, GtkSpell and GtkExtras.

Also, it would be nice to know the policy that we're going to follow
from now on. If someone has something new to put into PHP-GTK does he/she:

a) Commit directly if he/she can?
b) Post to mailing list with tarball so that it can be "discussed",
which basically means "never"?
c) Provide it to the general public by other means: gnope, edge, whatever?

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130185530</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-01-30 18:55:30-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

&gt; Christian should really release that code then.

A bit off topic but... - That was a "port" of gtksourceview to get it 
compiling on windows by  xxOes - and it is available on his site (gnope 
should probably provide a link somewhere - had to troll the php-gtk-dev 
list for a link).  Basically it involved writing in all the dllexport 
declarations by hand and creating a msvc project for it - this shouldn't 
be needed anymore though because tml (Tor Lillqvist) did some heavy 
lifting to get gtksourceview ported to windows properly as of version 
1.5.5 - mingw/msys will compile it fine, just turn off the libgnomeprint 
stuff in configure (since it will be moving to 2.10's gtk print system 
anyway) - you can even get precompiled windows binaries for it on 
ftp.gnome.org (along with the rest of gnome if you're so inclined)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130185840</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-30 18:58:40-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

Right, so now we can have GtkSouceView for the first time, as of 1.5.5.

That 'port' was never offered here.

----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: &lt;php-gtk-dev@lists.php.net&gt;
Sent: Tuesday, January 30, 2007 6:55 PM
Subject: Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE


&gt;&gt; Christian should really release that code then.
&gt; 
&gt; A bit off topic but... - That was a "port" of gtksourceview to get it 
&gt; compiling on windows by  xxOes - and it is available on his site (gnope 
&gt; should probably provide a link somewhere - had to troll the php-gtk-dev 
&gt; list for a link).  Basically it involved writing in all the dllexport 
&gt; declarations by hand and creating a msvc project for it - this shouldn't 
&gt; be needed anymore though because tml (Tor Lillqvist) did some heavy 
&gt; lifting to get gtksourceview ported to windows properly as of version 
&gt; 1.5.5 - mingw/msys will compile it fine, just turn off the libgnomeprint 
&gt; stuff in configure (since it will be moving to 2.10's gtk print system 
&gt; anyway) - you can even get precompiled windows binaries for it on 
&gt; ftp.gnome.org (along with the rest of gnome if you're so inclined)
&gt; 
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130203030</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-30 20:30:30-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

On Jan 30, 2007, at 8:42 AM, Anant Narayanan wrote:
&gt; Uh no, what gives you that idea? I didn't want to put those patches in
&gt; the real CVS (once bitten, twice shy); so I put them somewhere else.
&gt; When these patches are considered stable enough to be in the main tree;
&gt; it'll go in.

Are you offering patches or full source tree? Because your message made 
it sound like it was the latter. I don't have a problem with patches, 
but having another copy of PHP-GTK source tree, especially one that 
purports to have the latest bleeding edge enhancements, is not 
something I like.

&gt; I remember asking in a mail sometime ago (I quote):
&gt;
&gt;&gt; Andrei, I've looked through this and can commit a set of patches that
&gt;&gt; would allow us to build against the latest detected version of Gtk+ on
&gt;&gt; the user's system (which can also be overridden with the ./configure
&gt;&gt; switch).
&gt;
&gt; I received no green signal from you on this, so I assumed you didn't
&gt; want 2.10 support to go in yet.

I've sent a couple of replies on this topic to php-gtk-dev and did not 
get any response to them either, except from Steph, but was a one liner 
that didn't answer my questions. So we did not come to a consensus on 
the multi-version builds. As for your patches to the build system, I 
haven't seen them yet either. If you can send them to the php-gtk-dev 
mailing list so we can take a look at them, I'd appreciate it.

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130203248</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-30 20:32:48-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

On Jan 30, 2007, at 9:44 AM, Steph Fox wrote:
&gt; Well, there's this 'edge' site, and there's the Gnope site (which as 
&gt; far as I'm aware is still distributing software we can't legally 
&gt; distribute), and there's Elizabeth's site (which is needed currently) 
&gt; and Frank's upcoming site (which will end the need for Elizabeth's). 
&gt; The only reason we need the last two is there's no good way to run 
&gt; PHP-GTK snaps as part of the main php.net snaps site.

Gnope is distributing binary builds. Not the source code.

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130203644</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-30 20:36:44-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

On Jan 30, 2007, at 10:08 AM, Anant Narayanan wrote:
&gt; I understand that we're all supposed to be working on API completion at
&gt; this time; but I can very frankly say that I'm doing the best I can.
&gt; Sometimes you need motivation to work; and writing an override for a
&gt; deprecated widget like GtkList (which probably isn't going to be used
&gt; anyway) isn't as exciting as wrapping GtkSpell. "Work on API completion
&gt; or else don't work at all" is a pretty hard-line approach IMHO. Let the
&gt; extensions be in CVS; it couldn't hurt anyone.

Anant, that was never my attitude. API completion is important, but 
you're free to wrap up other widgets as well. As for the GtkList and 
other deprecated widgets, they should be at the bottom of the list, as 
far as API completeness is concerned. If you take a look at gen_gtk.log 
and gen_gdk.log there are plenty of other interesting functions to 
override..

&gt; I'll withdraw php-gtk-edge as soon as I have the go-ahead for syncing
&gt; php-gtk-cvs with edge. The following patches are in it:
&gt;
&gt; * Support for Gtk+ 2.8 and 2.10

I'd like to finish discussing it first.

&gt; * Corrected version of GtkPlug override

That's fine with me, although the patch I saw had some issues.

&gt; * The GtkSpell and GtkExtras extensions

These are fine with me.

&gt; Oh, and there's nothing "illegal" about php-gtk-edge; and I'm not aware
&gt; of what's illegal about gnope either. Care to share what's that about?

There's nothing illegal about php-gtk-edge, but I think a duplicate of 
the source tree is problematic for a variety of reasons.

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130203739</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-30 20:37:39-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

On Jan 30, 2007, at 10:17 AM, Steph Fox wrote:
&gt; My objection to Gnope is purely because it's on a separate site and 
&gt; there's no transparency there. I lie; the other objection is that the 
&gt; Gnope site makes things available that are not part of the PHP-GTK 
&gt; project and calls them PHP-GTK.

Such as?

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130204005</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-30 20:40:05-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

On Jan 30, 2007, at 10:37 AM, Anant Narayanan wrote:
&gt; Also, it would be nice to know the policy that we're going to follow
&gt; from now on. If someone has something new to put into PHP-GTK does 
&gt; he/she:
&gt;
&gt; a) Commit directly if he/she can?
&gt; b) Post to mailing list with tarball so that it can be "discussed",
&gt; which basically means "never"?
&gt; c) Provide it to the general public by other means: gnope, edge, 
&gt; whatever?

I think b) is the option I'd prefer, even though historically you've 
had trouble with getting feedback. It's something that we have to work 
on and I promise to be more active in this area. Option c) is fine for 
cases where discussion on the list makes it clear that the 
extension/patch is not going to make it in to the main CVS tree.

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070205223146</emailId><senderName>"Lars J."</senderName><senderEmail>cipherz@slamsoft.dk</senderEmail><timestampReceived>2007-02-05 22:31:46-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

Hello,

As I am working with gtksheet, I was missing a function which I wrote 
(nothing really, after some help though..), but here is the patch which 
creates gtksheet-&gt;get_active_cell and it works perfectly here (it was 
made against the newest php-gtk-edge)

hope it can be useful for something :)

Best regards
   Lars

Andrei Zmievski wrote:
&gt; On Jan 30, 2007, at 8:42 AM, Anant Narayanan wrote:
&gt;&gt; Uh no, what gives you that idea? I didn't want to put those patches in
&gt;&gt; the real CVS (once bitten, twice shy); so I put them somewhere else.
&gt;&gt; When these patches are considered stable enough to be in the main tree;
&gt;&gt; it'll go in.
&gt;
&gt; Are you offering patches or full source tree? Because your message 
&gt; made it sound like it was the latter. I don't have a problem with 
&gt; patches, but having another copy of PHP-GTK source tree, especially 
&gt; one that purports to have the latest bleeding edge enhancements, is 
&gt; not something I like.
&gt;
&gt;&gt; I remember asking in a mail sometime ago (I quote):
&gt;&gt;
&gt;&gt;&gt; Andrei, I've looked through this and can commit a set of patches that
&gt;&gt;&gt; would allow us to build against the latest detected version of Gtk+ on
&gt;&gt;&gt; the user's system (which can also be overridden with the ./configure
&gt;&gt;&gt; switch).
&gt;&gt;
&gt;&gt; I received no green signal from you on this, so I assumed you didn't
&gt;&gt; want 2.10 support to go in yet.
&gt;
&gt; I've sent a couple of replies on this topic to php-gtk-dev and did not 
&gt; get any response to them either, except from Steph, but was a one 
&gt; liner that didn't answer my questions. So we did not come to a 
&gt; consensus on the multi-version builds. As for your patches to the 
&gt; build system, I haven't seen them yet either. If you can send them to 
&gt; the php-gtk-dev mailing list so we can take a look at them, I'd 
&gt; appreciate it.
&gt;
&gt; -Andrei
&gt;


["gtkextra-get_active_cell.patch" (text/plain)]

Index: gtkextra.overrides
===================================================================
--- gtkextra.overrides	(revision 5)
+++ gtkextra.overrides	(working copy)
@@ -179,6 +179,24 @@
 #define GTK_PLOT3_D GTK_PLOT3D
 
 %%
+override gtk_sheet_get_active_cell
+PHP_METHOD()
+{
+	gint row, column;
+
+	NOT_STATIC_METHOD();
+
+	if (!php_gtk_parse_args(ZEND_NUM_ARGS(), ""))
+		return;
+
+	gtk_sheet_get_active_cell(GTK_SHEET(PHPG_GOBJECT(this_ptr)), &amp;row, &amp;column);
+
+	array_init(return_value);
+	add_index_long(return_value,0,(long)row);
+	add_index_long(return_value,1,(long)column);
+}
+
+%%
 constants
 %%
 ignore-glob



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070206172149</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-02-06 17:21:49-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkFileFilter patch</subject><body>

Welcome to the wonderful world of encodings. The best you can do here  
is create a couple of wrapper functions that abstract the conversions.

-Andrei


On Feb 6, 2007, at 9:01 AM, Christian Weiske wrote:

&gt; Hi all,
&gt;
&gt;
&gt; Could someone review the patch?
&gt; It works, but I'm not happy with all the duplicated code for utf8
&gt; conversion.
&gt;
&gt; -- 
&gt; Regards/Mit freundlichen Grüßen
&gt; Christian Weiske
&gt; Index: ext/gtk+/gtk.overrides
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/ext/gtk+/gtk.overrides,v
&gt; retrieving revision 1.242
&gt; diff -u -r1.242 gtk.overrides
&gt; --- ext/gtk+/gtk.overrides	5 Feb 2007 16:53:53 -0000	1.242
&gt; +++ ext/gtk+/gtk.overrides	6 Feb 2007 17:00:28 -0000
&gt; @@ -7,6 +7,7 @@
&gt;
&gt;  static void phpg_about_dialog_activate_link_func_marshal  
&gt; (GtkAboutDialog *about, const gchar *link, gpointer data);
&gt;  static gboolean phpg_entry_completion_match_func_marshal  
&gt; (GtkEntryCompletion *completion, const gchar *key, GtkTreeIter  
&gt; *iter, gpointer data);
&gt; +static gboolean phpg_file_filter_add_custom_marshal 
&gt; (GtkFileFilterInfo *filter_info, gpointer data);
&gt;  static gboolean phpg_tree_view_row_separator_func_marshal  
&gt; (GtkTreeModel *model, GtkTreeIter *iter, gpointer data);
&gt;  static void phpg_icon_view_foreach_func_marshal (GtkIconView  
&gt; *icon_view, GtkTreePath *path, gpointer data);
&gt;  static gboolean phpg_toolbar_signal_func_marshal(GtkWidget  
&gt; *widget, gpointer data);
&gt; @@ -2769,6 +2770,253 @@
&gt;
&gt;  %% }}}
&gt;
&gt; +%% {{{ GtkFileFilter
&gt; +
&gt; +%%
&gt; +add-arginfo GtkFileFilter add_custom
&gt; +static
&gt; +ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
&gt; +    ZEND_ARG_INFO(0, flags_needed)
&gt; +    ZEND_ARG_INFO(0, callback)
&gt; +ZEND_END_ARG_INFO();
&gt; +
&gt; +%%
&gt; +override gtk_file_filter_add_custom
&gt; +static gboolean phpg_file_filter_add_custom_marshal 
&gt; (GtkFileFilterInfo *filter_info, gpointer data)
&gt; +{
&gt; +    phpg_cb_data_t *cbd = (phpg_cb_data_t *) data;
&gt; +    zval *retval = NULL;
&gt; +    zval ***args = NULL;
&gt; +    int n_args = 0;
&gt; +    char *callback_name;
&gt; +    zval *php_filter_info = NULL;
&gt; +    gboolean show = TRUE;
&gt; +    gchar *cp = NULL;
&gt; +    gchar *fn = NULL;
&gt; +    gsize cp_len = 0;
&gt; +    zend_bool free_cp = FALSE;
&gt; +
&gt; +    TSRMLS_FETCH();
&gt; +printf("marshal\n");
&gt; +
&gt; +    if (!zend_is_callable(cbd-&gt;callback, 0, &amp;callback_name)) {
&gt; +        php_error(E_WARNING, "Unable to invoke callback '%s'  
&gt; specified in %s on line %ld", callback_name, cbd-&gt;src_filename, cbd- 
&gt; &gt;src_lineno);
&gt; +        efree(callback_name);
&gt; +        return 0;
&gt; +    }
&gt; +
&gt; +    MAKE_STD_ZVAL(php_filter_info);
&gt; +    array_init(php_filter_info);
&gt; +
&gt; +    //filename
&gt; +    if (filter_info-&gt;filename
&gt; +        &amp;&amp; (filter_info-&gt;contains &amp; GTK_FILE_FILTER_FILENAME)
&gt; +    ) {
&gt; +        fn = g_filename_to_utf8(filter_info-&gt;filename, strlen 
&gt; (filter_info-&gt;filename), NULL, NULL, NULL);
&gt; +        cp = phpg_from_utf8(fn, strlen(fn), &amp;cp_len, &amp;free_cp  
&gt; TSRMLS_CC);
&gt; +        if (cp) {
&gt; +            add_next_index_string(php_filter_info, (char *)cp, 1);
&gt; +        } else {
&gt; +            php_error(E_WARNING, "%s::%s(): could not convert  
&gt; return value from UTF-8", get_active_class_name(NULL TSRMLS_CC),  
&gt; get_active_function_name(TSRMLS_C));
&gt; +        }
&gt; +        if (free_cp)
&gt; +            g_free(cp);
&gt; +    } else {
&gt; +        add_next_index_null(php_filter_info);
&gt; +    }
&gt; +
&gt; +    //uri
&gt; +    *cp = NULL; *fn = NULL; cp_len = 0; free_cp = FALSE;
&gt; +    if (filter_info-&gt;uri
&gt; +        &amp;&amp; (filter_info-&gt;contains &amp; GTK_FILE_FILTER_URI)
&gt; +    ) {
&gt; +        fn = g_filename_to_utf8(filter_info-&gt;uri, strlen 
&gt; (filter_info-&gt;uri), NULL, NULL, NULL);
&gt; +        cp = phpg_from_utf8(fn, strlen(fn), &amp;cp_len, &amp;free_cp  
&gt; TSRMLS_CC);
&gt; +        if (cp) {
&gt; +            add_next_index_string(php_filter_info, (char *)cp, 1);
&gt; +        } else {
&gt; +            php_error(E_WARNING, "%s::%s(): could not convert  
&gt; return value from UTF-8", get_active_class_name(NULL TSRMLS_CC),  
&gt; get_active_function_name(TSRMLS_C));
&gt; +        }
&gt; +        if (free_cp)
&gt; +            g_free(cp);
&gt; +    } else {
&gt; +        add_next_index_null(php_filter_info);
&gt; +    }
&gt; +
&gt; +    //display_name
&gt; +    *cp = NULL; *fn = NULL; cp_len = 0; free_cp = FALSE;
&gt; +    if (filter_info-&gt;display_name
&gt; +        &amp;&amp; (filter_info-&gt;contains &amp; GTK_FILE_FILTER_DISPLAY_NAME)
&gt; +    ) {
&gt; +        fn = g_filename_to_utf8(filter_info-&gt;display_name, strlen 
&gt; (filter_info-&gt;display_name), NULL, NULL, NULL);
&gt; +        cp = phpg_from_utf8(fn, strlen(fn), &amp;cp_len, &amp;free_cp  
&gt; TSRMLS_CC);
&gt; +        if (cp) {
&gt; +            add_next_index_string(php_filter_info, (char *)cp, 1);
&gt; +        } else {
&gt; +            php_error(E_WARNING, "%s::%s(): could not convert  
&gt; return value from UTF-8", get_active_class_name(NULL TSRMLS_CC),  
&gt; get_active_function_name(TSRMLS_C));
&gt; +        }
&gt; +        if (free_cp)
&gt; +            g_free(cp);
&gt; +    } else {
&gt; +        add_next_index_null(php_filter_info);
&gt; +    }
&gt; +
&gt; +    //mime_type
&gt; +    *cp = NULL; *fn = NULL; cp_len = 0; free_cp = FALSE;
&gt; +    if (filter_info-&gt;mime_type
&gt; +        &amp;&amp; (filter_info-&gt;contains &amp; GTK_FILE_FILTER_MIME_TYPE)
&gt; +    ) {
&gt; +        cp = phpg_from_utf8(filter_info-&gt;mime_type, strlen 
&gt; (filter_info-&gt;mime_type), &amp;cp_len, &amp;free_cp TSRMLS_CC);
&gt; +        if (cp) {
&gt; +            add_next_index_string(php_filter_info, (char *)cp, 1);
&gt; +        } else {
&gt; +            php_error(E_WARNING, "%s::%s(): could not convert  
&gt; return value from UTF-8", get_active_class_name(NULL TSRMLS_CC),  
&gt; get_active_function_name(TSRMLS_C));
&gt; +        }
&gt; +        if (free_cp)
&gt; +            g_free(cp);
&gt; +    } else {
&gt; +        add_next_index_null(php_filter_info);
&gt; +    }
&gt; +
&gt; +    args = php_gtk_hash_as_array_offset(cbd-&gt;user_args, 1, &amp;n_args);
&gt; +    args[0] = &amp;php_filter_info;
&gt; +
&gt; +    call_user_function_ex(EG(function_table), NULL, cbd-&gt;callback,  
&gt; &amp;retval, n_args, args, 0, NULL TSRMLS_CC);
&gt; +
&gt; +    zval_ptr_dtor(&amp;php_filter_info);
&gt; +
&gt; +    if (retval) {
&gt; +        show = zend_is_true(retval);
&gt; +        zval_ptr_dtor(&amp;retval);
&gt; +    } else {
&gt; +        show = TRUE;
&gt; +    }
&gt; +
&gt; +    phpg_handle_marshaller_exception(TSRMLS_C);
&gt; +
&gt; +    efree(callback_name);
&gt; +    efree(args);
&gt; +
&gt; +    return show;
&gt; +}
&gt; +
&gt; +PHP_METHOD
&gt; +{
&gt; +    zval *callback, *extra;
&gt; +    phpg_cb_data_t *cb_data;
&gt; +    GtkFileFilterFlags flags = 0;
&gt; +    zval *php_flags = NULL;
&gt; +
&gt; +
&gt; +    NOT_STATIC_METHOD();
&gt; +
&gt; +    if (!php_gtk_parse_varargs(ZEND_NUM_ARGS(), 2, &amp;extra, "VV",  
&gt; &amp;php_flags, &amp;callback))
&gt; +        return;
&gt; +
&gt; +    if (php_flags &amp;&amp; phpg_gvalue_get_flags 
&gt; (GTK_TYPE_FILE_FILTER_FLAGS, php_flags, (gint *)&amp;flags) == FAILURE) {
&gt; +        return;
&gt; +    }
&gt; +
&gt; +    zval_add_ref(&amp;callback);
&gt; +    cb_data = phpg_cb_data_new(callback, extra TSRMLS_CC);
&gt; +
&gt; +    gtk_file_filter_add_custom(
&gt; +            GTK_FILE_FILTER(PHPG_GOBJECT(this_ptr)),
&gt; +            flags,
&gt; +            (GtkFileFilterFunc)phpg_file_filter_add_custom_marshal,
&gt; +            cb_data, phpg_cb_data_destroy
&gt; +    );
&gt; +}
&gt; +
&gt; +
&gt; +%%
&gt; +add-arginfo GtkFileFilter filter
&gt; +static
&gt; +ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
&gt; +    ZEND_ARG_INFO(0, filterinfo)
&gt; +ZEND_END_ARG_INFO();
&gt; +
&gt; +%%
&gt; +override gtk_file_filter_filter
&gt; +PHP_METHOD
&gt; +{
&gt; +    GtkFileFilterInfo filter_info = { 0, NULL, NULL, NULL, NULL };
&gt; +    zval *php_filter_info = NULL, **temp_value;
&gt; +    gchar **values;
&gt; +    gboolean result;
&gt; +    int i = 0;
&gt; +
&gt; +    NOT_STATIC_METHOD();
&gt; +
&gt; +    if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "a",  
&gt; &amp;php_filter_info)) {
&gt; +        return;
&gt; +    }
&gt; +
&gt; +    if (zend_hash_num_elements(Z_ARRVAL_P(php_filter_info)) != 4) {
&gt; +        php_error(E_WARNING, "%s::%s() file info array requires 4  
&gt; values of type string or NULL",
&gt; +                  get_active_class_name(NULL TSRMLS_CC),
&gt; +                  get_active_function_name(TSRMLS_C));
&gt; +        return;
&gt; +    }
&gt; +
&gt; +    zend_hash_internal_pointer_reset(Z_ARRVAL_P(php_filter_info));
&gt; +    values = safe_emalloc(4, sizeof(gchar *), 0);
&gt; +
&gt; +    while (zend_hash_get_current_data(Z_ARRVAL_P(php_filter_info),  
&gt; (void **)&amp;temp_value) == SUCCESS) {
&gt; +        gchar *utf8 = NULL;
&gt; +        gsize utf8_len = 0;
&gt; +        zend_bool free_utf8 = 0;
&gt; +
&gt; +        if (Z_TYPE_P(*temp_value) == IS_NULL) {
&gt; +            values[i++] = NULL;
&gt; +        } else {
&gt; +            convert_to_string_ex(temp_value);
&gt; +            utf8 = phpg_to_utf8(Z_STRVAL_PP(temp_value),  
&gt; Z_STRLEN_PP(temp_value), &amp;utf8_len, &amp;free_utf8 TSRMLS_CC);
&gt; +
&gt; +            if (!utf8) {
&gt; +                efree(values);
&gt; +                php_error(E_WARNING, "%s::%s() Could not convert  
&gt; filter info string to UTF-8",
&gt; +                        get_active_class_name(NULL TSRMLS_CC),
&gt; +                        get_active_function_name(TSRMLS_C));
&gt; +                return;
&gt; +            }
&gt; +
&gt; +            if (free_utf8) {
&gt; +                values[i++] = utf8;
&gt; +            } else {
&gt; +                /* Use GTK+ memory function here since utf8 may  
&gt; also allocated by it */
&gt; +                values[i++] = g_strdup(utf8);
&gt; +            }
&gt; +        }
&gt; +
&gt; +        zend_hash_move_forward(Z_ARRVAL_P(php_filter_info));
&gt; +    }
&gt; +
&gt; +    if (values[0] != NULL) {
&gt; +        filter_info.filename     = values[0];
&gt; +        filter_info.contains     |= GTK_FILE_FILTER_FILENAME;
&gt; +    }
&gt; +    if (values[1] != NULL) {
&gt; +        filter_info.uri          = values[1];
&gt; +        filter_info.contains     |= GTK_FILE_FILTER_URI;
&gt; +    }
&gt; +    if (values[2] != NULL) {
&gt; +        filter_info.display_name = values[2];
&gt; +        filter_info.contains     |= GTK_FILE_FILTER_DISPLAY_NAME;
&gt; +    }
&gt; +    if (values[3] != NULL) {
&gt; +        filter_info.mime_type    = values[3];
&gt; +        filter_info.contains     |= GTK_FILE_FILTER_MIME_TYPE;
&gt; +    }
&gt; +
&gt; +    efree(values);
&gt; +
&gt; +    result = gtk_file_filter_filter(GTK_FILE_FILTER(PHPG_GOBJECT 
&gt; (this_ptr)), &amp;filter_info);
&gt; +    RETURN_BOOL(result);
&gt; +}
&gt; +
&gt; +%% }}}
&gt; +
&gt;  %% {{{ GtkFileSelection
&gt;
&gt;  %%

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070206175345</emailId><senderName>Christian Weiske</senderName><senderEmail>cweiske@cweiske.de</senderEmail><timestampReceived>2007-02-06 17:53:45-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkFileFilter patch</subject><body>

[Attachment #2 (multipart/mixed)]


Andrei,


&gt; The best you can do here is
&gt; create a couple of wrapper functions that abstract the conversions.
I created a single one that does it for at least 3 of the four, which is
enough for me.

-- 
Regards/Mit freundlichen Grüßen
Christian Weiske

["gtkfilefilter.diff" (text/x-patch)]

Index: ext/gtk+/gtk.overrides
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/gtk.overrides,v
retrieving revision 1.242
diff -u -r1.242 gtk.overrides
--- ext/gtk+/gtk.overrides	5 Feb 2007 16:53:53 -0000	1.242
+++ ext/gtk+/gtk.overrides	6 Feb 2007 17:53:24 -0000
@@ -7,6 +7,8 @@
 
 static void phpg_about_dialog_activate_link_func_marshal (GtkAboutDialog *about, \
const gchar *link, gpointer data);  static gboolean \
phpg_entry_completion_match_func_marshal (GtkEntryCompletion *completion, const gchar \
*key, GtkTreeIter *iter, gpointer data); +static void \
phpg_file_filter_add_custom_marshal_add_file(const gchar *filename, int flags, int \
flag, zval *php_filter_info); +static gboolean \
phpg_file_filter_add_custom_marshal(GtkFileFilterInfo *filter_info, gpointer data);  \
static gboolean phpg_tree_view_row_separator_func_marshal (GtkTreeModel *model, \
GtkTreeIter *iter, gpointer data);  static void phpg_icon_view_foreach_func_marshal \
(GtkIconView *icon_view, GtkTreePath *path, gpointer data);  static gboolean \
phpg_toolbar_signal_func_marshal(GtkWidget *widget, gpointer data); @@ -2769,6 \
+2771,238 @@  
 %% }}}
 
+%% {{{ GtkFileFilter
+
+%%
+add-arginfo GtkFileFilter add_custom
+static
+ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
+    ZEND_ARG_INFO(0, flags_needed)
+    ZEND_ARG_INFO(0, callback)
+ZEND_END_ARG_INFO();
+
+%%
+override gtk_file_filter_add_custom
+static void phpg_file_filter_add_custom_marshal_add_file(const gchar *filename, int \
flags, int flag, zval *php_filter_info) +{
+    gchar *cp = NULL;
+    gchar *fn = NULL;
+    gsize cp_len = 0;
+    zend_bool free_cp = FALSE;
+
+    if (filename &amp;&amp; (flags &amp; flag)
+    ) {
+        fn = g_filename_to_utf8(filename, strlen(filename), NULL, NULL, NULL);
+        cp = phpg_from_utf8(fn, strlen(fn), &amp;cp_len, &amp;free_cp TSRMLS_CC);
+        if (cp) {
+            add_next_index_string(php_filter_info, (char *)cp, 1);
+        } else {
+            php_error(E_WARNING, "%s::%s(): could not convert return value from \
UTF-8", get_active_class_name(NULL TSRMLS_CC), get_active_function_name(TSRMLS_C)); + \
} +        if (free_cp)
+            g_free(cp);
+    } else {
+        add_next_index_null(php_filter_info);
+    }
+}
+static gboolean phpg_file_filter_add_custom_marshal(GtkFileFilterInfo *filter_info, \
gpointer data) +{
+    phpg_cb_data_t *cbd = (phpg_cb_data_t *) data;
+    zval *retval = NULL;
+    zval ***args = NULL;
+    int n_args = 0;
+    char *callback_name;
+    zval *php_filter_info = NULL;
+    gboolean show = TRUE;
+    gchar *cp = NULL;
+    gsize cp_len = 0;
+    zend_bool free_cp = FALSE;
+
+    TSRMLS_FETCH();
+
+    if (!zend_is_callable(cbd-&gt;callback, 0, &amp;callback_name)) {
+        php_error(E_WARNING, "Unable to invoke callback '%s' specified in %s on line \
%ld", callback_name, cbd-&gt;src_filename, cbd-&gt;src_lineno); +        \
efree(callback_name); +        return 0;
+    }
+
+    MAKE_STD_ZVAL(php_filter_info);
+    array_init(php_filter_info);
+
+    phpg_file_filter_add_custom_marshal_add_file(
+        filter_info-&gt;filename,
+        filter_info-&gt;contains,
+        GTK_FILE_FILTER_FILENAME,
+        php_filter_info
+    );
+    phpg_file_filter_add_custom_marshal_add_file(
+        filter_info-&gt;uri,
+        filter_info-&gt;contains,
+        GTK_FILE_FILTER_URI,
+        php_filter_info
+    );
+    phpg_file_filter_add_custom_marshal_add_file(
+        filter_info-&gt;display_name,
+        filter_info-&gt;contains,
+        GTK_FILE_FILTER_DISPLAY_NAME,
+        php_filter_info
+    );
+
+    //mime_type
+    if (filter_info-&gt;mime_type
+        &amp;&amp; (filter_info-&gt;contains &amp; GTK_FILE_FILTER_MIME_TYPE)
+    ) {
+        cp = phpg_from_utf8(filter_info-&gt;mime_type, strlen(filter_info-&gt;mime_type), \
&amp;cp_len, &amp;free_cp TSRMLS_CC); +        if (cp) {
+            add_next_index_string(php_filter_info, (char *)cp, 1);
+        } else {
+            php_error(E_WARNING, "%s::%s(): could not convert return value from \
UTF-8", get_active_class_name(NULL TSRMLS_CC), get_active_function_name(TSRMLS_C)); + \
} +        if (free_cp)
+            g_free(cp);
+    } else {
+        add_next_index_null(php_filter_info);
+    }
+
+    args = php_gtk_hash_as_array_offset(cbd-&gt;user_args, 1, &amp;n_args);
+    args[0] = &amp;php_filter_info;
+
+    call_user_function_ex(EG(function_table), NULL, cbd-&gt;callback, &amp;retval, n_args, \
args, 0, NULL TSRMLS_CC); +
+    zval_ptr_dtor(&amp;php_filter_info);
+
+    if (retval) {
+        show = zend_is_true(retval);
+        zval_ptr_dtor(&amp;retval);
+    } else {
+        show = TRUE;
+    }
+
+    phpg_handle_marshaller_exception(TSRMLS_C);
+
+    efree(callback_name);
+    efree(args);
+
+    return show;
+}
+
+PHP_METHOD
+{
+    zval *callback, *extra;
+    phpg_cb_data_t *cb_data;
+    GtkFileFilterFlags flags = 0;
+    zval *php_flags = NULL;
+
+
+    NOT_STATIC_METHOD();
+
+    if (!php_gtk_parse_varargs(ZEND_NUM_ARGS(), 2, &amp;extra, "VV", &amp;php_flags, \
&amp;callback)) +        return;
+
+    if (php_flags &amp;&amp; phpg_gvalue_get_flags(GTK_TYPE_FILE_FILTER_FLAGS, php_flags, \
(gint *)&amp;flags) == FAILURE) { +        return;
+    }
+
+    zval_add_ref(&amp;callback);
+    cb_data = phpg_cb_data_new(callback, extra TSRMLS_CC);
+
+    gtk_file_filter_add_custom(
+            GTK_FILE_FILTER(PHPG_GOBJECT(this_ptr)),
+            flags,
+            (GtkFileFilterFunc)phpg_file_filter_add_custom_marshal,
+            cb_data, phpg_cb_data_destroy
+    );
+}
+
+
+%%
+add-arginfo GtkFileFilter filter
+static
+ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
+    ZEND_ARG_INFO(0, filterinfo)
+ZEND_END_ARG_INFO();
+
+%%
+override gtk_file_filter_filter
+PHP_METHOD
+{
+    GtkFileFilterInfo filter_info = { 0, NULL, NULL, NULL, NULL };
+    zval *php_filter_info = NULL, **temp_value;
+    gchar **values;
+    gboolean result;
+    int i = 0;
+
+    NOT_STATIC_METHOD();
+
+    if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "a", &amp;php_filter_info)) {
+        return;
+    }
+
+    if (zend_hash_num_elements(Z_ARRVAL_P(php_filter_info)) != 4) {
+        php_error(E_WARNING, "%s::%s() file info array requires 4 values of type \
string or NULL", +                  get_active_class_name(NULL TSRMLS_CC),
+                  get_active_function_name(TSRMLS_C));
+        return;
+    }
+
+    zend_hash_internal_pointer_reset(Z_ARRVAL_P(php_filter_info));
+    values = safe_emalloc(4, sizeof(gchar *), 0);
+
+    while (zend_hash_get_current_data(Z_ARRVAL_P(php_filter_info), (void \
**)&amp;temp_value) == SUCCESS) { +        gchar *utf8 = NULL;
+        gsize utf8_len = 0;
+        zend_bool free_utf8 = 0;
+
+        if (Z_TYPE_P(*temp_value) == IS_NULL) {
+            values[i++] = NULL;
+        } else {
+            convert_to_string_ex(temp_value);
+            utf8 = phpg_to_utf8(Z_STRVAL_PP(temp_value), Z_STRLEN_PP(temp_value), \
&amp;utf8_len, &amp;free_utf8 TSRMLS_CC); +
+            if (!utf8) {
+                efree(values);
+                php_error(E_WARNING, "%s::%s() Could not convert filter info string \
to UTF-8", +                        get_active_class_name(NULL TSRMLS_CC),
+                        get_active_function_name(TSRMLS_C));
+                return;
+            }
+
+            if (free_utf8) {
+                values[i++] = utf8;
+            } else {
+                /* Use GTK+ memory function here since utf8 may also allocated by it \
*/ +                values[i++] = g_strdup(utf8);
+            }
+        }
+
+        zend_hash_move_forward(Z_ARRVAL_P(php_filter_info));
+    }
+
+    if (values[0] != NULL) {
+        filter_info.filename     = values[0];
+        filter_info.contains     |= GTK_FILE_FILTER_FILENAME;
+    }
+    if (values[1] != NULL) {
+        filter_info.uri          = values[1];
+        filter_info.contains     |= GTK_FILE_FILTER_URI;
+    }
+    if (values[2] != NULL) {
+        filter_info.display_name = values[2];
+        filter_info.contains     |= GTK_FILE_FILTER_DISPLAY_NAME;
+    }
+    if (values[3] != NULL) {
+        filter_info.mime_type    = values[3];
+        filter_info.contains     |= GTK_FILE_FILTER_MIME_TYPE;
+    }
+
+    efree(values);
+
+    result = gtk_file_filter_filter(GTK_FILE_FILTER(PHPG_GOBJECT(this_ptr)), \
&amp;filter_info); +    RETURN_BOOL(result);
+}
+
+%% }}}
+
 %% {{{ GtkFileSelection
 
 %%


["signature.asc" (application/pgp-signature)]

</body></email><email><emailId>20070205171401</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-02-05 17:14:01-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] PangoRectangle</subject><body>

What kind of warnings does it give when you try to register it as a 
GdkRectangle?

-Andrei

On Feb 5, 2007, at 8:12 AM, Christian Weiske wrote:

&gt; Hello,
&gt;
&gt;
&gt; Many of the missing Pango methods use PangoRectangle. The struct is
&gt; basically the same as GtkAllocation and GdkRectangle, but just aliasing
&gt; it in arg_types.php as rectangle does not really work - at least it
&gt; gives warnings.
&gt;
&gt; Andrei, did you do more to support GtkAllocation than registering the
&gt; GdkRectangle matcher for it?
&gt; The second option I thought could be used is just copying the
&gt; GdkRectangle code and replace Gdk with Pango. Problem there is that
&gt; PangoRectangle has no PANGO_TYPE_RECTANGLE Gtype.
&gt;
&gt; -- 
&gt; Regards/Mit freundlichen Grüßen
&gt; Christian Weiske
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070205203739</emailId><senderName>Christian Weiske</senderName><senderEmail>cweiske@cweiske.de</senderEmail><timestampReceived>2007-02-05 20:37:39-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] PangoRectangle</subject><body>


Andrei,

&gt; What kind of warnings does it give when you try to register it as a
&gt; GdkRectangle?
ext/gtk+/gen_pango.c: In function 'zif_PangoLayout_index_to_pos':
ext/gtk+/gen_pango.c:1224: warning: passing argument 3 of
'pango_layout_index_to_pos' from incompatible pointer type

code:
GdkRectangle pos = { 0, 0, 0, 0 };
..
phpg_rectangle_from_zval(php_pos, &amp;pos TSRMLS_CC)
..
pango_layout_index_to_pos(PANGO_LAYOUT(PHPG_GOBJECT(this_ptr)),
(int)index, &amp;pos);

-- 
Regards/Mit freundlichen Grüßen
Christian Weiske


["signature.asc" (application/pgp-signature)]

</body></email><email><emailId>20070205204934</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-02-05 20:49:34-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] PangoRectangle</subject><body>

Yeah, that's because GtKAllocation is typedef'ed to GdkRectangle, but  
PangoRectangle is not.

One solution would be to extend GdkRectanglePtr_Arg class to store  
the type name as a class var and use it instead of the explicit  
'GdkRectangle'.

-Andrei


On Feb 5, 2007, at 12:37 PM, Christian Weiske wrote:

&gt; Andrei,
&gt;
&gt;&gt; What kind of warnings does it give when you try to register it as a
&gt;&gt; GdkRectangle?
&gt; ext/gtk+/gen_pango.c: In function 'zif_PangoLayout_index_to_pos':
&gt; ext/gtk+/gen_pango.c:1224: warning: passing argument 3 of
&gt; 'pango_layout_index_to_pos' from incompatible pointer type
&gt;
&gt; code:
&gt; GdkRectangle pos = { 0, 0, 0, 0 };
&gt; ..
&gt; phpg_rectangle_from_zval(php_pos, &amp;pos TSRMLS_CC)
&gt; ..
&gt; pango_layout_index_to_pos(PANGO_LAYOUT(PHPG_GOBJECT(this_ptr)),
&gt; (int)index, &amp;pos);
&gt;
&gt; -- 
&gt; Regards/Mit freundlichen Grüßen
&gt; Christian Weiske
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070206115308</emailId><senderName>Christian Weiske</senderName><senderEmail>cweiske@cweiske.de</senderEmail><timestampReceived>2007-02-06 11:53:08-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] PangoRectangle</subject><body>


Andrei,

&gt; One solution would be to extend GdkRectanglePtr_Arg class to store the
&gt; type name as a class var and use it instead of the explicit 'GdkRectangle'.
It still would use phpg_rectangle_from_zval which has GdkRectangle
hardcoded.

-- 
Regards/Mit freundlichen Grüßen
Christian Weiske


["signature.asc" (application/pgp-signature)]

</body></email><email><emailId>20070202143846</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-02-02 14:38:46-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] More Coverage</subject><body>

Hi Elizabeth,

&gt; Patch for GtkToolbar::append_item() - added the private_tooltip
&gt; parameter in (append/prepend widget also allow it, seems like the api
&gt; should match the C version), added GtkToolbar::prepend_item(), added
&gt; deprecation messages for both methods

Yep looks like I left the private tooltip out. Patch looks good, please
commit. Thanks!

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070205175414</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-02-05 17:54:14-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] More Coverage</subject><body>

Anant Narayanan wrote:
&gt; Hi Elizabeth,
&gt; 
&gt;&gt; Patch for GtkToolbar::append_item() - added the private_tooltip
&gt;&gt; parameter in (append/prepend widget also allow it, seems like the api
&gt;&gt; should match the C version), added GtkToolbar::prepend_item(), added
&gt;&gt; deprecation messages for both methods
&gt; 
&gt; Yep looks like I left the private tooltip out. Patch looks good, please
&gt; commit. Thanks!
&gt; 
&gt; --
&gt; Anant

After a third! look those two methods should be returning the newly 
created gtkwidget, so this patch adds that in plus implements 
GtkToolbar::insert_item and GtkToolbar::insert_stock

["gtk.overrides.patch" (text/plain)]

Index: gtk.overrides
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/gtk.overrides,v
retrieving revision 1.242
diff -u -r1.242 gtk.overrides
--- gtk.overrides	5 Feb 2007 16:53:53 -0000	1.242
+++ gtk.overrides	5 Feb 2007 17:43:43 -0000
@@ -4935,7 +4935,6 @@
 %% }}}
 
 %% {{{ GtkToolbar
-
 %%
 add-arginfo GtkToolbar append_item
 static
@@ -4959,7 +4958,7 @@
     char *callback_name;
     zval *php_widget = NULL;
     zend_bool toreturn;
-
+    
     TSRMLS_FETCH();
 
     if (!zend_is_callable(cbd-&gt;callback, 0, &amp;callback_name)) {
@@ -4998,6 +4997,7 @@
     phpg_cb_data_t *cb_data;
     GtkSignalFunc callback;
     char *text = NULL, *tooltip = NULL, *private_tooltip = NULL;
+    GObject *wrapped_obj;
 
     NOT_STATIC_METHOD();
 
@@ -5018,11 +5018,16 @@
     phpg_warn_deprecated("use GtkToolbar::insert" TSRMLS_CC);
 
     if (Z_TYPE_P(icon) != IS_NULL)
-        gtk_toolbar_append_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
+        wrapped_obj = (GObject *) \
                gtk_toolbar_append_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
                                     text, tooltip, private_tooltip, \
                GTK_WIDGET(PHPG_GOBJECT(icon)), callback, cb_data);
-    else
-        gtk_toolbar_append_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
+    else 
+        wrapped_obj = (GObject *) \
                gtk_toolbar_append_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
                                     text, tooltip, private_tooltip, NULL, callback, \
cb_data); +
+    if (!wrapped_obj) {
+        PHPG_THROW_CONSTRUCT_EXCEPTION(GtkWidget);
+	}
+    phpg_gobject_new(&amp;return_value, wrapped_obj TSRMLS_CC);
 }
 
 %%
@@ -5045,6 +5050,7 @@
     phpg_cb_data_t *cb_data;
     GtkSignalFunc callback;
     char *text = NULL, *tooltip = NULL, *private_tooltip = NULL;
+    GObject *wrapped_obj;
 
     NOT_STATIC_METHOD();
 
@@ -5065,11 +5071,120 @@
     phpg_warn_deprecated("use GtkToolbar::insert" TSRMLS_CC);
 
     if (Z_TYPE_P(icon) != IS_NULL)
-        gtk_toolbar_prepend_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
+        wrapped_obj = (GObject *) \
                gtk_toolbar_prepend_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
                                     text, tooltip, private_tooltip, \
                GTK_WIDGET(PHPG_GOBJECT(icon)), callback, cb_data);
-    else
-        gtk_toolbar_prepend_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
+    else 
+        wrapped_obj = (GObject *) \
                gtk_toolbar_prepend_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
                                     text, tooltip, private_tooltip, NULL, callback, \
cb_data); +
+    if (!wrapped_obj) {
+        PHPG_THROW_CONSTRUCT_EXCEPTION(GtkWidget);
+	}
+    phpg_gobject_new(&amp;return_value, wrapped_obj TSRMLS_CC);
+}
+
+%%
+add-arginfo GtkToolbar insert_item
+static
+ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
+    ZEND_ARG_INFO(0, text)
+    ZEND_ARG_INFO(0, tooltip_text)
+    ZEND_ARG_INFO(0, tooltip_private_text)
+    ZEND_ARG_OBJ_INFO(0, icon, GtkWidget, 1)
+    ZEND_ARG_INFO(0, callback)
+    ZEND_ARG_INFO(0, position)
+ZEND_END_ARG_INFO();
+
+%%
+override gtk_toolbar_insert_item
+
+PHP_METHOD
+{
+    zval *php_callback, *extra, *icon = NULL;
+    phpg_cb_data_t *cb_data;
+    GtkSignalFunc callback;
+    char *text = NULL, *tooltip = NULL, *private_tooltip = NULL;
+    gint position = 0;
+    GObject *wrapped_obj;
+
+    NOT_STATIC_METHOD();
+
+    if (!php_gtk_parse_varargs(ZEND_NUM_ARGS(), 6, &amp;extra, "sssNVi", &amp;text, \
&amp;tooltip, &amp;private_tooltip, &amp;icon, gtkwidget_ce, &amp;php_callback, &amp;position)) +        \
return; +
+    if (php_callback) {
+        if (Z_TYPE_P(php_callback) == IS_NULL) {
+            cb_data  = NULL;
+            callback = NULL;
+        } else {
+            zval_add_ref(&amp;php_callback);
+            cb_data  = phpg_cb_data_new(php_callback, extra TSRMLS_CC);
+            callback = (GtkSignalFunc)phpg_toolbar_signal_func_marshal;
+        }
+    }
+
+    phpg_warn_deprecated("use GtkToolbar::insert" TSRMLS_CC);
+
+    if (Z_TYPE_P(icon) != IS_NULL)
+        wrapped_obj = (GObject *) \
gtk_toolbar_insert_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)), +                        \
text, tooltip, private_tooltip, GTK_WIDGET(PHPG_GOBJECT(icon)), callback, cb_data, \
position); +    else 
+        wrapped_obj = (GObject *) \
gtk_toolbar_insert_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)), +                        \
text, tooltip, private_tooltip, NULL, callback, cb_data, position); +
+    if (!wrapped_obj) {
+        PHPG_THROW_CONSTRUCT_EXCEPTION(GtkWidget);
+	}
+    phpg_gobject_new(&amp;return_value, wrapped_obj TSRMLS_CC);
+}
+
+%%
+add-arginfo GtkToolbar insert_stock
+static
+ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
+    ZEND_ARG_INFO(0, stock_id)
+    ZEND_ARG_INFO(0, tooltip_text)
+    ZEND_ARG_INFO(0, tooltip_private_text)
+    ZEND_ARG_INFO(0, callback)
+    ZEND_ARG_INFO(0, position)
+ZEND_END_ARG_INFO();
+
+%%
+override gtk_toolbar_insert_stock
+PHP_METHOD
+{
+    zval *php_callback, *extra;
+    phpg_cb_data_t *cb_data;
+    GtkSignalFunc callback;
+    char *stock_id = NULL, *tooltip = NULL, *private_tooltip = NULL;
+    gint position = 0;
+    GObject *wrapped_obj;
+
+    NOT_STATIC_METHOD();
+
+    if (!php_gtk_parse_varargs(ZEND_NUM_ARGS(), 5, &amp;extra, "sssVi", &amp;stock_id, \
&amp;tooltip, &amp;private_tooltip, &amp;php_callback, &amp;position)) +        return;
+
+    if (php_callback) {
+        if (Z_TYPE_P(php_callback) == IS_NULL) {
+            cb_data  = NULL;
+            callback = NULL;
+        } else {
+            zval_add_ref(&amp;php_callback);
+            cb_data  = phpg_cb_data_new(php_callback, extra TSRMLS_CC);
+            callback = (GtkSignalFunc)phpg_toolbar_signal_func_marshal;
+        }
+    }
+
+    phpg_warn_deprecated("use GtkToolbar::insert" TSRMLS_CC);
+
+    wrapped_obj = (GObject *) \
gtk_toolbar_insert_stock(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)), +                       \
stock_id, tooltip, private_tooltip, callback, cb_data, position); +
+    if (!wrapped_obj) {
+        PHPG_THROW_CONSTRUCT_EXCEPTION(GtkWidget);
+	}
+    phpg_gobject_new(&amp;return_value, wrapped_obj TSRMLS_CC);
 }
 
 %%



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070205182236</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-02-05 18:22:36-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] More Coverage</subject><body>

Please don't use PHPG_THROW_CONSTRUCT_EXCEPTION() in regular methods. 
Just output a warning with php_error_docref() and exit the method.

-Andrei

On Feb 5, 2007, at 9:54 AM, Elizabeth Smith wrote:

&gt; Anant Narayanan wrote:
&gt;&gt; Hi Elizabeth,
&gt;&gt;&gt; Patch for GtkToolbar::append_item() - added the private_tooltip
&gt;&gt;&gt; parameter in (append/prepend widget also allow it, seems like the api
&gt;&gt;&gt; should match the C version), added GtkToolbar::prepend_item(), added
&gt;&gt;&gt; deprecation messages for both methods
&gt;&gt; Yep looks like I left the private tooltip out. Patch looks good, 
&gt;&gt; please
&gt;&gt; commit. Thanks!
&gt;&gt; --
&gt;&gt; Anant
&gt;
&gt; After a third! look those two methods should be returning the newly 
&gt; created gtkwidget, so this patch adds that in plus implements 
&gt; GtkToolbar::insert_item and GtkToolbar::insert_stock
&gt; Index: gtk.overrides
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/ext/gtk+/gtk.overrides,v
&gt; retrieving revision 1.242
&gt; diff -u -r1.242 gtk.overrides
&gt; --- gtk.overrides	5 Feb 2007 16:53:53 -0000	1.242
&gt; +++ gtk.overrides	5 Feb 2007 17:43:43 -0000
&gt; @@ -4935,7 +4935,6 @@
&gt;  %% }}}
&gt;
&gt;  %% {{{ GtkToolbar
&gt; -
&gt;  %%
&gt;  add-arginfo GtkToolbar append_item
&gt;  static
&gt; @@ -4959,7 +4958,7 @@
&gt;      char *callback_name;
&gt;      zval *php_widget = NULL;
&gt;      zend_bool toreturn;
&gt; -
&gt; +
&gt;      TSRMLS_FETCH();
&gt;
&gt;      if (!zend_is_callable(cbd-&gt;callback, 0, &amp;callback_name)) {
&gt; @@ -4998,6 +4997,7 @@
&gt;      phpg_cb_data_t *cb_data;
&gt;      GtkSignalFunc callback;
&gt;      char *text = NULL, *tooltip = NULL, *private_tooltip = NULL;
&gt; +    GObject *wrapped_obj;
&gt;
&gt;      NOT_STATIC_METHOD();
&gt;
&gt; @@ -5018,11 +5018,16 @@
&gt;      phpg_warn_deprecated("use GtkToolbar::insert" TSRMLS_CC);
&gt;
&gt;      if (Z_TYPE_P(icon) != IS_NULL)
&gt; -        gtk_toolbar_append_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
&gt; +        wrapped_obj = (GObject *) 
&gt; gtk_toolbar_append_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
&gt;                                      text, tooltip, private_tooltip, 
&gt; GTK_WIDGET(PHPG_GOBJECT(icon)), callback, cb_data);
&gt; -    else
&gt; -        gtk_toolbar_append_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
&gt; +    else
&gt; +        wrapped_obj = (GObject *) 
&gt; gtk_toolbar_append_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
&gt;                                      text, tooltip, private_tooltip, 
&gt; NULL, callback, cb_data);
&gt; +
&gt; +    if (!wrapped_obj) {
&gt; +        PHPG_THROW_CONSTRUCT_EXCEPTION(GtkWidget);
&gt; +	}
&gt; +    phpg_gobject_new(&amp;return_value, wrapped_obj TSRMLS_CC);
&gt;  }
&gt;
&gt;  %%
&gt; @@ -5045,6 +5050,7 @@
&gt;      phpg_cb_data_t *cb_data;
&gt;      GtkSignalFunc callback;
&gt;      char *text = NULL, *tooltip = NULL, *private_tooltip = NULL;
&gt; +    GObject *wrapped_obj;
&gt;
&gt;      NOT_STATIC_METHOD();
&gt;
&gt; @@ -5065,11 +5071,120 @@
&gt;      phpg_warn_deprecated("use GtkToolbar::insert" TSRMLS_CC);
&gt;
&gt;      if (Z_TYPE_P(icon) != IS_NULL)
&gt; -        gtk_toolbar_prepend_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
&gt; +        wrapped_obj = (GObject *) 
&gt; gtk_toolbar_prepend_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
&gt;                                      text, tooltip, private_tooltip, 
&gt; GTK_WIDGET(PHPG_GOBJECT(icon)), callback, cb_data);
&gt; -    else
&gt; -        gtk_toolbar_prepend_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
&gt; +    else
&gt; +        wrapped_obj = (GObject *) 
&gt; gtk_toolbar_prepend_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
&gt;                                      text, tooltip, private_tooltip, 
&gt; NULL, callback, cb_data);
&gt; +
&gt; +    if (!wrapped_obj) {
&gt; +        PHPG_THROW_CONSTRUCT_EXCEPTION(GtkWidget);
&gt; +	}
&gt; +    phpg_gobject_new(&amp;return_value, wrapped_obj TSRMLS_CC);
&gt; +}
&gt; +
&gt; +%%
&gt; +add-arginfo GtkToolbar insert_item
&gt; +static
&gt; +ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
&gt; +    ZEND_ARG_INFO(0, text)
&gt; +    ZEND_ARG_INFO(0, tooltip_text)
&gt; +    ZEND_ARG_INFO(0, tooltip_private_text)
&gt; +    ZEND_ARG_OBJ_INFO(0, icon, GtkWidget, 1)
&gt; +    ZEND_ARG_INFO(0, callback)
&gt; +    ZEND_ARG_INFO(0, position)
&gt; +ZEND_END_ARG_INFO();
&gt; +
&gt; +%%
&gt; +override gtk_toolbar_insert_item
&gt; +
&gt; +PHP_METHOD
&gt; +{
&gt; +    zval *php_callback, *extra, *icon = NULL;
&gt; +    phpg_cb_data_t *cb_data;
&gt; +    GtkSignalFunc callback;
&gt; +    char *text = NULL, *tooltip = NULL, *private_tooltip = NULL;
&gt; +    gint position = 0;
&gt; +    GObject *wrapped_obj;
&gt; +
&gt; +    NOT_STATIC_METHOD();
&gt; +
&gt; +    if (!php_gtk_parse_varargs(ZEND_NUM_ARGS(), 6, &amp;extra, "sssNVi", 
&gt; &amp;text, &amp;tooltip, &amp;private_tooltip, &amp;icon, gtkwidget_ce, &amp;php_callback, 
&gt; &amp;position))
&gt; +        return;
&gt; +
&gt; +    if (php_callback) {
&gt; +        if (Z_TYPE_P(php_callback) == IS_NULL) {
&gt; +            cb_data  = NULL;
&gt; +            callback = NULL;
&gt; +        } else {
&gt; +            zval_add_ref(&amp;php_callback);
&gt; +            cb_data  = phpg_cb_data_new(php_callback, extra 
&gt; TSRMLS_CC);
&gt; +            callback = 
&gt; (GtkSignalFunc)phpg_toolbar_signal_func_marshal;
&gt; +        }
&gt; +    }
&gt; +
&gt; +    phpg_warn_deprecated("use GtkToolbar::insert" TSRMLS_CC);
&gt; +
&gt; +    if (Z_TYPE_P(icon) != IS_NULL)
&gt; +        wrapped_obj = (GObject *) 
&gt; gtk_toolbar_insert_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
&gt; +                                    text, tooltip, private_tooltip, 
&gt; GTK_WIDGET(PHPG_GOBJECT(icon)), callback, cb_data, position);
&gt; +    else
&gt; +        wrapped_obj = (GObject *) 
&gt; gtk_toolbar_insert_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
&gt; +                                    text, tooltip, private_tooltip, 
&gt; NULL, callback, cb_data, position);
&gt; +
&gt; +    if (!wrapped_obj) {
&gt; +        PHPG_THROW_CONSTRUCT_EXCEPTION(GtkWidget);
&gt; +	}
&gt; +    phpg_gobject_new(&amp;return_value, wrapped_obj TSRMLS_CC);
&gt; +}
&gt; +
&gt; +%%
&gt; +add-arginfo GtkToolbar insert_stock
&gt; +static
&gt; +ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
&gt; +    ZEND_ARG_INFO(0, stock_id)
&gt; +    ZEND_ARG_INFO(0, tooltip_text)
&gt; +    ZEND_ARG_INFO(0, tooltip_private_text)
&gt; +    ZEND_ARG_INFO(0, callback)
&gt; +    ZEND_ARG_INFO(0, position)
&gt; +ZEND_END_ARG_INFO();
&gt; +
&gt; +%%
&gt; +override gtk_toolbar_insert_stock
&gt; +PHP_METHOD
&gt; +{
&gt; +    zval *php_callback, *extra;
&gt; +    phpg_cb_data_t *cb_data;
&gt; +    GtkSignalFunc callback;
&gt; +    char *stock_id = NULL, *tooltip = NULL, *private_tooltip = NULL;
&gt; +    gint position = 0;
&gt; +    GObject *wrapped_obj;
&gt; +
&gt; +    NOT_STATIC_METHOD();
&gt; +
&gt; +    if (!php_gtk_parse_varargs(ZEND_NUM_ARGS(), 5, &amp;extra, "sssVi", 
&gt; &amp;stock_id, &amp;tooltip, &amp;private_tooltip, &amp;php_callback, &amp;position))
&gt; +        return;
&gt; +
&gt; +    if (php_callback) {
&gt; +        if (Z_TYPE_P(php_callback) == IS_NULL) {
&gt; +            cb_data  = NULL;
&gt; +            callback = NULL;
&gt; +        } else {
&gt; +            zval_add_ref(&amp;php_callback);
&gt; +            cb_data  = phpg_cb_data_new(php_callback, extra 
&gt; TSRMLS_CC);
&gt; +            callback = 
&gt; (GtkSignalFunc)phpg_toolbar_signal_func_marshal;
&gt; +        }
&gt; +    }
&gt; +
&gt; +    phpg_warn_deprecated("use GtkToolbar::insert" TSRMLS_CC);
&gt; +
&gt; +    wrapped_obj = (GObject *) 
&gt; gtk_toolbar_insert_stock(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
&gt; +                                    stock_id, tooltip, 
&gt; private_tooltip, callback, cb_data, position);
&gt; +
&gt; +    if (!wrapped_obj) {
&gt; +        PHPG_THROW_CONSTRUCT_EXCEPTION(GtkWidget);
&gt; +	}
&gt; +    phpg_gobject_new(&amp;return_value, wrapped_obj TSRMLS_CC);
&gt;  }
&gt;
&gt;  %%
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070204223335</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-02-04 22:33:35-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] win32 Build Problem</subject><body>

Hey Elizabeth,

Just let me get my paid work out of the way and I'll be on the case. It's a 
straightforward loading dependency.

- Steph

----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: &lt;php-gtk-dev@lists.php.net&gt;
Sent: Sunday, February 04, 2007 10:28 PM
Subject: [PHP-GTK-DEV] win32 Build Problem


&gt; Evening all,
&gt;
&gt; I've found another problem with the win32 build stuff and I'm not sure 
&gt; exactly how to fix it.  The issue is this, currently the gdk/gd 
&gt; interaction stuff relies on HAVE_GD_BUNDLED being defined.  Since this is 
&gt; never checked/added with the current windows build stuff, users are 
&gt; getting spurious Fatal error: PHP-GTK was not compiled aganst PHP with 
&gt; bundled GD library (which is marlarky, since if GD is built on windows it 
&gt; bundles the library...but I digress)
&gt;
&gt; The problem is this - how do I check to see if php_gd2.lib exists (and 
&gt; thus add it in to the build and add the /D HAVE_GD_BUNDLED) OR how do I 
&gt; check if the gd stuff exists in the php5[ts][_debug].lib?  It seems like 
&gt; this should be transparent and not have to have a configure switch...but I 
&gt; really can't figure out a good way to do it.  With the right lib (either 
&gt; adding php_gd2.lib to the link libs or building it into php) along with 
&gt; the compiler flag it builds and works great.
&gt;
&gt; I do have an almost fix for the php_gd2.lib - I can manually search for 
&gt; the lib and then use CHECK_LIB and add the appropriate CFLAG if it does 
&gt; exist.  However, a built in GD is a lot harder to deal with.  I've tried 
&gt; cheating by finding and reading the appropriate php lib into a string and 
&gt; doing a regex match on it...however this fails miserably (I don't think 
&gt; jscript likes all the nutty characters)  I have yet to find a way in the 
&gt; build system to do this kind of check.
&gt;
&gt; So, do I make enabling gd a configure switch?  Does someone else have a 
&gt; better way of detecting if gd was built (shared or not) with the existing 
&gt; php lib?  This really should be fixed for windows users!
&gt;
&gt; Thanks,
&gt; Elizabeth Smith
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070204223933</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-02-04 22:39:33-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] win32 Build Problem</subject><body>

ps and I should also ask what on earth relies on gd in PHP-GTK alpha? Can 
you please churn out a bug test script?

----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: &lt;php-gtk-dev@lists.php.net&gt;
Sent: Sunday, February 04, 2007 10:28 PM
Subject: [PHP-GTK-DEV] win32 Build Problem


&gt; Evening all,
&gt;
&gt; I've found another problem with the win32 build stuff and I'm not sure 
&gt; exactly how to fix it.  The issue is this, currently the gdk/gd 
&gt; interaction stuff relies on HAVE_GD_BUNDLED being defined.  Since this is 
&gt; never checked/added with the current windows build stuff, users are 
&gt; getting spurious Fatal error: PHP-GTK was not compiled aganst PHP with 
&gt; bundled GD library (which is marlarky, since if GD is built on windows it 
&gt; bundles the library...but I digress)
&gt;
&gt; The problem is this - how do I check to see if php_gd2.lib exists (and 
&gt; thus add it in to the build and add the /D HAVE_GD_BUNDLED) OR how do I 
&gt; check if the gd stuff exists in the php5[ts][_debug].lib?  It seems like 
&gt; this should be transparent and not have to have a configure switch...but I 
&gt; really can't figure out a good way to do it.  With the right lib (either 
&gt; adding php_gd2.lib to the link libs or building it into php) along with 
&gt; the compiler flag it builds and works great.
&gt;
&gt; I do have an almost fix for the php_gd2.lib - I can manually search for 
&gt; the lib and then use CHECK_LIB and add the appropriate CFLAG if it does 
&gt; exist.  However, a built in GD is a lot harder to deal with.  I've tried 
&gt; cheating by finding and reading the appropriate php lib into a string and 
&gt; doing a regex match on it...however this fails miserably (I don't think 
&gt; jscript likes all the nutty characters)  I have yet to find a way in the 
&gt; build system to do this kind of check.
&gt;
&gt; So, do I make enabling gd a configure switch?  Does someone else have a 
&gt; better way of detecting if gd was built (shared or not) with the existing 
&gt; php lib?  This really should be fixed for windows users!
&gt;
&gt; Thanks,
&gt; Elizabeth Smith
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070204224521</emailId><senderName>Elizabeth Smith</senderName><senderEmail>emsmith@elizabethmariesmith.com</senderEmail><timestampReceived>2007-02-04 22:45:21-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] win32 Build Problem</subject><body>

Steph Fox wrote:
&gt; ps and I should also ask what on earth relies on gd in PHP-GTK alpha? 
&gt; Can you please churn out a bug test script?
Actually it's just one method -

Gdk has an extra "interact with gd" function (which is WAY useful but 
will probably be extinct when cairo gets finished) - without the 
HAVE_GD_BUNDLED it throws a fatal error on use...

GdkPixbuf::new_from_gd() - the manual has a nifty example using it (and 
I know we were hindered in phpthrowdown because we had to keep writing 
our gd images out to temp files because the method wasn't available on 
windows...)

http://gtk.php.net/manual/en/gdk.gdkpixbuf.constructor.new_from_gd.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070204231141</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-02-04 23:11:41-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] win32 Build Problem</subject><body>

&gt; Steph Fox wrote:
&gt;&gt; ps and I should also ask what on earth relies on gd in PHP-GTK alpha? Can 
&gt;&gt; you please churn out a bug test script?
&gt; Actually it's just one method -

Yeah, I found this now.

&gt; Gdk has an extra "interact with gd" function (which is WAY useful but will 
&gt; probably be extinct when cairo gets finished) - without the 
&gt; HAVE_GD_BUNDLED it throws a fatal error on use...

.... saying 'you built this copy of PHP-GTK against a copy of PHP without GD 
bundled', right...

&gt; GdkPixbuf::new_from_gd() - the manual has a nifty example using it (and I 
&gt; know we were hindered in phpthrowdown because we had to keep writing our 
&gt; gd images out to temp files because the method wasn't available on 
&gt; windows...)

So why didn't you build one that did? Or was that against the rules?

How did the throwdown go, anyway?

&gt;
&gt; http://gtk.php.net/manual/en/gdk.gdkpixbuf.constructor.new_from_gd.php

OK. I think the best approach would be to have a --without-gd configure 
option and make it a dependency by default.

- Steph
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070204233427</emailId><senderName>Christian Weiske</senderName><senderEmail>cweiske@cweiske.de</senderEmail><timestampReceived>2007-02-04 23:34:27-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] win32 Build Problem</subject><body>


Steph,

&gt; How did the throwdown go, anyway?
Our blog entries tell everything:
http://gtkmw.blogture.com/
http://cweiske.de/tagebuch/PHPthrowdown%202007%20retrospective.htm

-- 
Regards/Mit freundlichen Grüßen
Christian Weiske


["signature.asc" (application/pgp-signature)]

</body></email><email><emailId>20070125155624</emailId><senderName>Elizabeth Smith</senderName><senderEmail>emsmith@elizabethmariesmith.com</senderEmail><timestampReceived>2007-01-25 15:56:24-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkPlug for Windows</subject><body>

&gt; Also I'm sending a couple demos to use with the new functions. (Thanks 
&gt; to Leon Pegg for writing them :)
&gt;
&gt; Thanks,
&gt; Elizabeth Smith
sorry, it stripped those attachments...let's try again

["demo.txt" (text/plain)]

GtkSocket.php
&lt;?php

$status = new GtkLabel( 'socket ID:');
$socket = new GtkSocket();
$vbox = new GtkVBox();
$window	= new GtkWindow();

$vbox-&gt;pack_start($socket);
$vbox-&gt;pack_start($status);

$window-&gt;add($vbox);
$window-&gt;set_title('socket window');
$window-&gt;connect_simple('destroy', array('gtk', 'main_quit'));

$socket-&gt;realize();
$status-&gt;set_text('socket ID : '.$socket-&gt;get_id());
$socket-&gt;connect_simple('plug-added',array($status,'set_text'),'Plug Added');
$socket-&gt;connect_simple('plug-removed',array($status,'set_text'),'Plug Removed');

$window-&gt;show_all();

Gtk::main();

?&gt;

GtkPlug.php
&lt;?php
if( $argc != 2) {
	die( 'Please pass the socket id as parameter!' . "\r\n");
}

$socketid = $argv[1];
$plug = new GtkPlug((integer)$socketid);
//$plug-&gt;set_default_size( 300, 300);
$plug-&gt;connect_simple('destroy', array('gtk', 'main_quit'));
$plug-&gt;set_title( 'plug');
//$plug-&gt;set_decorated(false);

$label	= new GtkLabel( 'hello from outer space');
$plug-&gt;add($label);
$plug-&gt;show_all();

function changeLabel($objButton, $objLabel, $strLabel) {
	$objLabel-&gt;set_text($strLabel);
}

$window2	= new GtkWindow();
$window2-&gt;set_title( 'plug controller');
$window2-&gt;set_default_size( 200, 300);
$window2-&gt;connect_simple('destroy', array('gtk', 'main_quit'));
$vbox = new GtkVBox();

$arLabels	= array( 'Hello!', 'Yes, I can control you', 'Don\'t believe it, heh?');
foreach( $arLabels as $strLabel) {
	$btn= new GtkButton( $strLabel);
	$btn-&gt;connect( 'clicked', 'changeLabel', $label, $strLabel);
	$vbox-&gt;pack_start( $btn);
}
$window2-&gt;add( $vbox);
$window2-&gt;show_all();

Gtk::main();
?&gt;


-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070127062611</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-27 06:26:11-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkPlug for Windows</subject><body>

Erm, in GTK+ 2.6 gtkplug and gtksocket headers weren't even part of the 
win32 distribution :)  that's why they're both on ignore in PHP-GTK 2.

Will look into it, but this is going to be after the weekend I think... 
since it means getting hold of two more sets of GTK libs, headers and 
runtime here...

----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: &lt;php-gtk-dev@lists.php.net&gt;
Sent: Thursday, January 25, 2007 3:51 PM
Subject: [PHP-GTK-DEV] GtkPlug for Windows


&gt; Morning,
&gt;
&gt; As of Gtk+ 2.8 gtkplug and gtksocket work on windows.  I don't know if
&gt; anyone has tested the current gtkplug constructor override but I found
&gt; it didn't work (at least on windows).
&gt;
&gt; The attached diff adds the construct method (which is different from new
&gt; and doesn't create and object).  The diff also changes the original
&gt; override to call gtk_plug_new.  If you send new GtkPlug a socket_id of 0
&gt; you can later call GtkPlug-&gt;construct with a new socket_id.
&gt;
&gt; It would be nice if there was a way to mark something in the generator
&gt; relevant for a specific library version - then php-gtk2 could build
&gt; against 2.6, 2.8 and 2.10.
&gt;
&gt; Anyway, the attachment replaces the current gtkplug constructor override
&gt; and adds the construct method, it also removes the win32 ignores - that
&gt; part may need to be omitted until there's a way to mark items by gtk lib
&gt; version or the requirement for php-gtk2 is raised from 2.6.
&gt;
&gt; Also I'm sending a couple demos to use with the new functions. (Thanks
&gt; to Leon Pegg for writing them :)
&gt;
&gt; Thanks,
&gt; Elizabeth Smith
&gt;


--------------------------------------------------------------------------------


&gt; Index: gtk.overrides
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/ext/gtk+/gtk.overrides,v
&gt; retrieving revision 1.235
&gt; diff -u -r1.235 gtk.overrides
&gt; --- gtk.overrides 23 Jan 2007 18:26:08 -0000 1.235
&gt; +++ gtk.overrides 25 Jan 2007 15:47:05 -0000
&gt; @@ -234,10 +234,6 @@
&gt; ignore
&gt;     GtkArgFlags
&gt;     GtkPrivateFlags
&gt; -%%
&gt; -ignore-win32
&gt; -    GtkPlug
&gt; -    GtkSocket
&gt; %% }}}
&gt;
&gt; %% {{{ constants
&gt; @@ -4119,6 +4115,38 @@
&gt; {
&gt;     gulong socket_id;
&gt;     zval *display = NULL;
&gt; +    GtkWidget *wrapped_obj = NULL;
&gt; +
&gt; +    if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "i|O", &amp;socket_id, 
&gt; &amp;display))
&gt; +        PHPG_THROW_CONSTRUCT_EXCEPTION(GtkPlug);
&gt; +
&gt; +    if (display) {
&gt; +        wrapped_obj = 
&gt; gtk_plug_new_for_display(GDK_DISPLAY(PHPG_GOBJECT(display)), socket_id);
&gt; +    } else {
&gt; +        wrapped_obj = gtk_plug_new(socket_id);
&gt; +    }
&gt; +
&gt; +    if (!wrapped_obj) {
&gt; +        PHPG_THROW_CONSTRUCT_EXCEPTION(GtkPlug);
&gt; +    }
&gt; +
&gt; +    phpg_gobject_new(&amp;this_ptr, (GObject *) wrapped_obj TSRMLS_CC);
&gt; +}
&gt; +
&gt; +%%
&gt; +add-arginfo GtkPlug construct
&gt; +static
&gt; +ZEND_BEGIN_ARG_INFO_EX(ARGINFO_NAME, 0, 0, 1)
&gt; +    ZEND_ARG_INFO(0, socket_id)
&gt; +    ZEND_ARG_OBJ_INFO(0, display, GdkDisplay, 1)
&gt; +ZEND_END_ARG_INFO();
&gt; +
&gt; +%%
&gt; +add GtkPlug construct
&gt; +PHP_METHOD
&gt; +{
&gt; +    gulong socket_id;
&gt; +    zval *display = NULL;
&gt;     GObject *wrapped_obj = NULL;
&gt;
&gt;     if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "i|O", &amp;socket_id, &amp;display))
&gt; @@ -4136,8 +4164,9 @@
&gt;     if (!wrapped_obj) {
&gt;         PHPG_THROW_CONSTRUCT_EXCEPTION(GtkPlug);
&gt;     }
&gt; -}
&gt;
&gt; +    phpg_gobject_new(&amp;this_ptr, (GObject *) wrapped_obj TSRMLS_CC);
&gt; +}
&gt; %% }}}
&gt;
&gt; %% {{{ GtkPixmap
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070127190149</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-27 19:01:49-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkPlug for Windows</subject><body>

Leaving aside the actual patch code (which is not correct), what is  
the utility of a separate gtk_plug_construct() function? The  
documentation states that "This function will generally only be used  
by classes deriving from GtkPlug." If, as you say, you create a new  
GtkPlug with a socket_id of 0, the documentation suggests "plugging  
into a GtkSocket by gtk_socket_add_id".

-Andrei


On Jan 25, 2007, at 7:51 AM, Elizabeth Smith wrote:

&gt; Morning,
&gt;
&gt; As of Gtk+ 2.8 gtkplug and gtksocket work on windows.  I don't know  
&gt; if anyone has tested the current gtkplug constructor override but I  
&gt; found it didn't work (at least on windows).
&gt;
&gt; The attached diff adds the construct method (which is different  
&gt; from new and doesn't create and object).  The diff also changes the  
&gt; original override to call gtk_plug_new.  If you send new GtkPlug a  
&gt; socket_id of 0 you can later call GtkPlug-&gt;construct with a new  
&gt; socket_id.
&gt;
&gt; It would be nice if there was a way to mark something in the  
&gt; generator relevant for a specific library version - then php-gtk2  
&gt; could build against 2.6, 2.8 and 2.10.
&gt;
&gt; Anyway, the attachment replaces the current gtkplug constructor  
&gt; override and adds the construct method, it also removes the win32  
&gt; ignores - that part may need to be omitted until there's a way to  
&gt; mark items by gtk lib version or the requirement for php-gtk2 is  
&gt; raised from 2.6.
&gt;
&gt; Also I'm sending a couple demos to use with the new functions.  
&gt; (Thanks to Leon Pegg for writing them :)
&gt;
&gt; Thanks,
&gt; Elizabeth Smith
&gt; Index: gtk.overrides
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/ext/gtk+/gtk.overrides,v
&gt; retrieving revision 1.235
&gt; diff -u -r1.235 gtk.overrides
&gt; --- gtk.overrides	23 Jan 2007 18:26:08 -0000	1.235
&gt; +++ gtk.overrides	25 Jan 2007 15:47:05 -0000
&gt; @@ -234,10 +234,6 @@
&gt;  ignore
&gt;      GtkArgFlags
&gt;      GtkPrivateFlags
&gt; -%%
&gt; -ignore-win32
&gt; -    GtkPlug
&gt; -    GtkSocket
&gt;  %% }}}
&gt;
&gt;  %% {{{ constants
&gt; @@ -4119,6 +4115,38 @@
&gt;  {
&gt;      gulong socket_id;
&gt;      zval *display = NULL;
&gt; +    GtkWidget *wrapped_obj = NULL;
&gt; +
&gt; +    if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "i|O", &amp;socket_id,  
&gt; &amp;display))
&gt; +        PHPG_THROW_CONSTRUCT_EXCEPTION(GtkPlug);
&gt; +
&gt; +    if (display) {
&gt; +        wrapped_obj = gtk_plug_new_for_display(GDK_DISPLAY 
&gt; (PHPG_GOBJECT(display)), socket_id);
&gt; +    } else {
&gt; +        wrapped_obj = gtk_plug_new(socket_id);
&gt; +    }
&gt; +
&gt; +    if (!wrapped_obj) {
&gt; +        PHPG_THROW_CONSTRUCT_EXCEPTION(GtkPlug);
&gt; +    }
&gt; +
&gt; +    phpg_gobject_new(&amp;this_ptr, (GObject *) wrapped_obj TSRMLS_CC);
&gt; +}
&gt; +
&gt; +%%
&gt; +add-arginfo GtkPlug construct
&gt; +static
&gt; +ZEND_BEGIN_ARG_INFO_EX(ARGINFO_NAME, 0, 0, 1)
&gt; +    ZEND_ARG_INFO(0, socket_id)
&gt; +    ZEND_ARG_OBJ_INFO(0, display, GdkDisplay, 1)
&gt; +ZEND_END_ARG_INFO();
&gt; +
&gt; +%%
&gt; +add GtkPlug construct
&gt; +PHP_METHOD
&gt; +{
&gt; +    gulong socket_id;
&gt; +    zval *display = NULL;
&gt;      GObject *wrapped_obj = NULL;
&gt;
&gt;      if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "i|O", &amp;socket_id,  
&gt; &amp;display))
&gt; @@ -4136,8 +4164,9 @@
&gt;      if (!wrapped_obj) {
&gt;          PHPG_THROW_CONSTRUCT_EXCEPTION(GtkPlug);
&gt;      }
&gt; -}
&gt;
&gt; +    phpg_gobject_new(&amp;this_ptr, (GObject *) wrapped_obj TSRMLS_CC);
&gt; +}
&gt;  %% }}}
&gt;
&gt;  %% {{{ GtkPixmap
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070130182636</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-01-30 18:26:36-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkPlug for Windows</subject><body>

Here's a fixed version of the override for gtkplug constructor (the 
current override doesn't work at all - go ahead try it, you get 
"internal object not found") - thanks to anant for the help

I added a construct method initially because ruby/gnome has it.  Pygtk 
doesn't - it doesn't really matter I was simply checking parity with 
other language wrappers.  If you don't think it's needed then it doesn't 
need to be in - whatever.

Thanks,
Elizabeth Smith

["gtk.overrides.patch" (text/plain)]

Index: gtk.overrides
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/gtk.overrides,v
retrieving revision 1.235
diff -u -r1.235 gtk.overrides
--- gtk.overrides	23 Jan 2007 18:26:08 -0000	1.235
+++ gtk.overrides	30 Jan 2007 18:23:31 -0000
@@ -4114,28 +4114,36 @@
 %% {{{ GtkPlug
 
 %%
+add-arginfo GtkPlug construct
+static
+ZEND_BEGIN_ARG_INFO_EX(ARGINFO_NAME, 0, 0, 1)
+    ZEND_ARG_INFO(0, socket_id)
+    ZEND_ARG_OBJ_INFO(0, display, GdkDisplay, 1)
+ZEND_END_ARG_INFO();
+
+%%
 override gtk_plug_new
 PHP_METHOD
 {
     gulong socket_id;
     zval *display = NULL;
-    GObject *wrapped_obj = NULL;
-
+    GtkWidget *wrapped_obj = NULL;
+ 
     if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "i|O", &amp;socket_id, &amp;display))
         PHPG_THROW_CONSTRUCT_EXCEPTION(GtkPlug);
 
-    wrapped_obj = g_object_new(phpg_gtype_from_zval(this_ptr), NULL);
-
     if (display) {
-        gtk_plug_construct_for_display(GTK_PLUG(PHPG_GOBJECT(this_ptr)),
-                                       GDK_DISPLAY(PHPG_GOBJECT(display)), socket_id);
+        wrapped_obj = gtk_plug_new_for_display(GDK_DISPLAY(PHPG_GOBJECT(display)), socket_id);
+
     } else {
-        gtk_plug_construct(GTK_PLUG(PHPG_GOBJECT(this_ptr)), socket_id);
+        wrapped_obj = gtk_plug_new(socket_id);
     }
-
+ 
     if (!wrapped_obj) {
         PHPG_THROW_CONSTRUCT_EXCEPTION(GtkPlug);
     }
+ 
+    phpg_gobject_new(&amp;this_ptr, (GObject *) wrapped_obj TSRMLS_CC);
 }
 
 %% }}}



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070201143446</emailId><senderName>Elizabeth Smith</senderName><senderEmail>emsmith@elizabethmariesmith.com</senderEmail><timestampReceived>2007-02-01 14:34:46-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkPlug for Windows</subject><body>

Andrei Zmievski wrote:
&gt; Hi,
&gt;
&gt; There is a reason that we do:
&gt;
&gt;      wrapped_obj = g_object_new(phpg_gtype_from_zval(this_ptr), NULL);
&gt;
&gt; Instead of:
&gt;
&gt;      wrapped_obj = gtk_plug_new(socket_id);
&gt;
&gt; Either one creates GtkPlug object under normal circumstances. The 
&gt; difference appears when you try to subclass GtkPlug class in PHP-land 
&gt; and register it as a Gtk+ type. Now, since you have to call parent's 
&gt; constructor, the first call would properly get the gtype from your 
&gt; custom class and create your custom Gtk+ object. The second call would 
&gt; erroneously create GtkPlug.
&gt;
&gt; I think that we do not need the gtk_plug_construct() override. Just 
&gt; incorporate that call into the GtkPlug constructor.
&gt;
&gt; -Andrei
&gt;
The problem is that using the phpg_gtype_from_zval and then trying to
use gtk_plug_construct on it doesn't work - instead it throws Fatal
error: Internal object missing in GtkPlug wrapper  - so it's NOT
creating a GtkPlug  under normal circumstances - any ideas why this
isn't working?  I'd rather have a working implementation that can't be
subclassed in userland than have a non-working version that can :)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070201173747</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-02-01 17:37:47-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkPlug for Windows</subject><body>

Andrei,

&gt;&gt; Either one creates GtkPlug object under normal circumstances. The
&gt;&gt; difference appears when you try to subclass GtkPlug class in PHP-land
&gt;&gt; and register it as a Gtk+ type. Now, since you have to call parent's
&gt;&gt; constructor, the first call would properly get the gtype from your
&gt;&gt; custom class and create your custom Gtk+ object. The second call would
&gt;&gt; erroneously create GtkPlug.
&gt;&gt;
&gt;&gt; I think that we do not need the gtk_plug_construct() override. Just
&gt;&gt; incorporate that call into the GtkPlug constructor.

&gt; The problem is that using the phpg_gtype_from_zval and then trying to
&gt; use gtk_plug_construct on it doesn't work - instead it throws Fatal
&gt; error: Internal object missing in GtkPlug wrapper  - so it's NOT
&gt; creating a GtkPlug  under normal circumstances - any ideas why this
&gt; isn't working?  I'd rather have a working implementation that can't be
&gt; subclassed in userland than have a non-working version that can :)

Elizabeth is right. g_object_new() doesn't work in GtkPlug's case; I
assume that's because gtk_plug_new() performs some additional steps that
is critical to the widget's functioning. If we can figure what those
steps are; we can call g_object_new() and those steps and do away with
gtk_plug_new(). For now, however, this seems to be the only way to get
the thing to work.

As for subclasssing, we can wrap gtk_plug_construct() and mention in the
docs that you'd have to use that if they're planning to extend GtkPlug.
Or just warn the user as in GtkMessageDialog's case :)

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070202021504</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-02-02 02:15:04-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkPlug for Windows</subject><body>

On Feb 1, 2007, at 9:25 AM, Anant Narayanan wrote:

&gt;&gt; The problem is that using the phpg_gtype_from_zval and then trying to
&gt;&gt; use gtk_plug_construct on it doesn't work - instead it throws Fatal
&gt;&gt; error: Internal object missing in GtkPlug wrapper  - so it's NOT
&gt;&gt; creating a GtkPlug  under normal circumstances - any ideas why this
&gt;&gt; isn't working?  I'd rather have a working implementation that  
&gt;&gt; can't be
&gt;&gt; subclassed in userland than have a non-working version that can :)
&gt;
&gt; Elizabeth is right. g_object_new() doesn't work in GtkPlug's case; I
&gt; assume that's because gtk_plug_new() performs some additional steps  
&gt; that
&gt; is critical to the widget's functioning. If we can figure what those
&gt; steps are; we can call g_object_new() and those steps and do away with
&gt; gtk_plug_new(). For now, however, this seems to be the only way to get
&gt; the thing to work.

The g_object_new() works perfectly well with GtkPlug. The problem was  
that I screwed up in the initial override and used PHPG_GOBJECT 
(this_ptr) instead of wrapped_obj in the call to gtk_plug_construct 
(). I've committed a fix and tested and it seems to work fine.

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070130232924</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-30 23:29:24-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Allow out-of-box-build for MSVC 2005</subject><body>

I need more time than I currently have to test this - can I 'put it with the 
others' and check it after I've missed my current deadlines?

----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: &lt;php-gtk-dev@lists.php.net&gt;
Sent: Tuesday, January 30, 2007 11:16 PM
Subject: [PHP-GTK-DEV] Allow out-of-box-build for MSVC 2005


&gt; Evening,
&gt;
&gt; I started a new thread here because I think everyone was getting
&gt; confused with all the generator patch stuff, and this is really
&gt; something completely different.
&gt;
&gt; I know you're not looking to move the official builds off of MSVC6 for a
&gt; while, Steph, (or at least until Edin moves PHP itself) but it's really
&gt; annoying to have to alter a bunch of php-gtk2 files just to build
&gt; development versions here with MSVC 2005 - any chance I can get an ok to
&gt; apply the attached patch?
&gt;
&gt; It allows for three things - it folds in support for --enable-debug-pack
&gt; (something the regular php build system already provides, in fact I
&gt; copied the support from there, and it is very useful for tracking
&gt; annoying windows crashes with release builds), allows --disable-zts to
&gt; do non-thread-safe builds, and allows MSVC 2005 to compile php-gtk "out
&gt; of the box"  (fixes compiler flags and adds manifest packing) All the
&gt; changes are transparent, meaning you won't even see them on MSVC6 (well,
&gt; unless you want to use one of the new configure flags) because they're
&gt; only applied when the right compiler is detected so it should not affect
&gt; current builds at all.
&gt;
&gt; The only potentially problematic change is in php_gtk.h - the
&gt; config.w32.h must be included before php.h - there are 2005 specific
&gt; pragmas in there that tell the stupid compiler which types to use -
&gt; without the change the compiler bombs miserably however I don't believe
&gt; this should change anything.
&gt;
&gt; Thanks,
&gt; Elizabeth Smith
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; Index: main/php_gtk.h
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/main/php_gtk.h,v
&gt; retrieving revision 1.138
&gt; diff -u -r1.138 php_gtk.h
&gt; --- main/php_gtk.h 15 Oct 2006 00:48:48 -0000 1.138
&gt; +++ main/php_gtk.h 30 Jan 2007 20:38:50 -0000
&gt; @@ -23,13 +23,13 @@
&gt; #ifndef _PHP_GTK_H
&gt; #define _PHP_GTK_H
&gt;
&gt; -#include "php.h"
&gt; -#include "php_ini.h"
&gt; #ifdef PHP_WIN32
&gt; #include "config.w32.h"
&gt; #else
&gt; #include "config.h"
&gt; #endif
&gt; +#include "php.h"
&gt; +#include "php_ini.h"
&gt;
&gt; /* workaround for expat-related declaration in PHP compat file */
&gt; #ifdef lookup
&gt; Index: win32/config.w32.in
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/config.w32.in,v
&gt; retrieving revision 1.12
&gt; diff -u -r1.12 config.w32.in
&gt; --- win32/config.w32.in 17 Jun 2006 14:47:08 -0000 1.12
&gt; +++ win32/config.w32.in 30 Jan 2007 21:14:37 -0000
&gt; @@ -14,6 +14,9 @@
&gt; PATH_PROG('link', WshShell.Environment("Process").Item("PATH"), "LD");
&gt; PATH_PROG('nmake');
&gt;
&gt; +// Try locating manifest tool
&gt; +PATH_PROG('mt', WshShell.Environment("Process").Item("PATH"), "MT");
&gt; +
&gt; // we don't want to define LIB, as that will override the default library 
&gt; path set in that env var
&gt; PATH_PROG('lib', null, 'MAKE_LIB');
&gt; PATH_PROG('php');
&gt; @@ -45,6 +48,7 @@
&gt;
&gt; ARG_WITH('php-build', 'Path to where you extracted 
&gt; http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of 
&gt; this source dir (..\\php_build) if not specified', 'no');
&gt; ARG_WITH('cygwin', 'Path to cygwin utilities on your system', '\\cygwin');
&gt; +ARG_ENABLE('zts', 'Thread safety', 'yes');
&gt;
&gt; // stick objects somewhere outside of the source tree
&gt; ARG_ENABLE('object-out-dir', 'Alternative location for binary objects 
&gt; during build', '');
&gt; @@ -56,6 +60,10 @@
&gt; }
&gt;
&gt; ARG_ENABLE('debug', 'Compile with debugging symbols', "no");
&gt; +ARG_ENABLE('debug-pack', 'Release binaries with external debug symbols 
&gt; (--enable-debug must not be specified)', 'no');
&gt; +if (PHP_GTK_DEBUG == "yes" &amp;&amp; PHP_GTK_DEBUG_PACK == "yes") {
&gt; + ERROR("Use of both --enable-debug and --enable-debug-pack not 
&gt; allowed.");
&gt; +}
&gt;
&gt; // Set some debug-specific options
&gt; if (PHP_GTK_DEBUG == "yes") {
&gt; @@ -81,22 +89,36 @@
&gt; DEFINE("LIBS", "kernel32.lib user32.lib gdi32.lib winspool.lib 
&gt; comdlg32.lib advapi32.lib shell32.lib ole32.lib");
&gt;
&gt; if (PHP_GTK_DEBUG == "yes") {
&gt; - DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. 
&gt; /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend 
&gt; /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D 
&gt; WIN32 /D _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; + DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. 
&gt; /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend 
&gt; /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 /D 
&gt; _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt;  ADD_FLAG("LDFLAGS", "/debug");
&gt;
&gt; } else {
&gt; - DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main 
&gt; /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I 
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D 
&gt; WIN32 /D NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; + DEFINE("CFLAGS", "/nologo /MD /W3 /O2 /I . /I ..\\ /I ..\\.. /I main /I 
&gt; ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I 
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D 
&gt; NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; + // Generate external debug files when --enable-debug-pack is specified
&gt; + if (PHP_GTK_DEBUG_PACK == "yes") {
&gt; + ADD_FLAG("CFLAGS", "/Zi");
&gt; + ADD_FLAG("LDFLAGS", "/incremental:no /debug /opt:ref,icf");
&gt; + }
&gt; }
&gt;
&gt; if (VCVERS &lt; 14) {
&gt;  // Enable automatic precompiled headers
&gt; - ADD_FLAG('CFLAGS', '/YX /c');
&gt; + ADD_FLAG('CFLAGS', '/YX /c /GX');
&gt; }
&gt;
&gt; if (VCVERS &gt;= 14) {
&gt;  // fun stuff: MS deprecated ANSI stdio and similar functions - disable 
&gt; warnings
&gt;  // GS hardens the binary against buffer overruns
&gt; - ADD_FLAG('CFLAGS', '/GS /wd4996 ');
&gt; + ADD_FLAG('CFLAGS', '/EHsc /GS /wd4996 ');
&gt; + if (PHP_GTK_DEBUG == "yes")
&gt; + {
&gt; + // Set some debug/release specific options
&gt; + ADD_FLAG('CFLAGS', ' /RTC1 ');
&gt; + }
&gt; +}
&gt; +
&gt; +if (PHP_GTK_ZTS == "yes") {
&gt; + ADD_FLAG("CFLAGS", "/D ZTS=1");
&gt; }
&gt;
&gt; if (PHP_GTK_PHP_BUILD == 'no') {
&gt; Index: win32/confutils.js
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/confutils.js,v
&gt; retrieving revision 1.19
&gt; diff -u -r1.19 confutils.js
&gt; --- win32/confutils.js 17 Jul 2006 17:00:09 -0000 1.19
&gt; +++ win32/confutils.js 30 Jan 2007 21:18:50 -0000
&gt; @@ -668,6 +668,7 @@
&gt;
&gt;  MFO.WriteLine("$(BUILD_DIR)\\" + dllname + ": $(" + EXT + "_GLOBAL_OBJS)" 
&gt; + res_var);
&gt;  MFO.WriteLine("\t" + ld + " /out:$(BUILD_DIR)\\" + dllname + " $(" + EXT 
&gt; + "_LDFLAGS)" + dllflags + " $(LDFLAGS) $(" + EXT + "_GLOBAL_OBJS) 
&gt; $(LIBS_" + EXT + ")" + dep_libs + " $(LIBS)" + res_var);
&gt; + MFO.WriteLine("\t-@$(_VC_MANIFEST_EMBED_DLL)");
&gt;
&gt;  MFO.WriteBlankLines(1);
&gt;  MFO.WriteLine(dllname + ": $(BUILD_DIR)\\" + dllname);
&gt; @@ -968,6 +969,16 @@
&gt;  MF.WriteLine(keys[i] + "=" + configure_subst.Item(keys[i]) + " ");
&gt;  }
&gt;
&gt; + MF.WriteLine("!if $(MT) == \"\"");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("_VC_MANIFEST_EMBED_DLL=");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("!else");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("_VC_MANIFEST_EMBED_DLL= $(MT) -nologo -manifest 
&gt; $@.manifest -outputresource:$@;2");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("!endif");
&gt; +
&gt;  MF.WriteBlankLines(1);
&gt;  MF.WriteLine("all: $(EXT_TARGETS)");
&gt;
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070131054453</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-31 05:44:53-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Allow out-of-box-build for MSVC 2005</subject><body>

OK, I finally made time for looking (5am, heh). Wondering why you took GX 
out of the lineup for release builds and then added it back in to 2005-only 
release builds as EHsc... Is GX actually deprecated in 2005? If so, just 
change it to EHsc in the original line - that will work under VC6 too.

Please don't commit just yet, I can't keep my eyes open long enough to do a 
build right now and I'm not too sure about the MT business (why write any 
lines at all if mt doesn't exist? what happens when it's defined as ws?) or 
about the file include order. It probably won't break anything here, but it 
might for Andrei - we had all kinds of hell with circular inclusions at 
first.

- Steph

----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: &lt;php-gtk-dev@lists.php.net&gt;
Sent: Tuesday, January 30, 2007 11:16 PM
Subject: [PHP-GTK-DEV] Allow out-of-box-build for MSVC 2005


&gt; Evening,
&gt;
&gt; I started a new thread here because I think everyone was getting
&gt; confused with all the generator patch stuff, and this is really
&gt; something completely different.
&gt;
&gt; I know you're not looking to move the official builds off of MSVC6 for a
&gt; while, Steph, (or at least until Edin moves PHP itself) but it's really
&gt; annoying to have to alter a bunch of php-gtk2 files just to build
&gt; development versions here with MSVC 2005 - any chance I can get an ok to
&gt; apply the attached patch?
&gt;
&gt; It allows for three things - it folds in support for --enable-debug-pack
&gt; (something the regular php build system already provides, in fact I
&gt; copied the support from there, and it is very useful for tracking
&gt; annoying windows crashes with release builds), allows --disable-zts to
&gt; do non-thread-safe builds, and allows MSVC 2005 to compile php-gtk "out
&gt; of the box"  (fixes compiler flags and adds manifest packing) All the
&gt; changes are transparent, meaning you won't even see them on MSVC6 (well,
&gt; unless you want to use one of the new configure flags) because they're
&gt; only applied when the right compiler is detected so it should not affect
&gt; current builds at all.
&gt;
&gt; The only potentially problematic change is in php_gtk.h - the
&gt; config.w32.h must be included before php.h - there are 2005 specific
&gt; pragmas in there that tell the stupid compiler which types to use -
&gt; without the change the compiler bombs miserably however I don't believe
&gt; this should change anything.
&gt;
&gt; Thanks,
&gt; Elizabeth Smith
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; Index: main/php_gtk.h
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/main/php_gtk.h,v
&gt; retrieving revision 1.138
&gt; diff -u -r1.138 php_gtk.h
&gt; --- main/php_gtk.h 15 Oct 2006 00:48:48 -0000 1.138
&gt; +++ main/php_gtk.h 30 Jan 2007 20:38:50 -0000
&gt; @@ -23,13 +23,13 @@
&gt; #ifndef _PHP_GTK_H
&gt; #define _PHP_GTK_H
&gt;
&gt; -#include "php.h"
&gt; -#include "php_ini.h"
&gt; #ifdef PHP_WIN32
&gt; #include "config.w32.h"
&gt; #else
&gt; #include "config.h"
&gt; #endif
&gt; +#include "php.h"
&gt; +#include "php_ini.h"
&gt;
&gt; /* workaround for expat-related declaration in PHP compat file */
&gt; #ifdef lookup
&gt; Index: win32/config.w32.in
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/config.w32.in,v
&gt; retrieving revision 1.12
&gt; diff -u -r1.12 config.w32.in
&gt; --- win32/config.w32.in 17 Jun 2006 14:47:08 -0000 1.12
&gt; +++ win32/config.w32.in 30 Jan 2007 21:14:37 -0000
&gt; @@ -14,6 +14,9 @@
&gt; PATH_PROG('link', WshShell.Environment("Process").Item("PATH"), "LD");
&gt; PATH_PROG('nmake');
&gt;
&gt; +// Try locating manifest tool
&gt; +PATH_PROG('mt', WshShell.Environment("Process").Item("PATH"), "MT");
&gt; +
&gt; // we don't want to define LIB, as that will override the default library 
&gt; path set in that env var
&gt; PATH_PROG('lib', null, 'MAKE_LIB');
&gt; PATH_PROG('php');
&gt; @@ -45,6 +48,7 @@
&gt;
&gt; ARG_WITH('php-build', 'Path to where you extracted 
&gt; http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of 
&gt; this source dir (..\\php_build) if not specified', 'no');
&gt; ARG_WITH('cygwin', 'Path to cygwin utilities on your system', '\\cygwin');
&gt; +ARG_ENABLE('zts', 'Thread safety', 'yes');
&gt;
&gt; // stick objects somewhere outside of the source tree
&gt; ARG_ENABLE('object-out-dir', 'Alternative location for binary objects 
&gt; during build', '');
&gt; @@ -56,6 +60,10 @@
&gt; }
&gt;
&gt; ARG_ENABLE('debug', 'Compile with debugging symbols', "no");
&gt; +ARG_ENABLE('debug-pack', 'Release binaries with external debug symbols 
&gt; (--enable-debug must not be specified)', 'no');
&gt; +if (PHP_GTK_DEBUG == "yes" &amp;&amp; PHP_GTK_DEBUG_PACK == "yes") {
&gt; + ERROR("Use of both --enable-debug and --enable-debug-pack not 
&gt; allowed.");
&gt; +}
&gt;
&gt; // Set some debug-specific options
&gt; if (PHP_GTK_DEBUG == "yes") {
&gt; @@ -81,22 +89,36 @@
&gt; DEFINE("LIBS", "kernel32.lib user32.lib gdi32.lib winspool.lib 
&gt; comdlg32.lib advapi32.lib shell32.lib ole32.lib");
&gt;
&gt; if (PHP_GTK_DEBUG == "yes") {
&gt; - DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. 
&gt; /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend 
&gt; /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D 
&gt; WIN32 /D _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; + DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. 
&gt; /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend 
&gt; /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 /D 
&gt; _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt;  ADD_FLAG("LDFLAGS", "/debug");
&gt;
&gt; } else {
&gt; - DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main 
&gt; /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I 
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D 
&gt; WIN32 /D NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; + DEFINE("CFLAGS", "/nologo /MD /W3 /O2 /I . /I ..\\ /I ..\\.. /I main /I 
&gt; ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I 
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D 
&gt; NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; + // Generate external debug files when --enable-debug-pack is specified
&gt; + if (PHP_GTK_DEBUG_PACK == "yes") {
&gt; + ADD_FLAG("CFLAGS", "/Zi");
&gt; + ADD_FLAG("LDFLAGS", "/incremental:no /debug /opt:ref,icf");
&gt; + }
&gt; }
&gt;
&gt; if (VCVERS &lt; 14) {
&gt;  // Enable automatic precompiled headers
&gt; - ADD_FLAG('CFLAGS', '/YX /c');
&gt; + ADD_FLAG('CFLAGS', '/YX /c /GX');
&gt; }
&gt;
&gt; if (VCVERS &gt;= 14) {
&gt;  // fun stuff: MS deprecated ANSI stdio and similar functions - disable 
&gt; warnings
&gt;  // GS hardens the binary against buffer overruns
&gt; - ADD_FLAG('CFLAGS', '/GS /wd4996 ');
&gt; + ADD_FLAG('CFLAGS', '/EHsc /GS /wd4996 ');
&gt; + if (PHP_GTK_DEBUG == "yes")
&gt; + {
&gt; + // Set some debug/release specific options
&gt; + ADD_FLAG('CFLAGS', ' /RTC1 ');
&gt; + }
&gt; +}
&gt; +
&gt; +if (PHP_GTK_ZTS == "yes") {
&gt; + ADD_FLAG("CFLAGS", "/D ZTS=1");
&gt; }
&gt;
&gt; if (PHP_GTK_PHP_BUILD == 'no') {
&gt; Index: win32/confutils.js
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/confutils.js,v
&gt; retrieving revision 1.19
&gt; diff -u -r1.19 confutils.js
&gt; --- win32/confutils.js 17 Jul 2006 17:00:09 -0000 1.19
&gt; +++ win32/confutils.js 30 Jan 2007 21:18:50 -0000
&gt; @@ -668,6 +668,7 @@
&gt;
&gt;  MFO.WriteLine("$(BUILD_DIR)\\" + dllname + ": $(" + EXT + "_GLOBAL_OBJS)" 
&gt; + res_var);
&gt;  MFO.WriteLine("\t" + ld + " /out:$(BUILD_DIR)\\" + dllname + " $(" + EXT 
&gt; + "_LDFLAGS)" + dllflags + " $(LDFLAGS) $(" + EXT + "_GLOBAL_OBJS) 
&gt; $(LIBS_" + EXT + ")" + dep_libs + " $(LIBS)" + res_var);
&gt; + MFO.WriteLine("\t-@$(_VC_MANIFEST_EMBED_DLL)");
&gt;
&gt;  MFO.WriteBlankLines(1);
&gt;  MFO.WriteLine(dllname + ": $(BUILD_DIR)\\" + dllname);
&gt; @@ -968,6 +969,16 @@
&gt;  MF.WriteLine(keys[i] + "=" + configure_subst.Item(keys[i]) + " ");
&gt;  }
&gt;
&gt; + MF.WriteLine("!if $(MT) == \"\"");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("_VC_MANIFEST_EMBED_DLL=");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("!else");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("_VC_MANIFEST_EMBED_DLL= $(MT) -nologo -manifest 
&gt; $@.manifest -outputresource:$@;2");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("!endif");
&gt; +
&gt;  MF.WriteBlankLines(1);
&gt;  MF.WriteLine("all: $(EXT_TARGETS)");
&gt;
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070201014508</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-02-01 01:45:08-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Allow out-of-box-build for MSVC 2005</subject><body>

And here is patch version #2, Oh how much fun - I forgot a file in the 
last patch (you have to tell the gtk extension which php lib to build 
against with the zts option...oops) - and I also fixed the /gx thing by 
just switching it to ehsc(I wish they'd stop deprecating everything...)

Thanks,
Elizabeth Smith

["php-gtk.patch" (text/plain)]

Index: ext/gtk+/config.w32
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/config.w32,v
retrieving revision 1.5
diff -u -r1.5 config.w32
--- ext/gtk+/config.w32	24 Oct 2006 12:46:14 -0000	1.5
+++ ext/gtk+/config.w32	1 Feb 2007 01:35:11 -0000
@@ -1,5 +1,21 @@
-
-if (CHECK_HEADER("main/php.h") &amp;&amp; CHECK_LIB(PHP_GTK_DEBUG != "no" ? \
"php5ts_debug.lib" : "php5ts.lib", "php-gtk") &amp;&amp; +var check_lib;
+if(PHP_GTK_DEBUG == 'yes' &amp;&amp; PHP_GTK_ZTS == 'yes')
+{
+	check_lib = "php5ts_debug.lib";
+}
+else if(PHP_GTK_DEBUG == 'yes')
+{
+	check_lib = "php5_debug.lib";
+}
+else if(PHP_GTK_ZTS == 'yes')
+{
+	check_lib = "php5ts.lib";
+}
+else
+{
+	check_lib = "php5.lib";
+}
+if (CHECK_HEADER("main/php.h") &amp;&amp; CHECK_LIB(check_lib, "php-gtk") &amp;&amp;
 	CHECK_HEADER("iconv.h") &amp;&amp; CHECK_LIB("iconv.lib", "php-gtk") &amp;&amp;
 	CHECK_HEADER("libintl.h") &amp;&amp; CHECK_LIB("intl.lib", "php-gtk") &amp;&amp;
 	CHECK_HEADER("atk/atk.h") &amp;&amp; CHECK_LIB("atk-1.0.lib", "php-gtk") &amp;&amp;
Index: main/php_gtk.h
===================================================================
RCS file: /repository/php-gtk/main/php_gtk.h,v
retrieving revision 1.138
diff -u -r1.138 php_gtk.h
--- main/php_gtk.h	15 Oct 2006 00:48:48 -0000	1.138
+++ main/php_gtk.h	30 Jan 2007 20:38:50 -0000
@@ -23,13 +23,13 @@
 #ifndef _PHP_GTK_H
 #define _PHP_GTK_H
 
-#include "php.h"
-#include "php_ini.h"
 #ifdef PHP_WIN32
 #include "config.w32.h"
 #else
 #include "config.h"
 #endif
+#include "php.h"
+#include "php_ini.h"
 
 /* workaround for expat-related declaration in PHP compat file */
 #ifdef lookup
Index: win32/config.w32.in
===================================================================
RCS file: /repository/php-gtk/win32/config.w32.in,v
retrieving revision 1.12
diff -u -r1.12 config.w32.in
--- win32/config.w32.in	17 Jun 2006 14:47:08 -0000	1.12
+++ win32/config.w32.in	1 Feb 2007 01:33:29 -0000
@@ -14,6 +14,9 @@
 PATH_PROG('link', WshShell.Environment("Process").Item("PATH"), "LD");
 PATH_PROG('nmake');
 
+// Try locating manifest tool
+PATH_PROG('mt', WshShell.Environment("Process").Item("PATH"), "MT");
+
 // we don't want to define LIB, as that will override the default library path set \
in that env var  PATH_PROG('lib', null, 'MAKE_LIB');
 PATH_PROG('php');
@@ -45,6 +48,7 @@
 
 ARG_WITH('php-build', 'Path to where you extracted \
http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of this source \
dir (..\\php_build) if not specified', 'no');  ARG_WITH('cygwin', 'Path to cygwin \
utilities on your system', '\\cygwin'); +ARG_ENABLE('zts', 'Thread safety', 'yes');
 
 // stick objects somewhere outside of the source tree
 ARG_ENABLE('object-out-dir', 'Alternative location for binary objects during build', \
''); @@ -56,6 +60,10 @@
 }
 
 ARG_ENABLE('debug', 'Compile with debugging symbols', "no");
+ARG_ENABLE('debug-pack', 'Release binaries with external debug symbols \
(--enable-debug must not be specified)', 'no'); +if (PHP_GTK_DEBUG == "yes" &amp;&amp; \
PHP_GTK_DEBUG_PACK == "yes") { +	ERROR("Use of both --enable-debug and \
--enable-debug-pack not allowed."); +}
 
 // Set some debug-specific options
 if (PHP_GTK_DEBUG == "yes") {
@@ -81,11 +89,16 @@
 DEFINE("LIBS", "kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib \
advapi32.lib shell32.lib ole32.lib");  
 if (PHP_GTK_DEBUG == "yes") {
-	DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. /I main /I \
..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I ..\\php5\\TSRM /D \
ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 /D _DEBUG /D _WINDOWS /D \
_MBCS /D _USRDLL"); +	DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /EHsc /ZI /GZ /I . /I \
..\\ /I ..\\.. /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I \
..\\php5\\Zend /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 \
/D _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");  ADD_FLAG("LDFLAGS", "/debug");
 
 } else {
-	DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main /I \
..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I ..\\php5\\TSRM /D \
ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D NDEBUG /D _WINDOWS /D \
_MBCS /D _USRDLL"); +	DEFINE("CFLAGS", "/nologo /MD /W3 /O2 /EHsc /I . /I ..\\ /I \
..\\.. /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I \
..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D NDEBUG /D \
_WINDOWS /D _MBCS /D _USRDLL"); +	// Generate external debug files when \
--enable-debug-pack is specified +	if (PHP_GTK_DEBUG_PACK == "yes") {
+		ADD_FLAG("CFLAGS", "/Zi");
+		ADD_FLAG("LDFLAGS", "/incremental:no /debug /opt:ref,icf");
+	}
 }
 
 if (VCVERS &lt; 14) {
@@ -97,6 +110,15 @@
 	// fun stuff: MS deprecated ANSI stdio and similar functions - disable warnings
 	// GS hardens the binary against buffer overruns
 	ADD_FLAG('CFLAGS', '/GS /wd4996 ');
+	if (PHP_GTK_DEBUG == "yes")
+	{
+		// Set some debug/release specific options
+		ADD_FLAG('CFLAGS', ' /RTC1 ');
+	}
+}
+
+if (PHP_GTK_ZTS == "yes") {
+	ADD_FLAG("CFLAGS", "/D ZTS=1");
 }
 
 if (PHP_GTK_PHP_BUILD == 'no') {
Index: win32/confutils.js
===================================================================
RCS file: /repository/php-gtk/win32/confutils.js,v
retrieving revision 1.19
diff -u -r1.19 confutils.js
--- win32/confutils.js	17 Jul 2006 17:00:09 -0000	1.19
+++ win32/confutils.js	30 Jan 2007 21:18:50 -0000
@@ -668,6 +668,7 @@
 
 	MFO.WriteLine("$(BUILD_DIR)\\" + dllname + ": $(" + EXT + "_GLOBAL_OBJS)" + \
res_var);  MFO.WriteLine("\t" + ld + " /out:$(BUILD_DIR)\\" + dllname + " $(" + EXT + \
"_LDFLAGS)" + dllflags + " $(LDFLAGS) $(" + EXT + "_GLOBAL_OBJS) $(LIBS_" + EXT + ")" \
+ dep_libs + " $(LIBS)" + res_var); +	MFO.WriteLine("\t-@$(_VC_MANIFEST_EMBED_DLL)");
 
 	MFO.WriteBlankLines(1);
 	MFO.WriteLine(dllname + ": $(BUILD_DIR)\\" + dllname);
@@ -968,6 +969,16 @@
 		MF.WriteLine(keys[i] + "=" + configure_subst.Item(keys[i]) + " ");
 	}
 
+	MF.WriteLine("!if $(MT) == \"\"");
+	MF.WriteBlankLines(1);
+	MF.WriteLine("_VC_MANIFEST_EMBED_DLL=");
+	MF.WriteBlankLines(1);
+	MF.WriteLine("!else");
+	MF.WriteBlankLines(1);
+	MF.WriteLine("_VC_MANIFEST_EMBED_DLL= $(MT) -nologo -manifest $@.manifest \
-outputresource:$@;2"); +	MF.WriteBlankLines(1);
+	MF.WriteLine("!endif");
+
 	MF.WriteBlankLines(1);
 	MF.WriteLine("all: $(EXT_TARGETS)");
 



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070201170955</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-02-01 17:09:55-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Allow out-of-box-build for MSVC 2005</subject><body>

Andrei, hi,

Can I just ask you to run a quick test to check that this part of 
Elizabeth's patch doesn't send your build system into a frenzy?

Cheers...

Index: main/php_gtk.h
===================================================================
RCS file: /repository/php-gtk/main/php_gtk.h,v
retrieving revision 1.138
diff -u -r1.138 php_gtk.h
--- main/php_gtk.h 15 Oct 2006 00:48:48 -0000 1.138
+++ main/php_gtk.h 30 Jan 2007 20:38:50 -0000
@@ -23,13 +23,13 @@
 #ifndef _PHP_GTK_H
 #define _PHP_GTK_H

-#include "php.h"
-#include "php_ini.h"
 #ifdef PHP_WIN32
 #include "config.w32.h"
 #else
 #include "config.h"
 #endif
+#include "php.h"
+#include "php_ini.h"



----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: &lt;php-gtk-dev@lists.php.net&gt;
Sent: Thursday, February 01, 2007 1:45 AM
Subject: Re: [PHP-GTK-DEV] Allow out-of-box-build for MSVC 2005


&gt; And here is patch version #2, Oh how much fun - I forgot a file in the
&gt; last patch (you have to tell the gtk extension which php lib to build
&gt; against with the zts option...oops) - and I also fixed the /gx thing by
&gt; just switching it to ehsc(I wish they'd stop deprecating everything...)
&gt;
&gt; Thanks,
&gt; Elizabeth Smith
&gt;


--------------------------------------------------------------------------------


&gt; Index: ext/gtk+/config.w32
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/ext/gtk+/config.w32,v
&gt; retrieving revision 1.5
&gt; diff -u -r1.5 config.w32
&gt; --- ext/gtk+/config.w32 24 Oct 2006 12:46:14 -0000 1.5
&gt; +++ ext/gtk+/config.w32 1 Feb 2007 01:35:11 -0000
&gt; @@ -1,5 +1,21 @@
&gt; -
&gt; -if (CHECK_HEADER("main/php.h") &amp;&amp; CHECK_LIB(PHP_GTK_DEBUG != "no" ? 
&gt; "php5ts_debug.lib" : "php5ts.lib", "php-gtk") &amp;&amp;
&gt; +var check_lib;
&gt; +if(PHP_GTK_DEBUG == 'yes' &amp;&amp; PHP_GTK_ZTS == 'yes')
&gt; +{
&gt; + check_lib = "php5ts_debug.lib";
&gt; +}
&gt; +else if(PHP_GTK_DEBUG == 'yes')
&gt; +{
&gt; + check_lib = "php5_debug.lib";
&gt; +}
&gt; +else if(PHP_GTK_ZTS == 'yes')
&gt; +{
&gt; + check_lib = "php5ts.lib";
&gt; +}
&gt; +else
&gt; +{
&gt; + check_lib = "php5.lib";
&gt; +}
&gt; +if (CHECK_HEADER("main/php.h") &amp;&amp; CHECK_LIB(check_lib, "php-gtk") &amp;&amp;
&gt;  CHECK_HEADER("iconv.h") &amp;&amp; CHECK_LIB("iconv.lib", "php-gtk") &amp;&amp;
&gt;  CHECK_HEADER("libintl.h") &amp;&amp; CHECK_LIB("intl.lib", "php-gtk") &amp;&amp;
&gt;  CHECK_HEADER("atk/atk.h") &amp;&amp; CHECK_LIB("atk-1.0.lib", "php-gtk") &amp;&amp;
&gt; Index: main/php_gtk.h
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/main/php_gtk.h,v
&gt; retrieving revision 1.138
&gt; diff -u -r1.138 php_gtk.h
&gt; --- main/php_gtk.h 15 Oct 2006 00:48:48 -0000 1.138
&gt; +++ main/php_gtk.h 30 Jan 2007 20:38:50 -0000
&gt; @@ -23,13 +23,13 @@
&gt; #ifndef _PHP_GTK_H
&gt; #define _PHP_GTK_H
&gt;
&gt; -#include "php.h"
&gt; -#include "php_ini.h"
&gt; #ifdef PHP_WIN32
&gt; #include "config.w32.h"
&gt; #else
&gt; #include "config.h"
&gt; #endif
&gt; +#include "php.h"
&gt; +#include "php_ini.h"
&gt;
&gt; /* workaround for expat-related declaration in PHP compat file */
&gt; #ifdef lookup
&gt; Index: win32/config.w32.in
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/config.w32.in,v
&gt; retrieving revision 1.12
&gt; diff -u -r1.12 config.w32.in
&gt; --- win32/config.w32.in 17 Jun 2006 14:47:08 -0000 1.12
&gt; +++ win32/config.w32.in 1 Feb 2007 01:33:29 -0000
&gt; @@ -14,6 +14,9 @@
&gt; PATH_PROG('link', WshShell.Environment("Process").Item("PATH"), "LD");
&gt; PATH_PROG('nmake');
&gt;
&gt; +// Try locating manifest tool
&gt; +PATH_PROG('mt', WshShell.Environment("Process").Item("PATH"), "MT");
&gt; +
&gt; // we don't want to define LIB, as that will override the default library 
&gt; path set in that env var
&gt; PATH_PROG('lib', null, 'MAKE_LIB');
&gt; PATH_PROG('php');
&gt; @@ -45,6 +48,7 @@
&gt;
&gt; ARG_WITH('php-build', 'Path to where you extracted 
&gt; http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of 
&gt; this source dir (..\\php_build) if not specified', 'no');
&gt; ARG_WITH('cygwin', 'Path to cygwin utilities on your system', '\\cygwin');
&gt; +ARG_ENABLE('zts', 'Thread safety', 'yes');
&gt;
&gt; // stick objects somewhere outside of the source tree
&gt; ARG_ENABLE('object-out-dir', 'Alternative location for binary objects 
&gt; during build', '');
&gt; @@ -56,6 +60,10 @@
&gt; }
&gt;
&gt; ARG_ENABLE('debug', 'Compile with debugging symbols', "no");
&gt; +ARG_ENABLE('debug-pack', 'Release binaries with external debug symbols 
&gt; (--enable-debug must not be specified)', 'no');
&gt; +if (PHP_GTK_DEBUG == "yes" &amp;&amp; PHP_GTK_DEBUG_PACK == "yes") {
&gt; + ERROR("Use of both --enable-debug and --enable-debug-pack not 
&gt; allowed.");
&gt; +}
&gt;
&gt; // Set some debug-specific options
&gt; if (PHP_GTK_DEBUG == "yes") {
&gt; @@ -81,11 +89,16 @@
&gt; DEFINE("LIBS", "kernel32.lib user32.lib gdi32.lib winspool.lib 
&gt; comdlg32.lib advapi32.lib shell32.lib ole32.lib");
&gt;
&gt; if (PHP_GTK_DEBUG == "yes") {
&gt; - DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. 
&gt; /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend 
&gt; /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D 
&gt; WIN32 /D _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; + DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /EHsc /ZI /GZ /I . /I ..\\ /I 
&gt; ..\\.. /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I 
&gt; ..\\php5\\Zend /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=1 /D 
&gt; PHP_WIN32 /D WIN32 /D _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt;  ADD_FLAG("LDFLAGS", "/debug");
&gt;
&gt; } else {
&gt; - DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main 
&gt; /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I 
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D 
&gt; WIN32 /D NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; + DEFINE("CFLAGS", "/nologo /MD /W3 /O2 /EHsc /I . /I ..\\ /I ..\\.. /I 
&gt; main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I 
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D 
&gt; NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; + // Generate external debug files when --enable-debug-pack is specified
&gt; + if (PHP_GTK_DEBUG_PACK == "yes") {
&gt; + ADD_FLAG("CFLAGS", "/Zi");
&gt; + ADD_FLAG("LDFLAGS", "/incremental:no /debug /opt:ref,icf");
&gt; + }
&gt; }
&gt;
&gt; if (VCVERS &lt; 14) {
&gt; @@ -97,6 +110,15 @@
&gt;  // fun stuff: MS deprecated ANSI stdio and similar functions - disable 
&gt; warnings
&gt;  // GS hardens the binary against buffer overruns
&gt;  ADD_FLAG('CFLAGS', '/GS /wd4996 ');
&gt; + if (PHP_GTK_DEBUG == "yes")
&gt; + {
&gt; + // Set some debug/release specific options
&gt; + ADD_FLAG('CFLAGS', ' /RTC1 ');
&gt; + }
&gt; +}
&gt; +
&gt; +if (PHP_GTK_ZTS == "yes") {
&gt; + ADD_FLAG("CFLAGS", "/D ZTS=1");
&gt; }
&gt;
&gt; if (PHP_GTK_PHP_BUILD == 'no') {
&gt; Index: win32/confutils.js
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/confutils.js,v
&gt; retrieving revision 1.19
&gt; diff -u -r1.19 confutils.js
&gt; --- win32/confutils.js 17 Jul 2006 17:00:09 -0000 1.19
&gt; +++ win32/confutils.js 30 Jan 2007 21:18:50 -0000
&gt; @@ -668,6 +668,7 @@
&gt;
&gt;  MFO.WriteLine("$(BUILD_DIR)\\" + dllname + ": $(" + EXT + "_GLOBAL_OBJS)" 
&gt; + res_var);
&gt;  MFO.WriteLine("\t" + ld + " /out:$(BUILD_DIR)\\" + dllname + " $(" + EXT 
&gt; + "_LDFLAGS)" + dllflags + " $(LDFLAGS) $(" + EXT + "_GLOBAL_OBJS) 
&gt; $(LIBS_" + EXT + ")" + dep_libs + " $(LIBS)" + res_var);
&gt; + MFO.WriteLine("\t-@$(_VC_MANIFEST_EMBED_DLL)");
&gt;
&gt;  MFO.WriteBlankLines(1);
&gt;  MFO.WriteLine(dllname + ": $(BUILD_DIR)\\" + dllname);
&gt; @@ -968,6 +969,16 @@
&gt;  MF.WriteLine(keys[i] + "=" + configure_subst.Item(keys[i]) + " ");
&gt;  }
&gt;
&gt; + MF.WriteLine("!if $(MT) == \"\"");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("_VC_MANIFEST_EMBED_DLL=");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("!else");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("_VC_MANIFEST_EMBED_DLL= $(MT) -nologo -manifest 
&gt; $@.manifest -outputresource:$@;2");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("!endif");
&gt; +
&gt;  MF.WriteBlankLines(1);
&gt;  MF.WriteLine("all: $(EXT_TARGETS)");
&gt;
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070201180608</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-02-01 18:06:08-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] The Road Ahead</subject><body>

Then we need to get moving..

-Andrei

On Feb 1, 2007, at 9:10 AM, Anant Narayanan wrote:

&gt;&gt;&gt; We should be ready for a beta release in about a month; I think we
&gt;&gt;&gt; should make that release once (if) we have Gtk+ 2.8/2.10 in CVS and 
&gt;&gt;&gt; the
&gt;&gt;&gt; API coverage is hovering around the 90% mark. After that we can make 
&gt;&gt;&gt; the
&gt;&gt;&gt; full release with 100% (or close to) 2.6 coverage; part-coverage of
&gt;&gt;&gt; 2.8/2.10, extensions and documentation. Subsequent releases can 
&gt;&gt;&gt; improve
&gt;&gt;&gt; on those aspects.
&gt;&gt;
&gt;&gt; What are those percentages of? Gtk library coverage? Gdk? Pango? Or
&gt;&gt; overall?
&gt;
&gt; Overall.
&gt;
&gt; --
&gt; Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070202014005</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-02-02 01:40:05-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Allow out-of-box-build for MSVC 2005</subject><body>

Seems to work fine.

-Andrei


On Feb 1, 2007, at 9:09 AM, Steph Fox wrote:

&gt; Andrei, hi,
&gt;
&gt; Can I just ask you to run a quick test to check that this part of  
&gt; Elizabeth's patch doesn't send your build system into a frenzy?
&gt;
&gt; Cheers...
&gt;
&gt; Index: main/php_gtk.h
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/main/php_gtk.h,v
&gt; retrieving revision 1.138
&gt; diff -u -r1.138 php_gtk.h
&gt; --- main/php_gtk.h 15 Oct 2006 00:48:48 -0000 1.138
&gt; +++ main/php_gtk.h 30 Jan 2007 20:38:50 -0000
&gt; @@ -23,13 +23,13 @@
&gt; #ifndef _PHP_GTK_H
&gt; #define _PHP_GTK_H
&gt;
&gt; -#include "php.h"
&gt; -#include "php_ini.h"
&gt; #ifdef PHP_WIN32
&gt; #include "config.w32.h"
&gt; #else
&gt; #include "config.h"
&gt; #endif
&gt; +#include "php.h"
&gt; +#include "php_ini.h"
&gt;
&gt;
&gt;
&gt; ----- Original Message ----- From: "Elizabeth Smith"  
&gt; &lt;emsmith@elizabethmariesmith.com&gt;
&gt; To: &lt;php-gtk-dev@lists.php.net&gt;
&gt; Sent: Thursday, February 01, 2007 1:45 AM
&gt; Subject: Re: [PHP-GTK-DEV] Allow out-of-box-build for MSVC 2005
&gt;
&gt;
&gt;&gt; And here is patch version #2, Oh how much fun - I forgot a file in  
&gt;&gt; the
&gt;&gt; last patch (you have to tell the gtk extension which php lib to build
&gt;&gt; against with the zts option...oops) - and I also fixed the /gx  
&gt;&gt; thing by
&gt;&gt; just switching it to ehsc(I wish they'd stop deprecating  
&gt;&gt; everything...)
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt; Elizabeth Smith
&gt;&gt;
&gt;
&gt;
&gt; ---------------------------------------------------------------------- 
&gt; ----------
&gt;
&gt;
&gt;&gt; Index: ext/gtk+/config.w32
&gt;&gt; ===================================================================
&gt;&gt; RCS file: /repository/php-gtk/ext/gtk+/config.w32,v
&gt;&gt; retrieving revision 1.5
&gt;&gt; diff -u -r1.5 config.w32
&gt;&gt; --- ext/gtk+/config.w32 24 Oct 2006 12:46:14 -0000 1.5
&gt;&gt; +++ ext/gtk+/config.w32 1 Feb 2007 01:35:11 -0000
&gt;&gt; @@ -1,5 +1,21 @@
&gt;&gt; -
&gt;&gt; -if (CHECK_HEADER("main/php.h") &amp;&amp; CHECK_LIB(PHP_GTK_DEBUG !=  
&gt;&gt; "no" ? "php5ts_debug.lib" : "php5ts.lib", "php-gtk") &amp;&amp;
&gt;&gt; +var check_lib;
&gt;&gt; +if(PHP_GTK_DEBUG == 'yes' &amp;&amp; PHP_GTK_ZTS == 'yes')
&gt;&gt; +{
&gt;&gt; + check_lib = "php5ts_debug.lib";
&gt;&gt; +}
&gt;&gt; +else if(PHP_GTK_DEBUG == 'yes')
&gt;&gt; +{
&gt;&gt; + check_lib = "php5_debug.lib";
&gt;&gt; +}
&gt;&gt; +else if(PHP_GTK_ZTS == 'yes')
&gt;&gt; +{
&gt;&gt; + check_lib = "php5ts.lib";
&gt;&gt; +}
&gt;&gt; +else
&gt;&gt; +{
&gt;&gt; + check_lib = "php5.lib";
&gt;&gt; +}
&gt;&gt; +if (CHECK_HEADER("main/php.h") &amp;&amp; CHECK_LIB(check_lib, "php-gtk") &amp;&amp;
&gt;&gt;  CHECK_HEADER("iconv.h") &amp;&amp; CHECK_LIB("iconv.lib", "php-gtk") &amp;&amp;
&gt;&gt;  CHECK_HEADER("libintl.h") &amp;&amp; CHECK_LIB("intl.lib", "php-gtk") &amp;&amp;
&gt;&gt;  CHECK_HEADER("atk/atk.h") &amp;&amp; CHECK_LIB("atk-1.0.lib", "php-gtk") &amp;&amp;
&gt;&gt; Index: main/php_gtk.h
&gt;&gt; ===================================================================
&gt;&gt; RCS file: /repository/php-gtk/main/php_gtk.h,v
&gt;&gt; retrieving revision 1.138
&gt;&gt; diff -u -r1.138 php_gtk.h
&gt;&gt; --- main/php_gtk.h 15 Oct 2006 00:48:48 -0000 1.138
&gt;&gt; +++ main/php_gtk.h 30 Jan 2007 20:38:50 -0000
&gt;&gt; @@ -23,13 +23,13 @@
&gt;&gt; #ifndef _PHP_GTK_H
&gt;&gt; #define _PHP_GTK_H
&gt;&gt;
&gt;&gt; -#include "php.h"
&gt;&gt; -#include "php_ini.h"
&gt;&gt; #ifdef PHP_WIN32
&gt;&gt; #include "config.w32.h"
&gt;&gt; #else
&gt;&gt; #include "config.h"
&gt;&gt; #endif
&gt;&gt; +#include "php.h"
&gt;&gt; +#include "php_ini.h"
&gt;&gt;
&gt;&gt; /* workaround for expat-related declaration in PHP compat file */
&gt;&gt; #ifdef lookup
&gt;&gt; Index: win32/config.w32.in
&gt;&gt; ===================================================================
&gt;&gt; RCS file: /repository/php-gtk/win32/config.w32.in,v
&gt;&gt; retrieving revision 1.12
&gt;&gt; diff -u -r1.12 config.w32.in
&gt;&gt; --- win32/config.w32.in 17 Jun 2006 14:47:08 -0000 1.12
&gt;&gt; +++ win32/config.w32.in 1 Feb 2007 01:33:29 -0000
&gt;&gt; @@ -14,6 +14,9 @@
&gt;&gt; PATH_PROG('link', WshShell.Environment("Process").Item("PATH"),  
&gt;&gt; "LD");
&gt;&gt; PATH_PROG('nmake');
&gt;&gt;
&gt;&gt; +// Try locating manifest tool
&gt;&gt; +PATH_PROG('mt', WshShell.Environment("Process").Item("PATH"), "MT");
&gt;&gt; +
&gt;&gt; // we don't want to define LIB, as that will override the default  
&gt;&gt; library path set in that env var
&gt;&gt; PATH_PROG('lib', null, 'MAKE_LIB');
&gt;&gt; PATH_PROG('php');
&gt;&gt; @@ -45,6 +48,7 @@
&gt;&gt;
&gt;&gt; ARG_WITH('php-build', 'Path to where you extracted http:// 
&gt;&gt; www.php.net/extra/win32build.zip. Assumes that it is a sibling of  
&gt;&gt; this source dir (..\\php_build) if not specified', 'no');
&gt;&gt; ARG_WITH('cygwin', 'Path to cygwin utilities on your system', '\ 
&gt;&gt; \cygwin');
&gt;&gt; +ARG_ENABLE('zts', 'Thread safety', 'yes');
&gt;&gt;
&gt;&gt; // stick objects somewhere outside of the source tree
&gt;&gt; ARG_ENABLE('object-out-dir', 'Alternative location for binary  
&gt;&gt; objects during build', '');
&gt;&gt; @@ -56,6 +60,10 @@
&gt;&gt; }
&gt;&gt;
&gt;&gt; ARG_ENABLE('debug', 'Compile with debugging symbols', "no");
&gt;&gt; +ARG_ENABLE('debug-pack', 'Release binaries with external debug  
&gt;&gt; symbols (--enable-debug must not be specified)', 'no');
&gt;&gt; +if (PHP_GTK_DEBUG == "yes" &amp;&amp; PHP_GTK_DEBUG_PACK == "yes") {
&gt;&gt; + ERROR("Use of both --enable-debug and --enable-debug-pack not  
&gt;&gt; allowed.");
&gt;&gt; +}
&gt;&gt;
&gt;&gt; // Set some debug-specific options
&gt;&gt; if (PHP_GTK_DEBUG == "yes") {
&gt;&gt; @@ -81,11 +89,16 @@
&gt;&gt; DEFINE("LIBS", "kernel32.lib user32.lib gdi32.lib winspool.lib  
&gt;&gt; comdlg32.lib advapi32.lib shell32.lib ole32.lib");
&gt;&gt;
&gt;&gt; if (PHP_GTK_DEBUG == "yes") {
&gt;&gt; - DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ / 
&gt;&gt; I ..\\.. /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main / 
&gt;&gt; I ..\\php5\\Zend /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D  
&gt;&gt; ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 /D _DEBUG /D _WINDOWS /D _MBCS / 
&gt;&gt; D _USRDLL");
&gt;&gt; + DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /EHsc /ZI /GZ /I . /I ..\ 
&gt;&gt; \ /I ..\\.. /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\ 
&gt;&gt; \main /I ..\\php5\\Zend /I ..\\php5\\TSRM /D ZEND_WIN32 /D  
&gt;&gt; ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 /D _DEBUG /D _WINDOWS /D _MBCS / 
&gt;&gt; D _USRDLL");
&gt;&gt;  ADD_FLAG("LDFLAGS", "/debug");
&gt;&gt;
&gt;&gt; } else {
&gt;&gt; - DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\ 
&gt;&gt; \.. /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\ 
&gt;&gt; \php5\\Zend /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D  
&gt;&gt; ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D NDEBUG /D _WINDOWS /D _MBCS / 
&gt;&gt; D _USRDLL");
&gt;&gt; + DEFINE("CFLAGS", "/nologo /MD /W3 /O2 /EHsc /I . /I ..\\ /I ..\ 
&gt;&gt; \.. /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\ 
&gt;&gt; \php5\\Zend /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=0 /D  
&gt;&gt; PHP_WIN32 /D WIN32 /D NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt;&gt; + // Generate external debug files when --enable-debug-pack is  
&gt;&gt; specified
&gt;&gt; + if (PHP_GTK_DEBUG_PACK == "yes") {
&gt;&gt; + ADD_FLAG("CFLAGS", "/Zi");
&gt;&gt; + ADD_FLAG("LDFLAGS", "/incremental:no /debug /opt:ref,icf");
&gt;&gt; + }
&gt;&gt; }
&gt;&gt;
&gt;&gt; if (VCVERS &lt; 14) {
&gt;&gt; @@ -97,6 +110,15 @@
&gt;&gt;  // fun stuff: MS deprecated ANSI stdio and similar functions -  
&gt;&gt; disable warnings
&gt;&gt;  // GS hardens the binary against buffer overruns
&gt;&gt;  ADD_FLAG('CFLAGS', '/GS /wd4996 ');
&gt;&gt; + if (PHP_GTK_DEBUG == "yes")
&gt;&gt; + {
&gt;&gt; + // Set some debug/release specific options
&gt;&gt; + ADD_FLAG('CFLAGS', ' /RTC1 ');
&gt;&gt; + }
&gt;&gt; +}
&gt;&gt; +
&gt;&gt; +if (PHP_GTK_ZTS == "yes") {
&gt;&gt; + ADD_FLAG("CFLAGS", "/D ZTS=1");
&gt;&gt; }
&gt;&gt;
&gt;&gt; if (PHP_GTK_PHP_BUILD == 'no') {
&gt;&gt; Index: win32/confutils.js
&gt;&gt; ===================================================================
&gt;&gt; RCS file: /repository/php-gtk/win32/confutils.js,v
&gt;&gt; retrieving revision 1.19
&gt;&gt; diff -u -r1.19 confutils.js
&gt;&gt; --- win32/confutils.js 17 Jul 2006 17:00:09 -0000 1.19
&gt;&gt; +++ win32/confutils.js 30 Jan 2007 21:18:50 -0000
&gt;&gt; @@ -668,6 +668,7 @@
&gt;&gt;
&gt;&gt;  MFO.WriteLine("$(BUILD_DIR)\\" + dllname + ": $(" + EXT +  
&gt;&gt; "_GLOBAL_OBJS)" + res_var);
&gt;&gt;  MFO.WriteLine("\t" + ld + " /out:$(BUILD_DIR)\\" + dllname + " $ 
&gt;&gt; (" + EXT + "_LDFLAGS)" + dllflags + " $(LDFLAGS) $(" + EXT +  
&gt;&gt; "_GLOBAL_OBJS) $(LIBS_" + EXT + ")" + dep_libs + " $(LIBS)" +  
&gt;&gt; res_var);
&gt;&gt; + MFO.WriteLine("\t-@$(_VC_MANIFEST_EMBED_DLL)");
&gt;&gt;
&gt;&gt;  MFO.WriteBlankLines(1);
&gt;&gt;  MFO.WriteLine(dllname + ": $(BUILD_DIR)\\" + dllname);
&gt;&gt; @@ -968,6 +969,16 @@
&gt;&gt;  MF.WriteLine(keys[i] + "=" + configure_subst.Item(keys[i]) + " ");
&gt;&gt;  }
&gt;&gt;
&gt;&gt; + MF.WriteLine("!if $(MT) == \"\"");
&gt;&gt; + MF.WriteBlankLines(1);
&gt;&gt; + MF.WriteLine("_VC_MANIFEST_EMBED_DLL=");
&gt;&gt; + MF.WriteBlankLines(1);
&gt;&gt; + MF.WriteLine("!else");
&gt;&gt; + MF.WriteBlankLines(1);
&gt;&gt; + MF.WriteLine("_VC_MANIFEST_EMBED_DLL= $(MT) -nologo -manifest  
&gt;&gt; $@.manifest -outputresource:$@;2");
&gt;&gt; + MF.WriteBlankLines(1);
&gt;&gt; + MF.WriteLine("!endif");
&gt;&gt; +
&gt;&gt;  MF.WriteBlankLines(1);
&gt;&gt;  MF.WriteLine("all: $(EXT_TARGETS)");
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; ---------------------------------------------------------------------- 
&gt; ----------
&gt;
&gt;
&gt;&gt; -- 
&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070202042929</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-02-02 04:29:29-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkPlug for Windows</subject><body>

Thanks :)  I didn't even notice that...staring too long at C gives me 
headaches - works great on windows! (against 2.8 or higher libs)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070203012907</emailId><senderName>"judas dot iscariote at gmail dot com"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-02-03 01:29:07-0400</timestampReceived><subject>[PHP-GTK-DEV] #40338 [NEW]: php-gtk CVS wont build</subject><body>

From:             judas dot iscariote at gmail dot com
Operating system: Linux
PHP version:      5CVS-2007-02-03 (CVS)
PHP Bug Type:     PHP-GTK related
Bug description:  php-gtk CVS wont build

Description:
------------
Current php-gtk CVS does not build properly also, ther eis a tiny bug in
config.m4 that makes build to fail, for other reason in chrooted build
enviroments.

patch (for the config.m4 problem only):

Index: config.m4
===================================================================
RCS file: /repository/php-gtk/config.m4,v
retrieving revision 1.18
diff -u -r1.18 config.m4
--- config.m4   10 Jun 2006 19:53:12 -0000      1.18
+++ config.m4   3 Feb 2007 01:25:07 -0000
@@ -79,4 +79,4 @@
 PHP_HELP_SEPARATOR([Libtool options:])

 echo "creating main/php_gtk_ext.c"
-sh $srcdir/build2/genext.sh $srcdir/main/php_gtk_ext.c.in $srcdir "" $AWK
$PHP_GTK_EXTENSIONS &gt; main/php_gtk_ext.c
+sh $srcdir/build2/genext.sh $srcdir/main/php_gtk_ext.c.in $srcdir "" $AWK
$PHP_GTK_EXTENSIONS &gt; $srcdir/main/php_gtk_ext.c



Reproduce code:
---------------
none.

Expected result:
----------------
build cleanly as a few days ago

Actual result:
--------------
/ext/gtk+/.libs/php_gtk+.o: In function `php_gtk_xshutdown_gtk_plus':
php_gtk+.c:(.text+0x0): multiple definition of
`php_gtk_xshutdown_gtk_plus'
./ext/gtk+/.libs/php_gtk+.o:php_gtk+.c:(.text+0x0): first defined here
./ext/gtk+/.libs/php_gtk+.o: In function `php_gtk_xinit_gtk_plus':
php_gtk+.c:(.text+0x10): multiple definition of `php_gtk_xinit_gtk_plus'
./ext/gtk+/.libs/php_gtk+.o:php_gtk+.c:(.text+0x10): first defined here
./ext/gtk+/.libs/php_gtk+.o:(.data.rel+0x0): multiple definition of
`gtk_plus_ext_entry'
./ext/gtk+/.libs/php_gtk+.o:(.data.rel+0x0): first defined here
ext/gtk+/.libs/gen_atk.o: In function `phpg_atk_register_constants':
gen_atk.c:(.text+0x0): multiple definition of
`phpg_atk_register_constants'
ext/gtk+/.libs/gen_atk.o:gen_atk.c:(.text+0x0): first defined here
ext/gtk+/.libs/gen_atk.o: In function `phpg_atk_register_classes':
gen_atk.c:(.text+0x230): multiple definition of
`phpg_atk_register_classes'
ext/gtk+/.libs/gen_atk.o:gen_atk.c:(.text+0x230): first defined here
ext/gtk+/.libs/gen_pango.o: In function `phpg_pango_register_constants':
gen_pango.c:(.text+0x90): multiple definition of
`phpg_pango_register_constants'
ext/gtk+/.libs/gen_pango.o:gen_pango.c:(.text+0x90): first defined here
ext/gtk+/.libs/gen_pango.o: In function `phpg_pango_register_classes':
gen_pango.c:(.text+0x400): multiple definition of
`phpg_pango_register_classes'
ext/gtk+/.libs/gen_pango.o:gen_pango.c:(.text+0x400): first defined here
ext/gtk+/.libs/gen_gdk.o: In function `phpg_gdk_register_constants':
gen_gdk.c:(.text+0x160): multiple definition of
`phpg_gdk_register_constants'
ext/gtk+/.libs/gen_gdk.o:gen_gdk.c:(.text+0x160): first defined here
ext/gtk+/.libs/gen_gdk.o: In function `phpg_gdk_register_classes':
gen_gdk.c:(.text+0x820): multiple definition of
`phpg_gdk_register_classes'
ext/gtk+/.libs/gen_gdk.o:gen_gdk.c:(.text+0x820): first defined here
ext/gtk+/.libs/gen_gdk.o: In function
`phpg_gdkevent_get_properties_handler':
gen_gdk.c:(.text+0x5d80): multiple definition of
`phpg_gdkevent_get_properties_handler'
ext/gtk+/.libs/gen_gdk.o:gen_gdk.c:(.text+0x5d80): first defined here
ext/gtk+/.libs/gen_gdk.o: In function
`phpg_gdkcolor_write_property_handler':
gen_gdk.c:(.text+0x4760): multiple definition of
`phpg_gdkcolor_write_property_handler'
ext/gtk+/.libs/gen_gdk.o:gen_gdk.c:(.text+0x4760): first defined here
ext/gtk+/.libs/gen_gdk.o: In function
`phpg_gdkcolor_get_properties_handler':
gen_gdk.c:(.text+0x3ec0): multiple definition of
`phpg_gdkcolor_get_properties_handler'
ext/gtk+/.libs/gen_gdk.o:gen_gdk.c:(.text+0x3ec0): first defined here
ext/gtk+/.libs/gen_gdk.o: In function `phpg_free_pixbuf_data':
gen_gdk.c:(.text+0x1fa0): multiple definition of `phpg_free_pixbuf_data'
ext/gtk+/.libs/gen_gdk.o:gen_gdk.c:(.text+0x1fa0): first defined here
ext/gtk+/.libs/gen_gtk.o: In function `phpg_gtk_register_constants':
gen_gtk.c:(.text+0x330): multiple definition of
`phpg_gtk_register_constants'
ext/gtk+/.libs/gen_gtk.o:gen_gtk.c:(.text+0x330): first defined here
ext/gtk+/.libs/gen_gtk.o: In function `phpg_gtk_register_classes':
gen_gtk.c:(.text+0x2310): multiple definition of
`phpg_gtk_register_classes'
ext/gtk+/.libs/gen_gtk.o:gen_gtk.c:(.text+0x2310): first defined here
ext/gtk+/.libs/gen_gtk.o: In function `phpg_tree_model_foreach_marshal':
gen_gtk.c:(.text+0xc760): multiple definition of
`phpg_tree_model_foreach_marshal'
ext/gtk+/.libs/gen_gtk.o:gen_gtk.c:(.text+0xc760): first defined here
ext/gtk+/.libs/php_gdk.o: In function `phpg_gdk_register_keysyms':
php_gdk.c:(.text+0x0): multiple definition of `phpg_gdk_register_keysyms'
ext/gtk+/.libs/php_gdk.o:php_gdk.c:(.text+0x0): first defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`style_helper_destroy_object':
php_gtk+_types.c:(.text+0x10): multiple definition of
`style_helper_destroy_object'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x10): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`php_gtk_plus_register_types':
php_gtk+_types.c:(.text+0x30): multiple definition of
`php_gtk_plus_register_types'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x30): first
defined here
ext/gtk+/.libs/php_gtk+_types.o:(.bss+0x0): multiple definition of
`gtktreemodelrow_ce'
ext/gtk+/.libs/php_gtk+_types.o:(.bss+0x0): first defined here
ext/gtk+/.libs/php_gtk+_types.o:(.bss+0x8): multiple definition of
`gtktreemodelrowiter_ce'
ext/gtk+/.libs/php_gtk+_types.o:(.bss+0x8): first defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`phpg_modelrowiter_get_iterator':
php_gtk+_types.c:(.text+0x200): multiple definition of
`phpg_modelrowiter_get_iterator'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x200): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function `phpg_modelrow_new':
php_gtk+_types.c:(.text+0x260): multiple definition of
`phpg_modelrow_new'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x260): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function `phpg_model_remove_row':
php_gtk+_types.c:(.text+0xaa0): multiple definition of
`phpg_model_remove_row'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0xaa0): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function `phpg_model_set_row':
php_gtk+_types.c:(.text+0xc60): multiple definition of
`phpg_model_set_row'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0xc60): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function `phpg_create_style_helper':
php_gtk+_types.c:(.text+0x1030): multiple definition of
`phpg_create_style_helper'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1030): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`style_helper_get_class_name':
php_gtk+_types.c:(.text+0x1200): multiple definition of
`style_helper_get_class_name'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1200): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function `phpg_tree_path_to_zval':
php_gtk+_types.c:(.text+0x1230): multiple definition of
`phpg_tree_path_to_zval'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1230): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function `phpg_tree_path_from_zval':
php_gtk+_types.c:(.text+0x1340): multiple definition of
`phpg_tree_path_from_zval'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1340): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function `phpg_rectangle_from_zval':
php_gtk+_types.c:(.text+0x1630): multiple definition of
`phpg_rectangle_from_zval'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1630): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`phpg_treemodel_get_iterator':
php_gtk+_types.c:(.text+0x1770): multiple definition of
`phpg_treemodel_get_iterator'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1770): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`phpg_gtktreemodel_read_dimension_handler':
php_gtk+_types.c:(.text+0x1820): multiple definition of
`phpg_gtktreemodel_read_dimension_handler'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1820): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`phpg_gtktreemodel_count_elements_handler':
php_gtk+_types.c:(.text+0x1dd0): multiple definition of
`phpg_gtktreemodel_count_elements_handler'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1dd0): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`phpg_gtktreemodel_has_dimension_handler':
php_gtk+_types.c:(.text+0x1e60): multiple definition of
`phpg_gtktreemodel_has_dimension_handler'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1e60): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`phpg_gtktreemodel_write_dimension_handler':
php_gtk+_types.c:(.text+0x1f90): multiple definition of
`phpg_gtktreemodel_write_dimension_handler'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1f90): first
defined here
ext/gtk+/.libs/phpg_custom_tree_model.o: In function
`phpg_custom_tree_model_get_type':
phpg_custom_tree_model.c:(.text+0xb0): multiple definition of
`phpg_custom_tree_model_get_type'
ext/gtk+/.libs/phpg_custom_tree_model.o:phpg_custom_tree_model.c:(.text+0xb0):
first defined here
ext/gtk+/.libs/phpg_custom_tree_model.o: In function
`phpg_custom_tree_model_new':
phpg_custom_tree_model.c:(.text+0x100): multiple definition of
`phpg_custom_tree_model_new'
ext/gtk+/.libs/phpg_custom_tree_model.o:phpg_custom_tree_model.c:(.text+0x100):
first defined here
collect2: ld returned 1 exit status
make: *** [php_gtk2.la] Error 1
error: Bad exit status from /var/tmp/rpm-tmp.51716 (%build)


-- 
Edit bug report at http://bugs.php.net/?id=40338&amp;edit=1
-- 
Try a CVS snapshot (PHP 4.4): http://bugs.php.net/fix.php?id=40338&amp;r=trysnapshot44
Try a CVS snapshot (PHP 5.2): http://bugs.php.net/fix.php?id=40338&amp;r=trysnapshot52
Try a CVS snapshot (PHP 6.0): http://bugs.php.net/fix.php?id=40338&amp;r=trysnapshot60
Fixed in CVS:                 http://bugs.php.net/fix.php?id=40338&amp;r=fixedcvs
Fixed in release:             http://bugs.php.net/fix.php?id=40338&amp;r=alreadyfixed
Need backtrace:               http://bugs.php.net/fix.php?id=40338&amp;r=needtrace
Need Reproduce Script:        http://bugs.php.net/fix.php?id=40338&amp;r=needscript
Try newer version:            http://bugs.php.net/fix.php?id=40338&amp;r=oldversion
Not developer issue:          http://bugs.php.net/fix.php?id=40338&amp;r=support
Expected behavior:            http://bugs.php.net/fix.php?id=40338&amp;r=notwrong
Not enough info:              http://bugs.php.net/fix.php?id=40338&amp;r=notenoughinfo
Submitted twice:              http://bugs.php.net/fix.php?id=40338&amp;r=submittedtwice
register_globals:             http://bugs.php.net/fix.php?id=40338&amp;r=globals
PHP 3 support discontinued:   http://bugs.php.net/fix.php?id=40338&amp;r=php3
Daylight Savings:             http://bugs.php.net/fix.php?id=40338&amp;r=dst
IIS Stability:                http://bugs.php.net/fix.php?id=40338&amp;r=isapi
Install GNU Sed:              http://bugs.php.net/fix.php?id=40338&amp;r=gnused
Floating point limitations:   http://bugs.php.net/fix.php?id=40338&amp;r=float
No Zend Extensions:           http://bugs.php.net/fix.php?id=40338&amp;r=nozend
MySQL Configuration Error:    http://bugs.php.net/fix.php?id=40338&amp;r=mysqlcfg

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070203144245</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-02-03 14:42:45-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] PHP-GTK Installer for OS X</subject><body>

&gt; Both PHP and PHP-GTK don't have any fancy extensions yet. Glade is
&gt; available though. Gtk+ is patched up to run with the GlossyP theme; to
&gt; give it a more Aquaish look. gtk-chtheme is bundled if you want to
&gt; change the theme.

Addendum: PEAR is available, so you can install all the PHP-GTK apps
from both pear.php.net and gnope.org. Make sure you use the
/usr/local/php-gtk/bin/pear executable.

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070203144634</emailId><senderName>Christian Weiske</senderName><senderEmail>cweiske@cweiske.de</senderEmail><timestampReceived>2007-02-03 14:46:34-0400</timestampReceived><subject>[PHP-GTK-DEV] cannot create gtksourcestylesheme interface</subject><body>


Hi all,


trying this:
&lt;?php
$gslm = new GtkSourceLanguagesManager();
$gsl = $gslm-&gt;get_language_from_mime_type('application/x-php');
$schema = $gsl-&gt;get_style_scheme();
?&gt;

I get
--------------
Fatal error: Cannot inherit previously-inherited constant gtype from
interface GtkSourceStyleScheme
--------------

I don't know what to do with it nor how to fix it..

-- 
Regards/Mit freundlichen Grüßen
Christian Weiske


["signature.asc" (application/pgp-signature)]

</body></email><email><emailId>20070204234726</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-02-04 23:47:26-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] win32 Build Problem</subject><body>

Aw, poor Anant! Can you imagine trying to do a conference presentation and 
the throwdown all on the same day?!

----- Original Message ----- 
From: "Christian Weiske" &lt;cweiske@cweiske.de&gt;
To: &lt;php-gtk-dev@lists.php.net&gt;
Sent: Sunday, February 04, 2007 11:34 PM
Subject: Re: [PHP-GTK-DEV] win32 Build Problem

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070205170215</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-02-05 17:02:15-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] ignoring widechar methods</subject><body>

Sure.

-A

On Feb 5, 2007, at 6:26 AM, Christian Weiske wrote:

&gt; Hello all,
&gt;
&gt; Would it be ok to put all _wc (wide char) methods on the ignore list?
&gt; They are deprecated anyway, and since we use utf-8, we don't need them.
&gt;
&gt; GdkDrawable::draw_text_wc
&gt; GdkFont::char_width_wc
&gt; GdkFont::text_extents_wc
&gt; GdkFont::text_width_wc
&gt;
&gt; -- 
&gt; Regards/Mit freundlichen Grüßen
&gt; Christian Weiske
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070205182958</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-02-05 18:29:58-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] More Coverage</subject><body>

Thanks, fixed patch

["gtk.overrides.patch" (text/plain)]

Index: gtk.overrides
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/gtk.overrides,v
retrieving revision 1.242
diff -u -r1.242 gtk.overrides
--- gtk.overrides	5 Feb 2007 16:53:53 -0000	1.242
+++ gtk.overrides	5 Feb 2007 18:28:40 -0000
@@ -4935,7 +4935,6 @@
 %% }}}
 
 %% {{{ GtkToolbar
-
 %%
 add-arginfo GtkToolbar append_item
 static
@@ -4959,7 +4958,7 @@
     char *callback_name;
     zval *php_widget = NULL;
     zend_bool toreturn;
-
+    
     TSRMLS_FETCH();
 
     if (!zend_is_callable(cbd-&gt;callback, 0, &amp;callback_name)) {
@@ -4998,6 +4997,7 @@
     phpg_cb_data_t *cb_data;
     GtkSignalFunc callback;
     char *text = NULL, *tooltip = NULL, *private_tooltip = NULL;
+    GObject *wrapped_obj;
 
     NOT_STATIC_METHOD();
 
@@ -5018,11 +5018,17 @@
     phpg_warn_deprecated("use GtkToolbar::insert" TSRMLS_CC);
 
     if (Z_TYPE_P(icon) != IS_NULL)
-        gtk_toolbar_append_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
+        wrapped_obj = (GObject *) \
                gtk_toolbar_append_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
                                     text, tooltip, private_tooltip, \
                GTK_WIDGET(PHPG_GOBJECT(icon)), callback, cb_data);
-    else
-        gtk_toolbar_append_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
+    else 
+        wrapped_obj = (GObject *) \
                gtk_toolbar_append_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
                                     text, tooltip, private_tooltip, NULL, callback, \
cb_data); +
+    if (!wrapped_obj) {
+        php_error_docref(NULL TSRMLS_CC, E_WARNING, "GtkWidget was not correctly \
inserted"); +        return;
+	}
+    phpg_gobject_new(&amp;return_value, wrapped_obj TSRMLS_CC);
 }
 
 %%
@@ -5045,6 +5051,7 @@
     phpg_cb_data_t *cb_data;
     GtkSignalFunc callback;
     char *text = NULL, *tooltip = NULL, *private_tooltip = NULL;
+    GObject *wrapped_obj;
 
     NOT_STATIC_METHOD();
 
@@ -5065,11 +5072,123 @@
     phpg_warn_deprecated("use GtkToolbar::insert" TSRMLS_CC);
 
     if (Z_TYPE_P(icon) != IS_NULL)
-        gtk_toolbar_prepend_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
+        wrapped_obj = (GObject *) \
                gtk_toolbar_prepend_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
                                     text, tooltip, private_tooltip, \
                GTK_WIDGET(PHPG_GOBJECT(icon)), callback, cb_data);
-    else
-        gtk_toolbar_prepend_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
+    else 
+        wrapped_obj = (GObject *) \
                gtk_toolbar_prepend_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)),
                                     text, tooltip, private_tooltip, NULL, callback, \
cb_data); +
+    if (!wrapped_obj) {
+        php_error_docref(NULL TSRMLS_CC, E_WARNING, "GtkWidget was not correctly \
inserted"); +        return;
+	}
+    phpg_gobject_new(&amp;return_value, wrapped_obj TSRMLS_CC);
+}
+
+%%
+add-arginfo GtkToolbar insert_item
+static
+ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
+    ZEND_ARG_INFO(0, text)
+    ZEND_ARG_INFO(0, tooltip_text)
+    ZEND_ARG_INFO(0, tooltip_private_text)
+    ZEND_ARG_OBJ_INFO(0, icon, GtkWidget, 1)
+    ZEND_ARG_INFO(0, callback)
+    ZEND_ARG_INFO(0, position)
+ZEND_END_ARG_INFO();
+
+%%
+override gtk_toolbar_insert_item
+
+PHP_METHOD
+{
+    zval *php_callback, *extra, *icon = NULL;
+    phpg_cb_data_t *cb_data;
+    GtkSignalFunc callback;
+    char *text = NULL, *tooltip = NULL, *private_tooltip = NULL;
+    gint position = 0;
+    GObject *wrapped_obj;
+
+    NOT_STATIC_METHOD();
+
+    if (!php_gtk_parse_varargs(ZEND_NUM_ARGS(), 6, &amp;extra, "sssNVi", &amp;text, \
&amp;tooltip, &amp;private_tooltip, &amp;icon, gtkwidget_ce, &amp;php_callback, &amp;position)) +        \
return; +
+    if (php_callback) {
+        if (Z_TYPE_P(php_callback) == IS_NULL) {
+            cb_data  = NULL;
+            callback = NULL;
+        } else {
+            zval_add_ref(&amp;php_callback);
+            cb_data  = phpg_cb_data_new(php_callback, extra TSRMLS_CC);
+            callback = (GtkSignalFunc)phpg_toolbar_signal_func_marshal;
+        }
+    }
+
+    phpg_warn_deprecated("use GtkToolbar::insert" TSRMLS_CC);
+
+    if (Z_TYPE_P(icon) != IS_NULL)
+        wrapped_obj = (GObject *) \
gtk_toolbar_insert_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)), +                        \
text, tooltip, private_tooltip, GTK_WIDGET(PHPG_GOBJECT(icon)), callback, cb_data, \
position); +    else 
+        wrapped_obj = (GObject *) \
gtk_toolbar_insert_item(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)), +                        \
text, tooltip, private_tooltip, NULL, callback, cb_data, position); +
+    if (!wrapped_obj) {
+        php_error_docref(NULL TSRMLS_CC, E_WARNING, "GtkWidget was not correctly \
inserted"); +        return;
+	}
+    phpg_gobject_new(&amp;return_value, wrapped_obj TSRMLS_CC);
+}
+
+%%
+add-arginfo GtkToolbar insert_stock
+static
+ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
+    ZEND_ARG_INFO(0, stock_id)
+    ZEND_ARG_INFO(0, tooltip_text)
+    ZEND_ARG_INFO(0, tooltip_private_text)
+    ZEND_ARG_INFO(0, callback)
+    ZEND_ARG_INFO(0, position)
+ZEND_END_ARG_INFO();
+
+%%
+override gtk_toolbar_insert_stock
+PHP_METHOD
+{
+    zval *php_callback, *extra;
+    phpg_cb_data_t *cb_data;
+    GtkSignalFunc callback;
+    char *stock_id = NULL, *tooltip = NULL, *private_tooltip = NULL;
+    gint position = 0;
+    GObject *wrapped_obj;
+
+    NOT_STATIC_METHOD();
+
+    if (!php_gtk_parse_varargs(ZEND_NUM_ARGS(), 5, &amp;extra, "sssVi", &amp;stock_id, \
&amp;tooltip, &amp;private_tooltip, &amp;php_callback, &amp;position)) +        return;
+
+    if (php_callback) {
+        if (Z_TYPE_P(php_callback) == IS_NULL) {
+            cb_data  = NULL;
+            callback = NULL;
+        } else {
+            zval_add_ref(&amp;php_callback);
+            cb_data  = phpg_cb_data_new(php_callback, extra TSRMLS_CC);
+            callback = (GtkSignalFunc)phpg_toolbar_signal_func_marshal;
+        }
+    }
+
+    phpg_warn_deprecated("use GtkToolbar::insert" TSRMLS_CC);
+
+    wrapped_obj = (GObject *) \
gtk_toolbar_insert_stock(GTK_TOOLBAR(PHPG_GOBJECT(this_ptr)), +                       \
stock_id, tooltip, private_tooltip, callback, cb_data, position); +
+    if (!wrapped_obj) {
+        php_error_docref(NULL TSRMLS_CC, E_WARNING, "GtkWidget was not correctly \
inserted"); +        return;
+	}
+    phpg_gobject_new(&amp;return_value, wrapped_obj TSRMLS_CC);
 }
 
 %%



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070206163451</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-02-06 16:34:51-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] PangoRectangle</subject><body>

We can always cast PangoRectangle* to GdkRectangle* since they are  
compatible.

-Andrei


On Feb 6, 2007, at 3:53 AM, Christian Weiske wrote:

&gt; Andrei,
&gt;
&gt;&gt; One solution would be to extend GdkRectanglePtr_Arg class to store  
&gt;&gt; the
&gt;&gt; type name as a class var and use it instead of the explicit  
&gt;&gt; 'GdkRectangle'.
&gt; It still would use phpg_rectangle_from_zval which has GdkRectangle
&gt; hardcoded.
&gt;
&gt; -- 
&gt; Regards/Mit freundlichen Grüßen
&gt; Christian Weiske
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070206163518</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-02-06 16:35:18-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] method to convert zval to utf-8 char?</subject><body>

Not really. We have the phpg_to_utf8() and that's about it.

-Andrei


On Feb 6, 2007, at 5:45 AM, Christian Weiske wrote:

&gt; Hi all,
&gt;
&gt;
&gt; Do we have a method to convert a single zval to a gchar in utf-8?
&gt;
&gt; -- 
&gt; Regards/Mit freundlichen Grüßen
&gt; Christian Weiske
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070206195715</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-02-06 19:57:15-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkFileFilter patch</subject><body>

Then go ahead and commit if it passes your tests.

-Andrei


On Feb 6, 2007, at 9:53 AM, Christian Weiske wrote:

&gt; Andrei,
&gt;
&gt;
&gt;&gt; The best you can do here is
&gt;&gt; create a couple of wrapper functions that abstract the conversions.
&gt; I created a single one that does it for at least 3 of the four,  
&gt; which is
&gt; enough for me.
&gt;
&gt; -- 
&gt; Regards/Mit freundlichen Grüßen
&gt; Christian Weiske
&gt; Index: ext/gtk+/gtk.overrides
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/ext/gtk+/gtk.overrides,v
&gt; retrieving revision 1.242
&gt; diff -u -r1.242 gtk.overrides
&gt; --- ext/gtk+/gtk.overrides	5 Feb 2007 16:53:53 -0000	1.242
&gt; +++ ext/gtk+/gtk.overrides	6 Feb 2007 17:53:24 -0000
&gt; @@ -7,6 +7,8 @@
&gt;
&gt;  static void phpg_about_dialog_activate_link_func_marshal  
&gt; (GtkAboutDialog *about, const gchar *link, gpointer data);
&gt;  static gboolean phpg_entry_completion_match_func_marshal  
&gt; (GtkEntryCompletion *completion, const gchar *key, GtkTreeIter  
&gt; *iter, gpointer data);
&gt; +static void phpg_file_filter_add_custom_marshal_add_file(const  
&gt; gchar *filename, int flags, int flag, zval *php_filter_info);
&gt; +static gboolean phpg_file_filter_add_custom_marshal 
&gt; (GtkFileFilterInfo *filter_info, gpointer data);
&gt;  static gboolean phpg_tree_view_row_separator_func_marshal  
&gt; (GtkTreeModel *model, GtkTreeIter *iter, gpointer data);
&gt;  static void phpg_icon_view_foreach_func_marshal (GtkIconView  
&gt; *icon_view, GtkTreePath *path, gpointer data);
&gt;  static gboolean phpg_toolbar_signal_func_marshal(GtkWidget  
&gt; *widget, gpointer data);
&gt; @@ -2769,6 +2771,238 @@
&gt;
&gt;  %% }}}
&gt;
&gt; +%% {{{ GtkFileFilter
&gt; +
&gt; +%%
&gt; +add-arginfo GtkFileFilter add_custom
&gt; +static
&gt; +ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
&gt; +    ZEND_ARG_INFO(0, flags_needed)
&gt; +    ZEND_ARG_INFO(0, callback)
&gt; +ZEND_END_ARG_INFO();
&gt; +
&gt; +%%
&gt; +override gtk_file_filter_add_custom
&gt; +static void phpg_file_filter_add_custom_marshal_add_file(const  
&gt; gchar *filename, int flags, int flag, zval *php_filter_info)
&gt; +{
&gt; +    gchar *cp = NULL;
&gt; +    gchar *fn = NULL;
&gt; +    gsize cp_len = 0;
&gt; +    zend_bool free_cp = FALSE;
&gt; +
&gt; +    if (filename &amp;&amp; (flags &amp; flag)
&gt; +    ) {
&gt; +        fn = g_filename_to_utf8(filename, strlen(filename), NULL,  
&gt; NULL, NULL);
&gt; +        cp = phpg_from_utf8(fn, strlen(fn), &amp;cp_len, &amp;free_cp  
&gt; TSRMLS_CC);
&gt; +        if (cp) {
&gt; +            add_next_index_string(php_filter_info, (char *)cp, 1);
&gt; +        } else {
&gt; +            php_error(E_WARNING, "%s::%s(): could not convert  
&gt; return value from UTF-8", get_active_class_name(NULL TSRMLS_CC),  
&gt; get_active_function_name(TSRMLS_C));
&gt; +        }
&gt; +        if (free_cp)
&gt; +            g_free(cp);
&gt; +    } else {
&gt; +        add_next_index_null(php_filter_info);
&gt; +    }
&gt; +}
&gt; +static gboolean phpg_file_filter_add_custom_marshal 
&gt; (GtkFileFilterInfo *filter_info, gpointer data)
&gt; +{
&gt; +    phpg_cb_data_t *cbd = (phpg_cb_data_t *) data;
&gt; +    zval *retval = NULL;
&gt; +    zval ***args = NULL;
&gt; +    int n_args = 0;
&gt; +    char *callback_name;
&gt; +    zval *php_filter_info = NULL;
&gt; +    gboolean show = TRUE;
&gt; +    gchar *cp = NULL;
&gt; +    gsize cp_len = 0;
&gt; +    zend_bool free_cp = FALSE;
&gt; +
&gt; +    TSRMLS_FETCH();
&gt; +
&gt; +    if (!zend_is_callable(cbd-&gt;callback, 0, &amp;callback_name)) {
&gt; +        php_error(E_WARNING, "Unable to invoke callback '%s'  
&gt; specified in %s on line %ld", callback_name, cbd-&gt;src_filename, cbd- 
&gt; &gt;src_lineno);
&gt; +        efree(callback_name);
&gt; +        return 0;
&gt; +    }
&gt; +
&gt; +    MAKE_STD_ZVAL(php_filter_info);
&gt; +    array_init(php_filter_info);
&gt; +
&gt; +    phpg_file_filter_add_custom_marshal_add_file(
&gt; +        filter_info-&gt;filename,
&gt; +        filter_info-&gt;contains,
&gt; +        GTK_FILE_FILTER_FILENAME,
&gt; +        php_filter_info
&gt; +    );
&gt; +    phpg_file_filter_add_custom_marshal_add_file(
&gt; +        filter_info-&gt;uri,
&gt; +        filter_info-&gt;contains,
&gt; +        GTK_FILE_FILTER_URI,
&gt; +        php_filter_info
&gt; +    );
&gt; +    phpg_file_filter_add_custom_marshal_add_file(
&gt; +        filter_info-&gt;display_name,
&gt; +        filter_info-&gt;contains,
&gt; +        GTK_FILE_FILTER_DISPLAY_NAME,
&gt; +        php_filter_info
&gt; +    );
&gt; +
&gt; +    //mime_type
&gt; +    if (filter_info-&gt;mime_type
&gt; +        &amp;&amp; (filter_info-&gt;contains &amp; GTK_FILE_FILTER_MIME_TYPE)
&gt; +    ) {
&gt; +        cp = phpg_from_utf8(filter_info-&gt;mime_type, strlen 
&gt; (filter_info-&gt;mime_type), &amp;cp_len, &amp;free_cp TSRMLS_CC);
&gt; +        if (cp) {
&gt; +            add_next_index_string(php_filter_info, (char *)cp, 1);
&gt; +        } else {
&gt; +            php_error(E_WARNING, "%s::%s(): could not convert  
&gt; return value from UTF-8", get_active_class_name(NULL TSRMLS_CC),  
&gt; get_active_function_name(TSRMLS_C));
&gt; +        }
&gt; +        if (free_cp)
&gt; +            g_free(cp);
&gt; +    } else {
&gt; +        add_next_index_null(php_filter_info);
&gt; +    }
&gt; +
&gt; +    args = php_gtk_hash_as_array_offset(cbd-&gt;user_args, 1, &amp;n_args);
&gt; +    args[0] = &amp;php_filter_info;
&gt; +
&gt; +    call_user_function_ex(EG(function_table), NULL, cbd-&gt;callback,  
&gt; &amp;retval, n_args, args, 0, NULL TSRMLS_CC);
&gt; +
&gt; +    zval_ptr_dtor(&amp;php_filter_info);
&gt; +
&gt; +    if (retval) {
&gt; +        show = zend_is_true(retval);
&gt; +        zval_ptr_dtor(&amp;retval);
&gt; +    } else {
&gt; +        show = TRUE;
&gt; +    }
&gt; +
&gt; +    phpg_handle_marshaller_exception(TSRMLS_C);
&gt; +
&gt; +    efree(callback_name);
&gt; +    efree(args);
&gt; +
&gt; +    return show;
&gt; +}
&gt; +
&gt; +PHP_METHOD
&gt; +{
&gt; +    zval *callback, *extra;
&gt; +    phpg_cb_data_t *cb_data;
&gt; +    GtkFileFilterFlags flags = 0;
&gt; +    zval *php_flags = NULL;
&gt; +
&gt; +
&gt; +    NOT_STATIC_METHOD();
&gt; +
&gt; +    if (!php_gtk_parse_varargs(ZEND_NUM_ARGS(), 2, &amp;extra, "VV",  
&gt; &amp;php_flags, &amp;callback))
&gt; +        return;
&gt; +
&gt; +    if (php_flags &amp;&amp; phpg_gvalue_get_flags 
&gt; (GTK_TYPE_FILE_FILTER_FLAGS, php_flags, (gint *)&amp;flags) == FAILURE) {
&gt; +        return;
&gt; +    }
&gt; +
&gt; +    zval_add_ref(&amp;callback);
&gt; +    cb_data = phpg_cb_data_new(callback, extra TSRMLS_CC);
&gt; +
&gt; +    gtk_file_filter_add_custom(
&gt; +            GTK_FILE_FILTER(PHPG_GOBJECT(this_ptr)),
&gt; +            flags,
&gt; +            (GtkFileFilterFunc)phpg_file_filter_add_custom_marshal,
&gt; +            cb_data, phpg_cb_data_destroy
&gt; +    );
&gt; +}
&gt; +
&gt; +
&gt; +%%
&gt; +add-arginfo GtkFileFilter filter
&gt; +static
&gt; +ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
&gt; +    ZEND_ARG_INFO(0, filterinfo)
&gt; +ZEND_END_ARG_INFO();
&gt; +
&gt; +%%
&gt; +override gtk_file_filter_filter
&gt; +PHP_METHOD
&gt; +{
&gt; +    GtkFileFilterInfo filter_info = { 0, NULL, NULL, NULL, NULL };
&gt; +    zval *php_filter_info = NULL, **temp_value;
&gt; +    gchar **values;
&gt; +    gboolean result;
&gt; +    int i = 0;
&gt; +
&gt; +    NOT_STATIC_METHOD();
&gt; +
&gt; +    if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "a",  
&gt; &amp;php_filter_info)) {
&gt; +        return;
&gt; +    }
&gt; +
&gt; +    if (zend_hash_num_elements(Z_ARRVAL_P(php_filter_info)) != 4) {
&gt; +        php_error(E_WARNING, "%s::%s() file info array requires 4  
&gt; values of type string or NULL",
&gt; +                  get_active_class_name(NULL TSRMLS_CC),
&gt; +                  get_active_function_name(TSRMLS_C));
&gt; +        return;
&gt; +    }
&gt; +
&gt; +    zend_hash_internal_pointer_reset(Z_ARRVAL_P(php_filter_info));
&gt; +    values = safe_emalloc(4, sizeof(gchar *), 0);
&gt; +
&gt; +    while (zend_hash_get_current_data(Z_ARRVAL_P(php_filter_info),  
&gt; (void **)&amp;temp_value) == SUCCESS) {
&gt; +        gchar *utf8 = NULL;
&gt; +        gsize utf8_len = 0;
&gt; +        zend_bool free_utf8 = 0;
&gt; +
&gt; +        if (Z_TYPE_P(*temp_value) == IS_NULL) {
&gt; +            values[i++] = NULL;
&gt; +        } else {
&gt; +            convert_to_string_ex(temp_value);
&gt; +            utf8 = phpg_to_utf8(Z_STRVAL_PP(temp_value),  
&gt; Z_STRLEN_PP(temp_value), &amp;utf8_len, &amp;free_utf8 TSRMLS_CC);
&gt; +
&gt; +            if (!utf8) {
&gt; +                efree(values);
&gt; +                php_error(E_WARNING, "%s::%s() Could not convert  
&gt; filter info string to UTF-8",
&gt; +                        get_active_class_name(NULL TSRMLS_CC),
&gt; +                        get_active_function_name(TSRMLS_C));
&gt; +                return;
&gt; +            }
&gt; +
&gt; +            if (free_utf8) {
&gt; +                values[i++] = utf8;
&gt; +            } else {
&gt; +                /* Use GTK+ memory function here since utf8 may  
&gt; also allocated by it */
&gt; +                values[i++] = g_strdup(utf8);
&gt; +            }
&gt; +        }
&gt; +
&gt; +        zend_hash_move_forward(Z_ARRVAL_P(php_filter_info));
&gt; +    }
&gt; +
&gt; +    if (values[0] != NULL) {
&gt; +        filter_info.filename     = values[0];
&gt; +        filter_info.contains     |= GTK_FILE_FILTER_FILENAME;
&gt; +    }
&gt; +    if (values[1] != NULL) {
&gt; +        filter_info.uri          = values[1];
&gt; +        filter_info.contains     |= GTK_FILE_FILTER_URI;
&gt; +    }
&gt; +    if (values[2] != NULL) {
&gt; +        filter_info.display_name = values[2];
&gt; +        filter_info.contains     |= GTK_FILE_FILTER_DISPLAY_NAME;
&gt; +    }
&gt; +    if (values[3] != NULL) {
&gt; +        filter_info.mime_type    = values[3];
&gt; +        filter_info.contains     |= GTK_FILE_FILTER_MIME_TYPE;
&gt; +    }
&gt; +
&gt; +    efree(values);
&gt; +
&gt; +    result = gtk_file_filter_filter(GTK_FILE_FILTER(PHPG_GOBJECT 
&gt; (this_ptr)), &amp;filter_info);
&gt; +    RETURN_BOOL(result);
&gt; +}
&gt; +
&gt; +%% }}}
&gt; +
&gt;  %% {{{ GtkFileSelection
&gt;
&gt;  %%

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070209172404</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-02-09 17:24:04-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

Hi Lars,

&gt; As I am working with gtksheet, I was missing a function which I wrote
&gt; (nothing really, after some help though..), but here is the patch which
&gt; creates gtksheet-&gt;get_active_cell and it works perfectly here (it was
&gt; made against the newest php-gtk-edge)

Thanks a lot for this. I checked in GtkExtra to the main PHP-GTK CVS
repository along with your override today.

Cheers,

-- 
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070210123457</emailId><senderName>"Marc Quinton"</senderName><senderEmail>mquinton@gmail.com</senderEmail><timestampReceived>2007-02-10 12:34:57-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Installing GTK on Ununti</subject><body>

On 2/10/07, Charles Esson &lt;charlesess@cvs.com.au&gt; wrote:
&gt; Your making it pretty hard to help with the documentation. Heres some
&gt; wiki text on how to install on ubuntu. There are errors in your linux
&gt; install tutorial.

this tutorial (howto) has been working for 2 versions of ubuntu.

  http://minilien.com/?MbFL53ZFMT

just cut-and-paste and it will work.

you could use php --rc GtkClassName to test if a class is available in
current environment. It's faster and easier than a php-gtl test code
(but les visual).

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070217180603</emailId><senderName>       Fernando_Correa_da_Conceição</senderName><senderEmail></senderEmail><timestampReceived>2007-02-17 18:06:03-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] #40518 [NEW]: php-gtk does not compile with PHP</subject><body>

spam2 at rhsoft dot net escreveu:
&gt; From:             spam2 at rhsoft dot net
&gt; Operating system: Linux (FC 6)
&gt; PHP version:      5.2.1
&gt; PHP Bug Type:     PHP-GTK related
&gt; Bug description:  php-gtk does not compile with PHP 5.2.1
&gt; 
&gt; Description:
&gt; ------------
&gt; checking for PHP executable in /usr/bin... found version 5.2.1
&gt; configure: error: PHP CLI version is required,  found
&gt; 
&gt; Reproduce code:
&gt; ---------------
&gt; Compile PHP 5.2.1 from source and then the latest php-gtk with the
&gt; following ./configure-Script, but i think the options does not matter:
&gt; 
&gt; ./buildconf &amp;&amp; CFLAGS="-O6 -march=i686" CXX=gcc CXXFLAGS="-O6 -march=i686"
&gt; ./configure &amp;&amp; make &amp;&amp; strip ./modules/php_gtk2.so &amp;&amp; sudo make install &amp;&amp;
&gt; make clean &gt; /dev/null
&gt; 
&gt; 

Are you sure that you are using the CLI version of php and not the CGI? 
Please send the output of php --version

-- 

    Fernando Correa da Conceição
    fernandoc@php.net
    icq: 168518047 msn: fernandocphp@hotmail.com
    Pagina: www.fernando.viaserver.com.br

    http://manualphp.sf.net
    Participe da tradução do manual do PHP

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070220212315</emailId><senderName>       Fernando_Correa_da_Conceição</senderName><senderEmail></senderEmail><timestampReceived>2007-02-20 21:23:15-0400</timestampReceived><subject>[PHP-GTK-DEV] Please build a new version for php-gtk on windows</subject><body>

Is possible for someone(Anant, Elizabeth?) build a new version of the 
dll for windows with all the new changes? The one from gtk.php.net is 
from 07/2006 and there was a lot of changes since this release.
I do not want a official release, but a snapshot for php 5.2.(with
GtkSourceView too?)

Thanks!

Fernando Correa da Conceição

--
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070221013613</emailId><senderName>"theredtitan at hotmail dot com"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-02-21 01:36:13-0400</timestampReceived><subject>[PHP-GTK-DEV] #40570 [NEW]: GtkCellLayout inherition</subject><body>

From:             theredtitan at hotmail dot com
Operating system: Windows XP SP2
PHP version:      5.2.1
PHP Bug Type:     PHP-GTK related
Bug description:  GtkCellLayout inherition

Description:
------------
First of all, sorry for my bad english!!

I use PHP5 in both server side (With Apache 2.2), and client side (Using
PHP-GTK)

After I installed the PHP-GTK v2.0 on my PHP 5.2.1, accedently the logos
of both PHP and Zend that appears on the page of "phpinfo.php" has
disappeared!!

I found that error occured when I added the "php.ini" setting:

extension=php-gtk2.dll

My error logs has repoted the following error:

[21-Feb-2007 04:18:43] PHP Fatal error:  Cannot inherit
previously-inherited constant gtype from interface GtkCellLayout in
Unknown on line 0



Reproduce code:
---------------
&lt;?php
phpinfo();
?&gt;

Expected result:
----------------
I expected to see the PHP and Zend logo with this codes:

phpinfo.php?=PHPE9568F34-D428-11d2-A769-00AA001ACF42
phpinfo.php?=PHPE9568F35-D428-11d2-A769-00AA001ACF42

Actual result:
--------------
What I saw when I query the "phpinfo.php" page was a blank page (As I
configured the error logger to hide errors and log in to a file on my
machine)

-- 
Edit bug report at http://bugs.php.net/?id=40570&amp;edit=1
-- 
Try a CVS snapshot (PHP 4.4): http://bugs.php.net/fix.php?id=40570&amp;r=trysnapshot44
Try a CVS snapshot (PHP 5.2): http://bugs.php.net/fix.php?id=40570&amp;r=trysnapshot52
Try a CVS snapshot (PHP 6.0): http://bugs.php.net/fix.php?id=40570&amp;r=trysnapshot60
Fixed in CVS:                 http://bugs.php.net/fix.php?id=40570&amp;r=fixedcvs
Fixed in release:             http://bugs.php.net/fix.php?id=40570&amp;r=alreadyfixed
Need backtrace:               http://bugs.php.net/fix.php?id=40570&amp;r=needtrace
Need Reproduce Script:        http://bugs.php.net/fix.php?id=40570&amp;r=needscript
Try newer version:            http://bugs.php.net/fix.php?id=40570&amp;r=oldversion
Not developer issue:          http://bugs.php.net/fix.php?id=40570&amp;r=support
Expected behavior:            http://bugs.php.net/fix.php?id=40570&amp;r=notwrong
Not enough info:              http://bugs.php.net/fix.php?id=40570&amp;r=notenoughinfo
Submitted twice:              http://bugs.php.net/fix.php?id=40570&amp;r=submittedtwice
register_globals:             http://bugs.php.net/fix.php?id=40570&amp;r=globals
PHP 3 support discontinued:   http://bugs.php.net/fix.php?id=40570&amp;r=php3
Daylight Savings:             http://bugs.php.net/fix.php?id=40570&amp;r=dst
IIS Stability:                http://bugs.php.net/fix.php?id=40570&amp;r=isapi
Install GNU Sed:              http://bugs.php.net/fix.php?id=40570&amp;r=gnused
Floating point limitations:   http://bugs.php.net/fix.php?id=40570&amp;r=float
No Zend Extensions:           http://bugs.php.net/fix.php?id=40570&amp;r=nozend
MySQL Configuration Error:    http://bugs.php.net/fix.php?id=40570&amp;r=mysqlcfg

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070222172102</emailId><senderName></senderName><senderEmail>andrei</senderEmail><timestampReceived>2007-02-22 17:21:02-0400</timestampReceived><subject>[PHP-GTK-DEV] #40338 [Opn-&gt;Csd]: php-gtk CVS wont build</subject><body>

 ID:               40338
 Updated by:       andrei@php.net
 Reported By:      judas dot iscariote at gmail dot com
-Status:           Open
+Status:           Closed
 Bug Type:         PHP-GTK related
 Operating System: Linux
 PHP Version:      5CVS-2007-02-03 (CVS)
 New Comment:

This bug has been fixed in CVS.

Snapshots of the sources are packaged every three hours; this change
will be in the next snapshot. You can grab the snapshot at
http://snaps.php.net/.
 
Thank you for the report, and for helping us make PHP better.


Previous Comments:
------------------------------------------------------------------------

[2007-02-03 01:29:07] judas dot iscariote at gmail dot com

Description:
------------
Current php-gtk CVS does not build properly also, ther eis a tiny bug
in config.m4 that makes build to fail, for other reason in chrooted
build enviroments.

patch (for the config.m4 problem only):

Index: config.m4
===================================================================
RCS file: /repository/php-gtk/config.m4,v
retrieving revision 1.18
diff -u -r1.18 config.m4
--- config.m4   10 Jun 2006 19:53:12 -0000      1.18
+++ config.m4   3 Feb 2007 01:25:07 -0000
@@ -79,4 +79,4 @@
 PHP_HELP_SEPARATOR([Libtool options:])

 echo "creating main/php_gtk_ext.c"
-sh $srcdir/build2/genext.sh $srcdir/main/php_gtk_ext.c.in $srcdir ""
$AWK $PHP_GTK_EXTENSIONS &gt; main/php_gtk_ext.c
+sh $srcdir/build2/genext.sh $srcdir/main/php_gtk_ext.c.in $srcdir ""
$AWK $PHP_GTK_EXTENSIONS &gt; $srcdir/main/php_gtk_ext.c



Reproduce code:
---------------
none.

Expected result:
----------------
build cleanly as a few days ago

Actual result:
--------------
/ext/gtk+/.libs/php_gtk+.o: In function `php_gtk_xshutdown_gtk_plus':
php_gtk+.c:(.text+0x0): multiple definition of
`php_gtk_xshutdown_gtk_plus'
./ext/gtk+/.libs/php_gtk+.o:php_gtk+.c:(.text+0x0): first defined here
./ext/gtk+/.libs/php_gtk+.o: In function `php_gtk_xinit_gtk_plus':
php_gtk+.c:(.text+0x10): multiple definition of
`php_gtk_xinit_gtk_plus'
./ext/gtk+/.libs/php_gtk+.o:php_gtk+.c:(.text+0x10): first defined
here
./ext/gtk+/.libs/php_gtk+.o:(.data.rel+0x0): multiple definition of
`gtk_plus_ext_entry'
./ext/gtk+/.libs/php_gtk+.o:(.data.rel+0x0): first defined here
ext/gtk+/.libs/gen_atk.o: In function `phpg_atk_register_constants':
gen_atk.c:(.text+0x0): multiple definition of
`phpg_atk_register_constants'
ext/gtk+/.libs/gen_atk.o:gen_atk.c:(.text+0x0): first defined here
ext/gtk+/.libs/gen_atk.o: In function `phpg_atk_register_classes':
gen_atk.c:(.text+0x230): multiple definition of
`phpg_atk_register_classes'
ext/gtk+/.libs/gen_atk.o:gen_atk.c:(.text+0x230): first defined here
ext/gtk+/.libs/gen_pango.o: In function
`phpg_pango_register_constants':
gen_pango.c:(.text+0x90): multiple definition of
`phpg_pango_register_constants'
ext/gtk+/.libs/gen_pango.o:gen_pango.c:(.text+0x90): first defined
here
ext/gtk+/.libs/gen_pango.o: In function `phpg_pango_register_classes':
gen_pango.c:(.text+0x400): multiple definition of
`phpg_pango_register_classes'
ext/gtk+/.libs/gen_pango.o:gen_pango.c:(.text+0x400): first defined
here
ext/gtk+/.libs/gen_gdk.o: In function `phpg_gdk_register_constants':
gen_gdk.c:(.text+0x160): multiple definition of
`phpg_gdk_register_constants'
ext/gtk+/.libs/gen_gdk.o:gen_gdk.c:(.text+0x160): first defined here
ext/gtk+/.libs/gen_gdk.o: In function `phpg_gdk_register_classes':
gen_gdk.c:(.text+0x820): multiple definition of
`phpg_gdk_register_classes'
ext/gtk+/.libs/gen_gdk.o:gen_gdk.c:(.text+0x820): first defined here
ext/gtk+/.libs/gen_gdk.o: In function
`phpg_gdkevent_get_properties_handler':
gen_gdk.c:(.text+0x5d80): multiple definition of
`phpg_gdkevent_get_properties_handler'
ext/gtk+/.libs/gen_gdk.o:gen_gdk.c:(.text+0x5d80): first defined here
ext/gtk+/.libs/gen_gdk.o: In function
`phpg_gdkcolor_write_property_handler':
gen_gdk.c:(.text+0x4760): multiple definition of
`phpg_gdkcolor_write_property_handler'
ext/gtk+/.libs/gen_gdk.o:gen_gdk.c:(.text+0x4760): first defined here
ext/gtk+/.libs/gen_gdk.o: In function
`phpg_gdkcolor_get_properties_handler':
gen_gdk.c:(.text+0x3ec0): multiple definition of
`phpg_gdkcolor_get_properties_handler'
ext/gtk+/.libs/gen_gdk.o:gen_gdk.c:(.text+0x3ec0): first defined here
ext/gtk+/.libs/gen_gdk.o: In function `phpg_free_pixbuf_data':
gen_gdk.c:(.text+0x1fa0): multiple definition of
`phpg_free_pixbuf_data'
ext/gtk+/.libs/gen_gdk.o:gen_gdk.c:(.text+0x1fa0): first defined here
ext/gtk+/.libs/gen_gtk.o: In function `phpg_gtk_register_constants':
gen_gtk.c:(.text+0x330): multiple definition of
`phpg_gtk_register_constants'
ext/gtk+/.libs/gen_gtk.o:gen_gtk.c:(.text+0x330): first defined here
ext/gtk+/.libs/gen_gtk.o: In function `phpg_gtk_register_classes':
gen_gtk.c:(.text+0x2310): multiple definition of
`phpg_gtk_register_classes'
ext/gtk+/.libs/gen_gtk.o:gen_gtk.c:(.text+0x2310): first defined here
ext/gtk+/.libs/gen_gtk.o: In function
`phpg_tree_model_foreach_marshal':
gen_gtk.c:(.text+0xc760): multiple definition of
`phpg_tree_model_foreach_marshal'
ext/gtk+/.libs/gen_gtk.o:gen_gtk.c:(.text+0xc760): first defined here
ext/gtk+/.libs/php_gdk.o: In function `phpg_gdk_register_keysyms':
php_gdk.c:(.text+0x0): multiple definition of
`phpg_gdk_register_keysyms'
ext/gtk+/.libs/php_gdk.o:php_gdk.c:(.text+0x0): first defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`style_helper_destroy_object':
php_gtk+_types.c:(.text+0x10): multiple definition of
`style_helper_destroy_object'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x10): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`php_gtk_plus_register_types':
php_gtk+_types.c:(.text+0x30): multiple definition of
`php_gtk_plus_register_types'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x30): first
defined here
ext/gtk+/.libs/php_gtk+_types.o:(.bss+0x0): multiple definition of
`gtktreemodelrow_ce'
ext/gtk+/.libs/php_gtk+_types.o:(.bss+0x0): first defined here
ext/gtk+/.libs/php_gtk+_types.o:(.bss+0x8): multiple definition of
`gtktreemodelrowiter_ce'
ext/gtk+/.libs/php_gtk+_types.o:(.bss+0x8): first defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`phpg_modelrowiter_get_iterator':
php_gtk+_types.c:(.text+0x200): multiple definition of
`phpg_modelrowiter_get_iterator'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x200): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function `phpg_modelrow_new':
php_gtk+_types.c:(.text+0x260): multiple definition of
`phpg_modelrow_new'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x260): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function `phpg_model_remove_row':
php_gtk+_types.c:(.text+0xaa0): multiple definition of
`phpg_model_remove_row'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0xaa0): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function `phpg_model_set_row':
php_gtk+_types.c:(.text+0xc60): multiple definition of
`phpg_model_set_row'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0xc60): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`phpg_create_style_helper':
php_gtk+_types.c:(.text+0x1030): multiple definition of
`phpg_create_style_helper'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1030): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`style_helper_get_class_name':
php_gtk+_types.c:(.text+0x1200): multiple definition of
`style_helper_get_class_name'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1200): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function `phpg_tree_path_to_zval':
php_gtk+_types.c:(.text+0x1230): multiple definition of
`phpg_tree_path_to_zval'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1230): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`phpg_tree_path_from_zval':
php_gtk+_types.c:(.text+0x1340): multiple definition of
`phpg_tree_path_from_zval'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1340): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`phpg_rectangle_from_zval':
php_gtk+_types.c:(.text+0x1630): multiple definition of
`phpg_rectangle_from_zval'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1630): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`phpg_treemodel_get_iterator':
php_gtk+_types.c:(.text+0x1770): multiple definition of
`phpg_treemodel_get_iterator'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1770): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`phpg_gtktreemodel_read_dimension_handler':
php_gtk+_types.c:(.text+0x1820): multiple definition of
`phpg_gtktreemodel_read_dimension_handler'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1820): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`phpg_gtktreemodel_count_elements_handler':
php_gtk+_types.c:(.text+0x1dd0): multiple definition of
`phpg_gtktreemodel_count_elements_handler'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1dd0): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`phpg_gtktreemodel_has_dimension_handler':
php_gtk+_types.c:(.text+0x1e60): multiple definition of
`phpg_gtktreemodel_has_dimension_handler'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1e60): first
defined here
ext/gtk+/.libs/php_gtk+_types.o: In function
`phpg_gtktreemodel_write_dimension_handler':
php_gtk+_types.c:(.text+0x1f90): multiple definition of
`phpg_gtktreemodel_write_dimension_handler'
ext/gtk+/.libs/php_gtk+_types.o:php_gtk+_types.c:(.text+0x1f90): first
defined here
ext/gtk+/.libs/phpg_custom_tree_model.o: In function
`phpg_custom_tree_model_get_type':
phpg_custom_tree_model.c:(.text+0xb0): multiple definition of
`phpg_custom_tree_model_get_type'
ext/gtk+/.libs/phpg_custom_tree_model.o:phpg_custom_tree_model.c:(.text+0xb0):
first defined here
ext/gtk+/.libs/phpg_custom_tree_model.o: In function
`phpg_custom_tree_model_new':
phpg_custom_tree_model.c:(.text+0x100): multiple definition of
`phpg_custom_tree_model_new'
ext/gtk+/.libs/phpg_custom_tree_model.o:phpg_custom_tree_model.c:(.text+0x100):
first defined here
collect2: ld returned 1 exit status
make: *** [php_gtk2.la] Error 1
error: Bad exit status from /var/tmp/rpm-tmp.51716 (%build)



------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=40338&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070223023043</emailId><senderName>"nao."</senderName><senderEmail>hinyu@sensyu.ne.jp</senderEmail><timestampReceived>2007-02-23 02:30:43-0400</timestampReceived><subject>[PHP-GTK-DEV] m��������</subject><body>

����������������������������������������������������������������������

�@��������������������������������������������������
�@���@���{�l�������������[�����M�����l�����W��������
�@��������������������������������������������������
�@�����������l���{�l�����[�����������������A������������������� ������
�@���������C�o�������[�������������[�������������S�z�����p�B
�@�������������T���������l������� �����������[�������������I
  http://anatatoonnanoko.com/free/as00101/jayauana01

�@������������������������������������������������
�@���A�������������������������������������g�����@
�@������������������������������������������������
�@���������������������������D�]���A��� ���l�����o�������I
�@�g�����g�����������������������������l�������[���������������I
�@http://anatatoonnanoko.com/free/as00101/jayauana02

�@��������������������������������������������������������
�@���B���T���������l�������b�Z�[�W���o�^�s�v�������������J
�@��������������������������������������������������������
�@�T���������������l�������l�����b�Z�[�W�B�����A�����l�����l�����A�N�Z�X
�@���l�����W���������������������������B
�@���b�Z�[�W�����������N�����o�^�s�v���{���i�����j���������I

�@���l�������b�Z�[�W���������{��
�@http://anatatoonnanoko.com/free/as00101/jayauana03






�z�M�����������������E�E�E�E�Etryit456@126.com

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070223130947</emailId><senderName>"Escuder Nicolas"</senderName><senderEmail>n.escuder@intra-links.com</senderEmail><timestampReceived>2007-02-23 13:09:47-0400</timestampReceived><subject>RE: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash</subject><body>


Yes of course.

This week i will rebuild my OS with full debug ( all with -g -O0 )

After i will can see the backtrace i hope ;)

 
Escuder Nicolas

-----Message d'origine-----
De : Andrei Zmievski [mailto:andrei@gravitonic.com] 
Envoyé : jeudi 22 février 2007 18:20
À : Escuder Nicolas
Cc : php-gtk-dev@lists.php.net
Objet : Re: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash

Did you also rebuild Gtk+ with -g -O0?

-Andrei

On Feb 21, 2007, at 11:08 AM, Escuder Nicolas wrote:

&gt;
&gt; The backtrace of my last message was false...
&gt;
&gt; This was not the backtrace of the crash.
&gt;
&gt; I retry but i always get backtrace with "??" as function name...
&gt;
&gt; So i was build PHP / GTK / PHP-GTK with -g -O0 so the crash do not  
&gt; append in
&gt; them i think.
&gt;
&gt;
&gt;
&gt; Escuder Nicolas
&gt;
&gt; -----Message d'origine-----
&gt; De : Escuder Nicolas [mailto:n.escuder@intra-links.com]
&gt; Envoyé : mercredi 21 février 2007 18:39
&gt; À : php-gtk-dev@lists.php.net
&gt; Objet : RE: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash
&gt;
&gt; Here you can find the backtrace :
&gt;
&gt; 0xb7b2bfb8 in strcmp () from /lib/libc.so.6
&gt; (gdb) bt
&gt; #0  0xb7b2bfb8 in strcmp () from /lib/libc.so.6
&gt; #1  0x081e641e in zend_do_perform_implementation_check ()
&gt; #2  0x081e6a48 in do_inherit_method_check ()
&gt; #3  0x0820546b in zend_hash_replace_checker_wrapper ()
&gt; #4  0x082054b0 in zend_hash_merge_ex ()
&gt; #5  0x081e7a49 in zend_do_implement_interface ()
&gt; #6  0x08200c9d in zend_class_implements ()
&gt; #7  0xb77b1402 in phpg_gtk_register_classes ()
&gt;    from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
&gt; #8  0xb770a356 in php_gtk_xinit_gtk_plus ()
&gt;    from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
&gt; #9  0xb77cbaed in php_gtk_startup_extension ()
&gt;    from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
&gt; #10 0xb77cbbca in php_gtk_startup_extensions ()
&gt;    from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
&gt; #11 0xb77d6407 in php_gtk_startup_all_extensions ()
&gt;    from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
&gt; #12 0xb77cb907 in zm_activate_gtk ()
&gt;    from /usr/lib/php/extensions/no-debug-non-zts-20060613/php_gtk2.so
&gt; #13 0x0813b132 in php_dl ()
&gt; #14 0x0813ad3a in zif_dl ()
&gt; #15 0x0821ac4f in zend_do_fcall_common_helper_SPEC ()
&gt; #16 0x0821fc3a in ZEND_DO_FCALL_SPEC_CONST_HANDLER ()
&gt; #17 0x0821a7f2 in execute ()
&gt; #18 0x081fb0e2 in zend_execute_scripts ()
&gt; #19 0x081b3fbe in php_execute_script ()
&gt; #20 0x082676e6 in main ()
&gt;
&gt; Escuder Nicolas
&gt;
&gt; -----Message d'origine-----
&gt; De : Andrei Zmievski [mailto:andrei@gravitonic.com]
&gt; Envoyé : mercredi 21 février 2007 18:14
&gt; À : Escuder Nicolas
&gt; Cc : php-gtk-dev@lists.php.net
&gt; Objet : Re: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash
&gt;
&gt; You don't have any debug info in your binaries. Can you recompile with
&gt; CFLAGS=-g -O0 ? Just insert them before ./configure in both cases.
&gt;
&gt; -Andrei
&gt;
&gt; On Feb 21, 2007, at 8:09 AM, Escuder Nicolas wrote:
&gt;
&gt;&gt;
&gt;&gt; Hello,
&gt;&gt;
&gt;&gt; More informations :
&gt;&gt;
&gt;&gt; GTK+ 2.10.9 build with :
&gt;&gt; ./configure --prefix=/usr \
&gt;&gt; 	--sysconfdir=/etc \
&gt;&gt; 	--with-jpeg \
&gt;&gt; 	--with-tiff \
&gt;&gt; 	--enable-xinerama \
&gt;&gt; 	--with-libpng \
&gt;&gt; 	--with-gdktarget=x11 \
&gt;&gt; 	--with-xinput
&gt;&gt;
&gt;&gt; PHP 5.2.1 build with :
&gt;&gt; ./configure --prefix=/usr \
&gt;&gt;       --sysconfdir=/etc \
&gt;&gt;       --with-config-file-path=/etc \
&gt;&gt;       --with-zlib-dir=/usr/lib \
&gt;&gt;       --with-pear \
&gt;&gt;       --enable-dom \
&gt;&gt;       --enable-overload \
&gt;&gt;       --enable-pcntl \
&gt;&gt;       --enable-pdo \
&gt;&gt;       --enable-simplexml \
&gt;&gt;       --enable-zip \
&gt;&gt;       --enable-json \
&gt;&gt;       --with-bz2=shared \
&gt;&gt;       --with-curl=shared \
&gt;&gt;       --with-fam=shared \
&gt;&gt;       --with-gettext=shared \
&gt;&gt;       --with-iconv=shared \
&gt;&gt;       --with-imap=shared \
&gt;&gt;       --with-imap-ssl=shared \
&gt;&gt;       --with-mysql=shared \
&gt;&gt;       --with-openssl=shared \
&gt;&gt;       --with-pdo-mysql=shared \
&gt;&gt;       --with-pdo-sqlite=/usr \
&gt;&gt;       --with-xml=shared \
&gt;&gt;       --with-simplexml=shared \
&gt;&gt;       --with-xmlreader=shared \
&gt;&gt;       --with-xmlwriter=shared \
&gt;&gt;       --enable-bcmath=shared \
&gt;&gt;       --enable-calendar=shared \
&gt;&gt;       --enable-ctype=shared \
&gt;&gt;       --enable-exif=shared \
&gt;&gt;       --enable-ftp=shared \
&gt;&gt;       --enable-hash=shared \
&gt;&gt;       --enable-mbstring=shared \
&gt;&gt;       --enable-sockets=shared \
&gt;&gt;       --enable-tokenizer=shared \
&gt;&gt;       --enable-xmlreader=shared \
&gt;&gt;       --enable-xmlwriter=shared \
&gt;&gt;       --without-sqlite \
&gt;&gt;       --disable-cgi
&gt;&gt;
&gt;&gt; PHP-GTK CVS 21/02/2007 build with :
&gt;&gt; ./configure
&gt;&gt;
&gt;&gt; And with this config the new GtkEventBox crash
&gt;&gt;
&gt;&gt; With PHP-GTK CVS 05/11/2005 All works fine.
&gt;&gt;
&gt;&gt;
&gt;&gt; I build GTK+ with debug but in stack trace i only get :
&gt;&gt;
&gt;&gt; Starting program: /bin/php -n test.php
&gt;&gt; [Thread debugging using libthread_db enabled]
&gt;&gt; [New Thread -1213572928 (LWP 6808)]
&gt;&gt;
&gt;&gt; Program received signal SIGSEGV, Segmentation fault.
&gt;&gt; [Switching to Thread -1213572928 (LWP 6808)]
&gt;&gt; 0xb76b8004 in ?? ()
&gt;&gt; (gdb) bt
&gt;&gt; #0  0xb76b8004 in ?? ()
&gt;&gt; #1  0x218145bf in ?? ()
&gt;&gt; #2  0xa6fbf008 in ?? ()
&gt;&gt; ...........
&gt;&gt; #3471 0x6e69622f in ?? ()
&gt;&gt; #3472 0x7068702f in ?? ()
&gt;&gt; #3473 0x00000000 in ?? ()
&gt;&gt;
&gt;&gt; Cannot access memory at address 0xbfd35fff
&gt;&gt;
&gt;&gt;
&gt;&gt; See you soon i hope ;o)
&gt;&gt;
&gt;&gt; Escuder Nicolas
&gt;&gt;
&gt;&gt; -----Message d'origine-----
&gt;&gt; De : Andrei Zmievski [mailto:andrei@gravitonic.com]
&gt;&gt; Envoyé : samedi 27 janvier 2007 19:53
&gt;&gt; À : PHP-GTK Dev list
&gt;&gt; Objet : Re: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash
&gt;&gt;
&gt;&gt; Can anyone else reproduce this?	
&gt;&gt;
&gt;&gt; -Andrei
&gt;&gt;
&gt;&gt;
&gt;&gt; On Jan 26, 2007, at 7:38 PM, n dot escuder at intra-links dot com
&gt;&gt; wrote:
&gt;&gt;
&gt;&gt;&gt;  ID:               39539
&gt;&gt;&gt;  User updated by:  n dot escuder at intra-links dot com
&gt;&gt;&gt;  Reported By:      n dot escuder at intra-links dot com
&gt;&gt;&gt; -Status:           No Feedback
&gt;&gt;&gt; +Status:           Open
&gt;&gt;&gt;  Bug Type:         PHP-GTK related
&gt;&gt;&gt;  Operating System: Linux
&gt;&gt;&gt;  PHP Version:      5.2.0
&gt;&gt;&gt;  New Comment:
&gt;&gt;&gt;
&gt;&gt;&gt; Sorry for the long time of the answer.
&gt;&gt;&gt;
&gt;&gt;&gt; So i try with php 5.2.0 and i checkout the lastest version of php_gtk
&gt;&gt;&gt; and it always crash... i don't known why...
&gt;&gt;&gt;
&gt;&gt;&gt; gdb backtrace :
&gt;&gt;&gt; #178 0xbeeff400 in ?? ()
&gt;&gt;&gt; #179 0x001000b7 in ?? ()
&gt;&gt;&gt; #180 0xb76a3600 in zim_GtkWidget_show_now () from
&gt;&gt;&gt; /usr/lib/php/extensions/php_gtk2.so
&gt;&gt;&gt; Previous frame inner to this frame (corrupt stack?)
&gt;&gt;&gt;
&gt;&gt;&gt; X11R7 Version 7.1
&gt;&gt;&gt; GTK+ Version 2.10.6
&gt;&gt;&gt;
&gt;&gt;&gt; For information i actually use and old php_gtk2 checkout version that
&gt;&gt;&gt; work fine.
&gt;&gt;&gt;
&gt;&gt;&gt; If you want i can give you an ssh access.
&gt;&gt;&gt;
&gt;&gt;&gt; See You
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Previous Comments:
&gt;&gt;&gt; --------------------------------------------------------------------- 
&gt;&gt;&gt; -
&gt;&gt;&gt; --
&gt;&gt;&gt;
&gt;&gt;&gt; [2006-12-15 01:00:00] php-gtk-dev at lists dot php dot net
&gt;&gt;&gt;
&gt;&gt;&gt; No feedback was provided for this bug for over a week, so it is
&gt;&gt;&gt; being suspended automatically. If you are able to provide the
&gt;&gt;&gt; information that was originally requested, please do so and change
&gt;&gt;&gt; the status of the bug back to "Open".
&gt;&gt;&gt;
&gt;&gt;&gt; --------------------------------------------------------------------- 
&gt;&gt;&gt; -
&gt;&gt;&gt; --
&gt;&gt;&gt;
&gt;&gt;&gt; [2006-12-07 05:02:09] andrei@php.net
&gt;&gt;&gt;
&gt;&gt;&gt; Please try using this CVS snapshot:
&gt;&gt;&gt;
&gt;&gt;&gt;   http://snaps.php.net/php4-STABLE-latest.tar.gz
&gt;&gt;&gt;
&gt;&gt;&gt; For Windows:
&gt;&gt;&gt;
&gt;&gt;&gt;   http://snaps.php.net/win32/php4-win32-STABLE-latest.zip
&gt;&gt;&gt;
&gt;&gt;&gt; I cannot reproduce this with PHP-GTK CVS and PHP 5.2.0RC4-dev.
&gt;&gt;&gt;
&gt;&gt;&gt; --------------------------------------------------------------------- 
&gt;&gt;&gt; -
&gt;&gt;&gt; --
&gt;&gt;&gt;
&gt;&gt;&gt; [2006-11-16 21:57:27] n dot escuder at intra-links dot com
&gt;&gt;&gt;
&gt;&gt;&gt; Description:
&gt;&gt;&gt; ------------
&gt;&gt;&gt; php gtk 2 from CVS crash when creating an object of type  
&gt;&gt;&gt; GtkEventBox()
&gt;&gt;&gt;
&gt;&gt;&gt; Reproduce code:
&gt;&gt;&gt; ---------------
&gt;&gt;&gt; new GtkEventBox();
&gt;&gt;&gt;
&gt;&gt;&gt; Expected result:
&gt;&gt;&gt; ----------------
&gt;&gt;&gt; None
&gt;&gt;&gt;
&gt;&gt;&gt; Actual result:
&gt;&gt;&gt; --------------
&gt;&gt;&gt; Crash the program
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; --------------------------------------------------------------------- 
&gt;&gt;&gt; -
&gt;&gt;&gt; --
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; -- 
&gt;&gt;&gt; Edit this bug report at http://bugs.php.net/?id=39539&amp;edit=1
&gt;&gt;&gt;
&gt;&gt;&gt; -- 
&gt;&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;&gt;
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070223173902</emailId><senderName>"Marc Quinton"</senderName><senderEmail>mquinton@gmail.com</senderEmail><timestampReceived>2007-02-23 17:39:02-0400</timestampReceived><subject>[PHP-GTK-DEV] php5-gtk2 package for ubuntu 6.10</subject><body>

hello,

I have built a debian package for ubuntu 6.10. All information about
install is here :

http://php.classes.free.fr/wiki/index.php5?title=Gtk2/InstallUnix#Installing_under_ubuntu

It works fine for me on a (nearly) fresh install.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228012620</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-02-28 01:26:20-0400</timestampReceived><subject>[PHP-GTK-DEV] Window Build Patch - Check for grep and sed</subject><body>

I'm back to the grind again, after messing with php and pecl extensions 
for awhile.

Currently we aren't checking for grep or sed in the windows configure 
script (which does bad things when you move them around on your system 
and they can't be found and then you try to compile php-gtk...let's just 
say "hang" is a kind description)

This just adds a quick check that bails if they can't be found because 
allowing the generator batch file to run without them does naughty things.

Can I get an ok to put this in Steph?

["config.w32.in.patch" (text/plain)]

Index: config.w32.in
===================================================================
RCS file: /repository/php-gtk/win32/config.w32.in,v
retrieving revision 1.12
diff -u -r1.12 config.w32.in
--- config.w32.in	17 Jun 2006 14:47:08 -0000	1.12
+++ config.w32.in	28 Feb 2007 01:22:04 -0000
@@ -14,6 +14,12 @@
 PATH_PROG('link', WshShell.Environment("Process").Item("PATH"), "LD");
 PATH_PROG('nmake');
 
+// check for grep and sed!
+if (!PATH_PROG('grep', WshShell.Environment("Process").Item("PATH")) ||
+    !PATH_PROG('sed', WshShell.Environment("Process").Item("PATH"))) {
+	ERROR("grep and sed are required");
+}
+
 // we don't want to define LIB, as that will override the default library path set in that env var
 PATH_PROG('lib', null, 'MAKE_LIB');
 PATH_PROG('php');



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228014109</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-02-28 01:41:09-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: Window Build Patch - Check for grep and sed</subject><body>

I'll just keep these all in one thread I think - round two

This patch allows php-gtk to build be built both thread safe and 
non-thread safe on windows - it includes adding a configure option,
changing the output dirs to match php's standard of Release_TS, Release, 
Debug_TS, Debug, and changes the php library that the gtk extension 
looks for.

["zts.patch" (text/plain)]

Index: ext/gtk+/config.w32
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/config.w32,v
retrieving revision 1.5
diff -u -r1.5 config.w32
--- ext/gtk+/config.w32	24 Oct 2006 12:46:14 -0000	1.5
+++ ext/gtk+/config.w32	28 Feb 2007 01:35:15 -0000
@@ -1,5 +1,5 @@
 
-if (CHECK_HEADER("main/php.h") &amp;&amp; CHECK_LIB(PHP_GTK_DEBUG != "no" ? \
"php5ts_debug.lib" : "php5ts.lib", "php-gtk") &amp;&amp; +if (CHECK_HEADER("main/php.h") &amp;&amp; \
CHECK_LIB(PHP_LIB, "php-gtk") &amp;&amp;  CHECK_HEADER("iconv.h") &amp;&amp; CHECK_LIB("iconv.lib", \
"php-gtk") &amp;&amp;  CHECK_HEADER("libintl.h") &amp;&amp; CHECK_LIB("intl.lib", "php-gtk") &amp;&amp;
 	CHECK_HEADER("atk/atk.h") &amp;&amp; CHECK_LIB("atk-1.0.lib", "php-gtk") &amp;&amp;
Index: win32/config.w32.in
===================================================================
RCS file: /repository/php-gtk/win32/config.w32.in,v
retrieving revision 1.12
diff -u -r1.12 config.w32.in
--- win32/config.w32.in	17 Jun 2006 14:47:08 -0000	1.12
+++ win32/config.w32.in	28 Feb 2007 01:37:22 -0000
@@ -45,6 +45,7 @@
 
 ARG_WITH('php-build', 'Path to where you extracted \
http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of this source \
dir (..\\php_build) if not specified', 'no');  ARG_WITH('cygwin', 'Path to cygwin \
utilities on your system', '\\cygwin'); +ARG_ENABLE('zts', 'Thread safety', 'yes');
 
 // stick objects somewhere outside of the source tree
 ARG_ENABLE('object-out-dir', 'Alternative location for binary objects during build', \
''); @@ -57,13 +58,6 @@
 
 ARG_ENABLE('debug', 'Compile with debugging symbols', "no");
 
-// Set some debug-specific options
-if (PHP_GTK_DEBUG == "yes") {
-	DEFINE("BUILD_DIR", PHP_GTK_OBJECT_OUT_DIR + "Debug");
-} else {
-	DEFINE("BUILD_DIR", PHP_GTK_OBJECT_OUT_DIR + "Release");
-}
-
 ARG_IS('all', 'Configure all available extensions', 'no');
 
 DEFINE("PHPGTKDLL", "php-gtk2.dll");
@@ -81,11 +75,28 @@
 DEFINE("LIBS", "kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib \
advapi32.lib shell32.lib ole32.lib");  
 if (PHP_GTK_DEBUG == "yes") {
-	DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. /I main /I \
..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I ..\\php5\\TSRM /D \
ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 /D _DEBUG /D _WINDOWS /D \
_MBCS /D _USRDLL"); +	DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I \
..\\.. /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I \
..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 /D _DEBUG /D \
_WINDOWS /D _MBCS /D _USRDLL");  ADD_FLAG("LDFLAGS", "/debug");
 
 } else {
-	DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main /I \
..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I ..\\php5\\TSRM /D \
ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D NDEBUG /D _WINDOWS /D \
_MBCS /D _USRDLL"); +	DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I \
..\\.. /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I \
..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D NDEBUG /D \
_WINDOWS /D _MBCS /D _USRDLL"); +}
+
+// Set some debug-specific options
+if (PHP_GTK_DEBUG == "yes" &amp;&amp; PHP_GTK_ZTS == "yes") {
+	DEFINE("BUILD_DIR", PHP_GTK_OBJECT_OUT_DIR + "Debug_TS");
+	ADD_FLAG("CFLAGS", "/D ZTS=1");
+	PHP_LIB = "php5ts_debug.lib";
+} else if (PHP_GTK_DEBUG == "yes") {
+	DEFINE("BUILD_DIR", PHP_GTK_OBJECT_OUT_DIR + "Debug");
+	PHP_LIB = "php5_debug.lib";
+} else if (PHP_GTK_ZTS == "yes") {
+	DEFINE("BUILD_DIR", PHP_GTK_OBJECT_OUT_DIR + "Release_TS");
+	ADD_FLAG("CFLAGS", "/D ZTS=1");
+	PHP_LIB = "php5ts.lib";
+} else {
+	DEFINE("BUILD_DIR", PHP_GTK_OBJECT_OUT_DIR + "Release");
+	PHP_LIB = "php5.lib";
 }
 
 if (VCVERS &lt; 14) {



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228015819</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-02-28 01:58:19-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: Window Build Patch - Check for grep and sed</subject><body>

Round three - add support for the GdkPixbuf::new_from_gd on windows

Since the method will only work if gd is compiled statically into php, I 
  made a new argument (--enable-gd) that simply sets the right compiler flag

["gd.patch" (text/plain)]

Index: config.w32.in
===================================================================
RCS file: /repository/php-gtk/win32/config.w32.in,v
retrieving revision 1.12
diff -u -r1.12 config.w32.in
--- config.w32.in	17 Jun 2006 14:47:08 -0000	1.12
+++ config.w32.in	28 Feb 2007 01:53:17 -0000
@@ -45,6 +45,7 @@
 
 ARG_WITH('php-build', 'Path to where you extracted \
http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of this source \
dir (..\\php_build) if not specified', 'no');  ARG_WITH('cygwin', 'Path to cygwin \
utilities on your system', '\\cygwin'); +ARG_ENABLE('gd', 'Php has static gd', "no");
 
 // stick objects somewhere outside of the source tree
 ARG_ENABLE('object-out-dir', 'Alternative location for binary objects during build', \
''); @@ -99,6 +100,11 @@
 	ADD_FLAG('CFLAGS', '/GS /wd4996 ');
 }
 
+if (PHP_GTK_GD == "yes") {
+	ADD_FLAG('CFLAGS', '/D HAVE_GD_BUNDLED=1'); 
+}
+
+
 if (PHP_GTK_PHP_BUILD == 'no') {
 	if (FSO.FolderExists("..\\php_build")) {
 		PHP_GTK_PHP_BUILD = "..\\php_build";



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228020958</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-02-28 02:09:58-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: Window Build Patch - Check for grep and sed</subject><body>

Round four - Allow --enable-debug-pack so pdb files can be generated for 
release builds, so any backtraces via windbg are actually meaningful

["debug.patch" (text/plain)]

Index: config.w32.in
===================================================================
RCS file: /repository/php-gtk/win32/config.w32.in,v
retrieving revision 1.12
diff -u -r1.12 config.w32.in
--- config.w32.in	17 Jun 2006 14:47:08 -0000	1.12
+++ config.w32.in	28 Feb 2007 02:07:21 -0000
@@ -56,6 +56,10 @@
 }
 
 ARG_ENABLE('debug', 'Compile with debugging symbols', "no");
+ARG_ENABLE('debug-pack', 'Release binaries with external debug symbols \
(--enable-debug must not be specified)', 'no'); +if (PHP_GTK_DEBUG == "yes" &amp;&amp; \
PHP_GTK_DEBUG_PACK == "yes") { +	ERROR("Use of both --enable-debug and \
--enable-debug-pack not allowed."); +}
 
 // Set some debug-specific options
 if (PHP_GTK_DEBUG == "yes") {
@@ -86,6 +90,11 @@
 
 } else {
 	DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main /I \
..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I ..\\php5\\TSRM /D \
ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D NDEBUG /D _WINDOWS /D \
_MBCS /D _USRDLL"); +	// Generate external debug files when --enable-debug-pack is \
specified +	if (PHP_GTK_DEBUG_PACK == "yes") {
+		ADD_FLAG("CFLAGS", "/Zi");
+		ADD_FLAG("LDFLAGS", "/incremental:no /debug /opt:ref,icf");
+	}
 }
 
 if (VCVERS &lt; 14) {



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228022621</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-02-28 02:26:21-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: Window Build Patch - Check for grep and sed</subject><body>

Sick of me yet?  Round 5 - and one of the biggest patches

This actually adds build support for the gtk library versioning for the 
windows build.  It required some rather interesting rearranging.

First of all, buildconf no longer generates the temp.bat file and adds 
the generator lines.  Instead the config.w32 in ext/gtk does that (just 
like all the other extensions)

Second, a function was added to confutils that parses the gtkversion.h 
header and yanks out the library version.  The lowest possible version 
available is 2.6 and there is no upper limit.  This is then assigned to 
PHP_GTK_LIBVERSION - as per Andrei's request, there is no config 
variable to change this, what it finds is what you get.

Third, the actual generation of the files had to be moved so it didn't 
happen until AFTER the point where the gtk library version was checked.

["versioning.patch" (text/plain)]

Index: ext/gtk+/config.w32
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/config.w32,v
retrieving revision 1.5
diff -u -r1.5 config.w32
--- ext/gtk+/config.w32	24 Oct 2006 12:46:14 -0000	1.5
+++ ext/gtk+/config.w32	28 Feb 2007 02:18:13 -0000
@@ -18,4 +18,19 @@
 		EXTENSION("php-gtk", "gen_atk.c gen_gdk.c gen_gtk.c gen_pango.c php_gdk.c \
php_gtk+.c php_gtk+_types.c phpg_custom_tree_model.c", true); // always shared  
 		AC_DEFINE("HAVE_PHP_GTK", 1, "PHP-GTK enabled");
+
+		/* Create the file if it doesn't exist */
+		var temp = FSO.OpenTextFile("win32\\temp.bat", 8);
+		/* generate source and header files for exported PHP-GTK functions */
+		temp.WriteLine("/* usage: php generator.php [-l logfile] [-o overridesfile] [-p \
prefix] [-c functionclass ] [-r typesfile] [-f savefile] defsfile */"); \
+		temp.WriteLine("mkdir win32\\logs"); +		temp.WriteLine("php -q \
generator\\generator.php -l win32\\logs\\config_atk.log -o ext\\gtk+\\atk.overrides \
-p atk ext\\gtk+\\atk.defs -v " + PHP_GTK_LIBVERSION + " &gt; ext\\gtk+\\gen_atk.c"); \
+		temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_pango.log \
-o ext\\gtk+\\pango.overrides -p pango ext\\gtk+\\pango.defs -v " + \
PHP_GTK_LIBVERSION + " &gt; ext\\gtk+\\gen_pango.c"); +		temp.WriteLine("php -q \
generator\\generator.php -l win32\\logs\\config_gdk.log -o ext\\gtk+\\gdk.overrides \
-p gdk -r ext\\gtk+\\atk-types.defs -v " + PHP_GTK_LIBVERSION + " -r \
ext\\gtk+\\pango-types.defs ext\\gtk+\\gdk.defs &gt; ext\\gtk+\\gen_gdk.c"); \
+		temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_gtk.log -o \
ext\\gtk+\\gtk.overrides -p gtk -r ext\\gtk+\\atk-types.defs -v " + \
PHP_GTK_LIBVERSION + " -r ext\\gtk+\\pango-types.defs -r ext\\gtk+\\gdk-types.defs \
ext\\gtk+\\gtk.defs &gt; ext\\gtk+\\gen_gtk.c"); +		temp.WriteLine('grep -h \
"^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_atk.c | sed -e "s/^/PHP_GTK_API extern /" &gt; \
ext\\gtk+\\gen_atk.h'); +		temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" \
ext\\gtk+\\gen_pango.c | sed -e "s/^/PHP_GTK_API extern /" &gt; \
ext\\gtk+\\gen_pango.h'); +		temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" \
ext\\gtk+\\gen_gdk.c | sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gdk.h'); \
+		temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gtk.c | sed -e \
"s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gtk.h'); +		temp.Close();
 }
Index: win32/buildconf.js
===================================================================
RCS file: /repository/php-gtk/win32/buildconf.js,v
retrieving revision 1.7
diff -u -r1.7 buildconf.js
--- win32/buildconf.js	31 Oct 2005 11:44:42 -0000	1.7
+++ win32/buildconf.js	25 Jan 2007 23:42:22 -0000
@@ -43,22 +43,6 @@
 	return t;
 }
 
-function gen_functions() {
-
-	/* generate source and header files for exported PHP-GTK functions */
-	temp.WriteLine("/* usage: php generator.php [-l logfile] [-o overridesfile] [-p \
                prefix] [-c functionclass ] [-r typesfile] [-f savefile] defsfile \
                */");
-	temp.WriteLine("mkdir win32\\logs");
-	temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_atk.log -o \
                ext\\gtk+\\atk.overrides -p atk ext\\gtk+\\atk.defs &gt; \
                ext\\gtk+\\gen_atk.c");
-	temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_pango.log -o \
                ext\\gtk+\\pango.overrides -p pango ext\\gtk+\\pango.defs &gt; \
                ext\\gtk+\\gen_pango.c");
-	temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_gdk.log -o \
ext\\gtk+\\gdk.overrides -p gdk -r ext\\gtk+\\atk-types.defs -r \
                ext\\gtk+\\pango-types.defs ext\\gtk+\\gdk.defs &gt; \
                ext\\gtk+\\gen_gdk.c");
-	temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_gtk.log -o \
ext\\gtk+\\gtk.overrides -p gtk -r ext\\gtk+\\atk-types.defs -r \
ext\\gtk+\\pango-types.defs -r ext\\gtk+\\gdk-types.defs ext\\gtk+\\gtk.defs &gt; \
                ext\\gtk+\\gen_gtk.c");
-	temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_atk.c | sed -e \
                "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_atk.h');
-	temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_pango.c | sed -e \
                "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_pango.h');
-	temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gdk.c | sed -e \
                "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gdk.h');
-	temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gtk.c | sed -e \
                "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gtk.h');
-	return;
-}
-
 function Module_Item(module_name, config_path, dir_line, content) {
 
 	this.module_name = module_name;
@@ -165,8 +149,6 @@
 	}
 }
 
-gen_functions();
-
 // Write the head of the configure script
 C.WriteLine("/* This file is automatically generated from win32/confutils.js */");
 C.Write(file_get_contents("win32/confutils.js"));
Index: win32/config.w32.in
===================================================================
RCS file: /repository/php-gtk/win32/config.w32.in,v
retrieving revision 1.12
diff -u -r1.12 config.w32.in
--- win32/config.w32.in	17 Jun 2006 14:47:08 -0000	1.12
+++ win32/config.w32.in	28 Feb 2007 02:11:29 -0000
@@ -70,6 +70,10 @@
 DEFINE("PHPGTKLIB", "php-gtk2.lib");
 get_version_numbers();
 
+/* pick up the version from gtk/gtkversion.h */
+STDOUT.Write("Checking for gtk\\gtkversion.h ... ");
+get_gtk_libversion();
+
 // General link flags
 DEFINE("LDFLAGS", "/nologo");
 // General DLL link flags
Index: win32/confutils.js
===================================================================
RCS file: /repository/php-gtk/win32/confutils.js,v
retrieving revision 1.19
diff -u -r1.19 confutils.js
--- win32/confutils.js	17 Jul 2006 17:00:09 -0000	1.19
+++ win32/confutils.js	28 Feb 2007 02:15:59 -0000
@@ -133,6 +133,46 @@
 	DEFINE('PHP_GTK_VERSION_STRING', version);
 }
 
+function get_gtk_libversion()
+{
+	var env, i, file, found, vin, major, minor;
+
+	env = WshShell.Environment("Process").Item('INCLUDE');
+	env = env.split(";");
+	for (i = 0; i &lt; env.length; i++) {
+		file = glob(env[i] + "\\gtk\\gtkversion.h");
+		if (file) {
+			found = true;
+			break;
+		}
+	}
+
+	if (found == true) {
+		STDOUT.WriteLine("	&lt;in default path&gt;");
+	} else {
+		STDOUT.WriteLine("	&lt;not found&gt;");
+	}
+
+	vin = file_get_contents(file);
+
+	regex = new RegExp("GTK_MAJOR_VERSION\\s+\\(([0-9]+)\\)");
+	regex.exec(vin);
+	major = RegExp.$1;
+	if (major &lt; 2)
+		major = 2;
+
+	regex = new RegExp("GTK_MINOR_VERSION\\s+\\(([0-9]+)\\)");
+	regex.exec(vin);
+	minor = RegExp.$1;
+	if (minor &lt; 6)
+		minor = 6;
+
+	PHP_GTK_LIBVERSION = major + '.' + minor;
+
+	STDOUT.Write("Library definitions for " + PHP_GTK_LIBVERSION + " will be used");
+	STDERR.WriteBlankLines(1);
+}
+
 function condense_path(path) {
 
 	path = FSO.GetAbsolutePathName(path);
@@ -302,9 +342,6 @@
 		}
 		WScript.Quit(1);
 
-	} else { // not --help
-
-		generate_source();
 	}
 
 	// Now set any defaults we might have missed out earlier
@@ -938,6 +975,8 @@
 		}
 	}
 
+	generate_source();
+
 	STDOUT.WriteLine("Generating source files - this may take a few seconds");
 	WScript.Sleep(3500);
 	check_generation();



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228023922</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-02-28 02:39:22-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: Window Build Patch - Check for grep and sed</subject><body>

Round six - last one...don't kill me steph

This patch adds support for msvc 8 (2005) "out of the box" - it fixes 
deprecated compiler flags and adds manifest packing (copied straight 
from php5...)

If you could take the time to look them over so we can get them into cvs 
that would be great, steph.  None of them should affect the msvc6 build 
in any way.

["msvc8.patch" (text/plain)]

Index: config.w32.in
===================================================================
RCS file: /repository/php-gtk/win32/config.w32.in,v
retrieving revision 1.12
diff -u -r1.12 config.w32.in
--- config.w32.in	17 Jun 2006 14:47:08 -0000	1.12
+++ config.w32.in	28 Feb 2007 02:33:08 -0000
@@ -14,6 +14,9 @@
 PATH_PROG('link', WshShell.Environment("Process").Item("PATH"), "LD");
 PATH_PROG('nmake');
 
+// Try locating manifest tool
+PATH_PROG('mt', WshShell.Environment("Process").Item("PATH"), "MT");
+
 // we don't want to define LIB, as that will override the default library path set \
in that env var  PATH_PROG('lib', null, 'MAKE_LIB');
 PATH_PROG('php');
@@ -81,22 +84,32 @@
 DEFINE("LIBS", "kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib \
advapi32.lib shell32.lib ole32.lib");  
 if (PHP_GTK_DEBUG == "yes") {
-	DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. /I main /I \
..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I ..\\php5\\TSRM /D \
ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 /D _DEBUG /D _WINDOWS /D \
_MBCS /D _USRDLL"); +	DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /EHsc /ZI /I . /I ..\\ \
/I ..\\.. /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend \
/I ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 /D \
_DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");  ADD_FLAG("LDFLAGS", "/debug");
 
 } else {
-	DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main /I \
..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I ..\\php5\\TSRM /D \
ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D NDEBUG /D _WINDOWS /D \
_MBCS /D _USRDLL"); +	DEFINE("CFLAGS", "/nologo /MD /W3 /EHsc /O2 /I . /I ..\\ /I \
..\\.. /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I \
..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D NDEBUG \
/D _WINDOWS /D _MBCS /D _USRDLL");  }
 
 if (VCVERS &lt; 14) {
 	// Enable automatic precompiled headers
 	ADD_FLAG('CFLAGS', '/YX /c');
+	if (PHP_GTK_DEBUG == "yes")
+	{
+		// Set some debug/release specific options
+		ADD_FLAG('CFLAGS', ' /GZ ');
+	}
 }
 
 if (VCVERS &gt;= 14) {
 	// fun stuff: MS deprecated ANSI stdio and similar functions - disable warnings
 	// GS hardens the binary against buffer overruns
 	ADD_FLAG('CFLAGS', '/GS /wd4996 ');
+	if (PHP_GTK_DEBUG == "yes")
+	{
+		// Set some debug/release specific options
+		ADD_FLAG('CFLAGS', ' /RTC1 ');
+	}
 }
 
 if (PHP_GTK_PHP_BUILD == 'no') {
Index: confutils.js
===================================================================
RCS file: /repository/php-gtk/win32/confutils.js,v
retrieving revision 1.19
diff -u -r1.19 confutils.js
--- confutils.js	17 Jul 2006 17:00:09 -0000	1.19
+++ confutils.js	28 Feb 2007 02:30:23 -0000
@@ -668,6 +668,7 @@
 
 	MFO.WriteLine("$(BUILD_DIR)\\" + dllname + ": $(" + EXT + "_GLOBAL_OBJS)" + \
res_var);  MFO.WriteLine("\t" + ld + " /out:$(BUILD_DIR)\\" + dllname + " $(" + EXT + \
"_LDFLAGS)" + dllflags + " $(LDFLAGS) $(" + EXT + "_GLOBAL_OBJS) $(LIBS_" + EXT + ")" \
+ dep_libs + " $(LIBS)" + res_var); +	MFO.WriteLine("\t-@$(_VC_MANIFEST_EMBED_DLL)");
 
 	MFO.WriteBlankLines(1);
 	MFO.WriteLine(dllname + ": $(BUILD_DIR)\\" + dllname);
@@ -968,6 +969,16 @@
 		MF.WriteLine(keys[i] + "=" + configure_subst.Item(keys[i]) + " ");
 	}
 
+	MF.WriteLine("!if $(MT) == \"\"");
+	MF.WriteBlankLines(1);
+	MF.WriteLine("_VC_MANIFEST_EMBED_DLL=");
+	MF.WriteBlankLines(1);
+	MF.WriteLine("!else");
+	MF.WriteBlankLines(1);
+	MF.WriteLine("_VC_MANIFEST_EMBED_DLL= $(MT) -nologo -manifest $@.manifest \
-outputresource:$@;2"); +	MF.WriteBlankLines(1);
+	MF.WriteLine("!endif");
+
 	MF.WriteBlankLines(1);
 	MF.WriteLine("all: $(EXT_TARGETS)");
 



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228123010</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-02-28 12:30:10-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: Window Build Patch - Check for grep and sed</subject><body>

I don't see any point in this one. We only had ZTS before, and we're about 
to lose it anyway, no?

----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: &lt;php-gtk-dev@lists.php.net&gt;
Sent: Wednesday, February 28, 2007 1:41 AM
Subject: [PHP-GTK-DEV] Re: Window Build Patch - Check for grep and sed


&gt; I'll just keep these all in one thread I think - round two
&gt;
&gt; This patch allows php-gtk to build be built both thread safe and
&gt; non-thread safe on windows - it includes adding a configure option,
&gt; changing the output dirs to match php's standard of Release_TS, Release,
&gt; Debug_TS, Debug, and changes the php library that the gtk extension
&gt; looks for.
&gt;


--------------------------------------------------------------------------------


&gt; Index: ext/gtk+/config.w32
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/ext/gtk+/config.w32,v
&gt; retrieving revision 1.5
&gt; diff -u -r1.5 config.w32
&gt; --- ext/gtk+/config.w32 24 Oct 2006 12:46:14 -0000 1.5
&gt; +++ ext/gtk+/config.w32 28 Feb 2007 01:35:15 -0000
&gt; @@ -1,5 +1,5 @@
&gt;
&gt; -if (CHECK_HEADER("main/php.h") &amp;&amp; CHECK_LIB(PHP_GTK_DEBUG != "no" ? 
&gt; "php5ts_debug.lib" : "php5ts.lib", "php-gtk") &amp;&amp;
&gt; +if (CHECK_HEADER("main/php.h") &amp;&amp; CHECK_LIB(PHP_LIB, "php-gtk") &amp;&amp;
&gt;  CHECK_HEADER("iconv.h") &amp;&amp; CHECK_LIB("iconv.lib", "php-gtk") &amp;&amp;
&gt;  CHECK_HEADER("libintl.h") &amp;&amp; CHECK_LIB("intl.lib", "php-gtk") &amp;&amp;
&gt;  CHECK_HEADER("atk/atk.h") &amp;&amp; CHECK_LIB("atk-1.0.lib", "php-gtk") &amp;&amp;
&gt; Index: win32/config.w32.in
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/config.w32.in,v
&gt; retrieving revision 1.12
&gt; diff -u -r1.12 config.w32.in
&gt; --- win32/config.w32.in 17 Jun 2006 14:47:08 -0000 1.12
&gt; +++ win32/config.w32.in 28 Feb 2007 01:37:22 -0000
&gt; @@ -45,6 +45,7 @@
&gt;
&gt; ARG_WITH('php-build', 'Path to where you extracted 
&gt; http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of 
&gt; this source dir (..\\php_build) if not specified', 'no');
&gt; ARG_WITH('cygwin', 'Path to cygwin utilities on your system', '\\cygwin');
&gt; +ARG_ENABLE('zts', 'Thread safety', 'yes');
&gt;
&gt; // stick objects somewhere outside of the source tree
&gt; ARG_ENABLE('object-out-dir', 'Alternative location for binary objects 
&gt; during build', '');
&gt; @@ -57,13 +58,6 @@
&gt;
&gt; ARG_ENABLE('debug', 'Compile with debugging symbols', "no");
&gt;
&gt; -// Set some debug-specific options
&gt; -if (PHP_GTK_DEBUG == "yes") {
&gt; - DEFINE("BUILD_DIR", PHP_GTK_OBJECT_OUT_DIR + "Debug");
&gt; -} else {
&gt; - DEFINE("BUILD_DIR", PHP_GTK_OBJECT_OUT_DIR + "Release");
&gt; -}
&gt; -
&gt; ARG_IS('all', 'Configure all available extensions', 'no');
&gt;
&gt; DEFINE("PHPGTKDLL", "php-gtk2.dll");
&gt; @@ -81,11 +75,28 @@
&gt; DEFINE("LIBS", "kernel32.lib user32.lib gdi32.lib winspool.lib 
&gt; comdlg32.lib advapi32.lib shell32.lib ole32.lib");
&gt;
&gt; if (PHP_GTK_DEBUG == "yes") {
&gt; - DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. 
&gt; /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend 
&gt; /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D 
&gt; WIN32 /D _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; + DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. 
&gt; /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend 
&gt; /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 /D 
&gt; _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt;  ADD_FLAG("LDFLAGS", "/debug");
&gt;
&gt; } else {
&gt; - DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main 
&gt; /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I 
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D 
&gt; WIN32 /D NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; + DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main 
&gt; /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I 
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D 
&gt; NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; +}
&gt; +
&gt; +// Set some debug-specific options
&gt; +if (PHP_GTK_DEBUG == "yes" &amp;&amp; PHP_GTK_ZTS == "yes") {
&gt; + DEFINE("BUILD_DIR", PHP_GTK_OBJECT_OUT_DIR + "Debug_TS");
&gt; + ADD_FLAG("CFLAGS", "/D ZTS=1");
&gt; + PHP_LIB = "php5ts_debug.lib";
&gt; +} else if (PHP_GTK_DEBUG == "yes") {
&gt; + DEFINE("BUILD_DIR", PHP_GTK_OBJECT_OUT_DIR + "Debug");
&gt; + PHP_LIB = "php5_debug.lib";
&gt; +} else if (PHP_GTK_ZTS == "yes") {
&gt; + DEFINE("BUILD_DIR", PHP_GTK_OBJECT_OUT_DIR + "Release_TS");
&gt; + ADD_FLAG("CFLAGS", "/D ZTS=1");
&gt; + PHP_LIB = "php5ts.lib";
&gt; +} else {
&gt; + DEFINE("BUILD_DIR", PHP_GTK_OBJECT_OUT_DIR + "Release");
&gt; + PHP_LIB = "php5.lib";
&gt; }
&gt;
&gt; if (VCVERS &lt; 14) {
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228123207</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-02-28 12:32:07-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: Window Build Patch - Check for grep and sed</subject><body>

This one can go in straight off, it doesn't touch anything existing.

----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: &lt;php-gtk-dev@lists.php.net&gt;
Sent: Wednesday, February 28, 2007 2:09 AM
Subject: [PHP-GTK-DEV] Re: Window Build Patch - Check for grep and sed


&gt; Round four - Allow --enable-debug-pack so pdb files can be generated for
&gt; release builds, so any backtraces via windbg are actually meaningful
&gt;


--------------------------------------------------------------------------------


&gt; Index: config.w32.in
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/config.w32.in,v
&gt; retrieving revision 1.12
&gt; diff -u -r1.12 config.w32.in
&gt; --- config.w32.in 17 Jun 2006 14:47:08 -0000 1.12
&gt; +++ config.w32.in 28 Feb 2007 02:07:21 -0000
&gt; @@ -56,6 +56,10 @@
&gt; }
&gt;
&gt; ARG_ENABLE('debug', 'Compile with debugging symbols', "no");
&gt; +ARG_ENABLE('debug-pack', 'Release binaries with external debug symbols 
&gt; (--enable-debug must not be specified)', 'no');
&gt; +if (PHP_GTK_DEBUG == "yes" &amp;&amp; PHP_GTK_DEBUG_PACK == "yes") {
&gt; + ERROR("Use of both --enable-debug and --enable-debug-pack not 
&gt; allowed.");
&gt; +}
&gt;
&gt; // Set some debug-specific options
&gt; if (PHP_GTK_DEBUG == "yes") {
&gt; @@ -86,6 +90,11 @@
&gt;
&gt; } else {
&gt;  DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main 
&gt; /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I 
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D 
&gt; WIN32 /D NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; + // Generate external debug files when --enable-debug-pack is specified
&gt; + if (PHP_GTK_DEBUG_PACK == "yes") {
&gt; + ADD_FLAG("CFLAGS", "/Zi");
&gt; + ADD_FLAG("LDFLAGS", "/incremental:no /debug /opt:ref,icf");
&gt; + }
&gt; }
&gt;
&gt; if (VCVERS &lt; 14) {
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228123332</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-02-28 12:33:32-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: Window Build Patch - Check for grep and sed</subject><body>

It's that 'should'....

I promise I'll get onto it this week, sorry it's been a bit hectic here 
lately (when isn't it?)

- Steph

&gt; Round six - last one...don't kill me steph
&gt;
&gt; This patch adds support for msvc 8 (2005) "out of the box" - it fixes
&gt; deprecated compiler flags and adds manifest packing (copied straight
&gt; from php5...)
&gt;
&gt; If you could take the time to look them over so we can get them into cvs
&gt; that would be great, steph.  None of them should affect the msvc6 build
&gt; in any way.
&gt;


--------------------------------------------------------------------------------


&gt; Index: config.w32.in
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/config.w32.in,v
&gt; retrieving revision 1.12
&gt; diff -u -r1.12 config.w32.in
&gt; --- config.w32.in 17 Jun 2006 14:47:08 -0000 1.12
&gt; +++ config.w32.in 28 Feb 2007 02:33:08 -0000
&gt; @@ -14,6 +14,9 @@
&gt; PATH_PROG('link', WshShell.Environment("Process").Item("PATH"), "LD");
&gt; PATH_PROG('nmake');
&gt;
&gt; +// Try locating manifest tool
&gt; +PATH_PROG('mt', WshShell.Environment("Process").Item("PATH"), "MT");
&gt; +
&gt; // we don't want to define LIB, as that will override the default library 
&gt; path set in that env var
&gt; PATH_PROG('lib', null, 'MAKE_LIB');
&gt; PATH_PROG('php');
&gt; @@ -81,22 +84,32 @@
&gt; DEFINE("LIBS", "kernel32.lib user32.lib gdi32.lib winspool.lib 
&gt; comdlg32.lib advapi32.lib shell32.lib ole32.lib");
&gt;
&gt; if (PHP_GTK_DEBUG == "yes") {
&gt; - DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. 
&gt; /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend 
&gt; /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D 
&gt; WIN32 /D _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; + DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /EHsc /ZI /I . /I ..\\ /I ..\\.. 
&gt; /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend 
&gt; /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D 
&gt; WIN32 /D _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt;  ADD_FLAG("LDFLAGS", "/debug");
&gt;
&gt; } else {
&gt; - DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main 
&gt; /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I 
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D 
&gt; WIN32 /D NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; + DEFINE("CFLAGS", "/nologo /MD /W3 /EHsc /O2 /I . /I ..\\ /I ..\\.. /I 
&gt; main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I 
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D 
&gt; WIN32 /D NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; }
&gt;
&gt; if (VCVERS &lt; 14) {
&gt;  // Enable automatic precompiled headers
&gt;  ADD_FLAG('CFLAGS', '/YX /c');
&gt; + if (PHP_GTK_DEBUG == "yes")
&gt; + {
&gt; + // Set some debug/release specific options
&gt; + ADD_FLAG('CFLAGS', ' /GZ ');
&gt; + }
&gt; }
&gt;
&gt; if (VCVERS &gt;= 14) {
&gt;  // fun stuff: MS deprecated ANSI stdio and similar functions - disable 
&gt; warnings
&gt;  // GS hardens the binary against buffer overruns
&gt;  ADD_FLAG('CFLAGS', '/GS /wd4996 ');
&gt; + if (PHP_GTK_DEBUG == "yes")
&gt; + {
&gt; + // Set some debug/release specific options
&gt; + ADD_FLAG('CFLAGS', ' /RTC1 ');
&gt; + }
&gt; }
&gt;
&gt; if (PHP_GTK_PHP_BUILD == 'no') {
&gt; Index: confutils.js
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/confutils.js,v
&gt; retrieving revision 1.19
&gt; diff -u -r1.19 confutils.js
&gt; --- confutils.js 17 Jul 2006 17:00:09 -0000 1.19
&gt; +++ confutils.js 28 Feb 2007 02:30:23 -0000
&gt; @@ -668,6 +668,7 @@
&gt;
&gt;  MFO.WriteLine("$(BUILD_DIR)\\" + dllname + ": $(" + EXT + "_GLOBAL_OBJS)" 
&gt; + res_var);
&gt;  MFO.WriteLine("\t" + ld + " /out:$(BUILD_DIR)\\" + dllname + " $(" + EXT 
&gt; + "_LDFLAGS)" + dllflags + " $(LDFLAGS) $(" + EXT + "_GLOBAL_OBJS) 
&gt; $(LIBS_" + EXT + ")" + dep_libs + " $(LIBS)" + res_var);
&gt; + MFO.WriteLine("\t-@$(_VC_MANIFEST_EMBED_DLL)");
&gt;
&gt;  MFO.WriteBlankLines(1);
&gt;  MFO.WriteLine(dllname + ": $(BUILD_DIR)\\" + dllname);
&gt; @@ -968,6 +969,16 @@
&gt;  MF.WriteLine(keys[i] + "=" + configure_subst.Item(keys[i]) + " ");
&gt;  }
&gt;
&gt; + MF.WriteLine("!if $(MT) == \"\"");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("_VC_MANIFEST_EMBED_DLL=");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("!else");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("_VC_MANIFEST_EMBED_DLL= $(MT) -nologo -manifest 
&gt; $@.manifest -outputresource:$@;2");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("!endif");
&gt; +
&gt;  MF.WriteBlankLines(1);
&gt;  MF.WriteLine("all: $(EXT_TARGETS)");
&gt;
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228133614</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-02-28 13:36:14-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: Window Build Patch - Check for grep and sed</subject><body>

Steph Fox wrote:
&gt; I don't see any point in this one. We only had ZTS before, and we're 
&gt; about to lose it anyway, no?

Theoretically it's a great idea to only allow it to build without 
ZTS...in the real world...with windows PHP users...

The main problem I see is that there will be people who want to use 
third party extensions that are ONLY available in ZTS mode (zend 
anyone?) - it might be nice to ALLOW building with zts even if the 
"official" php-gtk2.dll binaries are only distributed as non-zts  - this 
just allows a choice in the matter.

It might be smart to have two versions of php-gtk2 - a non-zts one 
that's "recommended" and a zts version that will work with the 
extensions from pecl4win and third party stuff.  Otherwise we'll 
basically have to have our own pecl4win with extensions and that might 
get messy - anyway the patch allows people to build both regardless of 
what the decision on the "official" distribution is.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228134635</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-02-28 13:46:35-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: Window Build Patch - Check for grep and sed</subject><body>

Elizabeth Smith wrote:
&gt; Round three - add support for the GdkPixbuf::new_from_gd on windows
&gt; 
&gt; Since the method will only work if gd is compiled statically into php, I 
&gt;  made a new argument (--enable-gd) that simply sets the right compiler flag

I didn't get an answer yeah or nay on this one, probably because it got 
lost in the shuffle.  We had talked about this earlier and decided a 
compile flag is the only nice way to support it, since the method 
doesn't work with shared gd (although if someone would fix that...)

Since there's no way to query the php5(ts)(_debug).lib to see if it has 
gd support compiled in, the only way to really tell is using a configure 
flag.  This just sets /D HAVE_GD_BUNDLED=1 so the new_from_gd is put 
into php-gtk2.dll

Thanks ;)

["gd.patch" (text/plain)]

Index: config.w32.in
===================================================================
RCS file: /repository/php-gtk/win32/config.w32.in,v
retrieving revision 1.13
diff -u -r1.13 config.w32.in
--- config.w32.in	28 Feb 2007 13:29:42 -0000	1.13
+++ config.w32.in	28 Feb 2007 13:30:32 -0000
@@ -51,6 +51,7 @@
 
 ARG_WITH('php-build', 'Path to where you extracted \
http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of this source \
dir (..\\php_build) if not specified', 'no');  ARG_WITH('cygwin', 'Path to cygwin \
utilities on your system', '\\cygwin'); +ARG_ENABLE('gd', 'Php has static gd', 'no');
 
 // stick objects somewhere outside of the source tree
 ARG_ENABLE('object-out-dir', 'Alternative location for binary objects during build', \
''); @@ -114,6 +115,10 @@
 	ADD_FLAG('CFLAGS', '/GS /wd4996 ');
 }
 
+if (PHP_GTK_GD == "yes") {
+	ADD_FLAG('CFLAGS', '/D HAVE_GD_BUNDLED=1'); 
+}
+
 if (PHP_GTK_PHP_BUILD == 'no') {
 	if (FSO.FolderExists("..\\php_build")) {
 		PHP_GTK_PHP_BUILD = "..\\php_build";



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228141325</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-02-28 14:13:25-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: Window Build Patch - Check for grep and sed</subject><body>

Perhaps I wasn't very clear.

The reason for moving to NTS in the first place is that Edin (who creates 
pecl4win and all PHP win32 distros) is moving that way..


----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: &lt;php-gtk-dev@lists.php.net&gt;
Sent: Wednesday, February 28, 2007 1:36 PM
Subject: Re: [PHP-GTK-DEV] Re: Window Build Patch - Check for grep and sed


&gt; Steph Fox wrote:
&gt;&gt; I don't see any point in this one. We only had ZTS before, and we're 
&gt;&gt; about to lose it anyway, no?
&gt;
&gt; Theoretically it's a great idea to only allow it to build without ZTS...in 
&gt; the real world...with windows PHP users...
&gt;
&gt; The main problem I see is that there will be people who want to use third 
&gt; party extensions that are ONLY available in ZTS mode (zend anyone?) - it 
&gt; might be nice to ALLOW building with zts even if the "official" 
&gt; php-gtk2.dll binaries are only distributed as non-zts  - this just allows 
&gt; a choice in the matter.
&gt;
&gt; It might be smart to have two versions of php-gtk2 - a non-zts one that's 
&gt; "recommended" and a zts version that will work with the extensions from 
&gt; pecl4win and third party stuff.  Otherwise we'll basically have to have 
&gt; our own pecl4win with extensions and that might get messy - anyway the 
&gt; patch allows people to build both regardless of what the decision on the 
&gt; "official" distribution is.
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070223194843</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-02-23 19:48:43-0400</timestampReceived><subject>[PHP-GTK-DEV] GtkHTML3 for PHP-GTK</subject><body>

Hi all,

GtkHTML3 is now available for PHP-GTK. To use the extension, cd to your
'/ext' directory in the PHP-GTK sources and then:

$ svn co svn://svn.cweiske.de/php-gtk-edge/trunk/ext/html

Run ./buildconf, ./configure, make, make install and you should be ready
to go. (Assuming you already have GtkHTML installed, if you don't get it
here: http://ftp.gnome.org/pub/GNOME/sources/gtkhtml/3.0/). There's a
sample script: /ext/html/demos/gtkhtml.php

GtkHTML3 offers some nice features and is a wonderful widget to use. If
Elizabeth or Steph ever get around to compiling GtkHTML3 on Windows,
this widget should be a great replacement for GtkMozembed which isn't
available on that platform. But the main attraction of GtkHTML3 is the
ability to _edit_ HTML, and so when coupled with GtkSourceView, is quite
powerful.

There isn't a Python binding to GtkHTML3 available yet (AFAIK), so for
once, we're one-up on the Python folks ;)

Cheers,

-- 
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070224170156</emailId><senderName>Cory Christison</senderName><senderEmail>cory.christison@gmail.com</senderEmail><timestampReceived>2007-02-24 17:01:56-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] GtkHTML3 for PHP-GTK</subject><body>


Hello,

    Any chance this can get put into PHP-GTK SVN any time soon? Looks 
like a very useful widget.

    Thanks to Anant. This is exactly what I was looking for in a small 
project of mine. Just one question, is there an append option?
    Example: Can you have a GtkHTML object, then have a 
GtkHTML-&gt;set_editable(true) in the same window [two different widgets]. 
When you type in the editable, would you be able to press a button and 
have it append to the non-editable widget without having to redraw? I'm 
unfamiliar with GtkHTML3... so an simple explaination would be awesome! :-)

    Also, thank you to Marc for the great examples! :-)

    Thanks,
       Cory Christison


Marc Quinton wrote:
&gt; On 2/23/07, Anant Narayanan &lt;anant@kix.in&gt; wrote:
&gt;&gt; Hi all,
&gt;&gt;
&gt;&gt; GtkHTML3 is now available for PHP-GTK. To use the extension, cd to your
&gt;&gt; '/ext' directory in the PHP-GTK sources and then:
&gt;&gt;
&gt;&gt; $ svn co svn://svn.cweiske.de/php-gtk-edge/trunk/ext/html
&gt;&gt;
&gt;&gt; Run ./buildconf, ./configure, make, make install and you should be ready
&gt;&gt; to go. (Assuming you already have GtkHTML installed, if you don't get it
&gt;&gt; here: http://ftp.gnome.org/pub/GNOME/sources/gtkhtml/3.0/). There's a
&gt;&gt; sample script: /ext/html/demos/gtkhtml.php
&gt;&gt;
&gt;&gt; GtkHTML3 offers some nice features and is a wonderful widget to use. If
&gt;&gt; Elizabeth or Steph ever get around to compiling GtkHTML3 on Windows,
&gt;&gt; this widget should be a great replacement for GtkMozembed which isn't
&gt;&gt; available on that platform. But the main attraction of GtkHTML3 is the
&gt;&gt; ability to _edit_ HTML, and so when coupled with GtkSourceView, is quite
&gt;&gt; powerful.
&gt;
&gt; - here follow in attachment with GtkHTML::export() method ; This
&gt; method accept a mime type (text/plain or text/html) and return widget
&gt; content as expected.
&gt;
&gt; - for interested users, there is an example of HTML editor at this
&gt; location ; it implement nearly all neaded and simple features :
&gt;
&gt;   http://quinton.free.fr/php/gtk/html/
&gt;
&gt; thanks Anant.
&gt;


</body></email><email><emailId>20070225133319</emailId><senderName>"auroraeosrose at gmail dot com"</senderName><senderEmail>php-gtk-dev@lists.php.net</senderEmail><timestampReceived>2007-02-25 13:33:19-0400</timestampReceived><subject>[PHP-GTK-DEV] #40570 [Com]: GtkCellLayout inherition</subject><body>

 ID:               40570
 Comment by:       auroraeosrose at gmail dot com
 Reported By:      theredtitan at hotmail dot com
 Status:           Open
 Bug Type:         PHP-GTK related
 Operating System: Windows XP SP2
 PHP Version:      5.2.1
 New Comment:

It's not a bug that php-gtk2 only works with the php cli sapi....

Perhaps it needs to throw an error when people attempt to load it with
any other sapi "This only works with the cli version of PHP"


Previous Comments:
------------------------------------------------------------------------

[2007-02-25 12:44:07] yehac at hotmail dot com

This is a nice work around, but this does not fix the bug that we need
to!!!

------------------------------------------------------------------------

[2007-02-21 12:51:36] auroraeosrose at gmail dot com

First of all, make sure you use the cli version of php (php.exe or
php-win32.exe on windows..) with php-gtk2 - it is NOT meant to be used
with a webserver or a webserver SAPI (isapi, apache2_2 module,
cgi...etc)!

If you're running both a webserver AND php-gtk on the same machine
you're going to need to use different php.ini files, your webserver ini
file should NOT be loading the php-gtk2.dll  You can do this easily by
setting the PHPINIDIR directive in your apache conf file or by renaming
your php-gtk specific ini file php-cli.ini (a little known feature on
windows is that php looks for sapi specific ini files - I have a
php.ini, a php-isapi.ini, and a php-cli.ini all in the same
directory...and IIS, apache, and the php cli always find the right file
;)

------------------------------------------------------------------------

[2007-02-21 01:36:12] theredtitan at hotmail dot com

Description:
------------
First of all, sorry for my bad english!!

I use PHP5 in both server side (With Apache 2.2), and client side
(Using PHP-GTK)

After I installed the PHP-GTK v2.0 on my PHP 5.2.1, accedently the
logos of both PHP and Zend that appears on the page of "phpinfo.php"
has disappeared!!

I found that error occured when I added the "php.ini" setting:

extension=php-gtk2.dll

My error logs has repoted the following error:

[21-Feb-2007 04:18:43] PHP Fatal error:  Cannot inherit
previously-inherited constant gtype from interface GtkCellLayout in
Unknown on line 0



Reproduce code:
---------------
&lt;?php
phpinfo();
?&gt;

Expected result:
----------------
I expected to see the PHP and Zend logo with this codes:

phpinfo.php?=PHPE9568F34-D428-11d2-A769-00AA001ACF42
phpinfo.php?=PHPE9568F35-D428-11d2-A769-00AA001ACF42

Actual result:
--------------
What I saw when I query the "phpinfo.php" page was a blank page (As I
configured the error logger to hide errors and log in to a file on my
machine)


------------------------------------------------------------------------


-- 
Edit this bug report at http://bugs.php.net/?id=40570&amp;edit=1

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070226062415</emailId><senderName>"Marc Quinton"</senderName><senderEmail>mquinton@gmail.com</senderEmail><timestampReceived>2007-02-26 06:24:15-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] libs3xy for PHP-GTK</subject><body>

On 2/25/07, Anant Narayanan &lt;anant@kix.in&gt; wrote:

&gt; I'll commit both this and GtkHTML to the main php-gtk-cvs tree as soon
&gt; as I get some feedback from the rest of the team :)


Anant, I'm trying to build a tutorial to help building php-gtk egde.
There is some problemes about GtkSpell at configure time :


checking SPELL_CFLAGS... -I/usr/include/gtkspell-2.0
-I/usr/include/gtk-2.0 -I/usr/lib/gtk-2.0/include
-I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/pango-1.0
-I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include
checking SPELL_LIBS... -lgtkspell -laspell -lgtk-x11-2.0 -lgdk-x11-2.0
-latk-1.0 -lgdk_pixbuf-2.0 -lm -lpangocairo-1.0 -lfontconfig -lXext
-lXrender -lXinerama -lXi -lXrandr -lXcursor -lXfixes -lpango-1.0
-lcairo -lX11 -lgobject-2.0 -lgmodule-2.0 -ldl -lglib-2.0
/bin/sed: can't read
/spare/dev/php-gtk/php-gtk-svn/ext/spell/Makefile.frag: No such file
or directory


my tutorial is located at :
http://php.classes.free.fr/wiki/index.php5?title=Gtk2/InstallUnix#Building_from_php-gtk_edge_source

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228031642</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-02-28 03:16:42-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] win32 compiling problems</subject><body>

Stuff like this, just commit it.

-Andrei


On Feb 27, 2007, at 5:14 PM, Elizabeth Smith wrote:

&gt; xxoes wrote:
&gt;&gt; missing TSRMLS_FETCH();  i can not call phpg_from_utf8 without  
&gt;&gt; "TSRMLS_CC".
&gt;
&gt; Nobody's fixed this yet...here's a "patch" for it - can I get an ok  
&gt; to put it in cvs (so the ts version will build again..)
&gt; Index: gtk.overrides
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/ext/gtk+/gtk.overrides,v
&gt; retrieving revision 1.243
&gt; diff -u -r1.243 gtk.overrides
&gt; --- gtk.overrides	6 Feb 2007 18:18:11 -0000	1.243
&gt; +++ gtk.overrides	28 Feb 2007 01:11:36 -0000
&gt; @@ -2789,6 +2789,7 @@
&gt;      gchar *fn = NULL;
&gt;      gsize cp_len = 0;
&gt;      zend_bool free_cp = FALSE;
&gt; +    TSRMLS_FETCH();
&gt;
&gt;      if (filename &amp;&amp; (flags &amp; flag)
&gt;      ) {
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228033405</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-02-28 03:34:05-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: Please build a new version for php-gtk on windows</subject><body>

Fernando Correa da Conceição wrote:
&gt; Is possible for someone(Anant, Elizabeth?) build a new version of the 
&gt; dll for windows with all the new changes? The one from gtk.php.net is 
&gt; from 07/2006 and there was a lot of changes since this release.
&gt; I do not want a official release, but a snapshot for php 5.2.(with
&gt; GtkSourceView too?)
&gt;
&gt; Thanks!
&gt;
&gt; Fernando Correa da Conceição

I have snapshots building at http://callicore.net/php-gtk2

However, these builds will also have additional items which may not be
in gtk cvs yet - (some support for 2.10 and 2.8, additional extensions)
so use at your own risk.

--
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228123113</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-02-28 12:31:13-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Window Build Patch - Check for grep and sed</subject><body>

grep/sed dependency was a temporary 'fix' a very long time ago. Sure, put 
these in for now, but they'll be reworked at some point because neither are 
native libs.

----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: &lt;php-gtk-dev@lists.php.net&gt;
Sent: Wednesday, February 28, 2007 1:26 AM
Subject: [PHP-GTK-DEV] Window Build Patch - Check for grep and sed


&gt; I'm back to the grind again, after messing with php and pecl extensions
&gt; for awhile.
&gt;
&gt; Currently we aren't checking for grep or sed in the windows configure
&gt; script (which does bad things when you move them around on your system
&gt; and they can't be found and then you try to compile php-gtk...let's just
&gt; say "hang" is a kind description)
&gt;
&gt; This just adds a quick check that bails if they can't be found because
&gt; allowing the generator batch file to run without them does naughty things.
&gt;
&gt; Can I get an ok to put this in Steph?
&gt;


--------------------------------------------------------------------------------


&gt; Index: config.w32.in
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/config.w32.in,v
&gt; retrieving revision 1.12
&gt; diff -u -r1.12 config.w32.in
&gt; --- config.w32.in 17 Jun 2006 14:47:08 -0000 1.12
&gt; +++ config.w32.in 28 Feb 2007 01:22:04 -0000
&gt; @@ -14,6 +14,12 @@
&gt; PATH_PROG('link', WshShell.Environment("Process").Item("PATH"), "LD");
&gt; PATH_PROG('nmake');
&gt;
&gt; +// check for grep and sed!
&gt; +if (!PATH_PROG('grep', WshShell.Environment("Process").Item("PATH")) ||
&gt; +    !PATH_PROG('sed', WshShell.Environment("Process").Item("PATH"))) {
&gt; + ERROR("grep and sed are required");
&gt; +}
&gt; +
&gt; // we don't want to define LIB, as that will override the default library 
&gt; path set in that env var
&gt; PATH_PROG('lib', null, 'MAKE_LIB');
&gt; PATH_PROG('php');
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228141501</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-02-28 14:15:01-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: Window Build Patch - Check for grep and sed</subject><body>

Elizabeth, anything that's non-intrusive (i.e. doesn't alter or impact 
existing code) you can just add into CVS, no problem. Sorry I didn't pick up 
'til now that this was one such change.

- Steph

----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: &lt;php-gtk-dev@lists.php.net&gt;
Sent: Wednesday, February 28, 2007 1:46 PM
Subject: [PHP-GTK-DEV] Re: Window Build Patch - Check for grep and sed


&gt; Elizabeth Smith wrote:
&gt;&gt; Round three - add support for the GdkPixbuf::new_from_gd on windows
&gt;&gt;
&gt;&gt; Since the method will only work if gd is compiled statically into php, I
&gt;&gt;  made a new argument (--enable-gd) that simply sets the right compiler 
&gt;&gt; flag
&gt;
&gt; I didn't get an answer yeah or nay on this one, probably because it got
&gt; lost in the shuffle.  We had talked about this earlier and decided a
&gt; compile flag is the only nice way to support it, since the method
&gt; doesn't work with shared gd (although if someone would fix that...)
&gt;
&gt; Since there's no way to query the php5(ts)(_debug).lib to see if it has
&gt; gd support compiled in, the only way to really tell is using a configure
&gt; flag.  This just sets /D HAVE_GD_BUNDLED=1 so the new_from_gd is put
&gt; into php-gtk2.dll
&gt;
&gt; Thanks ;)
&gt;


--------------------------------------------------------------------------------


&gt; Index: config.w32.in
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/config.w32.in,v
&gt; retrieving revision 1.13
&gt; diff -u -r1.13 config.w32.in
&gt; --- config.w32.in 28 Feb 2007 13:29:42 -0000 1.13
&gt; +++ config.w32.in 28 Feb 2007 13:30:32 -0000
&gt; @@ -51,6 +51,7 @@
&gt;
&gt; ARG_WITH('php-build', 'Path to where you extracted 
&gt; http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of 
&gt; this source dir (..\\php_build) if not specified', 'no');
&gt; ARG_WITH('cygwin', 'Path to cygwin utilities on your system', '\\cygwin');
&gt; +ARG_ENABLE('gd', 'Php has static gd', 'no');
&gt;
&gt; // stick objects somewhere outside of the source tree
&gt; ARG_ENABLE('object-out-dir', 'Alternative location for binary objects 
&gt; during build', '');
&gt; @@ -114,6 +115,10 @@
&gt;  ADD_FLAG('CFLAGS', '/GS /wd4996 ');
&gt; }
&gt;
&gt; +if (PHP_GTK_GD == "yes") {
&gt; + ADD_FLAG('CFLAGS', '/D HAVE_GD_BUNDLED=1');
&gt; +}
&gt; +
&gt; if (PHP_GTK_PHP_BUILD == 'no') {
&gt;  if (FSO.FolderExists("..\\php_build")) {
&gt;  PHP_GTK_PHP_BUILD = "..\\php_build";
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070228191741</emailId><senderName>"Frank M. Kromann"</senderName><senderEmail>frank@kromann.info</senderEmail><timestampReceived>2007-02-28 19:17:41-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Extra mangles the win32 build</subject><body>

Not sure if it's related but there are a couple of options that uses
'extra' as part of the option name. --with-extra-libs and
--with-extra-includes (IIRC). It could be something with the way the
configure options are handled.

- Frank

&gt; Morning,
&gt; 
&gt; When getting gtkextra building on windows I ran into a really weird 
&gt; problem - having the directory extra in the extensions messed up the 
&gt; makefile creation - it put extra in the spot reserved for php-gtk and 
&gt; php-gtk got put down with the other extensions... and I haven't figured

&gt; out what the problem is or how to fix it.  Simply renaming the directory

&gt; (gtkextra for example - none of the files or even the extension need a 
&gt; rename...just the directory) fixes the problem.  Very strange and hard 
&gt; to pin down.
&gt; 
&gt; Any thoughts on a solution?
&gt; 
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070112170500</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-12 17:05:00-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] non-UTF-8 characters in GtkEntry</subject><body>

Hi Tom,

You need to set your codepage to stop that happening, e.g.

php-gtk.codepage = CP1250 ;works on Windows only

(in your php.ini)

----- Original Message ----- 
From: "Tom" &lt;tom@trappart.de&gt;
To: &lt;php-gtk-dev@lists.php.net&gt;
Sent: Friday, January 12, 2007 4:54 PM
Subject: [PHP-GTK-DEV] non-UTF-8 characters in GtkEntry


&gt; Hi,
&gt;
&gt; If a user types "à" (Picture: www.woxnet.org/files/special_char.gif)
&gt; into a GtkTextBuffer or GtkEntry, my php-gtk app crashes after the
&gt; following warning:
&gt;
&gt; Warning: GtkEntry::get_text(): could not convert return value from UTF-8
&gt;
&gt; It is just the same with the dialogmessage demo.
&gt; Is there a way to disable non-UTF-8 input?
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070117225813</emailId><senderName>Lars Johannesen</senderName><senderEmail>cipherz@slamsoft.dk</senderEmail><timestampReceived>2007-01-17 22:58:13-0400</timestampReceived><subject>[PHP-GTK-DEV] Php gtkextra2</subject><body>

Hello,

Is gtkextra2 going to be ported to php-gtk2 ?

Thanks in advance

Best Regards,
    Lars

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070126223045</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-26 22:30:45-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Changes in Windows distributions [Was: Patch for generator - allow compiling again</subject><body>

&gt;I swear this is the last one for awhile (I'll be busy with the
&gt; phpthrowdown) - quick patch to allow building against nts php on windows
&gt; - the speedup is noticeable :)

I thought it might be :)

Thanks!

- Steph


--------------------------------------------------------------------------------


&gt; Index: config.w32
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/ext/gtk+/config.w32,v
&gt; retrieving revision 1.5
&gt; diff -u -r1.5 config.w32
&gt; --- config.w32 24 Oct 2006 12:46:14 -0000 1.5
&gt; +++ config.w32 26 Jan 2007 22:19:05 -0000
&gt; @@ -1,5 +1,21 @@
&gt; -
&gt; -if (CHECK_HEADER("main/php.h") &amp;&amp; CHECK_LIB(PHP_GTK_DEBUG != "no" ? 
&gt; "php5ts_debug.lib" : "php5ts.lib", "php-gtk") &amp;&amp;
&gt; +var check_lib;
&gt; +if(PHP_GTK_DEBUG == 'yes' &amp;&amp; PHP_GTK_ZTS == 'yes')
&gt; +{
&gt; + check_lib = "php5ts_debug.lib";
&gt; +}
&gt; +else if(PHP_GTK_DEBUG == 'yes')
&gt; +{
&gt; + check_lib = "php5_debug.lib";
&gt; +}
&gt; +else if(PHP_GTK_ZTS == 'yes')
&gt; +{
&gt; + check_lib = "php5ts.lib";
&gt; +}
&gt; +else
&gt; +{
&gt; + check_lib = "php5.lib";
&gt; +}
&gt; +if (CHECK_HEADER("main/php.h") &amp;&amp; CHECK_LIB(check_lib, "php-gtk") &amp;&amp;
&gt;  CHECK_HEADER("iconv.h") &amp;&amp; CHECK_LIB("iconv.lib", "php-gtk") &amp;&amp;
&gt;  CHECK_HEADER("libintl.h") &amp;&amp; CHECK_LIB("intl.lib", "php-gtk") &amp;&amp;
&gt;  CHECK_HEADER("atk/atk.h") &amp;&amp; CHECK_LIB("atk-1.0.lib", "php-gtk") &amp;&amp;
&gt;


--------------------------------------------------------------------------------


&gt; Index: config.w32.in
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/config.w32.in,v
&gt; retrieving revision 1.12
&gt; diff -u -r1.12 config.w32.in
&gt; --- config.w32.in 17 Jun 2006 14:47:08 -0000 1.12
&gt; +++ config.w32.in 26 Jan 2007 22:14:34 -0000
&gt; @@ -46,6 +46,7 @@
&gt; ARG_WITH('php-build', 'Path to where you extracted 
&gt; http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of 
&gt; this source dir (..\\php_build) if not specified', 'no');
&gt; ARG_WITH('cygwin', 'Path to cygwin utilities on your system', '\\cygwin');
&gt;
&gt; +ARG_ENABLE('zts', 'Thread safety', 'yes');
&gt; // stick objects somewhere outside of the source tree
&gt; ARG_ENABLE('object-out-dir', 'Alternative location for binary objects 
&gt; during build', '');
&gt; if (PHP_GTK_OBJECT_OUT_DIR.length) {
&gt; @@ -81,11 +82,11 @@
&gt; DEFINE("LIBS", "kernel32.lib user32.lib gdi32.lib winspool.lib 
&gt; comdlg32.lib advapi32.lib shell32.lib ole32.lib");
&gt;
&gt; if (PHP_GTK_DEBUG == "yes") {
&gt; - DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. 
&gt; /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend 
&gt; /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D 
&gt; WIN32 /D _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; + DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. 
&gt; /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend 
&gt; /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 /D 
&gt; _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt;  ADD_FLAG("LDFLAGS", "/debug");
&gt;
&gt; } else {
&gt; - DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main 
&gt; /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I 
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D 
&gt; WIN32 /D NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; + DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main 
&gt; /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I 
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D 
&gt; NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; }
&gt;
&gt; if (VCVERS &lt; 14) {
&gt; @@ -99,6 +100,10 @@
&gt;  ADD_FLAG('CFLAGS', '/GS /wd4996 ');
&gt; }
&gt;
&gt; +if (PHP_GTK_ZTS == "yes") {
&gt; + ADD_FLAG("CFLAGS", "/D ZTS=1");
&gt; +}
&gt; +
&gt; if (PHP_GTK_PHP_BUILD == 'no') {
&gt;  if (FSO.FolderExists("..\\php_build")) {
&gt;  PHP_GTK_PHP_BUILD = "..\\php_build";
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070127185017</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-27 18:50:17-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Overrides</subject><body>

Elizabeth,

The patch looks good, except for the following. When you get an enum  
from a call to a Gtk+ function, you can simply return it as a long.  
The phpg_gvalue_get_enum() is meant to convert incoming zval to an  
integer enum value, not the other way around. So you can just do:

   add_next_index_long(return_value, pos);

I've given you commit access to the tree so you can commit the patch  
yourself once you fix it. But please continue sending patches to the  
list first, at least for a little while.

-Andrei


On Jan 24, 2007, at 6:46 AM, Elizabeth Smith wrote:

&gt; +    phpg_gvalue_get_enum(GTK_TYPE_TREE_VIEW_DROP_POSITION,  
&gt; php_pos, (gint *)&amp;pos);
&gt; +    add_next_index_zval(return_value, php_pos);
&gt; +}

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070127185241</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-27 18:52:41-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] #39539 [NoF-&gt;Opn]: new GtkEventBox crash</subject><body>

Can anyone else reproduce this?	

-Andrei


On Jan 26, 2007, at 7:38 PM, n dot escuder at intra-links dot com wrote:

&gt;  ID:               39539
&gt;  User updated by:  n dot escuder at intra-links dot com
&gt;  Reported By:      n dot escuder at intra-links dot com
&gt; -Status:           No Feedback
&gt; +Status:           Open
&gt;  Bug Type:         PHP-GTK related
&gt;  Operating System: Linux
&gt;  PHP Version:      5.2.0
&gt;  New Comment:
&gt;
&gt; Sorry for the long time of the answer.
&gt;
&gt; So i try with php 5.2.0 and i checkout the lastest version of php_gtk
&gt; and it always crash... i don't known why...
&gt;
&gt; gdb backtrace :
&gt; #178 0xbeeff400 in ?? ()
&gt; #179 0x001000b7 in ?? ()
&gt; #180 0xb76a3600 in zim_GtkWidget_show_now () from
&gt; /usr/lib/php/extensions/php_gtk2.so
&gt; Previous frame inner to this frame (corrupt stack?)
&gt;
&gt; X11R7 Version 7.1
&gt; GTK+ Version 2.10.6
&gt;
&gt; For information i actually use and old php_gtk2 checkout version that
&gt; work fine.
&gt;
&gt; If you want i can give you an ssh access.
&gt;
&gt; See You
&gt;
&gt;
&gt; Previous Comments:
&gt; ---------------------------------------------------------------------- 
&gt; --
&gt;
&gt; [2006-12-15 01:00:00] php-gtk-dev at lists dot php dot net
&gt;
&gt; No feedback was provided for this bug for over a week, so it is
&gt; being suspended automatically. If you are able to provide the
&gt; information that was originally requested, please do so and change
&gt; the status of the bug back to "Open".
&gt;
&gt; ---------------------------------------------------------------------- 
&gt; --
&gt;
&gt; [2006-12-07 05:02:09] andrei@php.net
&gt;
&gt; Please try using this CVS snapshot:
&gt;
&gt;   http://snaps.php.net/php4-STABLE-latest.tar.gz
&gt;
&gt; For Windows:
&gt;
&gt;   http://snaps.php.net/win32/php4-win32-STABLE-latest.zip
&gt;
&gt; I cannot reproduce this with PHP-GTK CVS and PHP 5.2.0RC4-dev.
&gt;
&gt; ---------------------------------------------------------------------- 
&gt; --
&gt;
&gt; [2006-11-16 21:57:27] n dot escuder at intra-links dot com
&gt;
&gt; Description:
&gt; ------------
&gt; php gtk 2 from CVS crash when creating an object of type GtkEventBox()
&gt;
&gt; Reproduce code:
&gt; ---------------
&gt; new GtkEventBox();
&gt;
&gt; Expected result:
&gt; ----------------
&gt; None
&gt;
&gt; Actual result:
&gt; --------------
&gt; Crash the program
&gt;
&gt;
&gt; ---------------------------------------------------------------------- 
&gt; --
&gt;
&gt;
&gt; -- 
&gt; Edit this bug report at http://bugs.php.net/?id=39539&amp;edit=1
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070127192910</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-27 19:29:10-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkTreeView::set_model(null) not working?</subject><body>

What do you mean set_model(null) doesn't work? I just tested it and  
it unset the model from the view fine.

-Andrei


On Jan 11, 2007, at 10:51 AM, ecc wrote:

&gt;
&gt; Hi,
&gt; i´ve build a application with to view-modes in one gtkTreeView... a
&gt; list-mode and a detail mode. If i want initialize the treeview, i  
&gt; cant do
&gt; that with NULL (as described in the documentation). I need this,  
&gt; because i
&gt; have a button to toggle between this two modes.
&gt;
&gt; Is there a way to full reset the treeview + model, so i can refill  
&gt; the empty
&gt; treeview from the scratch. Now i have to restart my program. :-(
&gt;
&gt; Regards,
&gt; Andreas
&gt; -- 
&gt; View this message in context: http://www.nabble.com/GtkTreeView%3A% 
&gt; 3Aset_model%28null%29-not-working--tf2960076.html#a8281198
&gt; Sent from the Php - GTK - Dev mailing list archive at Nabble.com.
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070129142938</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-01-29 14:29:38-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] GtkSheet / GtkExtra 2.x in php-gtk</subject><body>

&gt; We're a bit short of documentation that way. Just take a look at the
&gt; source from PHP_GTK_1 and current CVS HEAD, which has a couple of
&gt; wrapper extensions already. Or ask Elizabeth/Anant, or wait a couple of
&gt; weeks... :)

Wait a couple of weeks ;) I had a look at GtkExtra; and it won't take
much effort to port.

If you're impatient; get in touch with me on IRC or something; and I'll
get you started.

Cheers,

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070130125007</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-01-30 12:50:07-0400</timestampReceived><subject>[PHP-GTK-DEV] Announcing PHP-GTK-EDGE</subject><body>

Hi all,

If you're one of the impatient; and can't wait to try out the
bleeding-edge widgets that are now available for PHP-GTK; the
PHP-GTK-EDGE repository is for you.

You can check out a copy from:

svn://svn.cweiske.de/php-gtk-edge

(WebSVN:
http://svn.cweiske.de/listing.php?repname=php-gtk-edge&amp;path=%2Ftrunk%2F)

This version of PHP-GTK includes:

 * Gtk+ 2.8 and 2.10 support (thanks to Elizabeth); which means you can
build against these versions of Gtk+ and use widgets like GtkAssistant
and the much wanted GtkTrayIcon.

 * GtkSpell: spell checking extension for GtkTextView (and GtkSourceView)

 * GtkExtras: Specialized widgets like GtkSheet and GtkPlot.

in addition to everything that's already in php-gtk-proper (mozembed,
sourceview and scintilla; of course)

I wanted to include libgnome in the repository too; but unfortunately I
can't find a backup of my files yet and the tarball on kix.in doesn't
seem to work.

This version of PHP-GTK should probably be helpful to all of you who've
been asking for GtkExtras and GtkTrayIcon. All feedback is appreciated;
and the more positive feedback we get; the sooner all of this will be
migrated to the official php-gtk release.

All of the code in the repository currently works only on *nix systems
and a simple `./buildconf &amp;&amp; ./configure &amp;&amp; make install' should do. All
extensions are enabled by default; so it will simply pick what you
libraries you have your system and build support for it. If you need to
explicitly disable an extension; pass the --disable-whatever flag to the
configure statement.

For windows users; Elizabeth is providing builds on
http://www.callicore.net/php-gtk2/ I'll work with her to get those
builds into php-gtk-edge soon.

DISCLAIMER:
I am not responsible if your computer explodes while compiling
php-gtk-edge ;) Basically, this version of php-gtk is very experimental
and is expected to be broken from time to time. Use with care!

There are some screenshots for a few of the widgets at
http://www.kix.in/php-gtk2/

Cheers,

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070130231552</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-30 23:15:52-0400</timestampReceived><subject>[PHP-GTK-DEV] win32 installer [WAS: Announcing PHP-GTK-EDGE]</subject><body>

&gt;&gt; Actually, the installer source is available right on the gnope site -

I had a look at this now, also at NSIS itself (apologies to everybody 
expecting work from me today). Seems like a good system - I'm wondering now 
what disadvantages it has (if any) as compared to Wix, which is easiest to 
code/maintain and which has the smallest overhead... mainly wondering 
because the Wix system uses .msi, which everybody is familiar with and which 
is better supported in the Windows environment, particularly when it comes 
to networks. The new PHP installer on php.net is created with Wix, mostly 
for that reason, and this in fact replaced the original NSIS code.

I'm also wondering where installer scripts should be kept - Andrei, is there 
somewhere sane to keep them in CVS, either in the php-gtk module or the 
php-gtk-web module, or should it be stored elsewhere? For PHP, the move to 
Wix took the code out of php-src/win32/installer and into a completely new 
CVS module named win-installer... this actually includes all the Wix 
components (binaries, icons etc) used in building the thing, as well as the 
scripts.

- Steph

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070126180440</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-26 18:04:40-0400</timestampReceived><subject>[PHP-GTK-DEV] Changes in Windows distributions [Was: Patch for generator - allow compiling against m</subject><body>

I think we'd better start putting this on-list...


&gt; Steph Fox wrote:
&gt;&gt; Hi Elizabeth,
&gt;&gt;
&gt;&gt; The CLI won't have any problems because the runtime's readily available 
&gt;&gt; on your system. But now they've dropped Win98 support in PHP I suppose 
&gt;&gt; that's going to be true for everyone that can run the latest PHP 5.2.*... 
&gt;&gt; the bigger concern is whether the PHP-GTK binary would clash with the 
&gt;&gt; official PHP distro, which I rather suspect it will.
&gt;&gt;
&gt;&gt; Did you try the NTS build? I guess we don't need threading here either. 
&gt;&gt; It might make sense to provide a copy of that CLI compiled under 2005 
&gt;&gt; with the 'latest and best' download, and at least it'll be light.
&gt;&gt;
&gt;&gt; We're probably going to need to support Win98 longer than most PHP 
&gt;&gt; related projects, i.e. we'll need to do similar packages for both 5.2.0 
&gt;&gt; release/VC6 (the last Win98-friendly version) and 5.2.+/VC8 (everybody 
&gt;&gt; else). Apart from sheer bulk, can you see any potential problems with 
&gt;&gt; that thought?
&gt;&gt;
&gt;&gt; - Steph
&gt;&gt;
&gt;&gt; ps I have a copy of 2005, but it's on a DVD and I don't have a way to 
&gt;&gt; load those just yet :-)  Give it another couple of weeks and I'll have a 
&gt;&gt; new laptop to load it onto, theoretically at least - this one dies under 
&gt;&gt; the strain of running MS Word at present.
&gt;&gt;
&gt; Actually that's a good idea.  Distributing a VC6 build for Win98/ME and a 
&gt; VC8 build for NT/XP/Vista.  As long as the manifests are packed properly 
&gt; you can use php extensions compiled with MSVC 2005 with a php compiled 
&gt; with MSVC6.  Doesn't mean it won't magically crash somewhere along the 
&gt; road, but it does work.  But I usually build snaps so I get all the 
&gt; extensions I have headers for.    I have done non-thread-safe php builds, 
&gt; but right now the php-gtk windows build system is checking for the 
&gt; php5ts/php5ts_debug libs and I didn't bother changing it because I wasn't 
&gt; sure how the php-gtk code would react.  I can give it a try, might be a 
&gt; lot faster.
&gt;
&gt; As far as light cli's, in fact I have a (very hacked) php5 build system at 
&gt; this point that allows libxml and iconv to compile shared -  so I could 
&gt; build the extensions against the gtk versions of these dlls and keep the 
&gt; cli a lot lighter. - I'm only building in spl, reflection, tokenizer, 
&gt; date, standard, pcre and com so I can get really little .exe's :)
&gt;
&gt; I'm actually building with Visual C++ Express - which doesn't have the 
&gt; fancy profile guided optimizations, but otherwise it is the same compiler 
&gt; from the full version of msvc 2005.
&gt;
&gt; I suppose it's a question of whether you want to distribute specialized 
&gt; php binaries along with php-gtk2 dlls ... and then there's always the gtk 
&gt; runtimes.

Light CLIs sound like a good idea, but may not be... There are basically two 
sets of users here, one lot on Win98/ME who can no longer use new PHP 
binaries because PHP dropped support for their system following the PHP 
5.2.0 release, and one lot on WinNT/XP/Vista who are capable of running new 
PHP binaries _and_ VC8 builds. However, the PHP distro is still built using 
VC6, so anyone loading VC8 extensions against it is going to be loading two 
sets of C runtime, and I think clashes are probably inevitable there. If we 
distribute PHP-GTK binaries compiled under VC8, we'd need to supply a VC8 
PHP binary to prevent that possibility.

For either compiler version, there's reportedly a 25-30% performance boost 
available from dropping the thread safety mechanism - which we don't use.

If we're going to make NTS PHP binaries we'll need to know which extensions 
are used by PHP-GTK/win32 users, because the distributed .dlls from php.net 
and PECL won't run alongside those binaries. It's definitely worth doing 
this for the Win98/ME people, because they can't upgrade PHP and they don't 
have the option to load the VC8 runtime. I think it's worth retaining 
support for Win98 throughout the lifetime of PHP-GTK 2.0, along with a big 
fat warning that this will be the last series to support it, because I know 
people are running PHP-GTK under Win98. For those users, a built-in libxml 
and iconv makes perfect sense to me, but I'll check that with Rob Richards 
because he might know some good reason not to. My inclination would be to 
pack as much functionality as possible into the core rather than the other 
way around, though, because these specialist, NTS PHP 5.2.0 binaries won't 
run with the publicly available ZTS PECL 5.2.* binaries.

The only way it's worth it for the rest is if we want to leap ahead of PHP 
and start distributing VC8 builds now, because it will make our official 
builds incompatible with the currently distributed PHP binaries (even the 
NTS ones). But we _do_ know it's on the cards for PHP to upgrade to VC8 very 
soon... so any work done in this direction won't ultimately go to waste, 
whatever the decision. Currently, NTS builds made available on php.net are 
built with VC6 and labelled as 'FastCGI optimized'. The question is how much 
user confusion this is going to cause when 'FastCGI optimized' switches to 
from VC6 to VC8... Perhaps we need to ask Edin what the chances are of his 
compiling those 'optimized' builds using VC8 rather than VC6, since they're 
post-5.2.0 anyway and rely on the OS rather than on Apache for their C 
runtime.

On the bonus side, there is (or was - I haven't reviewed your patch yet, 
Elizabeth!) a compiler version test in the PHP-GTK build, so we can at least 
ensure that all PHP-GTK/win32 builds get the flags they need.

- Steph


&gt;
&gt; Thanks,
&gt; Elizabeth Smith 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070124144652</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-01-24 14:46:52-0400</timestampReceived><subject>[PHP-GTK-DEV] Overrides</subject><body>

Morning,

I've been working on helping the php-gtk2 completion this week - at 
least the gtk part - I haven't started on atk/gdk/pango et al. but 
they're on my todo list.

I've also been working on implementing all of 2.8 and 2.10 as well but I 
won't send it until they're completely finished and tested.  I'm aware 
that Andrei doesn't want to add the additional stuff until all the 2.6 
stuff is done but I needed to start somewhere to see how the def files + 
overrides + interacting with gtk and php worked before I tackled harder 
stuff.  These two patches ignore the idle methods that I assume Andrei 
was trying to ignore with his earlier commit, and the second patch 
implements the remaining gtktreeview methods for the high level dnd api.

You're not alone Andrei :)

Thanks,
Elizabeth Smith

["gtk.overrides.patch" (text/plain)]

Index: gtk.overrides
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/gtk.overrides,v
retrieving revision 1.235
diff -u -r1.235 gtk.overrides
--- gtk.overrides	23 Jan 2007 18:26:08 -0000	1.235
+++ gtk.overrides	24 Jan 2007 14:28:18 -0000
@@ -126,6 +126,9 @@
     gtk_get_event_widget
     gtk_icon_theme_error_quark
     gtk_icon_view_new_with_model
+    gtk_idle_add_full
+    gtk_idle_add_priority
+    gtk_idle_remove_by_data
     gtk_im_context_simple_add_table 
     gtk_image_menu_item_new_from_stock
     gtk_image_menu_item_new_with_label

["gtktreeview.overrides.patch" (text/plain)]

Index: gtktreeview.overrides
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/gtktreeview.overrides,v
retrieving revision 1.78
diff -u -r1.78 gtktreeview.overrides
--- gtktreeview.overrides	17 Dec 2006 21:32:18 -0000	1.78
+++ gtktreeview.overrides	24 Jan 2007 03:24:58 -0000
@@ -2143,6 +2143,76 @@
 %% {{{ GtkTreeView
 
 %%
+add-arginfo GtkTreeView enable_model_drag_source
+static
+ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
+    ZEND_ARG_INFO(0, sbmask)
+    ZEND_ARG_INFO(0, targets)
+    ZEND_ARG_INFO(0, actions)
+ZEND_END_ARG_INFO();
+
+%%
+override gtk_tree_view_enable_model_drag_source
+PHP_METHOD
+{
+	zval *php_sbmask, *php_targets, *php_actions;
+	GdkModifierType sbmask;
+	GdkDragAction actions;
+	GtkTargetEntry *entries;
+	int n;
+
+	NOT_STATIC_METHOD();
+
+	if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "VaV", &amp;php_sbmask, &amp;php_targets, \
&amp;php_actions)) { +		return;
+    }
+
+	if (phpg_gvalue_get_flags(GDK_TYPE_MODIFIER_TYPE, php_sbmask, (gint *)&amp;sbmask) == \
FAILURE) { +		return;
+    }
+
+	if (phpg_gvalue_get_flags(GDK_TYPE_DRAG_ACTION, php_actions, (gint *)&amp;actions) == \
FAILURE) { +        return;
+    }
+
+	entries = phpg_parse_target_entries(php_targets, &amp;n TSRMLS_CC);
+	gtk_tree_view_enable_model_drag_source(GTK_TREE_VIEW(PHPG_GOBJECT(this_ptr)), \
sbmask, entries, n, actions); +	efree(entries);
+}
+
+%%
+add-arginfo GtkTreeView enable_model_drag_dest
+static
+ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
+    ZEND_ARG_INFO(0, targets)
+    ZEND_ARG_INFO(0, actions)
+ZEND_END_ARG_INFO();
+
+%%
+override gtk_tree_view_enable_model_drag_dest
+PHP_METHOD
+{
+	zval *php_targets, *php_actions;
+	GdkDragAction actions;
+	GtkTargetEntry *entries;
+	int n;
+
+	NOT_STATIC_METHOD();
+
+	if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "aV", &amp;php_targets, &amp;php_actions)) {
+		return;
+	}
+
+	if (phpg_gvalue_get_flags(GDK_TYPE_DRAG_ACTION, php_actions, (gint *)&amp;actions) == \
FAILURE) { +		return;
+	}
+
+	entries = phpg_parse_target_entries(php_targets, &amp;n TSRMLS_CC);
+	gtk_tree_view_enable_model_drag_dest(GTK_TREE_VIEW(PHPG_GOBJECT(this_ptr)), \
entries, n, actions); +	efree(entries);
+}
+
+%%
 override gtk_tree_view_get_columns
 PHP_METHOD
 {
@@ -2558,7 +2628,75 @@
     add_next_index_long(return_value, cell_x);
     add_next_index_long(return_value, cell_y);
 }
+%%
+add-arginfo GtkTreeView get_dest_row_at_pos
+static
+ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
+    ZEND_ARG_INFO(0, x)
+    ZEND_ARG_INFO(0, y)
+ZEND_END_ARG_INFO();
+
+%%
+override gtk_tree_view_get_dest_row_at_pos
+PHP_METHOD
+{
+    gint x, y;
+    GtkTreePath *path;
+    GtkTreeViewDropPosition pos;
+    zval *php_path = NULL, *php_pos = NULL;
+
+    NOT_STATIC_METHOD();
+
+    if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "ii", &amp;x, &amp;y)) {
+        return;
+    }
+
+    if (!gtk_tree_view_get_dest_row_at_pos(GTK_TREE_VIEW(PHPG_GOBJECT(this_ptr)), x, \
y, &amp;path, +                                       &amp;pos)) {
+        return;
+    }
+
+    array_init(return_value);
+
+    if (path) {
+        phpg_tree_path_to_zval(path, &amp;php_path TSRMLS_CC);
+    } else {
+        MAKE_STD_ZVAL(php_path);
+    }
+    add_next_index_zval(return_value, php_path);
+
+    phpg_gvalue_get_enum(GTK_TYPE_TREE_VIEW_DROP_POSITION, php_pos, (gint *)&amp;pos);
+    add_next_index_zval(return_value, php_pos);
+}
 
+%%
+override gtk_tree_view_get_drag_dest_row
+PHP_METHOD
+{
+    GtkTreePath *path;
+    GtkTreeViewDropPosition pos;
+	zval *php_path = NULL, *php_pos = NULL;
+
+    NOT_STATIC_METHOD();
+
+    if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "")) {
+        return;
+    }
+
+    gtk_tree_view_get_drag_dest_row(GTK_TREE_VIEW(PHPG_GOBJECT(this_ptr)), &amp;path, \
&amp;pos); +
+   array_init(return_value);
+
+    if (path) {
+        phpg_tree_path_to_zval(path, &amp;php_path TSRMLS_CC);
+    } else {
+        MAKE_STD_ZVAL(php_path);
+    }
+    add_next_index_zval(return_value, php_path);
+
+    phpg_gvalue_get_enum(GTK_TYPE_TREE_VIEW_DROP_POSITION, php_pos, (gint *)&amp;pos);
+    add_next_index_zval(return_value, php_pos);
+}
 
 %%
 override gtk_tree_view_get_visible_rect



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070124164801</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-24 16:48:01-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Overrides</subject><body>

Thanks Elizabeth! I'll review tonight.

-Andrei

On Jan 24, 2007, at 6:46 AM, Elizabeth Smith wrote:

&gt; Morning,
&gt;
&gt; I've been working on helping the php-gtk2 completion this week - at  
&gt; least the gtk part - I haven't started on atk/gdk/pango et al. but  
&gt; they're on my todo list.
&gt;
&gt; I've also been working on implementing all of 2.8 and 2.10 as well but  
&gt; I won't send it until they're completely finished and tested.  I'm  
&gt; aware that Andrei doesn't want to add the additional stuff until all  
&gt; the 2.6 stuff is done but I needed to start somewhere to see how the  
&gt; def files + overrides + interacting with gtk and php worked before I  
&gt; tackled harder stuff.  These two patches ignore the idle methods that  
&gt; I assume Andrei was trying to ignore with his earlier commit, and the  
&gt; second patch implements the remaining gtktreeview methods for the high  
&gt; level dnd api.
&gt;
&gt; You're not alone Andrei :)
&gt;
&gt; Thanks,
&gt; Elizabeth Smith
&gt; Index: gtk.overrides
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/ext/gtk+/gtk.overrides,v
&gt; retrieving revision 1.235
&gt; diff -u -r1.235 gtk.overrides
&gt; --- gtk.overrides	23 Jan 2007 18:26:08 -0000	1.235
&gt; +++ gtk.overrides	24 Jan 2007 14:28:18 -0000
&gt; @@ -126,6 +126,9 @@
&gt;      gtk_get_event_widget
&gt;      gtk_icon_theme_error_quark
&gt;      gtk_icon_view_new_with_model
&gt; +    gtk_idle_add_full
&gt; +    gtk_idle_add_priority
&gt; +    gtk_idle_remove_by_data
&gt;      gtk_im_context_simple_add_table
&gt;      gtk_image_menu_item_new_from_stock
&gt;      gtk_image_menu_item_new_with_label
&gt; Index: gtktreeview.overrides
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/ext/gtk+/gtktreeview.overrides,v
&gt; retrieving revision 1.78
&gt; diff -u -r1.78 gtktreeview.overrides
&gt; --- gtktreeview.overrides	17 Dec 2006 21:32:18 -0000	1.78
&gt; +++ gtktreeview.overrides	24 Jan 2007 03:24:58 -0000
&gt; @@ -2143,6 +2143,76 @@
&gt;  %% {{{ GtkTreeView
&gt;
&gt;  %%
&gt; +add-arginfo GtkTreeView enable_model_drag_source
&gt; +static
&gt; +ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
&gt; +    ZEND_ARG_INFO(0, sbmask)
&gt; +    ZEND_ARG_INFO(0, targets)
&gt; +    ZEND_ARG_INFO(0, actions)
&gt; +ZEND_END_ARG_INFO();
&gt; +
&gt; +%%
&gt; +override gtk_tree_view_enable_model_drag_source
&gt; +PHP_METHOD
&gt; +{
&gt; +	zval *php_sbmask, *php_targets, *php_actions;
&gt; +	GdkModifierType sbmask;
&gt; +	GdkDragAction actions;
&gt; +	GtkTargetEntry *entries;
&gt; +	int n;
&gt; +
&gt; +	NOT_STATIC_METHOD();
&gt; +
&gt; +	if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "VaV", &amp;php_sbmask,  
&gt; &amp;php_targets, &amp;php_actions)) {
&gt; +		return;
&gt; +    }
&gt; +
&gt; +	if (phpg_gvalue_get_flags(GDK_TYPE_MODIFIER_TYPE, php_sbmask, (gint  
&gt; *)&amp;sbmask) == FAILURE) {
&gt; +		return;
&gt; +    }
&gt; +
&gt; +	if (phpg_gvalue_get_flags(GDK_TYPE_DRAG_ACTION, php_actions, (gint  
&gt; *)&amp;actions) == FAILURE) {
&gt; +        return;
&gt; +    }
&gt; +
&gt; +	entries = phpg_parse_target_entries(php_targets, &amp;n TSRMLS_CC);
&gt; +	 
&gt; gtk_tree_view_enable_model_drag_source(GTK_TREE_VIEW(PHPG_GOBJECT(this_ 
&gt; ptr)), sbmask, entries, n, actions);
&gt; +	efree(entries);
&gt; +}
&gt; +
&gt; +%%
&gt; +add-arginfo GtkTreeView enable_model_drag_dest
&gt; +static
&gt; +ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
&gt; +    ZEND_ARG_INFO(0, targets)
&gt; +    ZEND_ARG_INFO(0, actions)
&gt; +ZEND_END_ARG_INFO();
&gt; +
&gt; +%%
&gt; +override gtk_tree_view_enable_model_drag_dest
&gt; +PHP_METHOD
&gt; +{
&gt; +	zval *php_targets, *php_actions;
&gt; +	GdkDragAction actions;
&gt; +	GtkTargetEntry *entries;
&gt; +	int n;
&gt; +
&gt; +	NOT_STATIC_METHOD();
&gt; +
&gt; +	if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "aV", &amp;php_targets,  
&gt; &amp;php_actions)) {
&gt; +		return;
&gt; +	}
&gt; +
&gt; +	if (phpg_gvalue_get_flags(GDK_TYPE_DRAG_ACTION, php_actions, (gint  
&gt; *)&amp;actions) == FAILURE) {
&gt; +		return;
&gt; +	}
&gt; +
&gt; +	entries = phpg_parse_target_entries(php_targets, &amp;n TSRMLS_CC);
&gt; +	 
&gt; gtk_tree_view_enable_model_drag_dest(GTK_TREE_VIEW(PHPG_GOBJECT(this_pt 
&gt; r)), entries, n, actions);
&gt; +	efree(entries);
&gt; +}
&gt; +
&gt; +%%
&gt;  override gtk_tree_view_get_columns
&gt;  PHP_METHOD
&gt;  {
&gt; @@ -2558,7 +2628,75 @@
&gt;      add_next_index_long(return_value, cell_x);
&gt;      add_next_index_long(return_value, cell_y);
&gt;  }
&gt; +%%
&gt; +add-arginfo GtkTreeView get_dest_row_at_pos
&gt; +static
&gt; +ZEND_BEGIN_ARG_INFO(ARGINFO_NAME, 0)
&gt; +    ZEND_ARG_INFO(0, x)
&gt; +    ZEND_ARG_INFO(0, y)
&gt; +ZEND_END_ARG_INFO();
&gt; +
&gt; +%%
&gt; +override gtk_tree_view_get_dest_row_at_pos
&gt; +PHP_METHOD
&gt; +{
&gt; +    gint x, y;
&gt; +    GtkTreePath *path;
&gt; +    GtkTreeViewDropPosition pos;
&gt; +    zval *php_path = NULL, *php_pos = NULL;
&gt; +
&gt; +    NOT_STATIC_METHOD();
&gt; +
&gt; +    if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "ii", &amp;x, &amp;y)) {
&gt; +        return;
&gt; +    }
&gt; +
&gt; +    if  
&gt; (! 
&gt; gtk_tree_view_get_dest_row_at_pos(GTK_TREE_VIEW(PHPG_GOBJECT(this_ptr)) 
&gt; , x, y, &amp;path,
&gt; +                                       &amp;pos)) {
&gt; +        return;
&gt; +    }
&gt; +
&gt; +    array_init(return_value);
&gt; +
&gt; +    if (path) {
&gt; +        phpg_tree_path_to_zval(path, &amp;php_path TSRMLS_CC);
&gt; +    } else {
&gt; +        MAKE_STD_ZVAL(php_path);
&gt; +    }
&gt; +    add_next_index_zval(return_value, php_path);
&gt; +
&gt; +    phpg_gvalue_get_enum(GTK_TYPE_TREE_VIEW_DROP_POSITION, php_pos,  
&gt; (gint *)&amp;pos);
&gt; +    add_next_index_zval(return_value, php_pos);
&gt; +}
&gt;
&gt; +%%
&gt; +override gtk_tree_view_get_drag_dest_row
&gt; +PHP_METHOD
&gt; +{
&gt; +    GtkTreePath *path;
&gt; +    GtkTreeViewDropPosition pos;
&gt; +	zval *php_path = NULL, *php_pos = NULL;
&gt; +
&gt; +    NOT_STATIC_METHOD();
&gt; +
&gt; +    if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "")) {
&gt; +        return;
&gt; +    }
&gt; +
&gt; +     
&gt; gtk_tree_view_get_drag_dest_row(GTK_TREE_VIEW(PHPG_GOBJECT(this_ptr)),  
&gt; &amp;path, &amp;pos);
&gt; +
&gt; +   array_init(return_value);
&gt; +
&gt; +    if (path) {
&gt; +        phpg_tree_path_to_zval(path, &amp;php_path TSRMLS_CC);
&gt; +    } else {
&gt; +        MAKE_STD_ZVAL(php_path);
&gt; +    }
&gt; +    add_next_index_zval(return_value, php_path);
&gt; +
&gt; +    phpg_gvalue_get_enum(GTK_TYPE_TREE_VIEW_DROP_POSITION, php_pos,  
&gt; (gint *)&amp;pos);
&gt; +    add_next_index_zval(return_value, php_pos);
&gt; +}
&gt;
&gt;  %%
&gt;  override gtk_tree_view_get_visible_rect
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070111200243</emailId><senderName>bob majdak jr</senderName><senderEmail>bob@kateos.org</senderEmail><timestampReceived>2007-01-11 20:02:43-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkTreeView::set_model(null) not working?</subject><body>

i have an application that switches models on a treeview several times 
during operating and it works just fine. you just have to have multiple 
list stores for the different views you have - or you could call clear() 
on your current liststore and repopulate it.

$view = new GtkTreeView;
$list = new GtkListStore(Gtk::TYPE_STRING);
$view-&gt;set_model($list);

- bob.

ecc wrote:
&gt; Hi,
&gt; i ´ve build a application with to view-modes in one gtkTreeView... a
&gt; list-mode and a detail mode. If i want initialize the treeview, i cant do
&gt; that with NULL (as described in the documentation). I need this, because i
&gt; have a button to toggle between this two modes.
&gt;
&gt; Is there a way to full reset the treeview + model, so i can refill the empty
&gt; treeview from the scratch. Now i have to restart my program. :-(
&gt;
&gt; Regards,
&gt; Andreas
&gt;   

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070128171146</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-28 17:11:46-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: [PHP-GTK] GtkSheet / GtkExtra 2.x in php-gtk 2?</subject><body>

Angel Maza wrote the original wrapper.

I can't see that it would be difficult to port, assuming it hasn't changed 
dramatically anyway (I didn't look at the GtkSheet 2 source yet). The 
original didn't have a lot of overrides in it.

Maybe Elizabeth or Anant has time to look into this? I won't, for the next 
week or two.

- Steph

----- Original Message ----- 
From: "Torben Sørensen" &lt;tss@casalogic.dk&gt;
To: "Steph Fox" &lt;steph@zend.com&gt;
Sent: Sunday, January 28, 2007 5:05 PM
Subject: Re: [PHP-GTK] GtkSheet / GtkExtra 2.x in php-gtk 2?


&gt; Hi Steph,
&gt; Thanks - do you happen to know who made the original and/or if it's 
&gt; difficult to make the php "wrapper" to the original stuff from 
&gt; http://gtkextra.sourceforge.net/ ?
&gt; I might be interested to sponsor the port of GtkSheet 2.x to php-gtk 2
&gt;
&gt; Kind regards,
&gt; Torben
&gt;
&gt; Steph Fox wrote:
&gt;&gt; Short version: no.
&gt;&gt;
&gt;&gt; ----- Original Message ----- From: "Torben Sørensen" &lt;tss@casalogic.dk&gt;
&gt;&gt; To: "PHP-GTK gen" &lt;php-gtk-general@lists.php.net&gt;
&gt;&gt; Sent: Sunday, January 28, 2007 3:36 PM
&gt;&gt; Subject: [PHP-GTK] GtkSheet / GtkExtra 2.x in php-gtk 2?
&gt;&gt;
&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Hi
&gt;&gt;&gt;
&gt;&gt;&gt; I'm looking for GtkSheet for php-gtk 2.
&gt;&gt;&gt;
&gt;&gt;&gt; Anybody knows if this port is on its way and the status?
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; -- 
&gt;&gt;&gt; Venlig hilsen
&gt;&gt;&gt;
&gt;&gt;&gt; Torben S. Sørensen
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; Casalogic - Nattergalevej 6 - 2400 Købehavn NV
&gt;&gt;&gt; Tel. 7020 1063 - www.casalogic.dk
&gt;&gt;&gt;
&gt;&gt;&gt; Tilmeld dig vores spændende nyhedsbrev med nyt om Linux
&gt;&gt;&gt; og andre super Open Source programmer på www.casalogic.dk
&gt;&gt;&gt;
&gt;&gt;&gt; -- 
&gt;&gt;&gt; PHP-GTK General Mailing List (http://gtk.php.net/)
&gt;&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; -- 
&gt; Venlig hilsen
&gt;
&gt; Torben S. Sørensen
&gt; Direktør
&gt;
&gt; Casalogic - Nattergalevej 6 - 2400 Købehavn NV
&gt; Tel. 7020 1063 - www.casalogic.dk
&gt;
&gt; Tilmeld dig vores spændende nyhedsbrev med nyt om Linux
&gt; og andre super Open Source programmer på www.casalogic.dk
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070128200522</emailId><senderName>Lars Johannesen</senderName><senderEmail>cipherz@slamsoft.dk</senderEmail><timestampReceived>2007-01-28 20:05:22-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] GtkSheet / GtkExtra 2.x in php-gtk</subject><body>

Hello,

I need GtkExtra2 (Gtksheet2 in particular) for a project, and wish to 
port it for php-gtk2, could you perhaps point me in direction of some 
documentation for writing wrappers, I have knowledge of programming in C 
and Php.

Thanks in advance

Best regards
  Lars

Steph Fox skrev:
&gt; Angel Maza wrote the original wrapper.
&gt;
&gt; I can't see that it would be difficult to port, assuming it hasn't 
&gt; changed dramatically anyway (I didn't look at the GtkSheet 2 source 
&gt; yet). The original didn't have a lot of overrides in it.
&gt;
&gt; Maybe Elizabeth or Anant has time to look into this? I won't, for the 
&gt; next week or two.
&gt;
&gt; - Steph
&gt;
&gt; ----- Original Message ----- From: "Torben Sørensen" &lt;tss@casalogic.dk&gt;
&gt; To: "Steph Fox" &lt;steph@zend.com&gt;
&gt; Sent: Sunday, January 28, 2007 5:05 PM
&gt; Subject: Re: [PHP-GTK] GtkSheet / GtkExtra 2.x in php-gtk 2?
&gt;
&gt;
&gt;&gt; Hi Steph,
&gt;&gt; Thanks - do you happen to know who made the original and/or if it's 
&gt;&gt; difficult to make the php "wrapper" to the original stuff from 
&gt;&gt; http://gtkextra.sourceforge.net/ ?
&gt;&gt; I might be interested to sponsor the port of GtkSheet 2.x to php-gtk 2
&gt;&gt;
&gt;&gt; Kind regards,
&gt;&gt; Torben
&gt;&gt;
&gt;&gt; Steph Fox wrote:
&gt;&gt;&gt; Short version: no.
&gt;&gt;&gt;
&gt;&gt;&gt; ----- Original Message ----- From: "Torben Sørensen" &lt;tss@casalogic.dk&gt;
&gt;&gt;&gt; To: "PHP-GTK gen" &lt;php-gtk-general@lists.php.net&gt;
&gt;&gt;&gt; Sent: Sunday, January 28, 2007 3:36 PM
&gt;&gt;&gt; Subject: [PHP-GTK] GtkSheet / GtkExtra 2.x in php-gtk 2?
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Hi
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; I'm looking for GtkSheet for php-gtk 2.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Anybody knows if this port is on its way and the status?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; -- 
&gt;&gt;&gt;&gt; Venlig hilsen
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Torben S. Sørensen
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Casalogic - Nattergalevej 6 - 2400 Købehavn NV
&gt;&gt;&gt;&gt; Tel. 7020 1063 - www.casalogic.dk
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Tilmeld dig vores spændende nyhedsbrev med nyt om Linux
&gt;&gt;&gt;&gt; og andre super Open Source programmer på www.casalogic.dk
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; -- 
&gt;&gt;&gt;&gt; PHP-GTK General Mailing List (http://gtk.php.net/)
&gt;&gt;&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; -- 
&gt;&gt; Venlig hilsen
&gt;&gt;
&gt;&gt; Torben S. Sørensen
&gt;&gt; Direktør
&gt;&gt;
&gt;&gt; Casalogic - Nattergalevej 6 - 2400 Købehavn NV
&gt;&gt; Tel. 7020 1063 - www.casalogic.dk
&gt;&gt;
&gt;&gt; Tilmeld dig vores spændende nyhedsbrev med nyt om Linux
&gt;&gt; og andre super Open Source programmer på www.casalogic.dk
&gt;&gt;
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070125204543</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-01-25 20:45:43-0400</timestampReceived><subject>[PHP-GTK-DEV] Patch for generator - allow compiling against multiple gtk versions</subject><body>

Afternoon,

I sat down and looked at the generator code to find a way to allow 
building against multiple gtk versions.  I decided the easiest way to 
handle things would be to add version information to included files in 
order to only use defs/overrides specific to a version.

This means in the .defs adding
(include "my.file.here" 2.8)
or in the overrides files adding
%% include my.file.here 2.8
Each file would only be included if the version passed to the generator 
via -v is greater than or equal to 2.8 (default is always 2.6)

Using this with the current build system will require some patching of 
the configure files so -v 2.6 or whatever is passed to the generator.php 
file.  The configure files will also need to do gtk version 
autodetection and allow the user to specify a version.  Anant said he'd 
manage the ./configure stuff for normal build systems and I'm almost 
finished with the fixes to the MSVC build system to allow this to work 
(I had some additional enhancements for the windows build system, 
including dealing with unknown/deprecated compile flags in msvc 2005 and 
adding --enable-debug-pack so I'll send it all in one shot). If no 
version is passed to the generator, 2.6 is always assumed.

This patch does not deal with version numbers for pango or atk.  That 
might need to be added at a later date but I'd like to get gtk and gdk 
rolling first.

The attached patch adds
1. -v argument to generator.php and applies it to the defs_parser and 
override classes where appropriate.
2. a check against the gtkversion in includes in the def_parser class
3. a check against the gtkversion in includes in the overrides class and 
a restore option to un-ignore items (gtkplug and gtksocket come to mind)

To actually build against 2.10 or 2.8 there will need to be some 
additional changes made, basically adding some arg_types and adding 
enums to generator.php, but this patch should make building against 
multiple versions of gtk+ possible.  It might be a good idea to add a 
gtk_lib_version function/method somewhere - right now gtk::get_version 
returns the version of gtk+ that php-gtk2 was built against - but with 
the changes I've made you could build against 2.10 but only include 
features from 2.8 or 2.6 by passing that value via -v to the generator.

Thanks,
Elizabeth Smith

["generator.patch" (text/plain)]

Index: generator.php
===================================================================
RCS file: /repository/php-gtk/generator/generator.php,v
retrieving revision 1.118
diff -u -r1.118 generator.php
--- generator.php	22 Jan 2007 14:27:32 -0000	1.118
+++ generator.php	25 Jan 2007 20:42:09 -0000
@@ -1406,23 +1406,24 @@
 }
 
  
-$result = Console_Getopt::getopt($argv, 'l:o:p:c:r:f:');
+$result = Console_Getopt::getopt($argv, 'l:o:p:c:r:f:v:');
 if (!$result || count($result[1]) &lt; 2)
-    die("usage: php generator.php [-l logfile] [-o overridesfile] [-p prefix] [-c \
functionclass ] [-r typesfile] [-f savefile] defsfile\n"); +    die("usage: php \
generator.php [-l logfile] [-o overridesfile] [-p prefix] [-c functionclass ] [-r \
typesfile] [-f savefile] [-v gtklibversion] defsfile\n");  
 list($opts, $argv) = $result;
 
 $prefix = 'Gtk';
 $function_class = null;
-$overrides = new Overrides();
+$overrides = null;
 $register_defs = array();
 $savefile = 'php://stdout';
 $logfile = 'php://stderr';
+$gtkversion = 2.6;
 
 foreach ($opts as $opt) {
     list($opt_spec, $opt_arg) = $opt;
     if ($opt_spec == 'o') {
-        $overrides = new Overrides($opt_arg);
+        $overrides = $opt_arg;
     } else if ($opt_spec == 'p') {
         $prefix = $opt_arg;
     } else if ($opt_spec == 'c') {
@@ -1433,18 +1434,20 @@
         $savefile = $opt_arg;
     } else if ($opt_spec == 'l') {
         $logfile = $opt_arg;
+    } else if ($opt_spec == 'v') {
+        $gtkversion = $opt_arg;
     }
 }
 
 if (file_exists(dirname($argv[1]) . '/arg_types.php')) {
     include(dirname($argv[1]) . '/arg_types.php');
 }
-
-$parser = new Defs_Parser($argv[1]);
+$overrides = new Overrides($overrides, $gtkversion);
+$parser = new Defs_Parser($argv[1], $gtkversion);
 $generator = new Generator($parser, $overrides, $prefix, $function_class);
 $generator-&gt;set_logfile($logfile);
 foreach ($register_defs as $defs) {
-    $type_parser = new Defs_Parser($defs);
+    $type_parser = new Defs_Parser($defs, $gtkversion);
     $type_parser-&gt;start_parsing();
     $generator-&gt;register_types($type_parser);
 }
Index: override.php
===================================================================
RCS file: /repository/php-gtk/generator/override.php,v
retrieving revision 1.32
diff -u -r1.32 override.php
--- override.php	27 Mar 2006 04:23:11 -0000	1.32
+++ override.php	25 Jan 2007 20:29:41 -0000
@@ -37,9 +37,15 @@
     var $post_registration    = array();
     var $lineinfo             = array();
     var $top_dir              = '';
+    var $gtkversion           = null; // gtk lib version
 
-    function Overrides($file_name = null)
+    function Overrides($file_name = null, $gtkversion = null)
     {
+        if ($gtkversion &lt; 2.6)
+        {
+            $gtkversion = 2.6;
+        }
+        $this-&gt;gtkversion = round($gtkversion, 1);
         if (!isset($file_name))
             return;
 
@@ -111,6 +117,23 @@
                     $this-&gt;ignores[$func] = true;
                 break;
 
+            case 'restore':
+                foreach ($words as $func)
+                {
+                    if (isset($this-&gt;ignores[$func]))
+                    {
+                        unset($this-&gt;ignores[$func]);
+                    }
+                }
+                foreach (preg_split('!\s+!', $rest, -1, PREG_SPLIT_NO_EMPTY) as \
$func) +                {
+                    if (isset($this-&gt;ignores[$func]))
+                    {
+                        unset($this-&gt;ignores[$func]);
+                    }
+                }
+                break;
+
             case 'ignore-win32':
                 if (WIN_OS) {
                     foreach ($words as $func)
@@ -176,7 +199,11 @@
 
             case 'include':
                 $file_name = $words[0];
-                $this-&gt;read_file($file_name);
+                // check for gtk lib version
+                if (!isset($words[1]) || $words[1] &lt;= $this-&gt;gtkversion)
+                {
+                    $this-&gt;read_file($file_name);
+                }
                 foreach (preg_split(',\s+,', $rest, -1, PREG_SPLIT_NO_EMPTY) as \
$file_name) {  $this-&gt;read_file($file_name);
                 }
Index: scheme.php
===================================================================
RCS file: /repository/php-gtk/generator/scheme.php,v
retrieving revision 1.28
diff -u -r1.28 scheme.php
--- scheme.php	30 Mar 2005 18:34:09 -0000	1.28
+++ scheme.php	25 Jan 2007 18:29:40 -0000
@@ -110,9 +110,15 @@
     var $boxed          = array();  // boxed types
     var $pointers       = array();  // pointers
     var $c_name         = array();  // C names of entities
+    var $gtkversion     = null; // gtk lib version
 
-    function Defs_Parser($arg)
+    function Defs_Parser($arg, $gtkversion = 0)
     {
+        if ($gtkversion &lt; 2.6)
+        {
+            $gtkversion = 2.6;
+        }
+        $this-&gt;gtkversion = round($gtkversion, 1);
         switch (gettype($arg)) {
             case 'string':
                 $this-&gt;_parse_or_load($arg);
@@ -415,9 +421,17 @@
     function handle_include($arg)
     {
         $include_file = $this-&gt;file_path . "/" . $arg[0];
-        error_log("Parsing file \"$include_file\".");
-        $include_tree = parse($include_file, 'r');
-        $this-&gt;start_parsing($include_tree);
+        // check for gtk lib version
+        if (isset($arg[1]) &amp;&amp; $arg[1] &gt; $this-&gt;gtkversion)
+        {
+            error_log("Ignoring \"$include_file\". - needs version {$arg[1]}");
+        }
+        else
+        {
+            error_log("Parsing file \"$include_file\".");
+            $include_tree = parse($include_file, 'r');
+            $this-&gt;start_parsing($include_tree);
+        }
     }
 
     function handle_define_virtual($arg)



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070125215539</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-01-25 21:55:39-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Patch for generator - allow compiling against multiple</subject><body>

&gt; Using this with the current build system will require some patching of
&gt; the configure files so -v 2.6 or whatever is passed to the generator.php
&gt; file.  The configure files will also need to do gtk version
&gt; autodetection and allow the user to specify a version.  Anant said he'd
&gt; manage the ./configure stuff for normal build systems and I'm almost
&gt; finished with the fixes to the MSVC build system to allow this to work
&gt; (I had some additional enhancements for the windows build system,
&gt; including dealing with unknown/deprecated compile flags in msvc 2005 and
&gt; adding --enable-debug-pack so I'll send it all in one shot). If no
&gt; version is passed to the generator, 2.6 is always assumed.

Great work Elizabeth, thanks!

Andrei, I've looked through this and can commit a set of patches that
would allow us to build against the latest detected version of Gtk+ on
the user's system (which can also be overridden with the ./configure
switch).

I know we decided to stick with 2.6 for our release; but there are many
users out there who would want to try out the new widgets that 2.10
offers; especially given the fact that they were actually moved out of
the Gnome library and into Gtk+. I think it'll be good if we can have
this and the 2.10 defs in CVS; atlest everyone has a chance to use the
new widgets if they want to. We can still base our final release on 2.6;
since we're not including defs in releases anyway.

Let me know :)

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070126032126</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-01-26 03:21:26-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: Patch for generator - allow compiling against multiple gtk versions</subject><body>

&gt; Using this with the current build system will require some patching of 
&gt; the configure files so -v 2.6 or whatever is passed to the generator.php 
&gt; file.  The configure files will also need to do gtk version 
&gt; autodetection and allow the user to specify a version.  Anant said he'd 
&gt; manage the ./configure stuff for normal build systems and I'm almost 
&gt; finished with the fixes to the MSVC build system to allow this to work 
&gt; (I had some additional enhancements for the windows build system, 
&gt; including dealing with unknown/deprecated compile flags in msvc 2005 and 
&gt; adding --enable-debug-pack so I'll send it all in one shot). If no 
&gt; version is passed to the generator, 2.6 is always assumed.
&gt; 

Here are patches for the windows build system - this moves the source 
file building stuff out of the buildconf.js and into the configwin32 
like the extensions.  It also fixes deprecated compile flags on MSVC 
2005, adds --enable-debug-pack to the release compile, adds manifest 
packing for newer msvc compilers, and checks the gtk lib version while 
allowing a command line override.

Thanks,
Elizabeth Smith

["win32.patch" (text/plain)]

Index: buildconf.js
===================================================================
RCS file: /repository/php-gtk/win32/buildconf.js,v
retrieving revision 1.7
diff -u -r1.7 buildconf.js
--- buildconf.js	31 Oct 2005 11:44:42 -0000	1.7
+++ buildconf.js	25 Jan 2007 23:42:22 -0000
@@ -43,22 +43,6 @@
 	return t;
 }
 
-function gen_functions() {
-
-	/* generate source and header files for exported PHP-GTK functions */
-	temp.WriteLine("/* usage: php generator.php [-l logfile] [-o overridesfile] [-p \
                prefix] [-c functionclass ] [-r typesfile] [-f savefile] defsfile \
                */");
-	temp.WriteLine("mkdir win32\\logs");
-	temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_atk.log -o \
                ext\\gtk+\\atk.overrides -p atk ext\\gtk+\\atk.defs &gt; \
                ext\\gtk+\\gen_atk.c");
-	temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_pango.log -o \
                ext\\gtk+\\pango.overrides -p pango ext\\gtk+\\pango.defs &gt; \
                ext\\gtk+\\gen_pango.c");
-	temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_gdk.log -o \
ext\\gtk+\\gdk.overrides -p gdk -r ext\\gtk+\\atk-types.defs -r \
                ext\\gtk+\\pango-types.defs ext\\gtk+\\gdk.defs &gt; \
                ext\\gtk+\\gen_gdk.c");
-	temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_gtk.log -o \
ext\\gtk+\\gtk.overrides -p gtk -r ext\\gtk+\\atk-types.defs -r \
ext\\gtk+\\pango-types.defs -r ext\\gtk+\\gdk-types.defs ext\\gtk+\\gtk.defs &gt; \
                ext\\gtk+\\gen_gtk.c");
-	temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_atk.c | sed -e \
                "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_atk.h');
-	temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_pango.c | sed -e \
                "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_pango.h');
-	temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gdk.c | sed -e \
                "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gdk.h');
-	temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gtk.c | sed -e \
                "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gtk.h');
-	return;
-}
-
 function Module_Item(module_name, config_path, dir_line, content) {
 
 	this.module_name = module_name;
@@ -165,8 +149,6 @@
 	}
 }
 
-gen_functions();
-
 // Write the head of the configure script
 C.WriteLine("/* This file is automatically generated from win32/confutils.js */");
 C.Write(file_get_contents("win32/confutils.js"));
Index: config.w32.in
===================================================================
RCS file: /repository/php-gtk/win32/config.w32.in,v
retrieving revision 1.12
diff -u -r1.12 config.w32.in
--- config.w32.in	17 Jun 2006 14:47:08 -0000	1.12
+++ config.w32.in	26 Jan 2007 00:29:31 -0000
@@ -14,6 +14,9 @@
 PATH_PROG('link', WshShell.Environment("Process").Item("PATH"), "LD");
 PATH_PROG('nmake');
 
+// Try locating manifest tool
+PATH_PROG('mt', WshShell.Environment("Process").Item("PATH"), "MT");
+
 // we don't want to define LIB, as that will override the default library path set \
in that env var  PATH_PROG('lib', null, 'MAKE_LIB');
 PATH_PROG('php');
@@ -46,6 +49,53 @@
 ARG_WITH('php-build', 'Path to where you extracted \
http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of this source \
dir (..\\php_build) if not specified', 'no');  ARG_WITH('cygwin', 'Path to cygwin \
utilities on your system', '\\cygwin');  
+ARG_ENABLE('version', 'gtk library version you wish to build against, overrides \
automatically detected version', '2.6'); +/* pick up the version from \
gtk/gtkversion.h */ +
+STDOUT.Write("Checking for gtk\\gtkversion.h ... ");
+
+function get_gtk_version(requested)
+{
+	var env, i, file, found, vin, major, minor;
+
+	env = WshShell.Environment("Process").Item('INCLUDE');
+	env = env.split(";");
+	for (i = 0; i &lt; env.length; i++) {
+		file = glob(env[i] + "\\gtk\\gtkversion.h");
+		if (file) {
+			found = true;
+			break;
+		}
+	}
+
+	if (found == true) {
+		STDOUT.WriteLine("	&lt;in default path&gt;");
+	} else {
+		STDOUT.WriteLine("	&lt;not found&gt;");
+	}
+
+	vin = file_get_contents(file);
+
+	regex = new RegExp("GTK_MAJOR_VERSION\\s+\\(([0-9]+)\\)");
+	regex.exec(vin);
+	major = RegExp.$1;
+
+	regex = new RegExp("GTK_MINOR_VERSION\\s+\\(([0-9]+)\\)");
+	regex.exec(vin);
+	minor = RegExp.$1;
+
+	max = major + '.' + minor;
+
+	if (!PHP_GTK_VERSION.length || PHP_GTK_VERSION &gt; max)
+	{
+		PHP_GTK_VERSION = max;
+	}
+
+	STDOUT.Write("Library definitions for " + PHP_GTK_VERSION + " will be used");
+	STDERR.WriteBlankLines(1);
+}
+get_gtk_version(PHP_GTK_VERSION);
+
 // stick objects somewhere outside of the source tree
 ARG_ENABLE('object-out-dir', 'Alternative location for binary objects during build', \
'');  if (PHP_GTK_OBJECT_OUT_DIR.length) {
@@ -56,6 +106,10 @@
 }
 
 ARG_ENABLE('debug', 'Compile with debugging symbols', "no");
+ARG_ENABLE('debug-pack', 'Release binaries with external debug symbols \
(--enable-debug must not be specified)', 'no'); +if (PHP_GTK_DEBUG == "yes" &amp;&amp; \
PHP_GTK_DEBUG_PACK == "yes") { +	ERROR("Use of both --enable-debug and \
--enable-debug-pack not allowed."); +}
 
 // Set some debug-specific options
 if (PHP_GTK_DEBUG == "yes") {
@@ -76,16 +130,24 @@
 DEFINE("DLL_LDFLAGS", "/dll /machine:I386");
 // PHP-GTK DLL link flags
 DEFINE("PHP_GTK_LDFLAGS", "$(DLL_LDFLAGS)");
+// PHP-GTK compiler flags
+DEFINE("CFLAGS", "/nologo");
 
 // General libs
 DEFINE("LIBS", "kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib \
advapi32.lib shell32.lib ole32.lib");  
 if (PHP_GTK_DEBUG == "yes") {
-	DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. /I main /I \
..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I ..\\php5\\TSRM /D \
ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 /D _DEBUG /D _WINDOWS /D \
_MBCS /D _USRDLL"); +	ADD_FLAG("CFLAGS", "/LDd /MDd /Gm /ZI /Od /I . /I ..\\ /I \
..\\.. /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I \
..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 /D _DEBUG \
/D _WINDOWS /D _MBCS /D _USRDLL");  ADD_FLAG("LDFLAGS", "/debug");
 
 } else {
-	DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main /I \
..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I ..\\php5\\TSRM /D \
ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D NDEBUG /D _WINDOWS /D \
_MBCS /D _USRDLL"); +      // Generate external debug files when --enable-debug-pack \
is specified +	if (PHP_GTK_DEBUG_PACK == "yes") {
+		ADD_FLAG("CFLAGS", "/Zi");
+		ADD_FLAG("LDFLAGS", "/incremental:no /debug /opt:ref,icf");
+	}
+      ADD_FLAG("CFLAGS", "/LD /MD /W3 /Ox /I . /I ..\\ /I ..\\.. /I main /I ..\\main \
/I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I ..\\php5\\TSRM /D ZEND_WIN32 \
/D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D NDEBUG /D _WINDOWS /D _MBCS /D \
_USRDLL"); +	
 }
 
 if (VCVERS &lt; 14) {
@@ -96,7 +158,16 @@
 if (VCVERS &gt;= 14) {
 	// fun stuff: MS deprecated ANSI stdio and similar functions - disable warnings
 	// GS hardens the binary against buffer overruns
-	ADD_FLAG('CFLAGS', '/GS /wd4996 ');
+	ADD_FLAG('CFLAGS', '/EHsc /GS /wd4996 ');
+	if (PHP_GTK_DEBUG == "yes")
+	{
+		// Set some debug/release specific options
+		ADD_FLAG('CFLAGS', ' /RTC1 ');
+	}
+}
+else
+{
+	ADD_FLAG('CFLAGS', '/GX');
 }
 
 if (PHP_GTK_PHP_BUILD == 'no') {
Index: confutils.js
===================================================================
RCS file: /repository/php-gtk/win32/confutils.js,v
retrieving revision 1.19
diff -u -r1.19 confutils.js
--- confutils.js	17 Jul 2006 17:00:09 -0000	1.19
+++ confutils.js	26 Jan 2007 03:16:38 -0000
@@ -302,9 +302,6 @@
 		}
 		WScript.Quit(1);
 
-	} else { // not --help
-
-		generate_source();
 	}
 
 	// Now set any defaults we might have missed out earlier
@@ -668,6 +665,7 @@
 
 	MFO.WriteLine("$(BUILD_DIR)\\" + dllname + ": $(" + EXT + "_GLOBAL_OBJS)" + \
res_var);  MFO.WriteLine("\t" + ld + " /out:$(BUILD_DIR)\\" + dllname + " $(" + EXT + \
"_LDFLAGS)" + dllflags + " $(LDFLAGS) $(" + EXT + "_GLOBAL_OBJS) $(LIBS_" + EXT + ")" \
+ dep_libs + " $(LIBS)" + res_var); +	MFO.WriteLine("\t-@$(_VC_MANIFEST_EMBED_DLL)");
 
 	MFO.WriteBlankLines(1);
 	MFO.WriteLine(dllname + ": $(BUILD_DIR)\\" + dllname);
@@ -938,6 +936,7 @@
 		}
 	}
 
+	generate_source();
 	STDOUT.WriteLine("Generating source files - this may take a few seconds");
 	WScript.Sleep(3500);
 	check_generation();
@@ -968,6 +967,16 @@
 		MF.WriteLine(keys[i] + "=" + configure_subst.Item(keys[i]) + " ");
 	}
 
+	MF.WriteLine("!if $(MT) == \"\"");
+	MF.WriteBlankLines(1);
+	MF.WriteLine("_VC_MANIFEST_EMBED_DLL=");
+	MF.WriteBlankLines(1);
+	MF.WriteLine("!else");
+	MF.WriteBlankLines(1);
+	MF.WriteLine("_VC_MANIFEST_EMBED_DLL= $(MT) -nologo -manifest $@.manifest \
-outputresource:$@;2"); +	MF.WriteBlankLines(1);
+	MF.WriteLine("!endif");
+
 	MF.WriteBlankLines(1);
 	MF.WriteLine("all: $(EXT_TARGETS)");
 


["config.w32.patch" (text/plain)]

Index: config.w32
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/config.w32,v
retrieving revision 1.5
diff -u -r1.5 config.w32
--- config.w32	24 Oct 2006 12:46:14 -0000	1.5
+++ config.w32	25 Jan 2007 23:59:50 -0000
@@ -11,11 +11,28 @@
 	CHECK_HEADER("pango/pangowin32.h") &amp;&amp; CHECK_LIB("pangowin32-1.0.lib", "php-gtk") &amp;&amp;
 	CHECK_HEADER("gdk-pixbuf/gdk-pixbuf.h") &amp;&amp; CHECK_LIB("gdk_pixbuf-2.0.lib", \
"php-gtk") &amp;&amp;  CHECK_HEADER("gdk/gdk.h") &amp;&amp; CHECK_LIB("gdk-win32-2.0.lib", "php-gtk") \
                &amp;&amp;
-	CHECK_HEADER("gtk/gtk.h") &amp;&amp; CHECK_LIB("gtk-win32-2.0.lib", "php-gtk")) {
+	CHECK_HEADER("gtk/gtk.h") &amp;&amp; CHECK_LIB("gtk-win32-2.0.lib", "php-gtk"))
+{
 
 		ADD_FLAG("CFLAGS_PHP_GTK", "/I ext\\gtk+ /I ..\\ext\\gtk+ /D HAVE_PHP_GTK=1");
 
 		EXTENSION("php-gtk", "gen_atk.c gen_gdk.c gen_gtk.c gen_pango.c php_gdk.c \
php_gtk+.c php_gtk+_types.c phpg_custom_tree_model.c", true); // always shared  
 		AC_DEFINE("HAVE_PHP_GTK", 1, "PHP-GTK enabled");
+
+		/* Create the file if it doesn't exist */
+		var temp = FSO.OpenTextFile("win32\\temp.bat", 8);
+		/* generate source and header files for exported PHP-GTK functions */
+		temp.WriteLine("/* usage: php generator.php [-l logfile] [-o overridesfile] [-p \
prefix] [-c functionclass ] [-r typesfile] [-f savefile] defsfile */"); \
+		temp.WriteLine("mkdir win32\\logs"); +		temp.WriteLine("php -q \
generator\\generator.php -l win32\\logs\\config_atk.log -o ext\\gtk+\\atk.overrides \
-p atk ext\\gtk+\\atk.defs -v " + PHP_GTK_VERSION + " &gt; ext\\gtk+\\gen_atk.c"); \
+		temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_pango.log \
-o ext\\gtk+\\pango.overrides -p pango ext\\gtk+\\pango.defs -v " + PHP_GTK_VERSION + \
" &gt; ext\\gtk+\\gen_pango.c"); +		temp.WriteLine("php -q generator\\generator.php -l \
win32\\logs\\config_gdk.log -o ext\\gtk+\\gdk.overrides -p gdk -r \
ext\\gtk+\\atk-types.defs -v " + PHP_GTK_VERSION + " -r ext\\gtk+\\pango-types.defs \
ext\\gtk+\\gdk.defs &gt; ext\\gtk+\\gen_gdk.c"); +		temp.WriteLine("php -q \
generator\\generator.php -l win32\\logs\\config_gtk.log -o ext\\gtk+\\gtk.overrides \
-p gtk -r ext\\gtk+\\atk-types.defs -v " + PHP_GTK_VERSION + " -r \
ext\\gtk+\\pango-types.defs -r ext\\gtk+\\gdk-types.defs ext\\gtk+\\gtk.defs &gt; \
ext\\gtk+\\gen_gtk.c"); +		temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" \
ext\\gtk+\\gen_atk.c | sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_atk.h'); \
+		temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_pango.c | sed -e \
"s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_pango.h'); +		temp.WriteLine('grep -h \
"^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gdk.c | sed -e "s/^/PHP_GTK_API extern /" &gt; \
ext\\gtk+\\gen_gdk.h'); +		temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" \
ext\\gtk+\\gen_gtk.c | sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gtk.h'); \
+		temp.Close(); +
 }



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070126032838</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-26 03:28:38-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: Patch for generator - allow compiling against multiple gtk versions</subject><body>

I'll review it over the weekend - thanks!

- Steph

----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: &lt;php-gtk-dev@lists.php.net&gt;
Sent: Friday, January 26, 2007 3:21 AM
Subject: [PHP-GTK-DEV] Re: Patch for generator - allow compiling against 
multiple gtk versions


&gt;&gt; Using this with the current build system will require some patching of
&gt;&gt; the configure files so -v 2.6 or whatever is passed to the generator.php
&gt;&gt; file.  The configure files will also need to do gtk version
&gt;&gt; autodetection and allow the user to specify a version.  Anant said he'd
&gt;&gt; manage the ./configure stuff for normal build systems and I'm almost
&gt;&gt; finished with the fixes to the MSVC build system to allow this to work
&gt;&gt; (I had some additional enhancements for the windows build system,
&gt;&gt; including dealing with unknown/deprecated compile flags in msvc 2005 and
&gt;&gt; adding --enable-debug-pack so I'll send it all in one shot). If no
&gt;&gt; version is passed to the generator, 2.6 is always assumed.
&gt;&gt;
&gt;
&gt; Here are patches for the windows build system - this moves the source
&gt; file building stuff out of the buildconf.js and into the configwin32
&gt; like the extensions.  It also fixes deprecated compile flags on MSVC
&gt; 2005, adds --enable-debug-pack to the release compile, adds manifest
&gt; packing for newer msvc compilers, and checks the gtk lib version while
&gt; allowing a command line override.
&gt;
&gt; Thanks,
&gt; Elizabeth Smith
&gt;


--------------------------------------------------------------------------------


&gt; Index: buildconf.js
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/buildconf.js,v
&gt; retrieving revision 1.7
&gt; diff -u -r1.7 buildconf.js
&gt; --- buildconf.js 31 Oct 2005 11:44:42 -0000 1.7
&gt; +++ buildconf.js 25 Jan 2007 23:42:22 -0000
&gt; @@ -43,22 +43,6 @@
&gt;  return t;
&gt; }
&gt;
&gt; -function gen_functions() {
&gt; -
&gt; - /* generate source and header files for exported PHP-GTK functions */
&gt; - temp.WriteLine("/* usage: php generator.php [-l logfile] [-o 
&gt; overridesfile] [-p prefix] [-c functionclass ] [-r typesfile] [-f 
&gt; savefile] defsfile */");
&gt; - temp.WriteLine("mkdir win32\\logs");
&gt; - temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_atk.log -o ext\\gtk+\\atk.overrides -p atk 
&gt; ext\\gtk+\\atk.defs &gt; ext\\gtk+\\gen_atk.c");
&gt; - temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_pango.log -o ext\\gtk+\\pango.overrides -p pango 
&gt; ext\\gtk+\\pango.defs &gt; ext\\gtk+\\gen_pango.c");
&gt; - temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_gdk.log -o ext\\gtk+\\gdk.overrides -p gdk -r 
&gt; ext\\gtk+\\atk-types.defs -r ext\\gtk+\\pango-types.defs 
&gt; ext\\gtk+\\gdk.defs &gt; ext\\gtk+\\gen_gdk.c");
&gt; - temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_gtk.log -o ext\\gtk+\\gtk.overrides -p gtk -r 
&gt; ext\\gtk+\\atk-types.defs -r ext\\gtk+\\pango-types.defs -r 
&gt; ext\\gtk+\\gdk-types.defs ext\\gtk+\\gtk.defs &gt; ext\\gtk+\\gen_gtk.c");
&gt; - temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_atk.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_atk.h');
&gt; - temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_pango.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_pango.h');
&gt; - temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gdk.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gdk.h');
&gt; - temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gtk.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gtk.h');
&gt; - return;
&gt; -}
&gt; -
&gt; function Module_Item(module_name, config_path, dir_line, content) {
&gt;
&gt;  this.module_name = module_name;
&gt; @@ -165,8 +149,6 @@
&gt;  }
&gt; }
&gt;
&gt; -gen_functions();
&gt; -
&gt; // Write the head of the configure script
&gt; C.WriteLine("/* This file is automatically generated from 
&gt; win32/confutils.js */");
&gt; C.Write(file_get_contents("win32/confutils.js"));
&gt; Index: config.w32.in
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/config.w32.in,v
&gt; retrieving revision 1.12
&gt; diff -u -r1.12 config.w32.in
&gt; --- config.w32.in 17 Jun 2006 14:47:08 -0000 1.12
&gt; +++ config.w32.in 26 Jan 2007 00:29:31 -0000
&gt; @@ -14,6 +14,9 @@
&gt; PATH_PROG('link', WshShell.Environment("Process").Item("PATH"), "LD");
&gt; PATH_PROG('nmake');
&gt;
&gt; +// Try locating manifest tool
&gt; +PATH_PROG('mt', WshShell.Environment("Process").Item("PATH"), "MT");
&gt; +
&gt; // we don't want to define LIB, as that will override the default library 
&gt; path set in that env var
&gt; PATH_PROG('lib', null, 'MAKE_LIB');
&gt; PATH_PROG('php');
&gt; @@ -46,6 +49,53 @@
&gt; ARG_WITH('php-build', 'Path to where you extracted 
&gt; http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of 
&gt; this source dir (..\\php_build) if not specified', 'no');
&gt; ARG_WITH('cygwin', 'Path to cygwin utilities on your system', '\\cygwin');
&gt;
&gt; +ARG_ENABLE('version', 'gtk library version you wish to build against, 
&gt; overrides automatically detected version', '2.6');
&gt; +/* pick up the version from gtk/gtkversion.h */
&gt; +
&gt; +STDOUT.Write("Checking for gtk\\gtkversion.h ... ");
&gt; +
&gt; +function get_gtk_version(requested)
&gt; +{
&gt; + var env, i, file, found, vin, major, minor;
&gt; +
&gt; + env = WshShell.Environment("Process").Item('INCLUDE');
&gt; + env = env.split(";");
&gt; + for (i = 0; i &lt; env.length; i++) {
&gt; + file = glob(env[i] + "\\gtk\\gtkversion.h");
&gt; + if (file) {
&gt; + found = true;
&gt; + break;
&gt; + }
&gt; + }
&gt; +
&gt; + if (found == true) {
&gt; + STDOUT.WriteLine(" &lt;in default path&gt;");
&gt; + } else {
&gt; + STDOUT.WriteLine(" &lt;not found&gt;");
&gt; + }
&gt; +
&gt; + vin = file_get_contents(file);
&gt; +
&gt; + regex = new RegExp("GTK_MAJOR_VERSION\\s+\\(([0-9]+)\\)");
&gt; + regex.exec(vin);
&gt; + major = RegExp.$1;
&gt; +
&gt; + regex = new RegExp("GTK_MINOR_VERSION\\s+\\(([0-9]+)\\)");
&gt; + regex.exec(vin);
&gt; + minor = RegExp.$1;
&gt; +
&gt; + max = major + '.' + minor;
&gt; +
&gt; + if (!PHP_GTK_VERSION.length || PHP_GTK_VERSION &gt; max)
&gt; + {
&gt; + PHP_GTK_VERSION = max;
&gt; + }
&gt; +
&gt; + STDOUT.Write("Library definitions for " + PHP_GTK_VERSION + " will be 
&gt; used");
&gt; + STDERR.WriteBlankLines(1);
&gt; +}
&gt; +get_gtk_version(PHP_GTK_VERSION);
&gt; +
&gt; // stick objects somewhere outside of the source tree
&gt; ARG_ENABLE('object-out-dir', 'Alternative location for binary objects 
&gt; during build', '');
&gt; if (PHP_GTK_OBJECT_OUT_DIR.length) {
&gt; @@ -56,6 +106,10 @@
&gt; }
&gt;
&gt; ARG_ENABLE('debug', 'Compile with debugging symbols', "no");
&gt; +ARG_ENABLE('debug-pack', 'Release binaries with external debug symbols 
&gt; (--enable-debug must not be specified)', 'no');
&gt; +if (PHP_GTK_DEBUG == "yes" &amp;&amp; PHP_GTK_DEBUG_PACK == "yes") {
&gt; + ERROR("Use of both --enable-debug and --enable-debug-pack not 
&gt; allowed.");
&gt; +}
&gt;
&gt; // Set some debug-specific options
&gt; if (PHP_GTK_DEBUG == "yes") {
&gt; @@ -76,16 +130,24 @@
&gt; DEFINE("DLL_LDFLAGS", "/dll /machine:I386");
&gt; // PHP-GTK DLL link flags
&gt; DEFINE("PHP_GTK_LDFLAGS", "$(DLL_LDFLAGS)");
&gt; +// PHP-GTK compiler flags
&gt; +DEFINE("CFLAGS", "/nologo");
&gt;
&gt; // General libs
&gt; DEFINE("LIBS", "kernel32.lib user32.lib gdi32.lib winspool.lib 
&gt; comdlg32.lib advapi32.lib shell32.lib ole32.lib");
&gt;
&gt; if (PHP_GTK_DEBUG == "yes") {
&gt; - DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. 
&gt; /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend 
&gt; /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D 
&gt; WIN32 /D _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; + ADD_FLAG("CFLAGS", "/LDd /MDd /Gm /ZI /Od /I . /I ..\\ /I ..\\.. /I main 
&gt; /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I 
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D 
&gt; WIN32 /D _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt;  ADD_FLAG("LDFLAGS", "/debug");
&gt;
&gt; } else {
&gt; - DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main 
&gt; /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I 
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D 
&gt; WIN32 /D NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; +      // Generate external debug files when --enable-debug-pack is 
&gt; specified
&gt; + if (PHP_GTK_DEBUG_PACK == "yes") {
&gt; + ADD_FLAG("CFLAGS", "/Zi");
&gt; + ADD_FLAG("LDFLAGS", "/incremental:no /debug /opt:ref,icf");
&gt; + }
&gt; +      ADD_FLAG("CFLAGS", "/LD /MD /W3 /Ox /I . /I ..\\ /I ..\\.. /I main 
&gt; /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I 
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D 
&gt; WIN32 /D NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; +
&gt; }
&gt;
&gt; if (VCVERS &lt; 14) {
&gt; @@ -96,7 +158,16 @@
&gt; if (VCVERS &gt;= 14) {
&gt;  // fun stuff: MS deprecated ANSI stdio and similar functions - disable 
&gt; warnings
&gt;  // GS hardens the binary against buffer overruns
&gt; - ADD_FLAG('CFLAGS', '/GS /wd4996 ');
&gt; + ADD_FLAG('CFLAGS', '/EHsc /GS /wd4996 ');
&gt; + if (PHP_GTK_DEBUG == "yes")
&gt; + {
&gt; + // Set some debug/release specific options
&gt; + ADD_FLAG('CFLAGS', ' /RTC1 ');
&gt; + }
&gt; +}
&gt; +else
&gt; +{
&gt; + ADD_FLAG('CFLAGS', '/GX');
&gt; }
&gt;
&gt; if (PHP_GTK_PHP_BUILD == 'no') {
&gt; Index: confutils.js
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/confutils.js,v
&gt; retrieving revision 1.19
&gt; diff -u -r1.19 confutils.js
&gt; --- confutils.js 17 Jul 2006 17:00:09 -0000 1.19
&gt; +++ confutils.js 26 Jan 2007 03:16:38 -0000
&gt; @@ -302,9 +302,6 @@
&gt;  }
&gt;  WScript.Quit(1);
&gt;
&gt; - } else { // not --help
&gt; -
&gt; - generate_source();
&gt;  }
&gt;
&gt;  // Now set any defaults we might have missed out earlier
&gt; @@ -668,6 +665,7 @@
&gt;
&gt;  MFO.WriteLine("$(BUILD_DIR)\\" + dllname + ": $(" + EXT + "_GLOBAL_OBJS)" 
&gt; + res_var);
&gt;  MFO.WriteLine("\t" + ld + " /out:$(BUILD_DIR)\\" + dllname + " $(" + EXT 
&gt; + "_LDFLAGS)" + dllflags + " $(LDFLAGS) $(" + EXT + "_GLOBAL_OBJS) 
&gt; $(LIBS_" + EXT + ")" + dep_libs + " $(LIBS)" + res_var);
&gt; + MFO.WriteLine("\t-@$(_VC_MANIFEST_EMBED_DLL)");
&gt;
&gt;  MFO.WriteBlankLines(1);
&gt;  MFO.WriteLine(dllname + ": $(BUILD_DIR)\\" + dllname);
&gt; @@ -938,6 +936,7 @@
&gt;  }
&gt;  }
&gt;
&gt; + generate_source();
&gt;  STDOUT.WriteLine("Generating source files - this may take a few 
&gt; seconds");
&gt;  WScript.Sleep(3500);
&gt;  check_generation();
&gt; @@ -968,6 +967,16 @@
&gt;  MF.WriteLine(keys[i] + "=" + configure_subst.Item(keys[i]) + " ");
&gt;  }
&gt;
&gt; + MF.WriteLine("!if $(MT) == \"\"");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("_VC_MANIFEST_EMBED_DLL=");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("!else");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("_VC_MANIFEST_EMBED_DLL= $(MT) -nologo -manifest 
&gt; $@.manifest -outputresource:$@;2");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("!endif");
&gt; +
&gt;  MF.WriteBlankLines(1);
&gt;  MF.WriteLine("all: $(EXT_TARGETS)");
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; Index: config.w32
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/ext/gtk+/config.w32,v
&gt; retrieving revision 1.5
&gt; diff -u -r1.5 config.w32
&gt; --- config.w32 24 Oct 2006 12:46:14 -0000 1.5
&gt; +++ config.w32 25 Jan 2007 23:59:50 -0000
&gt; @@ -11,11 +11,28 @@
&gt;  CHECK_HEADER("pango/pangowin32.h") &amp;&amp; CHECK_LIB("pangowin32-1.0.lib", 
&gt; "php-gtk") &amp;&amp;
&gt;  CHECK_HEADER("gdk-pixbuf/gdk-pixbuf.h") &amp;&amp; 
&gt; CHECK_LIB("gdk_pixbuf-2.0.lib", "php-gtk") &amp;&amp;
&gt;  CHECK_HEADER("gdk/gdk.h") &amp;&amp; CHECK_LIB("gdk-win32-2.0.lib", "php-gtk") &amp;&amp;
&gt; - CHECK_HEADER("gtk/gtk.h") &amp;&amp; CHECK_LIB("gtk-win32-2.0.lib", "php-gtk")) 
&gt; {
&gt; + CHECK_HEADER("gtk/gtk.h") &amp;&amp; CHECK_LIB("gtk-win32-2.0.lib", "php-gtk"))
&gt; +{
&gt;
&gt;  ADD_FLAG("CFLAGS_PHP_GTK", "/I ext\\gtk+ /I ..\\ext\\gtk+ /D 
&gt; HAVE_PHP_GTK=1");
&gt;
&gt;  EXTENSION("php-gtk", "gen_atk.c gen_gdk.c gen_gtk.c gen_pango.c php_gdk.c 
&gt; php_gtk+.c php_gtk+_types.c phpg_custom_tree_model.c", true); // always 
&gt; shared
&gt;
&gt;  AC_DEFINE("HAVE_PHP_GTK", 1, "PHP-GTK enabled");
&gt; +
&gt; + /* Create the file if it doesn't exist */
&gt; + var temp = FSO.OpenTextFile("win32\\temp.bat", 8);
&gt; + /* generate source and header files for exported PHP-GTK functions */
&gt; + temp.WriteLine("/* usage: php generator.php [-l logfile] [-o 
&gt; overridesfile] [-p prefix] [-c functionclass ] [-r typesfile] [-f 
&gt; savefile] defsfile */");
&gt; + temp.WriteLine("mkdir win32\\logs");
&gt; + temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_atk.log -o ext\\gtk+\\atk.overrides -p atk 
&gt; ext\\gtk+\\atk.defs -v " + PHP_GTK_VERSION + " &gt; ext\\gtk+\\gen_atk.c");
&gt; + temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_pango.log -o ext\\gtk+\\pango.overrides -p pango 
&gt; ext\\gtk+\\pango.defs -v " + PHP_GTK_VERSION + " &gt; 
&gt; ext\\gtk+\\gen_pango.c");
&gt; + temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_gdk.log -o ext\\gtk+\\gdk.overrides -p gdk -r 
&gt; ext\\gtk+\\atk-types.defs -v " + PHP_GTK_VERSION + " -r 
&gt; ext\\gtk+\\pango-types.defs ext\\gtk+\\gdk.defs &gt; ext\\gtk+\\gen_gdk.c");
&gt; + temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_gtk.log -o ext\\gtk+\\gtk.overrides -p gtk -r 
&gt; ext\\gtk+\\atk-types.defs -v " + PHP_GTK_VERSION + " -r 
&gt; ext\\gtk+\\pango-types.defs -r ext\\gtk+\\gdk-types.defs 
&gt; ext\\gtk+\\gtk.defs &gt; ext\\gtk+\\gen_gtk.c");
&gt; + temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_atk.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_atk.h');
&gt; + temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_pango.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_pango.h');
&gt; + temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gdk.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gdk.h');
&gt; + temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gtk.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gtk.h');
&gt; + temp.Close();
&gt; +
&gt; }
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070126054843</emailId><senderName>"Anant Narayanan"</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-01-26 05:48:43-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: Patch for generator - allow compiling</subject><body>

&gt; I'll review it over the weekend - thanks!

Welcome back Steph! :)

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070126183505</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-01-26 18:35:05-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: Patch for generator - allow compiling against</subject><body>

As you requested Steph - here is part one of the split patch - this ONLY 
fixes MSVC 2005 compile errors - it involves moving an include in 
php_gtk.h to make sure the windows config.h gets included BEFORE php.h - 
this is because there are pragmas in there that need to be read in first 
or MSVC 2005 starts having a fit and dies.

It also makes a few changes to the windows build files - allowing the 
use of --enable-debug-pack for release builds, fixing some compiler 
flags for msvc 2005 (it checks the compiler version), and adding 
manifest packing to the build (which should be ignored on compilers 
without a manifest packer :)

MSVC6 users shouldn't see a change at all...

Thanks,
Elizabeth Smith

["main.patch" (text/plain)]

Index: php_gtk.h
===================================================================
RCS file: /repository/php-gtk/main/php_gtk.h,v
retrieving revision 1.138
diff -u -r1.138 php_gtk.h
--- php_gtk.h	15 Oct 2006 00:48:48 -0000	1.138
+++ php_gtk.h	14 Nov 2006 01:55:16 -0000
@@ -23,13 +23,14 @@
 #ifndef _PHP_GTK_H
 #define _PHP_GTK_H
 
-#include "php.h"
-#include "php_ini.h"
+
 #ifdef PHP_WIN32
 #include "config.w32.h"
 #else
 #include "config.h"
 #endif
+#include "php.h"
+#include "php_ini.h"
 
 /* workaround for expat-related declaration in PHP compat file */
 #ifdef lookup

["win32.patch" (text/plain)]

Index: config.w32.in
===================================================================
RCS file: /repository/php-gtk/win32/config.w32.in,v
retrieving revision 1.12
diff -u -r1.12 config.w32.in
--- config.w32.in	17 Jun 2006 14:47:08 -0000	1.12
+++ config.w32.in	26 Jan 2007 18:26:13 -0000
@@ -14,6 +14,9 @@
 PATH_PROG('link', WshShell.Environment("Process").Item("PATH"), "LD");
 PATH_PROG('nmake');
 
+// Try locating manifest tool
+PATH_PROG('mt', WshShell.Environment("Process").Item("PATH"), "MT");
+
 // we don't want to define LIB, as that will override the default library path set \
in that env var  PATH_PROG('lib', null, 'MAKE_LIB');
 PATH_PROG('php');
@@ -56,6 +59,10 @@
 }
 
 ARG_ENABLE('debug', 'Compile with debugging symbols', "no");
+ARG_ENABLE('debug-pack', 'Release binaries with external debug symbols \
(--enable-debug must not be specified)', 'no'); +if (PHP_GTK_DEBUG == "yes" &amp;&amp; \
PHP_GTK_DEBUG_PACK == "yes") { +	ERROR("Use of both --enable-debug and \
--enable-debug-pack not allowed."); +}
 
 // Set some debug-specific options
 if (PHP_GTK_DEBUG == "yes") {
@@ -85,7 +92,12 @@
 	ADD_FLAG("LDFLAGS", "/debug");
 
 } else {
-	DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main /I \
..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I ..\\php5\\TSRM /D \
ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D NDEBUG /D _WINDOWS /D \
_MBCS /D _USRDLL"); +	DEFINE("CFLAGS", "/nologo /MD /W3 /GX /Ox /I . /I ..\\ /I \
..\\.. /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I \
..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D NDEBUG \
/D _WINDOWS /D _MBCS /D _USRDLL"); +	// Generate external debug files when \
--enable-debug-pack is specified +	if (PHP_GTK_DEBUG_PACK == "yes") {
+		ADD_FLAG("CFLAGS", "/Zi");
+		ADD_FLAG("LDFLAGS", "/incremental:no /debug /opt:ref,icf");
+	}
 }
 
 if (VCVERS &lt; 14) {
@@ -96,7 +108,16 @@
 if (VCVERS &gt;= 14) {
 	// fun stuff: MS deprecated ANSI stdio and similar functions - disable warnings
 	// GS hardens the binary against buffer overruns
-	ADD_FLAG('CFLAGS', '/GS /wd4996 ');
+	ADD_FLAG('CFLAGS', '/EHsc /GS /wd4996 ');
+	if (PHP_GTK_DEBUG == "yes")
+	{
+		// Set some debug/release specific options
+		ADD_FLAG('CFLAGS', ' /RTC1 ');
+	}
+}
+else
+{
+	ADD_FLAG('CFLAGS', '/GX');
 }
 
 if (PHP_GTK_PHP_BUILD == 'no') {
Index: confutils.js
===================================================================
RCS file: /repository/php-gtk/win32/confutils.js,v
retrieving revision 1.19
diff -u -r1.19 confutils.js
--- confutils.js	17 Jul 2006 17:00:09 -0000	1.19
+++ confutils.js	26 Jan 2007 18:19:15 -0000
@@ -668,6 +668,7 @@
 
 	MFO.WriteLine("$(BUILD_DIR)\\" + dllname + ": $(" + EXT + "_GLOBAL_OBJS)" + \
res_var);  MFO.WriteLine("\t" + ld + " /out:$(BUILD_DIR)\\" + dllname + " $(" + EXT + \
"_LDFLAGS)" + dllflags + " $(LDFLAGS) $(" + EXT + "_GLOBAL_OBJS) $(LIBS_" + EXT + ")" \
+ dep_libs + " $(LIBS)" + res_var); +	MFO.WriteLine("\t-@$(_VC_MANIFEST_EMBED_DLL)");
 
 	MFO.WriteBlankLines(1);
 	MFO.WriteLine(dllname + ": $(BUILD_DIR)\\" + dllname);
@@ -968,6 +969,16 @@
 		MF.WriteLine(keys[i] + "=" + configure_subst.Item(keys[i]) + " ");
 	}
 
+	MF.WriteLine("!if $(MT) == \"\"");
+	MF.WriteBlankLines(1);
+	MF.WriteLine("_VC_MANIFEST_EMBED_DLL=");
+	MF.WriteBlankLines(1);
+	MF.WriteLine("!else");
+	MF.WriteBlankLines(1);
+	MF.WriteLine("_VC_MANIFEST_EMBED_DLL= $(MT) -nologo -manifest $@.manifest \
-outputresource:$@;2"); +	MF.WriteBlankLines(1);
+	MF.WriteLine("!endif");
+
 	MF.WriteBlankLines(1);
 	MF.WriteLine("all: $(EXT_TARGETS)");
 



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070130232220</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-01-30 23:22:20-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: win32 installer [WAS: Announcing PHP-GTK-EDGE]</subject><body>

Steph Fox wrote:
&gt;&gt;&gt; Actually, the installer source is available right on the gnope site -
&gt; 
&gt; I had a look at this now, also at NSIS itself (apologies to everybody 
&gt; expecting work from me today). Seems like a good system - I'm wondering 
&gt; now what disadvantages it has (if any) as compared to Wix, which is 
&gt; easiest to code/maintain and which has the smallest overhead... mainly 
&gt; wondering because the Wix system uses .msi, which everybody is familiar 
&gt; with and which is better supported in the Windows environment, 
&gt; particularly when it comes to networks. The new PHP installer on php.net 
&gt; is created with Wix, mostly for that reason, and this in fact replaced 
&gt; the original NSIS code.

Doesn't matter to me - whatever works :)  Just as long as we don't do 
something stupid (adding the php-gtk2 version of the gtk+ runtime to the 
global $PATH comes to mind) I'll be happy (is off to install wix)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070130232814</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-30 23:28:14-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: win32 installer [WAS: Announcing PHP-GTK-EDGE]</subject><body>

Hi Elizabeth,

&gt;&gt;&gt;&gt; Actually, the installer source is available right on the gnope site -
&gt;&gt;
&gt;&gt; I had a look at this now, also at NSIS itself (apologies to everybody 
&gt;&gt; expecting work from me today). Seems like a good system - I'm wondering 
&gt;&gt; now what disadvantages it has (if any) as compared to Wix, which is 
&gt;&gt; easiest to code/maintain and which has the smallest overhead... mainly 
&gt;&gt; wondering because the Wix system uses .msi, which everybody is familiar 
&gt;&gt; with and which is better supported in the Windows environment, 
&gt;&gt; particularly when it comes to networks. The new PHP installer on php.net 
&gt;&gt; is created with Wix, mostly for that reason, and this in fact replaced 
&gt;&gt; the original NSIS code.
&gt;
&gt; Doesn't matter to me - whatever works :)  Just as long as we don't do 
&gt; something stupid (adding the php-gtk2 version of the gtk+ runtime to the 
&gt; global $PATH comes to mind) I'll be happy (is off to install wix)

You don't need to install Wix per se, just take a look at/check out the 
stuff in CVS. I don't know how straightforward the API is as compared with 
NSIS.

- Steph 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070131002358</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-31 00:23:58-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: win32 installer [WAS: Announcing PHP-GTK-EDGE]</subject><body>

I don't see anything wrong with putting it in php-gtk/win32/installer. 
It's not different from distributing .spec files for building RPM 
packages.

-Andrei

On Jan 30, 2007, at 3:15 PM, Steph Fox wrote:

&gt;&gt;&gt; Actually, the installer source is available right on the gnope site -
&gt;
&gt; I had a look at this now, also at NSIS itself (apologies to everybody 
&gt; expecting work from me today). Seems like a good system - I'm 
&gt; wondering now what disadvantages it has (if any) as compared to Wix, 
&gt; which is easiest to code/maintain and which has the smallest 
&gt; overhead... mainly wondering because the Wix system uses .msi, which 
&gt; everybody is familiar with and which is better supported in the 
&gt; Windows environment, particularly when it comes to networks. The new 
&gt; PHP installer on php.net is created with Wix, mostly for that reason, 
&gt; and this in fact replaced the original NSIS code.
&gt;
&gt; I'm also wondering where installer scripts should be kept - Andrei, is 
&gt; there somewhere sane to keep them in CVS, either in the php-gtk module 
&gt; or the php-gtk-web module, or should it be stored elsewhere? For PHP, 
&gt; the move to Wix took the code out of php-src/win32/installer and into 
&gt; a completely new CVS module named win-installer... this actually 
&gt; includes all the Wix components (binaries, icons etc) used in building 
&gt; the thing, as well as the scripts.
&gt;
&gt; - Steph
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070131201442</emailId><senderName>       64.81.162.8</senderName><senderEmail></senderEmail><timestampReceived>2007-01-31 20:14:42-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: win32 installer [WAS: Announcing PHP-GTK-EDGE]</subject><body>

Steph Fox wrote:
&gt; mainly wondering because the Wix system uses .msi, which everybody
&gt; is familiar with and which is better supported in the Windows
&gt; environment, particularly when it comes to networks.

The .msi installer under windoze requires one to have one of those M$
spyware programs installed on your system.  I refuse to bow to their
paranoia.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070131202944</emailId><senderName>Anant Narayanan</senderName><senderEmail>anant@kix.in</senderEmail><timestampReceived>2007-01-31 20:29:44-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: win32 installer [WAS: Announcing PHP-GTK-EDGE]</subject><body>

&gt; The .msi installer under windoze requires one to have one of those M$
&gt; spyware programs installed on your system.  I refuse to bow to their
&gt; paranoia.

You mean the .NET framework?

On a side note, if you're so paranoid why do you use Windows at all ;)

--
Anant

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070126190216</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-01-26 19:02:16-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: Patch for generator - allow compiling against</subject><body>

This is part two of the build patch, which allows a --enable-libversion 
configure switch.  It also checks the gtkversion.h file to see the 
version available to build against (it only allows less than or equal to 
  the version found as a configure switch) and then passes that to the 
generator.php file with the -v switch.

I had to move the file generation writing out of buildconf and into the 
gtk extension config.w32 file (like the other extensions)

Thanks,
Elizabeth Smith

["config.w32.patch" (text/plain)]

Index: config.w32
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/config.w32,v
retrieving revision 1.5
diff -u -r1.5 config.w32
--- config.w32	24 Oct 2006 12:46:14 -0000	1.5
+++ config.w32	26 Jan 2007 18:57:14 -0000
@@ -11,11 +11,28 @@
 	CHECK_HEADER("pango/pangowin32.h") &amp;&amp; CHECK_LIB("pangowin32-1.0.lib", "php-gtk") &amp;&amp;
 	CHECK_HEADER("gdk-pixbuf/gdk-pixbuf.h") &amp;&amp; CHECK_LIB("gdk_pixbuf-2.0.lib", \
"php-gtk") &amp;&amp;  CHECK_HEADER("gdk/gdk.h") &amp;&amp; CHECK_LIB("gdk-win32-2.0.lib", "php-gtk") \
                &amp;&amp;
-	CHECK_HEADER("gtk/gtk.h") &amp;&amp; CHECK_LIB("gtk-win32-2.0.lib", "php-gtk")) {
+	CHECK_HEADER("gtk/gtk.h") &amp;&amp; CHECK_LIB("gtk-win32-2.0.lib", "php-gtk"))
+{
 
 		ADD_FLAG("CFLAGS_PHP_GTK", "/I ext\\gtk+ /I ..\\ext\\gtk+ /D HAVE_PHP_GTK=1");
 
 		EXTENSION("php-gtk", "gen_atk.c gen_gdk.c gen_gtk.c gen_pango.c php_gdk.c \
php_gtk+.c php_gtk+_types.c phpg_custom_tree_model.c", true); // always shared  
 		AC_DEFINE("HAVE_PHP_GTK", 1, "PHP-GTK enabled");
+
+		/* Create the file if it doesn't exist */
+		var temp = FSO.OpenTextFile("win32\\temp.bat", 8);
+		/* generate source and header files for exported PHP-GTK functions */
+		temp.WriteLine("/* usage: php generator.php [-l logfile] [-o overridesfile] [-p \
prefix] [-c functionclass ] [-r typesfile] [-f savefile] defsfile */"); \
+		temp.WriteLine("mkdir win32\\logs"); +		temp.WriteLine("php -q \
generator\\generator.php -l win32\\logs\\config_atk.log -o ext\\gtk+\\atk.overrides \
-p atk ext\\gtk+\\atk.defs -v " + PHP_GTK_LIBVERSION + " &gt; ext\\gtk+\\gen_atk.c"); \
+		temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_pango.log \
-o ext\\gtk+\\pango.overrides -p pango ext\\gtk+\\pango.defs -v " + \
PHP_GTK_LIBVERSION + " &gt; ext\\gtk+\\gen_pango.c"); +		temp.WriteLine("php -q \
generator\\generator.php -l win32\\logs\\config_gdk.log -o ext\\gtk+\\gdk.overrides \
-p gdk -r ext\\gtk+\\atk-types.defs -v " + PHP_GTK_LIBVERSION + " -r \
ext\\gtk+\\pango-types.defs ext\\gtk+\\gdk.defs &gt; ext\\gtk+\\gen_gdk.c"); \
+		temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_gtk.log -o \
ext\\gtk+\\gtk.overrides -p gtk -r ext\\gtk+\\atk-types.defs -v " + \
PHP_GTK_LIBVERSION + " -r ext\\gtk+\\pango-types.defs -r ext\\gtk+\\gdk-types.defs \
ext\\gtk+\\gtk.defs &gt; ext\\gtk+\\gen_gtk.c"); +		temp.WriteLine('grep -h \
"^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_atk.c | sed -e "s/^/PHP_GTK_API extern /" &gt; \
ext\\gtk+\\gen_atk.h'); +		temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" \
ext\\gtk+\\gen_pango.c | sed -e "s/^/PHP_GTK_API extern /" &gt; \
ext\\gtk+\\gen_pango.h'); +		temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" \
ext\\gtk+\\gen_gdk.c | sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gdk.h'); \
+		temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gtk.c | sed -e \
"s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gtk.h'); +		temp.Close();
+
 }


["win32.patch" (text/plain)]

Index: buildconf.js
===================================================================
RCS file: /repository/php-gtk/win32/buildconf.js,v
retrieving revision 1.7
diff -u -r1.7 buildconf.js
--- buildconf.js	31 Oct 2005 11:44:42 -0000	1.7
+++ buildconf.js	25 Jan 2007 23:42:22 -0000
@@ -43,22 +43,6 @@
 	return t;
 }
 
-function gen_functions() {
-
-	/* generate source and header files for exported PHP-GTK functions */
-	temp.WriteLine("/* usage: php generator.php [-l logfile] [-o overridesfile] [-p \
                prefix] [-c functionclass ] [-r typesfile] [-f savefile] defsfile \
                */");
-	temp.WriteLine("mkdir win32\\logs");
-	temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_atk.log -o \
                ext\\gtk+\\atk.overrides -p atk ext\\gtk+\\atk.defs &gt; \
                ext\\gtk+\\gen_atk.c");
-	temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_pango.log -o \
                ext\\gtk+\\pango.overrides -p pango ext\\gtk+\\pango.defs &gt; \
                ext\\gtk+\\gen_pango.c");
-	temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_gdk.log -o \
ext\\gtk+\\gdk.overrides -p gdk -r ext\\gtk+\\atk-types.defs -r \
                ext\\gtk+\\pango-types.defs ext\\gtk+\\gdk.defs &gt; \
                ext\\gtk+\\gen_gdk.c");
-	temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_gtk.log -o \
ext\\gtk+\\gtk.overrides -p gtk -r ext\\gtk+\\atk-types.defs -r \
ext\\gtk+\\pango-types.defs -r ext\\gtk+\\gdk-types.defs ext\\gtk+\\gtk.defs &gt; \
                ext\\gtk+\\gen_gtk.c");
-	temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_atk.c | sed -e \
                "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_atk.h');
-	temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_pango.c | sed -e \
                "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_pango.h');
-	temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gdk.c | sed -e \
                "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gdk.h');
-	temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gtk.c | sed -e \
                "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gtk.h');
-	return;
-}
-
 function Module_Item(module_name, config_path, dir_line, content) {
 
 	this.module_name = module_name;
@@ -165,8 +149,6 @@
 	}
 }
 
-gen_functions();
-
 // Write the head of the configure script
 C.WriteLine("/* This file is automatically generated from win32/confutils.js */");
 C.Write(file_get_contents("win32/confutils.js"));
Index: config.w32.in
===================================================================
RCS file: /repository/php-gtk/win32/config.w32.in,v
retrieving revision 1.12
diff -u -r1.12 config.w32.in
--- config.w32.in	17 Jun 2006 14:47:08 -0000	1.12
+++ config.w32.in	26 Jan 2007 18:55:53 -0000
@@ -46,6 +46,53 @@
 ARG_WITH('php-build', 'Path to where you extracted \
http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of this source \
dir (..\\php_build) if not specified', 'no');  ARG_WITH('cygwin', 'Path to cygwin \
utilities on your system', '\\cygwin');  
+ARG_ENABLE('libversion', 'gtk library version you wish to build against, overrides \
automatically detected version', '2.6'); +/* pick up the version from \
gtk/gtkversion.h */ +
+STDOUT.Write("Checking for gtk\\gtkversion.h ... ");
+
+function get_gtk_libversion(requested)
+{
+	var env, i, file, found, vin, major, minor;
+
+	env = WshShell.Environment("Process").Item('INCLUDE');
+	env = env.split(";");
+	for (i = 0; i &lt; env.length; i++) {
+		file = glob(env[i] + "\\gtk\\gtkversion.h");
+		if (file) {
+			found = true;
+			break;
+		}
+	}
+
+	if (found == true) {
+		STDOUT.WriteLine("	&lt;in default path&gt;");
+	} else {
+		STDOUT.WriteLine("	&lt;not found&gt;");
+	}
+
+	vin = file_get_contents(file);
+
+	regex = new RegExp("GTK_MAJOR_VERSION\\s+\\(([0-9]+)\\)");
+	regex.exec(vin);
+	major = RegExp.$1;
+
+	regex = new RegExp("GTK_MINOR_VERSION\\s+\\(([0-9]+)\\)");
+	regex.exec(vin);
+	minor = RegExp.$1;
+
+	max = major + '.' + minor;
+
+	if (!PHP_GTK_LIBVERSION.length || PHP_GTK_LIBVERSION &gt; max)
+	{
+		PHP_GTK_LIBVERSION = max;
+	}
+
+	STDOUT.Write("Library definitions for " + PHP_GTK_LIBVERSION + " will be used");
+	STDERR.WriteBlankLines(1);
+}
+get_gtk_version(PHP_GTK_LIBVERSION);
+
 // stick objects somewhere outside of the source tree
 ARG_ENABLE('object-out-dir', 'Alternative location for binary objects during build', \
'');  if (PHP_GTK_OBJECT_OUT_DIR.length) {
Index: confutils.js
===================================================================
RCS file: /repository/php-gtk/win32/confutils.js,v
retrieving revision 1.19
diff -u -r1.19 confutils.js
--- confutils.js	17 Jul 2006 17:00:09 -0000	1.19
+++ confutils.js	26 Jan 2007 18:54:02 -0000
@@ -302,9 +302,6 @@
 		}
 		WScript.Quit(1);
 
-	} else { // not --help
-
-		generate_source();
 	}
 
 	// Now set any defaults we might have missed out earlier
@@ -937,6 +934,7 @@
 			FSO.CreateFolder(bd);
 		}
 	}
+	generate_source();
 
 	STDOUT.WriteLine("Generating source files - this may take a few seconds");
 	WScript.Sleep(3500);



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070126190528</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-26 19:05:28-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: Patch for generator - allow compiling against multiple gtk versions</subject><body>

Hi,


&gt; This is part two of the build patch, which allows a --enable-libversion
&gt; configure switch.  It also checks the gtkversion.h file to see the
&gt; version available to build against (it only allows less than or equal to
&gt;  the version found as a configure switch) and then passes that to the
&gt; generator.php file with the -v switch.

Thanks, Elizabeth!

&gt; I had to move the file generation writing out of buildconf and into the
&gt; gtk extension config.w32 file (like the other extensions)

I'll figure out what you mean by that later...

- Steph

&gt; Thanks,
&gt; Elizabeth Smith
&gt;


--------------------------------------------------------------------------------


&gt; Index: config.w32
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/ext/gtk+/config.w32,v
&gt; retrieving revision 1.5
&gt; diff -u -r1.5 config.w32
&gt; --- config.w32 24 Oct 2006 12:46:14 -0000 1.5
&gt; +++ config.w32 26 Jan 2007 18:57:14 -0000
&gt; @@ -11,11 +11,28 @@
&gt;  CHECK_HEADER("pango/pangowin32.h") &amp;&amp; CHECK_LIB("pangowin32-1.0.lib", 
&gt; "php-gtk") &amp;&amp;
&gt;  CHECK_HEADER("gdk-pixbuf/gdk-pixbuf.h") &amp;&amp; 
&gt; CHECK_LIB("gdk_pixbuf-2.0.lib", "php-gtk") &amp;&amp;
&gt;  CHECK_HEADER("gdk/gdk.h") &amp;&amp; CHECK_LIB("gdk-win32-2.0.lib", "php-gtk") &amp;&amp;
&gt; - CHECK_HEADER("gtk/gtk.h") &amp;&amp; CHECK_LIB("gtk-win32-2.0.lib", "php-gtk")) 
&gt; {
&gt; + CHECK_HEADER("gtk/gtk.h") &amp;&amp; CHECK_LIB("gtk-win32-2.0.lib", "php-gtk"))
&gt; +{
&gt;
&gt;  ADD_FLAG("CFLAGS_PHP_GTK", "/I ext\\gtk+ /I ..\\ext\\gtk+ /D 
&gt; HAVE_PHP_GTK=1");
&gt;
&gt;  EXTENSION("php-gtk", "gen_atk.c gen_gdk.c gen_gtk.c gen_pango.c php_gdk.c 
&gt; php_gtk+.c php_gtk+_types.c phpg_custom_tree_model.c", true); // always 
&gt; shared
&gt;
&gt;  AC_DEFINE("HAVE_PHP_GTK", 1, "PHP-GTK enabled");
&gt; +
&gt; + /* Create the file if it doesn't exist */
&gt; + var temp = FSO.OpenTextFile("win32\\temp.bat", 8);
&gt; + /* generate source and header files for exported PHP-GTK functions */
&gt; + temp.WriteLine("/* usage: php generator.php [-l logfile] [-o 
&gt; overridesfile] [-p prefix] [-c functionclass ] [-r typesfile] [-f 
&gt; savefile] defsfile */");
&gt; + temp.WriteLine("mkdir win32\\logs");
&gt; + temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_atk.log -o ext\\gtk+\\atk.overrides -p atk 
&gt; ext\\gtk+\\atk.defs -v " + PHP_GTK_LIBVERSION + " &gt; 
&gt; ext\\gtk+\\gen_atk.c");
&gt; + temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_pango.log -o ext\\gtk+\\pango.overrides -p pango 
&gt; ext\\gtk+\\pango.defs -v " + PHP_GTK_LIBVERSION + " &gt; 
&gt; ext\\gtk+\\gen_pango.c");
&gt; + temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_gdk.log -o ext\\gtk+\\gdk.overrides -p gdk -r 
&gt; ext\\gtk+\\atk-types.defs -v " + PHP_GTK_LIBVERSION + " -r 
&gt; ext\\gtk+\\pango-types.defs ext\\gtk+\\gdk.defs &gt; ext\\gtk+\\gen_gdk.c");
&gt; + temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_gtk.log -o ext\\gtk+\\gtk.overrides -p gtk -r 
&gt; ext\\gtk+\\atk-types.defs -v " + PHP_GTK_LIBVERSION + " -r 
&gt; ext\\gtk+\\pango-types.defs -r ext\\gtk+\\gdk-types.defs 
&gt; ext\\gtk+\\gtk.defs &gt; ext\\gtk+\\gen_gtk.c");
&gt; + temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_atk.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_atk.h');
&gt; + temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_pango.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_pango.h');
&gt; + temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gdk.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gdk.h');
&gt; + temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gtk.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gtk.h');
&gt; + temp.Close();
&gt; +
&gt; }
&gt;


--------------------------------------------------------------------------------


&gt; Index: buildconf.js
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/buildconf.js,v
&gt; retrieving revision 1.7
&gt; diff -u -r1.7 buildconf.js
&gt; --- buildconf.js 31 Oct 2005 11:44:42 -0000 1.7
&gt; +++ buildconf.js 25 Jan 2007 23:42:22 -0000
&gt; @@ -43,22 +43,6 @@
&gt;  return t;
&gt; }
&gt;
&gt; -function gen_functions() {
&gt; -
&gt; - /* generate source and header files for exported PHP-GTK functions */
&gt; - temp.WriteLine("/* usage: php generator.php [-l logfile] [-o 
&gt; overridesfile] [-p prefix] [-c functionclass ] [-r typesfile] [-f 
&gt; savefile] defsfile */");
&gt; - temp.WriteLine("mkdir win32\\logs");
&gt; - temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_atk.log -o ext\\gtk+\\atk.overrides -p atk 
&gt; ext\\gtk+\\atk.defs &gt; ext\\gtk+\\gen_atk.c");
&gt; - temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_pango.log -o ext\\gtk+\\pango.overrides -p pango 
&gt; ext\\gtk+\\pango.defs &gt; ext\\gtk+\\gen_pango.c");
&gt; - temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_gdk.log -o ext\\gtk+\\gdk.overrides -p gdk -r 
&gt; ext\\gtk+\\atk-types.defs -r ext\\gtk+\\pango-types.defs 
&gt; ext\\gtk+\\gdk.defs &gt; ext\\gtk+\\gen_gdk.c");
&gt; - temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_gtk.log -o ext\\gtk+\\gtk.overrides -p gtk -r 
&gt; ext\\gtk+\\atk-types.defs -r ext\\gtk+\\pango-types.defs -r 
&gt; ext\\gtk+\\gdk-types.defs ext\\gtk+\\gtk.defs &gt; ext\\gtk+\\gen_gtk.c");
&gt; - temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_atk.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_atk.h');
&gt; - temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_pango.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_pango.h');
&gt; - temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gdk.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gdk.h');
&gt; - temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gtk.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gtk.h');
&gt; - return;
&gt; -}
&gt; -
&gt; function Module_Item(module_name, config_path, dir_line, content) {
&gt;
&gt;  this.module_name = module_name;
&gt; @@ -165,8 +149,6 @@
&gt;  }
&gt; }
&gt;
&gt; -gen_functions();
&gt; -
&gt; // Write the head of the configure script
&gt; C.WriteLine("/* This file is automatically generated from 
&gt; win32/confutils.js */");
&gt; C.Write(file_get_contents("win32/confutils.js"));
&gt; Index: config.w32.in
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/config.w32.in,v
&gt; retrieving revision 1.12
&gt; diff -u -r1.12 config.w32.in
&gt; --- config.w32.in 17 Jun 2006 14:47:08 -0000 1.12
&gt; +++ config.w32.in 26 Jan 2007 18:55:53 -0000
&gt; @@ -46,6 +46,53 @@
&gt; ARG_WITH('php-build', 'Path to where you extracted 
&gt; http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of 
&gt; this source dir (..\\php_build) if not specified', 'no');
&gt; ARG_WITH('cygwin', 'Path to cygwin utilities on your system', '\\cygwin');
&gt;
&gt; +ARG_ENABLE('libversion', 'gtk library version you wish to build against, 
&gt; overrides automatically detected version', '2.6');
&gt; +/* pick up the version from gtk/gtkversion.h */
&gt; +
&gt; +STDOUT.Write("Checking for gtk\\gtkversion.h ... ");
&gt; +
&gt; +function get_gtk_libversion(requested)
&gt; +{
&gt; + var env, i, file, found, vin, major, minor;
&gt; +
&gt; + env = WshShell.Environment("Process").Item('INCLUDE');
&gt; + env = env.split(";");
&gt; + for (i = 0; i &lt; env.length; i++) {
&gt; + file = glob(env[i] + "\\gtk\\gtkversion.h");
&gt; + if (file) {
&gt; + found = true;
&gt; + break;
&gt; + }
&gt; + }
&gt; +
&gt; + if (found == true) {
&gt; + STDOUT.WriteLine(" &lt;in default path&gt;");
&gt; + } else {
&gt; + STDOUT.WriteLine(" &lt;not found&gt;");
&gt; + }
&gt; +
&gt; + vin = file_get_contents(file);
&gt; +
&gt; + regex = new RegExp("GTK_MAJOR_VERSION\\s+\\(([0-9]+)\\)");
&gt; + regex.exec(vin);
&gt; + major = RegExp.$1;
&gt; +
&gt; + regex = new RegExp("GTK_MINOR_VERSION\\s+\\(([0-9]+)\\)");
&gt; + regex.exec(vin);
&gt; + minor = RegExp.$1;
&gt; +
&gt; + max = major + '.' + minor;
&gt; +
&gt; + if (!PHP_GTK_LIBVERSION.length || PHP_GTK_LIBVERSION &gt; max)
&gt; + {
&gt; + PHP_GTK_LIBVERSION = max;
&gt; + }
&gt; +
&gt; + STDOUT.Write("Library definitions for " + PHP_GTK_LIBVERSION + " will be 
&gt; used");
&gt; + STDERR.WriteBlankLines(1);
&gt; +}
&gt; +get_gtk_version(PHP_GTK_LIBVERSION);
&gt; +
&gt; // stick objects somewhere outside of the source tree
&gt; ARG_ENABLE('object-out-dir', 'Alternative location for binary objects 
&gt; during build', '');
&gt; if (PHP_GTK_OBJECT_OUT_DIR.length) {
&gt; Index: confutils.js
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/confutils.js,v
&gt; retrieving revision 1.19
&gt; diff -u -r1.19 confutils.js
&gt; --- confutils.js 17 Jul 2006 17:00:09 -0000 1.19
&gt; +++ confutils.js 26 Jan 2007 18:54:02 -0000
&gt; @@ -302,9 +302,6 @@
&gt;  }
&gt;  WScript.Quit(1);
&gt;
&gt; - } else { // not --help
&gt; -
&gt; - generate_source();
&gt;  }
&gt;
&gt;  // Now set any defaults we might have missed out earlier
&gt; @@ -937,6 +934,7 @@
&gt;  FSO.CreateFolder(bd);
&gt;  }
&gt;  }
&gt; + generate_source();
&gt;
&gt;  STDOUT.WriteLine("Generating source files - this may take a few 
&gt; seconds");
&gt;  WScript.Sleep(3500);
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070126191443</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-01-26 19:14:43-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: Patch for generator - allow compiling againstmultiple</subject><body>

That'll teach me to send without testing...sorry, I cut and pasted 
wrong, this is the correct version of the win32.patch

["win32.patch" (text/plain)]

Index: config.w32.in
===================================================================
RCS file: /repository/php-gtk/win32/config.w32.in,v
retrieving revision 1.12
diff -u -r1.12 config.w32.in
--- config.w32.in	17 Jun 2006 14:47:08 -0000	1.12
+++ config.w32.in	26 Jan 2007 18:26:13 -0000
@@ -14,6 +14,9 @@
 PATH_PROG('link', WshShell.Environment("Process").Item("PATH"), "LD");
 PATH_PROG('nmake');
 
+// Try locating manifest tool
+PATH_PROG('mt', WshShell.Environment("Process").Item("PATH"), "MT");
+
 // we don't want to define LIB, as that will override the default library path set \
in that env var  PATH_PROG('lib', null, 'MAKE_LIB');
 PATH_PROG('php');
@@ -56,6 +59,10 @@
 }
 
 ARG_ENABLE('debug', 'Compile with debugging symbols', "no");
+ARG_ENABLE('debug-pack', 'Release binaries with external debug symbols \
(--enable-debug must not be specified)', 'no'); +if (PHP_GTK_DEBUG == "yes" &amp;&amp; \
PHP_GTK_DEBUG_PACK == "yes") { +	ERROR("Use of both --enable-debug and \
--enable-debug-pack not allowed."); +}
 
 // Set some debug-specific options
 if (PHP_GTK_DEBUG == "yes") {
@@ -85,7 +92,12 @@
 	ADD_FLAG("LDFLAGS", "/debug");
 
 } else {
-	DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main /I \
..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I ..\\php5\\TSRM /D \
ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D NDEBUG /D _WINDOWS /D \
_MBCS /D _USRDLL"); +	DEFINE("CFLAGS", "/nologo /MD /W3 /Ox /I . /I ..\\ /I ..\\.. /I \
main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I \
..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D NDEBUG \
/D _WINDOWS /D _MBCS /D _USRDLL"); +	// Generate external debug files when \
--enable-debug-pack is specified +	if (PHP_GTK_DEBUG_PACK == "yes") {
+		ADD_FLAG("CFLAGS", "/Zi");
+		ADD_FLAG("LDFLAGS", "/incremental:no /debug /opt:ref,icf");
+	}
 }
 
 if (VCVERS &lt; 14) {
@@ -96,7 +108,16 @@
 if (VCVERS &gt;= 14) {
 	// fun stuff: MS deprecated ANSI stdio and similar functions - disable warnings
 	// GS hardens the binary against buffer overruns
-	ADD_FLAG('CFLAGS', '/GS /wd4996 ');
+	ADD_FLAG('CFLAGS', '/EHsc /GS /wd4996 ');
+	if (PHP_GTK_DEBUG == "yes")
+	{
+		// Set some debug/release specific options
+		ADD_FLAG('CFLAGS', ' /RTC1 ');
+	}
+}
+else
+{
+	ADD_FLAG('CFLAGS', '/GX');
 }
 
 if (PHP_GTK_PHP_BUILD == 'no') {
Index: confutils.js
===================================================================
RCS file: /repository/php-gtk/win32/confutils.js,v
retrieving revision 1.19
diff -u -r1.19 confutils.js
--- confutils.js	17 Jul 2006 17:00:09 -0000	1.19
+++ confutils.js	26 Jan 2007 18:19:15 -0000
@@ -668,6 +668,7 @@
 
 	MFO.WriteLine("$(BUILD_DIR)\\" + dllname + ": $(" + EXT + "_GLOBAL_OBJS)" + \
res_var);  MFO.WriteLine("\t" + ld + " /out:$(BUILD_DIR)\\" + dllname + " $(" + EXT + \
"_LDFLAGS)" + dllflags + " $(LDFLAGS) $(" + EXT + "_GLOBAL_OBJS) $(LIBS_" + EXT + ")" \
+ dep_libs + " $(LIBS)" + res_var); +	MFO.WriteLine("\t-@$(_VC_MANIFEST_EMBED_DLL)");
 
 	MFO.WriteBlankLines(1);
 	MFO.WriteLine(dllname + ": $(BUILD_DIR)\\" + dllname);
@@ -968,6 +969,16 @@
 		MF.WriteLine(keys[i] + "=" + configure_subst.Item(keys[i]) + " ");
 	}
 
+	MF.WriteLine("!if $(MT) == \"\"");
+	MF.WriteBlankLines(1);
+	MF.WriteLine("_VC_MANIFEST_EMBED_DLL=");
+	MF.WriteBlankLines(1);
+	MF.WriteLine("!else");
+	MF.WriteBlankLines(1);
+	MF.WriteLine("_VC_MANIFEST_EMBED_DLL= $(MT) -nologo -manifest $@.manifest \
-outputresource:$@;2"); +	MF.WriteBlankLines(1);
+	MF.WriteLine("!endif");
+
 	MF.WriteBlankLines(1);
 	MF.WriteLine("all: $(EXT_TARGETS)");
 



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070126191609</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-01-26 19:16:09-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: Patch for generator - allow compiling againstmultiple</subject><body>

AGH - I did it again...just smack me someone- another cut and paste 
error, here's the correct version for the --enable-libversion patch...

["win32.patch" (text/plain)]

Index: buildconf.js
===================================================================
RCS file: /repository/php-gtk/win32/buildconf.js,v
retrieving revision 1.7
diff -u -r1.7 buildconf.js
--- buildconf.js	31 Oct 2005 11:44:42 -0000	1.7
+++ buildconf.js	25 Jan 2007 23:42:22 -0000
@@ -43,22 +43,6 @@
 	return t;
 }
 
-function gen_functions() {
-
-	/* generate source and header files for exported PHP-GTK functions */
-	temp.WriteLine("/* usage: php generator.php [-l logfile] [-o overridesfile] [-p \
                prefix] [-c functionclass ] [-r typesfile] [-f savefile] defsfile \
                */");
-	temp.WriteLine("mkdir win32\\logs");
-	temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_atk.log -o \
                ext\\gtk+\\atk.overrides -p atk ext\\gtk+\\atk.defs &gt; \
                ext\\gtk+\\gen_atk.c");
-	temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_pango.log -o \
                ext\\gtk+\\pango.overrides -p pango ext\\gtk+\\pango.defs &gt; \
                ext\\gtk+\\gen_pango.c");
-	temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_gdk.log -o \
ext\\gtk+\\gdk.overrides -p gdk -r ext\\gtk+\\atk-types.defs -r \
                ext\\gtk+\\pango-types.defs ext\\gtk+\\gdk.defs &gt; \
                ext\\gtk+\\gen_gdk.c");
-	temp.WriteLine("php -q generator\\generator.php -l win32\\logs\\config_gtk.log -o \
ext\\gtk+\\gtk.overrides -p gtk -r ext\\gtk+\\atk-types.defs -r \
ext\\gtk+\\pango-types.defs -r ext\\gtk+\\gdk-types.defs ext\\gtk+\\gtk.defs &gt; \
                ext\\gtk+\\gen_gtk.c");
-	temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_atk.c | sed -e \
                "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_atk.h');
-	temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_pango.c | sed -e \
                "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_pango.h');
-	temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gdk.c | sed -e \
                "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gdk.h');
-	temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gtk.c | sed -e \
                "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gtk.h');
-	return;
-}
-
 function Module_Item(module_name, config_path, dir_line, content) {
 
 	this.module_name = module_name;
@@ -165,8 +149,6 @@
 	}
 }
 
-gen_functions();
-
 // Write the head of the configure script
 C.WriteLine("/* This file is automatically generated from win32/confutils.js */");
 C.Write(file_get_contents("win32/confutils.js"));
Index: config.w32.in
===================================================================
RCS file: /repository/php-gtk/win32/config.w32.in,v
retrieving revision 1.12
diff -u -r1.12 config.w32.in
--- config.w32.in	17 Jun 2006 14:47:08 -0000	1.12
+++ config.w32.in	26 Jan 2007 18:55:53 -0000
@@ -46,6 +46,53 @@
 ARG_WITH('php-build', 'Path to where you extracted \
http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of this source \
dir (..\\php_build) if not specified', 'no');  ARG_WITH('cygwin', 'Path to cygwin \
utilities on your system', '\\cygwin');  
+ARG_ENABLE('libversion', 'gtk library version you wish to build against, overrides \
automatically detected version', '2.6'); +/* pick up the version from \
gtk/gtkversion.h */ +
+STDOUT.Write("Checking for gtk\\gtkversion.h ... ");
+
+function get_gtk_libversion(requested)
+{
+	var env, i, file, found, vin, major, minor;
+
+	env = WshShell.Environment("Process").Item('INCLUDE');
+	env = env.split(";");
+	for (i = 0; i &lt; env.length; i++) {
+		file = glob(env[i] + "\\gtk\\gtkversion.h");
+		if (file) {
+			found = true;
+			break;
+		}
+	}
+
+	if (found == true) {
+		STDOUT.WriteLine("	&lt;in default path&gt;");
+	} else {
+		STDOUT.WriteLine("	&lt;not found&gt;");
+	}
+
+	vin = file_get_contents(file);
+
+	regex = new RegExp("GTK_MAJOR_VERSION\\s+\\(([0-9]+)\\)");
+	regex.exec(vin);
+	major = RegExp.$1;
+
+	regex = new RegExp("GTK_MINOR_VERSION\\s+\\(([0-9]+)\\)");
+	regex.exec(vin);
+	minor = RegExp.$1;
+
+	max = major + '.' + minor;
+
+	if (!PHP_GTK_LIBVERSION.length || PHP_GTK_LIBVERSION &gt; max)
+	{
+		PHP_GTK_LIBVERSION = max;
+	}
+
+	STDOUT.Write("Library definitions for " + PHP_GTK_LIBVERSION + " will be used");
+	STDERR.WriteBlankLines(1);
+}
+get_gtk_libversion(PHP_GTK_LIBVERSION);
+
 // stick objects somewhere outside of the source tree
 ARG_ENABLE('object-out-dir', 'Alternative location for binary objects during build', \
'');  if (PHP_GTK_OBJECT_OUT_DIR.length) {
Index: confutils.js
===================================================================
RCS file: /repository/php-gtk/win32/confutils.js,v
retrieving revision 1.19
diff -u -r1.19 confutils.js
--- confutils.js	17 Jul 2006 17:00:09 -0000	1.19
+++ confutils.js	26 Jan 2007 18:54:02 -0000
@@ -302,9 +302,6 @@
 		}
 		WScript.Quit(1);
 
-	} else { // not --help
-
-		generate_source();
 	}
 
 	// Now set any defaults we might have missed out earlier
@@ -937,6 +934,7 @@
 			FSO.CreateFolder(bd);
 		}
 	}
+	generate_source();
 
 	STDOUT.WriteLine("Generating source files - this may take a few seconds");
 	WScript.Sleep(3500);



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070126191849</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-26 19:18:49-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: Patch for generator - allow compiling againstmultiple gtk versions</subject><body>

:)

We all do it, no worries. Thanks for testing!


&gt; AGH - I did it again...just smack me someone- another cut and paste
&gt; error, here's the correct version for the --enable-libversion patch...
&gt;


--------------------------------------------------------------------------------


&gt; Index: buildconf.js
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/buildconf.js,v
&gt; retrieving revision 1.7
&gt; diff -u -r1.7 buildconf.js
&gt; --- buildconf.js 31 Oct 2005 11:44:42 -0000 1.7
&gt; +++ buildconf.js 25 Jan 2007 23:42:22 -0000
&gt; @@ -43,22 +43,6 @@
&gt;  return t;
&gt; }
&gt;
&gt; -function gen_functions() {
&gt; -
&gt; - /* generate source and header files for exported PHP-GTK functions */
&gt; - temp.WriteLine("/* usage: php generator.php [-l logfile] [-o 
&gt; overridesfile] [-p prefix] [-c functionclass ] [-r typesfile] [-f 
&gt; savefile] defsfile */");
&gt; - temp.WriteLine("mkdir win32\\logs");
&gt; - temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_atk.log -o ext\\gtk+\\atk.overrides -p atk 
&gt; ext\\gtk+\\atk.defs &gt; ext\\gtk+\\gen_atk.c");
&gt; - temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_pango.log -o ext\\gtk+\\pango.overrides -p pango 
&gt; ext\\gtk+\\pango.defs &gt; ext\\gtk+\\gen_pango.c");
&gt; - temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_gdk.log -o ext\\gtk+\\gdk.overrides -p gdk -r 
&gt; ext\\gtk+\\atk-types.defs -r ext\\gtk+\\pango-types.defs 
&gt; ext\\gtk+\\gdk.defs &gt; ext\\gtk+\\gen_gdk.c");
&gt; - temp.WriteLine("php -q generator\\generator.php -l 
&gt; win32\\logs\\config_gtk.log -o ext\\gtk+\\gtk.overrides -p gtk -r 
&gt; ext\\gtk+\\atk-types.defs -r ext\\gtk+\\pango-types.defs -r 
&gt; ext\\gtk+\\gdk-types.defs ext\\gtk+\\gtk.defs &gt; ext\\gtk+\\gen_gtk.c");
&gt; - temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_atk.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_atk.h');
&gt; - temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_pango.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_pango.h');
&gt; - temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gdk.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gdk.h');
&gt; - temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gtk.c | 
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gtk.h');
&gt; - return;
&gt; -}
&gt; -
&gt; function Module_Item(module_name, config_path, dir_line, content) {
&gt;
&gt;  this.module_name = module_name;
&gt; @@ -165,8 +149,6 @@
&gt;  }
&gt; }
&gt;
&gt; -gen_functions();
&gt; -
&gt; // Write the head of the configure script
&gt; C.WriteLine("/* This file is automatically generated from 
&gt; win32/confutils.js */");
&gt; C.Write(file_get_contents("win32/confutils.js"));
&gt; Index: config.w32.in
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/config.w32.in,v
&gt; retrieving revision 1.12
&gt; diff -u -r1.12 config.w32.in
&gt; --- config.w32.in 17 Jun 2006 14:47:08 -0000 1.12
&gt; +++ config.w32.in 26 Jan 2007 18:55:53 -0000
&gt; @@ -46,6 +46,53 @@
&gt; ARG_WITH('php-build', 'Path to where you extracted 
&gt; http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of 
&gt; this source dir (..\\php_build) if not specified', 'no');
&gt; ARG_WITH('cygwin', 'Path to cygwin utilities on your system', '\\cygwin');
&gt;
&gt; +ARG_ENABLE('libversion', 'gtk library version you wish to build against, 
&gt; overrides automatically detected version', '2.6');
&gt; +/* pick up the version from gtk/gtkversion.h */
&gt; +
&gt; +STDOUT.Write("Checking for gtk\\gtkversion.h ... ");
&gt; +
&gt; +function get_gtk_libversion(requested)
&gt; +{
&gt; + var env, i, file, found, vin, major, minor;
&gt; +
&gt; + env = WshShell.Environment("Process").Item('INCLUDE');
&gt; + env = env.split(";");
&gt; + for (i = 0; i &lt; env.length; i++) {
&gt; + file = glob(env[i] + "\\gtk\\gtkversion.h");
&gt; + if (file) {
&gt; + found = true;
&gt; + break;
&gt; + }
&gt; + }
&gt; +
&gt; + if (found == true) {
&gt; + STDOUT.WriteLine(" &lt;in default path&gt;");
&gt; + } else {
&gt; + STDOUT.WriteLine(" &lt;not found&gt;");
&gt; + }
&gt; +
&gt; + vin = file_get_contents(file);
&gt; +
&gt; + regex = new RegExp("GTK_MAJOR_VERSION\\s+\\(([0-9]+)\\)");
&gt; + regex.exec(vin);
&gt; + major = RegExp.$1;
&gt; +
&gt; + regex = new RegExp("GTK_MINOR_VERSION\\s+\\(([0-9]+)\\)");
&gt; + regex.exec(vin);
&gt; + minor = RegExp.$1;
&gt; +
&gt; + max = major + '.' + minor;
&gt; +
&gt; + if (!PHP_GTK_LIBVERSION.length || PHP_GTK_LIBVERSION &gt; max)
&gt; + {
&gt; + PHP_GTK_LIBVERSION = max;
&gt; + }
&gt; +
&gt; + STDOUT.Write("Library definitions for " + PHP_GTK_LIBVERSION + " will be 
&gt; used");
&gt; + STDERR.WriteBlankLines(1);
&gt; +}
&gt; +get_gtk_libversion(PHP_GTK_LIBVERSION);
&gt; +
&gt; // stick objects somewhere outside of the source tree
&gt; ARG_ENABLE('object-out-dir', 'Alternative location for binary objects 
&gt; during build', '');
&gt; if (PHP_GTK_OBJECT_OUT_DIR.length) {
&gt; Index: confutils.js
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/confutils.js,v
&gt; retrieving revision 1.19
&gt; diff -u -r1.19 confutils.js
&gt; --- confutils.js 17 Jul 2006 17:00:09 -0000 1.19
&gt; +++ confutils.js 26 Jan 2007 18:54:02 -0000
&gt; @@ -302,9 +302,6 @@
&gt;  }
&gt;  WScript.Quit(1);
&gt;
&gt; - } else { // not --help
&gt; -
&gt; - generate_source();
&gt;  }
&gt;
&gt;  // Now set any defaults we might have missed out earlier
&gt; @@ -937,6 +934,7 @@
&gt;  FSO.CreateFolder(bd);
&gt;  }
&gt;  }
&gt; + generate_source();
&gt;
&gt;  STDOUT.WriteLine("Generating source files - this may take a few 
&gt; seconds");
&gt;  WScript.Sleep(3500);
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070127091247</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-27 09:12:47-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: Patch for generator - allow compiling against multiple gtk versions</subject><body>

OK, I did some research now:

Cairo (introduced in GTK+ 2.8) has no Windows 98/ME/NT4 support. Effectively 
this means we're stuck with the last of the 2.6 series for the win98 build, 
which isn't so cool - I'm 99% certain the filechooser API wasn't ever fixed 
in 2.6, for example.

We could of course try building for win98 against GTK 2.8 libs/headers and 
ask Madeleine to test - it's not clear to me how much Cairo is used 
internally in 2.8.*. Or we could just assume the Gimp pages are correct in 
their assessment of Windows platforms vs GTK versions 
(http://gimp-win.sourceforge.net/stable.html) and not waste her time.

Another little snippet is from Tor's site 
(http://www.gimp.org/~tml/gimp/win32/downloads.html) where he states that 
his distributed development DLLs use the MSCVRT runtime: "Specifically, this 
means that you should not use newer versions of the Microsoft compiler than 
Visual C 6 without knowing exactly what you are doing." (He also mentions 
GTK+ 2.8 vs Win98, so Madeleine's off the hook!) According to dependency 
walker, the DLLs in the libglade dev pack and on the GTK FTP homepage are 
also both built with VC6, even for the 2.10 series. This obviously affects 
the hoped-for shift to V8 for XP distros, but it's good news for the win98 
crowd. Kind of.

Win98/ME/NT4 will need VC6, PHP version 5.2.0 and GTK version 2.6.10 - that 
means the *only* changing element for them will be the PHP-GTK source as it 
matures. Actual releases will consist of the updated php-gtk2.dll and any 
php-gtk extensions that will work within those constraints, and there's 
absolutely no reason to make those users download everything else every 
time. It might be okay to use later PHP extensions (see Frank's earlier 
note) but I'm very much inclined to say 'just make do with this until you 
can upgrade your OS or move to *nix', because there's no reason to expect 
win32 API usage in extensions to remain portable now, and we don't have a 
good way to monitor that shift.

Thoughts?

- Steph


----- Original Message ----- 
From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
To: &lt;php-gtk-dev@lists.php.net&gt;
Sent: Friday, January 26, 2007 3:21 AM
Subject: [PHP-GTK-DEV] Re: Patch for generator - allow compiling against
multiple gtk versions


&gt;&gt; Using this with the current build system will require some patching of
&gt;&gt; the configure files so -v 2.6 or whatever is passed to the generator.php
&gt;&gt; file.  The configure files will also need to do gtk version
&gt;&gt; autodetection and allow the user to specify a version.  Anant said he'd
&gt;&gt; manage the ./configure stuff for normal build systems and I'm almost
&gt;&gt; finished with the fixes to the MSVC build system to allow this to work
&gt;&gt; (I had some additional enhancements for the windows build system,
&gt;&gt; including dealing with unknown/deprecated compile flags in msvc 2005 and
&gt;&gt; adding --enable-debug-pack so I'll send it all in one shot). If no
&gt;&gt; version is passed to the generator, 2.6 is always assumed.
&gt;&gt;
&gt;
&gt; Here are patches for the windows build system - this moves the source
&gt; file building stuff out of the buildconf.js and into the configwin32
&gt; like the extensions.  It also fixes deprecated compile flags on MSVC
&gt; 2005, adds --enable-debug-pack to the release compile, adds manifest
&gt; packing for newer msvc compilers, and checks the gtk lib version while
&gt; allowing a command line override.
&gt;
&gt; Thanks,
&gt; Elizabeth Smith
&gt;


--------------------------------------------------------------------------------


&gt; Index: buildconf.js
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/buildconf.js,v
&gt; retrieving revision 1.7
&gt; diff -u -r1.7 buildconf.js
&gt; --- buildconf.js 31 Oct 2005 11:44:42 -0000 1.7
&gt; +++ buildconf.js 25 Jan 2007 23:42:22 -0000
&gt; @@ -43,22 +43,6 @@
&gt;  return t;
&gt; }
&gt;
&gt; -function gen_functions() {
&gt; -
&gt; - /* generate source and header files for exported PHP-GTK functions */
&gt; - temp.WriteLine("/* usage: php generator.php [-l logfile] [-o
&gt; overridesfile] [-p prefix] [-c functionclass ] [-r typesfile] [-f
&gt; savefile] defsfile */");
&gt; - temp.WriteLine("mkdir win32\\logs");
&gt; - temp.WriteLine("php -q generator\\generator.php -l
&gt; win32\\logs\\config_atk.log -o ext\\gtk+\\atk.overrides -p atk
&gt; ext\\gtk+\\atk.defs &gt; ext\\gtk+\\gen_atk.c");
&gt; - temp.WriteLine("php -q generator\\generator.php -l
&gt; win32\\logs\\config_pango.log -o ext\\gtk+\\pango.overrides -p pango
&gt; ext\\gtk+\\pango.defs &gt; ext\\gtk+\\gen_pango.c");
&gt; - temp.WriteLine("php -q generator\\generator.php -l
&gt; win32\\logs\\config_gdk.log -o ext\\gtk+\\gdk.overrides -p gdk -r
&gt; ext\\gtk+\\atk-types.defs -r ext\\gtk+\\pango-types.defs
&gt; ext\\gtk+\\gdk.defs &gt; ext\\gtk+\\gen_gdk.c");
&gt; - temp.WriteLine("php -q generator\\generator.php -l
&gt; win32\\logs\\config_gtk.log -o ext\\gtk+\\gtk.overrides -p gtk -r
&gt; ext\\gtk+\\atk-types.defs -r ext\\gtk+\\pango-types.defs -r
&gt; ext\\gtk+\\gdk-types.defs ext\\gtk+\\gtk.defs &gt; ext\\gtk+\\gen_gtk.c");
&gt; - temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_atk.c |
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_atk.h');
&gt; - temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_pango.c |
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_pango.h');
&gt; - temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gdk.c |
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gdk.h');
&gt; - temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gtk.c |
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gtk.h');
&gt; - return;
&gt; -}
&gt; -
&gt; function Module_Item(module_name, config_path, dir_line, content) {
&gt;
&gt;  this.module_name = module_name;
&gt; @@ -165,8 +149,6 @@
&gt;  }
&gt; }
&gt;
&gt; -gen_functions();
&gt; -
&gt; // Write the head of the configure script
&gt; C.WriteLine("/* This file is automatically generated from
&gt; win32/confutils.js */");
&gt; C.Write(file_get_contents("win32/confutils.js"));
&gt; Index: config.w32.in
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/config.w32.in,v
&gt; retrieving revision 1.12
&gt; diff -u -r1.12 config.w32.in
&gt; --- config.w32.in 17 Jun 2006 14:47:08 -0000 1.12
&gt; +++ config.w32.in 26 Jan 2007 00:29:31 -0000
&gt; @@ -14,6 +14,9 @@
&gt; PATH_PROG('link', WshShell.Environment("Process").Item("PATH"), "LD");
&gt; PATH_PROG('nmake');
&gt;
&gt; +// Try locating manifest tool
&gt; +PATH_PROG('mt', WshShell.Environment("Process").Item("PATH"), "MT");
&gt; +
&gt; // we don't want to define LIB, as that will override the default library
&gt; path set in that env var
&gt; PATH_PROG('lib', null, 'MAKE_LIB');
&gt; PATH_PROG('php');
&gt; @@ -46,6 +49,53 @@
&gt; ARG_WITH('php-build', 'Path to where you extracted
&gt; http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of
&gt; this source dir (..\\php_build) if not specified', 'no');
&gt; ARG_WITH('cygwin', 'Path to cygwin utilities on your system', '\\cygwin');
&gt;
&gt; +ARG_ENABLE('version', 'gtk library version you wish to build against,
&gt; overrides automatically detected version', '2.6');
&gt; +/* pick up the version from gtk/gtkversion.h */
&gt; +
&gt; +STDOUT.Write("Checking for gtk\\gtkversion.h ... ");
&gt; +
&gt; +function get_gtk_version(requested)
&gt; +{
&gt; + var env, i, file, found, vin, major, minor;
&gt; +
&gt; + env = WshShell.Environment("Process").Item('INCLUDE');
&gt; + env = env.split(";");
&gt; + for (i = 0; i &lt; env.length; i++) {
&gt; + file = glob(env[i] + "\\gtk\\gtkversion.h");
&gt; + if (file) {
&gt; + found = true;
&gt; + break;
&gt; + }
&gt; + }
&gt; +
&gt; + if (found == true) {
&gt; + STDOUT.WriteLine(" &lt;in default path&gt;");
&gt; + } else {
&gt; + STDOUT.WriteLine(" &lt;not found&gt;");
&gt; + }
&gt; +
&gt; + vin = file_get_contents(file);
&gt; +
&gt; + regex = new RegExp("GTK_MAJOR_VERSION\\s+\\(([0-9]+)\\)");
&gt; + regex.exec(vin);
&gt; + major = RegExp.$1;
&gt; +
&gt; + regex = new RegExp("GTK_MINOR_VERSION\\s+\\(([0-9]+)\\)");
&gt; + regex.exec(vin);
&gt; + minor = RegExp.$1;
&gt; +
&gt; + max = major + '.' + minor;
&gt; +
&gt; + if (!PHP_GTK_VERSION.length || PHP_GTK_VERSION &gt; max)
&gt; + {
&gt; + PHP_GTK_VERSION = max;
&gt; + }
&gt; +
&gt; + STDOUT.Write("Library definitions for " + PHP_GTK_VERSION + " will be
&gt; used");
&gt; + STDERR.WriteBlankLines(1);
&gt; +}
&gt; +get_gtk_version(PHP_GTK_VERSION);
&gt; +
&gt; // stick objects somewhere outside of the source tree
&gt; ARG_ENABLE('object-out-dir', 'Alternative location for binary objects
&gt; during build', '');
&gt; if (PHP_GTK_OBJECT_OUT_DIR.length) {
&gt; @@ -56,6 +106,10 @@
&gt; }
&gt;
&gt; ARG_ENABLE('debug', 'Compile with debugging symbols', "no");
&gt; +ARG_ENABLE('debug-pack', 'Release binaries with external debug symbols
&gt; (--enable-debug must not be specified)', 'no');
&gt; +if (PHP_GTK_DEBUG == "yes" &amp;&amp; PHP_GTK_DEBUG_PACK == "yes") {
&gt; + ERROR("Use of both --enable-debug and --enable-debug-pack not
&gt; allowed.");
&gt; +}
&gt;
&gt; // Set some debug-specific options
&gt; if (PHP_GTK_DEBUG == "yes") {
&gt; @@ -76,16 +130,24 @@
&gt; DEFINE("DLL_LDFLAGS", "/dll /machine:I386");
&gt; // PHP-GTK DLL link flags
&gt; DEFINE("PHP_GTK_LDFLAGS", "$(DLL_LDFLAGS)");
&gt; +// PHP-GTK compiler flags
&gt; +DEFINE("CFLAGS", "/nologo");
&gt;
&gt; // General libs
&gt; DEFINE("LIBS", "kernel32.lib user32.lib gdi32.lib winspool.lib
&gt; comdlg32.lib advapi32.lib shell32.lib ole32.lib");
&gt;
&gt; if (PHP_GTK_DEBUG == "yes") {
&gt; - DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\..
&gt; /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend
&gt; /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D
&gt; WIN32 /D _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; + ADD_FLAG("CFLAGS", "/LDd /MDd /Gm /ZI /Od /I . /I ..\\ /I ..\\.. /I main
&gt; /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D
&gt; WIN32 /D _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt;  ADD_FLAG("LDFLAGS", "/debug");
&gt;
&gt; } else {
&gt; - DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main
&gt; /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D
&gt; WIN32 /D NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; +      // Generate external debug files when --enable-debug-pack is
&gt; specified
&gt; + if (PHP_GTK_DEBUG_PACK == "yes") {
&gt; + ADD_FLAG("CFLAGS", "/Zi");
&gt; + ADD_FLAG("LDFLAGS", "/incremental:no /debug /opt:ref,icf");
&gt; + }
&gt; +      ADD_FLAG("CFLAGS", "/LD /MD /W3 /Ox /I . /I ..\\ /I ..\\.. /I main
&gt; /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I
&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D
&gt; WIN32 /D NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt; +
&gt; }
&gt;
&gt; if (VCVERS &lt; 14) {
&gt; @@ -96,7 +158,16 @@
&gt; if (VCVERS &gt;= 14) {
&gt;  // fun stuff: MS deprecated ANSI stdio and similar functions - disable
&gt; warnings
&gt;  // GS hardens the binary against buffer overruns
&gt; - ADD_FLAG('CFLAGS', '/GS /wd4996 ');
&gt; + ADD_FLAG('CFLAGS', '/EHsc /GS /wd4996 ');
&gt; + if (PHP_GTK_DEBUG == "yes")
&gt; + {
&gt; + // Set some debug/release specific options
&gt; + ADD_FLAG('CFLAGS', ' /RTC1 ');
&gt; + }
&gt; +}
&gt; +else
&gt; +{
&gt; + ADD_FLAG('CFLAGS', '/GX');
&gt; }
&gt;
&gt; if (PHP_GTK_PHP_BUILD == 'no') {
&gt; Index: confutils.js
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/win32/confutils.js,v
&gt; retrieving revision 1.19
&gt; diff -u -r1.19 confutils.js
&gt; --- confutils.js 17 Jul 2006 17:00:09 -0000 1.19
&gt; +++ confutils.js 26 Jan 2007 03:16:38 -0000
&gt; @@ -302,9 +302,6 @@
&gt;  }
&gt;  WScript.Quit(1);
&gt;
&gt; - } else { // not --help
&gt; -
&gt; - generate_source();
&gt;  }
&gt;
&gt;  // Now set any defaults we might have missed out earlier
&gt; @@ -668,6 +665,7 @@
&gt;
&gt;  MFO.WriteLine("$(BUILD_DIR)\\" + dllname + ": $(" + EXT + "_GLOBAL_OBJS)"
&gt; + res_var);
&gt;  MFO.WriteLine("\t" + ld + " /out:$(BUILD_DIR)\\" + dllname + " $(" + EXT
&gt; + "_LDFLAGS)" + dllflags + " $(LDFLAGS) $(" + EXT + "_GLOBAL_OBJS)
&gt; $(LIBS_" + EXT + ")" + dep_libs + " $(LIBS)" + res_var);
&gt; + MFO.WriteLine("\t-@$(_VC_MANIFEST_EMBED_DLL)");
&gt;
&gt;  MFO.WriteBlankLines(1);
&gt;  MFO.WriteLine(dllname + ": $(BUILD_DIR)\\" + dllname);
&gt; @@ -938,6 +936,7 @@
&gt;  }
&gt;  }
&gt;
&gt; + generate_source();
&gt;  STDOUT.WriteLine("Generating source files - this may take a few
&gt; seconds");
&gt;  WScript.Sleep(3500);
&gt;  check_generation();
&gt; @@ -968,6 +967,16 @@
&gt;  MF.WriteLine(keys[i] + "=" + configure_subst.Item(keys[i]) + " ");
&gt;  }
&gt;
&gt; + MF.WriteLine("!if $(MT) == \"\"");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("_VC_MANIFEST_EMBED_DLL=");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("!else");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("_VC_MANIFEST_EMBED_DLL= $(MT) -nologo -manifest
&gt; $@.manifest -outputresource:$@;2");
&gt; + MF.WriteBlankLines(1);
&gt; + MF.WriteLine("!endif");
&gt; +
&gt;  MF.WriteBlankLines(1);
&gt;  MF.WriteLine("all: $(EXT_TARGETS)");
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; Index: config.w32
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/ext/gtk+/config.w32,v
&gt; retrieving revision 1.5
&gt; diff -u -r1.5 config.w32
&gt; --- config.w32 24 Oct 2006 12:46:14 -0000 1.5
&gt; +++ config.w32 25 Jan 2007 23:59:50 -0000
&gt; @@ -11,11 +11,28 @@
&gt;  CHECK_HEADER("pango/pangowin32.h") &amp;&amp; CHECK_LIB("pangowin32-1.0.lib",
&gt; "php-gtk") &amp;&amp;
&gt;  CHECK_HEADER("gdk-pixbuf/gdk-pixbuf.h") &amp;&amp;
&gt; CHECK_LIB("gdk_pixbuf-2.0.lib", "php-gtk") &amp;&amp;
&gt;  CHECK_HEADER("gdk/gdk.h") &amp;&amp; CHECK_LIB("gdk-win32-2.0.lib", "php-gtk") &amp;&amp;
&gt; - CHECK_HEADER("gtk/gtk.h") &amp;&amp; CHECK_LIB("gtk-win32-2.0.lib", "php-gtk"))
&gt; {
&gt; + CHECK_HEADER("gtk/gtk.h") &amp;&amp; CHECK_LIB("gtk-win32-2.0.lib", "php-gtk"))
&gt; +{
&gt;
&gt;  ADD_FLAG("CFLAGS_PHP_GTK", "/I ext\\gtk+ /I ..\\ext\\gtk+ /D
&gt; HAVE_PHP_GTK=1");
&gt;
&gt;  EXTENSION("php-gtk", "gen_atk.c gen_gdk.c gen_gtk.c gen_pango.c php_gdk.c
&gt; php_gtk+.c php_gtk+_types.c phpg_custom_tree_model.c", true); // always
&gt; shared
&gt;
&gt;  AC_DEFINE("HAVE_PHP_GTK", 1, "PHP-GTK enabled");
&gt; +
&gt; + /* Create the file if it doesn't exist */
&gt; + var temp = FSO.OpenTextFile("win32\\temp.bat", 8);
&gt; + /* generate source and header files for exported PHP-GTK functions */
&gt; + temp.WriteLine("/* usage: php generator.php [-l logfile] [-o
&gt; overridesfile] [-p prefix] [-c functionclass ] [-r typesfile] [-f
&gt; savefile] defsfile */");
&gt; + temp.WriteLine("mkdir win32\\logs");
&gt; + temp.WriteLine("php -q generator\\generator.php -l
&gt; win32\\logs\\config_atk.log -o ext\\gtk+\\atk.overrides -p atk
&gt; ext\\gtk+\\atk.defs -v " + PHP_GTK_VERSION + " &gt; ext\\gtk+\\gen_atk.c");
&gt; + temp.WriteLine("php -q generator\\generator.php -l
&gt; win32\\logs\\config_pango.log -o ext\\gtk+\\pango.overrides -p pango
&gt; ext\\gtk+\\pango.defs -v " + PHP_GTK_VERSION + " &gt;
&gt; ext\\gtk+\\gen_pango.c");
&gt; + temp.WriteLine("php -q generator\\generator.php -l
&gt; win32\\logs\\config_gdk.log -o ext\\gtk+\\gdk.overrides -p gdk -r
&gt; ext\\gtk+\\atk-types.defs -v " + PHP_GTK_VERSION + " -r
&gt; ext\\gtk+\\pango-types.defs ext\\gtk+\\gdk.defs &gt; ext\\gtk+\\gen_gdk.c");
&gt; + temp.WriteLine("php -q generator\\generator.php -l
&gt; win32\\logs\\config_gtk.log -o ext\\gtk+\\gtk.overrides -p gtk -r
&gt; ext\\gtk+\\atk-types.defs -v " + PHP_GTK_VERSION + " -r
&gt; ext\\gtk+\\pango-types.defs -r ext\\gtk+\\gdk-types.defs
&gt; ext\\gtk+\\gtk.defs &gt; ext\\gtk+\\gen_gtk.c");
&gt; + temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_atk.c |
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_atk.h');
&gt; + temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_pango.c |
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_pango.h');
&gt; + temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gdk.c |
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gdk.h');
&gt; + temp.WriteLine('grep -h "^PHP_GTK_EXPORT_CE" ext\\gtk+\\gen_gtk.c |
&gt; sed -e "s/^/PHP_GTK_API extern /" &gt; ext\\gtk+\\gen_gtk.h');
&gt; + temp.Close();
&gt; +
&gt; }
&gt;
&gt;


--------------------------------------------------------------------------------


&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070127131434</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-01-27 13:14:34-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: Patch for generator - allow compiling against</subject><body>

Steph Fox wrote:
&gt; Another little snippet is from Tor's site 
&gt; (http://www.gimp.org/~tml/gimp/win32/downloads.html) where he states 
&gt; that his distributed development DLLs use the MSCVRT runtime: 
&gt; "Specifically, this means that you should not use newer versions of the 
&gt; Microsoft compiler than Visual C 6 without knowing exactly what you are 
&gt; doing." (He also mentions GTK+ 2.8 vs Win98, so Madeleine's off the 
&gt; hook!) According to dependency walker, the DLLs in the libglade dev pack 
&gt; and on the GTK FTP homepage are also both built with VC6, even for the 
&gt; 2.10 series. This obviously affects the hoped-for shift to V8 for XP 
&gt; distros, but it's good news for the win98 crowd. Kind of.

Actually, that's not entirely true.  The stuff that Tor provides (and is 
on the ftp server) isn't BUILT with MSVC at all (and at this point I 
can't get it to build with MSVC even though there are makefiles for 
it...although I HAVE managed to get most of the dependencies built with 
it...glib is being a pain - seems to be some bugs in the new stuff that 
still elude me... if someone with a little more C experience would give 
me a hand ;) ) - it's actually built with MinGW with a compile flag to 
make the binaries compatible with MSVC stuff.  But the headers are 
different, the runtime is hooked in using Anders Norlander w32api and 
not Microsoft's offical stuff.  So far this hasn't caused problems but 
at some point MinGW is planning on moving away from using Microsoft's 
MSCVRT runtime and using/distributing their own.  This becomes even more 
of a headache because PHP is NOT set up to compile with MinGW at all and 
doing so would mean a LOT of work.  The actual reason that Tor and Gtk 
moved away from MSVC to MinGW was licensing - the license for 
redistributing the MSVCRT7.1 and 8.0.dll's is a bit goofy.  So what does 
this mean?  At some point there will be runtime mixing unless PHP-Gtk2 
starts distributing their own gtk runtime compiled on MSVC or figures 
out how to compile php on MinGW.

&gt; Win98/ME/NT4 will need VC6, PHP version 5.2.0 and GTK version 2.6.10 - 
&gt; that means the *only* changing element for them will be the PHP-GTK 
&gt; source as it matures. Actual releases will consist of the updated 
&gt; php-gtk2.dll and any php-gtk extensions that will work within those 
&gt; constraints, and there's absolutely no reason to make those users 
&gt; download everything else every time. It might be okay to use later PHP 
&gt; extensions (see Frank's earlier note) but I'm very much inclined to say 
&gt; 'just make do with this until you can upgrade your OS or move to *nix', 
&gt; because there's no reason to expect win32 API usage in extensions to 
&gt; remain portable now, and we don't have a good way to monitor that shift.
&gt; 
&gt; Thoughts?
&gt; 
&gt; - Steph

I think that yes, if you keep support for the Win98/ME/NT4
  you'll need to leave them on the last supported php, the last 
supported gtk, and php-gtk2 with only 2.6 support built in (hence the 
generator patch).  But it would be nice for those on newer platforms to 
have newer stuff built with a newer runtime.

Thanks,
Elizabeth Smith

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070127162834</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-01-27 16:28:34-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: Patch for generator - allow compiling against multiple gtk versions</subject><body>

here's an improved version of the generator patch, I was treating 
versions as floats which of course made 2.10 turn into 2.1 - problem 
there...

This now treats versions as strings and uses version_compare - also the 
restore keyword in overrides wasn't working so I simply added the 
appropriate overrides to add gtkplug/socket stuff for 2.8 on windows

["generator.patch" (text/plain)]

Index: arg_types.php
===================================================================
RCS file: /repository/php-gtk/generator/arg_types.php,v
retrieving revision 1.84
diff -u -r1.84 arg_types.php
--- arg_types.php	24 Oct 2006 12:46:14 -0000	1.84
+++ arg_types.php	21 Jan 2007 05:39:25 -0000
@@ -1099,6 +1099,7 @@
 $matcher-&gt;register('glong', $arg);
 $matcher-&gt;register('gulong', $arg);
 $matcher-&gt;register('GdkNativeWindow', $arg);
+$matcher-&gt;register('time_t', $arg);
 
 $matcher-&gt;register('guint8', $arg);
 $matcher-&gt;register('gint8', $arg);
Index: generator.php
===================================================================
RCS file: /repository/php-gtk/generator/generator.php,v
retrieving revision 1.118
diff -u -r1.118 generator.php
--- generator.php	22 Jan 2007 14:27:32 -0000	1.118
+++ generator.php	27 Jan 2007 16:10:53 -0000
@@ -1406,23 +1406,24 @@
 }
 
  
-$result = Console_Getopt::getopt($argv, 'l:o:p:c:r:f:');
+$result = Console_Getopt::getopt($argv, 'l:o:p:c:r:f:v:');
 if (!$result || count($result[1]) &lt; 2)
-    die("usage: php generator.php [-l logfile] [-o overridesfile] [-p prefix] [-c \
functionclass ] [-r typesfile] [-f savefile] defsfile\n"); +    die("usage: php \
generator.php [-l logfile] [-o overridesfile] [-p prefix] [-c functionclass ] [-r \
typesfile] [-f savefile] [-v gtklibversion] defsfile\n");  
 list($opts, $argv) = $result;
 
 $prefix = 'Gtk';
 $function_class = null;
-$overrides = new Overrides();
+$overrides = null;
 $register_defs = array();
 $savefile = 'php://stdout';
 $logfile = 'php://stderr';
+$gtkversion = '2.6';
 
 foreach ($opts as $opt) {
     list($opt_spec, $opt_arg) = $opt;
     if ($opt_spec == 'o') {
-        $overrides = new Overrides($opt_arg);
+        $overrides = $opt_arg;
     } else if ($opt_spec == 'p') {
         $prefix = $opt_arg;
     } else if ($opt_spec == 'c') {
@@ -1433,18 +1434,20 @@
         $savefile = $opt_arg;
     } else if ($opt_spec == 'l') {
         $logfile = $opt_arg;
+    } else if ($opt_spec == 'v') {
+        $gtkversion = $opt_arg;
     }
 }
 
 if (file_exists(dirname($argv[1]) . '/arg_types.php')) {
     include(dirname($argv[1]) . '/arg_types.php');
 }
-
-$parser = new Defs_Parser($argv[1]);
+$overrides = new Overrides($overrides, $gtkversion);
+$parser = new Defs_Parser($argv[1], $gtkversion);
 $generator = new Generator($parser, $overrides, $prefix, $function_class);
 $generator-&gt;set_logfile($logfile);
 foreach ($register_defs as $defs) {
-    $type_parser = new Defs_Parser($defs);
+    $type_parser = new Defs_Parser($defs, $gtkversion);
     $type_parser-&gt;start_parsing();
     $generator-&gt;register_types($type_parser);
 }
Index: override.php
===================================================================
RCS file: /repository/php-gtk/generator/override.php,v
retrieving revision 1.32
diff -u -r1.32 override.php
--- override.php	27 Mar 2006 04:23:11 -0000	1.32
+++ override.php	27 Jan 2007 16:23:25 -0000
@@ -37,9 +37,15 @@
     var $post_registration    = array();
     var $lineinfo             = array();
     var $top_dir              = '';
+    var $gtkversion           = null; // gtk lib version
 
-    function Overrides($file_name = null)
+    function Overrides($file_name = null, $gtkversion = null)
     {
+        if (version_compare($gtkversion, '2.6', '&lt;'))
+        {
+            $gtkversion = '2.6';
+        }
+        $this-&gt;gtkversion = $gtkversion;
         if (!isset($file_name))
             return;
 
@@ -176,7 +182,11 @@
 
             case 'include':
                 $file_name = $words[0];
-                $this-&gt;read_file($file_name);
+                // check for gtk lib version
+                if (!isset($words[1]) || version_compare($words[1], \
$this-&gt;gtkversion, '&lt;=')) +                {
+                    $this-&gt;read_file($file_name);
+                }
                 foreach (preg_split(',\s+,', $rest, -1, PREG_SPLIT_NO_EMPTY) as \
$file_name) {  $this-&gt;read_file($file_name);
                 }
Index: scheme.php
===================================================================
RCS file: /repository/php-gtk/generator/scheme.php,v
retrieving revision 1.28
diff -u -r1.28 scheme.php
--- scheme.php	30 Mar 2005 18:34:09 -0000	1.28
+++ scheme.php	27 Jan 2007 16:20:19 -0000
@@ -110,9 +110,15 @@
     var $boxed          = array();  // boxed types
     var $pointers       = array();  // pointers
     var $c_name         = array();  // C names of entities
+    var $gtkversion     = null; // gtk lib version
 
-    function Defs_Parser($arg)
+    function Defs_Parser($arg, $gtkversion = 0)
     {
+        if (version_compare($gtkversion, '2.6', '&lt;'))
+        {
+            $gtkversion = '2.6';
+        }
+        $this-&gt;gtkversion = $gtkversion;
         switch (gettype($arg)) {
             case 'string':
                 $this-&gt;_parse_or_load($arg);
@@ -415,9 +421,17 @@
     function handle_include($arg)
     {
         $include_file = $this-&gt;file_path . "/" . $arg[0];
-        error_log("Parsing file \"$include_file\".");
-        $include_tree = parse($include_file, 'r');
-        $this-&gt;start_parsing($include_tree);
+        // check for gtk lib version
+        if (isset($arg[1]) &amp;&amp; version_compare($arg[1], $this-&gt;gtkversion, '&lt;='))
+        {
+            error_log("Ignoring \"$include_file\". - needs version {$arg[1]}");
+        }
+        else
+        {
+            error_log("Parsing file \"$include_file\".");
+            $include_tree = parse($include_file, 'r');
+            $this-&gt;start_parsing($include_tree);
+        }
     }
 
     function handle_define_virtual($arg)



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070127162849</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-27 16:28:49-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: Patch for generator - allow compiling against multiple gtk versions</subject><body>

&gt; Steph Fox wrote:
&gt;&gt; Another little snippet is from Tor's site 
&gt;&gt; (http://www.gimp.org/~tml/gimp/win32/downloads.html) where he states that 
&gt;&gt; his distributed development DLLs use the MSCVRT runtime: "Specifically, 
&gt;&gt; this means that you should not use newer versions of the Microsoft 
&gt;&gt; compiler than Visual C 6 without knowing exactly what you are doing." (He 
&gt;&gt; also mentions GTK+ 2.8 vs Win98, so Madeleine's off the hook!) According 
&gt;&gt; to dependency walker, the DLLs in the libglade dev pack and on the GTK 
&gt;&gt; FTP homepage are also both built with VC6, even for the 2.10 series. This 
&gt;&gt; obviously affects the hoped-for shift to V8 for XP distros, but it's good 
&gt;&gt; news for the win98 crowd. Kind of.
&gt;
&gt; Actually, that's not entirely true.  The stuff that Tor provides (and is 
&gt; on the ftp server) isn't BUILT with MSVC at all (and at this point I can't 
&gt; get it to build with MSVC even though there are makefiles for 
&gt; it...although I HAVE managed to get most of the dependencies built with 
&gt; it...glib is being a pain - seems to be some bugs in the new stuff that 
&gt; still elude me... if someone with a little more C experience would give me 
&gt; a hand ;) ) - it's actually built with MinGW with a compile flag to make 
&gt; the binaries compatible with MSVC stuff.

:)  I got as far as having everything built except the gtk and gdk binaries 
once.... but it's years since I even tried. I'll try again when I get my 
shiny new box, I know a bit more now than I did back then. I also think if 
we still need to start from scratch the javascript approach Wez made for PHP 
is simpler - and faster - than the MSVS project approach...

Small note: Tor doesn't make the stuff on the win32/glade site, I've found 
updated .dlls there before now.

But the headers are
&gt; different, the runtime is hooked in using Anders Norlander w32api and not 
&gt; Microsoft's offical stuff.  So far this hasn't caused problems but at some 
&gt; point MinGW is planning on moving away from using Microsoft's MSCVRT 
&gt; runtime and using/distributing their own.  This becomes even more of a 
&gt; headache because PHP is NOT set up to compile with MinGW at all and doing 
&gt; so would mean a LOT of work.

I wouldn't even bother trying it. The whole point of using MSVCR* in the 
first place is that it's native. Although, having done a little more reading 
today, I have to say it seems MSVCR80 is about as native to WinXP as I am to 
Iceland...

The actual reason that Tor and Gtk
&gt; moved away from MSVC to MinGW was licensing - the license for 
&gt; redistributing the MSVCRT7.1 and 8.0.dll's is a bit goofy.

So what does
&gt; this mean?  At some point there will be runtime mixing unless PHP-Gtk2 
&gt; starts distributing their own gtk runtime compiled on MSVC or figures out 
&gt; how to compile php on MinGW.

I agree. But Tor's right about MSCVRT dependancy...

&gt;&gt; Win98/ME/NT4 will need VC6, PHP version 5.2.0 and GTK version 2.6.10 - 
&gt;&gt; that means the *only* changing element for them will be the PHP-GTK 
&gt;&gt; source as it matures. Actual releases will consist of the updated 
&gt;&gt; php-gtk2.dll and any php-gtk extensions that will work within those 
&gt;&gt; constraints, and there's absolutely no reason to make those users 
&gt;&gt; download everything else every time. It might be okay to use later PHP 
&gt;&gt; extensions (see Frank's earlier note) but I'm very much inclined to say 
&gt;&gt; 'just make do with this until you can upgrade your OS or move to *nix', 
&gt;&gt; because there's no reason to expect win32 API usage in extensions to 
&gt;&gt; remain portable now, and we don't have a good way to monitor that shift.
&gt;&gt;
&gt;&gt; Thoughts?
&gt;&gt;
&gt;&gt; - Steph
&gt;
&gt; I think that yes, if you keep support for the Win98/ME/NT4
&gt;  you'll need to leave them on the last supported php, the last supported 
&gt; gtk, and php-gtk2 with only 2.6 support built in (hence the generator 
&gt; patch).  But it would be nice for those on newer platforms to have newer 
&gt; stuff built with a newer runtime.

I've been reading scary stuff: 
http://www.microsoft.com/about/legal/useterms/default.aspx. This might 
explain why I only have msvcr71.dll twice on my laptop - once in C:/Windows 
(i.e. I likely put it there myself) and once as part of the OpenOffice 
distro - and NO copies of msvcr80.dll. I'd kind of assumed, since that's the 
C runtime, that it might be part of my OS - same as msvcrt.dll in days of 
yore.

Also, the VC8 version you currently have on board doesn't support x64. You 
need the fully paid-up license for that. Nice, eh? - given that part of the 
reason for looking into it (from PHP perspective) was it gave Windows users 
the chance to build their own binaries for free...

I think, let's wait and see what Edin does next. If he doesn't move to VC8 
there's no point in us trying to, and it's going to mean a lot of work on 
the GTK+ side.

- Steph

&gt;
&gt; Thanks,
&gt; Elizabeth Smith
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070130202401</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-01-30 20:24:01-0400</timestampReceived><subject>[PHP-GTK-DEV] Re: Patch for generator - allow compiling against multiple gtk versions</subject><body>

Here's the final version of the generator patch - this has no changes 
for the build system, it only alters files in the php-gtk/generator 
directory.

It allows the ability to pass a gtk library version when calling the 
generator (using -v) version 2.6 is assumed if nothing is passed.

The version is used only on include files, which can have a minimum 
version used after them

include "myfile" 2.8

This will allow files to be merged together whenever the minimum version 
of gtk required changes without any messy copy/pasting.

The patch also allows a restore keyword in overrides files to restore a 
method (thanks for the unignore array idea, Andrei, works great)

This patch doesn't change anything in the current build system and you 
can compile as usual with it applied - changes to configure and def 
files would be required to actually get it to do anything special.

Thanks,
Elizabeth Smith

["generator.patch" (text/plain)]

Index: generator.php
===================================================================
RCS file: /repository/php-gtk/generator/generator.php,v
retrieving revision 1.118
diff -u -r1.118 generator.php
--- generator.php	22 Jan 2007 14:27:32 -0000	1.118
+++ generator.php	30 Jan 2007 19:26:18 -0000
@@ -1406,23 +1406,24 @@
 }
 
  
-$result = Console_Getopt::getopt($argv, 'l:o:p:c:r:f:');
+$result = Console_Getopt::getopt($argv, 'l:o:p:c:r:f:v:');
 if (!$result || count($result[1]) &lt; 2)
-    die("usage: php generator.php [-l logfile] [-o overridesfile] [-p prefix] [-c \
functionclass ] [-r typesfile] [-f savefile] defsfile\n"); +    die("usage: php \
generator.php [-l logfile] [-o overridesfile] [-p prefix] [-c functionclass ] [-r \
typesfile] [-f savefile] [-v gtklibversion] defsfile\n");  
 list($opts, $argv) = $result;
 
 $prefix = 'Gtk';
 $function_class = null;
-$overrides = new Overrides();
+$overrides = null;
 $register_defs = array();
 $savefile = 'php://stdout';
 $logfile = 'php://stderr';
+$gtkversion = '2.6';
 
 foreach ($opts as $opt) {
     list($opt_spec, $opt_arg) = $opt;
     if ($opt_spec == 'o') {
-        $overrides = new Overrides($opt_arg);
+        $overrides = $opt_arg;
     } else if ($opt_spec == 'p') {
         $prefix = $opt_arg;
     } else if ($opt_spec == 'c') {
@@ -1433,6 +1434,8 @@
         $savefile = $opt_arg;
     } else if ($opt_spec == 'l') {
         $logfile = $opt_arg;
+    } else if ($opt_spec == 'v') {
+        $gtkversion = $opt_arg;
     }
 }
 
@@ -1440,11 +1443,12 @@
     include(dirname($argv[1]) . '/arg_types.php');
 }
 
-$parser = new Defs_Parser($argv[1]);
+$overrides = new Overrides($overrides, $gtkversion);
+$parser = new Defs_Parser($argv[1], $gtkversion);
 $generator = new Generator($parser, $overrides, $prefix, $function_class);
 $generator-&gt;set_logfile($logfile);
 foreach ($register_defs as $defs) {
-    $type_parser = new Defs_Parser($defs);
+    $type_parser = new Defs_Parser($defs, $gtkversion);
     $type_parser-&gt;start_parsing();
     $generator-&gt;register_types($type_parser);
 }
@@ -1455,4 +1459,4 @@
 error_reporting($old_error_reporting);
 
 /* vim: set et sts=4: */
-?&gt;
+?&gt;
\ No newline at end of file
Index: override.php
===================================================================
RCS file: /repository/php-gtk/generator/override.php,v
retrieving revision 1.32
diff -u -r1.32 override.php
--- override.php	27 Mar 2006 04:23:11 -0000	1.32
+++ override.php	30 Jan 2007 20:19:23 -0000
@@ -23,6 +23,7 @@
 
 class Overrides {
     var $ignores              = array();
+    var $unignores            = array();
     var $glob_ignores         = array();
     var $overrides            = array();
     var $prop_overrides       = array();
@@ -37,9 +38,15 @@
     var $post_registration    = array();
     var $lineinfo             = array();
     var $top_dir              = '';
+    var $gtkversion           = null; // gtk lib version
 
-    function Overrides($file_name = null)
+    function Overrides($file_name = null, $gtkversion = null)
     {
+        if (version_compare($gtkversion, '2.6', '&lt;'))
+        {
+            $gtkversion = '2.6';
+        }
+        $this-&gt;gtkversion = $gtkversion;
         if (!isset($file_name))
             return;
 
@@ -111,6 +118,13 @@
                     $this-&gt;ignores[$func] = true;
                 break;
 
+            case 'restore':
+                foreach ($words as $func)
+                    $this-&gt;unignores[$func] = true;
+                foreach (preg_split('!\s+!', $rest, -1, PREG_SPLIT_NO_EMPTY) as \
$func) +                    $this-&gt;unignores[$func] = true;
+                break;
+
             case 'ignore-win32':
                 if (WIN_OS) {
                     foreach ($words as $func)
@@ -176,7 +190,11 @@
 
             case 'include':
                 $file_name = $words[0];
-                $this-&gt;read_file($file_name);
+                // check for gtk lib version
+                if (!isset($words[1]) || version_compare($words[1], \
$this-&gt;gtkversion, '&lt;=')) +                {
+                    $this-&gt;read_file($file_name);
+                }
                 foreach (preg_split(',\s+,', $rest, -1, PREG_SPLIT_NO_EMPTY) as \
$file_name) {  $this-&gt;read_file($file_name);
                 }
@@ -227,6 +245,9 @@
 
     function is_ignored($name)
     {
+        if(isset($this-&gt;unignores[$name]))
+            return false;
+
         if (isset($this-&gt;ignores[$name]))
             return true;
 
Index: scheme.php
===================================================================
RCS file: /repository/php-gtk/generator/scheme.php,v
retrieving revision 1.28
diff -u -r1.28 scheme.php
--- scheme.php	30 Mar 2005 18:34:09 -0000	1.28
+++ scheme.php	27 Jan 2007 16:20:19 -0000
@@ -110,9 +110,15 @@
     var $boxed          = array();  // boxed types
     var $pointers       = array();  // pointers
     var $c_name         = array();  // C names of entities
+    var $gtkversion     = null; // gtk lib version
 
-    function Defs_Parser($arg)
+    function Defs_Parser($arg, $gtkversion = 0)
     {
+        if (version_compare($gtkversion, '2.6', '&lt;'))
+        {
+            $gtkversion = '2.6';
+        }
+        $this-&gt;gtkversion = $gtkversion;
         switch (gettype($arg)) {
             case 'string':
                 $this-&gt;_parse_or_load($arg);
@@ -415,9 +421,17 @@
     function handle_include($arg)
     {
         $include_file = $this-&gt;file_path . "/" . $arg[0];
-        error_log("Parsing file \"$include_file\".");
-        $include_tree = parse($include_file, 'r');
-        $this-&gt;start_parsing($include_tree);
+        // check for gtk lib version
+        if (isset($arg[1]) &amp;&amp; version_compare($arg[1], $this-&gt;gtkversion, '&lt;='))
+        {
+            error_log("Ignoring \"$include_file\". - needs version {$arg[1]}");
+        }
+        else
+        {
+            error_log("Parsing file \"$include_file\".");
+            $include_tree = parse($include_file, 'r');
+            $this-&gt;start_parsing($include_tree);
+        }
     }
 
     function handle_define_virtual($arg)



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070127192321</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-27 19:23:21-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Patch for generator - allow compiling against multiple gtk versions</subject><body>

On Jan 25, 2007, at 12:45 PM, Elizabeth Smith wrote:

&gt; The attached patch adds
&gt; 1. -v argument to generator.php and applies it to the defs_parser  
&gt; and override classes where appropriate.
&gt; 2. a check against the gtkversion in includes in the def_parser class
&gt; 3. a check against the gtkversion in includes in the overrides  
&gt; class and a restore option to un-ignore items (gtkplug and  
&gt; gtksocket come to mind)

Sounds okay.

&gt; To actually build against 2.10 or 2.8 there will need to be some  
&gt; additional changes made, basically adding some arg_types and adding  
&gt; enums to generator.php, but this patch should make building against  
&gt; multiple versions of gtk+ possible.  It might be a good idea to add  
&gt; a gtk_lib_version function/method somewhere - right now  
&gt; gtk::get_version returns the version of gtk+ that php-gtk2 was  
&gt; built against - but with the changes I've made you could build  
&gt; against 2.10 but only include features from 2.8 or 2.6 by passing  
&gt; that value via -v to the generator.

I am trying to think of when this behavior might be useful, i.e.  
building against 2.10 but specifying a lower version to the  
generator. IMHO, if we build against 2.10, we want all the defs and  
overrides for 2.10. So the gtk::get_version() should be fine.

As for the 'restore' keyword, it was probably not working because the  
includes for 2.8 happened before the ignores in the main file, so the  
check that restore was doing was against empty ignore tables. I think  
a better approach would be to maintain an 'unignore' table that  
'restore' keyword fills in, and then any 'ignore' keywords check  
against that table.

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070128031100</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-28 03:11:00-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Patch for generator - allow compiling against multiple gtk versions</subject><body>

Hey Andrei,

&gt; I am trying to think of when this behavior might be useful, i.e.  building 
&gt; against 2.10 but specifying a lower version to the  generator. IMHO, if we 
&gt; build against 2.10, we want all the defs and  overrides for 2.10. So the 
&gt; gtk::get_version() should be fine.

It'd be useful because we've now established that we need to keep a GTK 
2.6.10/PHP 5.2.0 runtime handy for half the Windows systems around, in 
perpetua.

The rest can use GTK 2.10.6 and latest PHP CVS...

- Steph

&gt; As for the 'restore' keyword, it was probably not working because the 
&gt; includes for 2.8 happened before the ignores in the main file, so the 
&gt; check that restore was doing was against empty ignore tables. I think  a 
&gt; better approach would be to maintain an 'unignore' table that  'restore' 
&gt; keyword fills in, and then any 'ignore' keywords check  against that 
&gt; table.
&gt;
&gt; -Andrei
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070128174816</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-28 17:48:16-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Patch for generator - allow compiling against multiple gtk versions</subject><body>

On Jan 27, 2007, at 7:11 PM, Steph Fox wrote:

&gt; It'd be useful because we've now established that we need to keep a  
&gt; GTK 2.6.10/PHP 5.2.0 runtime handy for half the Windows systems  
&gt; around, in perpetua.

Sure, but wouldn't you just build against 2.6.10 in that case anyway?

&gt; The rest can use GTK 2.10.6 and latest PHP CVS...

Elizabeth's versioning stuff has nothing to do with PHP version, does  
it?

-Andrei

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070128175854</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-28 17:58:54-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Patch for generator - allow compiling against multiple gtk versions</subject><body>

Hey Andrei,


&gt; On Jan 27, 2007, at 7:11 PM, Steph Fox wrote:
&gt; 
&gt;&gt; It'd be useful because we've now established that we need to keep a  
&gt;&gt; GTK 2.6.10/PHP 5.2.0 runtime handy for half the Windows systems  
&gt;&gt; around, in perpetua.
&gt; 
&gt; Sure, but wouldn't you just build against 2.6.10 in that case anyway?
&gt; 
&gt;&gt; The rest can use GTK 2.10.6 and latest PHP CVS...
&gt; 
&gt; Elizabeth's versioning stuff has nothing to do with PHP version, does  
&gt; it?

2.6.10 is not 2.10.6...

- Steph

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070129165848</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-29 16:58:48-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Patch for generator - allow compiling against multiple gtk versions</subject><body>

You didn't answer my question. If people need a GTK 2.6.10/PHP 5.2.0 
runtime, wouldn't we build it against GTK 2.6.10 directly?

-Andrei

On Jan 28, 2007, at 9:58 AM, Steph Fox wrote:

&gt; Hey Andrei,
&gt;
&gt;
&gt;&gt; On Jan 27, 2007, at 7:11 PM, Steph Fox wrote:
&gt;&gt;&gt; It'd be useful because we've now established that we need to keep a  
&gt;&gt;&gt; GTK 2.6.10/PHP 5.2.0 runtime handy for half the Windows systems  
&gt;&gt;&gt; around, in perpetua.
&gt;&gt; Sure, but wouldn't you just build against 2.6.10 in that case anyway?
&gt;&gt;&gt; The rest can use GTK 2.10.6 and latest PHP CVS...
&gt;&gt; Elizabeth's versioning stuff has nothing to do with PHP version, does 
&gt;&gt;  it?
&gt;
&gt; 2.6.10 is not 2.10.6...
&gt;
&gt; - Steph
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070130203257</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-01-30 20:32:57-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Patch for generator - allow compiling against multiple</subject><body>

Andrei Zmievski wrote:
&gt; You didn't answer my question. If people need a GTK 2.6.10/PHP 5.2.0 
&gt; runtime, wouldn't we build it against GTK 2.6.10 directly?
&gt; 
&gt; -Andrei

That's probably true, but that's a build system issue and has nothing to 
do with the actual generator patches.  Deciding on a version and/or 
allowing a configure switch change to override the default version found 
is something configure.js and ./configure would need to handle.  I have 
patches for the windows build system that allow the user to override the 
found library version, but that can easily be taken out if you don't 
think it's a good idea.

And yes, the generator patch has absolutely nothing to do with php 
version - only gtk library version :)

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070128204804</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-28 20:48:04-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] GtkSheet / GtkExtra 2.x in php-gtk 2?</subject><body>

Hi Lars,

We're a bit short of documentation that way. Just take a look at the source 
from PHP_GTK_1 and current CVS HEAD, which has a couple of wrapper 
extensions already. Or ask Elizabeth/Anant, or wait a couple of weeks... :)

- Steph


&gt; Hello,
&gt;
&gt; I need GtkExtra2 (Gtksheet2 in particular) for a project, and wish to port 
&gt; it for php-gtk2, could you perhaps point me in direction of some 
&gt; documentation for writing wrappers, I have knowledge of programming in C 
&gt; and Php.
&gt;
&gt; Thanks in advance
&gt;
&gt; Best regards
&gt;  Lars
&gt;
&gt; Steph Fox skrev:
&gt;&gt; Angel Maza wrote the original wrapper.
&gt;&gt;
&gt;&gt; I can't see that it would be difficult to port, assuming it hasn't 
&gt;&gt; changed dramatically anyway (I didn't look at the GtkSheet 2 source yet). 
&gt;&gt; The original didn't have a lot of overrides in it.
&gt;&gt;
&gt;&gt; Maybe Elizabeth or Anant has time to look into this? I won't, for the 
&gt;&gt; next week or two.
&gt;&gt;
&gt;&gt; - Steph
&gt;&gt;
&gt;&gt; ----- Original Message ----- From: "Torben Sørensen" &lt;tss@casalogic.dk&gt;
&gt;&gt; To: "Steph Fox" &lt;steph@zend.com&gt;
&gt;&gt; Sent: Sunday, January 28, 2007 5:05 PM
&gt;&gt; Subject: Re: [PHP-GTK] GtkSheet / GtkExtra 2.x in php-gtk 2?
&gt;&gt;
&gt;&gt;
&gt;&gt;&gt; Hi Steph,
&gt;&gt;&gt; Thanks - do you happen to know who made the original and/or if it's 
&gt;&gt;&gt; difficult to make the php "wrapper" to the original stuff from 
&gt;&gt;&gt; http://gtkextra.sourceforge.net/ ?
&gt;&gt;&gt; I might be interested to sponsor the port of GtkSheet 2.x to php-gtk 2
&gt;&gt;&gt;
&gt;&gt;&gt; Kind regards,
&gt;&gt;&gt; Torben
&gt;&gt;&gt;
&gt;&gt;&gt; Steph Fox wrote:
&gt;&gt;&gt;&gt; Short version: no.
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt; ----- Original Message ----- From: "Torben Sørensen" &lt;tss@casalogic.dk&gt;
&gt;&gt;&gt;&gt; To: "PHP-GTK gen" &lt;php-gtk-general@lists.php.net&gt;
&gt;&gt;&gt;&gt; Sent: Sunday, January 28, 2007 3:36 PM
&gt;&gt;&gt;&gt; Subject: [PHP-GTK] GtkSheet / GtkExtra 2.x in php-gtk 2?
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Hi
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; I'm looking for GtkSheet for php-gtk 2.
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Anybody knows if this port is on its way and the status?
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; -- 
&gt;&gt;&gt;&gt;&gt; Venlig hilsen
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Torben S. Sørensen
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Casalogic - Nattergalevej 6 - 2400 Købehavn NV
&gt;&gt;&gt;&gt;&gt; Tel. 7020 1063 - www.casalogic.dk
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Tilmeld dig vores spændende nyhedsbrev med nyt om Linux
&gt;&gt;&gt;&gt;&gt; og andre super Open Source programmer på www.casalogic.dk
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; -- 
&gt;&gt;&gt;&gt;&gt; PHP-GTK General Mailing List (http://gtk.php.net/)
&gt;&gt;&gt;&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; -- 
&gt;&gt;&gt; Venlig hilsen
&gt;&gt;&gt;
&gt;&gt;&gt; Torben S. Sørensen
&gt;&gt;&gt; Direktør
&gt;&gt;&gt;
&gt;&gt;&gt; Casalogic - Nattergalevej 6 - 2400 Købehavn NV
&gt;&gt;&gt; Tel. 7020 1063 - www.casalogic.dk
&gt;&gt;&gt;
&gt;&gt;&gt; Tilmeld dig vores spændende nyhedsbrev med nyt om Linux
&gt;&gt;&gt; og andre super Open Source programmer på www.casalogic.dk
&gt;&gt;&gt;
&gt;&gt;
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070129142837</emailId><senderName>"Torben_S._Sørensen"</senderName><senderEmail>tss@casalogic.com</senderEmail><timestampReceived>2007-01-29 14:28:37-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] GtkSheet / GtkExtra 2.x in php-gtk</subject><body>

Hi,

We can wait a few weeks. We can spend out time better helping out where 
we don't lack the knowledge and experience.

The GtkSheet object is need for our Open Source project FriFinans 
(http://sourceforge.net/projects/frifinans) - en ERP/Bookkeeping 
application written entirely in PHP-GTK2.

I currently have two programmer on the project (Lars cc: and another) 
and I myself am the sponsor and designer.

Kind regards,
Torben


Anant Narayanan wrote:
&gt;&gt; We're a bit short of documentation that way. Just take a look at the
&gt;&gt; source from PHP_GTK_1 and current CVS HEAD, which has a couple of
&gt;&gt; wrapper extensions already. Or ask Elizabeth/Anant, or wait a couple of
&gt;&gt; weeks... :)
&gt;&gt;     
&gt;
&gt; Wait a couple of weeks ;) I had a look at GtkExtra; and it won't take
&gt; much effort to port.
&gt;
&gt; If you're impatient; get in touch with me on IRC or something; and I'll
&gt; get you started.
&gt;
&gt; Cheers,
&gt;
&gt; --
&gt; Anant
&gt;
&gt;   


-- 

Med venlig hilsen

Torben S. Sørensen
Direktør

T: 7020 1063 
M: 2297 9959
F: 4484 4787

Casalogic, Nattergalevej 6, 2400 København NV

* Tilmeld dig vores nyhedsbrev på www.casalogic.dk og få relevante nyheder om Linux 
* og Open Source direkte ind i din mailbox ca. hver 2 måned.    
 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070111225459</emailId><senderName>ecc</senderName><senderEmail>ecc@camya.com</senderEmail><timestampReceived>2007-01-11 22:54:59-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkTreeView::set_model(null) not working?</subject><body>


Hi,
i ´ve used this too. But my problem is.... 

Im using glade. The TreeView is in the glade file.
I connect all signals to this Treeview. If i then unset the old treeview
(from glade), i have lost all signal connections!

I need to initialize the treeview/model complete, but need the allready
connected signals.

Have you an idea.

Btw.. is this a bug or not?


bob majdak jr wrote:
&gt; 
&gt; i have an application that switches models on a treeview several times 
&gt; during operating and it works just fine. you just have to have multiple 
&gt; list stores for the different views you have - or you could call clear() 
&gt; on your current liststore and repopulate it.
&gt; 
&gt; $view = new GtkTreeView;
&gt; $list = new GtkListStore(Gtk::TYPE_STRING);
&gt; $view-&gt;set_model($list);
&gt; 
&gt; - bob.
&gt; 
&gt; ecc wrote:
&gt; &gt; Hi,
&gt; &gt; i ´ve build a application with to view-modes in one gtkTreeView... a
&gt; &gt; list-mode and a detail mode. If i want initialize the treeview, i cant do
&gt; &gt; that with NULL (as described in the documentation). I need this, because
&gt; &gt; i
&gt; &gt; have a button to toggle between this two modes.
&gt; &gt; 
&gt; &gt; Is there a way to full reset the treeview + model, so i can refill the
&gt; &gt; empty
&gt; &gt; treeview from the scratch. Now i have to restart my program. :-(
&gt; &gt; 
&gt; &gt; Regards,
&gt; &gt; Andreas
&gt; &gt; 
&gt; 
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 
&gt; 
&gt; 

-- 
View this message in context: \
http://www.nabble.com/GtkTreeView%3A%3Aset_model%28null%29-not-working--tf2960076.html#a8288348
 Sent from the Php - GTK - Dev mailing list archive at Nabble.com.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php


</body></email><email><emailId>20070126222134</emailId><senderName>       24.176.31.201</senderName><senderEmail></senderEmail><timestampReceived>2007-01-26 22:21:34-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Changes in Windows distributions [Was: Patch for</subject><body>

I swear this is the last one for awhile (I'll be busy with the 
phpthrowdown) - quick patch to allow building against nts php on windows 
- the speedup is noticeable :)

["config.w32.patch" (text/plain)]

Index: config.w32
===================================================================
RCS file: /repository/php-gtk/ext/gtk+/config.w32,v
retrieving revision 1.5
diff -u -r1.5 config.w32
--- config.w32	24 Oct 2006 12:46:14 -0000	1.5
+++ config.w32	26 Jan 2007 22:19:05 -0000
@@ -1,5 +1,21 @@
-
-if (CHECK_HEADER("main/php.h") &amp;&amp; CHECK_LIB(PHP_GTK_DEBUG != "no" ? \
"php5ts_debug.lib" : "php5ts.lib", "php-gtk") &amp;&amp; +var check_lib;
+if(PHP_GTK_DEBUG == 'yes' &amp;&amp; PHP_GTK_ZTS == 'yes')
+{
+	check_lib = "php5ts_debug.lib";
+}
+else if(PHP_GTK_DEBUG == 'yes')
+{
+	check_lib = "php5_debug.lib";
+}
+else if(PHP_GTK_ZTS == 'yes')
+{
+	check_lib = "php5ts.lib";
+}
+else
+{
+	check_lib = "php5.lib";
+}
+if (CHECK_HEADER("main/php.h") &amp;&amp; CHECK_LIB(check_lib, "php-gtk") &amp;&amp;
 	CHECK_HEADER("iconv.h") &amp;&amp; CHECK_LIB("iconv.lib", "php-gtk") &amp;&amp;
 	CHECK_HEADER("libintl.h") &amp;&amp; CHECK_LIB("intl.lib", "php-gtk") &amp;&amp;
 	CHECK_HEADER("atk/atk.h") &amp;&amp; CHECK_LIB("atk-1.0.lib", "php-gtk") &amp;&amp;


["config.w32.in.patch" (text/plain)]

Index: config.w32.in
===================================================================
RCS file: /repository/php-gtk/win32/config.w32.in,v
retrieving revision 1.12
diff -u -r1.12 config.w32.in
--- config.w32.in	17 Jun 2006 14:47:08 -0000	1.12
+++ config.w32.in	26 Jan 2007 22:14:34 -0000
@@ -46,6 +46,7 @@
 ARG_WITH('php-build', 'Path to where you extracted \
http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of this source \
dir (..\\php_build) if not specified', 'no');  ARG_WITH('cygwin', 'Path to cygwin \
utilities on your system', '\\cygwin');  
+ARG_ENABLE('zts', 'Thread safety', 'yes');
 // stick objects somewhere outside of the source tree
 ARG_ENABLE('object-out-dir', 'Alternative location for binary objects during build', \
'');  if (PHP_GTK_OBJECT_OUT_DIR.length) {
@@ -81,11 +82,11 @@
 DEFINE("LIBS", "kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib \
advapi32.lib shell32.lib ole32.lib");  
 if (PHP_GTK_DEBUG == "yes") {
-	DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. /I main /I \
..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I ..\\php5\\TSRM /D \
ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 /D _DEBUG /D _WINDOWS /D \
_MBCS /D _USRDLL"); +	DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I \
..\\.. /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I \
..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 /D _DEBUG /D \
_WINDOWS /D _MBCS /D _USRDLL");  ADD_FLAG("LDFLAGS", "/debug");
 
 } else {
-	DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I main /I \
..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I ..\\php5\\TSRM /D \
ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D NDEBUG /D _WINDOWS /D \
_MBCS /D _USRDLL"); +	DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I \
..\\.. /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I \
..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D NDEBUG /D \
_WINDOWS /D _MBCS /D _USRDLL");  }
 
 if (VCVERS &lt; 14) {
@@ -99,6 +100,10 @@
 	ADD_FLAG('CFLAGS', '/GS /wd4996 ');
 }
 
+if (PHP_GTK_ZTS == "yes") {
+	ADD_FLAG("CFLAGS", "/D ZTS=1");
+}
+
 if (PHP_GTK_PHP_BUILD == 'no') {
 	if (FSO.FolderExists("..\\php_build")) {
 		PHP_GTK_PHP_BUILD = "..\\php_build";



-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070130234647</emailId><senderName>"Lars J."</senderName><senderEmail>cipherz@slamsoft.dk</senderEmail><timestampReceived>2007-01-30 23:46:47-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: [PHP-GTK] Announcing PHP-GTK-EDGE</subject><body>

Hello,

If experience problems building the bleeding edge or other difficulties 
should I and where should I report these ?

(So far after minor problems with make the gtksheet works nicely :) - 
thanks)

Best regards
  Lars

Andrei Zmievski wrote:
&gt; On Jan 30, 2007, at 8:42 AM, Anant Narayanan wrote:
&gt;&gt; Uh no, what gives you that idea? I didn't want to put those patches in
&gt;&gt; the real CVS (once bitten, twice shy); so I put them somewhere else.
&gt;&gt; When these patches are considered stable enough to be in the main tree;
&gt;&gt; it'll go in.
&gt;
&gt; Are you offering patches or full source tree? Because your message 
&gt; made it sound like it was the latter. I don't have a problem with 
&gt; patches, but having another copy of PHP-GTK source tree, especially 
&gt; one that purports to have the latest bleeding edge enhancements, is 
&gt; not something I like.
&gt;
&gt;&gt; I remember asking in a mail sometime ago (I quote):
&gt;&gt;
&gt;&gt;&gt; Andrei, I've looked through this and can commit a set of patches that
&gt;&gt;&gt; would allow us to build against the latest detected version of Gtk+ on
&gt;&gt;&gt; the user's system (which can also be overridden with the ./configure
&gt;&gt;&gt; switch).
&gt;&gt;
&gt;&gt; I received no green signal from you on this, so I assumed you didn't
&gt;&gt; want 2.10 support to go in yet.
&gt;
&gt; I've sent a couple of replies on this topic to php-gtk-dev and did not 
&gt; get any response to them either, except from Steph, but was a one 
&gt; liner that didn't answer my questions. So we did not come to a 
&gt; consensus on the multi-version builds. As for your patches to the 
&gt; build system, I haven't seen them yet either. If you can send them to 
&gt; the php-gtk-dev mailing list so we can take a look at them, I'd 
&gt; appreciate it.
&gt;
&gt; -Andrei
&gt;

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070131061715</emailId><senderName>"Steph Fox"</senderName><senderEmail>steph@zend.com</senderEmail><timestampReceived>2007-01-31 06:17:15-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Allow out-of-box-build for MSVC 2005</subject><body>

ps ignore that last bit - I just now looked again and saw it only affects 
doze anyway :)

&gt; OK, I finally made time for looking (5am, heh). Wondering why you took GX 
&gt; out of the lineup for release builds and then added it back in to 
&gt; 2005-only release builds as EHsc... Is GX actually deprecated in 2005? If 
&gt; so, just change it to EHsc in the original line - that will work under VC6 
&gt; too.
&gt;
&gt; Please don't commit just yet, I can't keep my eyes open long enough to do 
&gt; a build right now and I'm not too sure about the MT business (why write 
&gt; any lines at all if mt doesn't exist? what happens when it's defined as 
&gt; ws?) or about the file include order. It probably won't break anything 
&gt; here, but it might for Andrei - we had all kinds of hell with circular 
&gt; inclusions at first.
&gt;
&gt; - Steph
&gt;
&gt; ----- Original Message ----- 
&gt; From: "Elizabeth Smith" &lt;emsmith@elizabethmariesmith.com&gt;
&gt; To: &lt;php-gtk-dev@lists.php.net&gt;
&gt; Sent: Tuesday, January 30, 2007 11:16 PM
&gt; Subject: [PHP-GTK-DEV] Allow out-of-box-build for MSVC 2005
&gt;
&gt;
&gt;&gt; Evening,
&gt;&gt;
&gt;&gt; I started a new thread here because I think everyone was getting
&gt;&gt; confused with all the generator patch stuff, and this is really
&gt;&gt; something completely different.
&gt;&gt;
&gt;&gt; I know you're not looking to move the official builds off of MSVC6 for a
&gt;&gt; while, Steph, (or at least until Edin moves PHP itself) but it's really
&gt;&gt; annoying to have to alter a bunch of php-gtk2 files just to build
&gt;&gt; development versions here with MSVC 2005 - any chance I can get an ok to
&gt;&gt; apply the attached patch?
&gt;&gt;
&gt;&gt; It allows for three things - it folds in support for --enable-debug-pack
&gt;&gt; (something the regular php build system already provides, in fact I
&gt;&gt; copied the support from there, and it is very useful for tracking
&gt;&gt; annoying windows crashes with release builds), allows --disable-zts to
&gt;&gt; do non-thread-safe builds, and allows MSVC 2005 to compile php-gtk "out
&gt;&gt; of the box"  (fixes compiler flags and adds manifest packing) All the
&gt;&gt; changes are transparent, meaning you won't even see them on MSVC6 (well,
&gt;&gt; unless you want to use one of the new configure flags) because they're
&gt;&gt; only applied when the right compiler is detected so it should not affect
&gt;&gt; current builds at all.
&gt;&gt;
&gt;&gt; The only potentially problematic change is in php_gtk.h - the
&gt;&gt; config.w32.h must be included before php.h - there are 2005 specific
&gt;&gt; pragmas in there that tell the stupid compiler which types to use -
&gt;&gt; without the change the compiler bombs miserably however I don't believe
&gt;&gt; this should change anything.
&gt;&gt;
&gt;&gt; Thanks,
&gt;&gt; Elizabeth Smith
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; --------------------------------------------------------------------------------
&gt;
&gt;
&gt;&gt; Index: main/php_gtk.h
&gt;&gt; ===================================================================
&gt;&gt; RCS file: /repository/php-gtk/main/php_gtk.h,v
&gt;&gt; retrieving revision 1.138
&gt;&gt; diff -u -r1.138 php_gtk.h
&gt;&gt; --- main/php_gtk.h 15 Oct 2006 00:48:48 -0000 1.138
&gt;&gt; +++ main/php_gtk.h 30 Jan 2007 20:38:50 -0000
&gt;&gt; @@ -23,13 +23,13 @@
&gt;&gt; #ifndef _PHP_GTK_H
&gt;&gt; #define _PHP_GTK_H
&gt;&gt;
&gt;&gt; -#include "php.h"
&gt;&gt; -#include "php_ini.h"
&gt;&gt; #ifdef PHP_WIN32
&gt;&gt; #include "config.w32.h"
&gt;&gt; #else
&gt;&gt; #include "config.h"
&gt;&gt; #endif
&gt;&gt; +#include "php.h"
&gt;&gt; +#include "php_ini.h"
&gt;&gt;
&gt;&gt; /* workaround for expat-related declaration in PHP compat file */
&gt;&gt; #ifdef lookup
&gt;&gt; Index: win32/config.w32.in
&gt;&gt; ===================================================================
&gt;&gt; RCS file: /repository/php-gtk/win32/config.w32.in,v
&gt;&gt; retrieving revision 1.12
&gt;&gt; diff -u -r1.12 config.w32.in
&gt;&gt; --- win32/config.w32.in 17 Jun 2006 14:47:08 -0000 1.12
&gt;&gt; +++ win32/config.w32.in 30 Jan 2007 21:14:37 -0000
&gt;&gt; @@ -14,6 +14,9 @@
&gt;&gt; PATH_PROG('link', WshShell.Environment("Process").Item("PATH"), "LD");
&gt;&gt; PATH_PROG('nmake');
&gt;&gt;
&gt;&gt; +// Try locating manifest tool
&gt;&gt; +PATH_PROG('mt', WshShell.Environment("Process").Item("PATH"), "MT");
&gt;&gt; +
&gt;&gt; // we don't want to define LIB, as that will override the default library 
&gt;&gt; path set in that env var
&gt;&gt; PATH_PROG('lib', null, 'MAKE_LIB');
&gt;&gt; PATH_PROG('php');
&gt;&gt; @@ -45,6 +48,7 @@
&gt;&gt;
&gt;&gt; ARG_WITH('php-build', 'Path to where you extracted 
&gt;&gt; http://www.php.net/extra/win32build.zip. Assumes that it is a sibling of 
&gt;&gt; this source dir (..\\php_build) if not specified', 'no');
&gt;&gt; ARG_WITH('cygwin', 'Path to cygwin utilities on your system', 
&gt;&gt; '\\cygwin');
&gt;&gt; +ARG_ENABLE('zts', 'Thread safety', 'yes');
&gt;&gt;
&gt;&gt; // stick objects somewhere outside of the source tree
&gt;&gt; ARG_ENABLE('object-out-dir', 'Alternative location for binary objects 
&gt;&gt; during build', '');
&gt;&gt; @@ -56,6 +60,10 @@
&gt;&gt; }
&gt;&gt;
&gt;&gt; ARG_ENABLE('debug', 'Compile with debugging symbols', "no");
&gt;&gt; +ARG_ENABLE('debug-pack', 'Release binaries with external debug symbols 
&gt;&gt; (--enable-debug must not be specified)', 'no');
&gt;&gt; +if (PHP_GTK_DEBUG == "yes" &amp;&amp; PHP_GTK_DEBUG_PACK == "yes") {
&gt;&gt; + ERROR("Use of both --enable-debug and --enable-debug-pack not 
&gt;&gt; allowed.");
&gt;&gt; +}
&gt;&gt;
&gt;&gt; // Set some debug-specific options
&gt;&gt; if (PHP_GTK_DEBUG == "yes") {
&gt;&gt; @@ -81,22 +89,36 @@
&gt;&gt; DEFINE("LIBS", "kernel32.lib user32.lib gdi32.lib winspool.lib 
&gt;&gt; comdlg32.lib advapi32.lib shell32.lib ole32.lib");
&gt;&gt;
&gt;&gt; if (PHP_GTK_DEBUG == "yes") {
&gt;&gt; - DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. 
&gt;&gt; /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend 
&gt;&gt; /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=1 /D PHP_WIN32 /D 
&gt;&gt; WIN32 /D _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt;&gt; + DEFINE("CFLAGS", "/nologo /LDd /MDd /Gm /ZI /GZ /I . /I ..\\ /I ..\\.. 
&gt;&gt; /I main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend 
&gt;&gt; /I ..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=1 /D PHP_WIN32 /D WIN32 /D 
&gt;&gt; _DEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt;&gt;  ADD_FLAG("LDFLAGS", "/debug");
&gt;&gt;
&gt;&gt; } else {
&gt;&gt; - DEFINE("CFLAGS", "/nologo /MD /W3 /GX /O2 /I . /I ..\\ /I ..\\.. /I 
&gt;&gt; main /I ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I 
&gt;&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZTS=1 /D ZEND_DEBUG=0 /D PHP_WIN32 /D 
&gt;&gt; WIN32 /D NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt;&gt; + DEFINE("CFLAGS", "/nologo /MD /W3 /O2 /I . /I ..\\ /I ..\\.. /I main /I 
&gt;&gt; ..\\main /I ext /I ..\\ext /I ..\\php5\\main /I ..\\php5\\Zend /I 
&gt;&gt; ..\\php5\\TSRM /D ZEND_WIN32 /D ZEND_DEBUG=0 /D PHP_WIN32 /D WIN32 /D 
&gt;&gt; NDEBUG /D _WINDOWS /D _MBCS /D _USRDLL");
&gt;&gt; + // Generate external debug files when --enable-debug-pack is specified
&gt;&gt; + if (PHP_GTK_DEBUG_PACK == "yes") {
&gt;&gt; + ADD_FLAG("CFLAGS", "/Zi");
&gt;&gt; + ADD_FLAG("LDFLAGS", "/incremental:no /debug /opt:ref,icf");
&gt;&gt; + }
&gt;&gt; }
&gt;&gt;
&gt;&gt; if (VCVERS &lt; 14) {
&gt;&gt;  // Enable automatic precompiled headers
&gt;&gt; - ADD_FLAG('CFLAGS', '/YX /c');
&gt;&gt; + ADD_FLAG('CFLAGS', '/YX /c /GX');
&gt;&gt; }
&gt;&gt;
&gt;&gt; if (VCVERS &gt;= 14) {
&gt;&gt;  // fun stuff: MS deprecated ANSI stdio and similar functions - disable 
&gt;&gt; warnings
&gt;&gt;  // GS hardens the binary against buffer overruns
&gt;&gt; - ADD_FLAG('CFLAGS', '/GS /wd4996 ');
&gt;&gt; + ADD_FLAG('CFLAGS', '/EHsc /GS /wd4996 ');
&gt;&gt; + if (PHP_GTK_DEBUG == "yes")
&gt;&gt; + {
&gt;&gt; + // Set some debug/release specific options
&gt;&gt; + ADD_FLAG('CFLAGS', ' /RTC1 ');
&gt;&gt; + }
&gt;&gt; +}
&gt;&gt; +
&gt;&gt; +if (PHP_GTK_ZTS == "yes") {
&gt;&gt; + ADD_FLAG("CFLAGS", "/D ZTS=1");
&gt;&gt; }
&gt;&gt;
&gt;&gt; if (PHP_GTK_PHP_BUILD == 'no') {
&gt;&gt; Index: win32/confutils.js
&gt;&gt; ===================================================================
&gt;&gt; RCS file: /repository/php-gtk/win32/confutils.js,v
&gt;&gt; retrieving revision 1.19
&gt;&gt; diff -u -r1.19 confutils.js
&gt;&gt; --- win32/confutils.js 17 Jul 2006 17:00:09 -0000 1.19
&gt;&gt; +++ win32/confutils.js 30 Jan 2007 21:18:50 -0000
&gt;&gt; @@ -668,6 +668,7 @@
&gt;&gt;
&gt;&gt;  MFO.WriteLine("$(BUILD_DIR)\\" + dllname + ": $(" + EXT + 
&gt;&gt; "_GLOBAL_OBJS)" + res_var);
&gt;&gt;  MFO.WriteLine("\t" + ld + " /out:$(BUILD_DIR)\\" + dllname + " $(" + EXT 
&gt;&gt; + "_LDFLAGS)" + dllflags + " $(LDFLAGS) $(" + EXT + "_GLOBAL_OBJS) 
&gt;&gt; $(LIBS_" + EXT + ")" + dep_libs + " $(LIBS)" + res_var);
&gt;&gt; + MFO.WriteLine("\t-@$(_VC_MANIFEST_EMBED_DLL)");
&gt;&gt;
&gt;&gt;  MFO.WriteBlankLines(1);
&gt;&gt;  MFO.WriteLine(dllname + ": $(BUILD_DIR)\\" + dllname);
&gt;&gt; @@ -968,6 +969,16 @@
&gt;&gt;  MF.WriteLine(keys[i] + "=" + configure_subst.Item(keys[i]) + " ");
&gt;&gt;  }
&gt;&gt;
&gt;&gt; + MF.WriteLine("!if $(MT) == \"\"");
&gt;&gt; + MF.WriteBlankLines(1);
&gt;&gt; + MF.WriteLine("_VC_MANIFEST_EMBED_DLL=");
&gt;&gt; + MF.WriteBlankLines(1);
&gt;&gt; + MF.WriteLine("!else");
&gt;&gt; + MF.WriteBlankLines(1);
&gt;&gt; + MF.WriteLine("_VC_MANIFEST_EMBED_DLL= $(MT) -nologo -manifest 
&gt;&gt; $@.manifest -outputresource:$@;2");
&gt;&gt; + MF.WriteBlankLines(1);
&gt;&gt; + MF.WriteLine("!endif");
&gt;&gt; +
&gt;&gt;  MF.WriteBlankLines(1);
&gt;&gt;  MF.WriteLine("all: $(EXT_TARGETS)");
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;
&gt;
&gt; --------------------------------------------------------------------------------
&gt;
&gt;
&gt;&gt; -- 
&gt;&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt;&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php
&gt; 

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070131171041</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-31 17:10:41-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Patch for generator - allow compiling against multiple gtk versions</subject><body>

I understand this. I was talking about the gtk::library_version() 
function that you proposed. But yes, I'm against the idea of overriding 
found version.

-Andrei

On Jan 30, 2007, at 12:32 PM, Elizabeth Smith wrote:

&gt; Andrei Zmievski wrote:
&gt;&gt; You didn't answer my question. If people need a GTK 2.6.10/PHP 5.2.0 
&gt;&gt; runtime, wouldn't we build it against GTK 2.6.10 directly?
&gt;&gt; -Andrei
&gt;
&gt; That's probably true, but that's a build system issue and has nothing 
&gt; to do with the actual generator patches.  Deciding on a version and/or 
&gt; allowing a configure switch change to override the default version 
&gt; found is something configure.js and ./configure would need to handle.  
&gt; I have patches for the windows build system that allow the user to 
&gt; override the found library version, but that can easily be taken out 
&gt; if you don't think it's a good idea.
&gt;
&gt; And yes, the generator patch has absolutely nothing to do with php 
&gt; version - only gtk library version :)
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070131171050</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-31 17:10:50-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: Patch for generator - allow compiling against multiple gtk versions</subject><body>

Looks fine. Please commit.

-Andrei

On Jan 30, 2007, at 12:24 PM, Elizabeth Smith wrote:

&gt; Here's the final version of the generator patch - this has no changes 
&gt; for the build system, it only alters files in the php-gtk/generator 
&gt; directory.
&gt;
&gt; It allows the ability to pass a gtk library version when calling the 
&gt; generator (using -v) version 2.6 is assumed if nothing is passed.
&gt;
&gt; The version is used only on include files, which can have a minimum 
&gt; version used after them
&gt;
&gt; include "myfile" 2.8
&gt;
&gt; This will allow files to be merged together whenever the minimum 
&gt; version of gtk required changes without any messy copy/pasting.
&gt;
&gt; The patch also allows a restore keyword in overrides files to restore 
&gt; a method (thanks for the unignore array idea, Andrei, works great)
&gt;
&gt; This patch doesn't change anything in the current build system and you 
&gt; can compile as usual with it applied - changes to configure and def 
&gt; files would be required to actually get it to do anything special.
&gt;
&gt; Thanks,
&gt; Elizabeth Smith
&gt; Index: generator.php
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/generator/generator.php,v
&gt; retrieving revision 1.118
&gt; diff -u -r1.118 generator.php
&gt; --- generator.php	22 Jan 2007 14:27:32 -0000	1.118
&gt; +++ generator.php	30 Jan 2007 19:26:18 -0000
&gt; @@ -1406,23 +1406,24 @@
&gt;  }
&gt;
&gt;
&gt; -$result = Console_Getopt::getopt($argv, 'l:o:p:c:r:f:');
&gt; +$result = Console_Getopt::getopt($argv, 'l:o:p:c:r:f:v:');
&gt;  if (!$result || count($result[1]) &lt; 2)
&gt; -    die("usage: php generator.php [-l logfile] [-o overridesfile] [-p 
&gt; prefix] [-c functionclass ] [-r typesfile] [-f savefile] defsfile\n");
&gt; +    die("usage: php generator.php [-l logfile] [-o overridesfile] [-p 
&gt; prefix] [-c functionclass ] [-r typesfile] [-f savefile] [-v 
&gt; gtklibversion] defsfile\n");
&gt;
&gt;  list($opts, $argv) = $result;
&gt;
&gt;  $prefix = 'Gtk';
&gt;  $function_class = null;
&gt; -$overrides = new Overrides();
&gt; +$overrides = null;
&gt;  $register_defs = array();
&gt;  $savefile = 'php://stdout';
&gt;  $logfile = 'php://stderr';
&gt; +$gtkversion = '2.6';
&gt;
&gt;  foreach ($opts as $opt) {
&gt;      list($opt_spec, $opt_arg) = $opt;
&gt;      if ($opt_spec == 'o') {
&gt; -        $overrides = new Overrides($opt_arg);
&gt; +        $overrides = $opt_arg;
&gt;      } else if ($opt_spec == 'p') {
&gt;          $prefix = $opt_arg;
&gt;      } else if ($opt_spec == 'c') {
&gt; @@ -1433,6 +1434,8 @@
&gt;          $savefile = $opt_arg;
&gt;      } else if ($opt_spec == 'l') {
&gt;          $logfile = $opt_arg;
&gt; +    } else if ($opt_spec == 'v') {
&gt; +        $gtkversion = $opt_arg;
&gt;      }
&gt;  }
&gt;
&gt; @@ -1440,11 +1443,12 @@
&gt;      include(dirname($argv[1]) . '/arg_types.php');
&gt;  }
&gt;
&gt; -$parser = new Defs_Parser($argv[1]);
&gt; +$overrides = new Overrides($overrides, $gtkversion);
&gt; +$parser = new Defs_Parser($argv[1], $gtkversion);
&gt;  $generator = new Generator($parser, $overrides, $prefix, 
&gt; $function_class);
&gt;  $generator-&gt;set_logfile($logfile);
&gt;  foreach ($register_defs as $defs) {
&gt; -    $type_parser = new Defs_Parser($defs);
&gt; +    $type_parser = new Defs_Parser($defs, $gtkversion);
&gt;      $type_parser-&gt;start_parsing();
&gt;      $generator-&gt;register_types($type_parser);
&gt;  }
&gt; @@ -1455,4 +1459,4 @@
&gt;  error_reporting($old_error_reporting);
&gt;
&gt;  /* vim: set et sts=4: */
&gt; -?&gt;
&gt; +?&gt;
&gt; \ No newline at end of file
&gt; Index: override.php
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/generator/override.php,v
&gt; retrieving revision 1.32
&gt; diff -u -r1.32 override.php
&gt; --- override.php	27 Mar 2006 04:23:11 -0000	1.32
&gt; +++ override.php	30 Jan 2007 20:19:23 -0000
&gt; @@ -23,6 +23,7 @@
&gt;
&gt;  class Overrides {
&gt;      var $ignores              = array();
&gt; +    var $unignores            = array();
&gt;      var $glob_ignores         = array();
&gt;      var $overrides            = array();
&gt;      var $prop_overrides       = array();
&gt; @@ -37,9 +38,15 @@
&gt;      var $post_registration    = array();
&gt;      var $lineinfo             = array();
&gt;      var $top_dir              = '';
&gt; +    var $gtkversion           = null; // gtk lib version
&gt;
&gt; -    function Overrides($file_name = null)
&gt; +    function Overrides($file_name = null, $gtkversion = null)
&gt;      {
&gt; +        if (version_compare($gtkversion, '2.6', '&lt;'))
&gt; +        {
&gt; +            $gtkversion = '2.6';
&gt; +        }
&gt; +        $this-&gt;gtkversion = $gtkversion;
&gt;          if (!isset($file_name))
&gt;              return;
&gt;
&gt; @@ -111,6 +118,13 @@
&gt;                      $this-&gt;ignores[$func] = true;
&gt;                  break;
&gt;
&gt; +            case 'restore':
&gt; +                foreach ($words as $func)
&gt; +                    $this-&gt;unignores[$func] = true;
&gt; +                foreach (preg_split('!\s+!', $rest, -1, 
&gt; PREG_SPLIT_NO_EMPTY) as $func)
&gt; +                    $this-&gt;unignores[$func] = true;
&gt; +                break;
&gt; +
&gt;              case 'ignore-win32':
&gt;                  if (WIN_OS) {
&gt;                      foreach ($words as $func)
&gt; @@ -176,7 +190,11 @@
&gt;
&gt;              case 'include':
&gt;                  $file_name = $words[0];
&gt; -                $this-&gt;read_file($file_name);
&gt; +                // check for gtk lib version
&gt; +                if (!isset($words[1]) || version_compare($words[1], 
&gt; $this-&gt;gtkversion, '&lt;='))
&gt; +                {
&gt; +                    $this-&gt;read_file($file_name);
&gt; +                }
&gt;                  foreach (preg_split(',\s+,', $rest, -1, 
&gt; PREG_SPLIT_NO_EMPTY) as $file_name) {
&gt;                      $this-&gt;read_file($file_name);
&gt;                  }
&gt; @@ -227,6 +245,9 @@
&gt;
&gt;      function is_ignored($name)
&gt;      {
&gt; +        if(isset($this-&gt;unignores[$name]))
&gt; +            return false;
&gt; +
&gt;          if (isset($this-&gt;ignores[$name]))
&gt;              return true;
&gt;
&gt; Index: scheme.php
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/generator/scheme.php,v
&gt; retrieving revision 1.28
&gt; diff -u -r1.28 scheme.php
&gt; --- scheme.php	30 Mar 2005 18:34:09 -0000	1.28
&gt; +++ scheme.php	27 Jan 2007 16:20:19 -0000
&gt; @@ -110,9 +110,15 @@
&gt;      var $boxed          = array();  // boxed types
&gt;      var $pointers       = array();  // pointers
&gt;      var $c_name         = array();  // C names of entities
&gt; +    var $gtkversion     = null; // gtk lib version
&gt;
&gt; -    function Defs_Parser($arg)
&gt; +    function Defs_Parser($arg, $gtkversion = 0)
&gt;      {
&gt; +        if (version_compare($gtkversion, '2.6', '&lt;'))
&gt; +        {
&gt; +            $gtkversion = '2.6';
&gt; +        }
&gt; +        $this-&gt;gtkversion = $gtkversion;
&gt;          switch (gettype($arg)) {
&gt;              case 'string':
&gt;                  $this-&gt;_parse_or_load($arg);
&gt; @@ -415,9 +421,17 @@
&gt;      function handle_include($arg)
&gt;      {
&gt;          $include_file = $this-&gt;file_path . "/" . $arg[0];
&gt; -        error_log("Parsing file \"$include_file\".");
&gt; -        $include_tree = parse($include_file, 'r');
&gt; -        $this-&gt;start_parsing($include_tree);
&gt; +        // check for gtk lib version
&gt; +        if (isset($arg[1]) &amp;&amp; version_compare($arg[1], 
&gt; $this-&gt;gtkversion, '&lt;='))
&gt; +        {
&gt; +            error_log("Ignoring \"$include_file\". - needs version 
&gt; {$arg[1]}");
&gt; +        }
&gt; +        else
&gt; +        {
&gt; +            error_log("Parsing file \"$include_file\".");
&gt; +            $include_tree = parse($include_file, 'r');
&gt; +            $this-&gt;start_parsing($include_tree);
&gt; +        }
&gt;      }
&gt;
&gt;      function handle_define_virtual($arg)
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070131173021</emailId><senderName>Andrei Zmievski</senderName><senderEmail>andrei@gravitonic.com</senderEmail><timestampReceived>2007-01-31 17:30:21-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] GtkPlug for Windows</subject><body>

Hi,

There is a reason that we do:

      wrapped_obj = g_object_new(phpg_gtype_from_zval(this_ptr), NULL);

Instead of:

      wrapped_obj = gtk_plug_new(socket_id);

Either one creates GtkPlug object under normal circumstances. The 
difference appears when you try to subclass GtkPlug class in PHP-land 
and register it as a Gtk+ type. Now, since you have to call parent's 
constructor, the first call would properly get the gtype from your 
custom class and create your custom Gtk+ object. The second call would 
erroneously create GtkPlug.

I think that we do not need the gtk_plug_construct() override. Just 
incorporate that call into the GtkPlug constructor.

-Andrei

On Jan 30, 2007, at 10:26 AM, Elizabeth Smith wrote:

&gt; Here's a fixed version of the override for gtkplug constructor (the 
&gt; current override doesn't work at all - go ahead try it, you get 
&gt; "internal object not found") - thanks to anant for the help
&gt;
&gt; I added a construct method initially because ruby/gnome has it.  Pygtk 
&gt; doesn't - it doesn't really matter I was simply checking parity with 
&gt; other language wrappers.  If you don't think it's needed then it 
&gt; doesn't need to be in - whatever.
&gt;
&gt; Thanks,
&gt; Elizabeth Smith
&gt; Index: gtk.overrides
&gt; ===================================================================
&gt; RCS file: /repository/php-gtk/ext/gtk+/gtk.overrides,v
&gt; retrieving revision 1.235
&gt; diff -u -r1.235 gtk.overrides
&gt; --- gtk.overrides	23 Jan 2007 18:26:08 -0000	1.235
&gt; +++ gtk.overrides	30 Jan 2007 18:23:31 -0000
&gt; @@ -4114,28 +4114,36 @@
&gt;  %% {{{ GtkPlug
&gt;
&gt;  %%
&gt; +add-arginfo GtkPlug construct
&gt; +static
&gt; +ZEND_BEGIN_ARG_INFO_EX(ARGINFO_NAME, 0, 0, 1)
&gt; +    ZEND_ARG_INFO(0, socket_id)
&gt; +    ZEND_ARG_OBJ_INFO(0, display, GdkDisplay, 1)
&gt; +ZEND_END_ARG_INFO();
&gt; +
&gt; +%%
&gt;  override gtk_plug_new
&gt;  PHP_METHOD
&gt;  {
&gt;      gulong socket_id;
&gt;      zval *display = NULL;
&gt; -    GObject *wrapped_obj = NULL;
&gt; -
&gt; +    GtkWidget *wrapped_obj = NULL;
&gt; +
&gt;      if (!php_gtk_parse_args(ZEND_NUM_ARGS(), "i|O", &amp;socket_id, 
&gt; &amp;display))
&gt;          PHPG_THROW_CONSTRUCT_EXCEPTION(GtkPlug);
&gt;
&gt; -    wrapped_obj = g_object_new(phpg_gtype_from_zval(this_ptr), NULL);
&gt; -
&gt;      if (display) {
&gt; -        
&gt; gtk_plug_construct_for_display(GTK_PLUG(PHPG_GOBJECT(this_ptr)),
&gt; -                                       
&gt; GDK_DISPLAY(PHPG_GOBJECT(display)), socket_id);
&gt; +        wrapped_obj = 
&gt; gtk_plug_new_for_display(GDK_DISPLAY(PHPG_GOBJECT(display)), 
&gt; socket_id);
&gt; +
&gt;      } else {
&gt; -        gtk_plug_construct(GTK_PLUG(PHPG_GOBJECT(this_ptr)), 
&gt; socket_id);
&gt; +        wrapped_obj = gtk_plug_new(socket_id);
&gt;      }
&gt; -
&gt; +
&gt;      if (!wrapped_obj) {
&gt;          PHPG_THROW_CONSTRUCT_EXCEPTION(GtkPlug);
&gt;      }
&gt; +
&gt; +    phpg_gobject_new(&amp;this_ptr, (GObject *) wrapped_obj TSRMLS_CC);
&gt;  }
&gt;
&gt;  %% }}}
&gt;
&gt; -- 
&gt; PHP-GTK Development Mailing List (http://gtk.php.net/)
&gt; To unsubscribe, visit: http://www.php.net/unsub.php

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email><email><emailId>20070131203422</emailId><senderName>       64.81.162.8</senderName><senderEmail></senderEmail><timestampReceived>2007-01-31 20:34:22-0400</timestampReceived><subject>Re: [PHP-GTK-DEV] Re: win32 installer [WAS: Announcing PHP-GTK-EDGE]</subject><body>

Anant Narayanan wrote:
&gt;&gt; The .msi installer under windoze requires one to have one of those M$
&gt;&gt; spyware programs installed on your system.  I refuse to bow to their
&gt;&gt; paranoia.
&gt; 
&gt; You mean the .NET framework?

Nope, got that.  I mean the 'Genuine' verifier, whatever it's called.
It says right in the name that it's spyware...

If you don't have it installed, you can't install from newer .msi files.


&gt; On a side note, if you're so paranoid why do you use Windows at all ;)

Because I need to use Photoshop - it does certain things that I need
that The GIMP doesn't.

-- 
PHP-GTK Development Mailing List (http://gtk.php.net/)
To unsubscribe, visit: http://www.php.net/unsub.php

</body></email></emails>